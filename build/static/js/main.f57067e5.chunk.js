(window["webpackJsonpcrew20-web"]=window["webpackJsonpcrew20-web"]||[]).push([[0],{123:function(e,t,a){},124:function(e,t,a){},138:function(e,t,a){},141:function(e,t,a){},152:function(e,t,a){"use strict";var n={prodCrewInvite:function(e){return console.log("prodCrewInvite notification",e),{user:e.user,title:"Invite",content:"You have been invited as production crew member for a project",data:e.data,icon:"",createdAt:new Date,read:!1,owner:e.owner}},crewInvite:function(e){return{user:e.user.id,title:"Invite",content:"You have been invited to crew for a project",data:e.data,icon:"",createdAt:new Date,read:!1,owner:e.owner}},crewInviteAccept:function(e){return{title:"Invite Accepted",content:e.data.sender.name.first+" "+e.data.sender.name.last+" has accepted your invitation to "+e.data.project.title,data:e.data,icon:"",createdAt:new Date,read:!1,owner:e.owner}},crewInviteReject:function(e){return{title:"Invite Rejected",content:e.data.sender.name.first+" "+e.data.sender.name.last+" has rejected your invitation to "+e.data.project.title,data:e.data,icon:"",createdAt:new Date,read:!1,owner:e.owner}},message:function(e){return{title:"New Message",content:e.content.substring(0,50),data:e.data,icon:"",createdAt:new Date,read:!1,owner:e.owner}},applicationReject:function(e){return{title:"Rejected",content:"Your application for crew has been rejected",data:e.data,icon:"",createdAt:new Date,read:!1,owner:e.owner}},applicationApprove:function(e){return{title:"Approved",content:"Your application for crew has been approved",data:e.data,icon:"",createdAt:new Date,read:!1,owner:e.owner}},crewApplication:function(e){return{title:"Crew Application",content:e.data.applicant.name.first+" "+e.data.applicant.name.last+" has applied as crew for "+e.data.project.title,data:e.data,icon:"",createdAt:new Date,read:!1,owner:e.owner}},connectRequest:function(e){return{title:"Connection Request",content:e.data.sender.name.first+" "+e.data.sender.name.last+" wants to connect",data:e.data,icon:"",createdAt:new Date,read:!1,user:e.receiverId}},connectDeny:function(e){return{title:"Connection Ignored",data:e.data,content:e.content,icon:"",createdAt:new Date,read:!1,owner:e.owner}},addToChatGroup:function(e){return{title:"Chat Group Invite",content:e.data.sender.name.first+" "+e.data.sender.name.last+" has added you to a chat group",data:e.data,icon:"",createdAt:new Date,read:!1,owner:e.owner}},eventInvite:function(e){return{title:"Event Invite",content:e.data.sender.name.first+" "+e.data.sender.name.last+" has invited you to an event",data:e.data,icon:"",createdAt:new Date,read:!1,owner:e.owner}},eventInviteAccept:function(e){return{title:"Event Invite Accepted",content:e.data.sender.name.first+" "+e.data.sender.name.last+" has accepted your invite to event: "+e.data.event.title,data:e.data,icon:"",createdAt:new Date,read:!1,owner:e.owner}},eventInviteReject:function(e){return{title:"Event Invite Rjected",content:e.data.sender.name.first+" "+e.data.sender.name.last+" cannot attend your event "+e.data.event.title,data:e.data,icon:"",createdAt:new Date,read:!1,owner:e.owner}}};window.notificationTypes=n,t.a=n},170:function(e,t,a){},171:function(e,t,a){},175:function(e,t,a){"use strict";var n=a(5),r=a(37),s=a.n(r),c={state:function(){var e={theme:{main:"light",colorScheme:{name:"c_1",color:"c_1",bg:"c_1_bg",accent:{dark:"light-grey",light:"light-grey"}},font:{primary:"rubik",other:"varela",other1:"roboto"}},projects:[],conversations:[],notifications:[],messages:[]};return window.initialiseState=e,e},setDefaultCurrency:function(){if(null!==localStorage.getItem("baseCurrency")){var e=JSON.parse(localStorage.getItem("baseCurrency"));Object(n.setGlobal)({baseCurrency:e})}else Object(n.setGlobal)({baseCurrency:{}});if(null!==localStorage.getItem("activeCurrency")){var t=JSON.parse(localStorage.getItem("activeCurrency"));Object(n.setGlobal)({activeCurrency:t,activeCurrencyIsSet:!0})}else Object(n.setGlobal)({activeCurrency:{},activeCurrencyIsSet:!1})},hydrate:function(){null===localStorage.getItem("account")&&localStorage.setItem("account",JSON.stringify(null)),null===localStorage.getItem("isAuthenticated")&&localStorage.setItem("isAuthenticated",JSON.stringify(!1)),null===localStorage.getItem("activeConversation")&&localStorage.setItem("activeConversation",JSON.stringify(null)),window.localStorage.gs},api:function(){return s.a.api.prod},start:function(){c.hydrate(),c.api()}};t.a=c},202:function(e,t,a){},224:function(e,t){e.exports=function(){return[{name:"c_1",color:"c_1",bg:"c_1_bg",accent:{dark:"light-grey",light:"light-grey"}},{name:"c_2",color:"c_2",bg:"c_2_bg",accent:{dark:"light-grey",light:"light-grey"}},{name:"c_3",color:"c_3",bg:"c_3_bg",accent:{dark:"light-grey",light:"light-grey"}},{name:"c_4",color:"c_4",bg:"c_4_bg",accent:{dark:"light-grey",light:"light-grey"}},{name:"c_5",color:"c_5",bg:"c_5_bg",accent:{dark:"light-grey",light:"light-grey"}},{name:"c_6",color:"c_6",bg:"c_6_bg",accent:{dark:"light-grey",light:"light-grey"}},{name:"c_7",color:"c_7",bg:"c_7_bg",accent:{dark:"light-grey",light:"light-grey"}},{name:"c_8",color:"c_8",bg:"c_8_bg",accent:{dark:"light-grey",light:"light-grey"}},{name:"c_9",color:"c_9",bg:"c_9_bg",accent:{dark:"light-grey",light:"light-grey"}}]}},280:function(e){e.exports=JSON.parse('[{"code":"CAD","symbol":"$","name":"Canadian dollar"},{"code":"HKD","symbol":"HK$","name":"Hong Kong dollar"},{"code":"ISK","symbol":"kr","name":"Icelandic kr\xf3na"},{"code":"PHP","symbol":"\u20b1","name":"Philippine peso"},{"code":"DKK","symbol":"Kr","name":"Danish krone"},{"code":"HUF","symbol":"Ft","name":"Hungarian forint"},{"code":"CZK","symbol":"K\u010d","name":"Czech koruna"},{"code":"GBP","symbol":"\xa3","name":"British pound"},{"code":"RON","symbol":"L","name":"Romanian leu"},{"code":"SEK","symbol":"kr","name":"Swedish krona"},{"code":"IDR","symbol":"Rp","name":"Indonesian rupiah"},{"code":"INR","symbol":"\u20b9","name":"Indian rupee"},{"code":"BRL","symbol":"R$","name":"Brazilian real"},{"code":"RUB","symbol":"R","name":"Russian ruble"},{"code":"HRK","symbol":"kn","name":"Croatian kuna"},{"code":"JPY","symbol":"\xa5","name":"Japanese yen"},{"code":"THB","symbol":"\u0e3f","name":"Thai baht"},{"code":"CHF","symbol":"Fr.","name":"Swiss franc"},{"code":"EUR","symbol":"\u20ac","name":"European Euro"},{"code":"MYR","symbol":"RM","name":"Malaysian ringgit"},{"code":"BGN","symbol":"BGN","name":"Bulgarian lev"},{"code":"TRY","symbol":"TRY","name":"Turkish new lira"},{"code":"CNY","symbol":"\xa5","name":"Chinese/Yuan renminbi"},{"code":"NOK","symbol":"kr","name":"Norwegian krone"},{"code":"NZD","symbol":"NZ$","name":"New Zealand dollar"},{"code":"ZAR","symbol":"R","name":"South African rand"},{"code":"USD","symbol":"US$","name":"United States dollar"},{"code":"MXN","symbol":"$","name":"Mexican peso"},{"code":"SGD","symbol":"S$","name":"Singapore dollar"},{"code":"AUD","symbol":"$","name":"Australian dollar"},{"code":"ILS","symbol":"\u20aa","name":"Israeli new sheqel"},{"code":"KRW","symbol":"W","name":"South Korean won"},{"code":"PLN","symbol":"z\u0142","name":"Polish zloty"}]')},37:function(e,t){e.exports={siteRoot:"https://crew.quantacom.co/",siteMeta:{title:"Crew20 : Film Crew Management Made Easier",author:"Christopher Hurrell ",image:"/image.png",description:"Crew management, made easier",siteUrl:"http://crew.quantacom.co",social:{twitter:"crew20"},postsPerPage:5},api:{dev:"http://localhost:3030/v1/",prod:"https://dev.iim.technology/v1/"},email:{systemEmail:"quantacomsoftware@gmail.com",fromName:"[ Crew 20 ]"},maps:{apiKey:"AIzaSyA_IMH_3G-OhGEZvzzbNrGU1e8p4yfJf4s"},mailjet:{api_key:"5aa08edbff41a28262efbd53bd10c535",api_secret:"6e1c9c1eb1511c874adaf0614bdec260"},mailgun:{api_key:"13be5264a82a538df626bb3461961a50-898ca80e-e8f3fe11"}}},378:function(e,t,a){"use strict";a(37);var n={info:function(e){return"ECG stream indicating abnormal cardiac readings."},warning:function(e){return"Warning, you could be in danger of cardiac arrest."},danger:function(e){return"You are in danger, get to the hospital immediately."},alert:function(e){return"info"===e.status?n.info():"warning"===e.status?n.warning():"danger"===e.status?n.danger():void 0}};t.a=n},399:function(e,t){},413:function(e,t,a){e.exports=a(777)},471:function(e){e.exports=JSON.parse("{}")},473:function(e,t,a){},474:function(e,t,a){},475:function(e,t,a){},476:function(e,t,a){},477:function(e,t,a){},478:function(e,t,a){},479:function(e,t,a){},480:function(e,t,a){},496:function(e,t,a){},548:function(e,t,a){},551:function(e,t,a){},565:function(e,t,a){},572:function(e,t,a){},58:function(e,t,a){"use strict";var n=a(2),r=a.n(n),s=a(38),c=a(4),o=a(5),i=a(175),l=void 0;function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(a,!0).forEach(function(t){Object(s.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var p={start:function(){}};p.extendUser=function(){var e=Object(c.a)(r.a.mark(function e(t){var a,n,s,o,i,l,u,m;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.user,n=f({},a),console.log(" "),console.log("[[ methods.extendUser profile ...user raw data]]",n),console.log(" "),s={config:{type:"",onboardingcomplete:!1},location:{},preferredCurrency:{},contact:{phone:""},grade:0,bio:"",role:"",connections:[],projects:[],additional:{ratings:{rating:0,ratings:[]},skills:[]}},o={email:n.email,password:"password1",auth0:n,profile:s},function(){var e=Object(c.a)(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(" "),console.log("[[ Store ]]",t),console.log(" "),e.abrupt("return",p.store({type:"account",data:t}));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(c.a)(r.a.mark(function e(t){var a,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(" "),console.log("[[ Insert : extended profile ]]",t),console.log(" "),"https://localhost:3030/v1/","users",a="https://localhost:3030/v1/users",console.log("[[ Endpoint ]]",a),n={method:"POST",headers:{origin:"localhost:3000","Content-Type":"application/json"},body:JSON.stringify(t)},e.abrupt("return",fetch(a,n).then(function(e){return e.json()}).then(function(e){return console.log(" "),console.log("[[ Extended user created ]]",e.user),console.log(" "),p.store({type:"account",data:e.user})}));case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),"https://localhost:3030/v1/","users",l="?email="+n.email,u="https://localhost:3030/v1/users"+l,console.log("[[ Endpoint ]]",u),m={method:"GET",headers:{origin:"localhost:3000","Content-Type":"application/json"}},e.abrupt("return",fetch(u,m).then(function(e){return e.json()}).then(function(e){return console.log(" "),console.log("[[ find users with email "+n.email+"]]",e),console.log(" "),e.length>0?p.store({type:"account",data:e[0]}):0===e.length?i(o):void 0}));case 16:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),p.store=function(e){var t=e.type,a=e.data;console.log(" "),console.log("[[[ Storing "+t+" ]]]",a),console.log(" "),Object(o.setGlobal)(Object(s.a)({},t,a));var n=Object(o.getGlobal)();localStorage.setItem("globalData",JSON.stringify(n)),localStorage.setItem(t,JSON.stringify(a))},p.call=function(){var e=Object(c.a)(r.a.mark(function e(t){var a,n,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("appfunctions.call",t),a=t.endpoint,n=t.config,s=t.type,e.abrupt("return",fetch(a,n).then(function(e){return e.json()}).then(function(e){return p.store({type:s,data:e.data}),console.log("Request Response : ",e.data),e.data}));case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),p.post=function(){var e=Object(c.a)(r.a.mark(function e(t){var a,n,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("appfunctions.call",t),a=t.endpoint,n=t.config,s=t.type,e.abrupt("return",fetch(a,n).then(function(e){return e.json()}).then(function(e){return p.store({type:s,data:e.data}),console.log("Request Response : ",e.data),e.data}));case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),p.call2=function(){var e=Object(c.a)(r.a.mark(function e(t){var a,n,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("appfunctions.call",t),a=t.endpoint,n=t.config,s=t.type,e.abrupt("return",fetch(a,n).then(function(e){return e.json()}).then(function(e){return p.store({type:s,data:e}),console.log("Request Response : ",e),e}));case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),p.fetchCollection=function(){var e=Object(c.a)(r.a.mark(function e(t){var a,n,s,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.type,t.self.setState({something:"test"}),n=i.a.api()+"/"+a,s={method:"GET",headers:{"Content-Type":"application/json"}},e.next=6,p.call({endpoint:n,config:s,type:a});case 6:return c=e.sent,p.store(a,c),console.log("Collection",c),e.abrupt("return",c);case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),p.fetchConversations=function(){var e=Object(c.a)(r.a.mark(function e(t){var a,n,s,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.endpoint,n=t.type,t.self,s={method:"GET",headers:{"Content-Type":"application/json"}},e.next=4,p.call2({endpoint:a,config:s,type:n});case 4:return c=e.sent,p.store(n,c),console.log("Collection",c),e.abrupt("return",c);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),p.updateDoc=function(){var e=Object(c.a)(r.a.mark(function e(t){var a,n,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.doc,t.self,console.log(l.state),n=i.a.api()+"/"+a._id,s={method:"PUT",headers:{"Content-Type":"application/json"}},"activeDoc",e.next=7,p.call({endpoint:n,config:s,type:"activeDoc"});case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),p.syncActiveDoc=function(e){var t=e.doc;e.self.setState({activeItem:t}),p.store({type:"activeDoc",data:t})},p.syncDoc=function(e){var t=e.doc;e.self;l.updateActiveProject(t),p.syncActiveDoc(t);var a=Object(o.getGlobal)().api+"/projects/"+t._id;fetch(a,{method:"PATCH",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){console.log("Updated Project",e),l.fetchProjects(),l.refresh(),setTimeout(function(){},1500)})},p.checkIfConversationExists=function(){var e=Object(c.a)(r.a.mark(function e(t){var a,n,s,c,o,i,u,f,m,d,h,b;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=JSON.parse(localStorage.getItem("conversations")),t){e.next=3;break}return e.abrupt("return",a);case 3:if(console.log("Messages",a),n=t._id,s={},!(a.length>0)){e.next=28;break}for(c=!0,o=!1,i=void 0,e.prev=10,u=a[Symbol.iterator]();!(c=(f=u.next()).done);c=!0)m=f.value,s=m.participants.includes(t._id)?{exists:!0,doc:m}:{exists:!1,doc:m};e.next=18;break;case 14:e.prev=14,e.t0=e.catch(10),o=!0,i=e.t0;case 18:e.prev=18,e.prev=19,c||null==u.return||u.return();case 21:if(e.prev=21,!o){e.next=24;break}throw i;case 24:return e.finish(21);case 25:return e.finish(18);case 26:e.next=29;break;case 28:s=!1;case 29:if(d=JSON.parse(localStorage.getItem("account")).user.sub,h={_id:Math.random().toString(36).substr(2,10),participants:[d,n],messages:[]},console.log("newConversation",h),s){e.next=42;break}return a.push(h),console.log("Messages payload",a),e.next=37,p.postCollection({endpoint:"https://jsonblob.com/api/7986d895-eb1d-11e9-9c02-633d90d7f5ff",type:"conversations",self:l,payload:a});case 37:return b=e.sent,console.log("updated conversations",b),e.abrupt("return",{collection:b,conversationExists1:s});case 42:return e.abrupt("return",{conversations:a,conversationExists1:s});case 43:case"end":return e.stop()}},e,null,[[10,14,18,26],[19,,21,25]])}));return function(t){return e.apply(this,arguments)}}(),p.findConversation=function(){var e=Object(c.a)(r.a.mark(function e(t){var a,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.recipientID,n=t.userID,e.next=3,window.db.conversations.find({$and:[{participants:a},{participants:n}]},function(e,t){return console.log("methods.findConversation",t[0]),t});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),t.a=p},6:function(e,t,a){"use strict";(function(e){a.d(t,"c",function(){return j}),a.d(t,"e",function(){return k}),a.d(t,"a",function(){return N}),a.d(t,"b",function(){return O});var n=a(38),r=a(2),s=a.n(r),c=a(53),o=a(4),i=a(5),l=a(37),u=a.n(l),f=a(378),p=a(58),m=a(154),d=a(74),h=a(89),b=a(13),v=a.n(b),w=a(152);function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(a,!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var y=new Set([]),j=(new Set([]),{get:function(e){if(null===localStorage.getItem(e))return{};if(null!==localStorage.getItem(e)){var t=localStorage.getItem(e);return"undefined"!==t?JSON.parse(t):{}}},set:function(e,t){localStorage.setItem(e,JSON.stringify(t))},fetchUnreadMessages:function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(o.a)(s.a.mark(function e(a){var n,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.self,r=t.userId,e.next=3,j.fetchConversations({self:n,userId:r,type:"private"}).then(function(e){var t=new Set,n=!0,s=!1,o=void 0;try{for(var i,l=function(){var e=i.value,a=!0,n=!1,s=void 0;try{for(var o,l=e.messages[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var u=o.value;u.seen.includes(r)||(0===Object(c.a)(t).filter(function(t){return t.conversation.id===e.id}).length&&t.add({conversation:e,messages:new Set}),Object(c.a)(t).filter(function(t){return t.conversation.id===e.id}).length>0&&Object(c.a)(t).filter(function(t){return t.conversation.id===e.id})[0].messages.add(u))}}catch(f){n=!0,s=f}finally{try{a||null==l.return||l.return()}finally{if(n)throw s}}},u=e[Symbol.iterator]();!(n=(i=u.next()).done);n=!0)l()}catch(f){s=!0,o=f}finally{try{n||null==u.return||u.return()}finally{if(s)throw o}}console.log("** Unread",Object(c.a)(t)),a(Object(c.a)(t))});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),fetchConversations:function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.self,a=t.userId,n=t.type,e.abrupt("return",new Promise(function(){var e=Object(o.a)(s.a.mark(function e(t){var r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r="https://api.crew20.devcolab.site/v1/conversations/?participants="+a+"&type="+n,e.next=3,fetch(r).then(function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.json());case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).then(function(){var e=Object(o.a)(s.a.mark(function e(a){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:N.set("conversations",a),t(a);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),checkConversationExists:function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(o.a)(s.a.mark(function e(a){var n,r,c,o,i,l,u,f,p,m,d,h,b,v,w,g,y,j,k,E,N,O,S,C;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.self,n=t.selfUserId,r=t.recipientId,c="https://api.crew20.devcolab.site/v1/conversations/?participants="+n,o="https://api.crew20.devcolab.site/v1/conversations/?participants="+r,e.next=5,fetch(c).then(function(e){return e.json()}).then(function(e){return e});case 5:return i=e.sent,e.next=8,fetch(o).then(function(e){return e.json()}).then(function(e){return e});case 8:l=e.sent,f=!1,p=!0,m=!1,d=void 0,e.prev=13,h=i[Symbol.iterator]();case 15:if(p=(b=h.next()).done){e.next=40;break}for(v=b.value,w=v.id,g=!0,y=!1,j=void 0,e.prev=21,k=l[Symbol.iterator]();!(g=(E=k.next()).done);g=!0)N=E.value,O=N.id,w===O&&("private"===N.type&&(S=x({},v,{},N),u=S,f=!0),"group"===N.type&&(C=x({},v,{},N),u=C,f=!1));e.next=29;break;case 25:e.prev=25,e.t0=e.catch(21),y=!0,j=e.t0;case 29:e.prev=29,e.prev=30,g||null==k.return||k.return();case 32:if(e.prev=32,!y){e.next=35;break}throw j;case 35:return e.finish(32);case 36:return e.finish(29);case 37:p=!0,e.next=15;break;case 40:e.next=46;break;case 42:e.prev=42,e.t1=e.catch(13),m=!0,d=e.t1;case 46:e.prev=46,e.prev=47,p||null==h.return||h.return();case 49:if(e.prev=49,!m){e.next=52;break}throw d;case 52:return e.finish(49);case 53:return e.finish(46);case 54:a({exists:f,conversation:u});case 55:case"end":return e.stop()}},e,null,[[13,42,46,54],[21,25,29,37],[30,,32,36],[47,,49,53]])}));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),updateConversation:function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(o.a)(s.a.mark(function e(a){var n,r,c,o,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.self,r=t.conversation,c=t.updateTimestamp,r.updatedAt=new Date,r.lastUpdate=new Date,c&&(r.lastUpdate=new Date),o=O.url("conversations")+r.id,i={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)},e.next=8,fetch(o,i).then(function(e){return e.json()}).then(function(e){if(n.props.conversations){var t=n.props.conversations,s=t.findIndex(function(t){return t.id===e.id});t[s]=e,n.props.updateActiveConversation({conversations:t,activeConversation:e})}a(r)});case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),findCurrency:function(){var e=Object(o.a)(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.country,e.abrupt("return",new Promise(function(){var e=Object(o.a)(s.a.mark(function e(t){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=4;break}return n="https://restcountries.eu/rest/v2/name/"+a,e.next=4,fetch(n,function(e,t){return t}).then(function(e){return e.json()}).then(function(e){var a=e[0].currencies[0];localStorage.setItem("activeCurrency",JSON.stringify(e[0].currencies[0])),localStorage.setItem("baseCurrency",JSON.stringify(e[0].currencies[0])),localStorage.setItem("activeCurrencyIsSet",JSON.stringify(!0)),t(a)});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),reverseGeocodeCity:function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.lat,n=t.long,e.abrupt("return",new Promise(function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:fetch("https://reverse.geocoder.api.here.com/6.2/reversegeocode.json?prox="+a+","+n+",250&mode=retrieveAddresses&maxresults=1&gen=9&app_id=ZZN2MPuexLyuz3VR0KDD&app_code=TnEsVJR8k3zxGMiAkbP_EQ",function(e,t){return t}).then(function(e){return e.json()}).then(function(e){e.Response&&e.Response.View[0]&&e.Response.View[0].Result[0]&&e.Response.View[0].Result[0].Location&&e.Response.View[0].Result[0].Location.Address&&e.Response.View[0].Result[0].Location.Address.AdditionalData;var a=e.Response&&e.Response.View[0]&&e.Response.View[0].Result[0]&&e.Response.View[0].Result[0].Location&&e.Response.View[0].Result[0].Location.Address;e.Response&&e.Response.View[0]&&e.Response.View[0].Result[0]&&e.Response.View[0].Result[0].Location&&e.Response.View[0].Result[0].Location.Address;p.a.store({type:"location",data:a}),p.a.store({type:"locationIsSet",data:!0}),t(a)});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),getGeoLocation:function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(o.a)(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=function(e){console.log("[[ getGeoLocation ]]",e);var a={lat:e.coords.latitude||0,long:e.coords.longitude||0};t(a)},"undefined"!==typeof window.navigator.geolocation&&window.navigator.geolocation.getCurrentPosition(a);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),createProject:function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.self,n=t.project,m.a.config({top:250,duration:0,maxCount:10}),m.a.loading("Creating project ... "),e.next=5,j.createProjectMain({self:a,project:n}).then(function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return m.a.loading("Configuring additional data ... "),e.next=3,j.createProjectConversations({self:a,project:t}).then(function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return m.a.loading("Configuring conversations ... "),e.next=3,j.createProjectCalendar({self:a,project:t}).then(function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return m.a.loading("Configuring calendar ... "),console.log("createProjectCalendar res => project ",t),e.next=4,j.createProjectRoster({self:a,project:t}).then(function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:m.a.loading("Configuring roster ... ");case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).then(function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 5:e.sent;case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),createProjectMain:function(){var e=Object(o.a)(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.self,a=t.project,e.abrupt("return",new Promise(function(){var e=Object(o.a)(s.a.mark(function e(t){var n,r,c,o;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n={}).title=a.projectName,n.description="",n.type=a.projectType,n.start_date=a.projectDate,n.end_date=a.projectEndDate,n.positions=a.positions,console.log("project",a),n.location=(a.location.address.county,a.location.address.county),n.owner=N.get("account").user.id,n.crew=[],n.productionCrew=[{user:N.get("account").user.id,permissions:["projectfiles","projectsettings","projectpeople","projectchecklists","projectratecalculator"]}],n.comments=[],n.invited=a.invited,n.shortlist=a.shortlist,n.createdAt=new Date,n.checklists=[],n.threads=[],n.conversations=[],e.next=21,N.getDates(a.projectDate,a.projectEndDate);case 21:return r=e.sent,n.days=r,console.log(" "),console.log(" "),console.log("[[ Project to create ]] ",JSON.stringify(n)),console.log(" "),console.log(" "),c=O.url("projects"),o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},e.next=32,fetch(c,o).then(function(e){return e.json()}).then(function(e){console.log("Project Created",e),t(e)});case 32:return e.abrupt("return",e.sent);case 33:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),createProjectConversations:function(e){var t=e.self,a=e.project;return console.log("createProjectConversations",e),new Promise(function(){var e=Object(o.a)(s.a.mark(function e(n){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.createProjectConversation({self:t,projectOwner:N.get("account").user.id,type:"event"}).then(function(){var e=Object(o.a)(s.a.mark(function e(r){var c,o,i,l,u,f,p,m,d;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.conversationId=r.id,c=a.days,o=!0,i=!1,l=void 0,e.prev=5,u=c[Symbol.iterator]();case 7:if(o=(f=u.next()).done){e.next=16;break}return p=f.value,e.next=11,j.createProjectConversation({self:t,projectOwner:N.get("account").user.id,type:"project"});case 11:(m=e.sent)&&(d={day:p,conversationId:m.id},a.conversations.push(d));case 13:o=!0,e.next=7;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(5),i=!0,l=e.t0;case 22:e.prev=22,e.prev=23,o||null==u.return||u.return();case 25:if(e.prev=25,!i){e.next=28;break}throw l;case 28:return e.finish(25);case 29:return e.finish(22);case 30:return e.next=32,j.updateProject({self:t,project:a}).then(function(e){console.log("updated project with conversations",e),n(e)});case 32:case"end":return e.stop()}},e,null,[[5,18,22,30],[23,,25,29]])}));return function(t){return e.apply(this,arguments)}}());case 2:e.sent;case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())},updateProjectConversations:function(e){var t=e.self,a=e.project;return console.log("createProjectConversations",e),new Promise(function(){var e=Object(o.a)(s.a.mark(function e(n){var r,c,o,i,l,u,f;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=a.days,c=!0,o=!1,i=void 0,e.prev=4,l=s.a.mark(function e(){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=f.value,0!==a.conversations.filter(function(e){return e.day===n}).length){e.next=4;break}return e.next=4,j.createProjectConversation({self:t,projectOwner:N.get("account").user.id,type:"project"}).then(function(e){var t={day:n,conversationId:e.id};a.conversations.push(t)});case 4:case"end":return e.stop()}},e)}),u=r[Symbol.iterator]();case 7:if(c=(f=u.next()).done){e.next=12;break}return e.delegateYield(l(),"t0",9);case 9:c=!0,e.next=7;break;case 12:e.next=18;break;case 14:e.prev=14,e.t1=e.catch(4),o=!0,i=e.t1;case 18:e.prev=18,e.prev=19,c||null==u.return||u.return();case 21:if(e.prev=21,!o){e.next=24;break}throw i;case 24:return e.finish(21);case 25:return e.finish(18);case 26:return e.next=28,j.updateProject({self:t,project:a}).then(function(e){console.log("updated project with conversations",e),n(e)});case 28:case"end":return e.stop()}},e,null,[[4,14,18,26],[19,,21,25]])}));return function(t){return e.apply(this,arguments)}}())},createProjectCalendar:function(e){var t=e.self,a=e.project;return console.log("createProjectRoster",e),new Promise(function(){var e=Object(o.a)(s.a.mark(function e(n){var r,o,i,l,u,f,p,m,d,h,b,w,g,x,y,k,E,N,O,S,C,D,P,T,A,I;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(r=new Set,o=[],i=a.days,l=!0,u=!1,f=void 0,e.prev=6,p=i[Symbol.iterator]();!(l=(m=p.next()).done);l=!0)d=m.value,h=v()(d).format("MMMM"),r.add(h);e.next=14;break;case 10:e.prev=10,e.t0=e.catch(6),u=!0,f=e.t0;case 14:e.prev=14,e.prev=15,l||null==p.return||p.return();case 17:if(e.prev=17,!u){e.next=20;break}throw f;case 20:return e.finish(17);case 21:return e.finish(14);case 22:b=Object(c.a)(r),console.log("monthNames",b),w=!0,g=!1,x=void 0,e.prev=27,y=b[Symbol.iterator]();case 29:if(w=(k=y.next()).done){e.next=57;break}for(E=k.value,N=[],O=[],S=!0,C=!1,D=void 0,e.prev=36,P=i[Symbol.iterator]();!(S=(T=P.next()).done);S=!0)A=T.value,v()(A).format("MMMM")===E&&(N.push(A),O.push({day:A,items:[],slots:new Array(24).fill(!1)}));e.next=44;break;case 40:e.prev=40,e.t1=e.catch(36),C=!0,D=e.t1;case 44:e.prev=44,e.prev=45,S||null==P.return||P.return();case 47:if(e.prev=47,!C){e.next=50;break}throw D;case 50:return e.finish(47);case 51:return e.finish(44);case 52:I={name:E,days:N,itinerary:O},o.push(I);case 54:w=!0,e.next=29;break;case 57:e.next=63;break;case 59:e.prev=59,e.t2=e.catch(27),g=!0,x=e.t2;case 63:e.prev=63,e.prev=64,w||null==y.return||y.return();case 66:if(e.prev=66,!g){e.next=69;break}throw x;case 69:return e.finish(66);case 70:return e.finish(63);case 71:return a.calendar=o,e.next=74,j.updateProject({self:t,project:a}).then(function(e){console.log("updated project with conversations",e),n(e)});case 74:case"end":return e.stop()}},e,null,[[6,10,14,22],[15,,17,21],[27,59,63,71],[36,40,44,52],[45,,47,51],[64,,66,70]])}));return function(t){return e.apply(this,arguments)}}())},createProjectRoster:function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.self,n=t.project,e.abrupt("return",new Promise(function(){var e=Object(o.a)(s.a.mark(function e(t){var r,c,o,i,l,u,f,p,m;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(r=n.crew,c=n.days,o=n.crewRoster||[],i=!0,l=!1,u=void 0,e.prev=6,f=function(){var e=m.value;if(!o.filter(function(t){return t.user===e.id}).length>0){var t={user:e.id,days:[],rate:0},a=!0,n=!1,r=void 0;try{for(var s,i=c[Symbol.iterator]();!(a=(s=i.next()).done);a=!0){var l=s.value;t.days.push({day:l,selected:!0})}}catch(u){n=!0,r=u}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}o.push(t)}},p=r[Symbol.iterator]();!(i=(m=p.next()).done);i=!0)f();e.next=15;break;case 11:e.prev=11,e.t0=e.catch(6),l=!0,u=e.t0;case 15:e.prev=15,e.prev=16,i||null==p.return||p.return();case 18:if(e.prev=18,!l){e.next=21;break}throw u;case 21:return e.finish(18);case 22:return e.finish(15);case 23:return console.log("crewRoster",o),n.crewRoster=o,e.next=27,j.updateProject({self:a,project:n}).then(function(e){console.log("updated project crew roster",e),t(e)});case 27:case"end":return e.stop()}},e,null,[[6,11,15,23],[16,,18,22]])}));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),lastFetch:function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(o.a)(s.a.mark(function e(a){var n,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.type,r=N.get(n).time,a(r);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),checkAuth:function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(o.a)(s.a.mark(function e(a){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:null===localStorage.getItem("isAuthenticated")&&(localStorage.clear(),localStorage.setItem("isAuthenticated",JSON.stringify(!1)),localStorage.setItem("env",JSON.stringify({env:"production",set:!0})),k.checkmobile(),t.props.history.push("/"),a(JSON.parse(localStorage.isAuthenticated))),!1===JSON.parse(localStorage.isAuthenticated)&&(localStorage.clear(),localStorage.setItem("isAuthenticated",JSON.stringify(!1)),localStorage.setItem("env",JSON.stringify({env:"production",set:!0})),k.checkmobile(),t.props.history.push("/"),a(JSON.parse(localStorage.isAuthenticated)));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),setEnv:function(){console.log("process.NODE_ENV",e.NODE_ENV),localStorage.getItem("env")},insertNotification:function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r,c,i,l;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.userId,n=t.title,r=t.content,c={title:n,content:r,user:a,createdAt:new Date},i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)},l=O.url("notifications"),e.next=6,fetch(l,i).then(function(e){return e.json()}).then(function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("notification insert res",t),e.next=3,j.sendNotification({userId:a,title:n,content:r});case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),sendNotification:function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.self,a=t.userId,n=t.title,r=t.content,e.next=3,O.fetch("users",a);case 3:return c=e.sent,e.next=6,h.a.SendNotification({user:c,subject:n,content:r});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),sendConfirmationEmail:function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.self,a=t.userId,e.next=3,O.fetch("users",a);case 3:return n=e.sent,"Confirm your account.","Confirm your account [ Crew20 ]","Please confirm your Crew20 account by clicking the link below:",r=window.location.protocol+"//"+window.location.host+"/confirm/?user="+a+"&email="+n.email,console.log("link",r),e.next=11,h.a.SendConfirmationEmail({user:n,subject:"Confirm your account [ Crew20 ]",title:"Confirm your account.",content:"Please confirm your Crew20 account by clicking the link below:",link:r});case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),sendWelcomeEmail:function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.self,a=t.userId,n=t.title,r=t.content,e.next=3,O.fetch("users",a);case 3:return c=e.sent,e.next=6,h.a.SendWelcomeEmail({user:c,subject:n,content:r});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),fetchNotifications:function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.self,n=t.userId,r=O.url("notifications")+"?user="+n,e.next=4,fetch(r).then(function(e){return e.json()}).then(function(e){return console.log("notifications",e),a.setState({notifications:e,ready:!0}),e});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),fetchProductionCrew:function(){var e=Object(o.a)(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.self,a=t.project,e.abrupt("return",new Promise(function(){var e=Object(o.a)(s.a.mark(function e(t){var n,r,c,o,i,l,u,f,p;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r="undefined"!==typeof a.productionCrew&&a.productionCrew||[],console.log("productionCrew_",r),c=!0,o=!1,i=void 0,e.prev=6,l=r[Symbol.iterator]();case 8:if(c=(u=l.next()).done){e.next=16;break}return f=u.value,p=O.url("users")+f.user,e.next=13,fetch(p).then(function(e){return e.json()}).then(function(e){n.push(e)});case 13:c=!0,e.next=8;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(6),o=!0,i=e.t0;case 22:e.prev=22,e.prev=23,c||null==l.return||l.return();case 25:if(e.prev=25,!o){e.next=28;break}throw i;case 28:return e.finish(25);case 29:return e.finish(22);case 30:t(n);case 31:case"end":return e.stop()}},e,null,[[6,18,22,30],[23,,25,29]])}));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),fetchConfirmedCrew:function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.self,n=t.project,e.abrupt("return",new Promise(function(){var e=Object(o.a)(s.a.mark(function e(t){var r,c,o,i,l,u,f,p,m,d,h,b,v,w;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=[],c=n.crew,o=!0,i=!1,l=void 0,e.prev=5,u=c[Symbol.iterator]();case 7:if(o=(f=u.next()).done){e.next=15;break}return p=f.value,m=O.url("users")+p.id,e.next=12,fetch(m).then(function(e){return e.json()}).then(function(e){r.push(e)});case 12:o=!0,e.next=7;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(5),i=!0,l=e.t0;case 21:e.prev=21,e.prev=22,o||null==u.return||u.return();case 24:if(e.prev=24,!i){e.next=27;break}throw l;case 27:return e.finish(24);case 28:return e.finish(21);case 29:for(d=[],h=[],b=[],v=0,w=r;v<w.length;v++)w[v],d.push(!1),h.push(!1),b.push(!1);a&&a.setState&&a.setState({crew:r,isDeleting:d,isDeletingStart:h,deleteConfirmation:b,ready:!0}),t(r);case 35:case"end":return e.stop()}},e,null,[[5,17,21,29],[22,,24,28]])}));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),fetchInvitedCrew:function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.self,n=t.project,e.abrupt("return",new Promise(function(){var e=Object(o.a)(s.a.mark(function e(t){var r,c,o,i,l,u,f,p,m,d,h,b,v,w;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=[],c=n.invited||[],o=!0,i=!1,l=void 0,e.prev=5,u=c[Symbol.iterator]();case 7:if(o=(f=u.next()).done){e.next=15;break}return p=f.value,m=O.url("users")+p.id,e.next=12,fetch(m).then(function(e){return e.json()}).then(function(e){r.push(e)});case 12:o=!0,e.next=7;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(5),i=!0,l=e.t0;case 21:e.prev=21,e.prev=22,o||null==u.return||u.return();case 24:if(e.prev=24,!i){e.next=27;break}throw l;case 27:return e.finish(24);case 28:return e.finish(21);case 29:for(d=[],h=[],b=[],v=0,w=r;v<w.length;v++)w[v],d.push(!1),h.push(!1),b.push(!1);a&&a.setState&&a.setState({invited:r,isDeleting:d,isDeletingStart:h,deleteConfirmation:b,ready:!0}),t(r);case 35:case"end":return e.stop()}},e,null,[[5,17,21,29],[22,,24,28]])}));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),inviteByEmail:function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r,c,o,i,l,u;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.self,n=t.link,r=t.position,c=t.project,o=t.projectOwner,i=t.email,l={receiverEmail:i,subject:"You have been invited to a project [ Crew20 ]",title:"You have been invited to crew for a project on Crew20",content:o.profile.name.first+" "+o.profile.name.last+" has invited you as "+r+" crew member for their new project. Follow the link to register your account and accept the position. Project details are below.",projectTitle:c.title,projectStartDate:c.start_date,link:n+"&email="+i},console.log("invite by email",t),console.log("invite by email invitation",l),e.next=6,h.a.InviteByEmail(l);case 6:(u=e.sent)&&(console.log("sent",u),setTimeout(function(){!0===u.success&&(d.a.open({message:"Invite Sent",description:"Invite sent successfully"}),a.setState({inviteBusy:!1}),a.inviteByEmailAddress.current.value=null),!1===u.success&&(d.a.open({message:"Invite Send Error",description:"There was an issue sending the invite. Please try again or contact support."}),a.setState({inviteBusy:!1}),a.inviteByEmailAddress.current.value=null)},1e3));case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),inviteByUser:function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r,c,o,i,l,u;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.self,n=t.link,r=t.position,c=t.project,o=t.projectOwner,i=t.user,l={receiverEmail:i.email,subject:"You have been invited to a project [ Crew20 ]",title:"You have been invited to crew for a project on Crew20",content:o.name.first+" "+o.name.last+" has invited you as "+r+" crew member for their new project. Follow the link to register your account and accept the position. Project details are below.",projectTitle:c.title,projectStartDate:c.start_date,link:n},console.log("invite by email",t),console.log("invite by email invitation",l),e.next=6,h.a.InviteByEmail(l);case 6:(u=e.sent)&&(console.log("sent",u),setTimeout(function(){!0===u.success&&(d.a.open({message:"Invite Sent",description:"Invite sent successfully"}),a.setState({inviteBusy:!1})),!1===u.success&&(d.a.open({message:"Invite Send Error",description:"There was an issue sending the invite. Please try again or contact support."}),a.setState({inviteBusy:!1}))},1e3));case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),updateNotification:function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.self,a=t.notification,n=O.url("notifications")+a.id,r={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)},e.next=5,fetch(n,r).then(function(e){return e.json()}).then(function(e){console.log("notification",e)});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),createNetworkNotification:function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r,c,o,i,l;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.self,n=t.type,r=t.sender,c=t.receiverId,console.log("createNetworkNotification",t),o=w.a[n]({data:{sender:r},user:c}),console.log("notification",o),i=O.url("notifications"),l={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)},e.next=8,fetch(i,l).then(function(e){return e.json()}).then(function(e){console.log("notification",e)});case 8:o&&setTimeout(function(){a.setState({inviteBusy:!1})},1e3);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),createNotification:function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r,c,o,i,l,u;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.self,n=t.type,t.link,t.position,r=t.project,c=t.projectOwner,o=t.user,console.log("create notification",t),console.log("notificationTypes",w.a),console.log("notificationTypes",w.a[n]),i=w.a[n]({owner:c,data:{sender:c,project:r},user:o}),console.log("notification",i),l=O.url("notifications"),u={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)},e.next=10,fetch(l,u).then(function(e){return e.json()}).then(function(e){console.log("notification",e)});case 10:i&&setTimeout(function(){a.setState({inviteBusy:!1})},1e3);case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),updateProject:function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(o.a)(s.a.mark(function e(a){var n,r,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.self,n=t.project,r=O.url("projects")+n.id,c={method:"PATCH",headers:{Authorization:"Bearer "+N.get("account").tokens.access.token,"Content-Type":"application/json"},body:JSON.stringify(n)},e.next=5,fetch(r,c).then(function(e){return e.json()}).then(function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("[[ Updated Project ]]",t),N.set("activeProject",t),a(t);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),updateEvent:function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(o.a)(s.a.mark(function e(a){var n,r,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.self,n=t.event,r=O.url("events")+n.id,c={method:"PATCH",headers:{Authorization:"Bearer "+N.get("account").tokens.access.token,"Content-Type":"application/json"},body:JSON.stringify(n)},e.next=5,fetch(r,c).then(function(e){return e.json()}).then(function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("[[ Updated Event ]]",t),N.set("activeEvent",t),a(t);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),checkConfirmed:function(e){var t=e.invited,a=e.crew,n=[];return console.log("chechConfirmed",t),console.log("chechConfirmed",a),new Promise(function(){var e=Object(o.a)(s.a.mark(function e(r){var c,o,i,l,u,f;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(c=!0,o=!1,i=void 0,e.prev=3,l=function(){var e=f.value;a.filter(function(t){return t.id===e.id}).length>0?(e.isConfirmed=!0,n.push(e)):(e.isConfirmed=!1,n.push(e))},u=t[Symbol.iterator]();!(c=(f=u.next()).done);c=!0)l();e.next=12;break;case 8:e.prev=8,e.t0=e.catch(3),o=!0,i=e.t0;case 12:e.prev=12,e.prev=13,c||null==u.return||u.return();case 15:if(e.prev=15,!o){e.next=18;break}throw i;case 18:return e.finish(15);case 19:return e.finish(12);case 20:console.log("invited",n),r(n);case 22:case"end":return e.stop()}},e,null,[[3,8,12,20],[13,,15,19]])}));return function(t){return e.apply(this,arguments)}}())},createNewConversation:function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(o.a)(s.a.mark(function e(a){var n,r,c,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.self,n=t.selfUserId,r=t.recipientId,c={participants:[n,r],messages:[],author:n,type:"private"},"https://api.crew20.devcolab.site/v1/conversations/",i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)},e.next=6,fetch("https://api.crew20.devcolab.site/v1/conversations/",i).then(function(e){return e.json()}).then(function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a(t);case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),createProjectConversation:function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(o.a)(s.a.mark(function e(a){var n,r,c,i,l;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.self,n=t.projectOwner,r=t.type,c={participants:[n],messages:[],author:n,type:r},i=O.url("conversations"),l={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)},e.next=6,fetch(i,l).then(function(e){return e.json()}).then(function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a(t);case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),fetchSubscribedProjects:function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(o.a)(s.a.mark(function e(a){var n,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.self,n=t.userId,r=O.url("projects")+"?owner="+n,e.next=4,fetch(r).then(function(e){return e.json()}).then(function(e){N.set("subscribedProjects",e),a(e)});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),fetchEvents:function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(o.a)(s.a.mark(function e(a){var n,r,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.self,n=t.userId,r=O.url("events")+"?user="+n,c={headers:{Authorization:"Bearer "+N.get("account").tokens.access.token,"Content-Type":"application/json"}},e.next=5,fetch(r,c).then(function(e){return e.json()}).then(function(e){a(e)});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),createEvent:function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(o.a)(s.a.mark(function e(a){var n,r,c,o,i,l,u,f,p,m,d,h,b,v;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.self,r=t.event,console.log("event data to insert ",r),c=[],o=!0,i=!1,l=void 0,e.prev=6,u=r.days[Symbol.iterator]();case 8:if(o=(f=u.next()).done){e.next=17;break}return p=f.value,e.next=12,j.createProjectConversation({self:n,projectOwner:r.user,type:"event"});case 12:(m=e.sent)&&(d={day:p,conversationId:m.id},c.push(d));case 14:o=!0,e.next=8;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(6),i=!0,l=e.t0;case 23:e.prev=23,e.prev=24,o||null==u.return||u.return();case 26:if(e.prev=26,!i){e.next=29;break}throw l;case 29:return e.finish(26);case 30:return e.finish(23);case 31:return e.next=33,j.createProjectConversation({self:n,projectOwner:r.user,type:"event"});case 33:if(!(h=e.sent)){e.next=43;break}return r.conversationId=h.id,r.conversations=c,b=O.url("events"),console.log("event to insert ",r),v={method:"POST",headers:{Authorization:"Bearer "+N.get("account").tokens.access.token,"Content-Type":"application/json"},body:JSON.stringify(r)},console.log("config",v),e.next=43,fetch(b,v).then(function(e){return e.json()}).then(function(e){console.log("createEvent res",e),n.setState({isOpen:!1}),n.reload(),a(e)});case 43:case"end":return e.stop()}},e,null,[[6,19,23,31],[24,,26,30]])}));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),getDates:function(){var e=Object(o.a)(s.a.mark(function e(t,a){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getDates",t,a),e.abrupt("return",new Promise(function(){var e=Object(o.a)(s.a.mark(function e(n){var r,c,o;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(r=[],c=v()(t),o=v()(a);c.isBefore(o);)r.push(v()(c).format("YYYY-MM-DD")),c=v()(c).add(1,"days");r.push(v()(o).format("YYYY-MM-DD")),console.log("getDates",r),n(r);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),refreshTokensEvery10Minutes:function(){var e=Object(o.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("refreshTokensEvery10Minutes"),setInterval(function(){console.log("refreshTokensEvery10Minutes"),j.refreshTokens()},6e5);case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),refreshTokens:function(){var e=Object(o.a)(s.a.mark(function e(){var t,a,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.crew20.devcolab.site/v1/auth/refresh-tokens/",t=N.get("account"),a={refreshToken:t.tokens.refresh.token},n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)},e.next=6,fetch("https://api.crew20.devcolab.site/v1/auth/refresh-tokens/",n).then(function(e){return e.json()}).then(function(e){if(console.log("[[ Refresh Response ]]",e),400===e.code||401===e.code)d.a.open({message:"Error",description:e.message});else{console.log("refresh tokens res ",e),t.tokens=e,N.store({label:"authTokens",value:e}),N.store({label:"account",value:t}),N.store({label:"isAuthenticated",value:!0});var a=v()((new Date).getTime()),n={start:a,check:a.add(10,"minutes")};N.set("loginTimestamps",n),console.log("refreshTokensEvery10Minutes",n)}});case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),confirmAccount:function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r,c,o;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.self,n=t.userId,t.email,r=O.url("users")+n,e.next=4,fetch(r).then(function(e){return e.json()}).then(function(e){return e});case 4:if(!(c=e.sent)){e.next=10;break}return c.profile.confirmed=!0,o={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)},e.next=10,fetch(r,o).then(function(e){return e.json()}).then(function(e){console.log(" "),console.log(" "),console.log("[[ Account Confirm Response ]]",e),console.log(" "),a.setConfirmed()});case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),updateUser:function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(o.a)(s.a.mark(function e(a){var n,r,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.self,n=t.user,r=O.url("users")+n.id,c={method:"PATCH",headers:{Authorization:"Bearer "+N.get("account").tokens.access.token,"Content-Type":"application/json"},body:JSON.stringify(n)},e.next=5,fetch(r,c).then(function(e){return e.json()}).then(function(e){var t=N.get("account");t.user=e,N.set("account",t),a(n)});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),fetchConnections:function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(o.a)(s.a.mark(function e(a){var n,r,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.self,n=t.connections,e.next=3,N.get("connections").time;case 3:if(r=e.sent,!E.shouldFetchNewData(r)){e.next=9;break}return e.delegateYield(s.a.mark(function e(){var t,r,c,o,i,l,u,f;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=[],r=!0,c=!1,o=void 0,e.prev=4,i=n[Symbol.iterator]();case 6:if(r=(l=i.next()).done){e.next=14;break}return u=l.value,f=O.url("users")+u,e.next=11,fetch(f).then(function(e){return e.json()}).then(function(e){t.push(e)});case 11:r=!0,e.next=6;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(4),c=!0,o=e.t0;case 20:e.prev=20,e.prev=21,r||null==i.return||i.return();case 23:if(e.prev=23,!c){e.next=26;break}throw o;case 26:return e.finish(23);case 27:return e.finish(20);case 28:N.store({label:"connections",value:{time:new Date,data:t}}),a(t);case 30:case"end":return e.stop()}},e,null,[[4,16,20,28],[21,,23,27]])})(),"t0",7);case 7:e.next=11;break;case 9:c=N.get("connections").data,a(c);case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),addProductionCrewMember:function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(o.a)(s.a.mark(function e(a){var n,r,c,i,l,u,f;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.self,r=t.userId,c=t.project,i=c.productionCrew,e.next=4,N.fetchUser({self:n,userId:c.owner});case 4:if(l=e.sent,console.log("projectOwnerData",l),u={name:l.profile.name,picture:l.profile.picture},console.log("owner",u),0!==i.filter(function(e){return e.user===r}).length){e.next=15;break}return f={permissions:[],user:r},c.productionCrew.push(f),e.next=13,j.updateProject({self:n,project:c}).then(function(){var e=Object(o.a)(s.a.mark(function e(t){var n,o,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=w.a.prodCrewInvite({data:{project:c,sender:u},user:r,owner:u}),console.log("notification_",n),o=O.url("notifications"),i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},e.next=6,fetch(o,i).then(function(e){return e.json()}).then(function(e){console.log("inserted notification",e)});case 6:d.a.open({message:"Success",description:"User added to production crew"}),a(t);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 13:e.next=17;break;case 15:d.a.open({message:"Error",description:"User is already part of production crew"}),a({status:"error"});case 17:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}),k={mobile:function(){return N.get("isMobile")},checkmobile:function(){window.matchMedia("only screen and (max-width: 760px)").matches?N.set("isMobile",!0):N.set("isMobile",!1)}},E={shouldFetchNewData:function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=v()(t),n=a.diff(v()(new Date))/1e3,e.abrupt("return",n>300);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),unique:function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(o.a)(s.a.mark(function e(a){var n,r,c,o,i,l,u,f,p;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=t.array,r=new Set,c=!0,o=!1,i=void 0,e.prev=5,l=n[Symbol.iterator]();!(c=(u=l.next()).done);c=!0)f=u.value,r.add(f);e.next=13;break;case 9:e.prev=9,e.t0=e.catch(5),o=!0,i=e.t0;case 13:e.prev=13,e.prev=14,c||null==l.return||l.return();case 16:if(e.prev=16,!o){e.next=19;break}throw i;case 19:return e.finish(16);case 20:return e.finish(13);case 21:p=Array.from(r),a(p);case 23:case"end":return e.stop()}},e,null,[[5,9,13,21],[14,,16,20]])}));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},N={saveSnapShot:function(e,t){localStorage.setItem(e,JSON.stringify(t))},initialise:function(){},set:function(e,t){localStorage.setItem(e,JSON.stringify(t))},fetchAuthors:function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r,c,o,i,l,u,f;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.self,a=t.authorIds,console.log("fetching authors"),n=[],r=!0,c=!1,o=void 0,e.prev=6,i=a[Symbol.iterator]();case 8:if(r=(l=i.next()).done){e.next=17;break}return u=l.value,e.next=12,O.fetch("users",u);case 12:f=e.sent,n.push(f);case 14:r=!0,e.next=8;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(6),c=!0,o=e.t0;case 23:e.prev=23,e.prev=24,r||null==i.return||i.return();case 26:if(e.prev=26,!c){e.next=29;break}throw o;case 29:return e.finish(26);case 30:return e.finish(23);case 31:return console.log(" "),console.log(" "),console.log(" "),console.log("[[ participants : authors ]] ",n),console.log(" "),console.log(" "),console.log(" "),e.abrupt("return",n);case 39:case"end":return e.stop()}},e,null,[[6,19,23,31],[24,,26,30]])}));return function(t){return e.apply(this,arguments)}}()},O={base:function(){if(!localStorage||null===localStorage.getItem("env")||!0!==JSON.parse(localStorage.getItem("env")).set)return u.a.api.prod;var e=JSON.parse(localStorage.getItem("env")).env;return"development"===e?u.a.api.dev:"production"===e?u.a.api.prod:void 0},url:function(e){return e?O.base()+e+"/":O.base()},fetch:function(e){function t(t,a){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=Object(o.a)(s.a.mark(function e(t,a){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(o.a)(s.a.mark(function e(n){var r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=O.url(t)+a,e.next=3,fetch(r).then(function(e){return e.json()}).then(function(e){n(e)});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()),post:function(){var e=Object(o.a)(s.a.mark(function e(t,a){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(o.a)(s.a.mark(function e(n){var r,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=O.url(t),c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)},e.next=4,fetch(r,c).then(function(e){return e.json()}).then(function(e){n(e)});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),fetch_:function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r,c,o;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.self,a=t.type,n=t.method,t.id,t.filter,r=t.data,c=O.url(a),o={headers:{"Content-Type":"application/json"},method:n,body:"POST"===n||"PUT"===n||"PATCH"===n?JSON.stringify(r):null},e.next=5,fetch(c,o).then(function(e){return e.json()}).then(function(e){return e});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),fetchAndSet:function(){var e=Object(o.a)(s.a.mark(function e(t){var a,r,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.self,r=t.type,t.method,t.id,t.filter,t.data,e.next=3,O.fetch(t);case 3:c=e.sent,a.setState(Object(n.a)({},r,c));case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()};N.initialise={},N.apiBase=function(e){if(!localStorage||null===localStorage.getItem("env")||!0!==localStorage.getItem("env").set)return u.a.api.dev+e+"/";var t=localStorage.getItem("env").env;return"development"===t?u.a.api.dev+e+"/":"production"===t?u.a.api.prod+e+"/":void 0},N.api=function(e){return console.log("api type",e),O.url(e)},N.set=function(e,t){localStorage.setItem(e,JSON.stringify(t))},N.getUser=function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(o.a)(s.a.mark(function e(a){var n,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=N.get("users").data,r=n.filter(function(e){return e.id===t})[0],a(r);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.fetchUser=function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(o.a)(s.a.mark(function e(a){var n,r,c,i,l,u;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.self,n=t.userId,Array.isArray(N.get("users"))||(console.log("object"),N.set("users",[])),r=N.get("users"),!(c=r.filter(function(e){return e.data.id===n}).length>0)){e.next=16;break}if(console.log("user is stored",c),i=r.filter(function(e){return e.data.id===n})[0],!E.shouldFetchNewData(i.time)){e.next=13;break}return l=O.url("users")+n,e.next=11,fetch(l).then(function(e){return e.json()}).then(function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r.push({time:new Date,data:t}),N.set("users",r),a(t);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 11:e.next=14;break;case 13:a(i.data);case 14:e.next=20;break;case 16:return console.log("user is not stored",c),u=O.url("users")+n,e.next=20,fetch(u).then(function(e){return e.json()}).then(function(){var e=Object(o.a)(s.a.mark(function e(t){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=N.get("users"),console.log("adding new user to store",n),n.push({time:new Date,data:t}),console.log("added",n),N.set("users",n),a(t);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 20:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.fetchInvitedUsers=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r,c,i,l,u,f,p,m,d;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.self,n=t.project,r=n.invited||[],c=[],i=!0,l=!1,u=void 0,e.prev=6,f=r[Symbol.iterator]();case 8:if(i=(p=f.next()).done){e.next=16;break}return m=p.value,d=O.url("users")+m.id,e.next=13,fetch(d).then(function(e){return e.json()}).then(function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:c.push(t);case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 13:i=!0,e.next=8;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(6),l=!0,u=e.t0;case 22:e.prev=22,e.prev=23,i||null==f.return||f.return();case 25:if(e.prev=25,!l){e.next=28;break}throw u;case 28:return e.finish(25);case 29:return e.finish(22);case 30:console.log(" "),console.log(" "),console.log(" "),console.log(" [ Invited Users Data ] ",c),console.log(" "),console.log(" "),a.setState({invited:c});case 37:case"end":return e.stop()}},e,null,[[6,18,22,30],[23,,25,29]])}));return function(t){return e.apply(this,arguments)}}(),N.fetchShortlistedUsers=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r,c,i,l,u,f,p,m;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.self,n=t.users,r=[],c=!0,i=!1,l=void 0,e.prev=5,u=n[Symbol.iterator]();case 7:if(c=(f=u.next()).done){e.next=15;break}return p=f.value,m=O.url("users")+p.id,e.next=12,fetch(m).then(function(e){return e.json()}).then(function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r.push(t);case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 12:c=!0,e.next=7;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(5),i=!0,l=e.t0;case 21:e.prev=21,e.prev=22,c||null==u.return||u.return();case 24:if(e.prev=24,!i){e.next=27;break}throw l;case 27:return e.finish(24);case 28:return e.finish(21);case 29:a.setState({shortlist:r});case 30:case"end":return e.stop()}},e,null,[[5,17,21,29],[22,,24,28]])}));return function(t){return e.apply(this,arguments)}}(),N.approveCrewApplication=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r,c,i,l,u;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.self,n=t.project,r=t.application,r.project,(c=new Set(n.crew)).add({id:r.applicant.id,position:r.position.title}),i=Array.from(c),n.crew=i,l={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},u=O.url("projects")+n.id,e.next=10,fetch(u,l).then(function(e){return e.json()}).then(function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({project:t}),N.store({label:"activeProject",value:t}),d.a.open({message:"Approved",description:r.applicant.profile.name.first+" "+r.applicant.profile.name.last+" has been added to the project crew."}),a.load();case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.fetchScheduleUsers=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r,c,i,l,u,f;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.self,a=t.people,console.log("fetchScheduleUsers",t),n=[],r=!0,c=!1,i=void 0,e.prev=6,l=s.a.mark(function e(){var t,n,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=f.value).id){e.next=7;break}return n=O.url("users")+t.id,e.next=5,fetch(n).then(function(e){return e.json()}).then(function(){var e=Object(o.a)(s.a.mark(function e(n){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("fetchUsers response",n),a.push(t);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 5:e.next=10;break;case 7:return r=O.url("users")+t,e.next=10,fetch(r).then(function(e){return e.json()}).then(function(){var e=Object(o.a)(s.a.mark(function e(n){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("fetchUsers response",n),a.push(t);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}},e)}),u=a[Symbol.iterator]();case 9:if(r=(f=u.next()).done){e.next=14;break}return e.delegateYield(l(),"t0",11);case 11:r=!0,e.next=9;break;case 14:e.next=20;break;case 16:e.prev=16,e.t1=e.catch(6),c=!0,i=e.t1;case 20:e.prev=20,e.prev=21,r||null==u.return||u.return();case 23:if(e.prev=23,!c){e.next=26;break}throw i;case 26:return e.finish(23);case 27:return e.finish(20);case 28:return e.abrupt("return",n);case 29:case"end":return e.stop()}},e,null,[[6,16,20,28],[21,,23,27]])}));return function(t){return e.apply(this,arguments)}}(),N.fetchUsers=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.self,n=t.positions,console.log("fetchUsers",t),e.abrupt("return",new Promise(function(){var e=Object(o.a)(s.a.mark(function e(t){var r,c,i,l,u,f,p;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=[],c=!0,i=!1,l=void 0,e.prev=4,u=s.a.mark(function e(){var t,a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.value,a=O.url("users")+"?position="+t,e.next=4,fetch(a).then(function(e){return e.json()}).then(function(){var e=Object(o.a)(s.a.mark(function e(a){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("fetchUsers response",a),n={position:t,users:a},r.push(n);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}},e)}),f=n[Symbol.iterator]();case 7:if(c=(p=f.next()).done){e.next=12;break}return e.delegateYield(u(),"t0",9);case 9:c=!0,e.next=7;break;case 12:e.next=18;break;case 14:e.prev=14,e.t1=e.catch(4),i=!0,l=e.t1;case 18:e.prev=18,e.prev=19,c||null==f.return||f.return();case 21:if(e.prev=21,!i){e.next=24;break}throw l;case 24:return e.finish(21);case 25:return e.finish(18);case 26:console.log("crew",r),a.setState({crew_:r}),t(r),setTimeout(function(){a.setState({searchLoading:!1})},1e3);case 30:case"end":return e.stop()}},e,null,[[4,14,18,26],[19,,21,25]])}));return function(t){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.fetchConnections=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r,c,o,i,l,u,f,p;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.self,n=t.connections,r=[],c=!0,o=!1,i=void 0,e.prev=5,l=n[Symbol.iterator]();case 7:if(c=(u=l.next()).done){e.next=15;break}return f=u.value,p=O.url("users")+f,e.next=12,fetch(p).then(function(e){return e.json()}).then(function(e){r.push(e)});case 12:c=!0,e.next=7;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(5),o=!0,i=e.t0;case 21:e.prev=21,e.prev=22,c||null==l.return||l.return();case 24:if(e.prev=24,!o){e.next=27;break}throw i;case 27:return e.finish(24);case 28:return e.finish(21);case 29:N.set("connections",{time:new Date,data:r}),a.setState({connections:r,connectionsReady:!0});case 31:case"end":return e.stop()}},e,null,[[5,17,21,29],[22,,24,28]])}));return function(t){return e.apply(this,arguments)}}(),N.fetchApplicantData=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r,c,o,i,l,u,f;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.self,n=t.applicants,r=[],c=!0,o=!1,i=void 0,e.prev=5,l=s.a.mark(function e(){var t,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.value,n=O.url("users")+t.applicant,e.next=4,fetch(n).then(function(e){return e.json()}).then(function(e){t.applicant=e,r.push(t)});case 4:N.store({label:"applications",value:r}),a.setState({applications:r});case 6:case"end":return e.stop()}},e)}),u=n[Symbol.iterator]();case 8:if(c=(f=u.next()).done){e.next=13;break}return e.delegateYield(l(),"t0",10);case 10:c=!0,e.next=8;break;case 13:e.next=19;break;case 15:e.prev=15,e.t1=e.catch(5),o=!0,i=e.t1;case 19:e.prev=19,e.prev=20,c||null==u.return||u.return();case 22:if(e.prev=22,!o){e.next=25;break}throw i;case 25:return e.finish(22);case 26:return e.finish(19);case 27:case"end":return e.stop()}},e,null,[[5,15,19,27],[20,,22,26]])}));return function(t){return e.apply(this,arguments)}}(),N.fetchApplications=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.self,n=t.project,r=O.url("applications")+"?project="+n.id,e.next=4,fetch(r).then(function(e){return e.json()}).then(function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.fetchApplicantData({self:a,applicants:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.applyForPosition=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.self,n=t.application,r=O.url("applications"),c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},e.next=5,fetch(r,c).then(function(e){return e.json()}).then(function(e){setTimeout(function(){a.setState({buttonLoading:!1,drawerVisible:!1})},2e3),setTimeout(function(){d.a.open({message:"Application Submitted",description:"Your crew application request has been submitted."})},3e3)});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.fetchCrew_=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r,c,o,i,l,u,f,p,m,d,h,b;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.self,n=t.next,r=t.nextIndex,c=t.project,o=c.crew,i=[],l=!0,u=!1,f=void 0,e.prev=6,p=o[Symbol.iterator]();case 8:if(l=(m=p.next()).done){e.next=16;break}return d=m.value,h=O.url("users")+d.id,e.next=13,fetch(h).then(function(e){return e.json()}).then(function(e){i.push(e)});case 13:l=!0,e.next=8;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(6),u=!0,f=e.t0;case 22:e.prev=22,e.prev=23,l||null==p.return||p.return();case 25:if(e.prev=25,!u){e.next=28;break}throw f;case 28:return e.finish(25);case 29:return e.finish(22);case 30:"function"===typeof n[r]?(a.setState({crew:i}),b=r+1,n[r]({self:a,data:i,next:n[b],nextIndex:b})):a.setState({crew:i,ready:!0});case 31:case"end":return e.stop()}},e,null,[[6,18,22,30],[23,,25,29]])}));return function(t){return e.apply(this,arguments)}}(),N.fetchProjectOwner=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.self,n=t.project,r=O.url("users")+n.owner,e.next=4,fetch(r).then(function(e){return e.json()}).then(function(e){console.log(" "),console.log(" "),console.log(" "),console.log(" "),console.log("projectOwner",e),console.log(" "),console.log(" "),console.log(" "),console.log(" "),window.logged.push({title:"projectOwner",data:e}),a.setState({projectOwner:e})});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.fetchh=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.url,n=t.type,r=t.body,c="PATCH"===n||"PUT"===n||"POST"===n?{method:n,headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}:{method:n},e.next=4,fetch(a,c).then(function(e){return e.json()}).then(function(e){return e});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.fetchProject=function(){var e=Object(o.a)(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.self,a=t.projectId,t.next,e.abrupt("return",new Promise(function(){var e=Object(o.a)(s.a.mark(function e(n){var r,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),r=O.url("projects")+a,e.next=4,fetch(r).then(function(e){return e.json()}).then(function(e){return e});case 4:c=e.sent,n(c);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.fetchCrew=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r,c,o,i,l,u,f,p,m;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.self,n=t.project,console.log("project",n),r=n.crew,c=[],o=!0,i=!1,l=void 0,e.prev=7,u=r[Symbol.iterator]();case 9:if(o=(f=u.next()).done){e.next=17;break}return p=f.value,m=O.url("users")+p.id,e.next=14,fetch(m).then(function(e){return e.json()}).then(function(e){c.push(e)});case 14:o=!0,e.next=9;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(7),i=!0,l=e.t0;case 23:e.prev=23,e.prev=24,o||null==u.return||u.return();case 26:if(e.prev=26,!i){e.next=29;break}throw l;case 29:return e.finish(26);case 30:return e.finish(23);case 31:a.setState({crew:c,ready:!0});case 32:case"end":return e.stop()}},e,null,[[7,19,23,31],[24,,26,30]])}));return function(t){return e.apply(this,arguments)}}(),N.fetchProject__=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r,c,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.self,n=t.projectId,r=t.next,N.logger({data:t,text:"Fetching Project Data",type:"primary"}),c=N.get("account").user.id,0,i=O.url("projects")+n,e.next=7,fetch(i).then(function(e){if(console.log(" "),console.log(" "),console.log("fetch project initial res ",e),console.log(" "),console.log(" "),!e.ok){var t=e.json();return t.ok=e.ok,t.status=e.status,t}if(e.ok){var a=e.json();return a.ok=e.ok,a.status=e.status,a}}).then(function(){var e=Object(o.a)(s.a.mark(function e(t){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(" "),console.log(" "),console.log("fetch project json res ",t),console.log(" "),console.log(" "),t.hasOwnProperty("id")){e.next=8;break}return a.props.history.push("/notfound"),e.abrupt("return",!1);case 8:if(!t.hasOwnProperty("id")){e.next=24;break}return a.setState({project:t}),e.next=12,N.fetchInvitedUsers({self:a,users:t.invited});case 12:return N.store({label:"activeProject",value:t}),n=t.owner,e.next=16,N.fetchProjectOwner({self:a,userId:n});case 16:if(n===c&&a.setState({userIsOwner:!0}),"function"!==typeof r[0]){e.next=24;break}return 1,e.next=21,r[0]({self:a,project:t,next:r[1],nextIndex:1});case 21:return e.abrupt("return",e.sent);case 24:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.fetchProjects=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.self,n=O.url("projects"),e.next=4,fetch(n).then(function(e){return e.json()}).then(function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(N.store({label:"activeProject",value:t[0]}),N.store({label:"projects",value:t}),!a){e.next=6;break}a.setState({drawerReady:!0,projects:t,activeProject:t[0],ready:!0}),e.next=7;break;case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.fetchCommentAuthors=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.self,n=t.authorIds,console.log(" "),console.log(" "),console.log(" "),console.log("[[ authorIds ]]",n),console.log(" "),console.log(" "),console.log(" "),e.abrupt("return",new Promise(function(){var e=Object(o.a)(s.a.mark(function e(t){var r,c,o,i,l,u,f,p;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=[],c=!0,o=!1,i=void 0,e.prev=4,l=n[Symbol.iterator]();case 6:if(c=(u=l.next()).done){e.next=14;break}return f=u.value,p=O.url("users")+f,e.next=11,fetch(p).then(function(e){return e.json()}).then(function(e){r.push(e)});case 11:c=!0,e.next=6;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(4),o=!0,i=e.t0;case 20:e.prev=20,e.prev=21,c||null==l.return||l.return();case 23:if(e.prev=23,!o){e.next=26;break}throw i;case 26:return e.finish(23);case 27:return e.finish(20);case 28:a.setState({authors:r,ready:!0,conversationReady:!0}),console.log(" "),console.log(" "),console.log(" "),console.log("[[ authors  ]]",r),console.log(" "),console.log(" "),console.log(" "),setTimeout(function(){document.getElementById("MessagesList")&&document.getElementById("MessagesList").scroll({top:9999999999,left:0,behavior:"smooth"})},500),t(r);case 38:case"end":return e.stop()}},e,null,[[4,16,20,28],[21,,23,27]])}));return function(t){return e.apply(this,arguments)}}()));case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.fetchCommentAuthor=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r,c,o,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.self,n=t.authorId,r=O.url("users")+n,e.next=4,fetch(r).then(function(e){return e.json()}).then(function(e){return e});case 4:c=e.sent,(o=new Set(a.state.authors)).add(c),i=Array.from(o),a.setState({authors:i});case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.filterSubscribedProjects=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r,c,o,i,l,u,f,p,m,d;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(a=t.self,n=t.projects,r=t.next,c=N.get("account").user.id,o=[],i=!0,l=!1,u=void 0,e.prev=6,f=n[Symbol.iterator]();!(i=(p=f.next()).done);i=!0)m=p.value,d=m.crew,d.filter(function(e){return e.id===c}).length>0&&o.push(m);e.next=14;break;case 10:e.prev=10,e.t0=e.catch(6),l=!0,u=e.t0;case 14:e.prev=14,e.prev=15,i||null==f.return||f.return();case 17:if(e.prev=17,!l){e.next=20;break}throw u;case 20:return e.finish(17);case 21:return e.finish(14);case 22:N.store({label:"activeProject",value:o[0]}),N.store({label:"subscribedProjects",value:o}),a.setState({drawerReady:!0,subscribedProjects:o,activeProject:o[0]}),"function"===typeof r?(a.setState({ready:!1}),r({self:a})):a.setState({ready:!0});case 26:case"end":return e.stop()}},e,null,[[6,10,14,22],[15,,17,21]])}));return function(t){return e.apply(this,arguments)}}(),N.fetchSubscribedProjects=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.self,n=t.userId,r=O.url("projects"),e.abrupt("return",new Promise(function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(r).then(function(e){return e.json()}).then(function(){var e=Object(o.a)(s.a.mark(function e(r){var c,o,i,l,u,f,p,m;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(c=[],console.log("### all projects sub res",r),o=!0,i=!1,l=void 0,e.prev=5,u=r[Symbol.iterator]();!(o=(f=u.next()).done);o=!0)p=f.value,m=p.crew,m.filter(function(e){return e.id===n}).length>0&&c.push(p);e.next=13;break;case 9:e.prev=9,e.t0=e.catch(5),i=!0,l=e.t0;case 13:e.prev=13,e.prev=14,o||null==u.return||u.return();case 16:if(e.prev=16,!i){e.next=19;break}throw l;case 19:return e.finish(16);case 20:return e.finish(13);case 21:N.set("subscribedProjects",c),N.set("activeProject",c[0]),a.setState({subscribedProjectsReady:!0,subscribedProjects:c,activeProject:c[0]}),t(c);case 25:case"end":return e.stop()}},e,null,[[5,9,13,21],[14,,16,20]])}));return function(t){return e.apply(this,arguments)}}());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.fetchOwnProjects=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.self,a=N.get("account").user.id,n=O.url("projects")+"?owner="+a,e.abrupt("return",new Promise(function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n).then(function(e){return e.json()}).then(function(){var e=Object(o.a)(s.a.mark(function e(a){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("[[ Fetched Own Projects]]",a),N.store({label:"activeProject",value:a[0]}),N.store({label:"ownProjects",value:a}),t(a);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.getDates=function(){var e=Object(o.a)(s.a.mark(function e(t,a){var n,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=[],r=v()(t),a=v()(a);r<=a;)n.push(v()(r).format("YYYY-MM-DD")),r=v()(r).add(1,"days");return n.push(v()(a).format("YYYY-MM-DD")),console.log("get days",n),e.abrupt("return",n);case 7:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),N.createProject=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r,c,o,i,l,u,f,p,m,h,b,v,w,g;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.self,n=t.project,r=t.message,(c={}).title=n.projectName,c.description="",c.type=n.projectType,c.start_date=n.projectDate,c.end_date=n.projectEndDate,c.positions=n.positions,o=N.getDates(n.projectDate,n.projectEndDate),console.log("project",n),c.location=(n.location.address.county,n.location.address.county),c.owner=N.get("account").user.id,c.crew=[],c.productionCrew=[{user:N.get("account").user.id,permissions:["projectfiles","projectsettings","projectpeople","projectchecklists","projectratecalculator"]}],c.comments=[],c.invited=n.invited,c.shortlist=n.shortlist,c.createdAt=new Date,c.checklists=[],c.threads=[],c.conversations=[],c.days=o,i=!0,l=!1,u=void 0,e.prev=25,f=o[Symbol.iterator]();case 27:if(i=(p=f.next()).done){e.next=36;break}return m=p.value,e.next=31,j.createProjectConversation({self:a,projectOwner:N.get("account").user.id,type:"project"});case 31:(h=e.sent)&&(b={day:m,conversationId:h.id},c.conversations.push(b));case 33:i=!0,e.next=27;break;case 36:e.next=42;break;case 38:e.prev=38,e.t0=e.catch(25),l=!0,u=e.t0;case 42:e.prev=42,e.prev=43,i||null==f.return||f.return();case 45:if(e.prev=45,!l){e.next=48;break}throw u;case 48:return e.finish(45);case 49:return e.finish(42);case 50:return e.next=52,j.createProjectConversation({self:a,projectOwner:N.get("account").user.id,type:"event"});case 52:if(!(v=e.sent)){e.next=65;break}return c.conversationId=v.id,console.log(" "),console.log(" "),console.log("[[ Project to create ]] ",JSON.stringify(c)),console.log(" "),console.log(" "),w=O.url("projects"),g={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)},e.next=64,fetch(w,g).then(function(e){return e.ok?d.a.open({message:"Project Created",description:"Your project has been created successfully."}):d.a.open({message:"Error Creating Project",description:"Error creating project."}),e.json()}).then(function(e){var t=N.get("crewBuilder");t.hasBeenUploaded=!0,N.store({label:"crewBuilder",value:t}),a.setState({createProject:!1}),a.refresh(),r.destroy()});case 64:return e.abrupt("return",e.sent);case 65:case"end":return e.stop()}},e,null,[[25,38,42,50],[43,,45,49]])}));return function(t){return e.apply(this,arguments)}}(),N.addUserToProject=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r,c,i,l,u;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.self,a=t.project,n=t.userId,r=t.closeDialog,(c=new Set(a.crew)).add({id:n}),i=Array.from(c),a.crew=i,l=O.url("projects")+a.id,u={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)},e.next=9,fetch(l,u).then(function(e){return e.json()}).then(function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:d.a.info({message:"Added to Project",description:"User has been added to your project.",placement:"bottomRight"}),r();case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.fetchAuthor=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.self,n=t.authorId,r=O.url("users")+n,e.next=4,fetch(r).then(function(e){return e.json()}).then(function(e){a.setState({author:e,ready:!0})});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.updateProjectComments=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.self,n=t.project,r=O.url("projects")+n.id,c={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},e.next=5,fetch(r,c).then(function(e){return e.json()}).then(function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("[[ Updated Project with comments ]]",t),a.props.load();case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.hideDrawer=function(){var e=Object(o.a)(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(a=t.self).setState({activeTab:"1",projectInfoVisible:!1,conversationReady:!1}),setTimeout(function(){a.setState({drawerReady:!1}),setTimeout(function(){a.setState({drawerReady:!0})},500)},500);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.submitBio=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r,c,o,i,l;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.self,n=t.data,r=N.get("account"),c=r.user.id,(o=r.user).profile.bio=n,i=O.url("users")+c,l={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)},e.next=9,fetch(i,l).then(function(e){return e.json()}).then(function(e){return r.user=e,N.store({label:"account",value:r}),a.setState({isOpen:!1}),a.context.updateAccount(),e});case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.updateSkills=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r,c,o,i,l;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.self,n=t.skills,r=N.get("account"),c=r.user.id,(o=r.user).profile.additional.skills=n,i=O.url("users")+c,l={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)},e.next=9,fetch(i,l).then(function(e){return e.json()}).then(function(e){return r.user=e,N.store({label:"account",value:r}),a.setState({isOpen:!1}),a.context.updateAccount(),e});case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.submitProfile=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r,c,o,i,l;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.self,n=t.data,console.log("data",n),r=N.get("account"),c=r.user.id,(o=r.user).profile.name={first:n.firstname,last:n.lastname},o.profile.dob=n.dob,o.profile.gender=n.gender,o.profile.location=n.location,o.position=n.role,console.log("user",o),i=O.url("users")+c,l={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)},e.next=15,fetch(i,l).then(function(e){return e.json()}).then(function(e){return r.user=e,N.store({label:"account",value:r}),a.setState({isOpen:!1}),a.context.updateAccount(),e});case 15:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.submitPortfolioItem=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r,c,o,i,l,u,f,p;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.self,n=t.data,r=t.updateAccount,c=t.closeDialog,o=N.get("account"),i=o.user.id,l=o.user,(u="undefined"!==typeof l.profile.projects?l.profile.projects:[]).push(n),l.profile.projects=u,f=O.url("users")+i,p={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)},e.next=11,fetch(f,p).then(function(e){return e.json()}).then(function(e){return o.user=e,N.store({label:"account",value:o}),a.setState({isOpen:!1}),r(),c(),e});case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.addToNetwork=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r,o,i,l,u,f,p,m,h,b,v,w,g;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.self,n=t.item,r=N.get("account"),o=r.user.id,i=r.user.profile.connections,l=r.user.profile.network.pending,i.push(n.id),u=Object(c.a)(new Set(i)),r.user.profile.connections=u,l.push(n.id),f=Object(c.a)(new Set(l)),r.user.profile.network.pending=f,p=O.url("users")+o,m=O.url("users")+n.id,h={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(r.user)},e.next=16,fetch(p,h).then(function(e){return e.json()}).then(function(e){return r.user=e,N.store({label:"account",value:r}),a.setState({isOpen:!1,AddToNetworkButtonLoading:!1}),a.context.updateAccount(),d.a.open({message:"Added to Network",description:"A connect request has been sent to "+n.profile.name.first+" "+n.profile.name.last}),N.createNetworkNotification({}),e});case 16:return e.next=18,fetch(m).then(function(e){return e.json()}).then(function(e){return e});case 18:return b=e.sent,(v=b.profile.connections).push(o),w=Object(c.a)(new Set(v)),b.profile.connections=w,g={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)},e.next=26,fetch(m,g).then(function(e){return e.json()}).then(function(e){});case 26:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.fetch=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.collection,t.self,a={type:"alert",text:"First alert to initialise the remote alerts db.",createdAt:new Date},n={method:"POST",headers:{"Content-Type":"application/json","access-control-expose-headers":"X-jsonBlob"},body:JSON.stringify(a)},r=u.a.storageProvider.initUrl,e.next=6,fetch(r,n).then(function(e){return N.store({label:"db_alerts_endpoint_id",value:e.headers.get("X-jsonBlob")}),y.add(r),e.headers.get("X-jsonBlob")});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.logger=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r,c,o;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.data,n=t.text,t.type,r=["background: #38c172",,"padding: 1rem 0.7rem","border: none","color: white","display: block","line-height: auto","text-align: left","font-weight: bold","font-size: 0.9rem","border-radius: 2px","width: 100%","margin-top: 1rem","margin-bottom: 1rem"].join(";"),c=["background: #f3f3f3","padding: 1rem 0.7rem","border: none","color: grey","display: block","line-height: 1.5rem","text-align: left","font-weight: light","font-size: 0.8rem","border-radius: 2px","width: 100%","margin-top: 1rem","margin-bottom: 1rem"].join(";"),o={alert:r,info:c},n&&n.length&&console.log("%c "+n+" ",o.alert),a&&a.length&&console.log("%c "+JSON.stringify(a)+" ",o.info),a&&a.length&&console.log("%c data >",c,a);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.store=function(e){var t=e.label,a=e.value;localStorage.setItem(t,JSON.stringify(a)),Object(i.setGlobal)({activeProject:e.value})},N.hydrateDataFromLocalstorage=function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.self.setState({theme:N.get("theme"),layout:N.get("layout"),alerts:N.get("alerts"),ready:!0});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.get=function(e){if(null===localStorage.getItem(e))return{};if(null!==localStorage.getItem(e)){var t=localStorage.getItem(e);return"undefined"!==t?JSON.parse(t):{}}},N.getLocallyStoredAlerts=function(){return JSON.parse(localStorage.getItem("Alerts"))},N.getTheme=function(){return JSON.parse(localStorage.getItem("Theme"))},N.dummyScript=function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.setItem("dummy",JSON.stringify({test:"dummy"})),y.add({});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.initialise.Alerts=function(){var e=Object(o.a)(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.self,e.abrupt("return",new Promise(function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:N.store({label:"Alerts",value:[]}),a.setState({alerts:[]}),y.add({}),t({alerts:[]});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.initialise.layout=function(){var e=Object(o.a)(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.self,e.abrupt("return",new Promise(function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:N.store({label:"layout",value:"default"}),a.setState({layout:"default"}),y.add({}),t({layout:"default"});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.initialise.theme=function(){var e=Object(o.a)(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.self,e.abrupt("return",new Promise(function(){var e=Object(o.a)(s.a.mark(function e(t){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n={base:"dark"},N.store({label:"theme",value:n}),a.setState({theme:n}),y.add({}),t({theme:n});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.initialise.shift=function(){var e=Object(o.a)(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.self,e.abrupt("return",new Promise(function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:N.store({label:"shift",value:200}),a.setState({shift:200}),y.add({}),t({shift:200});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.initialise.mv=function(){var e=Object(o.a)(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.self,e.abrupt("return",new Promise(function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:N.store({label:"mv",value:25}),a.setState({mv:25}),y.add({}),t({mv:25});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.initialise.snapshots=function(){var e=Object(o.a)(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.self,e.abrupt("return",new Promise(function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:N.store({label:"snapshots",value:[]}),a.setState({snapshots:[]}),y.add({}),t({snapshots:[]});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.initialise.sampleData=Object(o.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"https://jsonblob.com/api/f77c0c24-014e-11ea-be47-f9ab32f9bc7d",e.next=3,fetch("https://jsonblob.com/api/f77c0c24-014e-11ea-be47-f9ab32f9bc7d").then(function(e){return e}).then(function(e){return e.json()}).then(function(e){N.store({label:"sampledata",value:e})});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)})),N.initialise.initialValues=function(){for(var e=0,t=[{label:"theme",initial:{base:"light"}},{label:"investments",initial:[]}];e<t.length;e++){var a=t[e];if(null===localStorage.getItem(a.label))return localStorage.setItem(a.label,JSON.stringify(a.initial))}},N.hydrateFromLocalstorage=function(e){for(var t=e.self,a=0,r=[{label:"theme",initial:{}},{label:"alerts",initial:[]},{label:"sampledata",initial:[]},{label:"shift",initial:0},{label:"mv",initial:0}];a<r.length;a++){var s=r[a];if(null!==localStorage.getItem(s.label)){var c=JSON.parse(localStorage.getItem(s.label));t.setState(Object(n.a)({},s.label,c))}else localStorage.setItem(s.label,JSON.stringify(s.initial))}},N.initialise.Startup=function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.self;case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.initialise.store=function(e,t){var a="array"===t?[]:"string"===t?"":{};localStorage.setItem(e,JSON.stringify(a))},N.checkExists=function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(o.a)(s.a.mark(function e(a){var n,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.self,n=t.values,r=setInterval(function(){var e=!0,t=!1,s=void 0;try{for(var o,i=n[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var l=o.value;if(null!==l.check&&y.add(l),null===l.check)return l.run}}catch(f){t=!0,s=f}finally{try{e||null==i.return||i.return()}finally{if(t)throw s}}if(y.size>=n.length){var u={success:Object(c.a)(new Set(y)),ok:!0};clearInterval(r),a(JSON.stringify(u))}},2e3);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.createMessagesDB=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.self,a={type:"message",text:"First message to initialise the remote messages db.",createdAt:new Date},n={method:"POST",headers:{"Content-Type":"application/json","access-control-expose-headers":"X-jsonBlob"},body:JSON.stringify(a)},r=u.a.storageProvider.initUrl,e.next=6,fetch(r,n).then(function(e){return N.store({label:"db_messages_endpoint_id",value:e.headers.get("X-jsonBlob")}),y.add(r),e.headers.get("X-jsonBlob")});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.createNotificationsDB=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.self,a={type:"notification",text:"First notification to initialise the remote notifications db.",createdAt:new Date},n={method:"POST",headers:{"Content-Type":"application/json","access-control-expose-headers":"X-jsonBlob"},body:JSON.stringify(a)},r=u.a.storageProvider.initUrl,e.next=6,fetch(r,n).then(function(e){return N.store({label:"db_notifications_endpoint_id",value:e.headers.get("X-jsonBlob")}),y.add(r),e.headers.get("X-jsonBlob")});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.createAlertsDB=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.self,a={type:"alert",text:"First alert to initialise the remote alerts db.",createdAt:new Date},n={method:"POST",headers:{"Content-Type":"application/json","access-control-expose-headers":"X-jsonBlob"},body:JSON.stringify(a)},r=u.a.storageProvider.initUrl,e.next=6,fetch(r,n).then(function(e){return N.store({label:"db_alerts_endpoint_id",value:e.headers.get("X-jsonBlob")}),y.add(r),e.headers.get("X-jsonBlob")});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.getCollectionEndpointUrl=function(e){var t=u.a.storageProvider.url;return"alerts"===e?t+JSON.parse(localStorage.getItem("db_alerts_endpoint_id")):"messages"===e?t+JSON.parse(localStorage.getItem("db_messages_endpoint_id")):"notifications"===e?t+JSON.parse(localStorage.getItem("db_notifications_endpoint_id")):void 0},N.createAlert=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.self,(n=t.alert).createdAt=new Date,n.message=f.a.alert(n),e.next=5,N.get("Alerts");case 5:return(r=e.sent).push(n),a.setState({alerts:r}),N.store({label:"Alerts",value:r}),e.abrupt("return",new Promise(function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=N.getCollectionEndpointUrl("alerts"),n={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)},e.next=4,fetch(a,n).then(function(e){return e.json()}).then(function(e){return e}).then(function(e){t({data:e,ok:!0})});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.filterJSON=function(e){return e.filter(function(e,t){return!Number.isInteger(t/2)})},N.sleep=function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(function(e){return new Promise(function(t){return setTimeout(t,e)})});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.reverseGeocodeCity=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.self,n="https://reverse.geocoder.api.here.com/6.2/reversegeocode.json?prox="+a.state.lat+","+a.state.long+",250&mode=retrieveAddresses&maxresults=1&gen=9&app_id=ZZN2MPuexLyuz3VR0KDD&app_code=TnEsVJR8k3zxGMiAkbP_EQ",fetch(n,function(e,t){return t}).then(function(e){return e.json()}).then(function(e){var t=e.Response&&e.Response.View[0]&&e.Response.View[0].Result[0]&&e.Response.View[0].Result[0].Location&&e.Response.View[0].Result[0].Location.Address&&e.Response.View[0].Result[0].Location.Address.AdditionalData,n=e.Response&&e.Response.View[0]&&e.Response.View[0].Result[0]&&e.Response.View[0].Result[0].Location&&e.Response.View[0].Result[0].Location.Address,r=e.Response&&e.Response.View[0]&&e.Response.View[0].Result[0]&&e.Response.View[0].Result[0].Location&&e.Response.View[0].Result[0].Location.Address,s=!0,c=!1,o=void 0;try{for(var i,l=t[Symbol.iterator]();!(s=(i=l.next()).done);s=!0){var u=i.value;if("CountryName"===u.key){var f=u.value;a.setState({country:f,countrySet:!0})}}}catch(m){c=!0,o=m}finally{try{s||null==l.return||l.return()}finally{if(c)throw o}}a.setState({location:r,city:r.County,suburb:r.District,province:r.State,searchFormReady:!0,ready:!0}),N.findCurrency({self:a}),p.a.store({type:"location",data:n}),p.a.store({type:"locationIsSet",data:!0})});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.findCurrency=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=t.self).state.countrySet){e.next=6;break}return n=a.state.country,r="https://restcountries.eu/rest/v2/name/"+n,e.next=6,fetch(r,function(e,t){return t}).then(function(e){return e.json()}).then(function(e){Object(i.setGlobal)({activeCurrencyIsSet:!0,activeCurrency:e[0].currencies[0],baseCurrency:e[0].currencies[0]}),localStorage.setItem("activeCurrency",JSON.stringify(e[0].currencies[0])),localStorage.setItem("baseCurrency",JSON.stringify(e[0].currencies[0])),localStorage.setItem("activeCurrencyIsSet",JSON.stringify(!0))});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.getGeoLocation=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.self,n=function(e){a.setState({lat:e.coords.latitude||0,long:e.coords.longitude||0}),N.reverseGeocodeCity({self:a})},"undefined"!==typeof window.navigator.geolocation&&window.navigator.geolocation.getCurrentPosition(n);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.findLocation=function(e){var t=e.searchTerm,a=e.self;fetch("https://geocoder.api.here.com/6.2/geocode.json?searchtext="+t+"&app_id=ZZN2MPuexLyuz3VR0KDD&app_code=TnEsVJR8k3zxGMiAkbP_EQ&gen=9",function(e,t){return t}).then(function(e){return e.json()}).then(function(e){return a.setState({city:e.Response.View[0].Result[0].Location.Address.County,suburb:e.Response.View[0].Result[0].Location.Address.District,province:e.Response.View[0].Result[0].Location.Address.State,searchFormReady:!0,location:e.Response.View[0].Result[0].Location.Address}),N.findCurrency({self:a})})},N.showDrawer=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.project,n=t.self,Object(i.setGlobal)({activeProject:a}),n.setState({projectInfoVisible:!0,activeProject:a,conversationReady:!0,activeTab:"1"}),localStorage.setItem("activeProject",JSON.stringify(a));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.refresh=function(){var e=Object(o.a)(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(a=t.self).setState({ready:!1}),setTimeout(function(){N.fetchProjects({self:a})},1e3);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.userAfterRegistration=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r,c,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.self,n=t.data,console.log("userAfterRegistration",n),(r=n.user).profile={confirmed:!1,config:{type:"",onboardingcomplete:!1},name:{first:"",last:""},picture:"",location:{},preferredCurrency:{},contact:{phone:""},grade:0,bio:"",role:"",dob:"",gender:"",connections:[],network:{pending:[],confirmed:[]},projects:[],cv:{file:"",uploaded:!1},additional:{ratings:{rating:0,ratings:[]},skills:[]}},r.confirmed=!1,c="https://api.crew20.devcolab.site/v1/users/"+r.id,i={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)},e.next=9,fetch(c,i).then(function(e){return e.json()}).then(function(){var e=Object(o.a)(s.a.mark(function e(t){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(400!==t.code&&401!==t.code){e.next=3;break}e.next=9;break;case 3:return(n=N.get("account")).user=t,a.setState({isAuthenticated:!0,account:n}),N.store({label:"account",value:n}),e.next=9,j.sendConfirmationEmail({self:a,userId:t.id});case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.uploadProfileImage=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r,c,o,i,l;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.self,n=t.file,console.log("uploadProfileImage",n),r="https://crew20-uploads.s3.eu-west-2.amazonaws.com/"+n.name,c=N.get("account"),(o=c.user).profile.picture=r,i=O.url("users")+o.id,l={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)},e.next=10,fetch(i,l).then(function(e){return 200!==e.status?null:e.json()}).then(function(e){c.user=e,N.set("account",c),a.context.updateAccount(),a.props.closeDialog()});case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.createFileConversation=function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(o.a)(s.a.mark(function e(t){var a,r,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(n.a)({type:"file",createdAt:new Date,updatedAt:new Date,messages:[],participants:[N.get("account").user.id]},"type","file"),r=O.url("conversations"),c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)},e.next=5,fetch(r,c).then(function(e){return e.json()}).then(function(e){console.log("conversation",e),t(e)});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.uploadEventFiles=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.self,a=t.parent,n=t.event,r=t.file,e.next=3,N.createFileConversation().then(function(){var e=Object(o.a)(s.a.mark(function e(t){var c,o,i,l,u,f;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("convRes",t),c="https://crew20-uploads.s3.eu-west-2.amazonaws.com/"+r.name,o=N.get("account"),i=o.user,l={url:c,file:c,title:c,uploadedBy:i.id,createdAt:new Date,conversation:t.id,event:n.id},n.hasOwnProperty("files")||(n.files=[]),n.files.push(l),console.log("event",n),u=O.url("events")+n.id,f={method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer "+N.get("account").tokens.access.token},body:JSON.stringify(n)},console.log("file upload project patch config",f),e.next=13,fetch(u,f).then(function(e){return e.json()}).then(function(e){console.log("Updated event : file uploaded",e),N.store({label:"activeEvent",value:e}),a.setState({event:e,files:e.files})});case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 3:e.sent;case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.uploadProjectFiles=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.self,a=t.parent,n=t.project,r=t.file,c=t.fileType,e.next=3,N.createFileConversation().then(function(){var e=Object(o.a)(s.a.mark(function e(t){var o,i,l,u,f,p;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("created file converasation",t),o="https://crew20-uploads.s3.eu-west-2.amazonaws.com/"+r.name,i=N.get("account"),l=i.user,u={url:o,file:o,title:o,uploadedBy:l.id,createdAt:new Date,conversation:t.id,project:n.id,fileType:c},n.hasOwnProperty("files")||(n.files=[]),n.files.push(u),console.log("project",n),f=O.url("projects")+n.id,p={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},console.log("file upload project patch config",p),e.next=13,fetch(f,p).then(function(e){return e.json()}).then(function(e){console.log("Updated project : file uploaded",e),N.store({label:"activeProject",value:e}),a.setState({project:e,files:e.files})});case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 3:e.sent;case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.uploadProjectAvatar=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r,c,o,i,l;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.self,a=t.parent,n=t.project,r=t.file,c="https://crew20-uploads.s3.eu-west-2.amazonaws.com/"+r.name,o=N.get("account"),o.user,n.hasOwnProperty("media")||(n.media={video:[],images:[]}),n.media.images.unshift({title:c,url:c}),console.log("project",n),i=N.api("projects")+n.id,l={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},console.log("file upload project patch config",l),e.next=12,fetch(i,l).then(function(e){return e.json()}).then(function(e){console.log("Update project",e),N.store({label:"activeProject",value:e}),a.setState({project:e,isOpen:!1})});case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.uploadCV=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r,c,o,i,l;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.self,n=t.file,r="https://crew20-uploads.s3.eu-west-2.amazonaws.com/"+n.name,c=N.get("account"),(o=c.user).profile.cv.file=r,o.profile.cv.uploaded=!0,i=O.url("users")+o.id,l={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)},e.next=10,fetch(i,l).then(function(e){return 200!==e.status?null:e.json()}).then(function(e){c.user=e,N.store({label:"account",value:c}),a.context.updateAccount(),a.props.closeDialog()});case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.uploadWorkPortfolioImage=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.self,n=t.file,r="https://crew20-uploads.s3.eu-west-2.amazonaws.com/"+n.name,a.setState({portfolioImage:r}),e.abrupt("return",r);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.modifyUsers=Object(o.a)(s.a.mark(function e(){var t,a,n,r,c,o,i,l,u;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.crew20.devcolab.site/v1/users/",e.next=3,fetch("https://api.crew20.devcolab.site/v1/users/").then(function(e){return e.json()}).then(function(e){return e});case 3:t=e.sent,a=!0,n=!1,r=void 0,e.prev=7,c=t[Symbol.iterator]();case 9:if(a=(o=c.next()).done){e.next=20;break}return(i=o.value).profile.network={pending:[],confirmed:[]},i.profile.confirmed=!0,l="https://api.crew20.devcolab.site/v1/users/"+i.id,u={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)},e.next=17,fetch(l,u).then(function(e){return e.json()}).then(function(e){});case 17:a=!0,e.next=9;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(7),n=!0,r=e.t0;case 26:e.prev=26,e.prev=27,a||null==c.return||c.return();case 29:if(e.prev=29,!n){e.next=32;break}throw r;case 32:return e.finish(29);case 33:return e.finish(26);case 34:case"end":return e.stop()}},e,null,[[7,22,26,34],[27,,29,33]])})),N.extractAuthors=function(){var e=Object(o.a)(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.self,a=t.conversations,console.log(" "),console.log(" "),console.log(" "),console.log("[[ extractAuthors ]]",t),console.log(" "),console.log(" "),console.log(" "),e.abrupt("return",new Promise(function(){var e=Object(o.a)(s.a.mark(function e(t){var n,r,c,o,i,l,u,f,p,m,d,h,b,v;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=!0,r=!1,c=void 0,e.prev=3,o=a[Symbol.iterator]();case 5:if(n=(i=o.next()).done){e.next=32;break}for(l=i.value,u=new Set,f=l.messages,p=!0,m=!1,d=void 0,e.prev=12,h=f[Symbol.iterator]();!(p=(b=h.next()).done);p=!0)v=b.value,u.add(v.author);e.next=20;break;case 16:e.prev=16,e.t0=e.catch(12),m=!0,d=e.t0;case 20:e.prev=20,e.prev=21,p||null==h.return||h.return();case 23:if(e.prev=23,!m){e.next=26;break}throw d;case 26:return e.finish(23);case 27:return e.finish(20);case 28:Array.from(u);case 29:n=!0,e.next=5;break;case 32:e.next=38;break;case 34:e.prev=34,e.t1=e.catch(3),r=!0,c=e.t1;case 38:e.prev=38,e.prev=39,n||null==o.return||o.return();case 41:if(e.prev=41,!r){e.next=44;break}throw c;case 44:return e.finish(41);case 45:return e.finish(38);case 46:case"end":return e.stop()}},e,null,[[3,34,38,46],[12,16,20,28],[21,,23,27],[39,,41,45]])}));return function(t){return e.apply(this,arguments)}}()));case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.fetchConversations=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.self,n=t.userId,r=t.type,e.abrupt("return",new Promise(function(){var e=Object(o.a)(s.a.mark(function e(t){var c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c="https://api.crew20.devcolab.site/v1/conversations/?participants="+n+"&type="+r,e.next=3,fetch(c).then(function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.json());case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).then(function(){var e=Object(o.a)(s.a.mark(function e(n){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:N.store({label:"conversations",value:n}),a.setState({conversations:n,activeConversation:n[0]}),t(n);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.fetchRecipientData=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.self,a=t.recipientId,n="https://api.crew20.devcolab.site/v1/users/"+a,e.next=4,fetch(n).then(function(e){return e.json()}).then(function(e){return e});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.getRecipientId=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r,o;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.self,a=t.participants,n=t.userId,r=a.indexOf(n),(o=Object(c.a)(a)).splice(r,1),e.abrupt("return",o[0]);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.updateConversationMessages=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.self,n=t.conversation,r=O.url("conversations")+n.id,c={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},e.next=5,fetch(r,c).then(function(e){return e.json()}).then(function(e){var t=a.props.activeConversationIndex,r=a.props.conversations;r[t]=e,r[t].authors=n.authors,a.props.updateActiveConversation({conversations:r,activeConversation:r[t]})});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.createGroupConversation=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r,c,i,l,u,f;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("  "),console.log(" conversation to insert  ",t),console.log("  "),a=t.self,n=t.users,r=t.type,c=t.name,i=N.get("account").user.id,l=n.map(function(e){return e.id}),u={participants:l,messages:[],author:i,type:r,name:c,group:!0},"https://api.crew20.devcolab.site/v1/conversations/",f={method:"POST",headers:{Authorization:"Bearer "+N.get("account").tokens.access.token,"Content-Type":"application/json"},body:JSON.stringify(u)},console.log("group con to insert",u),e.next=12,fetch("https://api.crew20.devcolab.site/v1/conversations/",f).then(function(e){return e.json()}).then(function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("[[ new Group Converation created ]]",t),N.set("activeConversation",t),a.setState({buttonLoading:!1,isOpen:!1}),a.reload();case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.createNewConversation=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r,c,i,l;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("  "),console.log(" conversation to insert  ",t),console.log("  "),a=t.self,n=t.selfUserId,r=t.recipientId,c=t.type,i={participants:[n,r],messages:[],author:n,type:c},"https://api.crew20.devcolab.site/v1/conversations/",l={method:"POST",headers:{Authorization:"Bearer "+N.get("account").tokens.access.token,"Content-Type":"application/json"},body:JSON.stringify(i)},e.next=9,fetch("https://api.crew20.devcolab.site/v1/conversations/",l).then(function(e){return console.log(e),e.json()}).then(function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[[ new Converation created ]]",t),e.next=3,N.fetchConversations({self:a,userId:n});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.checkConversationExists=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r,c,o,i,l,u,f,p,m,d,h,b,v,w,g,y,j,k,E,N,O;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.self,a=t.selfUserId,n=t.recipientId,r="https://api.crew20.devcolab.site/v1/conversations/?participants="+a,c="https://api.crew20.devcolab.site/v1/conversations/?participants="+n,e.next=5,fetch(r).then(function(e){return e.json()}).then(function(e){return e});case 5:return o=e.sent,e.next=8,fetch(c).then(function(e){return e.json()}).then(function(e){return e});case 8:i=e.sent,u=!1,f=!0,p=!1,m=void 0,e.prev=13,d=o[Symbol.iterator]();case 15:if(f=(h=d.next()).done){e.next=40;break}for(b=h.value,v=b.id,w=!0,g=!1,y=void 0,e.prev=21,j=i[Symbol.iterator]();!(w=(k=j.next()).done);w=!0)E=k.value,N=E.id,v===N&&("private"===E.type?(O=x({},b,{},E),console.log("Found existing conversation",O),l=O,u=!0):(l=null,u=!1));e.next=29;break;case 25:e.prev=25,e.t0=e.catch(21),g=!0,y=e.t0;case 29:e.prev=29,e.prev=30,w||null==j.return||j.return();case 32:if(e.prev=32,!g){e.next=35;break}throw y;case 35:return e.finish(32);case 36:return e.finish(29);case 37:f=!0,e.next=15;break;case 40:e.next=46;break;case 42:e.prev=42,e.t1=e.catch(13),p=!0,m=e.t1;case 46:e.prev=46,e.prev=47,f||null==d.return||d.return();case 49:if(e.prev=49,!p){e.next=52;break}throw m;case 52:return e.finish(49);case 53:return e.finish(46);case 54:return e.abrupt("return",{exists:u,conversation:l});case 55:case"end":return e.stop()}},e,null,[[13,42,46,54],[21,25,29,37],[30,,32,36],[47,,49,53]])}));return function(t){return e.apply(this,arguments)}}(),N.deleteAllConversations=Object(o.a)(s.a.mark(function e(){var t,a,n,r,c,o,i,l,u;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.crew20.devcolab.site/v1/conversations/",e.next=3,fetch("https://api.crew20.devcolab.site/v1/conversations/").then(function(e){return e.json()}).then(function(e){return e});case 3:t=e.sent,a=!0,n=!1,r=void 0,e.prev=7,c=t[Symbol.iterator]();case 9:if(a=(o=c.next()).done){e.next=18;break}return i=o.value,l="https://api.crew20.devcolab.site/v1/conversations/"+i.id,u={method:"DELETE"},e.next=15,fetch(l,u);case 15:a=!0,e.next=9;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(7),n=!0,r=e.t0;case 24:e.prev=24,e.prev=25,a||null==c.return||c.return();case 27:if(e.prev=27,!n){e.next=30;break}throw r;case 30:return e.finish(27);case 31:return e.finish(24);case 32:case"end":return e.stop()}},e,null,[[7,20,24,32],[25,,27,31]])})),N.modifyProjects=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r,c,o,i,l,u,f,p,m;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.crew20.devcolab.site/v1/projects/",e.next=3,fetch("https://api.crew20.devcolab.site/v1/projects/").then(function(e){return e.json()}).then(function(e){return console.log("p",e),e});case 3:a=e.sent,n=!0,r=!1,c=void 0,e.prev=7,o=a[Symbol.iterator]();case 9:if(n=(i=o.next()).done){e.next=23;break}return l=i.value,u=[],f=[{canEditCrew:[],canEditProject:[],canManageFiles:[],canEditCalendar:[]}],l.admins=u,l.roles=f,l.accepted=[],p={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)},m="https://api.crew20.devcolab.site/v1/projects/"+l.id,e.next=20,fetch(m,p).then(function(e){return e.json()}).then(function(e){return console.log("p",e),e});case 20:n=!0,e.next=9;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(7),r=!0,c=e.t0;case 29:e.prev=29,e.prev=30,n||null==o.return||o.return();case 32:if(e.prev=32,!r){e.next=35;break}throw c;case 35:return e.finish(32);case 36:return e.finish(29);case 37:case"end":return e.stop()}},e,null,[[7,25,29,37],[30,,32,36]])}));return function(t){return e.apply(this,arguments)}}(),N.deleteConversation=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.convId,n=N.api("conversations")+a,console.log("url",n),r={method:"DELETE",headers:{"Content-Type":"application/json"}},e.next=6,fetch(n,r);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.modifyConversations=Object(o.a)(s.a.mark(function e(){var t,a,n,r,c,o,i,l,u;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.api("conversations");case 2:return t=e.sent,e.next=5,fetch(t).then(function(e){return e.json()}).then(function(e){return e});case 5:a=e.sent,n=!0,r=!1,c=void 0,e.prev=9,o=a[Symbol.iterator]();case 11:if(n=(i=o.next()).done){e.next=21;break}if((l=i.value).hasOwnProperty("author")){e.next=18;break}return console.log("conv doesnt have author"),u=l.id,e.next=18,N.deleteConversation({convId:u});case 18:n=!0,e.next=11;break;case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(9),r=!0,c=e.t0;case 27:e.prev=27,e.prev=28,n||null==o.return||o.return();case 30:if(e.prev=30,!r){e.next=33;break}throw c;case 33:return e.finish(30);case 34:return e.finish(27);case 35:case"end":return e.stop()}},e,null,[[9,23,27,35],[28,,30,34]])})),N.createEvent=function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,r,c,o,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.self,n=t.user,r=t.event,n.profile.hasOwnProperty("events")||(n.profile.events=[]),(c=n.profile.events).push(r),n.profile.events=c,o=N.api("users")+n.id,i={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},e.next=9,fetch(o,i).then(function(e){return e.json()}).then(function(e){console.log("createEvent res",e),a.context.updateAccount(e),a.setState({isOpen:!1}),a.reload()});case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N.deleteEvents=Object(o.a)(s.a.mark(function e(){var t,a,n,r,c,o,i,l,u,f,p;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.url("events"),a={headers:{Authorization:"Bearer "+N.get("account").tokens.access.token}},e.next=4,fetch(t,a).then(function(e){return e.json()}).then(function(e){return console.log("event",e),e});case 4:n=e.sent,r=!0,c=!1,o=void 0,e.prev=8,i=n[Symbol.iterator]();case 10:if(r=(l=i.next()).done){e.next=19;break}return u=l.value,f=O.url("events")+u.id,p={method:"DELETE",headers:{Authorization:"Bearer "+N.get("account").tokens.access.token}},e.next=16,fetch(f,p).then(function(e){}).then(function(e){});case 16:r=!0,e.next=10;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(8),c=!0,o=e.t0;case 25:e.prev=25,e.prev=26,r||null==i.return||i.return();case 28:if(e.prev=28,!c){e.next=31;break}throw o;case 31:return e.finish(28);case 32:return e.finish(25);case 33:case"end":return e.stop()}},e,null,[[8,21,25,33],[26,,28,32]])})),N.deleteProjects=Object(o.a)(s.a.mark(function e(){var t,a,n,r,c,o,i,l,u,f,p;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.url("projects"),a={headers:{Authorization:"Bearer "+N.get("account").tokens.access.token}},e.next=4,fetch(t,a).then(function(e){return e.json()}).then(function(e){return console.log("event",e),e});case 4:n=e.sent,r=!0,c=!1,o=void 0,e.prev=8,i=n[Symbol.iterator]();case 10:if(r=(l=i.next()).done){e.next=19;break}return u=l.value,f=O.url("projects")+u.id,p={method:"DELETE",headers:{Authorization:"Bearer "+N.get("account").tokens.access.token}},e.next=16,fetch(f,p).then(function(e){console.log(e)}).then(function(e){});case 16:r=!0,e.next=10;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(8),c=!0,o=e.t0;case 25:e.prev=25,e.prev=26,r||null==i.return||i.return();case 28:if(e.prev=28,!c){e.next=31;break}throw o;case 31:return e.finish(28);case 32:return e.finish(25);case 33:case"end":return e.stop()}},e,null,[[8,21,25,33],[26,,28,32]])})),N.deleteConversations=Object(o.a)(s.a.mark(function e(){var t,a,n,r,c,o,i,l,u,f,p;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.url("conversations"),a={headers:{Authorization:"Bearer "+N.get("account").tokens.access.token}},e.next=4,fetch(t,a).then(function(e){return e.json()}).then(function(e){return console.log("event",e),e});case 4:n=e.sent,r=!0,c=!1,o=void 0,e.prev=8,i=n[Symbol.iterator]();case 10:if(r=(l=i.next()).done){e.next=19;break}return u=l.value,f=O.url("conversations")+u.id,p={method:"DELETE",headers:{Authorization:"Bearer "+N.get("account").tokens.access.token}},e.next=16,fetch(f,p).then(function(e){console.log(e)}).then(function(e){});case 16:r=!0,e.next=10;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(8),c=!0,o=e.t0;case 25:e.prev=25,e.prev=26,r||null==i.return||i.return();case 28:if(e.prev=28,!c){e.next=31;break}throw o;case 31:return e.finish(28);case 32:return e.finish(25);case 33:case"end":return e.stop()}},e,null,[[8,21,25,33],[26,,28,32]])})),E.Fn=N,E.api=O,E.ui=k,E.app=j,E.util=E,window.Fn=N,window.api=O,window.util=E,window.ui=k,window.app=j,t.d=N}).call(this,a(133))},632:function(e,t){},647:function(e,t,a){},648:function(e,t,a){},657:function(e,t,a){},658:function(e,t,a){},756:function(e,t,a){},763:function(e,t,a){},764:function(e,t,a){},765:function(e,t,a){},766:function(e,t,a){},777:function(e,t,a){"use strict";a.r(t);a(414);var n=a(0),r=a.n(n),s=a(20),c=a.n(s);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(471);var o=a(68),i=Object(o.a)(),l=(a(472),a(473),a(474),a(475),a(476),a(477),a(478),a(120),a(161),a(479),a(480),a(481),a(112)),u=a(2),f=a.n(u),p=a(4),m=a(16),d=a(15),h=a(18),b=a(17),v=a(3),w=a(19),g=a(151),x=a(794),y=a(43),j=y.b.div({hidden:{opacity:0},visible:{opacity:1}}),k=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={isVisible:!1},a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this;setTimeout(function(){t.setState({isVisible:!e.state.isVisible})},100)}},{key:"componentWillUnmount",value:function(){var e=this,t=this;setTimeout(function(){t.setState({isVisible:!e.state.isVisible})},100)}},{key:"render",value:function(){var e=this.state.isVisible;return r.a.createElement(j,{className:"box w-100",pose:e?"visible":"hidden"},this.props.children)}}]),t}(r.a.Component),E=a(5),N=a.n(E),O=a(29),S=(a(496),r.a.createContext({})),C=(S.Provider,S.Consumer,S),D=a(780),P=a(82),T=a(13),A=a.n(T);window.moment=A.a;var I=a(56);window.GeoPattern=I;N.a.createElement("span",null,"Title");var R=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={},console.log("Project Detail",a.props),a.avatar=a.avatar.bind(Object(v.a)(a)),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"avatar",value:function(e){var t="undefined"!==typeof e.media&&"undefined"!==typeof e.media.images?e.media.images[0].url:"http://cdn.shopify.com/s/files/1/2278/2351/products/W1151_GeometricPattern3_1024x1024.jpg?v=1510704914";return t}},{key:"componentDidUpdate",value:function(){}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return N.a.createElement(O.a,{to:"/project/"+this.props.project.id,className:" trans-a relative raleway Project_list_item pointer -sans-serif flex flex-column flex-auto w-100  items-center justify-start pa0 bs-b mb4 br2 overflow-hidden relative "},N.a.createElement("div",{className:"avatar-l- w-100 flex flex-column bg-cover bg-center br4-",style:{height:"120px",backgroundImage:this.props.project.media&&this.props.project.media.images.length?"url("+this.props.project.media.images[0].url+")":I.generate(this.props.project.title).toDataUrl()}}),N.a.createElement("div",{className:"flex flex-column  w-100 relative bg-white raleway"},N.a.createElement("div",{className:"list-action-buttons"},N.a.createElement(D.a,{placement:"bottomRight",content:N.a.createElement("div",{className:" flex flex-column f7 fw6 exo br3"},N.a.createElement("span",{className:"bg-white-80 trans-a list-actions-item pointer pv2 ph3 flex bb b--black-05 black-60-white-80 flex items-center"},N.a.createElement(P.a,{className:"f7 fw6 black-40 -white mr2",type:"container"})," Add to shortlist"),N.a.createElement("span",{className:"bg-white-80 trans-a list-actions-item pointer pv2 ph3 flex bb b--black-05 black-60 -white-80 flex items-center"},N.a.createElement(P.a,{className:"f7 fw6 black-40 -white mr2",type:"message"})," Send Message")),trigger:"hover"},N.a.createElement("div",{className:" pv0 ph2 br3 f4 fw6 black"},N.a.createElement("span",{className:"flex items-center justify-center w-100 h-100"},N.a.createElement(P.a,{className:"white f4",type:"ellipsis"}))))),N.a.createElement("div",{className:"flex flex-row w-100"},N.a.createElement("div",{className:"flex flex-column w-100 "},N.a.createElement("div",{className:"flex flex-column pa3 bb b--black-10 "},N.a.createElement("h4",{className:"f5 flex flex-column mb0"},N.a.createElement("span",{className:"f4 fw6 black-80"},""===this.props.project.title?"Untitled":this.props.project.title))),N.a.createElement("div",{className:"flex flex-row "},N.a.createElement("div",{className:"flex flex-column mb0 pa3 flex-auto"},N.a.createElement("span",{className:"f7 fw7 black-70 mb1"},N.a.createElement("span",{className:"fw4 black-40 mr2"},"Start date")," ",A()(this.props.project.start_date).format("DD MMM YYYY")),N.a.createElement("span",{className:"f7 fw7 black-70"},N.a.createElement("span",{className:"fw4 black-40 mr2"},"Deadline")," ",A()(this.props.project.deadline).format("DD MMM YYYY"))),N.a.createElement("div",{className:"flex flex-column w-30 bl b--black-10 bw-1 items-center justify-center ph2"},N.a.createElement("span",{className:"flex f5 fw5 black tc items-center justify-center pb1"},A()(this.props.project.start_date).diff(new Date,"days")," days"),N.a.createElement("span",{className:"flex f7 fw3 black-60 tc"},"until start date")))))),N.a.createElement("div",{className:" exo flex flex-row justify-between  w-100"},N.a.createElement("div",{className:" bg-black-05-  flex flex-row justify-between w-100"},N.a.createElement("div",{className:" flex flex-row w-100 justify-between"},N.a.createElement("div",{className:"flex flex-row  mb0 flex-auto items-center justify-center  "},N.a.createElement("span",{className:"flex f7 fw3 black-50 pa2"},N.a.createElement("span",{className:"fw7 mr1"},this.props.project.positions.length)," positions")),N.a.createElement("div",{className:"flex flex-row  mb0 flex-auto items-center justify-center bl b--white-30 "},N.a.createElement("span",{className:"flex f7 fw3 black-50  pa2"},N.a.createElement("span",{className:"fw7 mr1"},this.props.project.crew.length)," filled")),N.a.createElement("div",{className:"flex flex-row  mb0 flex-auto items-center justify-center bl b--white-30 "},N.a.createElement("span",{className:"flex f7 fw3 black-50 items-center justify-center  pa2"},N.a.createElement(P.a,{icon:"comment",iconSize:14,className:"mr1"})," ",this.props.project.comments.length)),N.a.createElement("div",{className:"flex flex-row  mb0 flex-auto items-center justify-center bl b--white-30 bg-black-1-0 "},N.a.createElement("span",{className:"flex f7 fw3 black-50 items-center justify-center  pa2"},"view ",N.a.createElement(P.a,{icon:"arrow-right",iconSize:14,className:"ml1"})))))))}}]),t}(N.a.Component),M=y.b.section({open:{x:"0",delayChildren:200,staggerChildren:100},closed:{x:"0",delay:300}}),L=y.b.div({open:{y:0,opacity:1},closed:{y:50,opacity:0}}),B=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).toggle=function(){return a.setState({isOpen:!a.state.isOpen})},a.state={isOpen:!1,loading:!1},a.avatar=a.avatar.bind(Object(v.a)(a)),a.toggle=a.toggle.bind(Object(v.a)(a)),console.log("List",e),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"avatar",value:function(e){var t="undefined"!==typeof e.picture?e.picture:"http://cdn.shopify.com/s/files/1/2278/2351/products/W1151_GeometricPattern3_1024x1024.jpg?v=1510704914";return t}},{key:"setForeignCurrencyRate",value:function(){}},{key:"componentDidMount",value:function(){setTimeout(this.toggle,100)}},{key:"render",value:function(){var e=this,t=this.state.isOpen;return N.a.createElement(M,{pose:t?"open":"closed",id:"List_A",className:" col-"+this.props.col+" list array flex flex-row justify-between flex-auto flex-wrap w-100 pb4 pt2 ph0 bg-transparent "},this.props.projects.map(function(t,a){return N.a.createElement(L,{key:a,className:"relative mb4"},N.a.createElement(R,{key:a,activeProject:e.props.activeProject,project:t,showDrawer:e.props.showDrawer,theme:e.props.theme,activeCurrency:e.props.activeCurrency}))}))}}]),t}(N.a.Component),F=a(35),_=(a(548),function(e){e.updateActiveDoc,e.activeDoc;var t=e.title,a=e.theme,n=e.docs,r=e.showInsertForm,s=(e.trigger,e.ready),c=e.showButton;return N.a.createElement("section",{className:"flex flex-row w-100"},N.a.createElement("section",{id:"PageTitle",className:"flex flex-column w-100 relative"},N.a.createElement("h1",{className:"ma0 raleway -raleway f3 fw6  mb-0 flex flex-row items-center justify-start black"},N.a.createElement("span",null,t),"undefined"!==typeof n&&!1!==n&&N.a.createElement("div",{style:{color:"white",fontWeight:"bold",marginLeft:"1rem",background:"#c4c4c7"},className:"  count-badge- f6 pv1 ph2 br1 -bg-white "},N.a.createElement("span",{className:"bg-white-"},s&&n&&n.length||0))),c?N.a.createElement("h5",{onClick:r,className:a&&a.colorScheme.color+" raleway -varela f6 fw6 mb4"},N.a.createElement(F.a,{type:"plus"})," Add New"):null))}),V=a(791),U=a(792),J=a(786),z=(a(551),a(6)),Y=r.a.forwardRef(function(e,t){return console.log("ItemC",e),r.a.createElement("div",{key:e.item.createdAt,ref:t,style:e.style,className:(e.recipientID!==e.item.author?"row-reverse justify-start message-list-item ":" message-list-item justify-start ")+" items-start flex flex-row w-100 pb4"}," ",(console.log("",e.recipientID),console.log("",e.item.author)),r.a.createElement("div",{style:{backgroundImage:"url("+e.avatarAuthor(e.item)+")"},className:"avatar-s flex flex-column bg-cover bg-center br2"}),r.a.createElement("div",{className:(e.recipientID!==e.item.author?"tr":" tl")+" flex flex-column w-100 message-text-box ph3 pt3 pb4 br2 mh2 mw5 right bs-b bg-white relative"},e.item.text,r.a.createElement("div",{className:"message-sent-time flex flex-column"},r.a.createElement("span",{className:" fw5 black-30"},A()(e.item.createdAt).fromNow()))))}),G=Object(y.b)(Y)({enter:{y:0,opacity:1,delay:0,transition:{y:{type:"spring",stiffness:1e3,damping:100},default:{duration:300}}},exit:{y:-50,opacity:1,delay:300,transition:{y:{type:"spring",stiffness:1e3,damping:100},default:{duration:300}}}}),H=y.b.div({enter:{y:-50,opacity:1,delay:0,transition:{y:{type:"spring",ease:"easeInOut",stiffness:1e3,damping:100},default:{duration:300}}},exit:{y:0,opacity:0,delay:0,transition:{y:{type:"spring",stiffness:1e3,damping:100,restDelta:.5,restSpeed:10},default:{duration:300}}}}),q=function(e){return r.a.createElement(y.a,{animateOnMount:!0},e.items.map(function(t){return r.a.createElement(G,{enterAfterExit:!0,beforeChildren:!0,animateOnMount:!0,key:t.createdAt,item:t,recipientID:e.recipientID,avatarAuthor:e.avatarAuthor})}))},W=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).showDrawer=function(){a.setState({visible:!0})},a.onClose=function(){a.setState({visible:!1})},a.onChange=function(e){a.setState({placement:e.target.value})},a.state={ready:!1,doc:{},chef:{},visible:a.props.visible,placement:"right",test:a.props.visible,activeTab:"1",characters:[],conversation:{messages:[],participants:[]},recipient:a.props.chef},console.log("Messagebox1",e),a.showWidget=a.showWidget.bind(Object(v.a)(a)),a.checkUploadResult=a.checkUploadResult.bind(Object(v.a)(a)),a.avatar=a.avatar.bind(Object(v.a)(a)),a.avatarAuthor=a.avatarAuthor.bind(Object(v.a)(a)),a.goToTab1=a.goToTab1.bind(Object(v.a)(a)),a.tabOnChange=a.tabOnChange.bind(Object(v.a)(a)),a.submitMessage=a.submitMessage.bind(Object(v.a)(a)),a.getRecipientDetail=a.getRecipientDetail.bind(Object(v.a)(a)),a.createNewConversation=a.createNewConversation.bind(Object(v.a)(a)),a.insertMessage=a.insertMessage.bind(Object(v.a)(a)),a.findConversation=a.findConversation.bind(Object(v.a)(a)),a.messageText=r.a.createRef(),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"submitMessage",value:function(e){e.preventDefault();var t=this.messageText.current.value,a={author:JSON.parse(localStorage.getItem("account")).sub,text:t,createdAt:new Date};this.insertMessage(a)}},{key:"tabOnChange",value:function(e){console.log(e),this.setState({activeTab:e})}},{key:"goToTab1",value:function(){this.setState({activeTab:"1"})}},{key:"avatar",value:function(){var e="undefined"!==typeof this.state.recipient?this.state.recipient.picture:"http://cdn.shopify.com/s/files/1/2278/2351/products/W1151_GeometricPattern3_1024x1024.jpg?v=1510704914";return e}},{key:"avatarAuthor",value:function(e){e.author;return e.author===this.state.recipient.sub?this.state.recipient.picture:Object(E.getGlobal)().account.picture}},{key:"getRecipientDetail",value:function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"createNewConversation",value:function(){var e=this,t={participants:[Object(E.getGlobal)().account.sub,this.props.chef.sub],messages:[]},a={method:"POST",headers:{origin:"localhost","x-apikey":"5dbadbac64e7774913b6e751","Content-Type":"application/json"},body:JSON.stringify(t)};return fetch("https://homechef-51a6.restdb.io/rest/conversations",a).then(function(e){return e.json()}).then(function(t){console.log("new conv",t),e.setState({conversation:t,ready:!0})})}},{key:"findConversation",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t,a,n,r,s,c=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(E.getGlobal)().account.sub,a=this.props.chef,this.setState({chef:a}),n=a.sub,"https://homechef-51a6.restdb.io/rest/","conversations",r="https://homechef-51a6.restdb.io/rest/conversations"+('?q={"$and":[{"participants":"'+t+'"},{"participants":"'+n+'"}]}'),console.log("[[ Endpoint ]]",r),s={headers:{origin:"localhost:3000","x-apikey":"5dbadbac64e7774913b6e751","Content-Type":"application/json"}},e.abrupt("return",fetch(r,s).then(function(e){return e.json()}).then(function(e){console.log("findconversation",e),0===e.length?c.createNewConversation():(c.setState({conversation:e[0]}),setTimeout(function(){c.setState({ready:!0})},500),console.log("[[ findConversation ]]",c.state))}));case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"insertMessage2",value:function(e){var t=this,a=this.state.conversation._id,n=this.state.conversation;n.messages.unshift(e),window.db.conversations.update({_id:a},n,function(e,a){t.findConversation()}),this.messageText.current.value=null}},{key:"insertMessage",value:function(e){var t=this.state.conversation._id,a=this.state.conversation;a.messages.unshift(e),this.setState({conv:a}),this.messageText.current.value=null;var n="https://homechef-51a6.restdb.io/rest/conversations/"+t;console.log("[[ Endpoint ]]",n);var r={method:"PUT",headers:{origin:"localhost:3000","x-apikey":"5dbadbac64e7774913b6e751","Content-Type":"application/json"},body:JSON.stringify(a)};return fetch(n,r).then(function(e){return e.json()}).then(function(e){console.log("insertMessage",e)})}},{key:"showWidget",value:function(e){window.widget.open()}},{key:"checkUploadResult",value:function(e){e.event}},{key:"componentDidUpdate",value:function(){}},{key:"componentDidMount",value:function(){this.findConversation()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"messageBox flex flex-column relative h-100 flex-auto"},this.props.conversationReady&&this.state.ready?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flex flex-auto flex-column relative bg-white"},r.a.createElement("div",{className:" relative flex flex-auto flex-column w-100 bg-center bg-cover items-start justify-end pa3 relative overflow-hidden"},r.a.createElement("div",{className:(this.props.theme.main," List_A_item cursor-pointer sans-serif flex flex-row flex-auto w-100  items-center justify-start pa0 mb4- br2 overflow-hidden relative ")},r.a.createElement("div",{style:{backgroundImage:"url("+this.avatar(this.props.chef)+")"},className:"avatar flex flex-column bg-cover bg-center br2"}),"                 ",r.a.createElement("div",{className:"flex flex-column pa3 w-100"},r.a.createElement("div",{className:"flex flex-row w-100"},r.a.createElement("div",{className:("dark"===this.props.theme.main?" white ":" black-70 ")+"flex flex-column mr2 f5 fw6 "},this.props.chef.given_name),r.a.createElement("div",{className:("dark"===this.props.theme.main?" white-50 ":" black-50 ")+"flex flex-column flex-auto fw4 f5 black-50 "},this.props.chef.family_name)))))),r.a.createElement("div",{className:"flex -absolute -bottom-0 w-100"},r.a.createElement("form",{onSubmit:this.submitMessage,className:"flex flex-row w-100 ma0"},r.a.createElement("div",{className:"flex flex-column w-80"},r.a.createElement("input",{required:!0,placeholder:"Enter message ...",ref:this.messageText,className:"bn pa3 f4 fw5 black-60- white bg-black-20",type:"text"})),r.a.createElement("div",{className:"flex flex-column w-20 bl b--black-05"},r.a.createElement("button",{type:"submit",className:z.a.get("theme").config.theme.colorScheme.bg+"- bg-black-20 flex h-100 items-center justify-center f4 bn white"},r.a.createElement(F.a,{type:"arrow-right"}))))),r.a.createElement("div",{className:" relative flex flex-auto flex-column w-100 bg-center bg-cover items-start justify-end relative overflow-hidden "}," ",r.a.createElement(H,{animateOnMount:!0,className:"messages-list db relative overflow-auto w-100 pa4 "},r.a.createElement(q,{items:this.state.conversation.messages,recipientID:this.state.recipient.sub,avatarAuthor:this.avatarAuthor})))):r.a.createElement("div",{className:"flex flex-column flex-auto h-100 w-100 items-center justify-center"},r.a.createElement("div",{className:"flex flex-column pa5"},r.a.createElement(F.a,{type:"loading",className:"f2 black-20"})))))}}]),t}(r.a.Component),K=a(58),Z=a(74),X=a(790),$=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={isOpen:!1,loading:!1,buttonLoading:!1},a.confirm=a.confirm.bind(Object(v.a)(a)),a.cancel=a.cancel.bind(Object(v.a)(a)),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"confirm",value:function(){this.setState({buttonLoading:!0}),this.props.submitReservationRequest(this.props.reservationData)}},{key:"cancel",value:function(){this.props.closeReservationScreen()}},{key:"componentDidMount",value:function(){console.log("ReservationConfirmationScreen props",this.props.reservationData.chef.rate)}},{key:"componentDidUpdate",value:function(){console.log("ReservationConfirmationScreen props",this.props)}},{key:"render",value:function(){var e=this;return N.a.createElement(N.a.Fragment,null,N.a.createElement(C.Consumer,null,function(t){return console.log("[[ currency context ]]",t),N.a.createElement("div",{className:"flex flex-column  bg-near-white h-100 exo"},N.a.createElement("section",{id:"",className:"flex flex-column ph4 pt4 h-100"},N.a.createElement("div",{className:"flex flex-column mb2 bb b--black-05 pa4 ba b--black-05 bg-white bs-b"},N.a.createElement("div",{className:"ProjectScenesHeading pt0"},N.a.createElement("h3",{className:"f7 fw3 black-30 mb2"},"Location")),N.a.createElement("div",{className:"flex flex-auto flex-column pb0"},N.a.createElement("p",{className:"f4 fw4 black-60 mb0"},e.props.reservationData.location))),N.a.createElement("div",{className:"flex flex-column mb2 pa4 ba b--black-05 bg-white bs-a"},N.a.createElement("div",{className:"ProjectScenesHeading pt0"},N.a.createElement("h3",{className:"f7 fw3 black-30 mb2"},"Date")),N.a.createElement("div",{className:"flex flex-auto flex-column pb0"},N.a.createElement("p",{className:"f4 fw4 black-60 mb0"},A()(e.props.reservationData.date).format("MMMM Do YYYY")))),N.a.createElement("div",{className:"flex flex-row justify-between mb2 pa4 ba b--black-05 bg-white bs-a"},N.a.createElement("div",{className:"flex flex-column"},N.a.createElement("div",{className:"ProjectScenesHeading pt0"},N.a.createElement("h3",{className:"f7 fw3 black-30 mb2"},"Start Time")),N.a.createElement("div",{className:"flex flex-auto flex-column pb0"},N.a.createElement("p",{className:"f4 fw4 black-60 mb0"},A()(e.props.reservationData.timeStart).format("LT")))),N.a.createElement("div",{className:"flex flex-column"},N.a.createElement("div",{className:"ProjectScenesHeading pt0"},N.a.createElement("h3",{className:"f7 fw3 black-30 mb2"},"End Time")),N.a.createElement("div",{className:"flex flex-auto flex-column pb0"},N.a.createElement("p",{className:"f4 fw4 black-60 mb0"},A()(e.props.reservationData.timeEnd).format("LT"))))),N.a.createElement("div",{className:"flex flex-column mb2 pa4 ba b--black-05 bg-white bs-a"},N.a.createElement("div",{className:"ProjectScenesHeading pt0"},N.a.createElement("h3",{className:"f7 fw3 black-30 mb2"},"Hourly Rate")),N.a.createElement("div",{className:"flex flex-auto flex-column pb0"},N.a.createElement("p",{className:"f4 fw4 black-60 mb0"},e.props.currency.symbol,Math.round(parseInt(e.props.reservationData.chef.extended.rate)*e.props.exchangeRate)))),N.a.createElement("div",{className:"flex flex-column mb2 pa4 ba b--black-05 bg-white bs-a"},N.a.createElement("div",{className:"ProjectScenesHeading pt0"},N.a.createElement("h3",{className:"f7 fw3 black-30 mb2"},"Cost")),N.a.createElement("div",{className:"flex flex-auto flex-column pb0"},N.a.createElement("p",{className:"f4 fw4 black-60 mb0"},e.props.reservationData.cost,".00"))),N.a.createElement("div",{className:"flex flex-column mb2 pa4 ba b--black-05 bg-white bs-a"},N.a.createElement("div",{className:"ProjectScenesHeading pt0"},N.a.createElement("h3",{className:"f7 fw3 black-30 mb2"},"Additional Charges")),N.a.createElement("div",{className:"flex flex-auto flex-column pb0"},N.a.createElement("p",{className:"f4 fw4 black-60 mb0"},e.props.reservationData.additionalCharges,".00"))),N.a.createElement("div",{className:"flex flex-column  mb2 pa4 ba b--black-05 bg-white bs-a mb6"},N.a.createElement("div",{className:"ProjectScenesHeading pt0"},N.a.createElement("h3",{className:"f7 fw3 black-30 mb2"},"Total Cost")),N.a.createElement("div",{className:"flex flex-auto flex-column"},N.a.createElement("p",{className:z.a.get("theme").config.theme.colorScheme.color+" f1 fw4 black-60 mb0"},e.props.reservationData.totalCost,".00")),N.a.createElement("div",{className:"ProjectScenesHeading pt0"},N.a.createElement("h3",{className:"f7 fw5 black-30 mb0"},e.props.reservationData.currency.name)))),N.a.createElement("section",{id:"ActionButtons",className:"absolute bottom-0 w-100 flex flex-column bs-b"},N.a.createElement("div",{className:"Buttons flex flex-row justify-between"},N.a.createElement("div",{className:"flex flex-column w-100 "},N.a.createElement("button",{className:z.a.get("theme").config.theme.colorScheme.bg+" -bg-white -bs-a -c_1_bg ph3 pv3 pointer bn  ",onClick:e.confirm},N.a.createElement("span",{className:"f4 fw6 white -black-30 pv2 flex items-center justify-center"},"Confirm  "))))))}))}}]),t}(N.a.Component),Q=a(38),ee=a(89);function te(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ae(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?te(a,!0).forEach(function(t){Object(Q.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):te(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ne={};ne.ReservationRequestUser=function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee.a.ReservationRequestUser(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),ne.SendNotification=function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("mail.SendNotification",t),e.next=3,ee.a.SendNotification(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),ne.ChefReservationRequestNotification=function(){var e=Object(p.a)(f.a.mark(function e(t){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("mail.ChefReservationRequestNotification",t),"Reservation request received [ HomeChef ]",a=ae({confirmationEmailSubject:"Reservation request received [ HomeChef ]"},t),e.next=4,ee.a.ChefReservationRequestNotification(a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),ne.reservationCancellationNotification=function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),ne.reservationConfirmationNotification=function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),ne.reservationRequestConfirmation=function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),ne.reservationDeniedConfirmation=function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),ne.userRegistration=function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),ne.userWelcomeEmail=function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),ne.passwordReset=function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),ne.passwordResetConfirmation=function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),ne.newMessage=function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();var re=ne,se=(a(138),a(789)),ce=a(405),oe=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={loading:!1,buttonLoading:!1,reservationData:{},formData:{},startTime:"",endTime:"",selectedDate:new Date,timeRounded:""},a.saveFormData=a.saveFormData.bind(Object(v.a)(a)),a.submit=a.submit.bind(Object(v.a)(a)),a.timeOnChangeEnd=a.timeOnChangeEnd.bind(Object(v.a)(a)),a.timeOnChangeStart=a.timeOnChangeStart.bind(Object(v.a)(a)),a.dateOnChange=a.dateOnChange.bind(Object(v.a)(a)),console.log("ReservationForm",e),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"saveFormData",value:function(){this.setState({buttonLoading:!0})}},{key:"timeOnChangeStart",value:function(e){console.log(e),this.setState({startTime:e})}},{key:"timeOnChangeEnd",value:function(e){console.log(e),this.setState({endTime:e})}},{key:"dateOnChange",value:function(e){console.log(e),this.setState({selectedDate:e})}},{key:"submit",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.state.startTime,a=this.state.endTime,n=A()(t),r=A()(a).diff(n,"hours",!0),s={date:this.state.selectedDate,timeStart:this.state.startTime,timeEnd:this.state.endTime,hours:r};this.props.showReservationConfirmationScreen(s)}},{key:"componentDidMount",value:function(){var e=function(e){return e.setHours(e.getHours()+Math.round(e.getMinutes()/60)),e.setMinutes(0),e}(new Date(2011,1,1,4,55));this.setState({defaultTime:e})}},{key:"render",value:function(){return N.a.createElement("div",{className:"flex flex-column -bg-near-white h-100"},N.a.createElement("form",{onSubmit:"single"===this.props.type?this.submit:this.saveFormData,className:"flex flex-column ma0",id:""},N.a.createElement("div",{className:"form-row flex flex-column pb3"},N.a.createElement(N.a.Fragment,null,N.a.createElement("div",{className:"form-row flex flex-column pa4"},N.a.createElement("label",{className:"f7 fw6 black-90 pb2"},"Date"),N.a.createElement(se.a,{defaultValue:new Date,onChange:this.dateOnChange,required:!0})),N.a.createElement("div",{className:"flex flex-row justify-between w-100 pa4"},N.a.createElement("div",{className:"form-row flex flex-column pb3"},N.a.createElement("label",{className:"f7 fw6 black-90 pb2"},"Start Time"),N.a.createElement(ce.a,{required:!0,showArrowButtons:!0,useAmPm:!0,defaultValue:new Date,onChange:this.timeOnChangeStart})),N.a.createElement("div",{className:"form-row flex flex-column pb3"},N.a.createElement("label",{className:"f7 fw6 black-90 pb2"},"End Time"),N.a.createElement(ce.a,{required:!0,showArrowButtons:!0,useAmPm:!0,onChange:this.timeOnChangeEnd,defaultValue:new Date}))))),N.a.createElement("div",{className:"Buttons flex flex-row justify-between pa4-"},N.a.createElement("div",{className:"flex flex-column w-100 mr1"},N.a.createElement("button",{className:" bg-white -bs-a -c_1_bg ph3 pv2 pointer bn    "},N.a.createElement("span",{className:"f6 fw5 white- black-30 pv3 flex items-center justify-center"},this.state.buttonLoading?N.a.createElement(F.a,{type:"loading",className:" f4 black-60 mr2"}):N.a.createElement(F.a,{type:"check-circle",className:z.a.get("theme").config.theme.colorScheme.color+" f4 black-60 mr2"})," Request Reservation"))))))}}]),t}(N.a.Component),ie=J.a.TabPane,le=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).showReservationConfirmationScreen=function(e){console.log("showReservationConfirmationScreen",a.props,e);var t=a.props.chef,n=Object(E.getGlobal)().account,r=t.extended.rate*e.hours,s=r+0,c=a.props.currency,o=a.props.exchangeRate,i={chef:a.props.chef,user:n,location:"233 Jan Smuts Avenue, Rosebank, Johannesburg",totalCost:c.symbol+Math.round(s*o),additionalCharges:c.symbol+Math.round(0*o),cost:c.symbol+Math.round(r*o),hours:e.hours,timeStart:e.timeStart.toString(),timeEnd:e.timeEnd.toString(),date:e.date.toString(),currency:c};console.log("reservationData",i),a.setState({showConfirmationScreen:!0,reservationData:i})},a.openNotification=function(e){var t=e.title,a=e.message;Z.a.open({message:t,description:a,onClick:function(){}})},a.state={isOpen:!1,loading:!1,buttonLoading:!1,showConfirmationScreen:!1,reservationData:{},checkMultipleDays:!1,daysCount:["1","2"],formData:[]},a.submitReservationRequest=a.submitReservationRequest.bind(Object(v.a)(a)),a.openNotification=a.openNotification.bind(Object(v.a)(a)),a.clearReservationForm=a.clearReservationForm.bind(Object(v.a)(a)),a.showReservationConfirmationScreen=a.showReservationConfirmationScreen.bind(Object(v.a)(a)),a.sendChefReservationConfirmationEmail=a.sendChefReservationConfirmationEmail.bind(Object(v.a)(a)),a.sendUserReservationConfirmationEmail=a.sendUserReservationConfirmationEmail.bind(Object(v.a)(a)),a.closeReservationScreen=a.closeReservationScreen.bind(Object(v.a)(a)),a.checkMultipleDays=a.checkMultipleDays.bind(Object(v.a)(a)),a.setDaysCount=a.setDaysCount.bind(Object(v.a)(a)),a.addFormData=a.addFormData.bind(Object(v.a)(a)),a.reservationDate=N.a.createRef(),a.reservationTime=N.a.createRef(),a.reservationHours=N.a.createRef(),a.daysCount=N.a.createRef(),console.log("ReservationForm",e),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"checkMultipleDays",value:function(e){console.log("checked = ".concat(e.target.checked)),this.setState({checkMultipleDays:e.target.checked})}},{key:"setDaysCount",value:function(e){var t=e.target.value;console.log("count",t);var a=Array.from(Array(parseInt(t)).keys());console.log("count",t,a),this.setState({daysCount:a})}},{key:"closeReservationScreen",value:function(){this.setState({showConfirmationScreen:!1})}},{key:"clearReservationForm",value:function(){this.reservationHours.current.value=null,this.reservationDate.current.value=null}},{key:"addFormData",value:function(e){this.state.formData.push(e)}},{key:"sendUserReservationConfirmationEmail",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.reservationData,e.next=3,re.UserReservationRequestNotification(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"sendChefReservationConfirmationEmail",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.reservationData,e.next=3,re.ChefReservationRequestNotification(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"submitReservationRequest",value:function(){var e=Object(p.a)(f.a.mark(function e(t){var a,n=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("submitReservationRequest props",this.props),console.log("reservationdata",t),a=this.props.activeCurrency,this.props.exchangeRate,this.setState({reservationData:t}),window.db.reservations.insert(t,function(e,t){e?(console.error(e),n.openNotification({type:"reservation",title:"Error",message:"There was an error making your reservation, our team has been notitifed and will get back to you shortly."})):(console.log("[[ db.reservations.insert response ]]",t),setTimeout(function(){n.openNotification({type:"reservation",title:"Success",message:"Your reservation request has been sent."}),n.setState({buttonLoading:!1});var e=n.state.reservationData;e.reservationID=t._id,e.currency=a,n.setState({reservationData:e}),n.sendUserReservationConfirmationEmail(),n.sendChefReservationConfirmationEmail(),n.props.hideInnerDrawer(),n.props.hideDrawer()},1e3))});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){setTimeout(this.toggle,100)}},{key:"render",value:function(){var e=this;return console.log("chefs list props",this.props),this.state.showConfirmationScreen?N.a.createElement($,{submitReservationRequest:this.submitReservationRequest,reservationData:this.state.reservationData,closeReservationScreen:this.closeReservationScreen,exchangeRate:this.props.exchangeRate,currency:this.props.currency}):N.a.createElement("div",{className:"flex flex-column -bg-near-white h-100 exo"},N.a.createElement("section",{id:"Rate",className:"ma4 flex flex-column pa3 ba b--black-05 bg-white- bs-b-"},N.a.createElement("div",{className:"ProjectScenesHeading pt0"},N.a.createElement("h3",{className:"f7 fw5 black-30 pb2"},"Hourly Rate")),N.a.createElement("div",{className:"flex flex-auto flex-column pb3"},N.a.createElement("p",{className:"f3 fw5 black-60 mb0"},this.props.currency.symbol,Math.round(this.props.chef.extended.rate*this.props.exchangeRate)))),N.a.createElement("div",{className:"flex flex-column",id:""},N.a.createElement("div",{className:"form-row flex flex-column"},N.a.createElement(X.a,{className:" flex ph4 ",onChange:this.checkMultipleDays},"Reserve Multiple days"),this.state.checkMultipleDays?N.a.createElement(N.a.Fragment,null,N.a.createElement("div",{className:"flex flex-column ph4"},N.a.createElement("label",{className:"f7 fw6 black-90 pb2"},"Number of days"),N.a.createElement("input",{required:!1,ref:this.daysCount,className:"ph3 pv3 br1 bn bs-a f4 fw5 black-80 h-100",type:"number",onChange:this.setDaysCount,value:this.state.daysCount.length})),N.a.createElement("div",{className:"flex flex-column daysCount-tabs pv3"},N.a.createElement(J.a,{size:"small",defaultActiveKey:"0",tabPosition:"top",className:"daysCount-tabs"},this.state.daysCount.map(function(t,a){return N.a.createElement(ie,{tab:"Day ".concat(a+1),key:a},N.a.createElement("div",{className:"flex flex-column pv3 ph4-"},N.a.createElement(oe,{showReservationConfirmationScreen:e.showReservationConfirmationScreen,type:"multi",addFormData:e.addFormData})))})))):N.a.createElement(oe,{showReservationConfirmationScreen:this.showReservationConfirmationScreen,type:"single",addFormData:this.addFormData}))))}}]),t}(N.a.Component),ue=(a(565),J.a.TabPane),fe=[{name:"pizza",description:"pizza",image:"https://img.theculturetrip.com/768x432/wp-content/uploads/2018/11/p028c1.jpg"},{name:"pasta",description:"pasta",image:"https://www.bbcgoodfood.com/sites/default/files/editor_files/2017/08/goan.jpg"},{name:"lasagne",description:"lasagne",image:"https://www.africa.com/wp-content/uploads/2019/04/potjiekos_sa_geckoro_sGNEZ.jpg"}],pe=[{name:"italian",description:"italian",image:"https://img.theculturetrip.com/768x432/wp-content/uploads/2018/11/p028c1.jpg"},{name:"thai",description:"thai",image:"https://www.bbcgoodfood.com/sites/default/files/editor_files/2017/08/goan.jpg"},{name:"south african",description:"south african",image:"https://www.africa.com/wp-content/uploads/2019/04/potjiekos_sa_geckoro_sGNEZ.jpg"}],me=[{name:"Executive Project",description:"",active:!0},{name:"Project de Cuisine",description:"",active:!1},{name:"Sous Project",description:"",active:!0},{name:"Project de Partie",description:"",active:!1},{name:"Commis Project",description:"",active:!1}],de=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).showChildrenDrawer=function(){a.setState({childrenDrawer:!0})},a.hideInnerDrawer=function(){a.setState({childrenDrawer:!1})},a.showDrawer=function(){a.setState({visible:!0})},a.onClose=function(){a.setState({visible:!1})},a.onChange=function(e){a.setState({placement:e.target.value})},a.state={doc:a.props.project,conversation:a.props.activeConversation,visible:a.props.visible,childrenDrawer:!1,placement:"right",test:a.props.visible,activeTab:a.props.activeTab,characters:[],conversationReady:!1,ready:!1,specialtiesDrawerVisible:!1,itemDetailDrawerVisible:!1,activeItem:{}},console.log("DocInfo",e),a.avatar=a.avatar.bind(Object(v.a)(a)),a.goToTab1=a.goToTab1.bind(Object(v.a)(a)),a.goToTab2=a.goToTab2.bind(Object(v.a)(a)),a.tabOnChange=a.tabOnChange.bind(Object(v.a)(a)),a.showChildrenDrawer=a.showChildrenDrawer.bind(Object(v.a)(a)),a.hideInnerDrawer=a.hideInnerDrawer.bind(Object(v.a)(a)),a.getRecipientDetail=a.getRecipientDetail.bind(Object(v.a)(a)),a.toggleSpecialtiesDrawer=a.toggleSpecialtiesDrawer.bind(Object(v.a)(a)),a.toggleItemDetailDrawer=a.toggleItemDetailDrawer.bind(Object(v.a)(a)),a.reservationHours=N.a.createRef(),a.reservationDate=N.a.createRef(),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"toggleItemDetailDrawer",value:function(e){var t=e.item;this.setState({activeItem:t&&t||this.state.activeItem,itemDetailDrawerVisible:!this.state.itemDetailDrawerVisible})}},{key:"toggleSpecialtiesDrawer",value:function(){this.setState({specialtiesDrawerVisible:!this.state.specialtiesDrawerVisible})}},{key:"tabOnChange",value:function(e){console.log("activeTab",e),this.setState({activeTab:e})}},{key:"goToTab1",value:function(){this.setState({activeTab:"1"})}},{key:"goToTab2",value:function(){this.setState({activeTab:"2"})}},{key:"avatar",value:function(e){console.log("ProjectInfo user",e);var t="undefined"!==typeof e.media.images?e.media.images[0].url:"http://cdn.shopify.com/s/files/1/2278/2351/products/W1151_GeometricPattern3_1024x1024.jpg?v=1510704914";return t}},{key:"checkUploadResult",value:function(e){e.event}},{key:"getRecipientDetail",value:function(){var e=Object(p.a)(f.a.mark(function e(t){var a,n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={doc:t,self:this},console.log("docinfo.js getRecipientDetail doc",a),e.next=4,K.a.getRecipientDetail(a);case 4:n=e.sent,console.log("getRecipientDetail",n);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){}},{key:"componentDidMount",value:function(){console.log("docinfo props",this.props)}},{key:"render",value:function(){var e=this;return N.a.createElement("div",null,N.a.createElement(V.a,{placement:"right",onClose:this.props.hideDrawer,width:500,visible:this.props.visible,doc:this.props.project,className:"ProjectDetail -bg-near-white"},N.a.createElement(V.a,{width:500,closable:!1,onClose:this.hideInnerDrawer,visible:this.state.childrenDrawer,className:"-bg-near-white"},N.a.createElement(le,{project:this.props.project,hideDrawer:this.props.hideDrawer,hideInnerDrawer:this.hideInnerDrawer,exchangeRate:this.props.exchangeRate,currency:this.props.activeCurrency})),N.a.createElement(V.a,{width:400,closable:!0,onClose:this.toggleSpecialtiesDrawer,visible:this.state.specialtiesDrawerVisible},N.a.createElement("div",{className:"flex flex-column mb2 pa4  "},N.a.createElement("div",{className:"ProjectScenesHeading pt0"},N.a.createElement("h3",{className:"f6 fw3 black-30 mb3"},"Specialties")),N.a.createElement("div",{className:"flex flex-auto flex-column pb0"},N.a.createElement("div",{className:"specialties-list- flex flex-column flex-wrap justify-start f4 fw4 black-60 mb0"},fe.map(function(t,a){return N.a.createElement("div",{onClick:function(){return e.toggleItemDetailDrawer({item:t})},className:"specialties-list-item- flex flex-column mb4 "},N.a.createElement("div",{className:"ttc flex flex-column pb2 f5 fw5 exo"},t.name),N.a.createElement("div",{style:{backgroundImage:"url("+t.image+")"},className:"h4 w-100 cover bg-center br3 bs-c"}))}),0===fe.length&&N.a.createElement("h3",{className:"f5 fw1 black-30 pb3"},"No Specialties Added Yet"))))),N.a.createElement(V.a,{title:"Detail",width:400,closable:!0,onClose:this.toggleItemDetailDrawer,visible:this.state.itemDetailDrawerVisible},N.a.createElement("div",{className:"flex flex-column mb2 pa4  "},N.a.createElement("div",{className:"ProjectScenesHeading pt0"},N.a.createElement("h3",{className:"f6 fw3 black-30 mb3"},"Specialties")),N.a.createElement("div",{className:"flex flex-auto flex-column pb0"},N.a.createElement("div",{className:"specialties-list- flex flex-column flex-wrap justify-start f4 fw4 black-60 mb0"},N.a.createElement("div",{className:"specialties-list-item- flex flex-column mb4 "},N.a.createElement("div",{className:"ttc flex flex-column pb2 f5 fw5 exo"},this.state.activeItem.name),N.a.createElement("div",{style:{backgroundImage:"url("+this.state.activeItem.image+")"},className:"h4 w-100 cover bg-center br2 bs-c"}),N.a.createElement("div",{className:"ttc flex flex-column pb2 f4 fw3 exo mt3 black-60"},this.state.activeItem.description)))))),N.a.createElement(J.a,{onChange:this.tabOnChange,defaultActiveKey:"1",activeKey:this.state.activeTab},N.a.createElement(ue,{tab:N.a.createElement("span",{className:"exo f7 fw5 white- black-30 pv2 flex items-center justify-center"},N.a.createElement(F.a,{type:"calendar",className:z.a.get("theme").config.theme.colorScheme.color+" f4 black-60 mr2"})," View"),key:"1"},N.a.createElement("div",{className:"exo flex flex-auto flex-column relative"},N.a.createElement("div",{style:{backgroundImage:"url("+this.avatar(this.props.project)+")"},className:" project-cover-image relative h5 flex flex-auto flex-column w-100 bg-center bg-cover items-start justify-end pa5 relative overflow-hidden"},N.a.createElement("h4",{className:"f4 fw6 black-70- white mb0 rubik"},this.props.project.title),N.a.createElement("h4",{className:"f5 fw4 black-50- white-80 mb0"},this.props.project.description),N.a.createElement("div",{className:"absolute bottom-0 right-0 flex flex-auto flex-column pa3"},N.a.createElement("button",{className:"addCoverPhoto -pulse flex flex-auto items-center justify-center ph3 pv2 bn br1 -c_1_bg white f6 fw6 bg-transparent relative",onClick:this.showWidget},N.a.createElement(F.a,{type:"file",className:"slide-fwd-center "}))))),N.a.createElement("section",{id:"ActionButtons",className:"-ph3 -pv3 -pb5 -bb -b--black-05"},N.a.createElement("div",{className:"Buttons flex flex-row justify-between"},N.a.createElement("div",{className:"flex flex-column w-100 "},N.a.createElement("button",{className:"- bg-white -bs-a -c_1_bg ph3 pv2 pointer bn ",onClick:this.showChildrenDrawer},N.a.createElement("span",{className:"exo c_5- f6 fw5 white- black-30 pv3 flex items-center justify-center"},N.a.createElement(F.a,{type:"calendar",className:" f4 black-60 mr2"})," Reserve"))),N.a.createElement("div",{className:"flex flex-column w-100  bl b--black-05"},N.a.createElement("button",{className:NaN,onClick:this.goToTab2},N.a.createElement("span",{className:"exo c_5- f6 fw5 white- black-30 pv3 flex items-center justify-center"},N.a.createElement(F.a,{type:"message",className:" f4 black-60 mr2"})," Message")),"                  "))),N.a.createElement("div",{className:"pa4 bg-white-60 exo "},N.a.createElement("div",{className:"flex flex-column mb2 "},N.a.createElement("div",{className:"flex flex-row justify-between"},N.a.createElement("section",{id:"Reputation",className:"flex flex-column pa4"},N.a.createElement("div",{className:"ProjectScenesHeading pt0"},N.a.createElement("h3",{className:"f6 fw3 black-30 mb2"},"Hourly Rate")),N.a.createElement("div",{className:"flex flex-auto flex-column"})),N.a.createElement("section",{id:"Rate",className:"flex flex-column pa4"},N.a.createElement("div",{className:"ProjectScenesHeading pt0"},N.a.createElement("h3",{className:"f6 fw3 black-30 mb3"},"Reputation")),N.a.createElement("div",{className:"flex flex-auto flex-column"},N.a.createElement(U.a,{disabled:!0,allowHalf:!0,className:"",defaultValue:this.props.project.reputation&&this.props.project.reputation||3}))))),N.a.createElement("div",{className:"flex flex-column mb2 pa4 br4 bg-white"},N.a.createElement("div",{className:"flex flex-column"},N.a.createElement("div",{className:"ProjectScenesHeading pt0"},N.a.createElement("h3",{className:"f6 fw3 black-30 mb2"},"Bio")),N.a.createElement("div",{className:"flex flex-auto flex-column pb0"},N.a.createElement("p",{className:"f4 fw4 black-60 mb0"},this.props.project.description))),N.a.createElement("div",{className:"flex flex-column pt4"},N.a.createElement("div",{className:"ProjectScenesHeading pt0"},N.a.createElement("h3",{className:"f6 fw3 black-30 mb3"},"Ideal role")),N.a.createElement("div",{className:"flex flex-auto flex-column pb0"},N.a.createElement("p",{className:"flex flex-row flex-wrap f4 fw4 black-60 mb0"},me.map(function(e,t){return N.a.createElement("span",{className:(e.active&&" bg-blue white ")+" flex f7 fw6 black-60 ph2 pv1 br1 bs-d mr2 mb2"},e.active&&N.a.createElement(F.a,{type:"check"})," ",e.name)}))))),N.a.createElement("div",{className:"flex flex-column mb2 pa4  "},N.a.createElement("div",{className:"ProjectScenesHeading pt0"},N.a.createElement("h3",{className:"f6 fw3 black-30 mb3"},"Specialties")),N.a.createElement("div",{className:"flex flex-auto flex-column pb0"},N.a.createElement("div",{className:"specialties-list flex flex-row flex-wrap justify-start f4 fw4 black-60 mb0"},fe.map(function(t,a){return N.a.createElement("div",{onClick:function(){return e.toggleItemDetailDrawer({item:t})},className:"specialties-list-item flex flex-column "},N.a.createElement("div",{style:{backgroundImage:"url("+t.image+")"},className:"avatar-m cover bg-center br3 bs-c"}))}),0===fe.length&&N.a.createElement("h3",{className:"f5 fw1 black-30 pb3"},"No Specialties Added Yet")),N.a.createElement("span",{onClick:this.toggleSpecialtiesDrawer,className:z.a.get("theme").config.theme.colorScheme.color+" white- c_9 ph1 pv0 br1 f7 fw6 mt3"},"see more"))),N.a.createElement("div",{className:"flex flex-column mb2 pa4  "},N.a.createElement("div",{className:"ProjectScenesHeading pt0"},N.a.createElement("h3",{className:"f6 fw3 black-30 mb3"},"Cuisines")),N.a.createElement("div",{className:"flex flex-auto flex-column pb0"},N.a.createElement("div",{className:"cuisines-list flex flex-row flex-wrap justify-start f4 fw4 black-60 mb0"},pe.map(function(t,a){return N.a.createElement("div",{onClick:function(){return e.toggleItemDetailDrawer({item:t})},className:"cuisines-list-item flex flex-column "},N.a.createElement("div",{style:{backgroundImage:"url("+t.image+")"},className:"avatar-m cover bg-center br3 bs-c"}))}),0===pe.length&&N.a.createElement("h3",{className:"f5 fw1 black-30 pb3"},"No Cuisines Added Yet")),N.a.createElement("span",{onClick:this.toggleSpecialtiesDrawer,className:z.a.get("theme").config.theme.colorScheme.color+" white- c_9 ph1 pv0 br1 f7 fw6 mt3"},"see more"))))),N.a.createElement(ue,{tab:N.a.createElement("span",{className:"f7 fw5 white- black-30 pv2 flex items-center justify-center"},N.a.createElement(F.a,{type:"message",className:z.a.get("theme").config.theme.colorScheme.color+" f4 black-60 mr2"})," Message"),key:"2"},N.a.createElement("div",{className:"flex flex-auto flex-column relative"},this.props.conversationReady?N.a.createElement(W,{type:"info",project:this.props.project,postCollection:this.postCollection,updateDoc:this.updateDoc,theme:z.a.get("theme").config.theme,conversationReady:this.props.conversationReady}):null)))))}}]),t}(N.a.Component),he=a(787),be=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).increase=function(){var e=a.state.percent+10;e>100&&(e=100),a.setState({percent:e})},a.handleSearch=function(e){e?fetch(e,function(e){return a.setState({data:e})}):a.setState({searchResults:[]})},a.handleChange=function(e){a.setState({location:e})},a.state={loading:!1,searchResults:[],location:a.props.location,percent:a.props.progressBarPercent,progressBarActive:a.props.progressBarActive,searchAttempts:0},a.submit=a.submit.bind(Object(v.a)(a)),a.onChange=a.onChange.bind(Object(v.a)(a)),a.handleSearch=a.handleSearch.abind(Object(v.a)(a)),a.handleChange=a.handleChange.bind(Object(v.a)(a)),a.submitSearch=a.submitSearch.bind(Object(v.a)(a)),a.increase=a.increase.bind(Object(v.a)(a)),a.location=N.a.createRef(),console.log("LocationSearchForm",e),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"onChange",value:function(){var e=Object(p.a)(f.a.mark(function e(t){var a,n,r,s=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({progressBarActive:!1}),a=t.target.value,n="https://autocomplete.geocoder.api.here.com/6.2/suggest.json?app_id=ZZN2MPuexLyuz3VR0KDD&app_code=TnEsVJR8k3zxGMiAkbP_EQ&query="+a,r={origin:"locahost",mode:"cors",headers:{Accept:"application/json"}},e.next=6,fetch(n,r,function(e,t){return t.ok||console.error(e),t}).then(function(e){return e.json()}).then(function(e){console.log("Autocomplete res",e),s.setState({searchResults:e.suggestions})});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"setLocation",value:function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return alert("setLocation"),this.setState({location:t}),this.location.current.value=t.address.county,this.setState({searchResults:[]}),Object(E.setGlobal)({location:t,locationSet:!0}),localStorage.setItem("location",JSON.stringify(t)),localStorage.setItem("locationSet",JSON.stringify(!0)),e.next=9,this.props.fetchChefs(t.address.city);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"submitSearch",value:function(){var e=Object(p.a)(f.a.mark(function e(t){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),t.stopPropagation(),Object(E.setGlobal)({location:this.props.location,locationSet:!0}),localStorage.setItem("location",JSON.stringify(this.props.location)),localStorage.setItem("locationSet",JSON.stringify(!0)),a=this.props.location.County,e.next=8,this.props.fetchChefs(a);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"submit",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"componentDidMount",value:function(){var e=this.props.location;this.setState({location:e,ready:!0})}},{key:"render",value:function(){var e=this;return N.a.createElement("div",{className:"flex flex-column bg-near-white h-100 mw6 center w-100"},N.a.createElement("form",{onSubmit:this.submitSearch,className:"flex flex-column",id:""},this.state.ready&&N.a.createElement("div",{className:"flex flex-column relative"},N.a.createElement("div",{className:"flex flex-column "},N.a.createElement("input",{id:"LocationSearch",ref:this.location,onChange:this.onChange,className:"ph3 pv3 br1 bn bs-a f3 fw5 black-80 h-100",placeholder:"Enter an address",type:"text",defaultValue:this.state&&this.state.location&&this.state.location.County}),this.props.progressBarActive&&N.a.createElement(F.a,{type:"loading",className:"formLoadingIcon"})),this.props.progressBarActive&&N.a.createElement("div",{className:"LocationProgressBar absolute w-100 left-0 flex flex-column pt2 "},N.a.createElement(he.a,{strokeColor:"gainsboro",showInfo:!1,percent:this.props.progressBarPercent})),this.state&&this.state.searchResults&&this.state.searchResults.length>0&&N.a.createElement("div",{className:"searchResults flex flex-column bs-a bg-near-white br1 w-100"},this.state.searchResults.map(function(t,a){return t.address&&t.address.county&&N.a.createElement("div",{onClick:function(){return e.setLocation(t)},className:"pointer flex flex-row f6 fw5 black-50 pa2"},N.a.createElement("span",{className:"location-label-primary flex items-center pl2 f5 fw1 black-40"},t.address.city||"n/a"),N.a.createElement("span",{className:"location-label-secondary flex items-center  f7 fw6 black-60 pl3"},t.address.state),N.a.createElement("span",{className:"location-label-secondary flex items-center f7 fw6 black-60 pl2"},t.address.country))})))))}}]),t}(N.a.Component),ve={};ve.sleep=function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(function(e){return new Promise(function(t){return setTimeout(t,e)})});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),ve.reverseGeocodeCity=function(){var e=Object(p.a)(f.a.mark(function e(t){var a,n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("[[ _fn.reverseGeocodeCity ]]"),a=t.self,n="https://reverse.geocoder.api.here.com/6.2/reversegeocode.json?prox="+a.state.lat+","+a.state.long+",250&mode=retrieveAddresses&maxresults=1&gen=9&app_id=ZZN2MPuexLyuz3VR0KDD&app_code=TnEsVJR8k3zxGMiAkbP_EQ",fetch(n,function(e,t){return t}).then(function(e){return e.json()}).then(function(e){console.log("[[ _fn.reverseGeocodeCity ]]",JSON.stringify(e.Response.View[0].Result[0].Location.Address));var t=e.Response.View[0].Result[0].Location.Address.AdditionalData,n=e.Response.View[0].Result[0].Location.Address,r=!0,s=!1,c=void 0;try{for(var o,i=t[Symbol.iterator]();!(r=(o=i.next()).done);r=!0){var l=o.value;if("CountryName"===l.key){var u=l.value;console.log("country",u),a.setState({country:u,countrySet:!0})}}}catch(f){s=!0,c=f}finally{try{r||null==i.return||i.return()}finally{if(s)throw c}}a.setState({city:e.Response.View[0].Result[0].Location.Address.County,suburb:e.Response.View[0].Result[0].Location.Address.District,province:e.Response.View[0].Result[0].Location.Address.State,searchFormReady:!0,location:e.Response.View[0].Result[0].Location.Address,ready:!0}),ve.findCurrency({self:a}),console.log("[[ store : location ]]",n),K.a.store({type:"location",data:n}),K.a.store({type:"locationIsSet",data:!0})});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),ve.findCurrency=function(){var e=Object(p.a)(f.a.mark(function e(t){var a,n,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=t.self).state.countrySet){e.next=6;break}return n=a.state.country,r="https://restcountries.eu/rest/v2/name/"+n,e.next=6,fetch(r,function(e,t){return t}).then(function(e){return e.json()}).then(function(e){console.log("Country data",e[0].currencies[0]),Object(E.setGlobal)({activeCurrencyIsSet:!0,activeCurrency:e[0].currencies[0],baseCurrency:e[0].currencies[0]}),localStorage.setItem("activeCurrency",JSON.stringify(e[0].currencies[0])),localStorage.setItem("baseCurrency",JSON.stringify(e[0].currencies[0])),localStorage.setItem("activeCurrencyIsSet",JSON.stringify(!0))});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),ve.getGeoLocation=function(){var e=Object(p.a)(f.a.mark(function e(t){var a,n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.self,n=function(e){console.log("[[ getGeoLocation ]]",e),a.setState({lat:e.coords.latitude,long:e.coords.longitude}),ve.reverseGeocodeCity({self:a})},window.navigator.geolocation.getCurrentPosition(n);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),ve.findLocation=function(e){var t=e.searchTerm,a=e.self;fetch("https://geocoder.api.here.com/6.2/geocode.json?searchtext="+t+"&app_id=ZZN2MPuexLyuz3VR0KDD&app_code=TnEsVJR8k3zxGMiAkbP_EQ&gen=9",function(e,t){return t}).then(function(e){return e.json()}).then(function(e){return console.log("findLocation",e.Response.View[0].Result[0].Location.Address),a.setState({city:e.Response.View[0].Result[0].Location.Address.County,suburb:e.Response.View[0].Result[0].Location.Address.District,province:e.Response.View[0].Result[0].Location.Address.State,searchFormReady:!0,location:e.Response.View[0].Result[0].Location.Address}),ve.findCurrency({self:a})})};var we=ve,ge=(N.a.Component,a(123),function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={},a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return N.a.createElement("div",{className:"flex flex-column bg-near-white h-100 raleway fw5"},N.a.createElement("div",{className:"flex flex-column ma0",id:""},N.a.createElement("div",{className:"Buttons flex flex-row justify-between round"},N.a.createElement("div",{className:"flex flex-column w-100 mr1"},N.a.createElement("button",{onClick:function(){return e.props.setAccountType({type:"crew"})},className:" button-account bg-white -bs-a -c_1_bg ph3 pv2 pointer bn    "},N.a.createElement("span",{className:"f5 fw6 white- black-70 pv3 flex items-center justify-center"},"Crew"))),N.a.createElement("div",{className:"flex flex-column w-100"},N.a.createElement("button",{onClick:function(){return e.props.setAccountType({type:"producer"})},className:" button-account bg-white -bs-a -c_1_bg ph3 pv2 pointer bn    "},N.a.createElement("span",{className:"f5 fw6 white- black-70 pv3 flex items-center justify-center"},"Producer"))))))}}]),t}(N.a.Component)),xe=(N.a.Component,a(793)),ye=(xe.a.Step,function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={current:0,dob:""},console.log("OnboardingScreen props",e),a.mobileNumber=r.a.createRef(),a.bio=r.a.createRef(),a.grade=r.a.createRef(),a.firstname=r.a.createRef(),a.lastname=r.a.createRef(),a.gender=r.a.createRef(),a.saveStep2=a.saveStep2.bind(Object(v.a)(a)),a.handleDateChange=a.handleDateChange.bind(Object(v.a)(a)),console.log("OnboardingScreen props",e),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"handleDateChange",value:function(e){console.log(e),this.setState({dob:e.toString()})}},{key:"saveStep2",value:function(){var e=JSON.parse(localStorage.getItem("accountType")),t=this.mobileNumber.current.value,a=this.bio.current.value,n="crew"===e&&this.grade.current.value||null,r=this.firstname.current.value,s=this.lastname.current.value,c={mobileNumber:t,bio:a,grade:n,gender:this.gender.current.value,firstname:r,lastname:s,dob:this.state.dob};this.props.saveStep2(c),this.props.next()}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=JSON.parse(localStorage.getItem("accountType"));return r.a.createElement("div",{id:"StepsForm"},r.a.createElement("div",{className:"flex flex-column ma0",id:""},r.a.createElement("div",{className:"form-row flex flex-column pb3 pt2"},r.a.createElement("div",{className:"form-row flex flex-column"},r.a.createElement("div",{className:"form-row flex flex-column pt4"},r.a.createElement("label",{className:"f7 fw6 black-90 pb2"},"First Name"),r.a.createElement("input",{required:!0,ref:this.firstname,type:"text",className:"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a"})),r.a.createElement("div",{className:"form-row flex flex-column pt4"},r.a.createElement("label",{className:"f7 fw6 black-90 pb2"},"Last Name"),r.a.createElement("input",{mobileNumber:!0,required:!0,ref:this.lastname,type:"text",className:"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a"}))),r.a.createElement("div",{className:"form-row flex flex-column"},r.a.createElement("div",{className:"form-row flex flex-column pt4"},r.a.createElement("label",{className:"f7 fw6 black-90 pb2"},"Mobile Phone"),r.a.createElement("input",{required:!0,ref:this.mobileNumber,type:"number",className:"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a"}))),r.a.createElement("div",{className:"form-row flex flex-column"},r.a.createElement("div",{className:"form-row flex flex-column pt4"},r.a.createElement("label",{className:"f7 fw6 black-90 pb2"},"Gender"),r.a.createElement("input",{required:!0,ref:this.gender,type:"text",className:"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a"}))),"crew"===e&&r.a.createElement("div",{className:"form-row flex flex-column"},r.a.createElement("div",{className:"form-row flex flex-column pt4"},r.a.createElement("label",{className:"f7 fw6 black-90 pb2"},"Enter your grade"),r.a.createElement("input",{required:!0,ref:this.grade,type:"number",className:"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a"}))),r.a.createElement("div",{className:"form-row flex flex-column"},r.a.createElement("div",{className:"form-row flex flex-column pt4"},r.a.createElement("label",{className:"f7 fw6 black-90 pb2"},"Bio"),r.a.createElement("textarea",{required:!0,ref:this.bio,rows:4,type:"text",className:"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a"}))),r.a.createElement("div",{className:" flex flex-column w-100 mb3"},r.a.createElement("span",{className:"flex flex-column f6 fw5 black-60 pb3 pt3"},"Your Date of Birth"),r.a.createElement(se.a,{minDate:new Date("01/01/1940"),maxDate:new Date,onChange:this.handleDateChange})))),r.a.createElement("div",{className:"Buttons flex flex-row justify-between mt4 mw5 center w-100"},r.a.createElement("div",{className:"flex flex-column w-100"},r.a.createElement("button",{onClick:this.saveStep2,className:" br1 bs-b bg-black ph3 pv2 pointer bn relative    "},r.a.createElement("span",{className:"f5 fw5 white pv2 flex items-center justify-center"},this.state.buttonLoading?r.a.createElement(F.a,{type:"loading",className:" absolute right-0 f4 black-60 mr2"}):r.a.createElement(F.a,{type:"swap-right",className:" f4 black-60 mr2 absolute right-0"})," Next")),this.props.current>0&&r.a.createElement("div",{className:"flex flex-column w-100 "},r.a.createElement("span",{onClick:this.props.prev,className:"pointer f6 fw5 black-30 pv2 flex items-center justify-center"},"go back to previous step")))))}}]),t}(r.a.Component)),je=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).increase=function(){var e=a.state.percent+10;e>100&&(e=100),a.setState({percent:e})},a.handleSearch=function(e){e?fetch(e,function(e){return a.setState({data:e})}):a.setState({searchResults:[]})},a.handleChange=function(e){a.setState({location:e})},a.state={loading:!1,searchResults:[],location:a.props.location,percent:a.props.progressBarPercent,progressBarActive:a.props.progressBarActive,searchAttempts:0},a.submit=a.submit.bind(Object(v.a)(a)),a.onChange=a.onChange.bind(Object(v.a)(a)),a.handleSearch=a.handleSearch.bind(Object(v.a)(a)),a.handleChange=a.handleChange.bind(Object(v.a)(a)),a.submitSearch=a.submitSearch.bind(Object(v.a)(a)),a.increase=a.increase.bind(Object(v.a)(a)),a.location=r.a.createRef(),console.log("LocationSearchForm",e),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"onChange",value:function(){var e=Object(p.a)(f.a.mark(function e(t){var a,n,r,s=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({progressBarActive:!1}),a=t.target.value,n="https://autocomplete.geocoder.api.here.com/6.2/suggest.json?app_id=ZZN2MPuexLyuz3VR0KDD&app_code=TnEsVJR8k3zxGMiAkbP_EQ&query="+a,r={origin:"locahost",mode:"cors",headers:{Accept:"application/json"}},e.next=6,fetch(n,r,function(e,t){return t.ok||console.error(e),t}).then(function(e){return e.json()}).then(function(e){console.log("Autocomplete res",e),s.setState({searchResults:e.suggestions})});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"setLocation",value:function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({location:t}),this.location.current.value=t.address.county,this.setState({searchResults:[]}),"undefined"!==typeof this.props.updateProjectLocation?(localStorage.setItem("updateProjectLocation",JSON.stringify(t)),this.props.updateProjectLocation(t)):(localStorage.setItem("location",JSON.stringify(t)),localStorage.setItem("locationSet",JSON.stringify(!0))),"undefined"!==typeof this.props.type&&"event"===this.props.type&&this.props.setLocation(t),"profile"===this.props.type&&this.props.setLocation(t);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"submitSearch",value:function(){var e=Object(p.a)(f.a.mark(function e(t){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),t.stopPropagation(),localStorage.setItem("location",JSON.stringify(this.props.location)),localStorage.setItem("locationSet",JSON.stringify(!0)),a=this.props.location.County,e.next=7,this.props.fetchChefs(a);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"submit",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"componentDidMount",value:function(){var e=this.props.location;this.setState({location:e,ready:!0})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"LocationSearchBar",className:"flex flex-column h-100 w-100 "},r.a.createElement("form",{onSubmit:this.submitSearch,className:"flex flex-column items-end justify-center ma0 pa0 w-100",id:""},this.state.ready&&r.a.createElement("div",{className:"flex flex-column relative w-100 items-end"},r.a.createElement("div",{className:"flex flex-column items-end mt3- w-100 mw-5 right "},r.a.createElement("input",{id:"toolbarLocationSearch",ref:this.location,onChange:this.onChange,className:"flex flex-column ph4 pv3 bn br2 -round bg-black-05- white- black-50 f4 fw5 bs-a- w-100",placeholder:"Enter an address",type:"text",defaultValue:this.props.defaultValue}),this.props.progressBarActive&&r.a.createElement(F.a,{type:"loading",className:"formLoadingIcon"})),this.props.progressBarActive&&r.a.createElement("div",{className:"LocationProgressBar absolute w-100 left-0 flex flex-column pt2 "},r.a.createElement(he.a,{strokeColor:"gainsboro",showInfo:!1,percent:this.props.progressBarPercent})),this.state&&this.state.searchResults&&this.state.searchResults.length>0&&r.a.createElement("div",{className:"searchResults flex flex-column bs-a bg-near-white br1 w-100"},this.state.searchResults.map(function(t,a){return t.address&&t.address.county&&t.address.city&&r.a.createElement("div",{onClick:function(){return e.setLocation(t)},className:"pointer flex flex-row f6 fw5 black-50 pa2"},r.a.createElement("span",{className:"location-label-primary flex flex-auto items-center pl2 f5 fw4 black-40"},t.address.city||"n/a"),r.a.createElement("div",{className:"flex flex-row items-center justify-end flex-auto "},r.a.createElement("span",{className:"location-label-secondary flex items-center  f7 fw6 black-60 pl3"},t.address.state),r.a.createElement("span",{className:"location-label-secondary flex items-center f7 fw6 black-60 pl2"},t.address.country)))})))))}}]),t}(r.a.Component),ke=(xe.a.Step,function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={current:0,dob:""},a.rate=r.a.createRef(),a.saveStep1=a.saveStep1.bind(Object(v.a)(a)),console.log("OnboardingScreen props",e),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"saveStep1",value:function(){var e={location:z.a.get("location")};this.props.saveStep1(e),this.props.next()}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e,t=z.a.get("location");return e="undefined"!==typeof t.County?t.County:"undefined"!==typeof t.address.County?t.address.County:"",r.a.createElement("div",{id:"StepsForm"},r.a.createElement("div",{className:"flex flex-column ma0 h5",id:""},r.a.createElement("div",{className:"form-row flex flex-column pb3 pt2"},r.a.createElement("div",{className:"form-row flex flex-column"},r.a.createElement("div",{className:"form-row flex flex-column pt4"},r.a.createElement("label",{className:"f7 fw6 black-90 pb2"},"Your Home City"),r.a.createElement(je,{location:e}))))),r.a.createElement("div",{className:"Buttons flex flex-row justify-between mt4 mw5 center w-100"},r.a.createElement("div",{className:"flex flex-column w-100"},r.a.createElement("button",{onClick:this.saveStep1,className:" br1 bs-b bg-black ph3 pv2 pointer bn relative    "},r.a.createElement("span",{className:"f5 fw5 white pv2 flex items-center justify-center"},this.state.buttonLoading?r.a.createElement(F.a,{type:"loading",className:" absolute right-0 f4 black-60 mr2"}):r.a.createElement(F.a,{type:"swap-right",className:" f4 black-60 mr2 absolute right-0"})," Next")),this.props.current>0&&r.a.createElement("div",{className:"flex flex-column w-100 "},r.a.createElement("span",{onClick:this.props.prev,className:"pointer f6 fw5 black-30 pv2 flex items-center justify-center"},"go back to previous step")))))}}]),t}(r.a.Component)),Ee=(xe.a.Step,function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={current:0,cuisines:[],cuisines_:[{}],role:"",skills:[],skills_:[{}],value:""},console.log("OnboardingScreen props",e),a.insertSkill=a.insertSkill.bind(Object(v.a)(a)),a.addSkillInput=a.addSkillInput.bind(Object(v.a)(a)),a.saveStep3=a.saveStep3.bind(Object(v.a)(a)),a.specOnChange=a.specOnChange.bind(Object(v.a)(a)),a.role=r.a.createRef(),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"saveStep3",value:function(){var e={role:this.role.current.value,skills:this.state.skills};console.log("saveStep3 data ",e),this.props.saveStep3(e),this.props.next()}},{key:"insertSkill",value:function(e){var t=this.state.skills;t.push(e),this.setState({skills:t})}},{key:"addSkillInput",value:function(){var e=this.state.skills_;e.push({}),this.setState({skills_:e})}},{key:"specOnChange",value:function(e){var t=e.e,a=e.index,n=this.state.skills;n[a]=t.target.value,this.setState({skills:n}),console.log(this.state)}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"StepsForm"},r.a.createElement("div",{className:"flex flex-column ma0",id:""},r.a.createElement("div",{className:"form-row flex flex-column pb3 pt2"},r.a.createElement("div",{className:"form-row flex flex-column"},r.a.createElement("div",{className:"form-row flex flex-column pt4"},r.a.createElement("label",{className:"f7 fw6 black-90 pb2"},"Your Preferred Role"),r.a.createElement("input",{required:!0,ref:this.role,type:"text",className:"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a"}))),r.a.createElement("div",{className:"form-row flex flex-column"},r.a.createElement("div",{className:"form-row flex flex-column pt4"},r.a.createElement("label",{className:"f7 fw6 black-90 pb2"},"Skills"),r.a.createElement("div",{className:"flex flex-column flex-wrap"},this.state.skills_.map(function(t,a){return r.a.createElement("div",{className:"flex pb2 w-100"},r.a.createElement("input",{required:!0,onChange:function(t){return e.specOnChange({e:t,index:a})},defaultValue:e.state.skills[a],type:"text",className:"w-100 flex flex-row ph3 pv2 bn br1 bg-white black-50 f4 fw5 bs-a"}))}))),r.a.createElement("div",{className:"form-row flex flex-row pt2"},r.a.createElement("button",{onClick:this.addSkillInput,className:"bn br1 bg-black-30 f7 fw5 white pv1 ph2"},"Add +"))))),r.a.createElement("div",{className:"Buttons flex flex-row justify-between mt4 mw5 center w-100"},r.a.createElement("div",{className:"flex flex-column w-100"},r.a.createElement("button",{onClick:this.saveStep3,className:" br1 bs-b bg-black ph3 pv2 pointer bn relative    "},r.a.createElement("span",{className:"f5 fw5 white pv2 flex items-center justify-center"},this.state.buttonLoading?r.a.createElement(F.a,{type:"loading",className:" absolute right-0 f4 black-60 mr2"}):r.a.createElement(F.a,{type:"swap-right",className:" f4 black-60 mr2 absolute right-0"})," Next")),this.props.current>0&&r.a.createElement("div",{className:"flex flex-column w-100 "},r.a.createElement("span",{onClick:this.props.prev,className:"pointer f6 fw5 black-30 pv2 flex items-center justify-center"},"go back to previous step")))))}}]),t}(r.a.Component)),Ne=xe.a.Step,Oe=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={current:0,location:z.a.get("location"),currency:z.a.get("baseCurrency"),grade:0,mobileNumber:"",bio:"",specialties:[],cuisines:[],firstname:"",lastname:""},console.log("OnboardingScreen props",e),a.prev=a.prev.bind(Object(v.a)(a)),a.next=a.next.bind(Object(v.a)(a)),a.saveStep1=a.saveStep1.bind(Object(v.a)(a)),a.saveStep2=a.saveStep2.bind(Object(v.a)(a)),a.saveStep3=a.saveStep3.bind(Object(v.a)(a)),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"saveStep1",value:function(e){var t=e.location;this.setState({location:t})}},{key:"saveStep2",value:function(e){var t=e.mobileNumber,a=e.bio,n=e.grade,r=e.firstname,s=e.lastname,c=e.dob,o=e.gender;this.setState({mobileNumber:t,bio:a,grade:n,firstname:r,lastname:s,gender:o,dob:c})}},{key:"saveStep3",value:function(e){var t=e.role,a=e.skills;return this.props.saveOnboardingData({location:this.state.location,mobileNumber:this.state.mobileNumber,bio:this.state.bio,skills:a,role:t,grade:this.state.grade,firstname:this.state.firstname,lastname:this.state.lastname,gender:this.state.gender,dob:this.state.dob})}},{key:"next",value:function(){var e=this.state.current+1;this.setState({current:e})}},{key:"prev",value:function(){var e=this.state.current-1;this.setState({current:e})}},{key:"componentDidMount",value:function(){console.log("steps",this.props)}},{key:"render",value:function(){var e,t=JSON.parse(localStorage.getItem("accountTypeIsSet")),a=JSON.parse(localStorage.getItem("accountType"));"crew"===a&&(e=[{title:"Location",content:"First-content"},{title:"Personal",content:"Second-content"},{title:"Skills",content:"Last-content"}]),"production"===a&&(e=[{title:"Location",content:"First-content"},{title:"Personal",content:"Second-content"},{title:"Skills",content:"Last-content"}]);var n=this.state.current;return r.a.createElement("div",{className:"flex flex-column w-100"},!t&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flex flex-column raleway fw5"},r.a.createElement("h3",{className:"f5 fw3 black-30 tc pv0"},"welcome to"),r.a.createElement("div",{className:"flex flex-row flex-auto justify-center"},r.a.createElement("h3",{className:"tc pv3"},r.a.createElement("span",{className:"flex ph3 ttu pv2 items-center logotext ttu spaced tracked ba b--black bw1 raleway f3 fw6 black"},"Crew20"))),r.a.createElement("h3",{className:"f5 fw3 black-30 tc pv4"},"Please choose your account type")),r.a.createElement("div",{className:"flex flex-column br3 overflow-hidden"},r.a.createElement(ge,{setAccountType:this.props.setAccountType}))),t&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flex flex-column pb5"},r.a.createElement("p",{className:"f5 fw5 black-50 tc"},"Please tell us a bit about yourself.")),r.a.createElement(xe.a,{current:n},e.map(function(e){return r.a.createElement(Ne,{key:e.title,title:e.title})})),r.a.createElement("div",{className:"steps-content"},0===this.state.current&&r.a.createElement(ke,{prev:this.prev,next:this.next,current:this.state.current,saveStep1:this.saveStep1}),1===this.state.current&&r.a.createElement(ye,{prev:this.prev,next:this.next,current:this.state.current,saveStep2:this.saveStep2}),2===this.state.current&&r.a.createElement(Ee,{prev:this.prev,next:this.next,current:this.state.current,saveStep3:this.saveStep3}))))}}]),t}(r.a.Component),Se=r.a.createContext({}),Ce=Se.Provider,De=Se.Consumer,Pe=Se,Te=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={ready:!1,newAccountType:"",accountTypeIsSet:!1,lat:"",long:"",city:"",location:{},country:"",countrySet:!1,redirectProfile:!1},a.setAccountType=a.setAccountType.bind(Object(v.a)(a)),a.saveOnboardingData=a.saveOnboardingData.bind(Object(v.a)(a)),console.log("OnboardingScreen props",e),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"saveOnboardingData",value:function(){var e=Object(p.a)(f.a.mark(function e(t){var a,n,r,s,c,o,i,l,u,m,d,h,b,v,w,g,x=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("saveOnboardingData data",t),a=t.gender,n=t.dob,r=t.grade,s=t.role,c=t.bio,o=t.mobileNumber,i=t.skills,l=t.firstname,u=t.lastname,m=t.location,d=z.a.get("account"),h=d.user.id,b=d.user.profile,d.user.position=s,b.config={type:this.state.newAccountType,onboardingcomplete:!0},b.contact={mobile:o},b.bio=c,b.additional={skills:i,role:s,grade:r},b.name={first:l,last:u},b.location=m,b.gender=a,b.dob=n,v=d.user,console.log("saveOnboardingData profile",v),w="https://api.crew20.devcolab.site/v1/users/"+h,console.log("[[ Endpoint ]]",w),g={method:"PATCH",headers:{origin:"localhost:3000","Content-Type":"application/json"},body:JSON.stringify(v)},e.abrupt("return",fetch(w,g).then(function(e){return e.json()}).then(function(){var e=Object(p.a)(f.a.mark(function e(t){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("insertUser",t),console.log(" "),console.log("[[ User Updated ]]",JSON.stringify(t)),console.log(" "),(a=z.a.get("account")).user=t,e.next=8,K.a.store({type:"account",data:a});case 8:console.log(" [[ onboarding context ]]",x.context),x.context.history.push("/profile"),x.context.updateAccount();case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 20:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"setAccountType",value:function(e){var t=e.type;console.log("setAccountType",e),this.setState({newAccountType:t,accountTypeIsSet:!0}),z.a.store({label:"accountType",value:t}),z.a.store({label:"accountTypeIsSet",value:!0})}},{key:"componentDidMount",value:function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[[ OnboardingScreen props ]]",this.props),e.next=3,z.a.getGeoLocation({self:this});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{id:"OnboardingScreen",className:"fixed top-0 left-0 flex flex-column pa4 bg-near-white vh-100 w-100"},r.a.createElement("div",{className:"flex flex-column items-center justify-center w-100 h-100"},r.a.createElement("div",{className:"flex flex-column w-100 overflow-auto",id:""},r.a.createElement("div",{className:"form-row flex flex-column pb3 w-100"},r.a.createElement("div",{className:"flex flex-column mw6 center w-100"},r.a.createElement(Oe,{newAccountType:this.state.newAccountType,accountTypeIsSet:this.state.accountTypeIsSet,setAccountType:this.setAccountType,saveOnboardingData:this.saveOnboardingData}))))))}}]),t}(r.a.Component);Te.contextType=Pe;a(202);var Ae=a(784),Ie=(Ae.a.MonthPicker,Ae.a.RangePicker),Re=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={projectType:"",startDate:"",endDate:"",buttonLoading:!1},a.searchProjects=a.searchProjects.bind(Object(v.a)(a)),a.handleChange=a.handleChange.bind(Object(v.a)(a)),a.handleRangeChange=a.handleRangeChange.bind(Object(v.a)(a)),console.log("OnboardingScreen props",e),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"handleRangeChange",value:function(e){console.log(e);var t=e[0].toString(),a=e[1].toString();this.setState({startDate:t,endDate:a})}},{key:"handleDateChange",value:function(e){console.log(e),this.setState({projectDate:e.toString()})}},{key:"handleChange",value:function(e){console.log(e.target.value),this.setState({projectType:e.target.value})}},{key:"searchProjects",value:function(){var e=this;this.setState({buttonLoading:!0});var t={location:z.a.get("location"),projectType:this.state.projectType,startDate:this.state.startDate,endDate:this.state.endDate};setTimeout(function(){e.props.searchProjects(t)},1e3)}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"ProjectSearchForm"},r.a.createElement("div",{className:"flex flex-column ma0",id:""},r.a.createElement("div",{className:"form-row flex flex-column"},r.a.createElement("div",{className:"form-row flex flex-column pa4"},r.a.createElement("div",{className:"f4 fw6 black-90 pb3"},"Project Search"),r.a.createElement("div",{className:"form-row flex flex-row items-center"},r.a.createElement("label",{className:"f4 fw4 black-20 pb3- tl mr4 w-30"},"Location (City)"),r.a.createElement(je,{location:this.state.location,findLocation:this.findLocation,fetchProjects:this.fetchProjects2})),r.a.createElement("div",{className:"form-row flex flex-row items-center pt4 w-100"},r.a.createElement("label",{className:"f4 fw4 black-20 pb3- tl mr4 w-30"},"Project Type"),r.a.createElement("select",{className:"flex flex-column ph4 pv3 bn br2- round bg-black-05- white- black-50 f4 fw5 bs-a- w-100 bg-white",onChange:function(t){return e.handleChange(t)}},r.a.createElement("option",{value:""},"Select"),r.a.createElement("option",{value:"commercial"},"Commercial"),r.a.createElement("option",{value:"film"},"Film"),r.a.createElement("option",{value:"documentary"},"Documentary"))),r.a.createElement("div",{className:"form-row flex flex-row items-center pt4 w-100"},r.a.createElement("label",{className:"f4 fw4 black-20 pb3- tl mr4 w-30"},"Date Range"),r.a.createElement(Ie,Object(Q.a)({className:"bs-a f4 fw5",onChange:this.handleRangeChange,format:"YYYY/MM/DD"},"className","flex flex-column ph4 pv3- bn br2- round bg-black-05- white- black-50 f4 fw5 bs-a- w-100 bg-white")))))),r.a.createElement("div",{className:"Buttons flex flex-row justify-between center w-100"},r.a.createElement("div",{className:"flex flex-column w-100 pa4 bg-white"},r.a.createElement("button",{onClick:this.searchProjects,className:"br1- round bs-b bg-black-20 ph3 pv2 pointer bn relative  "},r.a.createElement("span",{className:"f4 fw5 white pv2 flex items-center justify-center"},this.state.buttonLoading&&r.a.createElement("div",{className:"flex flex-column pv2 mr3 items-center"},r.a.createElement("div",{className:"sp sp-3balls"})),!this.state.buttonLoading&&r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{icon:"search",iconSize:15,className:" f4 white mr3"})," Search"))))))}}]),t}(r.a.Component),Me=a(380),Le=function(){return N.a.createElement(k,null,N.a.createElement("section",{style:{opacity:"0.7"},id:"Loading",className:" trans-a fixed top-0 w-100 vh-100 bg-near-white z-99"},N.a.createElement("div",{className:"flex flex-column flex-auto vh-100 w-100 items-center justify-start pt6"},N.a.createElement("div",{className:"flex flex-column pa5- h-100 justify-center"},N.a.createElement(Me.a,{size:80,className:"red"})))))},Be=a(795),Fe=(a(124),function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).showModal=function(){a.setState({insertModalVisible:!0})},a.handleOk=function(e){console.log(e),a.setState({insertModalVisible:!1})},a.handleCancel=function(e){console.log(e),a.setState({insertModalVisible:!1})},a.state={projects:[],ready:!1,insertModalVisible:!1,projectInfoVisible:!1,loading:!1,toMessages:!1,conversationReady:!1,activeTab:"1",drawerReady:!1,progressBarPercent:0,progressBarActive:!1,showLocationForm:!1,showOnboardingScreen:!1,account:z.d.get("account"),searchCity:"",isOpen:!1},a.fetchProjects=a.fetchProjects.bind(Object(v.a)(a)),a.fetchProjects2=a.fetchProjects2.bind(Object(v.a)(a)),a.showDrawer=a.showDrawer.bind(Object(v.a)(a)),a.hideDrawer=a.hideDrawer.bind(Object(v.a)(a)),a.refresh=a.refresh.bind(Object(v.a)(a)),a.setLocation=a.setLocation.bind(Object(v.a)(a)),a.start=a.start.bind(Object(v.a)(a)),a.focusLocationSearch=a.focusLocationSearch.bind(Object(v.a)(a)),a.reserve=a.reserve.bind(Object(v.a)(a)),a.sendMessage=a.sendMessage.bind(Object(v.a)(a)),a.openSearchDialog=a.openSearchDialog.bind(Object(v.a)(a)),a.closeDialog=a.closeDialog.bind(Object(v.a)(a)),a.searchProjects=a.searchProjects.bind(Object(v.a)(a)),console.log("[[ Home props ]]",e),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"closeDialog",value:function(){this.setState({isOpen:!1})}},{key:"searchProjects",value:function(e){e.location;var t,a=e.projectType;e.startDate,e.endDate;this.setState({ready:!1}),console.log("search config ",e),console.log(this.state.projects),t="undefined"!==typeof e.location.County?e.location.County.toLowerCase():e.location.address.county.toLowerCase();var n=this.state.projects;console.log("location",t);var r=n.filter(function(e){return e.location.toLowerCase()===t});console.log("Results filtered by Location",r);var s=r.filter(function(e){return e.type===a});console.log("Results filtered by Project Type",s);var c=s.filter(function(t){return A()(t.start_date).isBetween(e.startDate,e.endDate)});console.log("Results filtered by Date Range",c),this.setState({projects:c,ready:!0,isOpen:!1})}},{key:"openSearchDialog",value:function(){this.setState({isOpen:!0})}},{key:"focusLocationSearch",value:function(){}},{key:"reserve",value:function(e){console.log(e),this.setState({activeDoc:e})}},{key:"sendMessage",value:function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.d.sendMessage({doc:t,self:this});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchProjects2",value:function(){var e=Object(p.a)(f.a.mark(function e(t){var a=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({ready:!1,searchCity:t}),setTimeout(function(){return console.log("[[ fetchProjects2 city ]]",t),z.d.fetchProjects2({city:t,self:a})},1e3);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchProjects",value:function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({ready:!1,searchCity:t}),e.next=3,z.d.fetchProjects({city:t,self:this});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"refresh",value:function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.d.refresh({self:this});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"showDrawer",value:function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.d.showDrawer({project:t,self:this});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"hideDrawer",value:function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.d.hideDrawer({self:this});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"setLocation",value:function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.d.setLocation({self:this});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"start",value:function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){}},{key:"componentDidUpdate",value:function(){console.log("[[ Home Updated ]]",this.props)}},{key:"componentDidMount",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t,a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[{label:"Find a Project",action:this.openSearchDialog}],this.context.setPage({title:"Find a Project",subtitle:"...",buttons:t}),z.d.fetchProjects({self:this}),document.querySelector("body").scroll({top:0,left:0,behavior:"smooth"}),null===localStorage.getItem("crewBuilder")){e.next=9;break}if((a=z.d.get("crewBuilder")).hasBeenUploaded){e.next=9;break}return e.next=9,z.d.createProject({self:this,project:a});case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(Pe.Consumer,null,function(t){return r.a.createElement(k,null,!e.state.ready&&r.a.createElement(Le,null),r.a.createElement("section",{id:"Home",className:"w-100 mw9 center pa4 pb6"},r.a.createElement("div",{id:"ProjectSearch",className:"w-100 flex flex-row items-end justify-start justify-end-ns mb2"},r.a.createElement("button",{onClick:e.openSearchDialog,className:(z.d.get("isMobile")?" w-100 mt3 ":"  ")+" br1- round bs-b bg-black-20 ph4 pv2 pointer bn relative w-100-    "},r.a.createElement("span",{className:"f5 fw6 white pv1 flex items-center justify-center pr2 raleway"},e.state.buttonLoading?r.a.createElement(P.a,{icon:"loading",className:" absolute right-0 f4 black-60 mr2"}):r.a.createElement(P.a,{icon:"search",iconSize:12,className:" f4 black-60- white  absolute right-0 mr3"})," Find a Project"))),e.state.ready?e.state.projects.length>0?r.a.createElement(B,{projects:e.state.projects,activeProject:e.state.activeProject,className:"trans-a",showDrawer:e.showDrawer,hideDrawer:e.hideDrawer,theme:t.theme,activeCurrency:t.activeCurrency,exchangeRate:t.exchangeRate,col:3}):r.a.createElement(g.a,{className:"trans-a flex flex-column justify-center items-start",image:g.a.PRESENTED_IMAGE_SIMPLE}):r.a.createElement("div",{className:"trans-a"},r.a.createElement(x.a,{active:!0})),e.state&&e.state.locationIsSet&&e.state.ready&&e.state.drawerReady&&r.a.createElement(de,{type:"info",project:e.state.activeProject,updateDoc:e.updateDoc,visible:e.state.projectInfoVisible,hideDrawer:e.hideDrawer,close:e.props.handleOk,refresh:e.refresh,theme:t.theme,reserve:e.reserve,sendMessage:e.sendMessage,conversationReady:e.state.conversationReady,submitReservationRequest:e.submitReservationRequest,activeTab:e.state.activeTab,activeCurrency:t.activeCurrency,exchangeRate:t.exchangeRate})),r.a.createElement(Be.a,Object.assign({className:"bp3-light",onClose:e.closeDialog,title:e.state.dialogTitle},e.state),r.a.createElement(Re,{searchProjects:e.searchProjects})))})}}]),t}(r.a.Component)),_e=Fe;Fe.contextType=Pe;var Ve=a(280),Ue=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).componentDidMount=function(){a.context.setPage({title:"Account",subtitle:"..."}),console.log("Account context ",a.context);var e=[],t=!0,n=!1,r=void 0;try{for(var s,c=Ve[Symbol.iterator]();!(t=(s=c.next()).done);t=!0){var o=s.value;e.push(o.name)}}catch(i){n=!0,r=i}finally{try{t||null==c.return||c.return()}finally{if(n)throw r}}a.setState({ready:!0,currencies:e})},a.state={hasError:!1,drawerOpen:!1,ready:!1,loading:!1,lightboxActive:!1,x:!1,currencies:[]},a.updateAccount=a.updateAccount.bind(Object(v.a)(a)),a.currencyOnChange=a.currencyOnChange.bind(Object(v.a)(a)),a.userEmailAddress=r.a.createRef(),a.userMobilePhone=r.a.createRef(),a.currency=r.a.createRef(),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"currencyOnChange",value:function(){var e=Object(p.a)(f.a.mark(function e(t){var a,n,r,s=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.value,console.log("selected currency ",a),n=Ve.filter(function(e){return e.name===a})[0],(r=z.a.get("account").user).currency=n,e.next=7,z.c.updateUser({self:this,user:r}).then(function(e){s.context.updateAccount()});case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"updateAccount",value:function(){}},{key:"render",value:function(){var e=this;return this.state.hasError?r.a.createElement("h1",null,"Something went wrong."):r.a.createElement(r.a.Fragment,null,r.a.createElement(Pe.Consumer,null,function(t){return r.a.createElement(k,null,r.a.createElement("section",{id:"Home",className:"w-100 mw9 center pa4 pb6"},r.a.createElement("div",{className:"w-60-ns w-100 flex flex-row flex-wrap justify-between br3- -overflow-hidden"},e.state.x?r.a.createElement(P.a,{icon:"loading",iconSize:"15",className:"absolute right-0 f4 black-60 mr3"}):r.a.createElement(P.a,{icon:"swap-right",iconSize:"15",className:"f4 black-60 -white  absolute right-0 mr3"}),!e.state.ready&&r.a.createElement("div",{className:"flex flex-column pv4 items-start"},r.a.createElement("div",{className:"sp sp-3balls"})),e.state.ready&&r.a.createElement("div",{id:"SettingsForm_General",className:"flex flex-column mb6 w-100"},r.a.createElement("div",{className:"flex flex-column mt0 w-100",id:""},r.a.createElement("div",{className:"form-row flex flex-column pb3 pt2"},r.a.createElement("div",{className:"form-row flex flex-column"},r.a.createElement("div",{className:"form-row flex flex-row pt4 items-center"},r.a.createElement("label",{className:"f5 fw6 black-20 pb3- tl mr4 w-30"},"Email Address"),r.a.createElement("input",{ref:e.userEmailAddress,required:!0,type:"text",defaultValue:e.context.account.user.email,className:"flex flex-column ph4 pv3 bn br2- round bg-black-05- white- black-50 f4 fw5 bs-a- w-100 bg-white"})),r.a.createElement("div",{className:"form-row flex flex-row pt4 items-center"},r.a.createElement("label",{className:"f5 fw6 black-20 pb3- tl mr4 w-30"},"Mobile Phone"),r.a.createElement("input",{ref:e.userMobilePhone,required:!0,type:"text",defaultValue:e.context.account.user.profile.contact.phone,className:"flex flex-column ph4 pv3 bn br2- round bg-black-05- white- black-50 f4 fw5 bs-a- w-100 bg-white"})),r.a.createElement("div",{className:"form-row flex flex-row pt4 items-center"},r.a.createElement("label",{className:"f5 fw6 black-20 pb3- tl mr4 w-30"},"Currency"),r.a.createElement("div",{className:"flex pb3 w-100"},r.a.createElement("select",{ref:e.currency,onChange:e.currencyOnChange,className:"w-100 flex flex-row ph4 pv3 bn round -br1 bg-white black-50 f4 fw5 -bs-a"},e.state.currencies.map(function(t,a){return r.a.createElement("option",{selected:e.context.currency.name===t,value:t},t)}))))))),r.a.createElement("div",{className:"Buttons flex flex-row justify-between mt4"},r.a.createElement("div",{className:"flex flex-column -w-100"},r.a.createElement("button",{onClick:function(){return e.updateAccount()},className:"br1- round bs-b bg-black-20 ph5 pv2 pointer bn relative w-100  "},r.a.createElement("span",{className:"relative f5 fw6 white pv1 flex items-center justify-center w-100"},e.state.loading?"Saving":"Save"))))),e.context.isAuthenticated&&r.a.createElement("div",{id:"SettingsForm_Crew",className:"flex flex-column mb6 w-100"}))),r.a.createElement(V.a,{title:"Basic Drawer",placement:"right",closable:!0,onClose:e.toggleDrawer,visible:e.state.drawerOpen,width:"60vw"},e.state.drawerOpen&&r.a.createElement("div",{className:"pointer flex flex-column justify-end items-center pa3 bg-white "},r.a.createElement("h3",{className:"f5 fw6 black tc pv2 ph3 word-break-all"},e.state.activeFile.file.originalname),r.a.createElement("div",{onClick:e.toggleLightbox,className:"pointer flex flex-column justify-end items-center pa3 bg-white br2 bs-b mb2 mr2"},r.a.createElement("div",{style:{backgroundImage:'url("'+e.state.activeFile.url+'")'},className:"h5 file-item bg-cover bg-center cover flex flex-column justify-end items-center pa3 bg-white br2 bs-b mb2 mr2"})))))}))}}]),t}(r.a.Component),Je=Ue;Ue.contextType=Pe;var ze=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={ready:!0,doc:{}},console.log("listItem props",e),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"avatar",value:function(e){return console.log("avatar",e),e.hasOwnProperty("picture")?e.picture:"http://cdn.shopify.com/s/files/1/2278/2351/products/W1151_GeometricPattern3_1024x1024.jpg?v=1510704914"}},{key:"getRecipientDetail",value:function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){console.log("[[ conv item ]]",this.props)}},{key:"render",value:function(){var e=this;return this.state.ready?N.a.createElement("div",{onClick:function(){return e.props.showDrawer({notification:e.props.notification})},className:"br2 bs-b List_A_item cursor-pointer sans-serif flex flex-row flex-auto w-100 items-center justify-start pa0 mb2- relative overflow-hidden "},N.a.createElement("div",{className:"flex flex-row w-100 bg-white  "},N.a.createElement("div",{className:"flex flex-column w-100"},N.a.createElement("div",{className:"flex flex-column mr2 f4 fw6 pb2 ph4 pt3 "},this.props.notification.title),N.a.createElement("div",{className:"flex flex-column mr2 f5 fw5 black-50 pb3 ph4"},this.props.notification.content)),N.a.createElement("div",{className:"flex flex-row flex-auto fw3 f6 black-30 pt3 pb3 pr3 w-60 justify-end"},N.a.createElement("span",{className:"fw4 ml1 mr3 black-30"},A()(this.props.notification.createdAt).format("h:mm A"))," ",N.a.createElement("span",{className:"fw4 ml1 mr3- black-30"},A()(this.props.notification.createdAt).format("D MMMM YYYY"))))):null}}]),t}(N.a.Component),Ye=(a(572),y.b.section({open:{x:"0%",delayChildren:200,staggerChildren:100},closed:{x:"0",delay:300}})),Ge=y.b.div({open:{y:0,opacity:1},closed:{y:50,opacity:0}}),He=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).toggle=function(){return a.setState({isOpen:!a.state.isOpen})},a.state={isOpen:!1,loading:!1,ready:!0,conversations:a.props.conversations},console.log("Notifications List",e),a.toggle=a.toggle.bind(Object(v.a)(a)),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){setTimeout(this.toggle,100)}},{key:"render",value:function(){var e=this,t=this.state.isOpen;return N.a.createElement(Ye,{pose:t?"open":"closed",id:"List_A",className:"list array flex flex-column justify-between flex-auto flex-wrap w-100 pb4 pt2- ph0 bg-transparent"},this.state.ready&&this.props.notifications.map(function(t,a){return N.a.createElement(Ge,{key:a,className:"relative mb2"},N.a.createElement(ze,{showDrawer:e.props.showDrawer,notification:t}))}))}}]),t}(N.a.Component),qe=a(96),We=a(56);window.GeoPattern=We;var Ke={hidden:{y:10,opacity:0},show:{opacity:1,y:0,transition:{staggerChildren:.2,y:{type:"spring",stiffness:100},default:{duration:.3}}}},Ze=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={crew:[],invited:[],items:[],isConfirmed:!1,ready:!1},a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("UserList props",this.props);case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:" flex flex-column mt0 w-100 -pa3 -ba -b--black-05 -br4 -overflow-hidden justify-between",id:""},this.props.ready&&r.a.createElement(qe.a.section,{variants:Ke,initial:"hidden",animate:"show",className:(this.props.columns&&" col-"+this.props.columns)+(this.props.columns>1?" flex-row flex-wrap ":" flex-column ")+" flex justify-between "},this.props.items.length>0&&this.props.items.map(function(t,a){return r.a.createElement(qe.a.div,{className:"pointer",variants:t,key:a,exit:"hidden",transitionDelay:a+.3},t&&r.a.createElement("div",{id:"user-"+t.id,className:" flex flex-row justify-start w-100 trans-a bg-white-50 hover-bg-white mb3 bs-b br3 overflow-hidden "},r.a.createElement("div",{className:("people"===e.props.type?" w-40 ":" w-100 ")+" flex flex-row-ns flex-column flex-auto-"},r.a.createElement("div",{className:"flex flex-column w-100="},r.a.createElement("div",{className:"round- p-a1 bg-white center"},r.a.createElement("div",{onClick:function(){return e.props.toggleDrawer({item:t,type:e.props.type})},style:{width:"120px",height:"90px",backgroundImage:t.profile&&t.profile.picture&&t.profile.picture.length?"url("+t.profile.picture+")":We.generate(t.profile&&t.profile.name&&t.profile.name.first+t.profile&&t.profile.name&&t.profile.name.last).toDataUrl()},className:"center pointer round-  cover bg-center"}))),r.a.createElement("div",{onClick:function(){return e.props.toggleDrawer({item:t,type:e.props.type})},className:"flex flex-column justify-center items-start ph4"},r.a.createElement("div",{className:"f4 flex flex-column items-start w-100 raleway "},r.a.createElement("span",{className:"flex flex-row-ns flex-column -w-100 black f3 fw6"},r.a.createElement("span",{className:"userList-type-"+e.props.type+" flex flex-row items-center justify-start-ns justify-center black f5 fw6"},t.profile.name.first," ",t.profile.name.last))))),"people"===e.props.type&&r.a.createElement("div",{className:"flex flex-row-ns flex-column w-30 ph4 pv3 "},r.a.createElement("div",{className:"flex flex-column justify-center"},r.a.createElement("span",{className:"flex flex-row items-center justify-start-ns justify-start black-40 f6 fw6"},t.position))),"crew"===e.props.type&&r.a.createElement("div",{className:"flex flex-row-ns flex-column w-30 ph4 pv3 "},r.a.createElement("div",{className:"flex flex-column justify-center"},r.a.createElement("span",{className:"flex flex-row items-center justify-start-ns justify-start black-40 f6 fw6"},t.isConfirmed?"Confirmed ":"Not Confirmed",t.isConfirmed?r.a.createElement(P.a,{icon:"endorsed",iconSize:"20",className:"f6 green ml2"}):""))),r.a.createElement("div",{className:"flex flex-row-ns flex-column w-30 ph4 pv3 "}),!1===e.props.state.deleteConfirmation[a]&&r.a.createElement("div",{onClick:function(){return e.props.confirmDelete({item:t,index:a})},className:"pointer flex flex-column items-end justify-center w-20 ph4 pv3"},r.a.createElement("div",{className:"flex flex-column justify-center"},r.a.createElement("span",{className:"flex flex-row items-center justify-start-ns justify-center black-30 hover-black-70 f6 fw6"},"Remove",r.a.createElement(P.a,{icon:"delete",iconSize:20,className:"ml2 black-20 f6"})))),!0===e.props.state.deleteConfirmation[a]&&r.a.createElement("div",{onClick:function(n){return e.props.remove({e:n,item:t,index:a})},className:"pointer flex flex-column items-end justify-center w-20 ph4 pv3"},r.a.createElement("div",{className:"flex flex-column justify-center"},r.a.createElement("span",{className:"flex flex-row items-center justify-start-ns justify-center black-30 hover-black-70 f6 fw6"},"Are you sure?",r.a.createElement(P.a,{icon:"delete",iconSize:20,className:"ml2 red f6"}))))))})),0===this.props.items.length&&"people"===this.props.type&&r.a.createElement("div",{className:"flex f5 fw5 black-50 pv3"},"No crew assigned yet."))}}]),t}(r.a.Component),Xe=function(e){return console.log("bio",e),r.a.createElement("section",{id:"Bio",className:"mt0-ns"},r.a.createElement("div",{className:"flex flex-column mb2 pa4 br1 bg-white"},r.a.createElement("div",{className:"flex flex-row"},r.a.createElement("div",{className:"flex flex-auto flex-row pb0"},r.a.createElement("p",{className:"f4 fw4 black-60 mb0 flex flex-row flex-auto"},0===e.user.profile.bio.length&&r.a.createElement("div",{onClick:e.createBio,className:"pointer flex ph3 pv2 f5 fw5 black-60 ba b--black-10 br1"},"Bio not available")," ",e.user.profile.bio," ",e.canEdit&&r.a.createElement(P.a,{onClick:e.editBio,icon:"edit",iconSize:12,Skills:!0,className:"pointer black-30 ml2"})))),r.a.createElement("div",{className:"flex flex-column pt4"},r.a.createElement("div",{className:" pt0"},r.a.createElement("h3",{className:"f5 fw3 black-30 mb3 flex justify-start"},"Skills")),r.a.createElement("div",{className:"flex flex-auto flex-column pb0 "},r.a.createElement("p",{className:"flex flex-row flex-wrap f4 fw4 black-60 mb0"},e.user.profile.additional.skills.map(function(e,t){return r.a.createElement("span",{className:"   pointer flex f5 fw6 black-60 ph3 pv2 round- br2 bs-b mr2-ns bn w-100-s- items-center tc justify-center mb3 mb0-ns bg-black-20 white ts-a- mr2 "},e)})," ",e.canEdit&&r.a.createElement(P.a,{onClick:e.editSkills,icon:"edit",iconSize:12,className:"pointer black-30 ml2"}))))))},$e=r.a.forwardRef(function(e,t){return console.log("ItemC",e),r.a.createElement("div",{key:e.item.createdAt,ref:t,style:e.style,className:(e.recipientID!==e.item.author?"row-reverse justify-end message-list-item ":" message-list-item justify-start ")+" items-start flex flex-row w-100 pb3"},r.a.createElement("div",{style:{backgroundImage:"url("+e.avatarAuthor(e.item)+")"},className:"avatar-s flex flex-column bg-cover bg-center br2"}),r.a.createElement("div",{className:(e.recipientID!==e.item.author?"tr":" tl")+" flex flex-column ph3 w-100"},e.item.text))}),Qe=Object(y.b)($e)({enter:{y:0,opacity:1,delay:0,transition:{y:{type:"spring",stiffness:1e3,damping:100},default:{duration:300}}},exit:{y:-50,opacity:1,delay:300,transition:{y:{type:"spring",stiffness:1e3,damping:100},default:{duration:300}}}}),et=y.b.div({enter:{y:-50,opacity:1,delay:0,transition:{y:{type:"spring",ease:"easeInOut",stiffness:1e3,damping:100},default:{duration:300}}},exit:{y:500,opacity:0,delay:0,transition:{y:{type:"spring",stiffness:1e3,damping:100,restDelta:.5,restSpeed:10},default:{duration:300}}}}),tt=function(e){return r.a.createElement(y.a,{animateOnMount:!0},e.items.map(function(t){return r.a.createElement(Qe,{enterAfterExit:!0,beforeChildren:!0,animateOnMount:!0,key:t.createdAt,item:t,recipientID:e.recipientID,avatarAuthor:e.avatarAuthor})}))},at=(r.a.Component,a(56));window.GeoPattern=at;var nt=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={doc:a.props.doc,visible:a.props.visible,childrenDrawer:!1,placement:"right",test:a.props.visible,activeTab:"1",characters:[],conversationReady:!1,ready:!1},a.showWidget=a.showWidget.bind(Object(v.a)(a)),a.checkUploadResult=a.checkUploadResult.bind(Object(v.a)(a)),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"showWidget",value:function(e){window.widget.open()}},{key:"checkUploadResult",value:function(e){e.event}},{key:"render",value:function(){return N.a.createElement("div",null,N.a.createElement(V.a,{title:"Notification Detail",placement:"right",closable:!0,onClose:this.props.close,width:500,visible:this.props.visible,doc:this.props.doc,className:"Conversation"},this.props.visible&&N.a.createElement("div",{className:"flex flex-auto flex-column relative pa5"},N.a.createElement("div",{className:"flex flex-column mr2 f3 fw6 pb3"},this.props.doc.title),N.a.createElement("div",{className:"flex flex-column mr2 f4 fw4 black-50 pb3 -ph4"},this.props.doc.content),N.a.createElement("div",{className:"flex flex-column mr2 f5 fw6 pb3 pt3"},"Sender"),N.a.createElement("div",{className:"flex flex-column mr2 f4 fw4 black-50 pb3 -ph4"},this.props.doc.data&&this.props.doc.data.sender&&N.a.createElement("div",{className:"flex flex-row-ns flex-row -w-100"},N.a.createElement("div",{className:"flex flex-column w-100="},N.a.createElement("div",{className:"round pa1 bg-white center"},N.a.createElement("div",{style:{width:"50px",height:"50px",backgroundImage:this.props.doc.data.sender.picture.length?"url("+this.props.doc.data.sender.picture+")":at.generate(this.props.doc.data.sender.name.first+this.props.doc.data.sender.name.last).toDataUrl()},className:"center pointer round  cover bg-center"}))),N.a.createElement("div",{className:"flex flex-column justify-center w-100- flex-auto ph3"},N.a.createElement("div",{className:"f4 flex flex-column items-center w-100 raleway "},N.a.createElement("span",{className:"flex flex-row-ns flex-column w-100 black f3 fw6"},N.a.createElement("span",{className:"flex flex-row items-center justify-start-ns justify-center black-70 f5 fw6"},this.props.doc.data.sender.name.first," ",this.props.doc.data.sender.name.last)))))),N.a.createElement("div",{className:"flex flex-column mr2 f5 fw6 pb3 pt3"},"Project"),N.a.createElement("div",{className:"flex flex-column mr2 f4 fw4 black-50 pb3 -ph4"},this.props.doc.data&&this.props.doc.data.project&&this.props.doc.data.project.title.length&&N.a.createElement("div",{className:"flex flex-row-ns flex-row -w-100"},N.a.createElement("div",{className:"flex flex-column w-100="},N.a.createElement("div",{className:"round pa1 bg-white center"},N.a.createElement("div",{style:{width:"50px",height:"50px",backgroundImage:this.props.doc.data.project.picture?"url("+this.props.doc.data.project.picture+")":at.generate(this.props.doc.data.project.title).toDataUrl()},className:"center pointer round  cover bg-center"}))),N.a.createElement("div",{className:"flex flex-column justify-center w-100- flex-auto ph3"},N.a.createElement("div",{className:"f4 flex flex-column items-center w-100 raleway "},N.a.createElement("span",{className:"flex flex-row-ns flex-column w-100 black f3 fw6"},N.a.createElement("span",{className:"flex flex-row items-center justify-start-ns justify-center black-70 f5 fw6"},this.props.doc.data.project.title)))))),N.a.createElement("div",{className:"flex flex-auto flex-row relative mt3"},N.a.createElement(O.a,{to:"/project/"+this.props.doc.data.project.id,className:"round f5 fw5 white bg-black-20 hover-bg-black-30 ph4 pv2 bs-b hover-white"},"View Project")))))}}]),t}(N.a.Component),rt=a(56);window.GeoPattern=rt;var st=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).start=Object(p.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.context.account.user.profile.connections,console.log("connections",t),e.next=4,z.c.fetchConnections({self:Object(v.a)(a),connections:t}).then(function(e){console.log("connections",e),setTimeout(function(){a.setState({connections:e,ready:!0})},1e3)});case 4:case"end":return e.stop()}},e)})),a.state={ready:!1,connections:[],activeUser:null,filter:"active",isDeleting:[],isDeletingStart:[],del:[],deleteConfirmation:[]},a.start=a.start.bind(Object(v.a)(a)),a.reload=a.reload.bind(Object(v.a)(a)),a.toggleDrawer=a.toggleDrawer.bind(Object(v.a)(a)),a.hideDrawer=a.hideDrawer.bind(Object(v.a)(a)),a.filter=a.filter.bind(Object(v.a)(a)),a.remove=a.remove.bind(Object(v.a)(a)),a.confirmDelete=a.confirmDelete.bind(Object(v.a)(a)),a.userLocation=a.userLocation.bind(Object(v.a)(a)),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"userLocation",value:function(){var e=this.state.activeCrewMember;return e.profile.location&&"undefined"!==typeof e.profile.location.County?e.profile.location.County:e.profile.location&&"undefined"!==typeof e.profile.location.address.county?e.profile.location.address.county:""}},{key:"filter",value:function(e){this.setState({filter:e})}},{key:"confirmDelete",value:function(e){e.item;var t=e.index,a=this.state.deleteConfirmation;a[t]=!0,this.setState({deleteConfirmation:a})}},{key:"remove",value:function(){var e=Object(p.a)(f.a.mark(function e(t){var a,n,r,s,c=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.item,n=t.index,r=this.state.isDeleting,(s=this.state.isDeletingStart)[n]=!0,this.setState({isDeletingStart:s}),setTimeout(Object(p.a)(f.a.mark(function e(){var t,o,i,l,u,m;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r[n]=!0,s[n]=!1,c.setState({isDeleting:r,isDeletingStart:s}),t=a.id,o=c.props.project,i=o.invited,l=o.crew,u=l.findIndex(function(e){return e.id===t}),m=i.findIndex(function(e){return e.id===t}),l.splice(u,1),i.splice(m,1),console.log("crew",l),console.log("crew member to delete",t),console.log("index of crew member to delete",m),console.log("update crew list after delete",l),o.crew=l,o.invited=i,e.next=19,z.c.updateProject({self:c,project:o}).then(function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.c.fetchCrew({self:c,project:o});case 2:c.reloadProject();case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 19:case"end":return e.stop()}},e)})),1e3);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"refresh",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({ready:!1}),setTimeout(Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchNotifications();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),1e3);case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"closeInnerDrawer",value:function(){this.setState({innerDrawerOpen:!1})}},{key:"toggleInnerDrawer",value:function(e){this.setState({innerDrawerOpen:!0,activeCrewMember:e})}},{key:"toggleDrawer",value:function(e){var t=e.item,a=e.type;console.log(t),this.setState({drawerType:a,drawerOpen:!this.state.drawerOpen,activeCrewMember:t})}},{key:"hideDrawer",value:function(e){this.setState({drawerReady:!1,docInfoVisible:!1})}},{key:"reload",value:function(){this.setState({ready:!1}),this.start()}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidMount",value:function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.context.setPage({title:"Network",subtitle:"..."}),this.start();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(Pe.Consumer,null,function(t){return r.a.createElement(k,null,!e.state.ready&&r.a.createElement(Le,null),r.a.createElement("section",{id:"Notifications",className:(!1!==e.props.padding?" pa4 ":"  ")+" w-100 mw8 center mt3- "},r.a.createElement("div",{className:" flex flex-row mt3 "},r.a.createElement("div",{className:"flex flex-row"},r.a.createElement("div",{onClick:function(){return e.filter("active")},className:("active"===e.state.filter?" fw6 ":" fw5 ")+" pointer flex flex-column pv2 f5 black-30 mr2 "},"Active"),r.a.createElement("div",{onClick:function(){return e.filter("pending")},className:("pending"===e.state.filter?" fw6 ":" fw5 ")+" pointer flex flex-column pv2 f5 black-30 mr2 "},"Pending"))),r.a.createElement("div",{className:"h2"}),e.state.ready&&0===e.state.connections.length&&r.a.createElement("div",{className:"flex flex-row ph0 pb3 items-center justify-start",id:""},r.a.createElement("span",{className:"f6 fw5 black-50 pv2 ph3 ba b--black-05"},"You do not have any connections")),r.a.createElement(Ze,Object(Q.a)({items:e.state.connections,invited:e.props.invited,userAvatar:e.userAvatar,confirmDelete:e.confirmDelete,remove:e.remove,state:e.state,ready:e.state.ready,toggleDrawer:e.toggleDrawer,type:"production",columns:3},"type","network")),!e.state.ready&&r.a.createElement("div",{className:"trans-a"},r.a.createElement(x.a,{active:!0}),r.a.createElement(x.a,{active:!0})),r.a.createElement(V.a,{title:"Crew Search",closable:!0,onClose:e.toggleDrawer,visible:e.state.drawerOpen,width:"60vw"},r.a.createElement(r.a.Fragment,null,e.state.drawerOpen&&r.a.createElement("div",{className:"pointer flex flex-column justify-end items-start pa3- bg-white "},"crewprofile"===e.state.drawerType&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"ProjectOwner",className:"flex flex-column w-100 pa0"},r.a.createElement("div",{className:"pa4 flex flex-row-ns flex-column w-100"},r.a.createElement("div",{className:"flex flex-column w-100="},r.a.createElement("div",{className:"round pa1 bg-white center"},r.a.createElement("div",{style:{width:"90px",height:"90px",backgroundImage:e.state.activeCrewMember.profile.picture.length?"url("+e.state.activeCrewMember.profile.picture+")":rt.generate(e.state.activeCrewMember.profile.name.first+e.state.activeCrewMember.profile.name.last).toDataUrl()},className:"center pointer round  cover bg-center"}))),r.a.createElement("div",{className:"flex flex-column justify-center w-100 ph3"},r.a.createElement("div",{className:"f4 flex flex-column items-center w-100 raleway "},r.a.createElement("span",{className:"flex flex-row-ns flex-column w-100 black f3 fw6"},r.a.createElement("span",{className:"flex flex-row items-center justify-start-ns justify-center black-70 f4 fw6"},e.state.activeCrewMember.profile.name.first," ",e.state.activeCrewMember.profile.name.last)))))),r.a.createElement("section",{id:"ProfileButtons",className:"flex flex-auto w-100"},r.a.createElement("div",{className:"flex flex-row mb2-ns- w-100 bt b--black-05 "},r.a.createElement("button",{title:"View or upload CV",id:"CV-button",className:"db relative w-100 ph4 pv3 br1- bg-white black-50 hover-black pointer"},r.a.createElement("div",{id:"",className:"db relative w-100"},r.a.createElement("span",{className:"f5 fw6 ph3-"},"Cirriculum Vitae"," "))),r.a.createElement("button",{title:"View or upload CV",id:"CV-button",className:"db relative w-100 ph4 pv3 br1- bg-white black-50 hover-black pointer"},r.a.createElement("div",{id:"",className:"db relative w-100"},r.a.createElement("span",{className:"f6 fw6 "},"Add to Network"))),r.a.createElement("button",{title:"View or upload CV",id:"CV-button",className:"db relative w-100 ph4 pv3 br1- bg-white black-50 hover-black pointer"},r.a.createElement("div",{id:"",className:"db relative w-100"},r.a.createElement("span",{className:"f6 fw6 "},"Send Message"))))),r.a.createElement("div",{className:"flex flex-row -nsflex-column w-100 black-60 raleway flex-wrap items-center justify-start-ns justify-between pa4 bt b--black-05"},r.a.createElement("div",{className:"flex flex-column w--100 pb1-ns pb2 mr3"},r.a.createElement("span",{className:"flex-column flex f6 fw4 black-40 items-start"},r.a.createElement("span",{className:"flex  mb3"},"Age"),r.a.createElement("span",{className:"flex items-center justify-center f6 fw6 -ml3-ns black-50- white ph2 pv1 ba b--black-05 br1 -round bw1- bg-white-20- bg-black -ts-a tc ml2-"},A()().diff(e.state.activeCrewMember.profile.dob,"years")))),r.a.createElement("div",{className:"flex flex-column w--100 pb1-ns pb2 mr3"},r.a.createElement("span",{className:"flex-column flex f6 fw4 black-40 items-start"},r.a.createElement("span",{className:"flex  mb3"},"Gender"),r.a.createElement("span",{className:"flex items-center justify-center f6 fw6 -ml3-ns black-50- white ph2 pv1 ba b--black-05 br1 -round bw1- bg-white-20- bg-black -ts-a tc ml2-"},e.state.activeCrewMember.profile.gender&&e.state.activeCrewMember.profile.gender||""))),r.a.createElement("div",{className:"flex flex-column w--100 pb1-ns pb2 mr3"},r.a.createElement("span",{className:"flex-column flex f6 fw4 black-40 items-start"},r.a.createElement("span",{className:"flex  mb3"},"Location"),r.a.createElement("span",{className:"flex items-center justify-center f6 fw6 -ml3-ns black-50- white ph2 pv1 ba b--black-05 br1 -round bw1- bg-white-20- bg-black -ts-a tc ml2-"},e.userLocation())))),r.a.createElement(Xe,{user:e.state.activeCrewMember,editSkills:null,editBio:null,canEdit:!1})))," "))))})}}]),t}(r.a.Component),ct=st;st.contextType=Pe;var ot=a(281),it=(a(574),a(385)),lt=a.n(it),ut=a(386),ft=a.n(ut),pt=a(387),mt=a.n(pt);a(575);Object(ot.registerPlugin)(mt.a,lt.a,ft.a);var dt=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={files:[]},a.handleInit=a.handleInit.bind(Object(v.a)(a)),a.updateFile=a.updateFile.bind(Object(v.a)(a)),a.handlePondFile=a.handlePondFile.bind(Object(v.a)(a)),a.onProcessFile=a.onProcessFile.bind(Object(v.a)(a)),a.renameFile=a.renameFile.bind(Object(v.a)(a)),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"renameFile",value:function(e){console.log("renaming file",e);var t=Date.now().toString()+"-"+e.name;return console.log("new filename",t),t}},{key:"componentDidMount",value:function(){console.log("Filepond props",this.props)}},{key:"onProcessFile",value:function(e,t,a,n,r,s,c,o,i){console.log("onProcessFile",t)}},{key:"handleInit",value:function(){console.log("FilePond instance has initialised",this.pond)}},{key:"updateFile",value:function(e){console.log("[[ File ]]",e)}},{key:"handlePondFile",value:function(){var e=Object(p.a)(f.a.mark(function e(t,a){var n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return console.log("Oh no"),e.abrupt("return");case 3:if(!a){e.next=32;break}if(console.log("file",a),"profileImage"===this.props.type&&z.d.uploadProfileImage({self:this,file:this.pond.getFile().file}),"cv"===this.props.type&&z.d.uploadCV({self:this,file:this.pond.getFile().file}),"WorkPortfolioImage"!==this.props.type){e.next=12;break}return e.next=10,z.d.uploadWorkPortfolioImage({self:this,file:this.pond.getFile().file});case 10:n=e.sent,this.props.setImage(n);case 12:if(console.log("filepond props",this.props),"files"!==this.props.type){e.next=19;break}return console.log("[[ File ]]",a),console.log("[[ File ]]",this.pond.getFile()),e.next=18,z.d.uploadProjectFiles({parent:this.props.self,self:this,project:this.props.project,file:this.pond.getFile().file,fileType:this.pond.getFile().fileType});case 18:e.sent;case 19:if("projectAvatarUpload"!==this.props.type){e.next=25;break}return console.log("[[ File ]]",a),e.next=23,z.d.uploadProjectAvatar({parent:this.props.self,self:this,project:this.props.project,file:this.pond.getFile().file});case 23:e.sent,this.setState({files:[]});case 25:if("calendar"!==this.props.type){e.next=32;break}return console.log("[[ File ]]",a),console.log("Event",this.props.project),e.next=30,z.d.uploadEventFiles({parent:this.props.self,self:this,event:this.props.project.event,file:this.pond.getFile().file});case 30:e.sent,this.setState({files:[]});case 32:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){console.log("this.pond",this.pond)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"FilePond-Wrapper flex flex-column w-100 "},r.a.createElement(ot.FilePond,{ref:function(t){return e.pond=t},files:this.state.files,allowMultiple:!0,oninit:function(){return e.handleInit()},fileRenameFunction:function(t){return e.renameFile(t)},onprocessfile:this.handlePondFile,onupdatefile:this.handlePondFile,multiple:!0,name:"images",server:"https://upload.crew20.devcolab.site/api/image"}))}}]),t}(r.a.Component),ht=dt;dt.contextType=Pe;var bt=a(150),vt=a(53),wt=a(220),gt=a.n(wt),xt=a(391),yt=a.n(xt),jt=a(392),kt=a(56);window.GeoPattern=kt;var Et=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={author:{},picture:null,ready:!1},a.authorData=a.authorData.bind(Object(v.a)(a)),a.author=a.author.bind(Object(v.a)(a)),a.isSameAuthorAsPreviousComment=a.isSameAuthorAsPreviousComment.bind(Object(v.a)(a)),a.isMe=a.isMe.bind(Object(v.a)(a)),a.messageIsSameDayAsPrevious=a.messageIsSameDayAsPrevious.bind(Object(v.a)(a)),a.authorData=a.authorData.bind(Object(v.a)(a)),a.checkForUrls=a.checkForUrls.bind(Object(v.a)(a)),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"checkForUrls",value:function(e){return function(e){return e.replace(/(https?:\/\/[^\s]+)/g,function(e){return'<a href="'+e+'">'+e+"</a>"})}(e)}},{key:"avatar",value:function(e){return e&&e.profile&&e.profile.picture?e.profile.picture:"https://cdn.shopify.com/s/files/1/2278/2351/products/W1151_GeometricPattern3_1024x1024.jpg?v=1510704914"}},{key:"authorData",value:function(){var e=this,t=this.props.authors,a=this.props.item.author,n=t.filter(function(e){return e.id===a})[0],r=n&&n.profile.picture;this.setState({author:n,picture:r}),setTimeout(function(){e.setState({ready:!0})},300)}},{key:"author",value:function(e){return this.props.authors.filter(function(t){return t.id===e})[0]}},{key:"isMe",value:function(){return this.props.item.author===this.props.me}},{key:"isSameAuthorAsPreviousComment",value:function(){var e=this.props.item.author,t=this.props.index,a=t-1;return t>0&&e===(a>0?this.props.items[a].author:this.props.items[0].author)}},{key:"messageIsSameDayAsPrevious",value:function(){var e=this.props.item,t=this.props.items,a=this.props.index,n=(this.props.index,a-1),r=e.createdAt;if(a>0){var s=t[n].createdAt;return A()(r).isSame(s,"day")}}},{key:"componentDidMount",value:function(){this.authorData()}},{key:"render",value:function(){var e=this;return this.state.ready&&r.a.createElement(r.a.Fragment,null,!this.messageIsSameDayAsPrevious()&&r.a.createElement("div",{className:"flex flex-column f7 fw5 black-20 pb4 pt3 w-100 tc"},A()(this.props.item.createdAt).format("ddd DD MMMM")),r.a.createElement(jt.a,{as:"div",onChange:function(t,a){return!e.props.item.seen.includes(e.props.me)&&e.props.markAsSeen(e.props.item)}},r.a.createElement("div",{id:this.props.item.id,className:(this.isMe()?"justify-end":"justify-start")+(this.isSameAuthorAsPreviousComment()?" ph3 pb3 shrink ":" ph3 pb3 pt5 ")+" flex flex-row "},!this.isSameAuthorAsPreviousComment()&&!this.isMe()&&r.a.createElement("div",{style:{width:"50px",height:"50px",background:this.props.authors.filter(function(t){return t.id===e.props.item.author})[0].profile.picture.length&&this.props.authors.filter(function(t){return t.id===e.props.item.author})[0].profile.picture?"url("+this.state.picture+")":kt.generate(this.props.authors.filter(function(t){return t.id===e.props.item.author})[0].profile.name.first+this.props.authors.filter(function(t){return t.id===e.props.item.author})[0].profile.name.last).toDataUrl()},className:"adjust-top flex flex-column bg-cover bg-center round mr2"}),r.a.createElement("div",{className:"flex flex-column"},!this.isSameAuthorAsPreviousComment()&&r.a.createElement("span",{className:(this.isMe()?" tr ":" tl ")+" flex flex-column f7 fw4 black-20 adjust-top pb1 "},A()(this.props.item.createdAt).format("HH:mm A")),r.a.createElement("div",{key:this.props.item.createdAt,ref:this.props.ref,style:this.props.style,className:(this.isMe()?"row-reverse justify-end message-list-item ":" message-list-item justify-start ")+" items-start- flex flex-row  ph3 pv2 br4 bg-light-blue mw7"},r.a.createElement("div",{className:(this.isMe()?"tr":" tl")+" flex flex-column  w-100 f5 fw5 black-70 word-break-word"},r.a.createElement(yt.a,null,this.props.item.text),r.a.createElement("span",{className:"f6 fw5 black-50"},this.props.item.author===this.props.me?!this.isSameAuthorAsPreviousComment()&&"me":this.props.authors.filter(function(t){return t.id===e.props.item.author})[0].profile.name.first+" "+this.props.authors.filter(function(t){return t.id===e.props.item.author})[0].profile.name.last," "," ")))),this.isMe()&&(this.isSameAuthorAsPreviousComment()&&this.messageIsSameDayAsPrevious()?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",{style:{width:"50px",height:"50px",background:this.props.authors.filter(function(t){return t.id===e.props.item.author})[0].profile.picture.length&&this.props.authors.filter(function(t){return t.id===e.props.item.author})[0].profile.picture?"url("+this.state.picture+")":kt.generate(this.props.authors.filter(function(t){return t.id===e.props.item.author})[0].profile.name.first+this.props.authors.filter(function(t){return t.id===e.props.item.author})[0].profile.name.last).toDataUrl()},className:"adjust-top flex flex-column bg-cover bg-center round ml2"})))))}}]),t}(r.a.Component),Nt=r.a.forwardRef(function(e,t){return r.a.createElement(Et,Object.assign({},e,{ref:t}))}),Ot=(Object(y.b)(Nt)({enter:{y:0,opacity:1,delay:0,transition:{y:{type:"spring",stiffness:1e3,damping:100},default:{duration:300}}},exit:{y:-50,opacity:1,delay:300,transition:{y:{type:"spring",stiffness:1e3,damping:100},default:{duration:300}}}}),y.b.div({enter:{y:-50,opacity:1,delay:0,transition:{y:{type:"spring",ease:"easeInOut",stiffness:1e3,damping:100},default:{duration:300}}},exit:{y:500,opacity:0,delay:0,transition:{y:{type:"spring",stiffness:1e3,damping:100,restDelta:.5,restSpeed:10},default:{duration:300}}}})),St=function(e){return r.a.createElement(y.a,{animateOnMount:!0},e.items.map(function(t,a){return r.a.createElement(Et,Object.assign({enterAfterExit:!0,beforeChildren:!0,animateOnMount:!0,key:a,item:t,index:a},e))}))},Ct=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).socket=null,a.markAsSeen=function(){var e=Object(p.a)(f.a.mark(function e(t){var n,r,s;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props.conversation,r=n.messages.findIndex(function(e){return e.id===t.id}),(s=new Set).add(a.props.selfUserId),n.messages[r].seen=Object(vt.a)(s),e.next=7,z.c.updateConversation({self:Object(v.a)(a),conversation:n,updateTimestamp:!1});case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.addMessage=function(e){return a.setState(function(t){return{comments:[e].concat(Object(vt.a)(t.comments))}})},a.state={ready:!0,messages:a.props.conversation.messages,conversation:a.props.conversation,stream:a.props.stream,authors:[]},a.avatar=a.avatar.bind(Object(v.a)(a)),a.submitMessage=a.submitMessage.bind(Object(v.a)(a)),a.addMessage=a.addMessage.bind(Object(v.a)(a)),a.submitMessage=a.submitMessage.bind(Object(v.a)(a)),a.initSocketConnection=a.initSocketConnection.bind(Object(v.a)(a)),a.onClientDisconnected=a.onClientDisconnected.bind(Object(v.a)(a)),a.onReconnection=a.onReconnection.bind(Object(v.a)(a)),a.setupSocketListeners=a.setupSocketListeners.bind(Object(v.a)(a)),a.onMessageRecieved=a.onMessageRecieved.bind(Object(v.a)(a)),a.onConnect=a.onConnect.bind(Object(v.a)(a)),a.scrollMessageBoxIntoView=a.scrollMessageBoxIntoView.bind(Object(v.a)(a)),a.getAuthors=a.getAuthors.bind(Object(v.a)(a)),a.markAsSeen=a.markAsSeen.bind(Object(v.a)(a)),a.messageText=r.a.createRef(),a.messagesList=r.a.createRef(),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"extractAuthors",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t,a,n,r,s,c,o,i,l;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t=this.props.conversation.messages,a=new Set,n=!0,r=!1,s=void 0,e.prev=5,c=t[Symbol.iterator]();!(n=(o=c.next()).done);n=!0)i=o.value,a.add(i.author);e.next=13;break;case 9:e.prev=9,e.t0=e.catch(5),r=!0,s=e.t0;case 13:e.prev=13,e.prev=14,n||null==c.return||c.return();case 16:if(e.prev=16,!r){e.next=19;break}throw s;case 19:return e.finish(16);case 20:return e.finish(13);case 21:return l=Array.from(a),this.setState({authorIds:l}),e.next=25,z.a.fetchCommentAuthors({self:this,authorIds:l});case 25:case"end":return e.stop()}},e,this,[[5,9,13,21],[14,,16,20]])}));return function(){return e.apply(this,arguments)}}()},{key:"getAuthors",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t,a,n,r,s,c,o,i,l,u;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.conversation,a=[],n=t.participants,r=!0,s=!1,c=void 0,e.prev=6,o=n[Symbol.iterator]();case 8:if(r=(i=o.next()).done){e.next=17;break}return l=i.value,e.next=12,fetch(z.a.api("users")+l).then(function(e){return e.json()}).then(function(e){return e});case 12:u=e.sent,a.push(u);case 14:r=!0,e.next=8;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(6),s=!0,c=e.t0;case 23:e.prev=23,e.prev=24,r||null==o.return||o.return();case 26:if(e.prev=26,!s){e.next=29;break}throw c;case 29:return e.finish(26);case 30:return e.finish(23);case 31:this.setState({authors:a,ready:!0});case 32:case"end":return e.stop()}},e,this,[[6,19,23,31],[24,,26,30]])}));return function(){return e.apply(this,arguments)}}()},{key:"scrollMessageBoxIntoView",value:function(){this.props.dashboard?!z.a.get("isMobile")&&document.querySelector("body").scroll({top:475,left:0,behavior:"smooth"}):!z.a.get("isMobile")&&document.querySelector("body").scroll({top:90,left:0,behavior:"smooth"})}},{key:"submitMessage",value:function(){var e=Object(p.a)(f.a.mark(function e(t){var a,n,r,s,c,o;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),this.setState({isSendingMessage:!0}),setTimeout(function(){document.getElementById("MessagesList")&&document.getElementById("MessagesList").scroll({top:document.getElementById("MessagesList").scrollHeight,left:0,behavior:"smooth"})},500),a=this.context.account.user.id,n=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),r={author:a,text:this.messageText.current.value,createdAt:new Date,messageId:n,conversationId:this.props.conversation.id,seen:[]},console.log("message ]]",r),this.props.conversation.hasOwnProperty("participants")||(this.props.conversation.participants=[z.a.get("account").user.id]),this.props.conversation.participants.includes(a)){e.next=17;break}return s=this.state.authorIds,(c=new Set(s)).add(a),o=Array.from(c),this.setState({authorIds:o}),e.next=17,z.a.fetchCommentAuthor({self:this,authorId:a});case 17:this.socket.emit("message",JSON.stringify(r)),this.messageText.current.value=null;case 19:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"onClientDisconnected",value:function(){console.log("[[ Socket.io server disconnected. ]]")}},{key:"onReconnection",value:function(){console.log("[[ Socket.io server reconnected. ]]")}},{key:"onConnect",value:function(){console.log(" "," "," "," "),console.log("[[ Socket.io server connected. ]]"),console.log(" "," "," "," ")}},{key:"setupSocketListeners",value:function(){this.socket.on("ping",function(){return console.log("ping")}),this.socket.on("connect",this.onConnect),this.socket.on("message",this.onMessageRecieved),this.socket.on("reconnect",this.onReconnection),this.socket.on("disconnect",this.onClientDisconnected),this.socket.emit("register",this.props.conversation.id)}},{key:"onMessageRecieved",value:function(){var e=Object(p.a)(f.a.mark(function e(t){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(a=this.props.conversation).messages.push(JSON.parse(t)),this.setState({isSendingMessage:!1}),e.next=5,z.c.updateConversation({self:this,conversation:a}).then(function(e){document.getElementById("MessagesList")&&document.getElementById("MessagesList").scroll({top:document.getElementById("MessagesList").scrollHeight,left:0,behavior:"smooth"})});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"avatar",value:function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"initSocketConnection",value:function(){this.socket=gt.a.connect("https://socketio.quantacom.co")}},{key:"componentWillReceiveProps",value:function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){}},{key:"componentDidMount",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:document.querySelector("body").scroll({top:0,left:0,behavior:"smooth"}),t=setInterval(function(){null!==document.getElementById("MessagesList")&&(document.getElementById("MessagesList").scroll({top:document.getElementById("MessagesList").scrollHeight,left:0,behavior:"smooth"}),clearInterval(t))},250),this.initSocketConnection(),this.setupSocketListeners(),setTimeout(function(){document.getElementById("MessagesList")&&document.getElementById("MessagesList").scroll({top:document.getElementById("MessagesList").scrollHeight,left:0,behavior:"smooth"})},500);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"messageInput",style:{background:"#fdfdfd"},className:("fixed-bottom"===this.props.inputPosition?" fixed bottom-0 left-0  ":"")+("standard"===this.props.inputPosition?"   ":"")+" w-100 z-999-0 flex ph3 pv3 bb bt br b--black-05 "},r.a.createElement("div",{id:"",className:("small"===this.props.size?"":" bs-b br3- - round overflow-hidden ")+(z.a.get("isMobile")?"  isMobile bt- b--black-05 bs-a ":" isNotMobile bb b--black-05 ")+" message-input-wrapper flex -absolute -bottom-0 w-100 mw9 center"},r.a.createElement("form",{onSubmit:this.submitMessage,className:"flex flex-row w-100 ma0"},r.a.createElement("div",{className:"flex flex-column w-80"},r.a.createElement("input",{onClick:this.scrollMessageBoxIntoView,required:!0,placeholder:"Enter text ...",ref:this.messageText,className:"bn pv3 ph4 f4 fw5 black-30",type:"text"})),r.a.createElement("div",{className:"flex flex-column w-20 bl b--black-05"},r.a.createElement("button",{type:"submit",className:"flex h-100 items-center justify-center f6 bg-white bn"},r.a.createElement(F.a,{type:"arrow-right"})))))),r.a.createElement("div",{className:(z.e.mobile()?" bt- b--black-05 ":"  ")+" flex flex-column relative h-100 w-100 flex-auto "},r.a.createElement("div",{className:(z.e.mobile()?" column-reverse ":"  ")+" flex flex-column relative h-100 w-100 flex-auto "},!this.state.ready&&r.a.createElement("div",{className:"pa3"},r.a.createElement("div",{className:"trans-a ph4 ph0-ns bg-light-blue pulse"})),this.state.ready&&this.props.conversationReady&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{background:"#fdfdfd"},className:(z.e.mobile()?" mh-74vh overflow-scroll ":"  ")+" mh-75vh relative flex flex-auto flex-column w-100 bg-center bg-cover items-start justify-start relative overflow-hidden "},this.props.conversation.messages.length>0?r.a.createElement(Ot,{ref:this.messagesList,animateOnMount:!0,id:"MessagesList",className:("discussion-large"===this.props.type?" vh64 ":"")+("project-overview"===this.props.type?" vh50 ":"")+("calendar-event"===this.props.type?" vh64 ":"")+" vh47- messages-list mh-150--vh db relative overflow-auto w-100 pa3 "},this.props.ready&&r.a.createElement(St,{items:this.props.conversation.messages,authors:this.props.conversation.authors,fetchAuthor:this.fetchAuthor,markAsSeen:this.markAsSeen,me:this.context.account.user.id,isSendingMessage:this.state.isSendingMessage}),this.state.isSendingMessage&&r.a.createElement("div",{className:"ph3 pv2 flex flex-row items-end justify-end"},r.a.createElement("div",{className:"pulsating-dot small mr3"}))):r.a.createElement("div",{className:"flex flex-column pv3 f6 fw5 black-40 tc w-100"},"No messages yet"))))))}}]),t}(r.a.Component),Dt=Ct;Ct.contextType=Pe;var Pt=a(56);window.GeoPattern=Pt;r.a.Component,a(647);var Tt=a(56);window.GeoPattern=Tt;var At=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).markAllAsSeen=function(){var e=Object(p.a)(f.a.mark(function e(t){var n,r,s,c,o,i;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=z.a.get("account").user.id,r=!0,s=!1,c=void 0,e.prev=4,o=t.messages[Symbol.iterator]();!(r=(i=o.next()).done);r=!0)i.value.seen.push(n);e.next=12;break;case 8:e.prev=8,e.t0=e.catch(4),s=!0,c=e.t0;case 12:e.prev=12,e.prev=13,r||null==o.return||o.return();case 15:if(e.prev=15,!s){e.next=18;break}throw c;case 18:return e.finish(15);case 19:return e.finish(12);case 20:return e.next=22,z.c.updateConversation({self:Object(v.a)(a),conversation:t,updateTimestamp:!1});case 22:case"end":return e.stop()}},e,null,[[4,8,12,20],[13,,15,19]])}));return function(t){return e.apply(this,arguments)}}(),a.componentDidMount=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.start(),a.setState({}),a.context.setPage({title:"Messages",subtitle:"..."});case 3:case"end":return e.stop()}},e)})),a.state={hasError:!1,drawerOpen:!1,activeFile:{},ready:!1,conversationReady:!1,activeStream:{},streams:[],activeConversation:[],activeConversationIndex:0,conversations:[],connections:[],connectionsReady:!1,isOpen:!1,checked:[],group:[],buttonLoading:!1,isSendingMessage:!1},a.toggleDrawer=a.toggleDrawer.bind(Object(v.a)(a)),a.toggleDialog=a.toggleDialog.bind(Object(v.a)(a)),a.openFilePanel=a.openFilePanel.bind(Object(v.a)(a)),a.fetchConnections=a.fetchConnections.bind(Object(v.a)(a)),a.selectConversation=a.selectConversation.bind(Object(v.a)(a)),a.updateActiveConversation=a.updateActiveConversation.bind(Object(v.a)(a)),a.setActiveConversation=a.setActiveConversation.bind(Object(v.a)(a)),a.activateSearch=a.activateSearch.bind(Object(v.a)(a)),a.extractAuthors=a.extractAuthors.bind(Object(v.a)(a)),a.reload=a.reload.bind(Object(v.a)(a)),a.start=a.start.bind(Object(v.a)(a)),a.newConveration=a.newConversation.bind(Object(v.a)(a)),a.groupChat=a.groupChat.bind(Object(v.a)(a)),a.newChat=a.newChat.bind(Object(v.a)(a)),a.addUserToGroupChat=a.addUserToGroupChat.bind(Object(v.a)(a)),a.startGroupChat=a.startGroupChat.bind(Object(v.a)(a)),a.messageFullScreen=a.messageFullScreen.bind(Object(v.a)(a)),a.markAllAsSeen=a.markAllAsSeen.bind(Object(v.a)(a)),a.chatGroupName=r.a.createRef(),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"componentWillReceiveProps",value:function(){}},{key:"messageFullScreen",value:function(){var e=document.getElementById("MessageBox");document.webkitFullscreenElement?document.webkitCancelFullScreen():e.webkitRequestFullScreen()}},{key:"startGroupChat",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t,a,n,r,s,c,o,i,l,u,p;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(this.setState({buttonLoading:!0}),t=this.chatGroupName.current.value,a=z.a.get("account").user,n=this.state.group,(r=new Set).add(a),s=!0,c=!1,o=void 0,e.prev=9,i=n[Symbol.iterator]();!(s=(l=i.next()).done);s=!0)u=l.value,r.add(u);e.next=17;break;case 13:e.prev=13,e.t0=e.catch(9),c=!0,o=e.t0;case 17:e.prev=17,e.prev=18,s||null==i.return||i.return();case 20:if(e.prev=20,!c){e.next=23;break}throw o;case 23:return e.finish(20);case 24:return e.finish(17);case 25:return"main",p=Array.from(r),e.next=29,z.a.createGroupConversation({self:this,users:p,type:"main",name:t});case 29:case"end":return e.stop()}},e,this,[[9,13,17,25],[18,,20,24]])}));return function(){return e.apply(this,arguments)}}()},{key:"addUserToGroupChat",value:function(e){var t=e.user,a=e.index,n=this.state.checked;n[a]=!this.state.checked[a];var r=this.state.group;r.push(t),this.setState({checked:n,group:r})}},{key:"newChat",value:function(){this.setState({dialogType:"single"}),this.toggleDialog()}},{key:"groupChat",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t,a,n=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({dialogType:"multi"}),this.toggleDialog(),t=z.a.get("account").user.profile.connections,a=new Array(t.length).fill(!1),e.next=6,z.c.fetchConnections({self:this,connections:t}).then(function(e){n.setState({connections:e,connectionsReady:!0,checked:a})});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"newConversation",value:function(){var e=Object(p.a)(f.a.mark(function e(t){var a,n,r,s;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.context.account.user.id,n=t.id,r="main",e.next=5,z.a.checkConversationExists({self:this,selfUserId:a,recipientId:n});case 5:if((s=e.sent).exists){e.next=13;break}return e.next=9,z.a.createNewConversation({self:this,selfUserId:a,recipientId:n,type:r});case 9:this.toggleDialog(),this.reload(),e.next=16;break;case 13:z.a.store({label:"activeConversation",value:s.conversation}),this.toggleDialog(),this.reload();case 16:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"toggleDialog",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"reload",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({ready:!1}),setTimeout(function(){t.start()},500);case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"fetchConnections",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t,a=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=z.a.get("account").user.profile.connections,e.next=3,z.c.fetchConnections({self:this,connections:t}).then(function(e){a.setState({connections:e,connectionsReady:!0})});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"start",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t,a=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,"undefined"!==typeof this.props.type?this.props.type:"main",e.next=4,this.fetchConnections();case 4:return e.next=6,z.c.fetchConversations({self:this,userId:this.context.account.user.id,type:"private"}).then(function(){var e=Object(p.a)(f.a.mark(function e(n){var r,s,c,o,i,l,u,p,m,d,h,b,v,w;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=!0,s=!1,c=void 0,e.prev=3,o=n[Symbol.iterator]();case 5:if(r=(i=o.next()).done){e.next=40;break}(l=i.value).authors=[],u=l.participants,p=!0,m=!1,d=void 0,e.prev=12,h=u[Symbol.iterator]();case 14:if(p=(b=h.next()).done){e.next=23;break}return v=b.value,e.next=18,z.a.fetchUser({self:a,userId:v}).then(function(e){return e});case 18:w=e.sent,l.authors.push(w);case 20:p=!0,e.next=14;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(12),m=!0,d=e.t0;case 29:e.prev=29,e.prev=30,p||null==h.return||h.return();case 32:if(e.prev=32,!m){e.next=35;break}throw d;case 35:return e.finish(32);case 36:return e.finish(29);case 37:r=!0,e.next=5;break;case 40:e.next=46;break;case 42:e.prev=42,e.t1=e.catch(3),s=!0,c=e.t1;case 46:e.prev=46,e.prev=47,r||null==o.return||o.return();case 49:if(e.prev=49,!s){e.next=52;break}throw c;case 52:return e.finish(49);case 53:return e.finish(46);case 54:t.setState({conversations:n,activeConversation:n[0],ready:!0,conversationReady:!0}),setTimeout(function(){document.getElementById("MessagesList")&&document.getElementById("MessagesList").scroll({top:999999999999,left:0,behavior:"smooth"})},500);case 56:case"end":return e.stop()}},e,null,[[3,42,46,54],[12,25,29,37],[30,,32,36],[47,,49,53]])}));return function(t){return e.apply(this,arguments)}}());case 6:null!==localStorage.getItem("activeConversation")&&this.setActiveConversation();case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"extractAuthors",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t,a,n,r,s,c,o,i,l;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t=this.props.conversation.messages,a=new Set,n=!0,r=!1,s=void 0,e.prev=5,c=t[Symbol.iterator]();!(n=(o=c.next()).done);n=!0)i=o.value,a.add(i.author);e.next=13;break;case 9:e.prev=9,e.t0=e.catch(5),r=!0,s=e.t0;case 13:e.prev=13,e.prev=14,n||null==c.return||c.return();case 16:if(e.prev=16,!r){e.next=19;break}throw s;case 19:return e.finish(16);case 20:return e.finish(13);case 21:return l=Array.from(a),this.setState({authorIds:l}),e.next=25,z.a.fetchCommentAuthors({self:this,authorIds:l});case 25:case"end":return e.stop()}},e,this,[[5,9,13,21],[14,,16,20]])}));return function(){return e.apply(this,arguments)}}()},{key:"activateSearch",value:function(){this.setState({messageSearchActive:!0})}},{key:"updateActiveConversation",value:function(e){var t=e.conversations,a=e.activeConversation;this.setState({activeConversation:a,conversations:t})}},{key:"selectConversation",value:function(){var e=Object(p.a)(f.a.mark(function e(t){var a,n=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.conversation,this.setState({conversationReady:!1,activeConversation:a}),z.a.set("activeConversation",a),setTimeout(function(){n.setState({conversationReady:!0})},100),z.a.get("isMobile")&&this.setState({drawerOpen:!1}),setTimeout(function(){document.getElementById("MessagesList")&&document.getElementById("MessagesList").scroll({top:999999999999,left:0,behavior:"smooth"})},500);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"setActiveConversation",value:function(){var e=this,t=setInterval(function(){if(null!==localStorage.getItem("activeConversation")&&e.state.ready&&null!==z.a.get("activeConversation")&&z.a.get("activeConversation")!=={}){var a=z.a.get("activeConversation").id,n=e.state.conversations,r=n.filter(function(e){return e.id===a});r.length>0?e.setState({activeConversation:r[0]}):e.setState({activeConversation:n[0]}),e.markAllAsSeen(n[0]),clearInterval(t)}},200)}},{key:"openFilePanel",value:function(e){this.setState({activeFile:e}),this.toggleDrawer()}},{key:"toggleDrawer",value:function(){this.setState({drawerOpen:!this.state.drawerOpen})}},{key:"closeDialog",value:function(){this.setState({isOpen:!1})}},{key:"render",value:function(){var e=this,t=z.a.get("account").user.id;return this.state.hasError?r.a.createElement("h1",null,"Something went wrong."):r.a.createElement(r.a.Fragment,null,!this.state.ready&&!this.props.dashboard&&r.a.createElement(Le,null),r.a.createElement("section",{id:"Messages",className:(!1!==this.props.padding?"  pa4-ns ":"  ")+" flex flex-column w-100 mw8 center pv4- ph0 pb6- mt3- "},r.a.createElement("div",{className:"flex flex-row justify-between bs-b bs-none-ns"},r.a.createElement("div",{className:"flex flex-row ph4 ph0-ns mb3 mt3- -mt3-ns mb4-ns"},r.a.createElement("button",{className:"br1- round bs-b bg-black-20 ph3 pv2 pointer bn relative ",onClick:this.newChat},r.a.createElement("span",{className:"f5 fw6 white pv0 flex items-center justify-center"},"New Message")),r.a.createElement("button",{className:"br1- round bs-b bg-black-20 ph3 pv2 pointer bn relative ml3 ",onClick:this.groupChat},r.a.createElement("span",{className:"f5 fw6 white pv0 flex items-center justify-center"},"Group Chat")),r.a.createElement("button",{className:"bg-transparent ph3 pv2 pointer bn relative ml3 ",onClick:this.messageFullScreen},r.a.createElement(P.a,{icon:"fullscreen",iconSize:15,className:"black-30"}))),z.a.get("isMobile")&&r.a.createElement("div",{className:"  recipientList flex flex-row bg-transparent ph4 bt b--black-05 pv3 "},r.a.createElement("div",{onClick:this.toggleDrawer,className:"pointer flex flex-row ph0 pv2 f5 fw6 white-80 -black-50 w-100 justify-center items-center ba- bg-black-20 b--black-05- ph4 tc round bs-a"},r.a.createElement("span",{className:"flex"},"Select recipient"),r.a.createElement(P.a,{icon:"follower",iconSize:15,className:"white-40 -black-20 ml3"})))),this.state.ready&&0===this.state.conversations.length&&r.a.createElement("div",{className:"flex flex-row ph0 pb3 items-center justify-start",id:""},r.a.createElement("span",{className:"f6 fw5 black-50 pv2 ph3 ba b--black-05"},"You have not started any conversations yet")),r.a.createElement("div",{id:"MessageBox",className:(z.a.get("isMobile")?" flex-column ":" flex-row br4 ")+"  flex-row br4- flex flex-wrap justify-between overflow-hidden bg-white mb5  bs-b "},!z.a.get("isMobile")&&r.a.createElement("div",{className:(this.props.dashboard," w-30 "+(z.a.get("isMobile")?" w-100  ":"  ")+" recipientList flex flex-column bg-white br b--black-05")},this.state.ready&&this.state.conversations.length>0&&this.state.conversations.sort(function(e,t){return A()(t.updatedAt)-A()(e.updatedAt)}).map(function(a,n){return r.a.createElement(k,null,r.a.createElement("div",{onClick:function(){e.selectConversation({conversation:a})},id:a.id,className:(a.id===e.state.activeConversation.id?" bg-light-blue ":" bg-white ")+" pointer conversation-item flex flex-column w-100"},!a.group&&r.a.createElement("div",{className:(a.id===e.state.activeConversation.id?"  ":" bb b--black-05 ")+" flex flex-row items-center pv3 ph4 "},r.a.createElement("div",{className:"conversation-recipient-avatar flex flex-row"},r.a.createElement("div",{className:" pointer flex flex-column pv2 pr3 items-center justify-center"},r.a.createElement("div",{className:"cover bg-center",style:{width:"50px",height:"50px",borderRadius:"100px",boxShadow:"0 0px 0px 6px #ffffff9e",background:a.authors.filter(function(e){return e.id!==a.participants.filter(function(e){return e.id!==t})[0]})[0].profile.picture.length?"url('"+a.authors.filter(function(e){return e.id!==a.participants.filter(function(e){return e.id!==t})[0]})[0].profile.picture+"')":Tt.generate((a.authors.filter(function(e){return e.id!==a.participants.filter(function(e){return e.id!==t})[0]})[0]&&a.authors.filter(function(e){return e.id!==a.participants.filter(function(e){return e.id!==t})[0]})[0].profile&&a.authors.filter(function(e){return e.id!==a.participants.filter(function(e){return e.id!==t})[0]})[0].profile.name.first)+(a.authors.filter(function(e){return e.id!==a.participants.filter(function(e){return e.id!==t})[0]})[0]&&a.authors.filter(function(e){return e.id!==a.participants.filter(function(e){return e.id!==t})[0]})[0].profile&&a.authors.filter(function(e){return e.id!==a.participants.filter(function(e){return e.id!==t})[0]})[0].profile.name.last)).toDataUrl()}}))),r.a.createElement("div",{className:" flex flex-column items-start justify-center"},r.a.createElement("div",{className:" raleway -raleway flex flex-row  fw6"},r.a.createElement("div",{className:" flex f5 fw5- black-70 "},a.authors.filter(function(e){return e.id!==a.participants.filter(function(e){return e.id!==t})[0]})[0]&&a.authors.filter(function(e){return e.id!==a.participants.filter(function(e){return e.id!==t})[0]})[0].profile&&a.authors.filter(function(e){return e.id!==a.participants.filter(function(e){return e.id!==t})[0]})[0].profile.name.first),r.a.createElement("div",{className:" flex f5 fw5- ml1 black-70"},a.authors.filter(function(e){return e.id!==a.participants.filter(function(e){return e.id!==t})[0]})[0]&&a.authors.filter(function(e){return e.id!==a.participants.filter(function(e){return e.id!==t})[0]})[0].profile&&a.authors.filter(function(e){return e.id!==a.participants.filter(function(e){return e.id!==t})[0]})[0].profile.name.last)),r.a.createElement("div",{className:" flex flex-row pt1"},r.a.createElement("div",{className:" raleway flex f6 fw5 black-20 "},a.authors.filter(function(e){return e.id!==a.participants.filter(function(e){return e.id!==t})[0]})[0]&&a.authors.filter(function(e){return e.id!==a.participants.filter(function(e){return e.id!==t})[0]})[0].profile&&a.authors.filter(function(e){return e.id!==a.participants.filter(function(e){return e.id!==t})[0]})[0].profile&&a.authors.filter(function(e){return e.id!==a.participants.filter(function(e){return e.id!==t})[0]})[0].profile.additional.role))),r.a.createElement("div",{className:" flex flex-row w-100"})),a.group&&r.a.createElement("div",{className:(e.isActive()?"  ":" bb b--black-05 ")+" flex flex-row items-center pv3 ph4 "},r.a.createElement("div",{className:"conversation-recipient-avatar flex flex-row justify-between w-100"},r.a.createElement("div",{className:" pointer flex flex-row pv2 pr3 items-center justify-start"},r.a.createElement("div",{className:"cover bg-center mh2- ",style:{width:"50px",height:"50px",borderRadius:"100px",boxShadow:"0 0px 0px 6px #ffffff9e",background:Tt.generate(a.name).toDataUrl()}})),r.a.createElement("div",{className:" flex flex-column w-100 items-start justify-center"},r.a.createElement("div",{className:" raleway -raleway flex flex-row  fw6"},r.a.createElement("div",{className:" flex f5 fw5- black-70 "},a.name))),r.a.createElement("div",{className:"flex w-40 flex-row items-center"},a.authors&&a.authors.length&&a.authors.filter(function(e){return e.id!==a.author}).map(function(e,t){return r.a.createElement("div",{className:"cover bg-center mh2",style:{width:"30px",height:"30px",borderRadius:"100px",backgroundImage:'url("'+e.profile.picture+'")',boxShadow:"0 0px 0px 6px #ffffff9e"}})}))))))}),!this.state.ready&&r.a.createElement("div",{className:"pa3-"},r.a.createElement("div",{className:"flex items-center justify-center rans-a ph4- -ph0-ns bg-light-blue pulse h4"},r.a.createElement("span",{className:"flex f5 fw5 black-30"},"Loading")))),r.a.createElement("div",{className:(z.a.get("isMobile")?" w-100 ":!0===this.props.dashboard?" w-70 ":"  w-70 bg-white ")+" flex flex-column"},this.state.conversations.length>0&&r.a.createElement(Dt,{conversationReady:this.state.conversationReady,type:"discussion-large",conversation:this.state.activeConversation,conversations:this.state.conversations,stream:this.state.activeStream,updateActiveConversation:this.updateActiveConversation,isSendingMessage:this.state.isSendingMessage,dashboard:this.props.dashboard,ready:this.state.conversationReady,selfUserId:t})))),r.a.createElement(Be.a,Object.assign({className:"bp3-light",onClose:this.toggleDialog},this.state),["single","multi"].includes(this.state.dialogType)&&r.a.createElement("div",{className:"flex flex-column ph4- pt4- pb2-"},r.a.createElement("div",{className:"flex flex-column pt3-"},r.a.createElement("div",{className:"flex flex-column",style:{maxHeight:"400px",overflow:"auto"}},r.a.createElement("div",{className:"mb0 mt0 raleway f5 fw5  mb-0 flex flex-row items-center justify-start black-50 pa3 bg-white-40"},r.a.createElement("span",null,"Your Network Connections"),r.a.createElement("div",{className:"pv1 ph2 br1 black fw6 bg-white ml3"},r.a.createElement("span",{class:""},this.state.connections.length))),!this.state.connectionsReady&&r.a.createElement("div",{className:"flex mr3 pv4 items-center justify-center"},r.a.createElement("div",{className:"sp sp-3balls-small"})),this.state.connectionsReady&&this.state.connections.map(function(t,a){return r.a.createElement("div",{onClick:"single"===e.state.dialogType&&function(){return e.newConversation(t)},className:"flex flex-row justify-between"},r.a.createElement("div",{className:"    trans-a pointer flex flex-row-ns flex-row items-center justify-between  w-100-s bn-ns bb b--black-05 pa3 hover-bg-white-70 w-100"},r.a.createElement("div",{style:{width:"50px",height:"50px",borderRadius:"100px",background:t.profile.picture.length?"url("+t.profile.picture+")":Tt.generate(t.profile.picture).toDataUrl()},className:"cover bg-center"}),r.a.createElement("div",{className:" flex flex-row flex-auto -flex-column pt2-ns- pl3  flex f5 fw6 black-70 raleway "},r.a.createElement("div",{className:"  flex    "},t.profile.name.first),r.a.createElement("div",{className:" flex ml1"},t.profile.name.last)),"multi"===e.state.dialogType&&r.a.createElement("div",{className:"  checkbox-square  flex flex-row -flex-column pt2-ns pl3 f5 fw6 black ph4  "},r.a.createElement(X.a,{type:"checkbox",onChange:function(){return e.addUserToGroupChat({user:t,index:a})},checked:e.state.checked[a]}))))})))),"multi"===this.state.dialogType&&r.a.createElement("div",{className:"  flex flex-row justify-end -flex-column pv3 f5 fw6 black ph4 bt b--black-05  "},r.a.createElement("input",{ref:this.chatGroupName,type:"text",placeholder:"Chat group name",className:"f5 fw5 br2 bg-white ph4 pv3 pointer bn relative w-100 "})),"multi"===this.state.dialogType&&r.a.createElement("div",{className:"  flex flex-row justify-end -flex-column pv3 f5 fw6 black ph4 bt b--black-05  "},r.a.createElement("button",{onClick:this.startGroupChat,className:"br0- round bs-b bg-black-20 ph5 pv3 pointer bn relative w-100 "},this.state.buttonLoading&&r.a.createElement("div",{className:"flex items-center justify-center mr3 pv2"},r.a.createElement("div",{className:"sp sp-3balls-small"})),!this.state.buttonLoading&&r.a.createElement("span",{className:"f5 fw6 white pv0 flex items-center justify-center"},"Start Group Chat")))),r.a.createElement(V.a,{title:"Recipient List",placement:"right",closable:!0,onClose:this.toggleDrawer,visible:this.state.drawerOpen,width:"80vw"},this.state.drawerOpen&&r.a.createElement("div",{className:"pointer flex flex-column justify-end items-center bg-white w-100 h-100"},r.a.createElement("div",{className:"pointer flex flex-column justify-end items-center bg-white w-100 h-100"},r.a.createElement(bt.d,{value:this.state.value,placeholder:"Search",onSubmit:function(e){return console.log(e,"onSubmit")},onClear:function(e){return console.log(e,"onClear")},onFocus:function(){return console.log("onFocus")},onBlur:function(){return console.log("onBlur")},onCancel:function(){return console.log("onCancel")},showCancelButton:!0,onChange:this.onChange})))))}}]),t}(r.a.Component),It=At;At.contextType=Pe;var Rt=a(154),Mt=(n.Component,a(98)),Lt=(a(648),a(146)),Bt=a(56);window.GeoPattern=Bt;var Ft=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).componentDidMount=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("ProjectCalendar mounted"),a.start().then(function(e){a.createDays()});case 2:case"end":return e.stop()}},e)})),a.state={hasError:!1,current:parseInt(A()(new Date).format("M")),currentMonthString:A()(new Date).format("MMMM"),currentMonth:A()(new Date),year:A()(new Date).format("YYYY"),months:[],months_:[],ready:!1,projectEvents:[],ownEvents:[],projects:[],events:[],projectsWithDates:[],style:"two",contextMenuOpen:0,eventsReady:!1,projectsReady:!1,calendarDataReady:a.props.calendarRefresh,existingEntries:[]},a.start=a.start.bind(Object(v.a)(a)),a.getDates=a.getDates.bind(Object(v.a)(a)),a.createDays=a.createDays.bind(Object(v.a)(a)),a.getMonthDateRange=a.getMonthDateRange.bind(Object(v.a)(a)),a.projectImage=a.projectImage.bind(Object(v.a)(a)),a.toggleStyle=a.toggleStyle.bind(Object(v.a)(a)),a.next=a.next.bind(Object(v.a)(a)),a.prev=a.prev.bind(Object(v.a)(a)),a.reload=a.reload.bind(Object(v.a)(a)),a.onSelectSlot=a.onSelectSlot.bind(Object(v.a)(a)),a.checkForNewEntry=a.checkForNewEntry.bind(Object(v.a)(a)),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"checkForNewEntry",value:function(e){return!this.state.existingEntries.includes(e)}},{key:"onSelectSlot",value:function(e){var t=e.day,a=e.index,n=this.state.projectsWithDates,r=(n[a],n.filter(function(e){return function(e){if(e.dates)return e.dates.includes(t)}(e)}));this.props.setDrawerData({day:t,events:r})}},{key:"reload",value:function(){var e=this;this.start().then(function(t){e.createDays()})}},{key:"next",value:function(){var e=this;this.setState({ready:!1,current:parseInt(A()(this.state.currentMonth).add(1,"month").format("M")),currentMonthString:A()(this.state.currentMonth).add(1,"month").format("MMMM"),currentMonth:A()(this.state.currentMonth).add(1,"month"),year:A()(this.state.currentMonth).add(1,"month").format("YYYY")}),this.start().then(function(t){e.createDays()})}},{key:"prev",value:function(){var e=this;this.setState({ready:!1,current:parseInt(A()(this.state.currentMonth).subtract(1,"month").format("M")),currentMonth:A()(this.state.currentMonth).subtract(1,"month"),currentMonthString:A()(this.state.currentMonth).subtract(1,"month").format("MMMM"),year:A()(this.state.currentMonth).subtract(1,"month").format("YYYY")}),this.start().then(function(t){e.createDays()})}},{key:"toggleStyle",value:function(e){this.setState({style:e})}},{key:"projectImage",value:function(e){return"project"===e.type?e.project.hasOwnProperty("media")?e.project.media.images[0].url:null:"event"===e.type?null!==e.picture?e.picture:null:void 0}},{key:"start",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({calendarDataReady:!1}),e.abrupt("return",new Promise(function(){var e=Object(p.a)(f.a.mark(function e(a){var n,r,s,c,o,i,l,u,p,m,d,h,b,v,w,g,x,y,j,k,E,N;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.c.fetchSubscribedProjects({self:t,userId:t.props.user.id}).then(function(e){return t.setState({projects:e,projectsReady:!0}),e});case 2:return n=e.sent,r=[],e.next=6,z.c.fetchEvents({self:t,userId:t.props.user.id}).then(function(e){return 401===e.code?(z.c.refreshTokens(),t.setState({events:[]}),[]):(t.setState({events:e,eventsReady:!0}),e)});case 6:if(401===(r=e.sent).code&&t.context.refreshTokens(),s=[],!t.state.eventsReady||!t.state.projectsReady){e.next=50;break}for(c=!0,o=!1,i=void 0,e.prev=13,l=r[Symbol.iterator]();!(c=(u=l.next()).done);c=!0)p=u.value,m=p.start,d=p.end,h=t.getDates(m,d),b={id:p.id,type:"event",title:p.title,conversations:p.conversations,conversationId:p.conversationId,schedule:p.schedule||[],files:p.files||[],days:p.days,project:null,start:A()(m).tz("Africa/Johannesburg").toDate(),end:A()(d).tz("Africa/Johannesburg").toDate(),dates:h,picture:p&&p.media&&p.media.images&&p.media.images.length>0&&p.media.images[0].url||null},s.push(b);e.next=21;break;case 17:e.prev=17,e.t0=e.catch(13),o=!0,i=e.t0;case 21:e.prev=21,e.prev=22,c||null==l.return||l.return();case 24:if(e.prev=24,!o){e.next=27;break}throw i;case 27:return e.finish(24);case 28:return e.finish(21);case 29:for(v=!0,w=!1,g=void 0,e.prev=32,x=n[Symbol.iterator]();!(v=(y=x.next()).done);v=!0)j=y.value,k=j.start_date,E=j.end_date,N={id:j.id,type:"project",title:j.title,schedule:j.schedule||[],files:j.files||[],project:j,start:A()(k).tz("Africa/Johannesburg").toDate(),end:A()(E).tz("Africa/Johannesburg").toDate(),dates:j.days,picture:j&&j.media&&j.media.images&&j.media.images.length>0&&j.media.images[0].url||Bt.generate(j.title).toBase64()},s.push(N);e.next=40;break;case 36:e.prev=36,e.t1=e.catch(32),w=!0,g=e.t1;case 40:e.prev=40,e.prev=41,v||null==x.return||x.return();case 43:if(e.prev=43,!w){e.next=46;break}throw g;case 46:return e.finish(43);case 47:return e.finish(40);case 48:t.setState({projectsWithDates:s,calendarDataReady:!0}),a(s);case 50:case"end":return e.stop()}},e,null,[[13,17,21,29],[22,,24,28],[32,36,40,48],[41,,43,47]])}));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getDates",value:function(e,t){var a=[],n=A()(e);for(t=A()(t);n<=t;)a.push(A()(n).format("YYYY-MM-DD")),n=A()(n).add(1,"days");return a}},{key:"getMonthDateRange",value:function(e,t){var a=A()([e,t-1]);return{start:a,end:A()(a).endOf("month")}}},{key:"createDays",value:function(){var e=this.state.current+"/01/"+parseInt(A()(new Date).format("Y")),t=(parseInt(A()(new Date(e)).format("M")),A()(new Date(e)).daysInMonth(),parseInt(A()(new Date(e)).format("Y"))),a=parseInt(A()(new Date(e)).format("M")),n=this.getMonthDateRange(t,a),r=n.start,s=n.end,c=this.getDates(r,s),o=[],i={name:A()(new Date(e)).format("MMMM"),days:c};o.push(i),this.setState({months:o,ready:!0})}},{key:"render",value:function(){var e=this;return this.state.hasError?r.a.createElement("h1",null,"Something went wrong."):r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{id:"Calendar",className:"flex -mt3"},r.a.createElement("div",{className:"flex flex-column mb2 pa0 br1 "},r.a.createElement("div",{className:"calendar flex flex-row-ns flex-column flex-wrap- justify-between col--3 pt3  "},this.state.months.map(function(t,a){return r.a.createElement("div",{key:a,id:t.name,className:"calendar-month flex flex-column flex-wrap flex--auto w-100 "},r.a.createElement("div",{id:"Calendar-header",className:(e.props.profile?" br2 ":" round- br3 ")+("square-slim"===e.props.headerType?" w-100 flex flex-row b-b b--black-10 justify-between bg-white- br2- overflow-hidden bs-b ":" -round flex flex-row justify-between bb b--black-05 bg-white- mb4 ")},r.a.createElement("div",{className:"vh10 flex flex-row justify-between flex-wrap w-100 ph4- pv2- f4 fw6 black-70"},r.a.createElement("div",{onClick:e.prev,className:"w-40 pointer flex flex-row items-center justify-start pv2 pl2 pr3 pv0 f5 fw6 black-20 hover-black-50"},r.a.createElement("div",{className:"flex items-center justify-center w2 h2 mr2 br3 bg-black-05 -hover-bg-black-10 overflow-hidden"},r.a.createElement(P.a,{icon:"chevron-left",iconSize:15,className:"white pa2 hover-black-"})),r.a.createElement("span",null,"prev")),r.a.createElement("div",{className:"w-20 flex flex-row flex-wrap pv0 ph3 f5 fw6 black items-center justify-center"},r.a.createElement("span",{className:"black-30 fw5"},A()(new Date).format("Do")),r.a.createElement("span",{className:" black fw6 f3 ph3"},e.state.currentMonthString),r.a.createElement("span",{className:" black-30 fw5"},e.state.year)),r.a.createElement("div",{onClick:e.next,className:"w-40 pointer flex flex-row items-center justify-end pv2 pl2 pr3 pv0 f5 fw6 black-20  hover-black-50"},r.a.createElement("span",null,"next"),r.a.createElement("div",{className:"flex items-center justify-center w2 h2 ml2 br3 bg-black-05 -hover-bg-black-10 overflow-hidden"},r.a.createElement(P.a,{icon:"chevron-right",iconSize:15,className:"white pa2 hover-black-"}))))),r.a.createElement("div",{className:"calendar-days-list flex flex-row col-7 flex-wrap -bl -bt -b--black-05"},t.days.map(function(t,n){return r.a.createElement("div",{onClick:function(){return e.onSelectSlot({day:t,index:a})},className:" pr3 pl3 pv3 pt3  flex flex-column "},r.a.createElement("div",{style:(z.e.mobile(),{height:"200px"}),onMouseEnter:function(){e.setState({contextMenuOpen:n})},key:n,className:((new Date).toLocaleDateString()===new Date(A()(t)).toLocaleDateString()?" ba bw2 b--black-05 ":"  ")+(t.filled?" filled bg-green ":" ")+"   calendar-day flex flex-column flex-wrap -ba round- br3 pa3 -b--black-05 h4-  relative hover-bg-white-50 hover-scale-up -hover-scale-down-slide-up pointer hover-black black-20 trans-a justify-end items-end overflow-hidden"},r.a.createElement("span",{className:"calendar-day-label trans-s pa3 absolute top-0 right-0 f3 fw3 black-20- raleway relative"},n+1),r.a.createElement("div",{className:"calendar-day-buttons absolute top-0 left-0  flex flex-row ph2 pv2"},r.a.createElement("div",{onClick:function(){return e.props.onSelectSlot(t)},className:"flex -insert-event-button -trans-a -pa3"})),r.a.createElement("div",{className:("one"===e.state.style?" flex-row ":"two"===e.state.style?" flex-row ":" flex-column w-100 flex-wrap ")+" flex items-end justify-end flex-wrap trans-a "},e.props.ready&&e.state.projectsWithDates.map(function(a,n){return a.dates.filter(function(e){return e===t}).length>0&&r.a.createElement(Lt.a,{placement:"topLeft",title:a.title},r.a.createElement("div",{onClick:function(n){return e.props.onSelectEvent({e:n,data:{event:a,day:t}})},style:{backgroundImage:null===e.projectImage(a)?Bt.generate(a.title).toDataUrl():'url("'+e.projectImage(a)+'")'},className:("one"===e.state.style?" calendar-event-block mh1 w1- h1- ml2- -w1 -h3 -ml2 ":"two"===e.state.style?" calendar-event-block lg w2- h2- mh1 ":" h1- w-100 ")+" hover-slide-up trans-b bg-cover bg-center br2 -round -bg-green mt2"},e.checkForNewEntry(a.id)?r.a.createElement("div",{className:"-scale-up-center -calendar-event-block-new-entry "}):null,r.a.createElement(r.a.Fragment,null)))}))))})))})))))}}]),t}(r.a.Component),_t=Ft;Ft.contextType=Pe;r.a.Component,a(141),xe.a.Step,r.a.Component;var Vt=a(788),Ut=(xe.a.Step,Vt.a.Option,function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).handleStartDateChange=function(e){window.log.warn("start date",e.toString()),a.setState({projectDate:e.toString()})},a.handleEndDateChange=function(e){window.log.warn("end date",e.toString()),a.setState({projectEndDate:e.toString()})},a.state={current:0,projectType:"",projectDate:new Date,projectEndDate:new Date,formData:null,ready:!1,submitLoading:!1},a.rate=r.a.createRef(),a.projectName=r.a.createRef(),a.saveStep1=a.saveStep1.bind(Object(v.a)(a)),a.handleChange=a.handleChange.bind(Object(v.a)(a)),a.handleDateChange=a.handleDateChange.bind(Object(v.a)(a)),a.reset=a.reset.bind(Object(v.a)(a)),console.log("OnboardingScreen props",e),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"reset",value:function(){window.localStorage.clear(),window.location.href="/"}},{key:"handleDateChange",value:function(e){console.log(e),this.setState({projectDate:e.toString()})}},{key:"handleChange",value:function(e){console.log(e.target.value),this.setState({projectType:e.target.value})}},{key:"saveStep1",value:function(e){var t=this;e.preventDefault(),this.setState({submitLoading:!0});var a={location:z.a.get("location"),projectType:this.state.projectType,projectName:this.projectName.current.value,projectDate:this.state.projectDate,projectEndDate:this.state.projectEndDate};z.a.set("step1Data",a),setTimeout(function(){t.props.saveStep1(a),t.props.next(),t.setState({submitLoading:!1})},1e3)}},{key:"componentDidMount",value:function(){this.setState({formData:z.a.get("step1Data"),ready:!0})}},{key:"render",value:function(){var e=this;return r.a.createElement("form",{onSubmit:this.saveStep1},r.a.createElement("div",{id:"StepsFormProduction",className:"flex flex-column mb3"},r.a.createElement("div",{className:"flex flex-column mt0",id:""},r.a.createElement("div",{className:"form-row flex flex-column pb3 pt4"},this.state.ready&&r.a.createElement("div",{className:"form-row flex flex-column"},r.a.createElement("div",{className:"form-row flex flex-row pt4 items-center"},r.a.createElement("label",{className:"f5 fw6 black-20 pb3- tl mr4 w-30"},"Project Name"),r.a.createElement("input",{ref:this.projectName,required:!0,type:"text",defultValue:this.state.formData.projectName,className:"flex flex-column ph4 pv3 bn br2 -round bg-black-05- white- black-50 f4 fw5 bs-a- w-100 bg-white"})),r.a.createElement("div",{className:"form-row flex flex-row pt4 items-center"},r.a.createElement("label",{className:"w-30 f5 fw6 black-20 pb3- tl mr4 w-"},"Project Location"),r.a.createElement(je,{location:this.state.location,findLocation:this.findLocation,fetchProjects:this.fetchProjects2,defultValue:this.state.formData.location})),r.a.createElement("div",{className:"form-row flex flex-row pt4 items-center"},r.a.createElement("label",{className:"w-30 f5 fw6 black-20 pb3- tl mr4 w-"},"Project Type"),r.a.createElement("select",{className:"flex flex-column ph4 pv3 bn br2 -round bg-white white- black-50 f4 fw5 bs-a- w-100",required:!0,defultValue:this.state.formData.projectType,onChange:function(t){return e.handleChange(t)}},r.a.createElement("option",{value:""},"Select"),r.a.createElement("option",{value:"commercial"},"Commercial"),r.a.createElement("option",{value:"film"},"Film"),r.a.createElement("option",{value:"documentary"},"Documentary"))),r.a.createElement("div",{className:"form-row flex flex-column justify-between w-100"},r.a.createElement("div",{className:" form-row flex flex-row pt4 items-center mr2-"},r.a.createElement("span",{className:"w-30 f5 fw6 black-20 pb3- tl mr4 w-"},"Start Date"),r.a.createElement(Ae.a,{required:!0,minDate:new Date("01/01/1940"),maxDate:new Date("01/01/2030"),defultValue:this.state.formData.projectDate,onChange:this.handleStartDateChange,className:"flex flex-column ph4 pv3- bn br2 -round bg-black-05- white- black-50 f4 fw5 bs-a- w-100 bg-white"})),r.a.createElement("div",{className:" form-row flex flex-row pt4 items-center ml2-"},r.a.createElement("span",{className:"w-30 f5 fw6 black-20 pb3- tl mr4 w-"},"Completion Date"),r.a.createElement(Ae.a,{required:!0,minDate:new Date("01/01/1940"),maxDate:new Date("01/01/2030"),defaultValue:A()(new Date),defultValue:this.state.formData.projectEndDate,onChange:this.handleEndDateChange,className:"flex flex-column ph4 pv3- bn br2 -round bg-black-05- white- black-50 f4 fw5 bs-a- w-100 bg-white"}))))))),r.a.createElement("div",{className:"Buttons flex flex-row justify-between mt4 mw5- center w-100"},r.a.createElement("div",{className:"flex flex-column w-100"},r.a.createElement("button",{type:"submit",className:"br1- round bs-b bg-black-10 ph3 pv3 pointer bn relative w-100  "},r.a.createElement("span",{className:"f4 fw6 black-30- white -white pv2 flex items-center justify-center"},this.state.submitLoading&&r.a.createElement("div",{className:"pv2"},r.a.createElement("div",{className:"sp sp-3balls"})),!this.state.submitLoading&&"Next")),this.props.current>0&&r.a.createElement("div",{className:"flex flex-column w-100 "},r.a.createElement("span",{onClick:this.props.prev,className:"f6 fw5 black-30 pv2 flex items-center justify-center"},"go back to previous step")),r.a.createElement("div",{className:"flex flex-row w-100"},r.a.createElement("div",{onClick:this.reset,className:"pointer f5 fw6 black-50 pv2 mt2 mv4 ba b--black-05 ph3"},"Reset")))))}}]),t}(r.a.Component)),Jt=(xe.a.Step,[{title:"Select"},{title:"Unit Production Manager"},{title:"Line Producer"},{title:"Production Manager"},{title:"Director"},{title:"Assistant Director"},{title:"2nd Assistant Director"},{title:"Continuity Person"},{title:"Cinematographer"},{title:"Gaffer"},{title:"Camera Operator"},{title:"Assistant Cameraman"},{title:"Film Loader"},{title:"Steadycam Operator"},{title:"Production Sound Mixer"},{title:"Boom Operator"},{title:"Key Grip"},{title:"Dolly Grip"},{title:"Best Boy"},{title:"Visual Effects Director"},{title:"FX Coordinator"},{title:"Property Master"},{title:"Leadman"},{title:"Set Dresser"},{title:"Costumer"},{title:"Make-up Artist"},{title:"Body Make-up Artist"},{title:"Hairdresser"},{title:"Production Assistant"},{title:"Production Office Coordinator"},{title:"Unit Publicist"},{title:"Second Unit Director"},{title:"Production Caterer"},{title:"Craft Services"},{title:"Transportation Coordinator"},{title:"Day Player"}]),zt=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={current:0,cuisines:[],cuisines_:[{}],role:"",skills:[],skills_:[],value:"",buttonLoading:!1,submitLoading:!1},console.log("OnboardingScreen props",e),a.insertSkill=a.insertSkill.bind(Object(v.a)(a)),a.addSkillInput=a.addSkillInput.bind(Object(v.a)(a)),a.saveStep3=a.saveStep3.bind(Object(v.a)(a)),a.specOnChange=a.specOnChange.bind(Object(v.a)(a)),console.log("OnboardingScreen props",e),a.reset=a.reset.bind(Object(v.a)(a)),a.role=r.a.createRef(),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"reset",value:function(){window.localStorage.clear(),window.location.href="/"}},{key:"saveStep3",value:function(){var e=this;this.setState({buttonLoading:!0});var t={positions:this.state.skills};console.log("saveStep3 data ",t),setTimeout(function(){e.props.saveStep3(t),e.props.next(),e.setState({buttonLoading:!0}),document.querySelector("body").scroll({top:0,left:0,behavior:"smooth"}),document.querySelector("#OnboardingScreen").scroll({top:0,left:0,behavior:"smooth"})},1e3)}},{key:"insertSkill",value:function(e){var t=this.state.skills;t.push(e),this.setState({skills:t})}},{key:"addSkillInput",value:function(){var e=this.state.skills_;e.push({}),this.setState({skills_:e})}},{key:"specOnChange",value:function(e){var t=e.e,a=e.index,n=this.state.skills;n[a]=t.target.value,this.setState({skills:n}),console.log(this.state)}},{key:"componentDidMount",value:function(){if(this.props.project&&this.props.project.hasOwnProperty("positions")){var e=this.props.project.positions,t=[],a=[],n=!0,r=!1,s=void 0;try{for(var c,o=e[Symbol.iterator]();!(n=(c=o.next()).done);n=!0){var i=c.value;t.push(i.title),a.push({})}}catch(l){r=!0,s=l}finally{try{n||null==o.return||o.return()}finally{if(r)throw s}}console.log(a,t),this.setState({skills:t,skills_:a})}}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"StepsForm"},r.a.createElement("div",{className:"flex flex-column ma0",id:""},r.a.createElement("div",{className:"form-row flex flex-column pb3 pt2"},r.a.createElement("div",{className:"form-row flex flex-column"},r.a.createElement("div",{className:"form-row flex flex-row items-end pt4"},r.a.createElement("label",{className:"f5 fw6 black-50 tl mr4 pb4 w-30"},"Crew Needed"),r.a.createElement("div",{className:"flex flex-column flex-wrap w-100"},this.state.skills_.map(function(t,a){return r.a.createElement("div",{className:"flex pb3 w-100"},r.a.createElement("select",{onChange:function(t){return e.specOnChange({e:t,index:a})},value:e.state.skills[a],className:"w-100 flex flex-row ph4 pv3 bn round -br1 bg-white black-50 f4 fw5 -bs-a"},Jt.map(function(e,t){return r.a.createElement("option",{value:e.title},e.title)})))}))),r.a.createElement("div",{className:"form-row flex flex-row pt2"},r.a.createElement("button",{onClick:this.addSkillInput,className:"pointer ba b--black-05 br1- round -bg-black-10- bg-transparent f5 fw6 white- black-60 pv3 ph3 w-100"},"Add +"))))),r.a.createElement("div",{className:"Buttons flex flex-row justify-center mt4"},r.a.createElement("div",{className:"flex flex-column w-100"},r.a.createElement("button",{onClick:this.saveStep3,className:" round -br1 bs-b bg-black-10 ph3 pv3 pointer bn relative w-100   "},r.a.createElement("span",{className:"f4 fw6 black-30- white -white pv2 flex items-center justify-center"},!this.state.buttonLoading&&"Next",this.state.buttonLoading&&r.a.createElement("div",{className:"flex mr3 pv2"},r.a.createElement("div",{className:"sp sp-3balls"})))),this.props.current>0&&r.a.createElement("div",{className:"flex flex-column w-100 "},r.a.createElement("span",{onClick:this.props.prev,className:"f6 fw5 black-30 pt3 ttu flex items-center justify-center"},"go back to previous step")),r.a.createElement("div",{className:"flex flex-row items-center justify-center w-100"},r.a.createElement("div",{onClick:this.reset,className:"pointer f5 fw6 black-50 pv2 mt2 mv4 ba b--black-05 ph3"},"Reset")))))}}]),t}(r.a.Component),Yt=xe.a.Step,Gt=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={current:0,location:z.a.get("location"),currency:z.a.get("baseCurrency"),grade:0,mobileNumber:"",bio:"",specialties:[],cuisines:[],firstname:"",lastname:"",positions:[]},console.log("OnboardingScreen props",e),a.prev=a.prev.bind(Object(v.a)(a)),a.next=a.next.bind(Object(v.a)(a)),a.saveStep1=a.saveStep1.bind(Object(v.a)(a)),a.saveStep2=a.saveStep2.bind(Object(v.a)(a)),a.saveStep3=a.saveStep3.bind(Object(v.a)(a)),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"saveStep1",value:function(e){var t=e.location,a=e.projectType,n=e.projectDate,r=e.projectEndDate,s=e.projectName;this.setState({location:t,projectType:a,projectDate:n,projectEndDate:r,projectName:s}),document.querySelector("body").scroll({top:0,left:0,behavior:"smooth"}),document.querySelector("#OnboardingScreen").scroll({top:0,left:0,behavior:"smooth"})}},{key:"saveStep2",value:function(e){var t=e.mobileNumber,a=e.bio,n=e.grade,r=e.firstname,s=e.lastname,c=e.dob,o=e.gender;return this.setState({mobileNumber:t,bio:a,grade:n,firstname:r,lastname:s,gender:o,dob:c}),this.props.saveOnboardingData({location:this.state.location,mobileNumber:this.state.mobileNumber,bio:this.state.bio,positions:this.state.positions,grade:this.state.grade,firstname:this.state.firstname,lastname:this.state.lastname,gender:this.state.gender,dob:this.state.dob})}},{key:"saveStep3",value:function(e){var t=e.positions;return this.setState({positions:t}),this.props.saveOnboardingData({location:this.state.location,projectName:this.state.projectName,projectDate:this.state.projectDate,projectEndDate:this.state.projectEndDate,projectType:this.state.projectType,positions:t})}},{key:"next",value:function(){var e=this.state.current+1;this.setState({current:e})}},{key:"prev",value:function(){var e=this.state.current-1;this.setState({current:e})}},{key:"componentDidMount",value:function(){console.log("steps",this.props)}},{key:"render",value:function(){var e;e=[{title:"Project Info",content:"First-content"},{title:"Crew",content:"Second-content"}];var t=this.state.current;return r.a.createElement("div",{className:"flex flex-column flex-auto overflow-visible"},r.a.createElement(r.a.Fragment,null,r.a.createElement(xe.a,{current:t},e.map(function(e){return r.a.createElement(Yt,{key:e.title,title:e.title})})),r.a.createElement("div",{className:"steps-content"},0===this.state.current&&r.a.createElement(Ut,{type:this.props.type,prev:this.prev,next:this.next,current:this.state.current,saveStep1:this.saveStep1}),1===this.state.current&&r.a.createElement(zt,{type:this.props.type,prev:this.prev,next:this.next,current:this.state.current,saveStep3:this.saveStep3}),2===this.state.current&&r.a.createElement("div",{className:"flex flex-column w-100 "},r.a.createElement("span",{onClick:this.prev,className:"f6 fw5 black-30 pt3 ttu flex items-center justify-center"},"go back to previous step")))))}}]),t}(r.a.Component),Ht=(a(49),function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={ready:!0,newAccountType:"",accountTypeIsSet:!1,lat:"",long:"",city:"",location:{},country:"",countrySet:!1,redirectProfile:!1,crew:[],crew_:[],users:[],isOpen:!1,activeUser:{},dialogTitle:"",drawerVisible:!1,searchLoading:!1},a.setAccountType=a.setAccountType.bind(Object(v.a)(a)),a.saveOnboardingData=a.saveOnboardingData.bind(Object(v.a)(a)),a.openDialog=a.openDialog.bind(Object(v.a)(a)),a.closeDialog=a.closeDialog.bind(Object(v.a)(a)),a.avatar=a.avatar.bind(Object(v.a)(a)),console.log("OnboardingScreen props",e),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"openDialog",value:function(e){console.log(e);var t=e.item;this.setState({isOpen:!0,activeUser:t,dialogTitle:t.profile.name.first+" "+t.profile.name.last})}},{key:"closeDialog",value:function(){this.setState({isOpen:!1})}},{key:"reset",value:function(){window.localStorage.clear(),this.context.history.push("/"),window.location.reload()}},{key:"avatar",value:function(e){return e&&e.profile&&e.profile.picture.length>0?e.profile.picture:"/img/placeholder.png"}},{key:"saveOnboardingData",value:function(){var e=Object(p.a)(f.a.mark(function e(t){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({searchLoading:!0}),console.log("saveOnboardingData data",t),t.location,t.projectName,t.projectDate,t.projectEndDate,t.projectType,a=t.positions,t.hasBeenUploaded=!1,localStorage.setItem("crewBuilder",JSON.stringify(t)),e.next=7,z.d.fetchUsers({self:this,positions:a});case 7:e.sent;case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"setAccountType",value:function(e){var t=e.type;console.log("setAccountType",e),this.setState({newAccountType:t,accountTypeIsSet:!0})}},{key:"componentDidMount",value:function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[[ OnboardingScreen props ]]",this.props),e.next=3,z.d.getGeoLocation({self:this});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"flex flex-column ma0 w-100 z-99 relative",id:""},r.a.createElement("div",{className:"CrewFinder flex flex-row justify-between "}),r.a.createElement("div",{id:"OnboardingScreen",className:"fixed top-10vh left-0 flex flex-column pa4 bg-near-white vh-100 w-100 overflow-scroll"},r.a.createElement("div",{className:"flex flex-column items-center justify-start pt0 w-100 h-100"},r.a.createElement("div",{className:"flex flex-column w-100",id:""},r.a.createElement("div",{className:"form-row flex flex-column pb3 w-100"},r.a.createElement("div",{className:"flex flex-column mw7 center w-100"},r.a.createElement("div",Object(Q.a)({id:"SectionTitle",className:"flex flex-column ma0 w-100"},"id",""),r.a.createElement("div",{className:"flex flex-column justify-center items-center pb4"},r.a.createElement("h1",{className:"  f3 fw6 black-80 mt5 mb2 tc"},"createProject"===this.props.type?"Create a Project":"Find Crew"),r.a.createElement("h1",{className:" f4 fw4 black-50 tc raleway"},"Complete the wizard below to create a project and build a crew list")),"createProject"===this.props.type&&r.a.createElement("div",{className:"flex flex-row items-center justify-center pb3 w-100"},r.a.createElement("div",{onClick:this.props.toggleCreateProject,className:"pointer f5 fw6 black-50 pv2 ba b--black-05 ph3"},"Go back to projects"))),r.a.createElement(Gt,{type:this.props.type,newAccountType:this.state.newAccountType,accountTypeIsSet:this.state.accountTypeIsSet,setAccountType:this.setAccountType,saveOnboardingData:this.saveOnboardingData}),this.state.searchLoading&&r.a.createElement("div",{className:"flex flex-column pv5 ph3 items-center"},r.a.createElement("div",{className:"sp sp-3balls"})),r.a.createElement("div",{className:"crew-list flex flex-column mt3"},!this.state.searchLoading&&0===this.state.crew_.length&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"",className:"flex flex-row ph0 pb3 items-center justify-center"},r.a.createElement("span",{className:"f6 fw5 black-50 pv2 ph3 mv4 ba b--black-05"},"There are no users that match your search")),r.a.createElement("div",null)),!this.state.searchLoading&&this.state.crew_.map(function(t,a){return r.a.createElement("div",{className:"flex flex-column pt3 pb4 bb b--black-05 bw1 mb2"},r.a.createElement("div",{className:"flex flex-row f5 fw5 black-40 pb3"},t.position," ",r.a.createElement("span",{className:"bg-black-10 white f7 fw6 br1 ph2 pv1 mb0 ml2"},t.users.length)),r.a.createElement("div",{className:"flex flex-row"},t.users.map(function(t,a){return r.a.createElement("div",{onClick:function(){return e.props.openDialog({item:t})},className:" pointer flex flex-column pv2 pr3 items-center justify-center"},r.a.createElement("div",{style:{width:"100px",height:"120px",borderRadius:"5px",backgroundImage:"url("+t.profile.picture+")"},className:"cover bg-center"}),r.a.createElement("div",{className:" flex flex-row pt2 black-60"},r.a.createElement("div",{className:" flex f6 fw6 "},t.profile.name.first),r.a.createElement("div",{className:" flex f6 fw6 ml1"},t.profile.name.last)))})))})),r.a.createElement("div",{className:"crew-list-save flex flex-column mt2"},r.a.createElement("div",{className:"flex flex-row justify-center w-100"},r.a.createElement("button",{onClick:this.props.saveAndCreateAccount,id:"saveAndCreateAccount",className:"round -br1 bs-b bg-black-10 ph3 pv3 pointer bn relative w-100  "},r.a.createElement("span",{className:"f4 fw6 black-30- white -white pv2 flex items-center justify-center"},!this.props.saveAndCreateAccountButtonLoading&&r.a.createElement(r.a.Fragment,null,"crewBuilder"===this.props.type?"Save & Create Account ":"Create Project"),this.props.saveAndCreateAccountButtonLoading&&r.a.createElement("div",null,r.a.createElement("div",{className:"sp sp-3balls"}))))))))))))}}]),t}(r.a.Component));Ht.contextType=Pe;var qt=function(e){function t(e){return Object(m.a)(this,t),Object(h.a)(this,Object(b.a)(t).call(this,e))}return Object(w.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{onClick:this.props.refresh,className:(this.props.dashboard?" top12vh-":z.a.get("isMobile")?" top-6vh- ":"  ")+" absolute top-0 right-0 pointer black-20- hover-black-40 flex flex-row items-center z-99 justify-center h-100 ph3 "},r.a.createElement("span",{className:"mr2 f5 fw6 black-20 raleway"},this.props.ready?"reload":" ")," ",this.props.ready?r.a.createElement(P.a,{icon:"refresh",iconSize:15,className:"black-20"}):r.a.createElement("div",null,r.a.createElement("div",{className:"mt2 mr4 sp sp-3balls-small"})))}}]),t}(r.a.Component),Wt=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).showModal=function(){a.setState({insertModalVisible:!0})},a.handleOk=function(e){console.log(e),a.setState({insertModalVisible:!1})},a.handleCancel=function(e){console.log(e),a.setState({insertModalVisible:!1})},a.state={ready:!1,subscribedProjectsReady:!1,ownProjectsReady:!1,isOpen:!1,dialogType:"",dialogTitle:"",subscribedProjects:[],projects:[],ownProjects:[],activeButton:{},buttons:[],filters:[],filter:"",buttonLoading:!1,favourites:[],crew:[],addToCrewButtonLoading:!1,addToFavButtonLoading:!1,saveAndCreateAccountButtonLoading:!1,activeUser:{},createProject:!1},a.fetchProjects=a.fetchProjects.bind(Object(v.a)(a)),a.filterProjects=a.filterProjects.bind(Object(v.a)(a)),a.filter=a.filter.bind(Object(v.a)(a)),a.openDialog=a.openDialog.bind(Object(v.a)(a)),a.closeDialog=a.closeDialog.bind(Object(v.a)(a)),a.refresh=a.refresh.bind(Object(v.a)(a)),a.submitProject=a.submitProject.bind(Object(v.a)(a)),a.saveAndCreateAccount=a.saveAndCreateAccount.bind(Object(v.a)(a)),a.addToCrew=a.addToCrew.bind(Object(v.a)(a)),a.addToFavourites=a.addToFavourites.bind(Object(v.a)(a)),a.toggleCreateProject=a.toggleCreateProject.bind(Object(v.a)(a)),console.log("[[ Home props ]]",e),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"toggleCreateProject",value:function(){this.setState({createProject:!this.state.createProject})}},{key:"addToCrew",value:function(e){var t=this;this.setState({addToCrewButtonLoading:!0}),console.log(e);var a=new Set(this.state.crew);a.add({id:e.id,position:e.position});var n=Array.from(a);console.log("Crew",n),this.setState({crew:n}),setTimeout(function(){t.setState({addToCrewButtonLoading:!1,isOpen:!1})},1e3)}},{key:"addToFavourites",value:function(e){var t=this;this.setState({addToFavButtonLoading:!0}),console.log(e);var a=new Set(this.state.favourite);a.add({id:e.id,position:e.position});var n=Array.from(a);console.log("ShortList",n),this.setState({favourites:n}),setTimeout(function(){t.setState({addToFavButtonLoading:!1})},1e3)}},{key:"saveAndCreateAccount",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t,a,n,r,s=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({saveAndCreateAccountButtonLoading:!0}),t=this.state.favourites,a=this.state.crew,(n=JSON.parse(localStorage.getItem("crewBuilder"))).shortlist=t,n.invited=a,n.accepted=[],r={shortlist:t,invited:a,project:n},localStorage.setItem("crewBuilder",JSON.stringify(n)),localStorage.setItem("onboardingProfile",JSON.stringify(r)),e.next=12,z.c.createProject({self:this,project:n,refresh:this.refresh,message:Rt.a}).then(function(e){var t=z.a.get("crewBuilder");t.hasBeenUploaded=!0,z.a.store({label:"crewBuilder",value:t}),s.setState({saveAndCreateAccountButtonLoading:!1,createProject:!1}),s.refresh(),Rt.a.destroy()});case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"submitProject",value:function(){var e=Object(p.a)(f.a.mark(function e(t){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.project,e.next=3,z.a.submitProject({self:this,project:a});case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"refresh",value:function(){this.setState({ready:!1}),this.fetchProjects()}},{key:"setButtons",value:function(){var e=this,t=[{title:"All",function:function(){return e.filter({filter:"all",button:0})}},{title:"Completed",function:function(){return e.filter({filter:"completed",button:1})}},{title:"Current",function:function(){return e.filter({filter:"current",button:2})}},{title:"Pending",function:function(){return e.filter({filter:"pending",button:3})}}],a=["all","completed","current","pending"];this.setState({buttons:t,activeButton:t[0],filters:a,filter:a[0]})}},{key:"filter",value:function(e){var t=e.filter,a=e.button;console.log("filter ",e),this.setState({filter:t,activeButton:a}),this.filterProjects(t)}},{key:"fetchProjects",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.fetchSubscribedProjects({self:this,userId:z.a.get("account").user.id}).then(function(){var e=Object(p.a)(f.a.mark(function e(a){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({subscribedProjectsReady:!0,subscribedProjects:a}),e.next=3,z.a.fetchOwnProjects({self:t});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).then(function(e){t.setState({ownProjectsReady:!0,ownProjects:e,activeProject:e[0],ready:!0})});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"filterProjects",value:function(e){console.log(" "),console.log("filter",e),console.log(" ");var t=null!==typeof localStorage.getItem("ownProjects")&&JSON.parse(localStorage.getItem("ownProjects"))||[],a=null!==typeof localStorage.getItem("subscribedProjects")&&JSON.parse(localStorage.getItem("subscribedProjects"))||[],n=null!==typeof localStorage.getItem("rojects")&&JSON.parse(localStorage.getItem("projects"))||[],r=A()(new Date);if(this.setState({ready:!1}),"current"===e){var s=n.filter(function(e){return A()(e.start_date).isBefore(r)&&A()(e.deadline).isAfter(r)}),c=t.filter(function(e){return A()(e.start_date).isBefore(r)&&A()(e.deadline).isAfter(r)}),o=a.filter(function(e){return A()(e.start_date).isBefore(r)&&A()(e.deadline).isAfter(r)});console.log(" "),console.log("filtered projects ",s),console.log(" "),this.setState({projects:s,ownProjects:c,subscribedProjects:o,ready:!0,subscribedProjectsReady:!0,ownProjectsReady:!0})}if("pending"===e){var i=n.filter(function(e){return A()(e.start_date).isAfter(r)}),l=t.filter(function(e){return A()(e.start_date).isAfter(r)}),u=a.filter(function(e){return A()(e.start_date).isAfter(r)});console.log(" "),console.log("filtered projects ",u),console.log(" "),this.setState({projects:i,ownProjects:l,subscribedProjects:u,ready:!0,subscribedProjectsReady:!0,ownProjectsReady:!0})}if("completed"===e){var f=n.filter(function(e){return A()(e.deadline).isBefore(r)}),p=t.filter(function(e){return A()(e.deadline).isBefore(r)}),m=a.filter(function(e){return A()(e.deadline).isBefore(r)});console.log(" "),console.log("filtered projects ",f),console.log(" "),this.setState({projects:f,ownProjects:p,subscribedProjects:m,ready:!0,subscribedProjectsReady:!0,ownProjectsReady:!0})}"all"===e&&this.setState({projects:n,ownProjects:t,subscribedProjects:a,ready:!0,subscribedProjectsReady:!0,ownProjectsReady:!0})}},{key:"addRecentWorkProject",value:function(){this.toggleDialog({type:"addPortfolioProject",title:"Add a Project"})}},{key:"openDialog",value:function(e){var t=e.item;console.log("active user",t),this.setState({isOpen:!this.state.isOpen,dialogType:"createProject",activeUser:t,dialogTitle:t.profile.name.first+" "+t.profile.name.last})}},{key:"closeDialog",value:function(){this.setState({isOpen:!1})}},{key:"showDrawer",value:function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.showDrawer({chef:t,self:this});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"hideDrawer",value:function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.hideDrawer({self:this});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"avatar",value:function(e){console.log("avatar ",e);var t=e;return t&&t.profile&&t.profile.picture.length?t.profile.picture:"/img/placeholder.png"}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"componentDidMount",value:function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.context.setPage({title:"My Projects",subtitle:"..."}),this.setButtons(),this.fetchProjects(),document.querySelector("body").scroll({top:0,left:0,behavior:"smooth"});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(De,null,function(t){return console.log("[[ OwnProfile <AccountContext.Consumer> ]]",t),r.a.createElement(k,null,r.a.createElement("section",{id:"MyProjects",className:(e.props.dashboard?"  ":" pa4 pb6 ")+" w-100 mw8 center mt3-  "},r.a.createElement("div",{className:"flex flex-column flex-row-ns justify-between mb4 mt3-"},z.a.get("isMobile")&&r.a.createElement("div",{id:"CreateProject",className:"flex flex-column w-20-ns w-100 items-end justify-end mb2 mt3"},r.a.createElement("button",{onClick:function(){return e.toggleCreateProject()},className:"br1- round bs-b bg-black-20 ph3 pv2 pointer bn relative w-100  "},r.a.createElement("span",{className:"f5 fw6 white pv1 flex items-center justify-center raleway"},e.state.buttonLoading?r.a.createElement(P.a,{icon:"loading",className:" absolute right-0 f4 black-60 mr2"}):r.a.createElement(P.a,{icon:"small-plus",iconSize:20,className:" f4 black-60- white  absolute right-0 mr3"})," Create a Project")))),!z.a.get("isMobile")&&r.a.createElement("section",{id:"ToolbarButtons",className:"flex flex-column mb3"},r.a.createElement("div",{className:"flex flex-row justify-between mb3"},r.a.createElement("div",{className:"flex flex-row flex-auto mw6 br2 overflow-hidden"},e.state.buttons.map(function(t,a){return r.a.createElement("button",{title:t.title,onClick:function(){return e.filter({filter:e.state.filters[a],button:t})},id:t.title,className:(a>0&&" bl b--black-05 ")+(e.state.activeButton.title===t.title?" bg-white-60 ":" bg-white ")+" flex flex-column pa0 mr3- pointer justify-center items-center flex-auto"},r.a.createElement("div",{id:"",className:"flex flex-row ph0 pv0 items-center justify-center"},r.a.createElement("span",{className:"f5 fw6 black-40 ph3 pv2"},t.title)))})),r.a.createElement("div",{id:"CreateProject",className:"flex flex-column w-20-ns w-100 items-end justify-end mb2"},r.a.createElement("button",{onClick:function(){return e.toggleCreateProject()},className:"br1- round bs-b bg-black-20 ph3 pv2 pointer bn relative w-100  "},r.a.createElement("span",{className:"f5 fw6 white pv1 flex items-center justify-center raleway"},e.state.buttonLoading?r.a.createElement(P.a,{icon:"loading",className:" absolute right-0 f4 black-60 mr2"}):r.a.createElement(P.a,{icon:"small-plus",iconSize:20,className:" f4 black-60- white  absolute right-0 mr3"})," Create a Project"))))),r.a.createElement("div",{className:"flex flex-column flex-row-ns col-2 justify-between"},r.a.createElement("div",{className:"flex flex-column mt4- w-50"},r.a.createElement("div",{id:"",className:"flex flex-column flex-row-ns ph0 pb3 items-start items-center-ns justify-start"},r.a.createElement("span",{className:"f5 fw6 black-50 pv2"},"Created Projects"),r.a.createElement("span",{className:"f6 fw5 black-30 pv0 pv2-ns flex items-center ml3-ns"},r.a.createElement(P.a,{icon:"info-sign",iconSize:15,className:"black-20 mr2"})," Projects you own")),e.state.ready&&e.state.ownProjectsReady?e.state.ownProjects.length>0?r.a.createElement(B,{projects:e.state.ownProjects,activeProject:e.state.activeProject,className:"trans-a",showDrawer:e.showDrawer,hideDrawer:e.hideDrawer,theme:t.theme,activeCurrency:t.activeCurrency,exchangeRate:t.exchangeRate}):r.a.createElement("div",{id:"",className:"flex flex-row ph0 mv4 items-center justify-start"},r.a.createElement("span",{className:"f6 fw5 black-50 pv2 ph3 ba b--black-05"},"No projects to show")):r.a.createElement("div",{className:"trans-a"},r.a.createElement(x.a,{active:!0}))),r.a.createElement("div",{className:"flex flex-column"},r.a.createElement("div",{id:"",className:"flex flex-column flex-row-ns ph0 pb3 items-start items-center-ns justify-start"},r.a.createElement("span",{className:"f5 fw6 black-50 pv2"},"Subscribed Projects"),r.a.createElement("span",{className:"f6 fw5 black-30 pv0 pv2-ns flex items-center ml3-ns"},r.a.createElement(P.a,{icon:"info-sign",iconSize:15,className:"black-20 mr2"})," Projects you crew for")),e.state.ready&&e.state.subscribedProjectsReady?e.state.subscribedProjects.length>0?r.a.createElement(B,{projects:e.state.subscribedProjects,activeProject:e.state.activeProject,className:"trans-a",showDrawer:e.showDrawer,hideDrawer:e.hideDrawer,theme:t.theme,activeCurrency:t.activeCurrency,exchangeRate:t.exchangeRate}):r.a.createElement("div",{id:"",className:"flex flex-row ph0 pb3 items-center justify-start"},r.a.createElement("span",{className:"f6 fw5 black-50 pv2 ph3 mv4 ba b--black-05"},"No projects to show")):r.a.createElement("div",{className:"trans-a"},r.a.createElement(x.a,{active:!0})))),z.a.get("isMobile")&&r.a.createElement("div",{className:"bg-white fixed bottom-7vh left-0 w-100 flex flex-row bs-b bb b--black-05"},e.state.buttons.map(function(t,a){return r.a.createElement("button",{title:t.title,onClick:function(){return e.filter({filter:e.state.filters[a],button:t})},id:"CV-button",className:(e.state.activeButton.title===t.title?" bg-black-05 fw6":" bg-white fw5 ")+" flex flex-column pa0 pointer justify-center flex-auto bl b--black-05"},r.a.createElement("div",{id:"",className:"flex flex-row ph0 pv0 items-center justify-center"},r.a.createElement("span",{className:"f5 -fw6 black ph3 pv3"},t.title)))})),e.state.createProject&&r.a.createElement(Ht,{toggleCreateProject:e.toggleCreateProject,type:"createProject",addToCrew:e.addToCrew,addToFavourites:e.addToFavourites,openDialog:e.openDialog,closeDialog:e.closeDialog,saveAndCreateAccount:e.saveAndCreateAccount,saveAndCreateAccountButtonLoading:e.state.saveAndCreateAccountButtonLoading}),r.a.createElement(Be.a,Object.assign({className:"bp3-light",onClose:e.toggleDialog,title:e.state.dialogTitle,onValueChange:e.onValueChange},e.state),e.state.isOpen&&r.a.createElement("div",{className:"flex flex-column pa4-"},r.a.createElement("div",{className:"flex flex-column"},r.a.createElement("div",{className:"flex flex-row"},r.a.createElement("section",{id:"Profile",className:"flex flex-column w-100 "},r.a.createElement("div",{className:"flex flex-row w-100"},r.a.createElement("div",{className:"flex flex-column w-100="},r.a.createElement("div",{style:{width:"160px",backgroundImage:"url("+e.avatar(e.state.activeUser)+")"},className:"pointer h-100   cover bg-center"})),r.a.createElement("div",{className:"flex flex-column justify-center w-100"},r.a.createElement("div",{className:"flex flex-column justify-center w-100 pa4"},r.a.createElement("div",{className:"f4 flex flex-column w-100"},r.a.createElement("span",{className:"fw6 black-80"},e.state.activeUser.profile.name&&e.state.activeUser.profile.name.first," ",e.state.activeUser.profile.name&&e.state.activeUser.profile.name.last),r.a.createElement("span",{className:"flex items-start fw4 ml0 mt2 f5 black-50"},e.state.activeUser.position)),r.a.createElement("div",{className:"flex flex-row flex-wrap w-100 pt3 black-60"},r.a.createElement("div",{className:"flex flex-column mr3 mb1"},r.a.createElement("span",{className:"f6 fw4 black-40"},"Age",r.a.createElement("span",{className:"fw6 ml2 black-60"},A()().diff(e.state.activeUser.profile.dob,"years")))),r.a.createElement("div",{className:"flex flex-column mr3 mb1"},r.a.createElement("span",{className:"f6 fw4 black-40"},"Gender",r.a.createElement("span",{className:"fw6 ml2 black-60"},e.state.activeUser.profile.gender&&e.state.activeUser.profile.gender||""))),r.a.createElement("div",{className:"flex flex-column mr3 mb1"},r.a.createElement("span",{className:"f6 fw4 black-40"},"Location",r.a.createElement("span",{className:"fw6 ml2 black-60"},e.state.activeUser.profile.location&&e.state.activeUser.profile.location.County||""))))),r.a.createElement("div",{className:"flex flex-row justify-center w-100"},r.a.createElement("button",{onClick:function(){return e.addToNetwork(e.state.activeUser)},className:"pointer pv3 flex-auto flex flex-row justify-center pa0 ma0 bg-white"},r.a.createElement("span",{className:"f5 fw6 black-40 mr2"},"Add to Network"),e.state.addToNetworkButtonLoading?r.a.createElement(Me.a,{size:15}):r.a.createElement(P.a,{icon:"small-plus",iconSize:15,className:"black-50"})),r.a.createElement("button",{onClick:function(){return e.addToCrew(e.state.activeUser)},className:"pointer pv3 flex-auto flex flex-row justify-center pa0 ma0 bg-white bl b--black-10"},r.a.createElement("span",{className:"f5 fw6 black-40 mr2 "},"Invite to Crew"),e.state.addToCrewButtonLoading?r.a.createElement(Me.a,{size:15}):r.a.createElement(P.a,{icon:"small-plus",iconSize:15,className:"black-50"}))))))))))))})}}]),t}(r.a.Component),Kt=Wt;Wt.contextType=Pe.Consumer;var Zt={crewInvite:function(e){return{title:"Invite",content:"You have been invited to crew for a project",data:e.data,icon:"",createdAt:new Date,read:!1,owner:e.owner}},crewInviteAccept:function(e){return{title:"Invite Accepted",content:e.data.sender.name.first+" "+e.data.sender.name.last+" has accepted your invitation to "+e.data.project.title,data:e.data,icon:"",createdAt:new Date,read:!1,owner:e.owner}},crewInviteReject:function(e){return{title:"Invite Rejected",content:e.data.sender.name.first+" "+e.data.sender.name.last+" has rejected your invitation to "+e.data.project.title,data:e.data,icon:"",createdAt:new Date,read:!1,owner:e.owner}},message:function(e){return{title:"New Message",content:e.content.substring(0,50),data:e.data,icon:"",createdAt:new Date,read:!1,owner:e.owner}},applicationReject:function(e){return{title:"Rejected",content:"Your application for crew has been rejected",data:e.data,icon:"",createdAt:new Date,read:!1,owner:e.owner}},applicationApprove:function(e){return{title:"Approved",content:"Your application for crew has been approved",data:e.data,icon:"",createdAt:new Date,read:!1,owner:e.owner}},crewApplication:function(e){return{title:"Crew Application",content:e.data.applicant.name.first+" "+e.data.applicant.name.last+" has applied as crew for "+e.data.project.title,data:e.data,icon:"",createdAt:new Date,read:!1,owner:e.owner}},connectRequest:function(e){return{title:"Connection Request",content:e.data.sender.name.first+" "+e.data.sender.name.last+" wants to connect",data:e.data,icon:"",createdAt:new Date,read:!1,owner:e.owner}},connectDeny:function(e){return{title:"Connection Ignored",data:e.data,content:e.content,icon:"",createdAt:new Date,read:!1,owner:e.owner}},addToChatGroup:function(e){return{title:"Chat Group Invite",content:e.data.sender.name.first+" "+e.data.sender.name.last+" has added you to a chat group",data:e.data,icon:"",createdAt:new Date,read:!1,owner:e.owner}},eventInvite:function(e){return{title:"Event Invite",content:e.data.sender.name.first+" "+e.data.sender.name.last+" has invited you to an event",data:e.data,icon:"",createdAt:new Date,read:!1,owner:e.owner}},eventInviteAccept:function(e){return{title:"Event Invite Accepted",content:e.data.sender.name.first+" "+e.data.sender.name.last+" has accepted your invite to event: "+e.data.event.title,data:e.data,icon:"",createdAt:new Date,read:!1,owner:e.owner}},eventInviteReject:function(e){return{title:"Event Invite Rjected",content:e.data.sender.name.first+" "+e.data.sender.name.last+" cannot attend your event "+e.data.event.title,data:e.data,icon:"",createdAt:new Date,read:!1,owner:e.owner}}};window.notificationTypes=Zt;var Xt=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).showModal=function(){a.setState({insertModalVisible:!0})},a.handleOk=function(e){a.setState({insertModalVisible:!1})},a.handleCancel=function(e){a.setState({insertModalVisible:!1})},a.state={ready:!1,notifications:[],activeNotification:null,showButtons:!0,filter:!1},a.fetchNotifications=a.fetchNotifications.bind(Object(v.a)(a)),a.refresh=a.refresh.bind(Object(v.a)(a)),a.showDrawer=a.showDrawer.bind(Object(v.a)(a)),a.handleOk=a.handleOk.bind(Object(v.a)(a)),a.hideDrawer=a.hideDrawer.bind(Object(v.a)(a)),a.filter=a.filter.bind(Object(v.a)(a)),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"filter",value:function(e){var t="new"!==e;this.setState({filter:t})}},{key:"fetchNotifications",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=z.a.get("account").user.id,e.next=3,z.c.fetchNotifications({userId:t,self:this});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"setReady",value:function(){this.setState({ready:!0})}},{key:"refresh",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({ready:!1}),setTimeout(Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchNotifications();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),1e3);case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"showDrawer",value:function(){var e=Object(p.a)(f.a.mark(function e(t){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.notification,console.log("show drawer ",a),this.setState({drawerReady:!0,docInfoVisible:!0,activeNotification:a}),a.read=!0,e.next=6,z.c.updateNotification({self:this,notification:a});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"hideDrawer",value:function(e){this.setState({drawerReady:!1,docInfoVisible:!1})}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidMount",value:function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.context.setPage({title:"Notifications",subtitle:"..."}),this.fetchNotifications();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(Pe.Consumer,null,function(t){return r.a.createElement(k,null,!e.state.ready&&!e.props.dashboard&&r.a.createElement(Le,null),r.a.createElement("section",{id:"Notifications",className:(!1!==e.props.padding?" pa4 ":"  ")+" w-100 mw8 center mt3- "},e.state.showButtons&&r.a.createElement("div",{className:" flex flex-row "},r.a.createElement("div",{className:"flex flex-row"},r.a.createElement("div",{onClick:function(){return e.filter("new")},className:(e.state.filter?" fw5 ":" fw6 ")+" pointer flex flex-column pv2 f5 black-30 mr2 "},"New"),r.a.createElement("div",{onClick:function(){return e.filter("read")},className:(e.state.filter?" fw6 ":" fw5 ")+" pointer flex flex-column pv2 f5 black-30 mr2 "},"Read"))),r.a.createElement("div",{className:"h2"}),e.state.ready&&!e.state.filter&&0===e.state.notifications.filter(function(e){return!1===e.read}).length&&r.a.createElement("div",{className:"flex flex-row ph0 pb3 items-center justify-start",id:""},r.a.createElement("span",{className:"f6 fw5 black-50 pv2 ph3 ba b--black-05"},"No new notifications")),e.state.ready&&e.state.notifications.length>0&&r.a.createElement(He,{notifications:e.state.notifications.filter(function(t){return t.read===e.state.filter}),activeNotification:e.state.activeNotification,showDrawer:e.showDrawer,setReady:e.setReady}),!e.state.ready&&r.a.createElement("div",{className:"trans-a"},r.a.createElement(x.a,{active:!0}),r.a.createElement(x.a,{active:!0})),e.state.ready?r.a.createElement(nt,{type:"info",notification:e.state.notification,doc:e.state.activeNotification,visible:e.state.docInfoVisible,hideDrawer:e.hideDrawer,className:"NotificationDetail",close:e.hideDrawer,refresh:e.refresh}):null))})}}]),t}(r.a.Component),$t=Xt;Xt.contextType=Pe;var Qt=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).componentDidMount=function(){console.log("FormBio mounted")},a.state={hasError:!1,buttonLoading:!1},a.bio=r.a.createContext(),a.submit=a.submit.bind(Object(v.a)(a)),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"submit",value:function(){var e=this;this.setState({buttonLoading:!0}),setTimeout(function(){e.props.submitBio(e.bio.current.value)},1e3)}},{key:"render",value:function(){return this.state.hasError?r.a.createElement("h1",null,"Something went wrong."):r.a.createElement("div",Object(Q.a)({className:"FormBio-wrapper"},"className","flex flex-column w-100"),r.a.createElement("div",{className:"flex-column flex w-100 pa4"},r.a.createElement("div",{className:" flex w-100"},r.a.createElement("textarea",{rows:5,type:"textarea",placeholder:"Enter your bio",ref:this.bio,defaultValue:this.props.value,className:"flex -round bn w-100 mb0 bn br1 pv3 ph4 black-50 f3 fw5"}))),r.a.createElement("div",{className:"form-row flex w-100 bg-white ph4 pv4 bs-b"},r.a.createElement("div",{onClick:this.submit,className:"bg-black-20 round tc w-100 pointer flex button flex-column ph3 pv3 ba- -b--black-10 f4 fw6 white -black-50"},this.state.buttonLoading&&r.a.createElement("div",{className:"flex flex-column pv2 items-center justify-center"},r.a.createElement("div",{className:"sp sp-3balls"})),!this.state.buttonLoading&&r.a.createElement("div",null,"Save"))))}}]),t}(r.a.Component),ea=a(782),ta=a(283),aa=(a(657),function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).componentDidMount=function(){console.log("FormBio mounted")},a.getDerivedStateFromProps=function(e,t){console.log("FormBio getDerivedStateFromProps",e,t)},a.getSnapshotBeforeUpdate=function(e,t){console.log("FormBio getSnapshotBeforeUpdate",e,t)},a.componentDidUpdate=function(){console.log("FormBio did update")},a.componentWillUnmount=function(){console.log("FormBio will unmount")},a.state={hasError:!1,dob:a.props.value.dob,gender:a.props.value.gender,location:a.props.value.location},a.firstname=r.a.createContext(),a.lastname=r.a.createContext(),a.role=r.a.createContext(),a.dob=r.a.createContext(),a.gender=r.a.createContext(),a.location=r.a.createContext(),a.submit=a.submit.bind(Object(v.a)(a)),a.handleDateChange=a.handleDateChange.bind(Object(v.a)(a)),a.handleRadioChange=a.handleRadioChange.bind(Object(v.a)(a)),a.setLocation=a.setLocation.bind(Object(v.a)(a)),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"setLocation",value:function(e){console.log("location",e),this.setState({location:e})}},{key:"handleRadioChange",value:function(e){console.log(e.target.value),this.setState({gender:e.target.value})}},{key:"handleDateChange",value:function(e){console.log(e),this.setState({dob:e.toString()})}},{key:"submit",value:function(){var e={firstname:this.firstname.current.value,lastname:this.lastname.current.value,role:this.role.current.value,dob:this.state.dob,gender:this.state.gender,location:this.state.location};this.props.submitProfile(e)}},{key:"componentDidCatch",value:function(e,t){}},{key:"render",value:function(){return this.state.hasError?r.a.createElement("h1",null,"Something went wrong."):r.a.createElement("div",{id:"FormProfile",className:"flex flex-column items-center w-100"},r.a.createElement("div",{className:"flex-column flex w-100 mh-400 overflow-auto pa5"},r.a.createElement("div",{className:" flex flex-row flex flex-row items-center w-100 mb4 items-center w-100 mb"},r.a.createElement("span",{className:"f5 fw5 black-50 w-30 pr3"},"First Name"),r.a.createElement("input",{type:"text",placeholder:"Your first name",ref:this.firstname,defaultValue:this.props.value.name.first,className:"flex round bn w-100 mb0 bn br1 pv3 ph4 black-50 f3 fw5"})),r.a.createElement("div",{className:" flex flex-row flex flex-row items-center w-100 mb4 items-center w-100 mb"},r.a.createElement("span",{className:"f5 fw5 black-50 w-30 pr3"},"Last Name"),r.a.createElement("input",{type:"text",placeholder:"Your first name",ref:this.lastname,defaultValue:this.props.value.name.last,className:"flex round bn w-100 mb0 bn br1 pv3 ph4 black-50 f3 fw5"})),r.a.createElement("div",{className:" flex flex-row flex flex-row items-center w-100 mb4 items-center w-100 mb"},r.a.createElement("span",{className:"f5 fw5 black-50 w-30 pr3"},"Gender"),r.a.createElement(ea.a,{inline:!0,name:"group",onChange:this.handleRadioChange,selectedValue:this.state.gender,large:!0},r.a.createElement(ta.a,{large:!0,label:"Male",value:"male"}),r.a.createElement(ta.a,{large:!0,label:"Female",value:"female"}))),r.a.createElement("div",{className:" flex flex-row flex flex-row items-center w-100 mb4 items-center w-100 mb"},r.a.createElement("span",{className:"f5 fw5 black-50 w-30 pr3"},"Role"),r.a.createElement("input",{type:"text",placeholder:"Your professional role",ref:this.role,defaultValue:this.props.role,className:"flex round bn w-100 mb0 bn br1 pv3 ph4 black-50 f3 fw5"})),r.a.createElement("div",{className:" flex flex-row flex flex-row items-center w-100 mb4 items-center w-100 mb"},r.a.createElement("span",{className:"f5 fw5 black-50 w-30 pr3 pb3 pt3"},"Location"),r.a.createElement(je,{type:"profile",setLocation:this.setLocation})),r.a.createElement("div",{className:" flex flex-row flex flex-row items-center w-100 mb4 items-center w-100 mb mb3"},r.a.createElement("span",{className:"f5 fw5 black-50 w-30 pr3 pb3 pt3"},"Your Date of Birth"),r.a.createElement("div",{className:"flex bn w-100 mb0 bn br1 pa3 black-50 f4 fw5"},r.a.createElement(se.a,{minDate:new Date("01/01/1940"),defaultValue:"undefined"!==typeof this.props.value.dob&&this.props.value.dob.length>0?new Date(this.props.value.dob):null,className:"",onChange:this.handleDateChange})))),r.a.createElement("div",{className:"form-row flex w-100 bg-white ph4 pv4 bs-b"},r.a.createElement("div",{onClick:this.submit,className:"bg-black round tc w-100 pointer flex button flex-column ph3 pv3 ba- -b--black-10 f4 fw6 white -black-50"},"Submit")))}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(r.a.Component)),na=(Ae.a.MonthPicker,Ae.a.RangePicker),ra=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).componentDidMount=function(){console.log("FormBio mounted")},a.getDerivedStateFromProps=function(e,t){console.log("FormBio getDerivedStateFromProps",e,t)},a.getSnapshotBeforeUpdate=function(e,t){console.log("FormBio getSnapshotBeforeUpdate",e,t)},a.componentDidUpdate=function(){console.log("FormBio did update")},a.componentWillUnmount=function(){console.log("FormBio will unmount")},a.state={hasError:!1,image:"",startDate:"",endDate:""},a.title=r.a.createContext(),a.description=r.a.createContext(),a.position=r.a.createContext(),a.submit=a.submit.bind(Object(v.a)(a)),a.setImage=a.setImage.bind(Object(v.a)(a)),a.handleRangeChange=a.handleRangeChange.bind(Object(v.a)(a)),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"handleRangeChange",value:function(e){console.log(e);var t=e[0].toString(),a=e[1].toString();this.setState({startDate:t,endDate:a})}},{key:"setImage",value:function(e){this.setState({image:e})}},{key:"submit",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t,a,n,r,s,c;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.title.current.value,a=this.description.current.value,n=this.position.current.value,r=this.state.image,s={startDate:this.state.startDate,endDate:this.state.endDate},c={title:t,description:a,position:n,image:r,date:s},console.log(),e.next=9,z.d.submitPortfolioItem({self:this,data:c,updateAccount:this.props.updateAccount,closeDialog:this.props.closeDialog});case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidCatch",value:function(e,t){}},{key:"render",value:function(){return this.state.hasError?r.a.createElement("h1",null,"Something went wrong."):r.a.createElement("div",Object(Q.a)({className:"FormBio-wrapper"},"className","flex flex-column w-100"),r.a.createElement("div",{className:"flex-column flex w-100 pa4"},r.a.createElement("div",{className:" flex flex-column w-100"},r.a.createElement("span",{className:"f5 fw5 black-50 pb3 pt3"},"Project Title"),r.a.createElement("input",{type:"text",placeholder:"Some cool project",ref:this.title,className:"flex w-100 mb3 bn br1 pa3 black-50 f3 fw5"})),r.a.createElement("div",{className:" flex flex-column w-100"},r.a.createElement("span",{className:"f5 fw5 black-50 pb3 pt3"},"Project Description"),r.a.createElement("textarea",{rows:5,type:"textarea",placeholder:"Lorum ipsum dolor sit amet",ref:this.description,className:"flex w-100 mb3 bn br1 pa3 black-50 f3 fw5"})),r.a.createElement("div",{className:" flex flex-column w-100"},r.a.createElement("span",{className:"f5 fw5 black-50 pb3 pt3"},"Position Filled"),r.a.createElement("input",{type:"text",placeholder:"i.e Videographer",ref:this.position,className:"flex w-100 mb3 bn br1 pa3 black-50 f3 fw5"})),r.a.createElement("div",{className:"form-row flex flex-column pt4 w-100"},r.a.createElement("label",{className:"f7 fw6 black-90 pb2"},"Project Date Range"),r.a.createElement(na,{className:"bs-a f4 fw5",onChange:this.handleRangeChange,format:"YYYY/MM/DD"})),r.a.createElement("div",{className:" flex flex-column w-100"},r.a.createElement("span",{className:"f5 fw5 black-50 pb3 pt3"},"Image"),r.a.createElement(ht,{setImage:this.setImage,type:"WorkPortfolioImage",closeDialog:this.closeDialog}))),r.a.createElement("div",{className:"form-row flex w-100 bg-white ph4 pv3"},r.a.createElement("div",{onClick:this.submit,className:"tc w-100 pointer flex button flex-column ph3 pv2 ba b--black-10 f4 fw6 black-50"},"Submit")))}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(r.a.Component),sa=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).componentDidMount=function(){var e=[],t=!0,n=!1,r=void 0;try{for(var s,c=a.props.skills[Symbol.iterator]();!(t=(s=c.next()).done);t=!0){s.value;e.push({})}}catch(o){n=!0,r=o}finally{try{t||null==c.return||c.return()}finally{if(n)throw r}}a.setState({skills:a.props.skills,skills_:e})},a.state={hasError:!1,skills:[],skills_:[{}],buttonLoading:!1},a.bio=r.a.createContext(),a.submit=a.submit.bind(Object(v.a)(a)),a.insertSkill=a.insertSkill.bind(Object(v.a)(a)),a.addSkillInput=a.addSkillInput.bind(Object(v.a)(a)),a.specOnChange=a.specOnChange.bind(Object(v.a)(a)),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"insertSkill",value:function(e){var t=this.state.skills;t.push(e),this.setState({skills:t})}},{key:"addSkillInput",value:function(){var e=this.state.skills_;e.push({}),this.setState({skills_:e})}},{key:"specOnChange",value:function(e){var t=e.e,a=e.index,n=this.state.skills;n[a]=t.target.value,this.setState({skills:n}),console.log(this.state)}},{key:"submit",value:function(){var e=this;this.setState({buttonLoading:!0}),setTimeout(function(){var t=e.state.skills;e.props.updateSkills(t)},1e3)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",Object(Q.a)({className:"FormBio-wrapper"},"className","flex w-100"),r.a.createElement("div",{className:"flex-column flex w-100"},r.a.createElement("div",{className:" flex w-100 pa4-"},r.a.createElement("div",{className:"form-row flex flex-column pa4 w-100"},r.a.createElement("div",{className:"form-row flex flex-column pb2 w-100"},r.a.createElement("label",{className:"f5 fw5 black-50 pb2"},"Skills"),r.a.createElement("div",{className:"flex flex-column flex-wrap w-100"},this.state.skills_.map(function(t,a){return r.a.createElement("div",{className:"flex pb2 w-100"},r.a.createElement("input",{required:!0,onChange:function(t){return e.specOnChange({e:t,index:a})},defaultValue:e.state.skills[a],type:"text",className:"ttc w-100 flex flex-row ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a-"}))}))),r.a.createElement("div",{className:"form-row flex flex-row pt2 w-100"},r.a.createElement("button",{onClick:this.addSkillInput,className:"bn br1 bg-black-30 f5 fw5 white pv1 ph2"},"Add +")))),r.a.createElement("div",{className:"form-row flex w-100 bg-white ph4 pv4 bs-b"},r.a.createElement("div",{onClick:this.submit,className:"bg-black-20 round tc w-100 pointer flex button flex-column ph3 pv3 ba- -b--black-10 f4 fw6 white -black-50"},this.state.buttonLoading&&r.a.createElement("div",{className:"flex flex-column pv2 items-center justify-center"},r.a.createElement("div",{className:"sp sp-3balls"})),!this.state.buttonLoading&&r.a.createElement("div",null,"Save")))))}}]),t}(r.a.Component),ca=function(e){return r.a.createElement("div",{className:"raleway w-100 flex flex-row b-b b--black-10 justify-between bg-white br2 overflow-hidden bs-b"},r.a.createElement("div",{className:"flex flex-auto w--100 flex-row pb0"},r.a.createElement("p",{className:"flex f5 fw6 black mb0 ph3 pv2 items-center justify-center"},e.title),e.labels&&e.labels.map(function(e,t){return r.a.createElement("p",{className:"flex f6 fw5 black-20 mb0 ph3 pv2- items-center justify-center bl b--black-05"},e.count," ",e.text)})),e.functionButton&&r.a.createElement("div",{className:"flex flex-auto- flex-row pb0"},r.a.createElement("button",{onClick:e.functionButton.function,id:"function-button",className:"flex flex-column pointer h-100 bl b--black-10 ph0 bg-white"},r.a.createElement("div",{id:"",className:"flex flex-row ph0 pv0 items-center justify-center bg-white h-100"},r.a.createElement("span",{className:"f6 fw4 black-60 ph3"},e.functionButton.title),r.a.createElement("div",{className:"flex flex-column items-center justify-center ph3 pv2 white h-100",style:{backgroundColor:"rgb(179, 191, 149)"}},r.a.createElement(P.a,{icon:e.functionButton.icon,className:"bp3-icon bp3-icon-ring"}))))))},oa=a(56);window.GeoPattern=oa;var ia=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).componentDidMount=function(){a.getCompletedProjects()},a.state={hasError:!1,completedProjects:[],archive:a.props.projects||[],ready:!1},a.getCompletedProjects=a.getCompletedProjects.bind(Object(v.a)(a)),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"getCompletedProjects",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.c.fetchSubscribedProjects({self:this,userId:this.props.user.id}).then(function(e){console.log(" "),console.log(" "),console.log("subscribed projects",e),console.log(" "),console.log(" ");var a=[],n=!0,r=!1,s=void 0;try{for(var c,o=e[Symbol.iterator]();!(n=(c=o.next()).done);n=!0){var i=c.value;console.log(" "),console.log(" "),console.log("project",i),console.log(" "),console.log(" "),i.hasOwnProperty("end_date")&&A()(i.end_date).isBefore(A()(new Date))&&a.push(i)}}catch(l){r=!0,s=l}finally{try{n||null==o.return||o.return()}finally{if(r)throw s}}t.setState({completedProjects:a,ready:!0}),console.log(" "),console.log(" "),console.log("completed Projects",a),console.log(" "),console.log(" ")});case 2:e.sent;case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.hasError?r.a.createElement("h1",null,"Something went wrong."):r.a.createElement("section",{id:"RecentWork",className:"flex w-100 mt4"},r.a.createElement("div",{className:"flex flex-column mb2 pa0 br1 w-100"},r.a.createElement(ca,{title:"Recent Work",functionButton:null,labels:[{text:"projects",count:this.state.completedProjects.length}]}),r.a.createElement("div",{className:"flex flex-column pv3"},r.a.createElement("div",{className:"flex flex-auto flex-column pb0 "},r.a.createElement("div",{className:"flex flex-row flex-wrap f4 fw4 black-60 mb0 col-3 justify-between"},this.state.ready&&this.state.completedProjects.map(function(e,t){return console.log("[[ Project item ]]",e),r.a.createElement(O.a,{to:"/project/"+e.id,className:"   raleway  pointer flex flex-row items-center justify-center pr3- mb4 br2 overflow-hidden bs-b "},r.a.createElement("div",{style:{width:"200px",height:"100%",borderRadius:"0",backgroundImage:"undefined"!==typeof e.media&&e.media.images.length>0?"url("+e.media.images[0].url+")":oa.generate(e.title).toDataUrl()},className:"cover bg-center w-30"}),r.a.createElement("div",{className:" flex flex-column bg-white w-100 pa3- h-100"},r.a.createElement("div",{className:" flex flex-column bg-white w-100 pa3 h-100"},r.a.createElement("div",{className:" flex f4 fw6 pb2 black w-100"},e.title),r.a.createElement("div",{className:" flex flex-row w-100 justify-between pb2"},r.a.createElement("div",{className:" items-center ttc flex f6 fw6 black-40"},e.type),r.a.createElement("div",{className:"w-60 flex f6 fw5 pb2- black-20 items-center justify-end"},A()(e.start_date).format("MMMM YYYY"))),r.a.createElement("div",{className:" flex f5 fw5 pb0 black-50"},e.description.substr(0,60)+" ..."))))})),this.state.ready&&0===this.state.completedProjects.length&&r.a.createElement("div",{className:"flex flex-column w-100 pv3 items-center justify-center ba- -b--black-05 br2"},r.a.createElement("div",{className:"raleway flex w-100 pv3- f5 fw6 black-30 tc justify-center"},"No projects to show"))))))}}]),t}(n.Component),la=a(56);window.GeoPattern=la;var ua=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).componentDidMount=function(){a.getCompletedProjects()},a.getDerivedStateFromProps=function(e,t){},a.getSnapshotBeforeUpdate=function(e,t){},a.componentDidUpdate=function(){console.log("RecentWork did update")},a.componentWillUnmount=function(){console.log("RecentWork will unmount")},a.state={hasError:!1,completedProjects:null},a.getCompletedProjects=a.getCompletedProjects.bind(Object(v.a)(a)),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"getCompletedProjects",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t,a=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.context.account.user.id,e.next=3,z.c.fetchSubscribedProjects({self:this,userId:t}).then(function(e){a.setState({projects:e});var t=[],n=!0,r=!1,s=void 0;try{for(var c,o=e[Symbol.iterator]();!(n=(c=o.next()).done);n=!0){var i=c.value;A()(i.end_date).isBefore(A()(new Date))&&t.push(i)}}catch(l){r=!0,s=l}finally{try{n||null==o.return||o.return()}finally{if(r)throw s}}a.setState({completedProjects:t})});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidCatch",value:function(e,t){}},{key:"render",value:function(){var e=this;return this.state.hasError?r.a.createElement("h1",null,"Something went wrong."):r.a.createElement("section",{id:"RecentWorkArchive",className:"mt3"},r.a.createElement("div",{className:"flex flex-column mb2 pa0 br1 "},r.a.createElement(ca,{title:"Recent Work Archive",functionButton:{title:"Add Archive Item",icon:"ring",function:function(){return e.props.addRecentWorkProject()}},labels:[{text:"projects",count:this.props.projects.length}]}),r.a.createElement("div",{className:"flex flex-column pv3"},r.a.createElement("div",{className:"flex flex-auto flex-column pb0 "},0===this.props.projects.length&&r.a.createElement("div",{className:"flex flex-column w-100 pv3 items-center justify-center ba- -b--black-05 br2"},r.a.createElement("div",{className:"raleway flex w-100 pv3- f5 fw6 black-30 tc justify-center"},"No projects to show")),r.a.createElement("section",{className:"flex flex-row flex-wrap f4 fw4 black-60 mb0 col-3 justify-between"},this.props.projects.map(function(e,t){return console.log("[[ Project item ]]",e),r.a.createElement(O.a,{to:"/project/"+e.id,className:"   raleway  pointer flex flex-row flex-auto- items-center justify-center pr3- mb4 br2 overflow-hidden bs-b "},r.a.createElement("div",{style:{width:"200px",height:"100%",borderRadius:"0",backgroundImage:"undefined"!==typeof e.image?"url("+e.image+")":la.generate(e.title).toDataUrl()},className:"cover bg-center w-30"}),r.a.createElement("div",{className:" flex flex-column bg-white w-100 pa3- h-100"},r.a.createElement("div",{className:" flex flex-column bg-white w-100 pa3 h-100"},r.a.createElement("div",{className:" flex f4 fw6 pb2 black w-100"},e.title),r.a.createElement("div",{className:" flex flex-row w-100 justify-between pb2"},r.a.createElement("div",{className:" items-center ttc flex f6 fw6 black-40"},e.type),r.a.createElement("div",{className:"w-60 flex f6 fw5 pb2- black-20 items-center justify-end"},A()(e.start_date).format("MMMM YYYY"))),r.a.createElement("div",{className:" flex f5 fw5 pb0 black-50"},e.description.substr(0,60)+" ..."))))}))))))}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(n.Component),fa=ua;ua.contextType=Pe;var pa=a(99),ma=(a(658),a(153)),da=a(395),ha=a.n(da)()(ma.a),ba=Object(ma.c)(A.a),va=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).componentDidMount=function(){console.log("ProjectCalendar mounted"),a.setState({projectEvents:a.props.projects,ownEvents:a.props.ownEvents}),a.reload()},a.getDerivedStateFromProps=function(e,t){},a.getSnapshotBeforeUpdate=function(e,t){},a.componentDidUpdate=function(){},a.componentWillUnmount=function(){},a.state={hasError:!1,current:12,months:[],ready:!1,projectEvents:null,ownEvents:null,events:null},a.calendarFilter=a.calendarFilter.bind(Object(v.a)(a)),a.createCalendar=a.createCalendar.bind(Object(v.a)(a)),a.getOwnEvents=a.getOwnEvents.bind(Object(v.a)(a)),a.getProjectEvents=a.getProjectEvents.bind(Object(v.a)(a)),a.reload=a.reload.bind(Object(v.a)(a)),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"getProjectEvents",value:function(){var e=[],t=z.a.get("subscribedProjects"),a=!0,n=!1,r=void 0;try{for(var s,c=t[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var o=s.value,i={id:o.id,title:o.title,start:A()(o.start_date).tz("Africa/Johannesburg").toDate(),end:A()(o.end_date).tz("Africa/Johannesburg").toDate()};e.push(i)}}catch(l){n=!0,r=l}finally{try{a||null==c.return||c.return()}finally{if(n)throw r}}this.setState({events:e}),console.log("events",e)}},{key:"getOwnEvents",value:function(){var e=this.state.events,t=(z.a.get("account").user.profile.events,z.a.get("account").user.profile);t.hasOwnProperty("events")||(t.events=[]);var a=!0,n=!1,r=void 0;try{for(var s,c=t.events[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var o=s.value,i={id:o.title+o.start,title:o.title,start:A()(o.start).tz("Africa/Johannesburg").toDate(),end:A()(o.end).tz("Africa/Johannesburg").toDate()};e.push(i)}}catch(l){n=!0,r=l}finally{try{a||null==c.return||c.return()}finally{if(n)throw r}}z.a.store({label:"calendarEvents",value:e}),this.setState({events:e,ready:!0}),console.log("events",e)}},{key:"reload",value:function(){var e=this;this.setState({ready:!1,events:null}),setTimeout(function(){e.getProjectEvents(),e.getOwnEvents()},500)}},{key:"componentDidCatch",value:function(e,t){}},{key:"createCalendar2",value:function(e){var t=this.props.projects;console.log("Projects",t);var a=[],n=!0,r=!1,s=void 0;try{for(var c,o=t[Symbol.iterator]();!(n=(c=o.next()).done);n=!0){var i=c.value,l=A()(i.date.startDate).format("MM"),u=parseInt(A()(i.date.startDate).format("DD")),f=parseInt(A()(i.date.endDate).format("DD"));console.log("project date",l,u,f);var p=!0,m=!1,d=void 0;try{for(var h,b=e[Symbol.iterator]();!(p=(h=b.next()).done);p=!0){var v=h.value,w=new Array(v.days).fill({});if(v.days_=w,console.log("month item ",v),console.log("month_.number",v.number),console.log("projectMonth",l),v.number===l){var g=[],x=!0,y=!1,j=void 0;try{for(var k,E=v.days_[Symbol.iterator]();!(x=(k=E.next()).done);x=!0){var N=k.value,O={};O.day=w.indexOf(N)+1,console.log("day_ item",O),O.day>u&&O.day<f?O.filled=!0:O.filled=!1,g.push(O),console.log("days",g)}}catch(S){y=!0,j=S}finally{try{x||null==E.return||E.return()}finally{if(y)throw j}}v.days__=g,console.log("month_.days__",v)}a.push(v)}}catch(S){m=!0,d=S}finally{try{p||null==b.return||b.return()}finally{if(m)throw d}}}}catch(S){r=!0,s=S}finally{try{n||null==o.return||o.return()}finally{if(r)throw s}}this.setState({months_:a,ready:!0})}},{key:"createCalendar",value:function(e){var t=this.props.projects,a=this.props.ownEvents;console.log("Projects",t),console.log("ownEvents",a);var n=[],r=!0,s=!1,c=void 0;try{for(var o,i=e.entries()[Symbol.iterator]();!(r=(o=i.next()).done);r=!0){var l=o.value,u=Object(pa.a)(l,2),f=u[0],p=u[1];new Array(p.days).fill({});n[f]=p,n[f].daysList=new Array(p.days).fill({}),console.log(""),console.log("month_",p);var m=!0,d=!1,h=void 0;try{for(var b,v=t[Symbol.iterator]();!(m=(b=v.next()).done);m=!0){var w=b.value,g=A()(w.date.startDate).format("MM"),x=parseInt(A()(w.date.startDate).format("DD")),y=parseInt(A()(w.date.endDate).format("DD"));console.log(""),console.log("project date",g,x,y),console.log(" "),console.log("month_.number === projectMonth",p.number,g,parseInt(p.number)===parseInt(g));if(parseInt(p.number)===parseInt(g)){var j=!0,k=!1,E=void 0;try{for(var N,O=p.daysList.entries()[Symbol.iterator]();!(j=(N=O.next()).done);j=!0){var S=N.value,C=Object(pa.a)(S,2),D=C[0],P=C[1];console.log(" "),console.log(" ");var T={day:D+1,filled:P.filled,month:p.name};console.log(" "),console.log("[[ day ]]",T.day,x,y),T.day>=x&&T.day<=y&&(T.filled=!0),console.log(" "),console.log("day",T,T.day,T.filled),n[f].daysList[D]=T,console.log("m[monthIndex].daysList[dayIndex] = day ",n[f].daysList[D]=T)}}catch(I){k=!0,E=I}finally{try{j||null==O.return||O.return()}finally{if(k)throw E}}console.log("month_.days__",n)}}}catch(I){d=!0,h=I}finally{try{m||null==v.return||v.return()}finally{if(d)throw h}}}}catch(I){s=!0,c=I}finally{try{r||null==i.return||i.return()}finally{if(s)throw c}}this.setState({months_:n,ready:!0})}},{key:"calendarFilter",value:function(){var e=this.state.current,t=[];console.log("months",Mt),12===e?(t[0]=Mt[e-2],t[1]=Mt[e-1],t[2]=Mt[e-12]):(t[0]=Mt[e-2],t[1]=Mt[e-1],t[2]=Mt[e]),console.log("months ",t),this.createCalendar(t)}},{key:"render",value:function(){var e=this;return this.state.hasError?r.a.createElement("h1",null,"Something went wrong."):this.state.ready&&r.a.createElement("section",{id:"ProfileCalendar",className:"mt3"},r.a.createElement("div",{className:"flex flex-column mb2 pa0 br1 "},r.a.createElement(ca,{title:"Calendar",functionButton:{title:"View All",icon:"ring",function:function(){return e.context.history.push("/calendar")}},labels:[{text:"projects",count:0}]}),r.a.createElement("div",{className:"calendar pb5 flex flex-row-ns flex-column flex-wrap- justify-between col-3 pt3  "},r.a.createElement("div",{className:"calendar-month flex flex-column flex-wrap flex--auto "},r.a.createElement("div",{className:"flex flex-column flex-wrap bb b--black-05 bg-white pa3 f4 fw6 black-70"},A()(new Date).subtract(1,"M").format("MMMM YYYY").toString()),r.a.createElement("div",{className:"flex flex-column"},r.a.createElement(ha,{localizer:ba,events:this.state.ready&&this.state.events||[],defaultView:ma.b.MONTH,defaultDate:A()(new Date).subtract(1,"M").tz("Africa/Johannesburg").toDate(),style:{height:400},toolbar:!1}))),r.a.createElement("div",{className:"calendar-month flex flex-column flex-wrap flex--auto "},r.a.createElement("div",{className:"flex flex-column flex-wrap bb b--black-05 bg-white pa3 f4 fw6 black-70"},A()(new Date).format("MMMM YYYY").toString()),r.a.createElement("div",{className:"flex flex-column"},r.a.createElement(ha,{selectable:!0,localizer:ba,events:this.state.ready&&this.state.events||[],onEventDrop:this.moveEvent,defaultView:ma.b.MONTH,defaultDate:A()(new Date).tz("Africa/Johannesburg").toDate(),style:{height:400},toolbar:!1}))),r.a.createElement("div",{className:"calendar-month flex flex-column flex-wrap flex--auto "},r.a.createElement("div",{className:"flex flex-column flex-wrap bb b--black-05 bg-white pa3 f4 fw6 black-70"},A()(new Date).add(1,"M").format("MMMM YYYY").toString()),r.a.createElement("div",{className:"flex flex-column"},r.a.createElement(ha,{selectable:!0,localizer:ba,events:this.state.ready&&this.state.events||[],defaultView:ma.b.MONTH,defaultDate:A()(new Date).add(1,"M").tz("Africa/Johannesburg").toDate(),style:{height:400},toolbar:!1}))))))}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(r.a.Component);va.contextType=Pe;a(753);var wa=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).increase=function(){var e=a.state.percent+10;e>100&&(e=100),a.setState({percent:e})},a.handleSearch=function(e){e?fetch(e,function(e){return a.setState({data:e})}):a.setState({searchResults:[]})},a.handleChange=function(e){a.setState({location:e})},a.state={loading:!1,searchResults:[],location:a.props.location,percent:a.props.progressBarPercent,progressBarActive:a.props.progressBarActive,searchAttempts:0},a.submit=a.submit.bind(Object(v.a)(a)),a.onChange=a.onChange.bind(Object(v.a)(a)),a.handleSearch=a.handleSearch.bind(Object(v.a)(a)),a.handleChange=a.handleChange.bind(Object(v.a)(a)),a.submitSearch=a.submitSearch.bind(Object(v.a)(a)),a.increase=a.increase.bind(Object(v.a)(a)),a.location=r.a.createRef(),console.log("LocationSearchForm",e),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"onChange",value:function(){var e=Object(p.a)(f.a.mark(function e(t){var a,n,r,s=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({progressBarActive:!1}),a=t.target.value,n="https://autocomplete.geocoder.api.here.com/6.2/suggest.json?app_id=ZZN2MPuexLyuz3VR0KDD&app_code=TnEsVJR8k3zxGMiAkbP_EQ&query="+a,r={origin:"locahost",mode:"cors",headers:{Accept:"application/json"}},e.next=6,fetch(n,r,function(e,t){return t.ok||console.error(e),t}).then(function(e){return e.json()}).then(function(e){console.log("Autocomplete res",e),s.setState({searchResults:e.suggestions})});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"setLocation",value:function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({location:t}),this.location.current.value=t.address.houseNumber+", "+t.address.street+", "+t.address.district+", "+t.address.county,this.setState({searchResults:[]}),"undefined"!==typeof this.props.updateProjectLocation?(localStorage.setItem("updateProjectLocation",JSON.stringify(t)),this.props.updateProjectLocation(t)):(localStorage.setItem("location",JSON.stringify(t)),localStorage.setItem("locationSet",JSON.stringify(!0))),"undefined"!==typeof this.props.type&&"event"===this.props.type&&this.props.setLocation(t);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"submitSearch",value:function(){var e=Object(p.a)(f.a.mark(function e(t){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),t.stopPropagation(),localStorage.setItem("location",JSON.stringify(this.props.location)),localStorage.setItem("locationSet",JSON.stringify(!0)),a=this.props.location.County,e.next=7,this.props.fetchChefs(a);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"submit",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"componentDidMount",value:function(){var e=this.props.location;this.setState({location:e,ready:!0})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"LocationSearchBar",className:"flex flex-column h-100 w-100 "},r.a.createElement("form",{onSubmit:this.submitSearch,className:"flex flex-column items-end justify-center ma0 pa0 w-100",id:""},this.state.ready&&r.a.createElement("div",{className:"flex flex-column relative w-100 items-end"},r.a.createElement("div",{className:"flex flex-column items-end mt3- w-100 mw-5 right "},r.a.createElement("input",{id:"toolbarLocationSearch",ref:this.location,onChange:this.onChange,className:"flex flex-column ph4 pv3 bn br1- round bg-white black-50 f4 fw5 bs-a- w-100",placeholder:"Enter an address",type:"text",defaultValue:this.props.defaultValue}),this.props.progressBarActive&&r.a.createElement(F.a,{type:"loading",className:"formLoadingIcon"})),this.props.progressBarActive&&r.a.createElement("div",{className:"LocationProgressBar absolute w-100 left-0 flex flex-column pt2 "},r.a.createElement(he.a,{strokeColor:"gainsboro",showInfo:!1,percent:this.props.progressBarPercent})),this.state&&this.state.searchResults&&this.state.searchResults.length>0&&r.a.createElement("div",{className:"searchResults flex flex-column bs-a bg-near-white br1 w-100"},this.state.searchResults.map(function(t,a){return t.address&&t.address.county&&t.address.city&&r.a.createElement("div",{onClick:function(){return e.setLocation(t)},className:"pointer flex flex-row f6 fw5 black-50 pa2"},r.a.createElement("span",{className:"location-label-primary flex flex-auto items-center pl2 f5 fw4 black-40"},t.address.city||"n/a"),r.a.createElement("div",{className:"flex flex-row items-center justify-end flex-auto "},r.a.createElement("span",{className:"location-label-secondary flex items-center  f7 fw6 black-60 pl3"},t.address.houseNumber),r.a.createElement("span",{className:"location-label-secondary flex items-center  f7 fw6 black-60 pl3"},t.address.street),r.a.createElement("span",{className:"location-label-secondary flex items-center  f7 fw6 black-60 pl3"},t.address.state),r.a.createElement("span",{className:"location-label-secondary flex items-center f7 fw6 black-60 pl2"},t.address.country)))})))))}}]),t}(r.a.Component),ga=(Ae.a.MonthPicker,Ae.a.RangePicker),xa=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={startDate:a.props.eventData&&a.props.eventData.start,endDate:a.props.eventData&&a.props.eventData.end,buttonLoading:!1},a.addEvent=a.addEvent.bind(Object(v.a)(a)),a.handleChange=a.handleChange.bind(Object(v.a)(a)),a.handleRangeChange=a.handleRangeChange.bind(Object(v.a)(a)),a.disabledRangeTime=a.disabledRangeTime.bind(Object(v.a)(a)),a.range=a.range.bind(Object(v.a)(a)),a.eventTitle=r.a.createRef(),a.eventForm=r.a.createRef(),console.log("OnboardingScreen props",e),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"handleRangeChange",value:function(e){console.log(e);var t=e[0].toString(),a=e[1].toString();this.setState({startDate:t,endDate:a})}},{key:"handleDateChange",value:function(e){console.log(e),this.setState({projectDate:e.toString()})}},{key:"range",value:function(e,t){for(var a=[],n=e;n<t;n++)a.push(n);return a}},{key:"disabledRangeTime",value:function(e,t){var a=this;return"start"===t?{disabledHours:function(){return a.range(0,60).splice(4,20)},disabledMinutes:function(){return a.range(30,60)},disabledSeconds:function(){return[55,56]}}:{disabledHours:function(){return a.range(0,60).splice(20,4)},disabledMinutes:function(){return a.range(0,31)},disabledSeconds:function(){return[55,56]}}}},{key:"handleChange",value:function(e){console.log(e.target.value),this.setState({projectType:e.target.value})}},{key:"addEvent",value:function(e){e.preventDefault(),this.setState({buttonLoading:!0});var t={title:this.eventTitle.current.value,start:this.state.startDate,end:this.state.endDate};this.props.addEvent(t)}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("form",{ref:this.eventForm,id:"ProjectSearchForm",className:(z.d.get("isMobile")?" vh84 ":"  ")+" flex-column flex justify-between mb0"},r.a.createElement("div",{className:"flex flex-column ma0",id:""},r.a.createElement("div",{className:"form-row flex flex-column"},r.a.createElement("div",{className:"form-row flex flex-column pa5"},r.a.createElement("div",{className:"f4 fw6 black-90 pb4"},"Add an Event"),r.a.createElement("div",{className:"form-row flex flex-row items-center"},r.a.createElement("label",{className:"f4 fw5 black-50 pb2- w-30 pr3"},"Event Title"),r.a.createElement("input",{ref:this.eventTitle,type:"text",required:!0,className:"flex flex-column ph4 pv3 bn br1- round bg-white black-50 f4 fw5 bs-a- w-100"})),r.a.createElement("div",{className:"form-row flex flex-row items-center pt4"},r.a.createElement("label",{className:"f4 fw5 black-50 pb2- w-30 pr3"},"Event Location"),r.a.createElement(wa,{setLocation:this.props.setLocation,type:"event"})),r.a.createElement("div",{className:"form-row flex flex-row items-center pt4 w-100"},r.a.createElement("label",{className:"f4 fw5 black-50 pb2- w-30 pr3"},"Event Dates"),r.a.createElement(ga,{className:"flex flex-column flex-auto ph4 pv0 bn br1- round bg-white black-50 f4 fw5 bs-a- w-100",onChange:this.handleRangeChange,required:!0,style:{width:"100%"},showTime:{defaultValue:[A()("08:00:00","HH:mm:ss"),A()("17:00:00","HH:mm:ss")]},defaultValue:this.props.eventData&&[A()(this.props.eventData.start,"YYYY/MM/DD").tz("Africa/Johannesburg"),A()(this.props.eventData.end,"YYYY/MM/DD").tz("Africa/Johannesburg")],format:"YYYY/MM/DD"}))))),r.a.createElement("div",{className:"Buttons flex flex-row justify-between center w-100"},r.a.createElement("div",{className:"flex flex-column w-100 pa4 bg-white"},r.a.createElement("button",{onClick:this.addEvent,className:"br1- round bs-b bg-black-20 ph3 pv2 pointer bn relative  "},r.a.createElement("span",{className:"f4 fw6 white pv2 flex items-center justify-center"},this.state.buttonLoading&&r.a.createElement("div",{className:"flex mr3 pv2"},r.a.createElement("div",{className:"sp sp-3balls"})),!this.state.buttonLoading&&"Create Event")))))}}]),t}(r.a.Component),ya=(a(170),xe.a.Step,r.a.Component,Ae.a.MonthPicker,Ae.a.RangePicker),ja=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={projectType:"",startDate:"",endDate:""},a.searchProjects=a.searchProjects.bind(Object(v.a)(a)),a.handleChange=a.handleChange.bind(Object(v.a)(a)),a.handleRangeChange=a.handleRangeChange.bind(Object(v.a)(a)),console.log("OnboardingScreen props",e),a.reset=a.reset.bind(Object(v.a)(a)),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"reset",value:function(){window.localStorage.clear(),this.context.history.push("/"),window.location.reload()}},{key:"handleRangeChange",value:function(e){console.log(e);var t=e[0].toString(),a=e[1].toString();this.setState({startDate:t,endDate:a})}},{key:"handleDateChange",value:function(e){console.log(e),this.setState({projectDate:e.toString()})}},{key:"handleChange",value:function(e){console.log(e.target.value),this.setState({projectType:e.target.value})}},{key:"searchProjects",value:function(){var e={location:z.a.get("location"),projectType:this.state.projectType,startDate:this.state.startDate,endDate:this.state.endDate};this.props.searchProjects(e)}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"StepsForm"},r.a.createElement("div",{className:"flex flex-column ma0",id:""},r.a.createElement("div",{className:"form-row flex flex-column pb3 pt2"},r.a.createElement("div",{className:"form-row flex flex-column"},r.a.createElement("div",{className:"form-row flex flex-column pt4"},r.a.createElement("label",{className:"f5 fw6 black-50 pb2"},"Project Location (city)"),r.a.createElement(je,{location:this.state.location,findLocation:this.findLocation,fetchProjects:this.fetchProjects2})),r.a.createElement("div",{className:"form-row flex flex-column pt4 w-100"},r.a.createElement("label",{className:"f5 fw6 black-50 pb2"},"Project Type"),r.a.createElement("select",{required:!0,className:"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a w-100",onChange:function(t){return e.handleChange(t)}},r.a.createElement("option",{value:""},"Select"),r.a.createElement("option",{value:"commercial"},"Commercial"),r.a.createElement("option",{value:"film"},"Film"),r.a.createElement("option",{value:"film"},"Documentary"))),r.a.createElement("div",{className:"form-row flex flex-column pt4 w-100"},r.a.createElement("label",{className:"f5 fw6 black-50 pb2"},"Availability Date Range"),r.a.createElement(ya,{required:!0,className:"bs-a f4 fw5",onChange:this.handleRangeChange,format:"YYYY/MM/DD"}))))),r.a.createElement("div",{className:"Buttons flex flex-row justify-between mt4 center w-100 mb4"},r.a.createElement("div",{className:"flex flex-column w-100"},r.a.createElement("button",{onClick:this.searchProjects,className:"br1 bs-b bg-black ph3 pv2 pointer bn relative  "},r.a.createElement("span",{className:"f5 fw5 white pv2 flex items-center justify-center"},this.state.buttonLoading?r.a.createElement(F.a,{type:"loading",className:" absolute right-0 f4 black-60 mr2"}):r.a.createElement(F.a,{type:"swap-right",className:" f4 black-60 mr2 absolute right-0"})," Search")))),r.a.createElement("div",{className:"flex flex-row w-100"},r.a.createElement("div",{onClick:this.reset,className:"f5 fw6 black-50 pv2 mt2 mv4 ba b--black-05 ph3"},"Reset")))}}]),t}(r.a.Component),ka=ja;ja.contextType=Pe;xe.a.Step;var Ea=[{title:"Select"},{title:"Unit Production Manager"},{title:"Line Producer"},{title:"Production Manager"},{title:"Director"},{title:"Assistant Director"},{title:"2nd Assistant Director"},{title:"Continuity Person"},{title:"Cinematographer"},{title:"Gaffer"},{title:"Camera Operator"},{title:"Assistant Cameraman"},{title:"Film Loader"},{title:"Steadycam Operator"},{title:"Production Sound Mixer"},{title:"Boom Operator"},{title:"Key Grip"},{title:"Dolly Grip"},{title:"Best Boy"},{title:"Visual Effects Director"},{title:"FX Coordinator"},{title:"Property Master"},{title:"Leadman"},{title:"Set Dresser"},{title:"Costumer"},{title:"Make-up Artist"},{title:"Body Make-up Artist"},{title:"Hairdresser"},{title:"Production Assistant"},{title:"Production Office Coordinator"},{title:"Unit Publicist"},{title:"Second Unit Director"},{title:"Production Caterer"},{title:"Craft Services"},{title:"Transportation Coordinator"},{title:"Day Player"}],Na=(r.a.Component,xe.a.Step,r.a.Component,function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={ready:!0},a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"ViewEvent",className:(z.d.get("isMobile")?" vh84 ":"  ")+" flex-column flex justify-between "},r.a.createElement("div",{className:"flex flex-column ma0",id:""},r.a.createElement("div",{className:"form-row flex flex-column"},r.a.createElement("div",{className:"form-row flex flex-column pa4"},r.a.createElement("div",{className:"f5 fw6 black-90 pb3 pt5"},"Event Detail"),r.a.createElement("div",{className:"form-row flex flex-column"},r.a.createElement("label",{className:"f6 fw5 black-50 pb2"},"Event Title"))))))}}]),t}(r.a.Component));Na.contextType=Pe;a(756);var Oa=r.a.forwardRef(function(e,t){return r.a.createElement(Et,Object.assign({},e,{ref:t}))}),Sa=(Object(y.b)(Oa)({enter:{y:0,opacity:1,delay:0,transition:{y:{type:"spring",stiffness:1e3,damping:100},default:{duration:300}}},exit:{y:-50,opacity:1,delay:300,transition:{y:{type:"spring",stiffness:1e3,damping:100},default:{duration:300}}}}),y.b.div({enter:{y:-50,opacity:1,delay:0,transition:{y:{type:"spring",ease:"easeInOut",stiffness:1e3,damping:100},default:{duration:300}}},exit:{y:500,opacity:0,delay:0,transition:{y:{type:"spring",stiffness:1e3,damping:100,restDelta:.5,restSpeed:10},default:{duration:300}}}})),Ca=function(e){return r.a.createElement(y.a,{animateOnMount:!0},e.items.map(function(t,a){return r.a.createElement(Et,Object.assign({enterAfterExit:!0,beforeChildren:!0,animateOnMount:!0,key:a,item:t,index:a},e))}))},Da=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).socket=null,a.addMessage=function(e){return a.setState(function(t){return{comments:[e].concat(Object(vt.a)(t.comments))}})},a.state={ready:!1,project:a.props.project,comments:a.props.project.comments,authors:[]},console.log("Messagebox",e),a.avatar=a.avatar.bind(Object(v.a)(a)),a.submitMessage=a.submitMessage.bind(Object(v.a)(a)),a.messageText=r.a.createRef(),a.addMessage=a.addMessage.bind(Object(v.a)(a)),a.submitMessage=a.submitMessage.bind(Object(v.a)(a)),a.initSocketConnection=a.initSocketConnection.bind(Object(v.a)(a)),a.onClientDisconnected=a.onClientDisconnected.bind(Object(v.a)(a)),a.onReconnection=a.onReconnection.bind(Object(v.a)(a)),a.setupSocketListeners=a.setupSocketListeners.bind(Object(v.a)(a)),a.onMessageRecieved=a.onMessageRecieved.bind(Object(v.a)(a)),a.onConnect=a.onConnect.bind(Object(v.a)(a)),a.extractAuthors=a.extractAuthors.bind(Object(v.a)(a)),a.scrollMessageBoxIntoView=a.scrollMessageBoxIntoView.bind(Object(v.a)(a)),a.messagesList=r.a.createRef(),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"scrollMessageBoxIntoView",value:function(){document.querySelector("body").scroll({top:130,left:0,behavior:"smooth"})}},{key:"submitMessage",value:function(){var e=Object(p.a)(f.a.mark(function e(t){var a,n,r,s,c,o;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=this.context.account.user.id,n=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),r={author:a,text:this.messageText.current.value,createdAt:new Date,id:n},console.log("message ]]",r),this.state.authorIds.includes(a)){e.next=14;break}return s=this.state.authorIds,(c=new Set(s)).add(a),o=Array.from(c),this.setState({authorIds:o}),e.next=14,z.d.fetchCommentAuthor({self:this,authorId:a});case 14:this.socket.emit("message",JSON.stringify(r)),this.messageText.current.value=null,setTimeout(function(){document.getElementById("MessagesList")&&document.getElementById("MessagesList").scroll({top:9999999999,left:0,behavior:"smooth"})},500);case 17:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"onClientDisconnected",value:function(){Rt.a.info("Connection Lost from server, please check your connection"),console.log("[[ Socket.io server disconnected. ]]")}},{key:"onReconnection",value:function(){console.log("[[ Socket.io server reconnected. ]]")}},{key:"onConnect",value:function(){console.log(" "," "," "," "),console.log("[[ Socket.io server connected. ]]"),console.log(" "," "," "," ")}},{key:"setupSocketListeners",value:function(){this.socket.on("connect",this.onConnect),this.socket.on("message",this.onMessageRecieved),this.socket.on("reconnect",this.onReconnection),this.socket.on("disconnect",this.onClientDisconnected)}},{key:"onMessageRecieved",value:function(e){var t=this.state.comments;t.push(JSON.parse(e)),this.setState({comments:t})}},{key:"avatar",value:function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"initSocketConnection",value:function(){this.socket=gt.a.connect("https://socketio.quantacom.co")}},{key:"componentWillReceiveProps",value:function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"extractAuthors",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t,a,n,r,s,c,o,i,l;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t=this.props.project.comments,a=new Set,n=!0,r=!1,s=void 0,e.prev=5,c=t[Symbol.iterator]();!(n=(o=c.next()).done);n=!0)i=o.value,a.add(i.author);e.next=13;break;case 9:e.prev=9,e.t0=e.catch(5),r=!0,s=e.t0;case 13:e.prev=13,e.prev=14,n||null==c.return||c.return();case 16:if(e.prev=16,!r){e.next=19;break}throw s;case 19:return e.finish(16);case 20:return e.finish(13);case 21:return l=Array.from(a),this.setState({authorIds:l}),e.next=25,z.d.fetchCommentAuthors({self:this,authorIds:l});case 25:case"end":return e.stop()}},e,this,[[5,9,13,21],[14,,16,20]])}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){}},{key:"componentDidMount",value:function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.initSocketConnection(),this.setupSocketListeners(),this.extractAuthors();case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"flex flex-column relative h-100 w-100 flex-auto "},r.a.createElement("div",{className:"flex flex-column relative h-100 w-100 flex-auto "},this.state.ready?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"",className:"flex -absolute -bottom-0 w-100 bb b--black-05"},r.a.createElement("form",{onSubmit:this.submitMessage,className:"flex flex-row w-100 ma0"},r.a.createElement("div",{className:"flex flex-column w-80"},r.a.createElement("input",{onClick:this.scrollMessageBoxIntoView,required:!0,placeholder:"Enter text ...",ref:this.messageText,className:"bn pa3 f4 fw5 black-50",type:"text"})),r.a.createElement("div",{className:"flex flex-column w-20 bl b--black-05"},r.a.createElement("button",{type:"submit",className:"flex h-100 items-center justify-center f6 bg-white bn"},r.a.createElement(P.a,{icon:"arrow-right"}))))),r.a.createElement("div",{className:"relative flex flex-auto flex-column w-100 bg-center bg-cover items-start justify-start relative overflow-hidden"},this.state.comments.length>0?r.a.createElement(Sa,{ref:this.messagesList,animateOnMount:!0,id:"MessagesList",className:("discussion-large"===this.props.type?" vh64 ":" vh47 ")+" messages-list mh-150--vh db relative overflow-auto w-100 pa3 "},r.a.createElement(Ca,{items:this.props.project.comments,authors:this.state.authors,fetchAuthor:this.fetchAuthor,projectOwnerId:this.props.project.owner,me:this.context.account.user.id})):r.a.createElement("div",{className:"flex flex-column pv3 f6 fw5 black-40 tc w-100"},"No comments yet"))):r.a.createElement("div",{className:"flex flex-column flex-auto h-100 w-100 items-center justify-center"},r.a.createElement("div",{className:"flex flex-column pa5"},r.a.createElement(P.a,{type:"loading",className:"f2 black-20"})))))}}]),t}(r.a.Component);Da.contextType=Pe;y.b.div({hidden:{opacity:0,y:50},visible:{opacity:1,y:0}});var Pa=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).componentDidMount=function(){console.log("Discussion mounted",a.props),a.fetchConversation()},a.state={hasError:!1,drawerOpen:!1,activeFile:{},ready:!0,activeConversation:null,conversation:a.props.conversationId,activeStream:null,isVisible:!1},a.toggleDrawer=a.toggleDrawer.bind(Object(v.a)(a)),a.openFilePanel=a.openFilePanel.bind(Object(v.a)(a)),a.updateActiveConversation=a.updateActiveConversation.bind(Object(v.a)(a)),a.fetchConversation=a.fetchConversation.bind(Object(v.a)(a)),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"updateActiveConversation",value:function(e){var t=e.conversations,a=e.activeConversation;this.setState({activeConversation:a,conversations:t})}},{key:"openFilePanel",value:function(e){this.setState({activeFile:e}),this.toggleDrawer()}},{key:"toggleDrawer",value:function(){this.setState({drawerOpen:!this.state.drawerOpen})}},{key:"fetchConversation",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("fetchConversation",this.props.conversationId),e.next=3,z.b.fetch("conversations",this.props.conversationId).then(function(){var e=Object(p.a)(f.a.mark(function e(a){var n,r,s;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=14;break}return z.a.set("activeConversation",a),console.log("conversation",a),console.log("!conversation.hasOwnProperty(messages)",!a.hasOwnProperty("messages"),a),a.hasOwnProperty("authors")||(a.authors=[]),(n=new Set(a.participants)).add(t.context.account.user.id),r=Array.from(n),a.participants=r,console.log("fetching authors",a.participants),e.next=12,z.a.fetchAuthors({self:t,authorIds:a.participants});case 12:(s=e.sent)&&(a.authors=s,console.log("conversation",a),t.setState({activeConversation:a,conversationReady:!0}),console.log(" updated conversation ",a),setTimeout(function(){t.setState({isVisible:!0})},1e3));case 14:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){this.state.isVisible;return this.state.hasError?r.a.createElement("h1",null,"Something went wrong."):r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{id:"Discussion",className:"flex flex-column w-100 pb4 pt0"},null!==this.props.title&&r.a.createElement("div",{className:"flex pb4"},r.a.createElement(_,{title:"Discussion",docs:this.state.activeConversation&&this.state.activeConversation.messages||[],ready:this.state.conversationReady})),!this.state.conversationReady&&r.a.createElement("div",{className:("center"===this.props.loadingAlign?" items-center justify-center ":" items-center justify-start ")+" items-center justify-center  flex flex-row pv5 pr4"},r.a.createElement("div",{className:"sp sp-3balls"})),this.state.conversationReady&&r.a.createElement("div",{className:" flex flex-column flex-auto box w-100 trans-o-fast trans-y-fast "+(this.state.isVisible?" opacity-1 transform-y-0 ":" opacity-0 transform-y-50 ")},r.a.createElement("div",{style:{height:z.e.mobile()?"54vh":"auto"}},r.a.createElement(Dt,{type:"discussion-large",conversation:this.state.activeConversation,conversations:[this.state.activeConversation],activeConversationIndex:0,conversationReady:this.state.conversationReady,stream:this.state.activeStream,updateActiveConversation:this.updateActiveConversation,size:this.props.size})))),r.a.createElement(V.a,{title:"Basic Drawer",placement:"right",closable:!0,onClose:this.toggleDrawer,visible:this.state.drawerOpen,width:"60vw"},this.state.drawerOpen&&r.a.createElement("div",{className:"pointer flex flex-column justify-end items-center pa3 bg-white "},r.a.createElement("h3",{className:"f5 fw6 black tc pv2 ph3 word-break-all"},this.state.activeFile.file.originalname),r.a.createElement("div",{className:"pointer flex flex-column justify-end items-center pa3 bg-white br2 bs-b mb2 mr2"},r.a.createElement("div",{style:{backgroundImage:'url("'+this.state.activeFile.url+'")'},className:"h5 file-item bg-cover bg-center cover flex flex-column justify-end items-center pa3 bg-white br2 bs-b mb2 mr2"})))))}}]),t}(r.a.Component),Ta=Pa;Pa.contextType=Pe;var Aa=a(396),Ia=(a(762),a(398)),Ra=a.n(Ia);a(763);window.log=Ra.a;var Ma=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).componentDidMount=function(){if(console.log("Files mounted",a.props),"calendar"===a.props.type){var e=a.props.event.event.files;a.setState({files:e})}else{var t=a.props.project&&a.props.project.files&&a.props.project.files.reverse()||[];a.setState({files:t})}},a.state={hasError:!1,project:a.props.project,files:[],drawerOpen:!1,innerDrawerOpen:!1,activeFile:null,ready:!0,lightboxActive:!1,conversation:null,activeConversation:null,activeStream:null,conversationReady:!1,mboxActive:!1},a.toggleDrawer=a.toggleDrawer.bind(Object(v.a)(a)),a.toggleInnerDrawer=a.toggleInnerDrawer.bind(Object(v.a)(a)),a.openFilePanel=a.openFilePanel.bind(Object(v.a)(a)),a.toggleLightbox=a.toggleLightbox.bind(Object(v.a)(a)),a.updateActiveConversation=a.updateActiveConversation.bind(Object(v.a)(a)),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"toggleInnerDrawer",value:function(){this.setState({innerDrawerOpen:!this.state.innerDrawerOpen})}},{key:"toggleLightbox",value:function(){this.setState({lightboxActive:!this.state.lightboxActive,mboxActive:!1})}},{key:"openFilePanel",value:function(){var e=Object(p.a)(f.a.mark(function e(t){var a=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("open file panel",t),this.setState({activeFile:t}),this.toggleDrawer(),e.next=5,z.b.fetch("conversations",t.conversation).then(function(){var e=Object(p.a)(f.a.mark(function e(t){var n,r,s;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=16;break}return z.a.set("activeConversation",t),console.log("conversation",t),console.log("!conversation.hasOwnProperty(messages)",!t.hasOwnProperty("messages"),t),t.hasOwnProperty("messages")||(t.messages=[]),t.hasOwnProperty("authors")||(t.authors=[]),t.hasOwnProperty("participants")||(t.participants=[]),(n=new Set(t.participants)).add(a.context.account.user.id),r=Array.from(n),t.participants=r,console.log("fetching authors",t.participants),e.next=14,z.a.fetchAuthors({self:a,authorIds:t.participants});case 14:(s=e.sent)&&(t.authors=s,a.setState({activeConversation:t,conversationReady:!0}),console.log(" updated conversation ",t));case 16:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"toggleDrawer",value:function(){this.setState({drawerOpen:!this.state.drawerOpen,mboxActive:!1})}},{key:"updateActiveConversation",value:function(e){var t=e.conversations,a=e.activeConversation;this.setState({activeConversation:a,conversations:t})}},{key:"render",value:function(){var e=this;return this.state.hasError?r.a.createElement("h1",null,"Something went wrong."):r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{id:"Files",className:"flex flex-column w-100 pb4 pt0"},r.a.createElement("div",{className:"flex flex-row mb4 "},r.a.createElement(_,{title:"Files",docs:this.state.files,ready:this.state.ready})),r.a.createElement("div",{className:"file-dropzone flex flex-row flex-wrap mb3 "},r.a.createElement(ht,{type:"files",project:"calendar"===this.props.type?this.props.event:this.props.project,self:this})),r.a.createElement("div",{className:"flex flex-row flex-wrap justify-between col-4"},this.state.files.map(function(t,a){return r.a.createElement("div",{onClick:function(){return e.openFilePanel(t)},className:"pointer flex flex-column justify-between items-center  bg-white br2 bs-b- mb3"},r.a.createElement("div",{className:" flex flex-column justify-start items-center ph4 pt4 w-100"},"application/pdf"===t.fileType&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{backgroundSize:"60%",backgroundImage:'url("/icons/pdf2.png")'},className:"w-100 h5 file-item bg-center flex flex-column justify-end items-center pa3 bg-white br4 bs-b- mb3-"}),r.a.createElement("h3",{className:"f6 fw5 white- black-30 tc pv3 ph3 word-break-all"},t.title)),"application/vnd.openxmlformats-officedocument.wordprocessingml.document"===t.fileType&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{backgroundSize:"60%",backgroundImage:'url("/icons/docx.png")'},className:"w-100 h5 file-item bg-center flex flex-column justify-end items-center pa3 bg-white br4 bs-b-mb3"}),r.a.createElement("h3",{className:"f6 fw5 white- black-30 tc pv3 ph3 word-break-all"},t.title)),"image/png"===t.fileType&&r.a.createElement(r.a.Fragment,null," ",r.a.createElement("div",{style:{backgroundImage:'url("'+t.url+'")'},className:"w-100 h5 file-item bg-cover bg-center cover flex flex-column justify-end items-center pa3 bg-white br4 bs-b-mb3"}),r.a.createElement("h3",{className:"f6 fw5 white- black-30 tc pv3 ph3 word-break-all"},t.title)),"image/jpg"===t.fileType||"image/jpeg"===t.fileType&&r.a.createElement(r.a.Fragment,null," ",r.a.createElement("div",{style:{backgroundImage:'url("'+t.url+'")'},className:"w-100 h5 file-item bg-cover bg-center cover flex flex-column justify-end items-center pa3 bg-white br4 bs-b-mb3"}),r.a.createElement("h3",{className:"f6 fw5 white- black-30 tc pv3 ph3 word-break-all"},t.title))))}))),r.a.createElement(V.a,{title:"Basic Drawer",placement:z.e.mobile()?"bottom":"right",closable:!0,onClose:this.toggleDrawer,visible:this.state.drawerOpen,width:z.e.mobile()?"100vw":"50vw",height:z.e.mobile()?"90vh":"100vh",className:" child-bg-white "},this.state.drawerOpen&&r.a.createElement("div",{className:(this.state.mboxActive?" active ":" inactive ")+" trans-a drawer-inner pointer flex flex-column justify-start items-center pa3 bg-white h-100"},r.a.createElement("h3",{className:"f5 fw6 black tc pv2 ph3 word-break-all"},this.state.activeFile.title&&this.state.activeFile.title||""),r.a.createElement("div",{onClick:this.toggleLightbox,className:"image-preview-wrapper pointer flex flex-column justify-end items-center bg-white br2 bs-b"},r.a.createElement("img",{src:this.state.activeFile.url,className:" image-preview-wrapper w-auto h-auto file-item bg-cover bg-center cover flex flex-column justify-end items-center bg-white br3"})),r.a.createElement("button",{onClick:this.toggleInnerDrawer,className:"raleway flex flex-row items-center justify-center f5 fw6 black-50 ba bw1 b--black-05 bs-b- mt4 ph4 pv3 br2 w-100 tc mw5 hover-bg-near-white bg-white pointer trans-a "},"Open discussion"),r.a.createElement(V.a,{title:"Basic Drawer",placement:z.e.mobile()?"bottom":"right",closable:!0,onClose:this.toggleInnerDrawer,visible:this.state.innerDrawerOpen,width:z.e.mobile()?"100vw":"50vw",height:z.e.mobile()?"90vh":"100vh",className:" child-bg-white "},this.state.conversationReady&&r.a.createElement("div",{onClick:function(){e.setState({mboxActive:!0})},className:(z.a.get("isMobile")?" w-100 ":"  w-100 bg-white ")+"   mbox-wrapper pv4 ph5 flex flex-column "},this.state.conversationReady&&r.a.createElement(Dt,{type:"discussion-large",conversation:this.state.activeConversation,conversations:[this.state.activeConversation],activeConversationIndex:0,conversationReady:this.state.conversationReady,stream:this.state.activeStream,updateActiveConversation:this.updateActiveConversation}))),this.state.lightboxActive&&r.a.createElement(Aa.a,{mainSrc:this.state.activeFile.url,nextSrc:this.state.activeFile.url,prevSrc:this.state.activeFile.url,onCloseRequest:function(){return e.setState({lightboxActive:!1})}}))))}}]),t}(r.a.Component),La=Ma;Ma.contextType=Pe;var Ba=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={person:null,ready:!1},a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t,a,n,r=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="object"===typeof this.props.item?this.props.item.id:this.props.item,a=z.b.url("users")+t,n={method:"GET",headers:{Authorization:"Bearer "+z.a.get("account").tokens.access.token,"Content-Type":"application/json"}},e.next=5,fetch(a,n).then(function(e){return e.json()}).then(function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r.setState({person:t,ready:!0});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.person;return r.a.createElement("div",{className:"flex flex-row justify-between pr3 pb3"},r.a.createElement("div",{className:"    pointer flex flex-row-ns flex-row items-center justify-start  w-100-s bn-ns bb b--black-05"},this.state.ready&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{width:"30px",height:"30px",borderRadius:"100px",backgroundImage:"url("+e.profile.picture+")"},className:"cover bg-center"}),r.a.createElement("div",{className:"    flex flex-row -flex-column pt2-ns- pl3 f5 fw6 black  "},r.a.createElement("div",{className:" flex  "},e.profile.name.first),r.a.createElement("div",{className:" flex ml1"},e.profile.name.last)))))}}]),t}(r.a.Component),Fa=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={schedule:[],startTime:null,endTime:null,peopleReady:!1},console.log("Schedule props ",e),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.event.event.schedule||[],this.setState({schedule:t}),console.log("schedule",t);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"flex flex-column flex-auto w-100 ph5 pb3"},r.a.createElement("div",{className:"flex flex-row flex-auto justify-between w-100"},r.a.createElement("div",{className:"flex "},r.a.createElement("h3",{className:"f4 fw5 black-60"},"Schedule ",r.a.createElement("span",{className:"ph2 pv1 br1 bg-black-20 white f5 fw6  ml2 "},this.state.schedule.length))),r.a.createElement("div",{id:"ScheduleButtons",className:"flex flex-column"},r.a.createElement("div",{id:"",className:"flex flex-row flex-auto"},r.a.createElement("button",{onClick:this.props.toggleInnerDrawer,id:"",className:"flex flex-row flex-auto w-100 ph3 pv2 br1 bg-black-20 black-50- white f5 fw6"},"Add Schedule Item")))),r.a.createElement("div",{className:"flex flex-column flex-auto w-100 pt4"},this.state.schedule.length&&this.state.schedule.map(function(e,t){return r.a.createElement("div",{className:"flex flex-column bg-white pt4 ph4  bs-b br3 mb3"},r.a.createElement("div",{className:"flex flex-row items-center"},r.a.createElement("div",{className:"flex "},r.a.createElement("h3",{className:"f4 fw6 black ttc"},e.title)),r.a.createElement("div",{className:"flex ml3"},r.a.createElement("h3",{className:"f5 fw5 -60"},A()(e.time.start).format("HH:mm")," - ",A()(e.time.end).format("HH:mm"))),r.a.createElement("div",{className:"flex ml3"},r.a.createElement("h3",{className:"f5 fw5 -60"},e.location))),r.a.createElement("div",{className:"flex"},r.a.createElement("div",{style:{maxHeight:"300px"},className:"overflow-auto flex flex-row items-start w-100 pv3"},e.people.map(function(e,t){return r.a.createElement(Ba,{key:t,item:e})}))))})))}}]),t}(r.a.Component);function _a(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var Va=a(56);window.GeoPattern=Va;var Ua=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).resizeEvent=function(e){var t=e.event,a=e.start,n=e.end;alert("".concat(t.title," was resized to ").concat(a,"-").concat(n))},a.componentDidMount=function(){if(a.props.history&&a.props.history.location&&a.props.history.location.pathname&&"/calendar"===a.props.history.location.pathname){var e=[{label:"Add Event",action:function(){return a.toggleDialog()}}];a.context.setPage({title:"Calendar",subtitle:"...",buttons:e})}a.setButtons(),document.querySelector("body").scroll({top:0,left:0,behavior:"smooth"}),a.fetchConnections()},a.state={hasError:!1,dialogType:null,ready:!1,events:[],activeEvent:{day:new Date},isOpen:!1,drawerOpen:!1,innerDrawerOpen:!1,innerDrawerOpen2:!1,insertEventLocation:null,x:0,y:0,newEvent:null,buttons:[],views:[],activeButton:null,activeView:null,userIsAdmin:!1,checked:[],connections:[],group:[],startTime:null,endTime:null,buttonLoading:!1,calendarReady:!0,activeConversationId:null,calendarRefresh:!1},a.toggleDialog=a.toggleDialog.bind(Object(v.a)(a)),a.toggleDrawer=a.toggleDrawer.bind(Object(v.a)(a)),a.toggleInnerDrawer=a.toggleInnerDrawer.bind(Object(v.a)(a)),a.moveEvent=a.moveEvent.bind(Object(v.a)(a)),a.newEvent=a.newEvent.bind(Object(v.a)(a)),a.setLocation=a.setLocation.bind(Object(v.a)(a)),a.addEvent=a.addEvent.bind(Object(v.a)(a)),a.getProjectEvents=a.getProjectEvents.bind(Object(v.a)(a)),a.getOwnEvents=a.getOwnEvents.bind(Object(v.a)(a)),a.reload=a.reload.bind(Object(v.a)(a)),a.onSelectEvent=a.onSelectEvent.bind(Object(v.a)(a)),a.onSelectEvent2=a.onSelectEvent2.bind(Object(v.a)(a)),a.onSelectSlot=a.onSelectSlot.bind(Object(v.a)(a)),a.getClickPosition=a.getClickPosition.bind(Object(v.a)(a)),a.dateClick=a.dateClick.bind(Object(v.a)(a)),a.reload=a.reload.bind(Object(v.a)(a)),a.setView=a.setView.bind(Object(v.a)(a)),a.setButtons=a.setButtons.bind(Object(v.a)(a)),a.checkRoles=a.checkRoles.bind(Object(v.a)(a)),a.eventImage=a.eventImage.bind(Object(v.a)(a)),a.getDates=a.getDates.bind(Object(v.a)(a)),a.setReady=a.setReady.bind(Object(v.a)(a)),a.timeOnChange=a.timeOnChange.bind(Object(v.a)(a)),a.insertScheduleItem=a.insertScheduleItem.bind(Object(v.a)(a)),a.addUserToEvent=a.addUserToEvent.bind(Object(v.a)(a)),a.fetchConnections=a.fetchConnections.bind(Object(v.a)(a)),a.insertScheduleItem=a.insertScheduleItem.bind(Object(v.a)(a)),a.insertScheduleItem2=a.insertScheduleItem2.bind(Object(v.a)(a)),a.setDrawerData=a.setDrawerData.bind(Object(v.a)(a)),a.projectImage=a.projectImage.bind(Object(v.a)(a)),a.fullCalendar=r.a.createRef(),a.scheduleTitle=r.a.createRef(),a.scheduleDescription=r.a.createRef(),a.scheduleLocation=r.a.createRef(),a.scheduleForm=r.a.createRef(),a.projectCalendar=r.a.createRef(),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"setDrawerData",value:function(e){var t=e.day,a=e.events;console.log("events per day",t,a),this.setState({drawerType:"allevents",allevents:a,day:t}),this.toggleDrawer()}},{key:"projectImage",value:function(e){return"project"===e.type?e.project.hasOwnProperty("media")?e.project.media.images[0].url:null:"event"===e.type?null!==e.picture?e.picture:null:void 0}},{key:"fetchConnections",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=z.d.get("account").user.profile.connections,e.next=3,z.d.fetchConnections({self:this,connections:t});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"insertScheduleItem2",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t,a,n,r,s=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("insert schedule item"),this.setState({buttonLoading:!0}),console.log("form",this.scheduleForm),console.log("Event type",this.state.activeEvent),t=this.state.activeEvent.event.type,a={day:this.state.activeEvent.day,time:{start:this.state.startTime,end:this.state.endTime},title:this.scheduleTitle.current.value,description:this.scheduleDescription.current.value,location:this.scheduleLocation.current.value,people:this.state.group.map(function(e){return e.id})},console.log("schedule item",a),"event"!==t){e.next=14;break}return(n=this.state.activeEvent.event).hasOwnProperty("schedule")||(n.schedule=[]),"undefined"===n.schedule&&(n.schedule=[]),n.schedule.push(a),e.next=14,z.c.updateEvent({self:this,event:n}).then(function(e){s.reload(),s.setState({buttonLoading:!1,innerDrawerOpen:!1})});case 14:if("project"!==t){e.next=20;break}return(r=this.state.activeEvent.event.project).hasOwnProperty("schedule")||(r.schedule=[]),r.schedule.push(a),e.next=20,z.c.updateProject({self:this,project:r}).then(function(e){s.reload(),s.setState({buttonLoading:!1,innerDrawerOpen:!1})});case 20:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"addUserToEvent",value:function(e){var t=e.user,a=e.index,n=this.state.checked;n[a]=!this.state.checked[a];var r=this.state.group;r.push(t),this.setState({checked:n,group:r})}},{key:"insertScheduleItem",value:function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"timeOnChange",value:function(e){console.log("time",A()(e.e).format("HH:mm")),"start"===e.type&&this.setState({startTime:e.e}),"end"===e.type&&this.setState({endTime:e.e})}},{key:"setReady",value:function(){this.setState({ready:!0})}},{key:"insertScheduleItem",value:function(){}},{key:"eventImage1",value:function(){var e=this.state.activeEvent.event;return e.hasOwnProperty("picture")?e.picture:null}},{key:"eventImage",value:function(e){return"project"===e.type?e.project.hasOwnProperty("media")?e.project.media.images[0].url:null:"event"===e.type?null!==e.picture?e.picture:null:void 0}},{key:"toggleDrawer",value:function(){this.setState({buttonLoading:!1,drawerOpen:!this.state.drawerOpen})}},{key:"toggleInnerDrawer",value:function(){this.setState({innerDrawerOpen:!this.state.innerDrawerOpen})}},{key:"checkRoles",value:function(e){var t=z.d.get("account").user.id;console.log(" "),console.log(" "),console.log("userid",t),console.log(" "),console.log("owner",e.owner),console.log(" "),console.log(" "),console.log(" ");var a=e.admins;e.owner===t?this.setState({userIsAdmin:!0}):a.includes(t)?this.setState({userIsAdmin:!0}):this.setState({userIsAdmin:!1})}},{key:"onSelectEvent",value:function(e){console.log("onSelectEvent",e);var t=e.e,a=e.data,n=a.event,r=a.day;if(t.stopPropagation(),console.log("select event",n),this.setState({drawerType:"event"}),"project"===n.type){var s=n.project;this.checkRoles(s);var c=n.project.conversations.filter(function(e){return e.day===r})[0].conversation;this.setState({eventType:"project",activeConversationId:c})}if("event"===n.type){n.conversations;var o=n.conversationId;this.setState({eventType:"custom",activeConversationId:o})}this.setState({activeEvent:a}),this.toggleDrawer()}},{key:"onSelectEvent2",value:function(e){console.log("onSelectEvent",e);var t=e.item,a=(e.index,e.day),n=t;if(this.setState({drawerType:"event"}),"project"===n.type){var r=n.project;this.checkRoles(r);var s=n.project.conversations.filter(function(e){return e.day===a})[0].conversationId;this.setState({eventType:"project",activeConversationId:s})}else{var c=n.conversations.filter(function(e){return e.day===a})[0].conversationId;this.setState({eventType:"custom",activeConversationId:c})}this.setState({activeEvent:{event:n,day:a}})}},{key:"setLocation",value:function(e){console.log("setLocation",e),this.setState({insertEventLocation:e})}},{key:"moveEvent",value:function(e){var t=e.event,a=e.start,n=e.end,r=(e.isAllDay,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_a(a,!0).forEach(function(t){Object(Q.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_a(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},t,{start:a,end:n,allDay:t.allDay}));alert("".concat(t.title," was dropped onto ").concat(r.start))}},{key:"dateClick",value:function(e){alert(e);this.fullCalendar.current.getApi()}},{key:"newEvent",value:function(e){console.log("new event ",e);var t={day:e},a=A()(t.start);a=a.set({hour:"10",minute:"00",second:"00"});var n=A()(t.end);n=n.set({hour:"17",minute:"00",second:"00"}),t.start=a,t.end=n,this.setState({newEvent:t,dialogType:"addEvent"}),this.toggleDialog()}},{key:"toggleDialog",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"getDates",value:function(e,t){var a=[],n=A()(e);for(t=A()(t);n<=t;)a.push(A()(n).format("YYYY-MM-DD")),n=A()(n).add(1,"days");return a}},{key:"addEvent",value:function(){var e=Object(p.a)(f.a.mark(function e(t){var a,n,r,s,c,o,i,l=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.state.insertEventLocation,n=t.title,r=t.start,s=t.end,c=z.d.get("account").user,o=this.getDates(r,s),console.log("days",o),i={title:n,description:"",location:a,start:r,end:s,user:c.id,conversationId:null,files:[],people:[],days:o},e.next=10,z.c.createEvent({self:this,event:i}).then(function(e){return console.log("createEvent res ",e),l.setState({newEvent:null}),console.log("context",l.context),l.projectCalendar.current.start(),console.log("calendar context ",l.context),e});case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"reload",value:function(){var e=this;this.setState({ready:!1}),setTimeout(function(){e.setState({ready:!0})},500)}},{key:"getProjectEvents",value:function(){var e=[],t=z.d.get("subscribedProjects"),a=!0,n=!1,r=void 0;try{for(var s,c=t[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var o=s.value,i={id:o.id,title:o.title,start:A()(o.start_date).tz("Africa/Johannesburg").toDate(),end:A()(o.end_date).tz("Africa/Johannesburg").toDate()};e.push(i)}}catch(l){n=!0,r=l}finally{try{a||null==c.return||c.return()}finally{if(n)throw r}}this.setState({events:e})}},{key:"getOwnEvents",value:function(){var e=this.state.events,t="undefined"!==typeof z.d.get("account").user.profile.events?z.d.get("account").user.profile.events:[],a=!0,n=!1,r=void 0;try{for(var s,c=t[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var o=s.value,i={id:o.title+o.start,title:o.title,start:A()(o.start).tz("Africa/Johannesburg").toDate(),end:A()(o.end).tz("Africa/Johannesburg").toDate()};e.push(i)}}catch(l){n=!0,r=l}finally{try{a||null==c.return||c.return()}finally{if(n)throw r}}z.d.store({label:"calendarEvents",value:e}),this.setState({events:e,ready:!0}),console.log("events",e)}},{key:"onSelectSlot",value:function(e){console.log("select slot",e)}},{key:"getClickPosition",value:function(e){console.log(e)}},{key:"reload",value:function(){}},{key:"setView",value:function(e){var t=e.view,a=e.button;this.setState({view:t,activeButton:a}),z.d.store({label:"projectView",value:t}),z.d.store({label:"activeButton",value:a}),"discussion"===t&&setTimeout(function(){return document.querySelector("body").scroll({top:130,left:0,behavior:"smooth"})},1e3)}},{key:"setButtons",value:function(){var e=this,t=[{title:"Overview",role:"general",function:function(){return e.setView({filter:"Overview",button:0})}},{title:"Discussion",role:"general",function:function(){return e.setView({filter:"Discussion",button:1})}},{title:"Files",role:"general",function:function(){return e.setView({filter:"Files",button:2})}},{title:"People",role:"admin",function:function(){return e.setView({filter:"People",button:4})}},{title:"Checklist",role:"admin",function:function(){return e.setView({filter:"Checklist",button:5})}}],a=[{title:"Overview",role:"general"},{title:"Discussion",role:"general"},{title:"Files",role:"general"},{title:"People",role:"admin"},{title:"Checklist",role:"admin"}];this.setState({buttons:t,activeButton:t[0],views:a,view:a[0]})}},{key:"render",value:function(){var e=this;return this.state.hasError?r.a.createElement("h1",null,"Something went wrong."):r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{id:"Calendar",className:(this.props.dashboard?"  ":this.props.profile?" mt3- ":" pa4- -mt3")+" w-100 mw9- -center  pb6 "},r.a.createElement("section",{id:"",className:"flex flex-column flex-row-ns- justify-between mb4  -ph4 "},r.a.createElement("div",{className:(this.props.dashboard?" ":this.props.profile?"":"  ph0 ph-4-ns ")+" flex flex-row flex-wrap justify-between br3- overflow-hidden -bg-white-50 "},r.a.createElement("div",{className:"relative flex flex-column w-100 bg-white- pb5"},r.a.createElement(_t,{ref:this.projectCalendar,onSelectEvent:this.onSelectEvent,newEvent:this.newEvent,onSelectSlot:this.onSelectSlot,reload:this.reload,setReady:this.setReady,ready:this.state.calendarReady,user:z.d.get("account").user,setDrawerData:this.setDrawerData,profile:this.props.profile}))))),r.a.createElement(V.a,{title:"Basic Drawer",placement:"right",closable:!0,onClose:this.toggleDrawer,visible:this.state.drawerOpen,width:"60vw",height:"100vh"},r.a.createElement(V.a,{title:"Basic Drawer",placement:"right",onClose:function(){return e.setState({innerDrawerOpen2:!1})},visible:this.state.innerDrawerOpen2,width:"30vw",height:"100vh"},this.state.innerDrawerOpen2&&r.a.createElement("div",{className:"pointer flex flex-column justify-start items-start bg-black-05 h-100"},r.a.createElement("div",{className:"flex flex-column w-100"},r.a.createElement("div",{className:"f4 fw4 black-60 ph4 pt4 w-100 pb4"},r.a.createElement("span",{className:"fw6 black-80"},"Something"))))),this.state.drawerOpen&&"allevents"===this.state.drawerType&&r.a.createElement("div",{className:"pointer flex flex-column justify-start items-start bg-black-05 h-100"},r.a.createElement("div",{className:"flex flex-column w-100"},r.a.createElement("div",{className:"f4 fw4 black-60 ph4 pt4 w-100 pb4"},"Events for"," ",r.a.createElement("span",{className:"fw6 black-80"},A()(this.state.day).format("Do MMMM YYYY")))),r.a.createElement("div",{className:"flex flex-column w-100 ph4 pb4"},this.state.allevents.map(function(t,a){return r.a.createElement("div",{onClick:function(n){return e.onSelectEvent2({item:t,index:a,day:e.state.day})},className:"flex flex-row items-center w-100 mb3"},r.a.createElement("div",{style:{backgroundImage:null===e.projectImage(t)?Va.generate(t.title).toDataUrl():'url("'+e.projectImage(t)+'")'},className:"flex w3 h3 ml2- hover-slide-up trans-b bg-cover bg-center br2 -round -bg-green mb2-"}),r.a.createElement("div",{className:"flex"},r.a.createElement("h3",{className:"ttc f4 fw5 black-60 tc word-break-all mb0 ml3"},t.title)))}))),this.state.drawerOpen&&"event"===this.state.drawerType&&r.a.createElement("div",{className:"pointer flex flex-column justify-start items-start bg-white h--100"},r.a.createElement("div",{className:"flex flex-row overflow-hidden w-100"},this.state.buttons.filter(function(e){return"general"===e.role}).map(function(t,a){return r.a.createElement("button",{title:t.title,onClick:function(){return e.setView({view:e.state.views[a],button:t})},id:t.title,className:" bl b--black-05 "+(e.state.activeButton.title===t.title?" bg-black-20 ":" bg-black-30 ")+" flex flex-column pa0 mr3- pointer justify-center items-center flex-auto"},r.a.createElement("div",{id:"",className:"flex flex-row ph0 pv0 items-center justify-center"},r.a.createElement("span",{className:"f5 fw6 black-40- white ph3 pv4 w-100 tc"},t.title)))}),"project"===this.state.eventType&&this.state.buttons.filter(function(t){return"admin"===t.role&&e.state.userIsAdmin}).map(function(t,a){return r.a.createElement("button",{title:t.title,onClick:function(){return e.setView({view:e.state.views[a+3],button:t})},id:t.title,className:" bl b--black-05 "+(e.state.activeButton.title===t.title?" bg-black-20 ":" bg-black-30 ")+" flex flex-column pa0 mr3- pointer justify-center items-center flex-auto"},r.a.createElement("div",{id:"",className:"flex flex-row ph0 pv0 items-center justify-center"},r.a.createElement("span",{className:"f5 fw6 black-40- white ph3 pv4 w-100 tc "},t.title)))})),"Discussion"===this.state.view.title&&r.a.createElement("div",{className:"flex flex-column justify-start items-start bg-white h-1-00 w-100 pa5"},r.a.createElement(Ta,{conversationId:this.state.activeConversationId,loadingAlign:"left",title:"Discussion",size:"full"})),"Overview"===this.state.view.title&&this.state.activeEvent&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flex flex-column justify-start items-start bg-white h-1-00 w-100 pa5"},r.a.createElement("div",{className:"w-100 flex flex-row justify-between items-center pb4"},r.a.createElement("span",{className:"flex f2 fw1 black-50"},A()(this.state.activeEvent.day).format("DD MMMM")),r.a.createElement("span",{className:"flex f3 fw6 black ml4"},A()(this.state.activeEvent.day).format("YYYY"))),r.a.createElement("h3",{className:"f3 fw6 black tc pv2 word-break-all"},this.state.activeEvent.event.title)),r.a.createElement(Fa,{event:this.state.activeEvent,user:z.d.get("account").user,toggleInnerDrawer:this.toggleInnerDrawer})),"Files"===this.state.view.title&&this.state.activeEvent&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flex flex-column justify-start items-start bg-white h-1-00 w-100 pa5"},r.a.createElement(La,{type:"calendar",event:this.state.activeEvent})))),r.a.createElement(V.a,{placement:"right",closable:!0,onClose:this.toggleInnerDrawer,visible:this.state.innerDrawerOpen,width:z.e.mobile()?"100vw":"50vw",height:"100vh"},this.state.innerDrawerOpen&&r.a.createElement("div",{className:"pointer flex flex-column justify-start items-start bg-black-05 h--100"},r.a.createElement("div",{className:"flex flex-column w-100"},r.a.createElement("div",{className:"f4 fw6 black-90 ph4 pt4 w-100 pb4"},"Add Schedule Item"),r.a.createElement("div",{className:"flex flex-column overflow-hidden w-100 ph4 pb3 pt3"},r.a.createElement("div",{className:"form-row flex flex-row items-center mb4"},r.a.createElement("label",{className:"f4 fw5 black-50 pb2- w-30 pr3"},"Title"),r.a.createElement("input",{ref:this.scheduleTitle,type:"text",required:!0,className:"flex flex-column ph4 pv3 bn br1- round bg-white black-50 f4 fw5 bs-a- w-100"})),r.a.createElement("div",{className:"form-row flex flex-row items-center mb4"},r.a.createElement("label",{className:"f4 fw5 black-50 pb2- w-30 pr3"},"Description"),r.a.createElement("input",{ref:this.scheduleDescription,type:"text",required:!0,className:"flex flex-column ph4 pv3 bn br1- round bg-white black-50 f4 fw5 bs-a- w-100"})),r.a.createElement("div",{className:"form-row flex flex-row items-center mb4"},r.a.createElement("label",{className:"f4 fw5 black-50 pb2- w-30 pr3"},"Location"),r.a.createElement("input",{ref:this.scheduleLocation,type:"text",required:!0,className:"flex flex-column ph4 pv3 bn br1- round bg-white black-50 f4 fw5 bs-a- w-100"})),r.a.createElement("div",{className:"flex flex-row overflow-hidden w-100 ml6 pl3"},r.a.createElement("div",{className:"flex flex-column overflow-hidden w-100 pa3"},r.a.createElement("label",{className:"f4 fw5 black-50 pb2- w-30 pr3"},"Start"),r.a.createElement(ce.a,{className:"-bp3-dark",onChange:function(t){return e.timeOnChange({e:t,type:"start"})},selectAllOnFocus:!1,showArrowButtons:!0,useAmPm:!0,required:!0})),r.a.createElement("div",{className:"flex flex-column w-100 pa3"},r.a.createElement("label",{className:"f4 fw5 black-50 pb2- w-30 pr3"},"End"),r.a.createElement(ce.a,{className:"bp3-dark-",onChange:function(t){return e.timeOnChange({e:t,type:"end"})},selectAllOnFocus:!1,showArrowButtons:!0,useAmPm:!0,required:!0}))),r.a.createElement("div",{className:"form-column flex flex-row items-start w-100 mb4 pt4"},r.a.createElement("label",{className:"f4 fw5 black-50 pb2- w-30 pr3"},"People ",r.a.createElement("button",{onClick:function(){return e.setState({innerDrawerOpen2:!0})},className:"flex pv2 ph4 f5 fw5 black"})),r.a.createElement("div",{style:{maxHeight:"300px"},className:"overflow-auto flex flex-column items-start w-100 mb4-"},this.state.connections.map(function(t,a){return r.a.createElement("div",{className:"flex flex-row justify-between w-100"},r.a.createElement("div",{className:"    pointer flex flex-row-ns flex-row items-center justify-start  w-100-s bn-ns bb b--black-05 pb4"},r.a.createElement("div",{style:{width:"40px",height:"40px",borderRadius:"100px",backgroundImage:"url("+t.profile.picture+")"},className:"cover bg-center"}),r.a.createElement("div",{className:"    flex flex-row -flex-column pt2-ns- pl3 f5 fw6 black  "},r.a.createElement("div",{className:" flex  "},t.profile.name.first),r.a.createElement("div",{className:" flex ml1"},t.profile.name.last))),r.a.createElement("div",{className:"  checkbox-square  flex flex-row -flex-column pt2-ns pl3 f5 fw6 black ph4  "},r.a.createElement(X.a,{type:"checkbox",onChange:function(){return e.addUserToEvent({user:t,index:a})},checked:e.state.checked[a]})))})))),r.a.createElement("div",{className:"Buttons flex flex-row justify-between center w-100"},r.a.createElement("div",{className:"flex flex-column w-100 pa4 bg-white"},r.a.createElement("button",{onClick:this.insertScheduleItem2,className:"br1- round bs-b bg-black-20 ph3 pv2 pointer bn relative  "},this.state.buttonLoading&&r.a.createElement("div",{className:"flex flex-column pv3 items-center"},r.a.createElement("div",{className:"sp sp-3balls"})),!this.state.buttonLoading&&r.a.createElement("span",{className:"f4 fw6 white pv2 flex items-center justify-center"},"Save")))))))),r.a.createElement(Be.a,Object.assign({className:"bp3-light",icon:"info-sign",onClose:this.toggleDialog,title:"Add Event"},this.state),r.a.createElement(xa,{addEvent:this.addEvent,setLocation:this.setLocation,eventData:this.state.newEvent})))}}]),t}(n.Component),Ja=Ua;Ua.contextType=Pe;var za=a(399),Ya=a.n(za),Ga=a(56);window.GeoPattern=Ga;var Ha=function(e){return r.a.createElement("section",{id:"Network",className:"flex mt4 w-100"},r.a.createElement("div",{className:"flex flex-column mb2 pa0 br1 bg--white w-100"},r.a.createElement(ca,{title:"Network",functionButton:{title:"View All",icon:"ring",function:function(){return e.addToNetwork()}},labels:[{text:"connections",count:e.connections.length},{text:"pending",count:e.user.networkPending||0}]}),r.a.createElement("div",{className:"flex flex-row w-100"},r.a.createElement("div",{className:"flex flex-auto flex-column pb0 "},r.a.createElement("div",{className:"flex flex-row flex-wrap f4 fw4 black-60 mb0 pt3 pb3"},e.connections.map(function(t,a){return r.a.createElement(D.a,{content:r.a.createElement("div",{className:"flex flex-column"},r.a.createElement("div",{onClick:function(){return e.navigateToUser({id:t.id})},className:"pointer flex f6 fw5 black-60 ph3 pv2 hover-black bb b--black-05"},"View Profile"),r.a.createElement("div",{onClick:function(){return e.addToNetwork(t)},className:"pointer flex f6 fw5 black-60 ph3 pv2 hover-black bb b--black-05"},"Add to network"),r.a.createElement("div",{onClick:function(){return e.sendMessage(t)},className:"pointer flex f6 fw5 black-60 ph3 pv2 hover-black"},"Send Message")),trigger:"hover"},r.a.createElement("div",{onClick:function(){e.isCurrentUser?e.history.push("/user/"+t.id):e.navigateToUser({id:t.id})},className:"  pointer flex flex-column-ns flex-row pa3-ns pa4 items-center justify-start  w-100-s bn-ns bb b--black-05"},r.a.createElement("div",{style:{width:"80px",height:"80px",borderRadius:"100px",backgroundImage:t.profile.picture.length?"url("+t.profile.picture+")":Ga.generate(t.profile.name.first+t.profile.name.last).toDataUrl()},className:"cover bg-center"}),r.a.createElement("div",{className:"    flex flex-row -flex-column pt2-ns pl3 f5 fw6 black  "},r.a.createElement("div",{className:" flex  "},t.profile.name.first),r.a.createElement("div",{className:" flex ml1"},t.profile.name.last))))}),0===e.connections.length&&r.a.createElement("div",{className:"flex flex-column w-100 pv3 items-center justify-center ba- -b--black-05 br2"},r.a.createElement("div",{className:"raleway flex w-100 pv3- f5 fw6 black-30 tc justify-center"},"You do not have any network connections yet.")))))))},qa=Xe,Wa=(Ya.a,Ha),Ka=a(56);window.GeoPattern=Ka;var Za=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).showModal=function(){a.setState({insertModalVisible:!0})},a.handleOk=function(e){console.log(e),a.setState({insertModalVisible:!1})},a.handleCancel=function(e){console.log(e),a.setState({insertModalVisible:!1})},a.state={isOpen:!1,dialogType:"",dialogTitle:"",ready:!1,insertModalVisible:!1,chefInfoVisible:!1,loading:!1,toMessages:!1,conversationReady:!1,activeTab:"1",drawerReady:!1,progressBarPercent:0,progressBarActive:!1,showLocationForm:!1,showOnboardingScreen:!1,account:null,searchCity:"",uploadType:"profileImage",connections:[],connectionsReady:!1,AddToNetworkButtonLoading:!1,AddToProjectButtonLoading:!1,recentWorkProjects:[],subscribedProjectsReady:!1,user:null},a.showDrawer=a.showDrawer.bind(Object(v.a)(a)),a.hideDrawer=a.hideDrawer.bind(Object(v.a)(a)),a.refresh=a.refresh.bind(Object(v.a)(a)),a.setLocation=a.setLocation.bind(Object(v.a)(a)),a.start=a.start.bind(Object(v.a)(a)),a.focusLocationSearch=a.focusLocationSearch.bind(Object(v.a)(a)),a.reserve=a.reserve.bind(Object(v.a)(a)),a.sendMessage=a.sendMessage.bind(Object(v.a)(a)),a.toggleDialog=a.toggleDialog.bind(Object(v.a)(a)),a.addToNetwork=a.addToNetwork.bind(Object(v.a)(a)),a.addToProject=a.addToProject.bind(Object(v.a)(a)),a.cv=a.cv.bind(Object(v.a)(a)),a.networkSeeAll=a.networkSeeAll.bind(Object(v.a)(a)),a.editBio=a.editBio.bind(Object(v.a)(a)),a.submitBio=a.submitBio.bind(Object(v.a)(a)),a.submitProfile=a.submitProfile.bind(Object(v.a)(a)),a.editSkills=a.editSkills.bind(Object(v.a)(a)),a.updateSkills=a.updateSkills.bind(Object(v.a)(a)),a.editProfile=a.editProfile.bind(Object(v.a)(a)),a.closeDialog=a.closeDialog.bind(Object(v.a)(a)),a.avatar=a.avatar.bind(Object(v.a)(a)),a.fetchConnections=a.fetchConnections.bind(Object(v.a)(a)),a.userLocation=a.userLocation.bind(Object(v.a)(a)),a.addRecentWorkProject=a.addRecentWorkProject.bind(Object(v.a)(a)),a.navigateToUser=a.navigateToUser.bind(Object(v.a)(a)),console.log("[[ OwnProfile props ]]",e),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"navigateToUser",value:function(e){var t=this,a=e.id;this.setState({ready:!1,userId:null,user:null,connections:[],projects:[],events:[],subscribedProjectsReady:!1}),setTimeout(function(){t.props.history.push("/null"),t.props.history.push("/user/"+a)},300)}},{key:"addRecentWorkProject",value:function(){this.toggleDialog({type:"addPortfolioProject",title:"Add a Project"})}},{key:"userLocation",value:function(){var e=this.context.account.user;return e.profile.location&&"undefined"!==typeof e.profile.location.County?e.profile.location.County:e.profile.location&&"undefined"!==typeof e.profile.location.address.county?e.profile.location.address.county:""}},{key:"fetchConnections",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.context.account.user.profile.connections,e.next=3,z.a.fetchConnections({self:this,connections:t});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"submitBio",value:function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,z.a.submitBio({self:this,data:t});case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"updateSkills",value:function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.updateSkills({self:this,skills:t});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"submitProfile",value:function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,z.a.submitProfile({self:this,data:t});case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"toggleDialog",value:function(e){var t=e.type,a=e.title;this.setState({isOpen:!this.state.isOpen,dialogType:t,dialogTitle:a})}},{key:"closeDialog",value:function(){this.setState({isOpen:!1})}},{key:"editBio",value:function(){this.toggleDialog({type:"bio",title:"Edit your bio"})}},{key:"editSkills",value:function(){this.toggleDialog({type:"editSkills",title:"Edit your skills"})}},{key:"editProfile",value:function(){this.toggleDialog({type:"profile",title:"Edit your profile"})}},{key:"networkSeeAll",value:function(){this.toggleDialog({type:"bio",title:"Edit your bio"})}},{key:"addToNetwork",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({AddToNetworkButtonLoading:!0}),t=this.state.user,e.next=4,z.a.addToNetwork({self:this,item:t});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"addToProject",value:function(){}},{key:"cv",value:function(){this.toggleDialog({type:"cv",title:"Upload your CV"})}},{key:"focusLocationSearch",value:function(){}},{key:"reserve",value:function(e){console.log(e),this.setState({activeDoc:e})}},{key:"sendMessage",value:function(){var e=Object(p.a)(f.a.mark(function e(t){var a,n,r=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("doc",t),a=this.context.account.user.id,n=t.id,e.next=5,z.c.checkConversationExists({self:this,selfUserId:a,recipientId:t.id}).then(function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("checkConversationExists response",t),t.exists){e.next=6;break}return e.next=4,z.c.createNewConversation({self:r,selfUserId:a,recipientId:n}).then(function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("newly created conversation ",t),z.a.set("activeConversation",t),r.props.history.push("/messages");case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 4:e.next=8;break;case 6:z.a.set("activeConversation",t.conversation),r.props.history.push("/messages");case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"refresh",value:function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.refresh({self:this});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"showDrawer",value:function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.showDrawer({chef:t,self:this});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"hideDrawer",value:function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.hideDrawer({self:this});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"submitReservationRequest",value:function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.submitReservationRequest({data:t,self:this});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"setLocation",value:function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.setLocation({self:this});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"start",value:function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.setLocation({self:this});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"avatar",value:function(e){console.log("avatar ",e);var t=e.user;return t&&t.profile&&t.profile.picture.length>0?t.profile.picture:"/img/placeholder.png"}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidUpdate",value:function(){console.log("[[ Home Updated ]]",this.props)}},{key:"componentWillMount",value:function(){z.c.checkAuth(this).then(function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Check Authorization Status",t),!1!==t){e.next=3;break}return e.abrupt("return");case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}},{key:"componentDidMount",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t,a,n=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.context.setPage({title:"Profile",subtitle:"..."}),!this.context.account||!this.context.account.user){e.next=11;break}return t=this.context.account.user,this.context.account&&this.context.account.user&&this.context.account.user.profile&&0===this.context.account.user.profile.name.first.length&&this.editProfile(),a=t&&t.id,this.setState({user:t}),e.next=8,z.c.fetchSubscribedProjects({self:this,userId:a}).then(function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({projects:t,subscribedProjectsReady:!0,ready:!0});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 8:return e.sent,e.next=11,z.a.fetchConnections({self:this,connections:t.profile.connections}).then(function(e){n.setState({connectionsReady:!0}),z.a.set("connections",e)});case 11:document.querySelector("body").scroll({top:0,left:0,behavior:"smooth"});case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(De,null,function(t){return e.state.ready&&r.a.createElement(k,null,r.a.createElement("section",{id:"Home",className:" w-100 mw8 center pa4-ns pa0 pb6 "},r.a.createElement("div",{onClick:e.refresh,className:"absolute top-0 right-0 pa4 pointer black-30"},r.a.createElement(P.a,{type:"sync",className:(e.state.ready?" inactive ":" active ")+" loading-icon "})),r.a.createElement("section",{id:"Profile",className:"flex flex-column w-100 pb3 pt3"},r.a.createElement("div",{className:"flex flex-row-ns flex-column w-100 justify-center items-center"},r.a.createElement("div",{className:"flex flex-column w-100="},r.a.createElement(Lt.a,{placement:"top",title:"Update your avatar"},r.a.createElement("div",{className:"round pa1 bg-white"},r.a.createElement("div",{onClick:function(){return e.toggleDialog({type:"profileImage",title:"Image Upload"})},style:{width:"150px",height:"150px",backgroundImage:t.account.user.profile.picture.length?"url("+t.account.user.profile.picture+")":Ka.generate(t.account.user.profile.name.first+t.account.user.profile.name.last).toDataUrl()},className:"pointer round  cover bg-center"})))),r.a.createElement("div",{className:"flex flex-column justify-center w-100 ph4-ns ph0"},r.a.createElement("div",{className:"f4 flex flex-row-ns flex-column items-center-ns items-center w-100 raleway"},r.a.createElement("span",{className:"f3 fw6 mv0-ns mv4"},t.account.user.profile.name&&t.account.user.profile.name.first," ",t.account.user.profile.name&&t.account.user.profile.name.last),r.a.createElement("span",{className:"flex items-start f6 fw6 ml3-ns whi-te ph3 pv2 ba b--black-05 br1 bg-white black -ts-a"},t.account.user.position," "),r.a.createElement(P.a,{onClick:e.editProfile,icon:"edit",iconSize:12,className:"pointer black-30 ml2"})),r.a.createElement("div",{className:"flex flex-row -nsflex-column w--100 black-60 raleway flex-wrap items-center justify-start-ns justify-between ph4 ph0-ns pt3 pb3 bt b--black-05 mt4 mt3-ns"},r.a.createElement("div",{className:"flex flex-column w--100 pb1-ns pb2 mr3"},r.a.createElement("span",{className:"flex-column flex f6 fw4 black-40 items-start"},r.a.createElement("span",{className:"flex mb3"},"Age"),r.a.createElement("span",{className:"flex items-center justify-center f6 fw6 -ml3-ns black-50- white ph2 pv1 ba b--black-05 br1 -round bw1- bg-white-20- bg-black -ts-a tc ml2-"},A()().diff(t.account.user.profile.dob,"years")))),r.a.createElement("div",{className:"flex flex-column w--100 pb1-ns pb2 mr3"},r.a.createElement("span",{className:"flex-column flex f6 fw4 black-40 items-start"},r.a.createElement("span",{className:"flex  mb3"},"Gender"),r.a.createElement("span",{className:"ttc flex items-center justify-center f6 fw6 -ml3-ns black-50- white ph2 pv1 ba b--black-05 br1 -round bw1- bg-white-20- bg-black -ts-a tc ml2-"},t.account.user.profile.gender&&t.account.user.profile.gender||""))),r.a.createElement("div",{className:"flex flex-column w--100 pb1-ns pb2 mr3"},r.a.createElement("span",{className:"flex-column flex f6 fw4 black-40 items-start"},r.a.createElement("span",{className:"flex  mb3"},"Location"),r.a.createElement("span",{className:"flex items-center justify-center f6 fw6 -ml3-ns black-50- white ph2 pv1 ba b--black-05 br1 -round bw1- bg-white-20- bg-black -ts-a tc ml2-"},e.userLocation()))))))),z.a.get("isMobile")&&r.a.createElement("section",{id:"ProfileButtons"},r.a.createElement("div",{className:"flex flex-row mb2-ns w-100 bt b--black-05 ph4 pv4 bg-black-05"},r.a.createElement("button",{title:"View or upload CV",id:"CV-button",className:"db relative w-100 pa3 ph4 pv3 br1 bg-black- bg-green round"},r.a.createElement("div",{id:"",className:"db relative w-100"},r.a.createElement("span",{className:"f5 fw6 black-60- white ph3-"},"Cirriculum Vitae"," ")))),r.a.createElement("div",{className:"flex flex-row mb2-ns w-100 bt b--black-05 "},r.a.createElement("button",{title:"View or upload CV",id:"CV-button",className:"db relative w-100 pa3 ph4 pv3 br1- bg-black-30- bg-green-",style:{background:"#e8e8ec"}},r.a.createElement("div",{id:"",className:"db relative w-100"},r.a.createElement("span",{className:"f6 fw6 black-50 -white ph3-"},"Add to Network"))),r.a.createElement("button",{title:"View or upload CV",id:"CV-button",className:"db relative w-100 pa3 ph4 pv3 br1- bg-black-30- bg-gree-n bl b--white-20 bw1",style:{background:"#e8e8ec"}},r.a.createElement("div",{id:"",className:"db relative w-100"},r.a.createElement("span",{className:"f6 fw6 black-50 -white ph3-"},"Send Message"))))),!z.a.get("isMobile")&&r.a.createElement("section",{id:"ProfileButtons"},r.a.createElement("div",{className:"flex flex-row mb0-ns w-100 bt b--black-05 ph4 ph0-ns pv3"},r.a.createElement("button",{title:"View or upload CV",onClick:e.cv,id:"CV-button",className:"flex flex-column pa0 mr3 pointer bs-b bg-black-20"},r.a.createElement("div",{id:"",className:"flex flex-row ph0 pv0 items-center justify-center bg-white br1"},r.a.createElement("span",{className:"f6 fw4 black-60 ph3"},"Cirriculum Vitae"),r.a.createElement("div",{className:"flex flex-column ph3 pv2 white bg-green"},r.a.createElement(P.a,{icon:"document-open",iconSize:15,className:""})))))),r.a.createElement("section",{id:"Bio",className:"mt0-ns"},r.a.createElement("div",{className:"flex flex-column mb2 pa4 br1 bg-white"},r.a.createElement("div",{className:"flex flex-row"},r.a.createElement("div",{className:"flex flex-auto flex-row pb0"},r.a.createElement("p",{className:"f4 fw4 black-60 mb0 flex flex-row flex-auto"},0===t.account.user.profile.bio.length&&r.a.createElement("div",{onClick:e.createBio,className:"pointer flex ph3 pv2 f5 fw5 black-60 ba b--black-10 br1"},"Enter your bio")," ",t.account.user.profile.bio," ",r.a.createElement(P.a,{onClick:e.editBio,icon:"edit",iconSize:12,className:"pointer black-30 ml2"})))),r.a.createElement("div",{className:"flex flex-column pt4"},r.a.createElement("div",{className:" pt0"},r.a.createElement("h3",{className:"f5 fw3 black-30 mb3 flex justify-start"},"Skills")),r.a.createElement("div",{className:"flex flex-auto flex-column pb0 "},r.a.createElement("p",{className:"flex flex-row flex-wrap f4 fw4 black-60 mb0"},t.account.user.profile.additional.skills.map(function(e,t){return r.a.createElement("span",{className:"   pointer flex f5 fw6 black-60 ph3 pv2 round- br2 bs-b mr2-ns bn w-100-s- items-center tc justify-center mb3 mb0-ns bg-black-20 white ts-a- mr2 "},e)})," ",0===t.account.user.profile.additional.skills.length&&r.a.createElement("div",{onClick:e.editSkills,className:"pointer flex flex-row ph0 pb3 items-center justify-start",id:""},r.a.createElement("span",{className:"f6 fw5 black-50 pv2 ph3 ba b--black-05"},"Add skills")),r.a.createElement(P.a,{onClick:e.editSkills,icon:"edit",iconSize:12,className:"pointer black-30 ml2"})))))),e.state.ready&&e.state.connectionsReady&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Wa,{history:e.context.history,canEdit:!1,user:e.state.user,isCurrentUser:!0,addToNetwork:e.addToNetwork,connections:e.state.connections,navigateToUser:e.navigateToUser,sendMessage:e.sendMessage})),r.a.createElement(ia,{type:"user",user:e.state.user}),r.a.createElement(fa,{projects:e.state.user.profile.projects,addRecentWorkProject:e.addRecentWorkProject}),r.a.createElement(Ja,{profile:!0}),r.a.createElement(Be.a,Object.assign({className:"bp3-light",onClose:e.toggleDialog,title:e.state.dialogTitle,onValueChange:e.onValueChange},e.state),r.a.createElement("div",{className:"flex flex-column pa4-"},"bio"===e.state.dialogType&&r.a.createElement(Qt,{value:t.account.user.profile.bio,submitBio:e.submitBio}),"profile"===e.state.dialogType&&r.a.createElement(aa,{role:t.account.user.position,value:t.account.user.profile,submitProfile:e.submitProfile}),"profileImage"===e.state.dialogType&&r.a.createElement(ht,{type:e.state.dialogType,closeDialog:e.closeDialog}),"addToNetwork"===e.state.dialogType&&r.a.createElement(Qt,null),"addToProject"===e.state.dialogType&&r.a.createElement(Qt,null),"editSkills"===e.state.dialogType&&r.a.createElement(sa,{updateSkills:e.updateSkills,skills:t.account.user.profile.additional.skills}),"addPortfolioProject"===e.state.dialogType&&r.a.createElement(ra,{closeDialog:e.closeDialog,updateAccount:e.context.updateAccount}),"cv"===e.state.dialogType&&r.a.createElement(r.a.Fragment,null,!0===t.account.user.profile.cv.uploaded&&r.a.createElement("div",{className:"flex flex-row mb3"},r.a.createElement("a",{href:t.account.user.profile.cv.file,target:"_blank",className:"flex flex-row ph3 pv3 tc br1 f5 fw6 white- black-50 bg-green items-center justify-center w-100"},r.a.createElement(P.a,{icon:"document-open",iconSize:15,className:"mr2 white- black-50"}),"View uploaded CV")),r.a.createElement(ht,{type:e.state.dialogType,closeDialog:e.closeDialog}))))))})}}]),t}(r.a.Component),Xa=Za;Za.contextType=Pe;y.b.div({hidden:{opacity:0,y:50},visible:{opacity:1,y:0}});var $a=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).componentDidMount=function(){console.log("Discussion mounted",a.props),a.fetchConversation()},a.state={hasError:!1,project:a.props.project,files:a.props.project.files||[],drawerOpen:!1,activeFile:{},ready:!0,activeConversation:null,conversations:null,activeStream:null,isVisible:!1},a.toggleDrawer=a.toggleDrawer.bind(Object(v.a)(a)),a.openFilePanel=a.openFilePanel.bind(Object(v.a)(a)),a.updateActiveConversation=a.updateActiveConversation.bind(Object(v.a)(a)),a.fetchConversation=a.fetchConversation.bind(Object(v.a)(a)),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"updateActiveConversation",value:function(e){var t=e.conversations,a=e.activeConversation;this.setState({activeConversation:a,conversations:t})}},{key:"openFilePanel",value:function(e){this.setState({activeFile:e}),this.toggleDrawer()}},{key:"toggleDrawer",value:function(){this.setState({drawerOpen:!this.state.drawerOpen})}},{key:"fetchConversation",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("fetchConversation",this.props.project.conversationId),e.next=3,z.b.fetch("conversations",this.props.project.conversationId).then(function(){var e=Object(p.a)(f.a.mark(function e(a){var n,r,s;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=14;break}return z.a.set("activeConversation",a),console.log("conversation",a),console.log("!conversation.hasOwnProperty(messages)",!a.hasOwnProperty("messages"),a),a.hasOwnProperty("authors")||(a.authors=[]),(n=new Set(a.participants)).add(t.context.account.user.id),r=Array.from(n),a.participants=r,console.log("fetching authors",a.participants),e.next=12,z.a.fetchAuthors({self:t,authorIds:a.participants});case 12:(s=e.sent)&&(a.authors=s,t.setState({activeConversation:a,conversationReady:!0,ready:!0}),console.log(" updated conversation ",a),setTimeout(function(){t.setState({isVisible:!0}),document.getElementById("MessagesList")&&document.getElementById("MessagesList").scroll({top:document.getElementById("MessagesList").scrollHeight,left:0,behavior:"smooth"})},1e3));case 14:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){this.state.isVisible;return this.state.hasError?r.a.createElement("h1",null,"Something went wrong."):r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{id:"Discussion",className:"flex flex-column w-100 pb4 pt0"},null!==this.props.title&&r.a.createElement("div",{className:"flex flex-row mb4 "},r.a.createElement(_,{title:"Discussion",docs:this.state.activeConversation&&this.state.activeConversation.messages||[],ready:this.state.conversationReady})),!this.state.conversationReady&&r.a.createElement("div",{className:("center"===this.props.loadingAlign?" items-center justify-center ":" items-center justify-start ")+" items-center justify-center  flex flex-row pv5 pr4"},r.a.createElement("div",{className:"sp sp-3balls"})),this.state.conversationReady&&r.a.createElement("div",{className:" flex flex-column flex-auto box w-100 trans-o-fast trans-y-fast "+(this.state.isVisible?" opacity-1 transform-y-0 ":" opacity-0 transform-y-50 ")},r.a.createElement("div",{style:{height:z.e.mobile()?"54vh":"auto"}},r.a.createElement(Dt,{conversationReady:this.state.conversationReady,type:this.props.type,conversation:this.state.activeConversation,conversations:[this.state.activeConversation],activeConversationIndex:0,stream:this.state.activeStream,updateActiveConversation:this.updateActiveConversation,size:this.props.size})))),r.a.createElement(V.a,{title:"Basic Drawer",placement:"right",closable:!0,onClose:this.toggleDrawer,visible:this.state.drawerOpen,width:"60vw"},this.state.drawerOpen&&r.a.createElement("div",{className:"pointer flex flex-column justify-end items-center pa3 bg-white "},r.a.createElement("h3",{className:"f5 fw6 black tc pv2 ph3 word-break-all"},this.state.activeFile.file.originalname),r.a.createElement("div",{className:"pointer flex flex-column justify-end items-center pa3 bg-white br2 bs-b mb2 mr2"},r.a.createElement("div",{style:{backgroundImage:'url("'+this.state.activeFile.url+'")'},className:"h5 file-item bg-cover bg-center cover flex flex-column justify-end items-center pa3 bg-white br2 bs-b mb2 mr2"})))))}}]),t}(r.a.Component),Qa=$a;$a.contextType=Pe;var en=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).handleProjectTypeChange=function(e){a.setState({projectType:e})},a.handleStartDateChange=function(e){window.log.warn("start date",e.toString()),a.setState({startDate:e.toString()})},a.handleEndDateChange=function(e){window.log.warn("end date",e.toString()),a.setState({endDate:e.toString()})},a.updateProject=Object(p.a)(f.a.mark(function e(){var t,n,r,s,c,o;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Rt.a.config({top:"40vh"}),Rt.a.loading("Saving project..",0),a.setState({loading:!0,x:TextTrackCueList}),(t=a.props.project).start_date=a.state.startDate,t.end_date=a.state.endDate,t.title=a.projectTitle.current.value,t.description=a.projectDescription.current.value,t.location=a.state.location,t.updatedAt=A()(new Date).toString(),n=t.start_date,r=t.end_date,e.next=14,z.a.getDates(n,r);case 14:return s=e.sent,t.days=s,console.log("days",s),console.log("Project update data ",t),c=z.a.api("projects")+t.id,o={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},e.next=22,fetch(c,o).then(function(e){return e.json()}).then(function(){var e=Object(p.a)(f.a.mark(function e(n){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n),e.next=3,z.c.createProjectCalendar({self:Object(v.a)(a),project:t}).then(function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.c.updateProjectConversations({self:Object(v.a)(a),project:t}).then(function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({project:n}),z.a.store({label:"activeProject",value:n}),setTimeout(function(){a.setState({loading:!1,x:!1}),document.querySelector("body").scroll({top:0,left:0,behavior:"smooth"}),Rt.a.destroy(),Rt.a.success("Project Updated",1e3),setTimeout(function(){Rt.a.destroy()},1e3)},1e3);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 22:case"end":return e.stop()}},e)})),a.componentDidMount=function(){if(a.setButtons(),null!==localStorage.projectSettingsView){var e=z.a.get("projectSettingsView");a.setState({view:e})}if(null!==localStorage.projectSettingsActiveButton){var t=z.a.get("projectSettingsActiveButton");a.setState({activeButton:t})}setTimeout(function(){a.setState({ready:!0,view:"general"})},1e3)},a.getDerivedStateFromProps=function(e,t){},a.getSnapshotBeforeUpdate=function(e,t){},a.componentDidUpdate=function(){},a.componentWillUnmount=function(){},a.state={hasError:!1,project:a.props.project,drawerOpen:!1,ready:!1,view:"general",views:[],activeButton:{},buttons:[],projectType:a.props.project.type,startDate:a.props.project.start_date,endDate:a.props.project.end_date,location:a.props.project.location,loading:!1,x:!1,lightboxActive:!1},a.toggleDrawer=a.toggleDrawer.bind(Object(v.a)(a)),a.openFilePanel=a.openFilePanel.bind(Object(v.a)(a)),a.setView=a.setView.bind(Object(v.a)(a)),a.setButtons=a.setButtons.bind(Object(v.a)(a)),a.handleStartDateChange=a.handleStartDateChange.bind(Object(v.a)(a)),a.handleEndDateChange=a.handleEndDateChange.bind(Object(v.a)(a)),a.handleProjectTypeChange=a.handleProjectTypeChange.bind(Object(v.a)(a)),a.updateProject=a.updateProject.bind(Object(v.a)(a)),a.updateProjectLocation=a.updateProjectLocation.bind(Object(v.a)(a)),a.projectTitle=r.a.createRef(),a.projectDescription=r.a.createRef(),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"updateProjectLocation",value:function(e){console.log("updateProjectLocation",e),this.setState({location:e})}},{key:"setButtons",value:function(){var e=this,t=[{title:"General",function:function(){return e.setView({filter:"general",button:0})}},{title:"Archive",function:function(){return e.setView({filter:"archive",button:0})}}],a=["general","archive"];this.setState({buttons:t,activeButton:t[0],views:a,view:a[0]})}},{key:"setView",value:function(e){var t=e.view,a=e.button;this.setState({view:t,activeButton:a}),z.a.store({label:"projectSettingsView",value:t}),z.a.store({label:"projectSettingsActiveButton",value:a}),"discussion"===t&&setTimeout(function(){return document.querySelector("body").scroll({top:130,left:0,behavior:"smooth"})},1e3)}},{key:"openFilePanel",value:function(e){this.setState({activeFile:e}),this.toggleDrawer()}},{key:"toggleDrawer",value:function(){this.setState({drawerOpen:!this.state.drawerOpen})}},{key:"componentDidCatch",value:function(e,t){}},{key:"render",value:function(){var e=this;return this.state.hasError?r.a.createElement("h1",null,"Something went wrong."):r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{id:"Discussion",className:"flex flex-column w-100 pb4 pt0"},r.a.createElement("div",{className:"flex flex-row mb4 "},r.a.createElement(_,{title:"Settings",docs:this.state.files,ready:this.state.ready})),this.state.ready&&r.a.createElement("section",{id:"ToolbarButtons",className:"flex flex-column mb3"},r.a.createElement("div",{className:"flex flex-row justify-between mb3"},r.a.createElement("div",{className:"flex flex-row"},this.state.buttons.map(function(t,a){return r.a.createElement("button",{title:t.title,onClick:function(){return e.setView({view:e.state.views[a],button:t})},id:t.title,className:(a>0&&" bl b--black-05 ")+(e.state.activeButton.title===t.title?" bg-white-60 ":" bg-white ")+" flex flex-column pa0 mr3- pointer justify-center flex-auto"},r.a.createElement("div",{id:"",className:"flex flex-row ph0 pv0 items-center justify-center"},r.a.createElement("span",{className:"f5 fw6 black-40 ph3 pv2"},t.title)))})))),r.a.createElement("div",{className:"w-60-ns- w-100 flex flex-row flex-wrap justify-between br3- -overflow-hidden"},this.state.x?r.a.createElement(P.a,{icon:"loading",iconSize:"15",className:"absolute right-0 f4 black-60 mr3"}):r.a.createElement(P.a,{icon:"swap-right",iconSize:"15",className:"f4 black-60 -white  absolute right-0 mr3"}),!this.state.ready&&r.a.createElement("div",{className:"flex flex-column items-center justify-center pv4 w-100"},r.a.createElement("div",{className:"sp sp-3balls"})),this.state.ready&&"archive"===this.state.view&&r.a.createElement("div",{id:"SettingsForm_General",className:"flex flex-column mb6 w-100"},r.a.createElement("div",{className:"flex flex-column mt0 w-100",id:""},r.a.createElement("div",{className:"form-row flex flex-column pb3 pt2"},r.a.createElement("div",{className:"form-row flex flex-column"},r.a.createElement("div",{className:"form-row flex flex-row pt4 items-center"},r.a.createElement("label",{className:"f5 fw6 black-20 pb3- tl mr4 w-30"},"Archive Project"),r.a.createElement("input",{ref:this.archived,required:!0,type:"text",defaultValue:this.props.project.title,className:"flex flex-column ph4 pv3 bn br2 -round bg-black-05- white- black-50 f4 fw5 bs-a- w-100 bg-white"})))))),this.state.ready&&"general"===this.state.view&&r.a.createElement("div",{id:"SettingsForm_General",className:"flex flex-column mb6 w-100"},r.a.createElement("div",{className:"flex flex-column mt0 w-100",id:""},r.a.createElement("div",{className:"form-row flex flex-column pb3 pt2"},r.a.createElement("div",{className:"form-row flex flex-column"},r.a.createElement("div",{className:"form-row flex flex-row pt4 items-center"},r.a.createElement("label",{className:"f5 fw6 black-20 pb3- tl mr4 w-30"},"Project Name"),r.a.createElement("input",{ref:this.projectTitle,required:!0,type:"text",defaultValue:this.props.project.title,className:"flex flex-column ph4 pv3 bn br2 -round bg-black-05- white- black-50 f4 fw5 bs-a- w-100 bg-white"})),r.a.createElement("div",{className:"form-row flex flex-row pt4 items-center"},r.a.createElement("label",{className:"f5 fw6 black-20 pb3- tl mr4 w-30"},"Project Description"),r.a.createElement("textarea",{ref:this.projectDescription,required:!0,type:"textarea",defaultValue:this.props.project.description,rows:5,className:"flex flex-column ph4 pv3 bn br2 -round- bg-black-05- white- black-50 f4 fw5 bs-a- w-100 bg-white"})),r.a.createElement("div",{className:"form-row flex flex-row pt4 items-center"},r.a.createElement("label",{className:"f5 fw6 black-20 pb3- tl mr4 w-30"},"Project Location"),r.a.createElement(je,{updateProjectLocation:this.updateProjectLocation,location:this.state.location,findLocation:this.findLocation,fetchProjects:this.fetchProjects2,defaultValue:"undefined"!==typeof this.state.location.address?this.state.location.address.county+", "+this.state.location.address.country:this.state.location})),r.a.createElement("div",{className:"form-row flex flex-row pt4 items-center"},r.a.createElement("label",{className:"f5 fw6 black-20 pb3- tl mr4 w-30"},"Project Type"),r.a.createElement("select",{className:"flex flex-column ph4 pv3 bn br2 -round bg-black-05- white- black-50 f4 fw5 bs-a- w-100 bg-white",defaultValue:this.props.project.type,onChange:function(t){return e.handleProjectTypeChange(t)}},r.a.createElement("option",{value:"",className:"flex flex-column ph3 pv3 "},"Select"),r.a.createElement("option",{value:"commercial",className:"flex flex-column ph3 pv3 "},"Commercial"),r.a.createElement("option",{value:"film",className:"flex flex-column ph3 pv3 "},"Film"),r.a.createElement("option",{value:"documentary",className:"flex flex-column ph3 pv3 "},"Documentary"))),r.a.createElement("div",{className:"form-row flex flex-row justify-between w-100"},r.a.createElement("div",{className:" form-row flex flex-column pt4 w-100 mr2"},r.a.createElement("span",{className:"f5 fw6 black-20 pb3"},"Start Date"),r.a.createElement(Ae.a,{minDate:new Date("01/01/1940"),maxDate:new Date("01/01/2030"),defaultValue:A()(this.props.project.start_date),onChange:this.handleStartDateChange,className:"flex flex-column ph4 pv0 bn br2 -round bg-black-05- white- black-50 f4 fw5 bs-a- w-100 bg-white "})),r.a.createElement("div",{className:" form-row flex flex-column pt4 w-100 ml2"},r.a.createElement("span",{className:"f5 fw6 black-20 pb3"},"Completion Date"),r.a.createElement(Ae.a,{minDate:new Date("01/01/1940"),maxDate:new Date("01/01/2030"),defaultValue:A()(this.props.project.end_date||"Dec 31 2020"),onChange:this.handleEndDateChange,className:"flex flex-column ph4 pv0 bn br2 -round bg-black-05- white- black-50 f4 fw5 bs-a- w-100 bg-white "})))))),r.a.createElement("div",{className:"Buttons flex flex-row justify-between mt4"},r.a.createElement("div",{className:"flex flex-column -w-100"},r.a.createElement("button",{onClick:function(){return e.updateProject()},className:"br1- round bs-b bg-black-20 ph5 pv2 pointer bn relative w-100  "},r.a.createElement("span",{className:"relative f5 fw6 white pv1 flex items-center justify-center w-100"},this.state.loading?"Saving":"Save"))))),this.context.isAuthenticated&&"crew"===this.state.view&&r.a.createElement("div",{id:"SettingsForm_Crew",className:"flex flex-column mb6 w-100"},r.a.createElement(zt,{project:this.props.project})))),r.a.createElement(V.a,{title:"Basic Drawer",placement:"right",closable:!0,onClose:this.toggleDrawer,visible:this.state.drawerOpen,width:"60vw"},this.state.drawerOpen&&r.a.createElement("div",{className:"pointer flex flex-column justify-end items-center pa3 bg-white "},r.a.createElement("h3",{className:"f5 fw6 black tc pv2 ph3 word-break-all"},this.state.activeFile.file.originalname),r.a.createElement("div",{onClick:this.toggleLightbox,className:"pointer flex flex-column justify-end items-center pa3 bg-white br2 bs-b mb2 mr2"},r.a.createElement("div",{style:{backgroundImage:'url("'+this.state.activeFile.url+'")'},className:"h5 file-item bg-cover bg-center cover flex flex-column justify-end items-center pa3 bg-white br2 bs-b mb2 mr2"})))))}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(r.a.Component),tn=en;en.contextType=Pe;xe.a.Step;var an=[{title:"Select"},{title:"Unit Production Manager"},{title:"Line Producer"},{title:"Production Manager"},{title:"Director"},{title:"Assistant Director"},{title:"2nd Assistant Director"},{title:"Continuity Person"},{title:"Cinematographer"},{title:"Gaffer"},{title:"Camera Operator"},{title:"Assistant Cameraman"},{title:"Film Loader"},{title:"Steadycam Operator"},{title:"Production Sound Mixer"},{title:"Boom Operator"},{title:"Key Grip"},{title:"Dolly Grip"},{title:"Best Boy"},{title:"Visual Effects Director"},{title:"FX Coordinator"},{title:"Property Master"},{title:"Leadman"},{title:"Set Dresser"},{title:"Costumer"},{title:"Make-up Artist"},{title:"Body Make-up Artist"},{title:"Hairdresser"},{title:"Production Assistant"},{title:"Production Office Coordinator"},{title:"Unit Publicist"},{title:"Second Unit Director"},{title:"Production Caterer"},{title:"Craft Services"},{title:"Transportation Coordinator"},{title:"Day Player"}],nn=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={current:0,cuisines:[],cuisines_:[{}],role:"",skills:[],skills_:[],value:"",crew:[]},console.log("OnboardingScreen props",e),a.insertSkill=a.insertSkill.bind(Object(v.a)(a)),a.addSkillInput=a.addSkillInput.bind(Object(v.a)(a)),a.save=a.save.bind(Object(v.a)(a)),a.reset=a.reset.bind(Object(v.a)(a)),a.specOnChange=a.specOnChange.bind(Object(v.a)(a)),a.search=a.search.bind(Object(v.a)(a)),a.bulkSearch=a.bulkSearch.bind(Object(v.a)(a)),console.log("FormCrew props",e),a.role=r.a.createRef(),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"bulkSearch",value:function(){var e=this.state.skills;this.props.bulkSearch({positions:e})}},{key:"search",value:function(){var e=Object(p.a)(f.a.mark(function e(t){var a,n,r,s;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.index,n=t.type,console.log(a,n),r=this.state.skills,s=r[a],this.props.search({index:a,position:s,type:n});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"reset",value:function(){this.setState({skills_:[],skills:[]})}},{key:"save",value:function(){var e={positions:this.state.skills};console.log("save data ",e),this.props.save(e)}},{key:"insertSkill",value:function(){var e=Object(p.a)(f.a.mark(function e(t){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(a=this.state.skills).push(t),this.setState({skills:a});case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"addSkillInput",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(t=this.state.skills_).push({}),this.setState({skills_:t});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"specOnChange",value:function(){var e=Object(p.a)(f.a.mark(function e(t){var a,n,r,s;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.e,n=t.index,(r=this.state.skills)[n]=a.target.value,this.setState({skills:r}),console.log(this.state),(s=this.props.project).positions=r,e.next=9,z.c.updateProject({self:this,project:s});case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this.props.project.positions,t=[],a=[],n=!0,r=!1,s=void 0;try{for(var c,o=e[Symbol.iterator]();!(n=(c=o.next()).done);n=!0){var i=c.value;t.push(i),a.push({})}}catch(l){r=!0,s=l}finally{try{n||null==o.return||o.return()}finally{if(r)throw s}}console.log(a,t),this.setState({skills:t,skills_:a})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"StepsForm"},r.a.createElement("div",{className:"flex flex-column ma0",id:""},r.a.createElement("div",{className:"form-row flex flex-column pb3 pt2"},r.a.createElement("div",{className:"form-row flex flex-column pt4"},r.a.createElement("div",{className:"form-row flex flex-column  pa3 br4 ba b--black-05"},r.a.createElement("div",{className:"flex flex-row justify-between flex-wrap  col-3"},this.state.skills_.map(function(t,a){return r.a.createElement("div",{className:"flex flex-column  w-100- mw6 mb3 "},r.a.createElement("div",{className:"flex flex-row  br2 overflow-hidden "},r.a.createElement("select",{onChange:function(t){return e.specOnChange({e:t,index:a})},value:e.state.skills[a],className:"w-100 flex flex-row ph3 pv3 bn br1 bg-white black-60 f4 fw5"},an.map(function(e,t){return r.a.createElement("option",{value:e.title},e.title)})),r.a.createElement("div",{className:"flex flex-row items-center justify-center ph3 pv2 bg-white bl b--black-05"},r.a.createElement("div",{className:"flex br2 overflow-hidden"},r.a.createElement("button",{onClick:function(){return e.search({index:a,type:"search"})},className:"pointer ph3 pv2 bg-black-40 hover-bg-black  white f5 fw6"},r.a.createElement(P.a,{icon:"search",iconSize:15,className:" white"})),r.a.createElement("button",{onClick:function(){return e.search({index:a,type:"search"})},className:"pointer ph3 pv2 bg-black-40 hover-bg-black  white f5 fw6"},r.a.createElement(P.a,{icon:"trash",iconSize:15,className:" white"}))))))})),r.a.createElement("div",{className:"form-row flex flex-row pt2"},r.a.createElement("button",{onClick:this.bulkSearch,className:"pointer bn br2 f5 fw6 bg-transparent black-50 pv3 ph3 w-100"},"Bulk Search")),r.a.createElement("div",{className:"form-row flex flex-row pt2"},r.a.createElement("button",{onClick:this.addSkillInput,className:"pointer bn br2 bg-black-05 hover-bg-black-10 f5 fw6 black-50 pv4 ph3 w-100"},"Add +")))))))}}]),t}(r.a.Component),rn=(Ae.a.MonthPicker,Ae.a.RangePicker,a(56));window.GeoPattern=rn;var sn=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={projectType:"",startDate:"",endDate:"",view:"email",connections:[],connectionsReady:!1,inviteBusy:[]},a.emailAddress=r.a.createRef(),a.searchProjects=a.searchProjects.bind(Object(v.a)(a)),a.handleChange=a.handleChange.bind(Object(v.a)(a)),a.handleRangeChange=a.handleRangeChange.bind(Object(v.a)(a)),a.setView=a.setView.bind(Object(v.a)(a)),a.inviteByEmail=a.inviteByEmail.bind(Object(v.a)(a)),a.addProductionCrewMember=a.addProductionCrewMember.bind(Object(v.a)(a)),a.inviteByEmailAddress=r.a.createRef(),console.log("OnboardingScreen props",e),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"addProductionCrewMember",value:function(){var e=Object(p.a)(f.a.mark(function e(t){var a,n,r,s=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.item,n=t.index,(r=this.state.inviteBusy)[n]=!0,this.setState({inviteBusy:r}),setTimeout(function(){s.props.addProductionCrewMember(a)},600);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"inviteByEmail",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t,a,n,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({inviteBusy:!0}),console.log("invitebyemail",this.props),t=this.props.projectOwner,a=this.inviteByEmailAddress.current.value,n=this.props.productionCrew[0].position,r=window.location.href+"?newInvite=true&referrer=email",e.next=8,z.c.inviteByEmail({self:this,link:r,position:n,project:this.props.project,projectOwner:t,email:a});case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"setView",value:function(e){this.setState({view:e})}},{key:"handleRangeChange",value:function(e){console.log(e);var t=e[0].toString(),a=e[1].toString();this.setState({startDate:t,endDate:a})}},{key:"handleDateChange",value:function(e){console.log(e),this.setState({projectDate:e.toString()})}},{key:"handleChange",value:function(e){console.log(e.target.value),this.setState({projectType:e.target.value})}},{key:"searchProjects",value:function(){var e={location:z.a.get("location"),projectType:this.state.projectType,startDate:this.state.startDate,endDate:this.state.endDate};this.props.searchProjects(e)}},{key:"componentDidMount",value:function(){var e=z.a.get("connections").data;console.log("** connections",e);var t=new Array(e.length).fill(!1);this.setState({connections:e,connectionsReady:!0,inviteBusy:t})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"ProjectSearchForm"},r.a.createElement("div",{className:"flex flex-column ma0",id:""},r.a.createElement("div",{className:"form-row flex flex-column"},r.a.createElement("div",{className:"form-row flex flex-column pa4-"},r.a.createElement("div",{className:"flex flex-row justify-start ph4 pv3 bg-white-40"},r.a.createElement("div",{onClick:function(){return e.setView("email")},className:("email"===this.state.view?" fw6 black-80 ":" fw5 black-50 ")+" f5 mr3 "},"Invite by Email"),r.a.createElement("div",{onClick:function(){return e.setView("network")},className:("network"===this.state.view?" fw6 black-80 ":" fw5 black-50 ")+" f5 mr3"},"Invite by Network")),"email"===this.state.view&&r.a.createElement("div",{className:"form-row flex flex-column pa3"},r.a.createElement("label",{className:"f6 fw5 black-50 pb2"},"Email address"),r.a.createElement("div",{className:"flex flex-row "},r.a.createElement("input",{ref:this.inviteByEmailAddress,type:"text",placeholder:"Enter email address",className:"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a- w-100"}),r.a.createElement("div",{class:"flex flex-column w-30 bl b--black-05"},r.a.createElement("button",{onClick:this.inviteByEmail,class:"pointer flex h-100 items-center justify-center f6 bg-white bn f5 fw6 black-50"},"Invite",this.state.inviteBusy?r.a.createElement("div",{className:"flex flex-column items-start ml2"},r.a.createElement(Me.a,{size:15})):r.a.createElement(P.a,{icon:"arrow-right",className:"ml2"}))))),"network"===this.state.view&&r.a.createElement("div",{className:"flex flex-column pt3-0"},r.a.createElement("div",{className:"flex flex-column",style:{maxHeight:"400px",overflow:"auto"}},this.state.connectionsReady&&this.state.connections.map(function(t,a){return r.a.createElement("div",{className:"flex flex-row"},r.a.createElement("div",{onClick:function(){return e.addProductionCrewMember({item:t,index:a})},className:" trans-a pointer flex flex-row-ns flex-row items-center justify-between  w-100-s bn-ns bb b--black-05 pa3 hover-bg-white-70  w-100"},r.a.createElement("div",{style:{width:"50px",height:"50px",borderRadius:"100px",background:t.profile.picture.length?"url("+t.profile.picture+")":rn.generate(t.profile.picture).toDataUrl()},className:"cover bg-center"}),r.a.createElement("div",{className:" flex flex-row flex-auto -flex-column pt2-ns- pl3  flex f5 fw7 black-70 raleway "},r.a.createElement("div",{className:"  flex    "},t.profile.name.first),r.a.createElement("div",{className:" flex ml1"},t.profile.name.last)),e.state.inviteBusy[a]&&r.a.createElement("div",{className:"flex flex-column h-100 items-center justify-center w-40"},r.a.createElement("div",{className:"sp sp-3balls"}))))})))))))}}]),t}(r.a.Component),cn={placeholderImage:"http://cdn.shopify.com/s/files/1/2278/2351/products/W1151_GeometricPattern3_1024x1024.jpg?v=1510704914",api:{}};cn.api.findCity=function(e,t){return"https://reverse.geocoder.api.here.com/6.2/reversegeocode.json?prox="+e+","+t+",250&mode=retrieveAddresses&maxresults=1&gen=9&app_id=ZZN2MPuexLyuz3VR0KDD&app_code=TnEsVJR8k3zxGMiAkbP_EQ"},cn.api.base=function(){return"https://api.crew20.devcolab.site/v1/"};var on=cn,ln=a(56);window.GeoPattern=ln;var un=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={inviteBusy:!1},a.inviteToProject=a.inviteToProject.bind(Object(v.a)(a)),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"inviteToProject",value:function(){var e=Object(p.a)(f.a.mark(function e(t){var a,n,r,s,c,o,i,l,u,m,d=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({inviteBusy:!0}),n=t.id,r=this.props.project,s=r.invited||[],c=this.props.position,o={position:c,id:n},s.push(o),r.invited=s,e.next=10,z.c.updateProject({self:this,project:r}).then(function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.c.fetchInvitedCrew({self:d,project:r}).then(function(e){d.setState({inviteBusy:!1})});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 10:return i=window.location.href,l=this.props.projectOwner,u={id:l.id,picture:l.profile.picture,name:l.profile.name},{userId:n,title:"You have been invited to crew for a project."},e.next=16,z.b.fetch("users",n);case 16:return m=e.sent,e.next=19,z.c.inviteByUser({self:this,link:i,position:c,project:r,projectOwner:u,user:m});case 19:return e.next=21,z.c.createNotification((a={self:this,type:"crewInvite",project:r,position:c},Object(Q.a)(a,"project",r),Object(Q.a)(a,"projectOwner",u),Object(Q.a)(a,"user",m),a));case 21:this.props.reloadProject();case 22:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.item;return r.a.createElement("div",{onClick:function(){return e.props.showUserProfile(t)},id:"Person",className:"flex flex-column w-100- flex-auto pb2 ph4 -w-100 flex-auto"},r.a.createElement("div",{className:"flex flex-row-ns flex-row -w-100"},r.a.createElement("div",{className:"flex flex-column justify-center w-100="},r.a.createElement("div",{className:"round pa1 bg-white center"},r.a.createElement("div",{style:{width:"50px",height:"50px",backgroundImage:t.profile.picture.length?"url("+t.profile.picture+")":ln.generate(t.profile.name.first+t.profile.name.last).toDataUrl()},className:"center pointer round  cover bg-center"}))),r.a.createElement("div",{className:"flex flex-column justify-center w-100- flex-auto ph3"},r.a.createElement("div",{className:"f4 flex flex-column items-center w-100 raleway "},r.a.createElement("span",{className:"flex flex-row-ns flex-column w-100 black f3 fw7"},r.a.createElement("span",{className:"flex flex-row items-center justify-start-ns justify-center black f5 fw7"},t.profile.name.first," ",t.profile.name.last)))),r.a.createElement("div",{onClick:function(){return e.inviteToProject(t)},className:"flex flex-row-ns flex-column flex-auto -w-100 ph4 pv3"},r.a.createElement("div",{className:"flex flex-column justify-center"},r.a.createElement("span",{className:"flex flex-row items-center justify-center justify-center black-50 f6 fw5 invite-button ph3 pv2 br2"},!this.state.inviteBusy&&"Add / Invite",this.state.inviteBusy?r.a.createElement("div",{className:"sp sp-3balls-small ml2"}):r.a.createElement(P.a,{icon:"plus",iconSize:20,className:"ml2 black-50 f6"}))))))}}]),t}(r.a.Component),fn=a(56);window.GeoPattern=fn;var pn=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={},a.userLocation=a.userLocation.bind(Object(v.a)(a)),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"userLocation",value:function(){var e=this.props.user;return e.profile.location&&"undefined"!==typeof e.profile.location.County?e.profile.location.County:e.profile.location&&"undefined"!==typeof e.profile.location.address.county?e.profile.location.address.county:""}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.user;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"UserDetail",className:"flex flex-column w-100 pa0"},r.a.createElement("div",{className:"pa4 flex flex-row-ns flex-column w-100"},r.a.createElement("div",{className:"flex flex-column w-100="},r.a.createElement("div",{className:"round pa1 bg-white center"},r.a.createElement("div",{style:{width:"90px",height:"90px",backgroundImage:e.profile.picture.length?"url("+e.profile.picture+")":fn.generate(e.profile.name.first+e.profile.name.last).toDataUrl()},className:"center pointer round  cover bg-center"}))),r.a.createElement("div",{className:"flex flex-column justify-center w-100 ph3"},r.a.createElement("div",{className:"f4 flex flex-column items-center w-100 raleway "},r.a.createElement("span",{className:"flex flex-row-ns flex-column w-100 black f3 fw6"},r.a.createElement("span",{className:"raleway flex flex-row items-center justify-start-ns justify-center black-70 f4 fw7"},e.profile.name.first," ",e.profile.name.last))),r.a.createElement("div",{className:"f4 flex flex-column items-center w-100 raleway "},r.a.createElement("span",{className:"flex flex-row-ns flex-column w-100 black f3 fw6"},r.a.createElement("span",{className:"raleway flex flex-row items-center justify-start-ns justify-center black-50 f5 fw5"},e.email)))))),r.a.createElement("section",{id:"ProfileButtons",className:"flex flex-auto- w-100"},r.a.createElement("div",{className:"flex flex-row mb2-ns- w-100 bt b--black-05 "},r.a.createElement("button",{title:"View or upload CV",id:"CV-button",className:"db relative w-100 ph4 pv3 br1- bg-white black-50 hover-black pointer"},r.a.createElement("div",{id:"",className:"db relative w-100"},r.a.createElement("span",{className:"f5 fw6 ph3-"},"Cirriculum Vitae"," "))),r.a.createElement("button",{title:"View or upload CV",id:"CV-button",className:"db relative w-100 ph4 pv3 br1- bg-white black-50 hover-black pointer"},r.a.createElement("div",{id:"",className:"db relative w-100"},r.a.createElement("span",{className:"f6 fw6 "},"Add to Network"))),r.a.createElement("button",{title:"View or upload CV",id:"CV-button",className:"db relative w-100 ph4 pv3 br1- bg-white black-50 hover-black pointer"},r.a.createElement("div",{id:"",className:"db relative w-100"},r.a.createElement("span",{className:"f6 fw6 "},"Send Message"))))),r.a.createElement("div",{className:"flex flex-row -nsflex-column w-100 black-60 raleway flex-wrap items-center justify-start-ns justify-between pa4 bt bb b--black-05"},r.a.createElement("div",{className:"flex flex-column w--100 pb1-ns pb2 mr3"},r.a.createElement("span",{className:"flex-column flex f6 fw4 black-40 items-start"},r.a.createElement("span",{className:"flex \nmb3"},"Age"),r.a.createElement("span",{className:"flex items-center justify-center f6 fw6 -ml3-ns black-50- white ph2 pv1 ba b--black-05 br1 -round bw1- bg-white-20- bg-black -ts-a tc ml2-"},A()().diff(e.profile.dob,"years")))),r.a.createElement("div",{className:"flex flex-column w--100 pb1-ns pb2 mr3"},r.a.createElement("span",{className:"flex-column flex f6 fw4 black-40 items-start"},r.a.createElement("span",{className:"flex \nmb3"},"Gender"),r.a.createElement("span",{className:"flex items-center justify-center f6 fw6 -ml3-ns black-50- white ph2 pv1 ba b--black-05 br1 -round bw1- bg-white-20- bg-black -ts-a tc ml2-"},e.profile.gender&&e.profile.gender||""))),r.a.createElement("div",{className:"flex flex-column w--100 pb1-ns pb2 mr3"},r.a.createElement("span",{className:"flex-column flex f6 fw4 black-40 items-start"},r.a.createElement("span",{className:"flex \nmb3"},"Location"),r.a.createElement("span",{className:"flex items-center justify-center f6 fw6 -ml3-ns black-50- white ph2 pv1 ba b--black-05 br1 -round bw1- bg-white-20- bg-black -ts-a tc ml2-"},this.userLocation())))),r.a.createElement(Xe,{user:e,editSkills:null,editBio:null,canEdit:!1}))}}]),t}(r.a.Component),mn=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).componentDidMount=function(){console.log("FormBio mounted");var e=a.props.project,t=a.props.user.id,n=e.productionCrew.filter(function(e){return e.user===t})[0];a.setState({phone:n.projectSpecificDetails.phone,address:n.projectSpecificDetails.address})},a.state={hasError:!1,buttonLoading:!1,address:null,phone:null},a.address=r.a.createContext(),a.phone=r.a.createContext(),a.submit=a.submit.bind(Object(v.a)(a)),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"submit",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Rt.a.config({top:"40vh"}),Rt.a.loading("Saving user..",0),this.setState({buttonLoading:!0}),setTimeout(Object(p.a)(f.a.mark(function e(){var a,n,r,s;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.props.user.id,n=t.props.project,r=n.productionCrew.filter(function(e){return e.user===a})[0],console.log("selectedProdCrewMember",r),r.projectSpecificDetails={address:t.address.current.value,phone:t.phone.current.value},s=n.productionCrew.findIndex(function(e){return e.user===a}),n.productionCrew[s]=r,console.log("updated project with production crew detail",n),e.next=10,z.c.updateProject({self:t,project:n}).then(function(e){t.setState({buttonLoading:!1}),Rt.a.destroy(),Rt.a.success("User Updated",1e3),setTimeout(function(){Rt.a.destroy()},1e3)});case 10:case"end":return e.stop()}},e)})),1e3);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.hasError?r.a.createElement("h1",null,"Something went wrong."):r.a.createElement("div",Object(Q.a)({className:"FormBio-wrapper"},"className","flex flex-column w-100 h-100 bg-white"),r.a.createElement("div",{className:"flex-column flex w-100 pa4 h-100-"},r.a.createElement("div",{className:" flex w-100 items-center mb4"},r.a.createElement("label",{className:"f5 fw6 black-20 pb3- tl mr4 w-30"},"Address"),r.a.createElement("input",{type:"text",placeholder:"Enter your address during the project",ref:this.address,defaultValue:this.state.address,className:"flex flex-column ph4 pv3 br2 -round bg-black-05- white- black-50 f4 fw5 bs-a- w-100 bg-white ba b--black-05"})),r.a.createElement("div",{className:" flex w-100 items-center mb4"},r.a.createElement("label",{className:"f5 fw6 black-20 pb3- tl mr4 w-30"},"Contact Number"),r.a.createElement("input",{type:"text",placeholder:"Enter your contact number",ref:this.phone,defaultValue:this.state.phone,className:"flex flex-column ph4 pv3 br2 -round bg-black-05- white- black-50 f4 fw5 bs-a- w-100 bg-white ba b--black-05"}))),r.a.createElement("div",{className:"form-row flex w-100 bg-white- ph4 pv4"},r.a.createElement("div",{onClick:this.submit,className:"bg-black-20 round tc w-100- pointer flex button flex-column ph5 pv2 ba- -b--black-10 f4 fw6 white -black-50"},this.state.buttonLoading&&r.a.createElement("div",{className:"flex flex-column pv2 items-center justify-center"},r.a.createElement("div",{className:"sp sp-3balls"})),!this.state.buttonLoading&&r.a.createElement("div",null,"Save"))))}}]),t}(r.a.Component),dn=a(56);window.GeoPattern=dn;var hn=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={},a.userLocation=a.userLocation.bind(Object(v.a)(a)),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"userLocation",value:function(){var e=this.props.user;return e.profile.location&&"undefined"!==typeof e.profile.location.County?e.profile.location.County:e.profile.location&&"undefined"!==typeof e.profile.location.address.county?e.profile.location.address.county:""}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){this.props.user;return r.a.createElement(r.a.Fragment,null,r.a.createElement(mn,{project:this.props.project,user:this.props.user}))}}]),t}(r.a.Component),bn=a(56);window.GeoPattern=bn;var vn=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).handleProjectTypeChange=function(e){a.setState({projectType:e})},a.handleStartDateChange=function(e){window.log.warn("start date",e.toString()),a.setState({startDate:e.toString()})},a.handleEndDateChange=function(e){window.log.warn("end date",e.toString()),a.setState({endDate:e.toString()})},a.updateProject=Object(p.a)(f.a.mark(function e(){var t,n,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Rt.a.config({top:"40vh"}),Rt.a.loading("Saving project..",0),a.setState({loading:!0,x:TextTrackCueList}),(t=a.props.project).start_date=a.state.startDate,t.end_date=a.state.endDate,t.title=a.projectTitle.current.value,t.description=a.projectDescription.current.value,t.location=a.state.location,t.updatedAt=A()(new Date).toString(),console.log("Project update data ",t),n=z.a.api("projects")+t.id,r={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},e.next=15,fetch(n,r).then(function(e){return e.json()}).then(function(e){console.log(e),a.setState({project:e}),z.a.store({label:"activeProject",value:e}),setTimeout(function(){a.setState({loading:!1,x:!1}),document.querySelector("body").scroll({top:0,left:0,behavior:"smooth"}),Rt.a.destroy(),Rt.a.success("Project Updated",1e3),setTimeout(function(){Rt.a.destroy()},1e3)},1e3)});case 15:case"end":return e.stop()}},e)})),a.componentDidMount=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.start(),a.setPermissionTypes(),a.setButtons();case 3:case"end":return e.stop()}},e)})),a.getDerivedStateFromProps=function(e,t){},a.getSnapshotBeforeUpdate=function(e,t){},a.componentDidUpdate=function(){},a.componentWillUnmount=function(){},a.state={hasError:!1,project:a.props.project,drawerOpen:!1,innerDrawerOpen:!1,ready:!1,buttonsReady:!0,view:null,views:[],activeButton:{},buttons:[],projectType:a.props.project.type,startDate:a.props.project.start_date,endDate:a.props.project.end_date,location:a.props.project.location,loading:!1,x:!1,lightboxActive:!1,productionCrew:[],crew:[],crew_:[],crewReady:!1,productionCrewReady:!1,searchLoading:!1,activeCrewMember:null,inviteBusy:!1,isDeleting:[],isDeletingStart:[],del:[],deleteConfirmation:[],drawerType:"search",items:[],crewProfileType:"production",profileDrawerType:"profile",permissionTypes:[],bulkSearch:!1,isOpen:!1},a.toggleDrawer=a.toggleDrawer.bind(Object(v.a)(a)),a.toggleInnerDrawer=a.toggleInnerDrawer.bind(Object(v.a)(a)),a.closeInnerDrawer=a.closeInnerDrawer.bind(Object(v.a)(a)),a.openFilePanel=a.openFilePanel.bind(Object(v.a)(a)),a.setView=a.setView.bind(Object(v.a)(a)),a.setButtons=a.setButtons.bind(Object(v.a)(a)),a.handleStartDateChange=a.handleStartDateChange.bind(Object(v.a)(a)),a.handleEndDateChange=a.handleEndDateChange.bind(Object(v.a)(a)),a.handleProjectTypeChange=a.handleProjectTypeChange.bind(Object(v.a)(a)),a.updateProject=a.updateProject.bind(Object(v.a)(a)),a.updateProjectLocation=a.updateProjectLocation.bind(Object(v.a)(a)),a.openSearchDialog=a.openSearchDialog.bind(Object(v.a)(a)),a.closeDialog=a.closeDialog.bind(Object(v.a)(a)),a.searchProjects=a.searchProjects.bind(Object(v.a)(a)),a.userAvatar=a.userAvatar.bind(Object(v.a)(a)),a.search=a.search.bind(Object(v.a)(a)),a.bulkSearch=a.bulkSearch.bind(Object(v.a)(a)),a.inviteByEmail=a.inviteByEmail.bind(Object(v.a)(a)),a.remove=a.remove.bind(Object(v.a)(a)),a.confirmDelete=a.confirmDelete.bind(Object(v.a)(a)),a.reloadProject=a.reloadProject.bind(Object(v.a)(a)),a.start=a.start.bind(Object(v.a)(a)),a.userLocation=a.userLocation.bind(Object(v.a)(a)),a.setPanelView=a.setPanelView.bind(Object(v.a)(a)),a.setPermissionTypes=a.setPermissionTypes.bind(Object(v.a)(a)),a.setPermission=a.setPermission.bind(Object(v.a)(a)),a.showUserProfile=a.showUserProfile.bind(Object(v.a)(a)),a.addProductionCrewMember=a.addProductionCrewMember.bind(Object(v.a)(a)),a.projectTitle=r.a.createRef(),a.projectDescription=r.a.createRef(),a.inviteByEmailAddress=r.a.createRef(),window.self=Object(v.a)(a),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"addProductionCrewMember",value:function(){var e=Object(p.a)(f.a.mark(function e(t){var a=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.c.addProductionCrewMember({self:this,userId:t.id,project:this.props.project}).then(function(e){console.log(e),e&&e.status&&"error"===e.status?a.setState({isOpen:!1}):(a.setState({isOpen:!1}),a.reloadProject())});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"showUserProfile",value:function(e){console.log("showUserProfile",e),this.setState({innerDrawerOpen:!0,activeCrewMember:e})}},{key:"bulkSearch",value:function(){var e=Object(p.a)(f.a.mark(function e(t){var a,n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("bulkSearch",t),a=t.positions,this.setState({drawerOpen:!this.state.drawerOpen}),this.setState({searchLoading:!0,drawerType:"search",bulkSearch:!0}),e.next=6,z.a.fetchUsers({self:this,positions:a});case 6:n=e.sent,console.log("searched crew",n,this.state.crew_);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"search",value:function(){var e=Object(p.a)(f.a.mark(function e(t){var a,n,r,s,c;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("search",t),a=t.index,n=t.position,r=t.type,this.toggleDrawer({item:a,type:r}),this.setState({searchLoading:!0,drawerType:r}),s=[n],e.next=7,z.a.fetchUsers({self:this,positions:s});case 7:c=e.sent,console.log("searched crew",c,this.state.crew);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"setPermission",value:function(e){var t=this.state.activeCrewMember.id,a=this.state.project,n=a.productionCrew,r=n.filter(function(e){return e.user===t})[0],s=new Set(r.permissions);s.has(e.slug)?(console.log("permission exists, deleting"),s.delete(e.slug)):(console.log("permission does not exist, inserting"),s.add(e.slug)),r.permissions=Array.from(s);var c=n.indexOf(r);n[c]=r,a.productionCrew=n,this.setState({project:a}),z.c.updateProject({self:this,project:a})}},{key:"setPermissionTypes",value:function(){this.setState({permissionTypes:[{title:"Settings",slug:"projectsettings"},{title:"Files",slug:"projectfiles"},{title:"People",slug:"projectpeople"},{title:"Production Crew",slug:"projectprodcrew"},{title:"Production Crew Permissions",slug:"projectprodcrewpermissions"},{title:"Checklists",slug:"projectchecklists"},{title:"Rate Calculator",slug:"projectratecalculator"}]})}},{key:"setPanelView",value:function(e){this.setState({profileDrawerType:e})}},{key:"userLocation",value:function(){var e=this.state.activeCrewMember;return e.profile.location&&"undefined"!==typeof e.profile.location.County?e.profile.location.County:e.profile.location&&"undefined"!==typeof e.profile.location.address.county?e.profile.location.address.county:""}},{key:"reloadProject",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t,a=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({ready:!1}),console.log("reloadProject"),t=this.props.project.id,e.next=5,z.b.fetch("projects",t).then(function(e){e&&(a.setState({project:e}),a.props.updateProjectState(e),z.a.set("activeProject",e))});case 5:e.sent,this.start();case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"confirmDelete",value:function(e){e.item;var t=e.index,a=this.state.deleteConfirmation;a[t]=!0,this.setState({deleteConfirmation:a})}},{key:"remove",value:function(){var e=Object(p.a)(f.a.mark(function e(t){var a,n,r,s,c,o=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.e,n=t.item,r=t.index,a.stopPropagation(),console.log("activeView",this.state.view),s=this.state.isDeleting,(c=this.state.isDeletingStart)[r]=!0,this.setState({isDeletingStart:c}),setTimeout(Object(p.a)(f.a.mark(function e(){var t,a,i,l,u,m,d,h,b,v;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s[r]=!0,c[r]=!1,o.setState({isDeleting:s,isDeletingStart:c}),t=n.id,a=o.props.project,"production"!==o.state.view){e.next=16;break}return i=a.productionCrew,l=a.crewRoster,u=i.findIndex(function(e){return e.id===t}),m=l.findIndex(function(e){return e.user===t}),i.splice(u,1),l.splice(m,1),a.productionCrew=i,a.crewRoster=l,e.next=16,z.c.updateProject({self:o,project:a}).then(function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.c.fetchInvitedCrew({self:o,project:a});case 2:o.reloadProject();case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 16:if("crew"!==o.state.view){e.next=31;break}return d=a.invited,h=a.crew,b=h.findIndex(function(e){return e.id===t}),v=d.findIndex(function(e){return e.id===t}),h.splice(b,1),d.splice(v,1),console.log("crew",h),console.log("crew member to delete",t),console.log("index of crew member to delete",v),console.log("update crew list after delete",h),a.crew=h,a.invited=d,e.next=31,z.c.updateProject({self:o,project:a}).then(function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.c.fetchInvitedCrew({self:o,project:a});case 2:o.reloadProject();case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 31:case"end":return e.stop()}},e)})),1e3);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"inviteByEmail",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t,a,n,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({inviteBusy:!0}),t=this.props.projectOwner,a=this.inviteByEmailAddress.current.value,n=this.state.crew_[0].position,r=window.location.href+"?newInvite=true&referrer=email",e.next=7,z.c.inviteByEmail({self:this,link:r,position:n,project:this.props.project,projectOwner:t,email:a});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"closeInnerDrawer",value:function(){this.setState({innerDrawerOpen:!1})}},{key:"toggleInnerDrawer",value:function(e){this.setState({innerDrawerOpen:!0,activeCrewMember:e})}},{key:"toggleDrawer",value:function(e){var t=e.item,a=e.type;console.log(t),"crew"===a&&this.setState({profileDrawerType:"profile"}),this.setState({drawerType:a,drawerOpen:!this.state.drawerOpen,activeCrewMember:t})}},{key:"userAvatar",value:function(e){return e.profile&&"undefined"!==e.profile.picture?e.profile.picture:on.placeholderImage}},{key:"closeDialog",value:function(){this.setState({isOpen:!1})}},{key:"searchProjects",value:function(e){e.location;var t,a=e.projectType;e.startDate,e.endDate;this.setState({ready:!1}),console.log("search config ",e),console.log(this.state.projects),t="undefined"!==typeof e.location.County?e.location.County.toLowerCase():e.location.address.county.toLowerCase();var n=this.state.projects;console.log("location",t);var r=n.filter(function(e){return e.location.toLowerCase()===t&&e.type===a}),s=r.filter(function(t){return A()(t.start_date).isBetween(e.startDate,e.endDate)});console.log("filtered",r),console.log("filteredDateRange",s),this.setState({projects:s,ready:!0,isOpen:!1})}},{key:"openSearchDialog",value:function(){this.setState({isOpen:!0})}},{key:"updateProjectLocation",value:function(e){console.log("updateProjectLocation",e),this.setState({location:e})}},{key:"setButtons",value:function(){var e=this,t=[{title:"Production",function:function(){return e.setView({filter:"production",button:0})}},{title:"Crew",function:function(){return e.setView({filter:"crew",button:1})}}],a=["production","crew"];this.setState({buttons:t,views:a}),null!==JSON.parse(localStorage.getItem("projectPeopleActiveView"))?this.setState({view:JSON.parse(localStorage.getItem("projectPeopleActiveView"))}):this.setState({view:a[0]}),null!==JSON.parse(localStorage.getItem("projectPeopleActiveButton"))?this.setState({activeButton:JSON.parse(localStorage.getItem("projectPeopleActiveButton"))}):this.setState({activeButton:t[0]})}},{key:"setView",value:function(e){var t=this,a=e.view,n=e.button;this.setState({ready:!1}),this.setState({view:a,activeButton:n}),setTimeout(function(){t.setState({ready:!0})},1e3),z.a.store({label:"projectPeopleActiveView",value:a}),z.a.store({label:"projectPeopleActiveButton",value:n}),"discussion"===a&&setTimeout(function(){return document.querySelector("body").scroll({top:130,left:0,behavior:"smooth"})},1e3)}},{key:"openFilePanel",value:function(e){this.setState({activeFile:e}),this.toggleDrawer()}},{key:"start",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t,a=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=z.a.get("account").user.profile.connections,e.next=3,z.c.fetchConnections({self:this,connections:t});case 3:return e.next=5,z.c.fetchProductionCrew({self:this,project:this.props.project}).then(function(e){a.setState({productionCrewReady:!0,productionCrew:e})});case 5:return e.next=7,z.c.fetchInvitedCrew({self:this,project:this.props.project}).then(function(e){var t=a.props.project.crew,n=e;z.c.checkConfirmed({invited:n,crew:t}).then(function(e){var t=e.sort(function(e,t){return e.isConfirmed-t.isConfirmed}).reverse();a.setState({invited:t,items:t,crewReady:!0})})});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidCatch",value:function(e,t){}},{key:"render",value:function(){var e=this;if(this.state.hasError)return r.a.createElement("h1",null,"Something went wrong.");return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{id:"People",className:"flex flex-column w-100 pb4 pt0"},r.a.createElement("div",{className:"flex flex-row pb3"},r.a.createElement(_,{title:"People",docs:this.state.files,ready:this.state.ready}),"production"===this.state.view&&r.a.createElement("div",{id:"SearchInvite",className:"w-100 flex flex-row items-end justify-start justify-end-ns mb2"},r.a.createElement("button",{onClick:this.openSearchDialog,className:(z.a.get("isMobile")?" w-100 mt3 ":"  ")+" br1- round bs-b bg-black-20 ph4 pv2 pointer bn relative w-100-    "},r.a.createElement("span",{className:"f5 fw6 white pv0 flex items-center justify-center pr2"},this.state.buttonLoading?r.a.createElement(P.a,{icon:"loading",className:" absolute right-0 f4 black-60 mr2"}):r.a.createElement(P.a,{icon:"search",iconSize:12,className:" f4 black-60- white  absolute right-0 mr3"})," ","Search / Invite")))),this.state.buttonsReady&&r.a.createElement("section",{id:"ToolbarButtons",className:"flex flex-column mb3 "},r.a.createElement("div",{className:"flex flex-row justify-between mb3"},r.a.createElement("div",{className:"flex flex-row round"},this.state.buttons.map(function(t,a){return r.a.createElement("button",{title:t.title,onClick:function(){return e.setView({view:e.state.views[a],button:t})},id:t.title,className:(a>0&&" bl b--black-05 ")+(e.state.activeButton.title===t.title?" bg-white-60 ":" bg-white ")+" flex flex-column pa0 mr3- pointer justify-center flex-auto"},r.a.createElement("div",{id:"",className:"flex flex-row ph0 pv0 items-center justify-center"},r.a.createElement("span",{className:"f5 fw6 black-40 ph4 pv2"},t.title)))})))),r.a.createElement("div",{className:"w-100-ns w-100 flex flex-row flex-wrap justify-between br3- -overflow-hidden"},this.state.x?r.a.createElement(P.a,{icon:"loading",iconSize:"15",className:"absolute right-0 f4 black-60 mr3"}):r.a.createElement(P.a,{icon:"swap-right",iconSize:"15",className:"f4 black-60 -white  absolute right-0 mr3"}),this.context.isAuthenticated&&"production"===this.state.view&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"ProductionCrewList",className:"flex flex-column mb3 w-100"},r.a.createElement("div",{className:"flex flex-row f5 fw5 black-50 pb4 items-center"},"Assigned Production Crew"," ",r.a.createElement("div",{style:{color:"white",fontWeight:"bold",marginLeft:"1rem",background:"#c4c4c7"},className:"  count-badge- f7 pv1 ph2 br1 -bg-white "},r.a.createElement("span",{className:"bg-white-"},this.state.ready&&this.state.productionCrew.length||0))),!this.state.ready&&r.a.createElement("div",{className:"flex flex-column pv4 items-start items-center justify-center w-100"},r.a.createElement("div",{className:"sp sp-3balls"})),this.state.productionCrewReady&&r.a.createElement(Ze,{items:this.state.productionCrew,invited:this.props.invited,userAvatar:this.userAvatar,confirmDelete:this.confirmDelete,remove:this.remove,state:this.state,ready:this.state.ready,toggleDrawer:this.toggleDrawer,type:"production",columns:2})),r.a.createElement("div",{className:"form-row flex flex-column pt4 w-100"},r.a.createElement("div",{className:"form-row flex flex-column  pa3 br4 ba b--black-05 w-100"},r.a.createElement("div",{className:"form-row flex flex-row  w-100"},r.a.createElement("button",{onClick:this.addSkillInput,className:"pointer bn br2 bg-black-05 hover-bg-black-10 f5 fw6 black-50 pv4 ph3 w-100"},"Add +"))))),this.context.isAuthenticated&&"crew"===this.state.view&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"CrewList",className:"flex flex-column mb3 w-100"},r.a.createElement("div",{className:"flex flex-row f5 fw5 black-50 pb4 items-center"},"Invited Crew"," ",r.a.createElement("div",{style:{color:"white",fontWeight:"bold",marginLeft:"1rem",background:"#c4c4c7"},className:"  count-badge- f7 pv1 ph2 br1 -bg-white "},r.a.createElement("span",{className:"bg-white-"},this.state.crewReady&&this.state.crew.length||0))),!this.state.ready&&r.a.createElement("div",{className:"flex flex-column pv4 ph3 items-center justify-center w-100"},r.a.createElement("div",{className:"sp sp-3balls"})),this.state.crewReady&&r.a.createElement(Ze,{crew:this.state.crew,items:this.state.items,invited:this.props.invited,userAvatar:this.userAvatar,confirmDelete:this.confirmDelete,remove:this.remove,state:this.state,ready:this.state.ready,toggleDrawer:this.toggleDrawer,type:"crew",columns:2}))),this.context.isAuthenticated&&"crew"===this.state.view&&r.a.createElement("div",{id:"SettingsForm_Crew",className:"flex flex-column mb3 w-100"},r.a.createElement("div",{className:"flex flex-column w-100 pt4"},r.a.createElement("div",{className:"flex flex-column f4 fw7 black pb2"},"Role List"),r.a.createElement("div",{className:"flex flex-column f5 fw5 black-50"},"Please select a list of crew roles below")),r.a.createElement(nn,{project:this.props.project,search:this.search,bulkSearch:this.bulkSearch})))),r.a.createElement(Be.a,Object.assign({className:"bp3-light",onClose:this.closeDialog,title:this.state.dialogTitle},this.state),r.a.createElement(sn,{inviteBusy:this.state.inviteBusy,inviteByEmail:this.inviteByEmail,project:this.props.project,projectOwner:this.props.projectOwner,productionCrew:this.state.productionCrew,addProductionCrewMember:this.addProductionCrewMember})),r.a.createElement(V.a,{title:"Crew Search",closable:!0,onClose:this.toggleDrawer,visible:this.state.drawerOpen,width:"60vw"},r.a.createElement(V.a,{title:"Crew Search",closable:!0,onClose:this.closeInnerDrawer,visible:this.state.innerDrawerOpen,width:"40vw"},this.state.innerDrawerOpen&&r.a.createElement(pn,{user:this.state.activeCrewMember})),r.a.createElement(r.a.Fragment,null,this.state.drawerOpen&&r.a.createElement("div",{className:"pointer flex flex-column justify-end items-start pa3- bg-white h-100- "},["production","crew"].includes(this.state.drawerType)&&r.a.createElement(r.a.Fragment,null,r.a.createElement(r.a.Fragment,null,"production"===this.state.drawerType&&r.a.createElement("div",{className:"flex flex-row overflow-hidden w-100"},r.a.createElement("button",{onClick:function(){return e.setPanelView("profile")},title:"Profile",id:"Profile",className:("profile"===this.state.profileDrawerType?" bg-black-05 black-50 ":" bg-black-10 black-30 ")+"   flex flex-column pa0 mr3- pointer justify-center items-center flex-auto"},r.a.createElement("div",{id:"",className:"flex flex-row ph0 pv0 items-center justify-center"},r.a.createElement("span",{className:"f5 fw6 black-40- -white ph3 pv4 w-100 tc"},"Profile"))),r.a.createElement("button",{onClick:function(){return e.setPanelView("permissions")},title:"Permissions",id:"Permissions",className:("permissions"===this.state.profileDrawerType?" bg-black-05 black-50 ":" bg-black-10 black-30 ")+"  flex flex-column pa0 mr3- pointer justify-center items-center flex-auto"},r.a.createElement("div",{id:"",className:"flex flex-row ph0 pv0 items-center justify-center"},r.a.createElement("span",{className:"f5 fw6 black-40- white- ph3 pv4 w-100 tc"},"Permissions"))),r.a.createElement("button",{onClick:function(){return e.setPanelView("detail")},title:"Detail",id:"Detail",className:("detail"===this.state.profileDrawerType?" bg-black-05 black-50 ":" bg-black-10 black-30 ")+"  flex flex-column pa0 mr3- pointer justify-center items-center flex-auto"},r.a.createElement("div",{id:"",className:"flex flex-row ph0 pv0 items-center justify-center"},r.a.createElement("span",{className:"f5 fw6 black-40- white- ph3 pv4 w-100 tc"},"Detail"))))),"permissions"===this.state.profileDrawerType&&r.a.createElement("div",{id:"Permissions",className:"raleway flex flex-column pa5 w-100"},r.a.createElement("div",{className:"flex flex-column mt0 w-100",id:""},r.a.createElement("div",{className:"form-row flex flex-column"},r.a.createElement("div",{className:"form-row flex flex-row items-center"},r.a.createElement("span",{className:"f5 fw4 black-50 pb3"},"Set user permissions")),r.a.createElement("div",{className:"form-row flex flex-row items-center"},r.a.createElement("span",{className:"f4 fw6 black-80 pb3"},"User can edit")),r.a.createElement("div",{className:"form-row flex flex-column"},this.state.permissionTypes.map(function(t,a){return r.a.createElement("div",{className:"form-row flex flex-row pt4 items-center"},r.a.createElement("label",{className:"f5 fw6 black-70 pb3- ttc tl mr4 w-30"},t.title),r.a.createElement("div",{className:"  checkbox-square  flex flex-row -flex-column pt2-ns pl3 f5 fw6 black ph4  "},r.a.createElement(X.a,{type:"checkbox",onChange:function(){return e.setPermission(t)},checked:e.state.project.productionCrew.filter(function(t){return t.user===e.state.activeCrewMember.id})[0].permissions.includes(t.slug)})))}))))),"profile"===this.state.profileDrawerType&&r.a.createElement(pn,{user:this.state.activeCrewMember}),"detail"===this.state.profileDrawerType&&r.a.createElement(hn,{project:this.props.project,user:this.state.activeCrewMember})),!this.state.searchLoading&&"search"===this.state.drawerType&&!this.state.bulkSearch&&r.a.createElement(k,null,r.a.createElement("h3",{className:"f5 fw4 black-50 tc pv4 ph4 word-break-all flex items-center mb0"},r.a.createElement("span",{className:"flex flex-row ph2 pv0 round bg-black-20 white mr2 f5 fw6"},!this.state.searchLoading&&this.state.crew_[0]&&this.state.crew_[0].users.length)," ","Users with role"," ",r.a.createElement("span",{className:"fw6 white ml2 ph3 pv1 round bg-black-20"},!this.state.searchLoading&&this.state.crew_[0]&&this.state.crew_[0].position))),r.a.createElement("div",{className:"pointer flex flex-column justify-start items-start -pv3- -ph4 bg-white w-100 flex-auto overflow-auto h-100"},this.state.searchLoading&&r.a.createElement("div",{className:"flex flex-column items-center justify-center pv4 ph4 w-100"},r.a.createElement("div",{className:"sp sp-3balls"})),!this.state.searchLoading&&"search"===this.state.drawerType&&!this.state.bulkSearch&&r.a.createElement(k,null,this.state.crew_[0].users.map(function(t,a){return r.a.createElement(un,{projectOwner:e.props.projectOwner,inviteToProject:e.inviteToProject,toggleInnerDrawer:e.toggleInnerDrawer,userAvatar:e.userAvatar,item:t,project:e.props.project,position:t.position,showUserProfile:e.showUserProfile,reloadProject:e.reloadProject})})),!this.state.searchLoading&&"search"===this.state.drawerType&&this.state.bulkSearch&&this.state.crew_.map(function(t,a){return r.a.createElement("div",{className:"flex flex-column pb3 mb3 bb b--black-05 w-100"},r.a.createElement(k,null,r.a.createElement("h3",{className:"f5 fw4 black-50 tc pv4 ph4 word-break-all flex items-center mb0"},r.a.createElement("span",{className:"flex flex-row ph2 pv0 round bg-black-20 white mr2 f5 fw6"},t.users.length)," ","Users with role"," ",r.a.createElement("span",{className:"fw6 white ml2 ph3 pv1 round bg-black-20"},t.position))),r.a.createElement(k,null,t.users.map(function(t,a){return r.a.createElement(un,{showUserProfile:e.showUserProfile,projectOwner:e.props.projectOwner,inviteToProject:e.inviteToProject,toggleInnerDrawer:e.toggleInnerDrawer,userAvatar:e.userAvatar,item:t,project:e.props.project,position:t.position,reloadProject:e.reloadProject,bulkSearch:!0})})),"search"===e.state.drawerType&&e.state.bulkSearch&&r.a.createElement("div",{className:"form-row flex flex-column ph4 pv4 bt bb b--black-05"},r.a.createElement("div",{className:"form-row flex flex-column"},r.a.createElement("div",{className:"flex flex-row f5 fw4 black-50 pb3"},"Invite user by email for position"," ",r.a.createElement("span",{className:"fw6 black ml2"},!e.state.searchLoading&&t.position)),r.a.createElement("div",{className:"flex flex-row "},r.a.createElement("input",{ref:e.inviteByEmailAddress,type:"text",placeholder:"Enter email address",className:"flex flex-column ph3 pv3  br1 bg-white black-50 f4 fw5 ba w-100 b--black-05"}),r.a.createElement("div",{className:"flex flex-column w-20 bl b--black-05"},r.a.createElement("button",{onClick:e.inviteByEmail,className:"pointer flex h-100 items-center justify-center f6 bg-near-white bn f5 fw6 black-50 "},"Invite",e.state.inviteBusy?r.a.createElement("div",{className:"flex flex-column items-start ml2"},r.a.createElement(Me.a,{size:15})):r.a.createElement(P.a,{icon:"arrow-right",className:"ml2"})))))))}))),"search"===this.state.drawerType&&!this.state.bulkSearch&&r.a.createElement("div",{className:"form-row flex flex-column ph4 pv4 bt bb b--black-05"},r.a.createElement("div",{className:"form-row flex flex-column"},r.a.createElement("div",{className:"flex flex-row f5 fw4 black-50 pb3"},"Invite user by email for position"," ",r.a.createElement("span",{className:"fw6 black ml2"},!this.state.searchLoading&&this.state.crew_[0]&&this.state.crew_[0].position)),r.a.createElement("div",{className:"flex flex-row "},r.a.createElement("input",{ref:this.inviteByEmailAddress,type:"text",placeholder:"Enter email address",className:"flex flex-column ph3 pv3  br1 bg-white black-50 f4 fw5 ba w-100 b--black-05"}),r.a.createElement("div",{className:"flex flex-column w-20 bl b--black-05"},r.a.createElement("button",{onClick:this.inviteByEmail,className:"pointer flex h-100 items-center justify-center f6 bg-near-white bn f5 fw6 black-50 "},"Invite",this.state.inviteBusy?r.a.createElement("div",{className:"flex flex-column items-start ml2"},r.a.createElement(Me.a,{size:15})):r.a.createElement(P.a,{icon:"arrow-right",className:"ml2"})))))))," "))}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(r.a.Component),wn=vn;vn.contextType=Pe;var gn={hidden:{y:10,opacity:0},show:{opacity:1,y:0,transition:{staggerChildren:.2,y:{type:"spring",stiffness:100},default:{duration:.3}}}},xn=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={crew:[],invited:[],items:[],isConfirmed:!1,ready:!1,days:a.props.days},a.rate=r.a.createRef(),a.setRate=a.setRate.bind(Object(v.a)(a)),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"setRate",value:function(e){var t=e.index,a=e.value,n=e.user;console.log("set rate 1",a),this.props.setRate({index:t,rate:parseInt(a),user:n})}},{key:"setDays",value:function(e){var t=e.index,a=e.value;console.log("set rate 1",a),this.props.setDays({index:t,days:parseInt(a)})}},{key:"componentDidMount",value:function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("UserList props",this.props);case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return console.log("user props ",this.props),r.a.createElement("div",{className:"flex flex-column mt0 w-100 -pa3 -ba -b--black-05 -br4 -overflow-hidden",id:""},this.props.ready&&r.a.createElement(qe.a.section,{variants:gn,initial:"hidden",animate:"show"},this.props.items.length>0&&this.props.items.map(function(t,a){return r.a.createElement(qe.a.div,{variants:t,key:a,exit:"hidden"},t&&r.a.createElement("div",{id:"user-"+t.id,className:" flex flex-row justify-start w-100 trans-a bg-white-50 hover-bg-white mb3 bs-b br3 overflow-hidden "},r.a.createElement("div",{className:"  flex flex-row-ns flex-column flex-auto w-30 "},r.a.createElement("div",{onClick:function(){return e.props.toggleDrawer({item:t,type:"user"})},className:"flex flex-column w-100="},r.a.createElement("div",{className:"round- p-a1 bg-white center"},r.a.createElement("div",{style:{width:"120px",height:"90px",backgroundImage:"url("+e.props.userAvatar(t)+")"},className:"center pointer round-  cover bg-center"}))),r.a.createElement("div",{onClick:function(){return e.props.toggleDrawer({item:t,type:"user"})},className:"flex flex-column justify-center items-start pl4"},r.a.createElement("div",{className:"f4 flex flex-column items-start w-100 raleway "},r.a.createElement("span",{className:"flex flex-row-ns flex-column -w-100 black f3 fw6"},r.a.createElement("span",{className:"flex flex-row items-center justify-start-ns justify-center black f5 fw6"},t.profile.name.first," ",t.profile.name.last))))),r.a.createElement("div",{className:"flex flex-row-ns flex-column w-20 ph4 pv3 "},r.a.createElement("div",{className:"flex flex-column justify-center"},r.a.createElement("span",{className:"flex flex-row items-center justify-start-ns justify-start black-40 f6 fw6"},r.a.createElement("label",{className:"input-label f6 fw5 black-40 mr2"},"Daily Rate"),r.a.createElement("span",{className:" f4 fw6 black-60"},e.props.context.account.user.currency&&e.props.context.account.user.currency.symbol),r.a.createElement("input",{ref:e.rate,onChange:function(n){return e.setRate({index:a,value:n.target.value,user:t.id})},type:"number",className:"flex flex-column ph3 pv2 bn br1 f4 fw6 black-60 w-100",defaultValue:e.props.state.project.crewRoster.filter(function(e){return e.user===t.id})[0].rate})))),r.a.createElement("div",{className:"flex flex-row-ns flex-column w-20 ph4 pv3 "},r.a.createElement("div",{className:"flex flex-column justify-center"},r.a.createElement("span",{className:"flex flex-row items-center justify-start-ns justify-start black-40 f6 fw6"},r.a.createElement("label",{className:"input-label f6 fw5 black-40 mr2"},"Days"),r.a.createElement("div",{className:"flex flex-column ph3 pv2 bn br1 f4 fw6 black-60 w-100"},e.props.state.project.crewRoster.filter(function(e){return e.user===t.id})[0].days.filter(function(e){return e.selected}).length)))),r.a.createElement("div",{className:"flex flex-row-ns flex-column w-30 ph4 pv3 "},r.a.createElement("div",{className:"flex flex-column justify-center"},r.a.createElement("span",{className:"flex flex-row items-center justify-start-ns justify-start black-40 f6 fw6"},r.a.createElement("label",{className:"input-label f6 fw5 black-40 mr2"},"Total"),r.a.createElement("div",{className:"flex flex-row ph3 pv2 bn br1 f4 fw6 black-60"},r.a.createElement("span",null,e.props.context.account.user.currency&&e.props.context.account.user.currency.symbol),e.props.state.project.crewRoster.filter(function(e){return e.user===t.id})[0].rate*e.props.state.project.crewRoster.filter(function(e){return e.user===t.id})[0].days.filter(function(e){return e.selected}).length)))),"crew"===e.props.type&&r.a.createElement("div",{className:"flex flex-row-ns flex-column w-20 ph4 pv3 "},r.a.createElement("div",{className:"flex flex-column justify-center"},r.a.createElement("span",{className:"flex flex-row items-center justify-start-ns justify-start black-40 f6 fw6"},t.isConfirmed?"Confirmed ":"Not Confirmed",t.isConfirmed?r.a.createElement(P.a,{icon:"endorsed",iconSize:"20",className:"f6 green ml2"}):""))),!1===e.props.state.deleteConfirmation[a]&&r.a.createElement("div",{onClick:function(){return e.props.confirmDelete({item:t,index:a})},className:"pointer flex flex-column items-end justify-center w-20 ph4 pv3"},r.a.createElement("div",{className:"flex flex-column justify-center"},r.a.createElement("span",{className:"flex flex-row items-center justify-start-ns justify-center black-30 hover-black-70 f6 fw6"},"Remove",r.a.createElement(P.a,{icon:"delete",iconSize:20,className:"ml2 black-20 f6"})))),!0===e.props.state.deleteConfirmation[a]&&r.a.createElement("div",{onClick:function(){return e.props.remove({item:t,index:a})},className:"pointer flex flex-column items-end justify-center w-20 ph4 pv3"},r.a.createElement("div",{className:"flex flex-column justify-center"},r.a.createElement("span",{className:"flex flex-row items-center justify-start-ns justify-center black-30 hover-black-70 f6 fw6"},"Are you sure?",r.a.createElement(P.a,{icon:"delete",iconSize:20,className:"ml2 red f6"}))))))})),0===this.props.items.length&&r.a.createElement("div",{className:"flex f5 fw5 black-50 pv3"},"No crew assigned yet."))}}]),t}(r.a.Component),yn={hidden:{y:10,opacity:0},show:{opacity:1,y:0,transition:{staggerChildren:.2,y:{type:"spring",stiffness:100},default:{duration:.3}}}},jn=(r.a.Component,a(764),function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).componentDidMount=Object(p.a)(f.a.mark(function e(){var t,n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=z.a.get("activeProject"),console.log("project",t),e.next=4,z.c.fetchConfirmedCrew({self:null,project:t});case 4:n=e.sent,a.setState({crew:n}),a.setState({crewRoster:a.props.project.crewRoster,months:a.props.project.calendar,ready:!0}),a.calculateTotal(),setInterval(Object(p.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.state.delaySaveActive){e.next=5;break}return(t=a.state.project).crewRoster=a.state.crewRoster,e.next=5,z.c.updateProject({self:Object(v.a)(a),project:t}).then(function(e){Rt.a.loading("Saving"),a.setState({delaySaveActive:!1}),a.setState({project:z.a.get("activeProject")})});case 5:case"end":return e.stop()}},e)})),4e3);case 9:case"end":return e.stop()}},e)})),a.getDerivedStateFromProps=function(e,t){},a.getSnapshotBeforeUpdate=function(e,t){},a.componentDidUpdate=function(){},a.componentWillUnmount=function(){},a.state={hasError:!1,project:a.props.project,drawerOpen:!1,innerDrawerOpen:!1,ready:!1,buttonsReady:!0,view:null,views:[],activeButton:{},buttons:[],projectType:a.props.project.type,startDate:a.props.project.start_date,endDate:a.props.project.end_date,location:a.props.project.location,loading:!1,x:!1,lightboxActive:!1,productionCrew:[],crew:[],crew_:[],searchLoading:!1,activeCrewMember:null,inviteBusy:!1,isDeleting:[],isDeletingStart:[],del:[],deleteConfirmation:[],drawerType:"search",days:0,total:0,months:[],crewDays_:[],crewRoster:[],delaySaveActive:!1,delaySaves:[]},a.toggleDrawer=a.toggleDrawer.bind(Object(v.a)(a)),a.toggleInnerDrawer=a.toggleInnerDrawer.bind(Object(v.a)(a)),a.closeInnerDrawer=a.closeInnerDrawer.bind(Object(v.a)(a)),a.userAvatar=a.userAvatar.bind(Object(v.a)(a)),a.setRate=a.setRate.bind(Object(v.a)(a)),a.setDays=a.setDays.bind(Object(v.a)(a)),a.updateTotal=a.updateTotal.bind(Object(v.a)(a)),a.checkDay=a.checkDay.bind(Object(v.a)(a)),a.delaySave=a.delaySave.bind(Object(v.a)(a)),a.calculateTotal=a.calculateTotal.bind(Object(v.a)(a)),a.projectTitle=r.a.createRef(),a.projectDescription=r.a.createRef(),a.inviteByEmailAddress=r.a.createRef(),window.self=Object(v.a)(a),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"delaySave",value:function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({delaySaveActive:!0});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"checkDay",value:function(e){var t=e.person,a=e.day;e.index_;console.log("checkDay",e);var n=this.state.crewRoster,r=n.findIndex(function(e){return e.user===t}),s=n[r],c=s.days.findIndex(function(e){return e.day===a});s.days[c].selected=!s.days[c].selected,this.setState({crewRoster:n}),this.setState({delaySaveActive:!0}),this.calculateTotal()}},{key:"updateTotal",value:function(){var e=this.state.crew,t=0,a=!0,n=!1,r=void 0;try{for(var s,c=e[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var o=s.value;t+=o.rate*o.days}}catch(i){n=!0,r=i}finally{try{a||null==c.return||c.return()}finally{if(n)throw r}}this.setState({total:t})}},{key:"setRate",value:function(){var e=Object(p.a)(f.a.mark(function e(t){var a,n,r,s,c,o=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.index,n=t.rate,r=t.user,console.log("set rate",n),(s=this.state.crew)[a].rate=n,this.setState({crew:s}),console.log("updated crew",s),this.state.crewRoster.filter(function(e){return e.user===r})[0].rate=n,(c=this.state.project).crewRoster=this.state.crewRoster,e.next=11,z.c.updateProject({self:this,project:c}).then(function(e){o.calculateTotal()});case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"setDays",value:function(e){e.index,e.days}},{key:"userAvatar",value:function(e){return e.profile&&"undefined"!==e.profile.picture?e.profile.picture:on.placeholderImage}},{key:"closeInnerDrawer",value:function(){this.setState({innerDrawerOpen:!1})}},{key:"toggleInnerDrawer",value:function(e){this.setState({innerDrawerOpen:!0,activeCrewMember:e})}},{key:"toggleDrawer",value:function(e){e.item;var t=e.type;this.setState({drawerType:t,drawerOpen:!this.state.drawerOpen})}},{key:"calculateTotal",value:function(){var e=0,t=!0,a=!1,n=void 0;try{for(var r,s=this.state.crewRoster[Symbol.iterator]();!(t=(r=s.next()).done);t=!0){var c=r.value;e+=c.days.filter(function(e){return e.selected}).length*c.rate}}catch(o){a=!0,n=o}finally{try{t||null==s.return||s.return()}finally{if(a)throw n}}this.setState({total:e})}},{key:"componentWillUnmount",value:function(){clearInterval(void 0)}},{key:"componentDidCatch",value:function(e,t){}},{key:"render",value:function(){var e=this,t=this.state.total;return this.state.hasError?r.a.createElement("h1",null,"Something went wrong."):r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{id:"People",className:"flex flex-column w-100 pb4 pt0"},r.a.createElement("div",{className:"flex flex-row pv3 "},r.a.createElement(_,{title:"Rate Calculator"}),r.a.createElement("div",{id:"SearchInvite",className:"w-100 flex flex-row items-end justify-start justify-end-ns"},r.a.createElement("button",{onClick:this.openSearchDialog,className:(z.a.get("isMobile")?" w-100 mt3 ":"  ")+" br1- round bs-b bg-black-20 ph4 pv2 pointer bn relative w-100-    "},r.a.createElement("span",{className:"f5 fw6 white pv0 flex items-center justify-center pr2"},this.state.buttonLoading?r.a.createElement(P.a,{icon:"loading",className:" absolute right-0 f4 black-60 mr2"}):r.a.createElement(P.a,{icon:"plus",iconSize:12,className:" f4 black-60- white  absolute right-0 mr3"})," ","Add Sheet")))),r.a.createElement("div",{className:"flex flex-row pt3 bt b--black-05"},r.a.createElement("section",{id:"",className:"flex flex-column relative pb4"},r.a.createElement("h1",{className:"ma0 raleway f3 fw6  mb-0 flex flex-row items-center justify-start black"},r.a.createElement("span",null,"Total"))),r.a.createElement("section",{id:"",className:"flex flex-column relative pb4 ml2"},r.a.createElement("h1",{className:"ma0 raleway f3 fw4  mb-0 flex flex-row items-center justify-start black"},r.a.createElement("span",null,this.context.account.user.currency&&this.context.account.user.currency.symbol),r.a.createElement("span",null,t)))),!this.state.ready&&r.a.createElement("div",{className:"flex flex-column pv4 items-start"},r.a.createElement("div",{className:"sp sp-3balls"})),r.a.createElement("div",{className:"w-100-ns w-100 flex flex-row flex-wrap justify-between br3- -overflow-hidden"},this.state.x?r.a.createElement(P.a,{icon:"loading",iconSize:"15",className:"absolute right-0 f4 black-60 mr3"}):r.a.createElement(P.a,{icon:"swap-right",iconSize:"15",className:"f4 black-60 -white  absolute right-0 mr3"}),this.state.ready&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"ProductionCrewList",className:"flex flex-column mb3 w-100"},r.a.createElement("div",{className:"flex flex-row f5 fw5 black-50 pb4 items-center"},"Assigned Crew Members"," "),r.a.createElement(xn,{crew:this.state.crew,items:this.state.crew,invited:this.props.invited,userAvatar:this.userAvatar,confirmDelete:this.confirmDelete,remove:this.remove,state:this.state,ready:this.state.ready,toggleDrawer:this.toggleDrawer,type:"production",setRate:this.setRate,setDays:this.setDays,days:this.state.days,updateTotal:this.updateTotal,context:this.context}))))),this.state.ready&&r.a.createElement("section",{id:"People",className:"flex flex-column w-100 pb4 pt0"},r.a.createElement("div",{className:"flex flex-column pv3 "},this.state.months.map(function(t,a){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flex flex-row pv3 bb b--black-05 f4 fw7 black pr3 br bg-white ph4 mt4 br2"},t&&t.name),r.a.createElement("div",{className:"flex flex-row overflow-auto"},r.a.createElement("div",{style:{width:"calc( 200px + calc(60px * "+t.days.length+"))"},className:"flex flex-column br bl b--black-05"},r.a.createElement("div",{style:{},className:"flex flex-row bb b--black-05 f5 fw6 black pr3- br- bb bg-white-50"},r.a.createElement("div",{className:"flex width5"}),t&&t.days.map(function(e,t){return r.a.createElement("div",{className:"width3 flex flex-column pv3 f5 fw7 black ph3 bl b--black-05 flex-aut-o"},A()(e).format("Do"))})),e.state.crew.map(function(a,n){return console.log("crewRoster filter ",e.state.crewRoster),console.log("crewRoster filter ",a.id),console.log("crewRoster filter ",e.state.crewRoster.filter(function(e){return e.user===a.id})),r.a.createElement("div",{className:"  flex flex-row-ns flex-column flex-auto- bb b--black-05"},r.a.createElement("div",{className:"flex w5- width5 pl3 pv2"},r.a.createElement("div",{onClick:function(){return e.props.toggleDrawer({item:a,type:"user"})},className:"flex flex-column w-100= justify-center"},r.a.createElement("div",{className:"round p-a1 bg-white center"},r.a.createElement("div",{style:{width:"40px",height:"40px",backgroundImage:"url("+e.userAvatar(a)+")"},className:"center pointer round-  cover bg-center"}))),r.a.createElement("div",{onClick:function(){return e.props.toggleDrawer({item:a,type:"user"})},className:"flex flex-column justify-center items-start pl2"},r.a.createElement("div",{className:"f4 flex flex-column items-start w-100 raleway "},r.a.createElement("span",{className:"flex flex-row-ns flex-column -w-100 black f3 fw6"},r.a.createElement("span",{className:"flex flex-row items-center justify-start-ns justify-center black f5 fw6"},a.profile.name.first," ",a.profile.name.last))))),r.a.createElement("div",{className:"flex flex-row"},t&&t.days.map(function(t,n){return r.a.createElement("div",{className:"w3- width3 flex flex-column pv4- f5 fw7 black ph3- bl b--black-05 flex-auto-"},r.a.createElement("div",{className:"checklist-items flex flex-column flex-auto "},r.a.createElement("div",{onClick:function(){return e.checkDay({person:a.id,day:t,index_:n})},className:(e.state.crewRoster.filter(function(e){return e.user===a.id})[0].days.filter(function(e){return e.day===t})[0].selected?" bg-blue hover-lighten-10":" bg-white-50 ")+" trans-a pointer checklist-item justify-center items-center flex flex-row flex-auto "},r.a.createElement("div",{className:" flex flex-column items-center justify-center ph3- pv3- w3-"},e.state.crewRoster.filter(function(e){return e.user===a.id})[0].days.filter(function(e){return e.day===t})[0].selected?r.a.createElement(P.a,{icon:"tick",className:"white f4 fw6 "}):r.a.createElement(P.a,{icon:"ring",className:"black-20 f4 fw6 "})))))})))}))))}))),r.a.createElement(Be.a,Object.assign({className:"bp3-light",onClose:this.closeDialog,title:this.state.dialogTitle},this.state),r.a.createElement(sn,{inviteBusy:this.state.inviteBusy,inviteByEmail:this.inviteByEmail,project:this.props.project,projectOwner:this.props.projectOwner,productionCrew:this.state.productionCrew})),r.a.createElement(V.a,{title:"Crew Search",closable:!0,onClose:this.toggleDrawer,visible:this.state.drawerOpen,width:"60vw"},r.a.createElement(r.a.Fragment,null,this.state.drawerOpen&&r.a.createElement("div",{className:"pointer flex flex-column justify-end items-start pa3 bg-white "},!this.state.searchLoading&&"search"===this.state.drawerType&&r.a.createElement(k,null,r.a.createElement("h3",{className:"f5 fw4 black-50 tc pv2 ph3 word-break-all flex items-center"},r.a.createElement("span",{className:"flex flex-row ph2 pv0 round bg-black-20 white mr2 f5 fw6"},!this.state.searchLoading&&this.state.crew_[0]&&this.state.crew_[0].users.length)," ","Users with role"," ",r.a.createElement("span",{className:"fw6 white ml2 ph3 pv1 round bg-black-20"},!this.state.searchLoading&&this.state.crew_[0]&&this.state.crew_[0].position))),r.a.createElement("div",{className:"pointer flex flex-column justify-end items-start pa3 bg-white w-100 flex-auto"},r.a.createElement(V.a,{title:"Crew Detail",placement:"right",closable:!0,onClose:this.closeInnerDrawer,visible:this.state.innerDrawerOpen,width:"40vw"},r.a.createElement("div",{className:"pointer flex flex-column justify-end items-start pa0 bg-white w-100 flex-auto"},this.state.innerDrawerOpen&&r.a.createElement("div",{className:"pointer flex flex-column justify-end items-start pa0 bg-white"},!this.state.searchLoading&&null!==this.state.activeCrewMember&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"ProjectOwner",className:"flex flex-column w-100 pa0"},r.a.createElement("div",{className:"pa4 flex flex-row-ns flex-column w-100"},r.a.createElement("div",{className:"flex flex-column w-100="},r.a.createElement("div",{className:"round pa1 bg-white center"},r.a.createElement("div",{style:{width:"90px",height:"90px",backgroundImage:"url("+this.userAvatar(this.state.activeCrewMember)+")"},className:"center pointer round  cover bg-center"}))),r.a.createElement("div",{className:"flex flex-column justify-center w-100 ph3"},r.a.createElement("div",{className:"f4 flex flex-column items-center w-100 raleway "},r.a.createElement("span",{className:"flex flex-row-ns flex-column w-100 black f3 fw6"},r.a.createElement("span",{className:"flex flex-row items-center justify-start-ns justify-center black-70 f5 fw6"},this.state.activeCrewMember.profile.name.first," ",this.state.activeCrewMember.profile.name.last)))))),r.a.createElement("section",{id:"ProfileButtons"},r.a.createElement("div",{className:"flex flex-row mb2-ns w-100 bt b--black-05 "},r.a.createElement("button",{title:"View or upload CV",id:"CV-button",className:"db relative w-100 pa3 ph4 pv3 br1- bg-white bg-green-"},r.a.createElement("div",{id:"",className:"db relative w-100"},r.a.createElement("span",{className:"f5 fw6 black-60 -white ph3-"},"Cirriculum Vitae"," "))),r.a.createElement("button",{title:"View or upload CV",id:"CV-button",className:"db relative w-100 pa3 ph4 pv3 br1- bg-white "},r.a.createElement("div",{id:"",className:"db relative w-100"},r.a.createElement("span",{className:"f6 fw6 black-60 -white ph3-"},"Add to Network"))),r.a.createElement("button",{title:"View or upload CV",id:"CV-button",className:"db relative w-100 pa3 ph4 pv3 br1- bg-white bl b--white-20 bw1"},r.a.createElement("div",{id:"",className:"db relative w-100"},r.a.createElement("span",{className:"f6 fw6 black-60 -white ph3-"},"Send Message"))))),r.a.createElement("div",{className:"flex flex-row -nsflex-column w-100 black-60 raleway flex-wrap items-center justify-start-ns justify-between pa4 bt b--black-05"},r.a.createElement("div",{className:"flex flex-column w--100 pb1-ns pb2 mr3"},r.a.createElement("span",{className:"flex-column flex f6 fw4 black-40 items-start"},r.a.createElement("span",{className:"flex  mb3"},"Age"),r.a.createElement("span",{className:"flex items-center justify-center f6 fw6 -ml3-ns black-50- white ph2 pv1 ba b--black-05 br1 -round bw1- bg-white-20- bg-black -ts-a tc ml2-"},A()().diff(this.state.activeCrewMember.profile.dob,"years")))),r.a.createElement("div",{className:"flex flex-column w--100 pb1-ns pb2 mr3"},r.a.createElement("span",{className:"flex-column flex f6 fw4 black-40 items-start"},r.a.createElement("span",{className:"flex  mb3"},"Gender"),r.a.createElement("span",{className:"flex items-center justify-center f6 fw6 -ml3-ns black-50- white ph2 pv1 ba b--black-05 br1 -round bw1- bg-white-20- bg-black -ts-a tc ml2-"},this.state.activeCrewMember.profile.gender&&this.state.activeCrewMember.profile.gender||""))),r.a.createElement("div",{className:"flex flex-column w--100 pb1-ns pb2 mr3"},r.a.createElement("span",{className:"flex-column flex f6 fw4 black-40 items-start"},r.a.createElement("span",{className:"flex  mb3"},"Location"),r.a.createElement("span",{className:"flex items-center justify-center f6 fw6 -ml3-ns black-50- white ph2 pv1 ba b--black-05 br1 -round bw1- bg-white-20- bg-black -ts-a tc ml2-"})))),r.a.createElement(Xe,{user:this.state.activeCrewMember,editSkills:null,editBio:null,canEdit:!1}),r.a.createElement(ia,{type:"user",user:this.state.activeCrewMember}))))),this.state.searchLoading&&r.a.createElement("div",{className:"flex flex-column pv3"},r.a.createElement("div",{className:"sp sp-3balls"})),!this.state.searchLoading&&"search"===this.state.drawerType&&r.a.createElement(k,null,this.state.crew_[0].users.map(function(t,a){return console.log("item",t),r.a.createElement(un,{inviteToProject:e.inviteToProject,toggleInnerDrawer:e.toggleInnerDrawer,userAvatar:e.userAvatar,item:t,project:e.props.project,position:e.state.crew_[0].position})})))),"search"===this.state.drawerType&&r.a.createElement("div",{className:"form-row flex flex-column ph3 pv3 bb b--black-05"},r.a.createElement("div",{className:"form-row flex flex-column"},r.a.createElement("div",{className:"flex flex-row f5 fw4 black-50 pb3"},"Invite user by email for position"," ",r.a.createElement("span",{className:"fw6 black ml2"},!this.state.searchLoading&&this.state.crew_[0]&&this.state.crew_[0].position)),r.a.createElement("div",{className:"flex flex-row "},r.a.createElement("input",{ref:this.inviteByEmailAddress,type:"text",placeholder:"Enter email address",className:"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a w-100"}),r.a.createElement("div",{class:"flex flex-column w-20 bl b--black-05"},r.a.createElement("button",{onClick:this.inviteByEmail,class:"pointer flex h-100 items-center justify-center f6 bg-white bn f5 fw6 black-50 "},"Invite",this.state.inviteBusy?r.a.createElement("div",{className:"flex flex-column items-start ml2"},r.a.createElement(Me.a,{size:15})):r.a.createElement(P.a,{icon:"arrow-right",className:"ml2"})))))))," "))}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(r.a.Component));jn.contextType=Pe;a(765);var kn=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).handleProjectTypeChange=function(e){a.setState({projectType:e})},a.handleStartDateChange=function(e){window.log.warn("start date",e.toString()),a.setState({startDate:e.toString()})},a.handleEndDateChange=function(e){window.log.warn("end date",e.toString()),a.setState({endDate:e.toString()})},a.updateProject=Object(p.a)(f.a.mark(function e(){var t,n,r,s;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Rt.a.config({top:"40vh"}),Rt.a.loading("Saving project..",0),a.setState({loading:!0}),t=a.props.project,n=a.state.checklists,t.checklists=n,console.log("Project update data ",t),r=z.a.api("projects")+t.id,s={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},e.next=11,fetch(r,s).then(function(e){return e.json()}).then(function(e){console.log(e),a.setState({project:e}),z.a.store({label:"activeProject",value:e}),setTimeout(function(){a.setState({loading:!1,x:!1}),document.querySelector("body").scroll({top:0,left:0,behavior:"smooth"}),Rt.a.destroy(),Rt.a.success("Project Updated",1e3),setTimeout(function(){Rt.a.destroy()},1e3)},1e3)});case 11:case"end":return e.stop()}},e)})),a.componentDidMount=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("project",a.props.project),a.props.project.hasOwnProperty("checklists")?a.setState({checklists:a.props.project.checklists,activeChecklist:a.props.project.checklists[0],checklistsReady:!0}):a.setState({checklists:[],activeChecklist:null,checklistsReady:!0});case 2:case"end":return e.stop()}},e)})),a.getDerivedStateFromProps=function(e,t){},a.getSnapshotBeforeUpdate=function(e,t){},a.componentDidUpdate=function(){},a.componentWillUnmount=function(){},a.state={hasError:!1,project:a.props.project,drawerOpen:!1,innerDrawerOpen:!1,ready:!1,checklistsReady:!0,checklists:[],activeChecklist:{},checkListItemLabelInputError:!1,view:null,views:[],projectType:a.props.project.type,startDate:a.props.project.start_date,endDate:a.props.project.end_date,location:a.props.project.location,loading:!1,x:!1,lightboxActive:!1,productionCrew:[],crew:[],crew_:[],searchLoading:!1,activeCrewMember:null,inviteBusy:!1,isDeleting:[],isDeletingStart:[],del:[],deleteConfirmation:[],drawerType:"search"},a.toggleDrawer=a.toggleDrawer.bind(Object(v.a)(a)),a.toggleInnerDrawer=a.toggleInnerDrawer.bind(Object(v.a)(a)),a.closeInnerDrawer=a.closeInnerDrawer.bind(Object(v.a)(a)),a.openFilePanel=a.openFilePanel.bind(Object(v.a)(a)),a.setView=a.setView.bind(Object(v.a)(a)),a.setChecklist=a.setChecklist.bind(Object(v.a)(a)),a.handleStartDateChange=a.handleStartDateChange.bind(Object(v.a)(a)),a.handleEndDateChange=a.handleEndDateChange.bind(Object(v.a)(a)),a.handleProjectTypeChange=a.handleProjectTypeChange.bind(Object(v.a)(a)),a.updateProject=a.updateProject.bind(Object(v.a)(a)),a.updateProjectLocation=a.updateProjectLocation.bind(Object(v.a)(a)),a.openSearchDialog=a.openSearchDialog.bind(Object(v.a)(a)),a.closeDialog=a.closeDialog.bind(Object(v.a)(a)),a.searchProjects=a.searchProjects.bind(Object(v.a)(a)),a.userAvatar=a.userAvatar.bind(Object(v.a)(a)),a.search=a.search.bind(Object(v.a)(a)),a.inviteByEmail=a.inviteByEmail.bind(Object(v.a)(a)),a.remove=a.remove.bind(Object(v.a)(a)),a.confirmDelete=a.confirmDelete.bind(Object(v.a)(a)),a.addChecklist=a.addChecklist.bind(Object(v.a)(a)),a.addChecklistItem=a.addChecklistItem.bind(Object(v.a)(a)),a.updateChecklistTitle=a.updateChecklistTitle.bind(Object(v.a)(a)),a.checkItem=a.checkItem.bind(Object(v.a)(a)),a.projectTitle=r.a.createRef(),a.projectDescription=r.a.createRef(),a.inviteByEmailAddress=r.a.createRef(),a.checklistTitle=r.a.createRef(),a.checklistItemLabel=r.a.createRef(),window.self=Object(v.a)(a),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"checkItem",value:function(){var e=Object(p.a)(f.a.mark(function e(t){var a,n,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.state.checklists,!0===(n=a[this.state.activeChecklist]).checked[t]?n.checked[t]=!1:n.checked[t]=!0,a[this.state.activeChecklist]=n,this.setState({checklists:a}),(r=this.props.project).checklists=a,e.next=9,z.c.updateProject({self:this,project:r});case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"addChecklistItem",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t,a,n,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==this.checklistItemLabel.current.value){e.next=4;break}this.setState({checkListItemLabelInputError:!0}),e.next=18;break;case 4:return t={label:this.checklistItemLabel.current.value},console.log("new checklist item ",t),a=this.state.checklists,(n=a[this.state.activeChecklist]).items.push(t),n.checked.push(!1),a[this.state.activeChecklist]=n,this.setState({checklists:a}),this.setState({checkListItemLabelInputError:!1}),this.checklistItemLabel.current.value=null,(r=this.props.project).checklists=a,e.next=18,z.c.updateProject({self:this,project:r});case 18:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"updateChecklistTitle",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t,a,n,r,s;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.checklistTitle.current.value,a=this.state.activeChecklist,n=this.state.checklists,(r=n[a]).title=t,n[a]=r,this.setState({checklists:n}),(s=this.props.project).checklists=n,e.next=11,z.c.updateProject({self:this,project:s});case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"addChecklist",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t,a,n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.checklists,a={title:"Untitled",items:[],checked:[]},t.push(a),this.setState({checklists:t,activeChecklist:this.state.checklists.length-1}),(n=this.props.project).checklists=t,e.next=8,z.c.updateProject({self:this,project:n});case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"confirmDelete",value:function(e){e.item;var t=e.index,a=this.state.deleteConfirmation;a[t]=!0,this.setState({deleteConfirmation:a})}},{key:"remove",value:function(){var e=Object(p.a)(f.a.mark(function e(t){var a,n,r,s,c=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.item,n=t.index,r=this.state.isDeleting,(s=this.state.isDeletingStart)[n]=!0,this.setState({isDeletingStart:s}),setTimeout(Object(p.a)(f.a.mark(function e(){var t,o,i,l;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r[n]=!0,s[n]=!1,c.setState({isDeleting:r,isDeletingStart:s}),t=a.id,o=c.props.project,i=o.crew,l=i.findIndex(function(e){return e.id===t}),i.splice(l,1),o.crew=i,e.next=11,z.c.updateProject({self:c,project:o}).then(function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.c.fetchCrew({self:c,project:o});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 11:case"end":return e.stop()}},e)})),1e3);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"inviteByEmail",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t,a,n,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({inviteBusy:!0}),t=this.props.projectOwner,a=this.inviteByEmailAddress.current.value,n=this.state.crew_[0].position,r=window.location.href+"?newInvite=true&referrer=email",e.next=7,z.c.inviteByEmail({self:this,link:r,position:n,project:this.props.project,projectOwner:t,email:a});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"closeInnerDrawer",value:function(){this.setState({innerDrawerOpen:!1})}},{key:"toggleInnerDrawer",value:function(e){this.setState({innerDrawerOpen:!0,activeCrewMember:e})}},{key:"toggleDrawer",value:function(e){e.item;var t=e.type;this.setState({drawerType:t,drawerOpen:!this.state.drawerOpen})}},{key:"search",value:function(){var e=Object(p.a)(f.a.mark(function e(t){var a,n,r,s,c;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("search",t),a=t.index,n=t.position,r=t.type,this.toggleDrawer({item:a,type:r}),this.setState({searchLoading:!0,drawerType:r}),s=[n],e.next=7,z.a.fetchUsers({self:this,positions:s});case 7:c=e.sent,console.log("searched crew",c,this.state.crew);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"userAvatar",value:function(e){return e.profile&&"undefined"!==e.profile.picture?e.profile.picture:on.placeholderImage}},{key:"closeDialog",value:function(){this.setState({isOpen:!1})}},{key:"searchProjects",value:function(e){e.location;var t,a=e.projectType;e.startDate,e.endDate;this.setState({ready:!1}),console.log("search config ",e),console.log(this.state.projects),t="undefined"!==typeof e.location.County?e.location.County.toLowerCase():e.location.address.county.toLowerCase();var n=this.state.projects;console.log("location",t);var r=n.filter(function(e){return e.location.toLowerCase()===t&&e.type===a}),s=r.filter(function(t){return A()(t.start_date).isBetween(e.startDate,e.endDate)});console.log("filtered",r),console.log("filteredDateRange",s),this.setState({projects:s,ready:!0,isOpen:!1})}},{key:"openSearchDialog",value:function(){this.setState({isOpen:!0})}},{key:"updateProjectLocation",value:function(e){console.log("updateProjectLocation",e),this.setState({location:e})}},{key:"setView",value:function(e){var t=this,a=e.view,n=e.button;this.setState({ready:!1}),this.setState({view:a,activeButton:n}),setTimeout(function(){t.setState({ready:!0})},1e3),z.a.store({label:"projectSettingsView",value:a}),z.a.store({label:"projectSettingsActiveButton",value:n}),"discussion"===a&&setTimeout(function(){return document.querySelector("body").scroll({top:130,left:0,behavior:"smooth"})},1e3)}},{key:"setChecklist",value:function(e){this.setState({activeChecklist:e})}},{key:"openFilePanel",value:function(e){this.setState({activeFile:e}),this.toggleDrawer()}},{key:"componentDidCatch",value:function(e,t){}},{key:"render",value:function(){var e=this;return this.state.hasError?r.a.createElement("h1",null,"Something went wrong."):r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{id:"People",className:"flex flex-column w-100 pb4 pt0"},r.a.createElement("div",{className:"flex flex-row mb4 "},r.a.createElement(_,{title:"Checklist",docs:this.state.checklists,ready:this.state.ready})),r.a.createElement("section",{id:"CheckListBar",className:"flex flex-column mb3 "},r.a.createElement("div",{className:"flex flex-row justify-between mb3"},r.a.createElement("div",{className:"flex flex-row round"},r.a.createElement("button",{title:"Add checklist",onClick:this.addChecklist,className:" bg-black-20 flex flex-column pa0 mr3- pointer justify-center flex-auto"},r.a.createElement("div",{id:"",className:"flex flex-row ph0 pv0 items-center justify-center"},r.a.createElement("span",{className:"f5 fw6 white ph4 pv2"},"Add Checklist",r.a.createElement(P.a,{icon:"plus"}))))))),this.state.checklistsReady&&r.a.createElement("section",{id:"CheckListBar",className:"flex flex-column mb3 "},r.a.createElement("div",{className:"flex flex-row justify-between mb3"},r.a.createElement("div",{className:"flex flex-row round"},this.state.checklists.map(function(t,a){return r.a.createElement("button",{title:t.title,onClick:function(){e.setState({activeChecklist:a})},id:t.title,className:(a>0&&" bl b--black-05 ")+(e.state.activeChecklist===a?" bg-white-60 ":" bg-white ")+" flex flex-column pa0 mr3- pointer justify-center flex-auto"},r.a.createElement("div",{id:"",className:"flex flex-row ph0 pv0 items-center justify-center ph4 "},r.a.createElement("span",{className:"f5 fw6 black-70 pv2"},t.title),r.a.createElement("span",{className:"f6 fw5 black-40 pv2 ml2"},t.checked.filter(function(e){return!0===e}).length," / ",t.items.length)))})))),r.a.createElement("div",{className:"w-100-ns w-100 flex flex-row flex-wrap justify-between br3- -overflow-hidden"},this.state.x?r.a.createElement(P.a,{icon:"loading",iconSize:"15",className:"absolute right-0 f4 black-60 mr3"}):r.a.createElement(P.a,{icon:"swap-right",iconSize:"15",className:"f4 black-60 -white  absolute right-0 mr3"}),this.context.isAuthenticated&&"production"===this.state.view&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"ProductionCrewList",className:"flex flex-column mb3 w-100"},r.a.createElement("div",{className:"flex flex-row f5 fw5 black-50 pb4 items-center"},"Assigned Production Crew"," ",r.a.createElement("div",{style:{color:"white",fontWeight:"bold",marginLeft:"1rem",background:"#c4c4c7"},className:"  count-badge- f7 pv1 ph2 br1 -bg-white "},r.a.createElement("span",{className:"bg-white-"},this.state.ready&&this.state.productionCrew.length||0))),r.a.createElement(Ze,{crew:this.state.productionCrew,invited:this.props.invited,userAvatar:this.userAvatar,confirmDelete:this.confirmDelete,remove:this.remove,state:this.state,ready:this.state.ready,toggleDrawer:this.toggleDrawer,type:"production"}))),this.state.checklists.length>0&&r.a.createElement("div",{id:"Checklist_form",className:"flex flex-column mb3 w-100 mw6 left"},r.a.createElement("div",{className:"flex flex-column w-100 pt4"},r.a.createElement("div",{className:"flex flex-column f4 fw7 black pb2"},r.a.createElement("input",{ref:this.checklistTitle,className:"checklist-title f4 fw6 black pv2 bn bg-transparent mb3",type:"text",onChange:this.updateChecklistTitle,value:this.state.checklists[this.state.activeChecklist]&&this.state.checklists[this.state.activeChecklist].title})),r.a.createElement("div",{className:"flex flex-column f5 fw5 black-50 pv3"},"Add checklist item")),r.a.createElement("div",{className:"checklist-items flex flex-column flex-auto mw6 left mt3"},this.state.checklists[this.state.activeChecklist]&&this.state.checklists[this.state.activeChecklist].items.map(function(t,a){return r.a.createElement("div",{onClick:function(){return e.checkItem(a)},className:"checklist-item justify-between flex flex-row flex-auto ba mb3 br2 b--black-05"},r.a.createElement("span",{className:"flex flex-column f4 fw6 black-70 pv3 ph4"},t.label),r.a.createElement("div",{className:(e.state.checklists[e.state.activeChecklist].checked[a]?" bg-blue ":" bg-white-50 ")+" flex flex-column items-center justify-center ph4 pv3 w3"},e.state.checklists[e.state.activeChecklist].checked[a]?r.a.createElement(P.a,{icon:"tick",className:"white f4 fw6 "}):r.a.createElement(P.a,{icon:"ring",className:"black-20 f4 fw6 "})))})),r.a.createElement("div",{className:(this.state.checkListItemLabelInputError?"  ba- b--re-d -bw2 ":" ")+" flex flex-row f5 fw5 black-50 "},r.a.createElement("input",{ref:this.checklistItemLabel,className:(this.state.checkListItemLabelInputError?" red ":"  black-40 ")+" checklist-item-title f5 fw6 ph3 pv3 bn w-100 ",placeholder:this.state.checkListItemLabelInputError?"Enter a label":"",type:"text",required:!0}),r.a.createElement("button",{title:"Add checklist",onClick:this.addChecklistItem,className:" addChecklistButton ph0"},r.a.createElement("div",{className:" flex flex-column items-center justify-center ph4 pv3 w3 bg-black-20"},r.a.createElement(P.a,{icon:"plus",className:"white f4 fw6 "}))))))),r.a.createElement(Be.a,Object.assign({className:"bp3-light",onClose:this.closeDialog,title:this.state.dialogTitle},this.state),r.a.createElement(sn,{inviteBusy:this.state.inviteBusy,inviteByEmail:this.inviteByEmail,project:this.props.project,projectOwner:this.props.projectOwner,productionCrew:this.state.productionCrew})),r.a.createElement(V.a,{title:"Crew Search",closable:!0,onClose:this.toggleDrawer,visible:this.state.drawerOpen,width:"60vw"},r.a.createElement(r.a.Fragment,null,this.state.drawerOpen&&r.a.createElement("div",{className:"pointer flex flex-column justify-end items-start pa3 bg-white "},!this.state.searchLoading&&"search"===this.state.drawerType&&r.a.createElement(k,null,r.a.createElement("h3",{className:"f5 fw4 black-50 tc pv2 ph3 word-break-all flex items-center"},r.a.createElement("span",{className:"flex flex-row ph2 pv0 round bg-black-20 white mr2 f5 fw6"},!this.state.searchLoading&&this.state.crew_[0]&&this.state.crew_[0].users.length)," ","Users with role"," ",r.a.createElement("span",{className:"fw6 white ml2 ph3 pv1 round bg-black-20"},!this.state.searchLoading&&this.state.crew_[0]&&this.state.crew_[0].position))),r.a.createElement("div",{className:"pointer flex flex-column justify-end items-start pa3 bg-white w-100 flex-auto"},r.a.createElement(V.a,{title:"Crew Detail",placement:"right",closable:!0,onClose:this.closeInnerDrawer,visible:this.state.innerDrawerOpen,width:"40vw"},r.a.createElement("div",{className:"pointer flex flex-column justify-end items-start pa0 bg-white w-100 flex-auto"},this.state.innerDrawerOpen&&r.a.createElement("div",{className:"pointer flex flex-column justify-end items-start pa0 bg-white"},!this.state.searchLoading&&null!==this.state.activeCrewMember&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"ProjectOwner",className:"flex flex-column w-100 pa0"},r.a.createElement("div",{className:"pa4 flex flex-row-ns flex-column w-100"},r.a.createElement("div",{className:"flex flex-column w-100="},r.a.createElement("div",{className:"round pa1 bg-white center"},r.a.createElement("div",{style:{width:"90px",height:"90px",backgroundImage:"url("+this.userAvatar(this.state.activeCrewMember)+")"},className:"center pointer round  cover bg-center"}))),r.a.createElement("div",{className:"flex flex-column justify-center w-100 ph3"},r.a.createElement("div",{className:"f4 flex flex-column items-center w-100 raleway "},r.a.createElement("span",{className:"flex flex-row-ns flex-column w-100 black f3 fw6"},r.a.createElement("span",{className:"flex flex-row items-center justify-start-ns justify-center black-70 f5 fw6"},this.state.activeCrewMember.profile.name.first," ",this.state.activeCrewMember.profile.name.last)))))),r.a.createElement("section",{id:"ProfileButtons"},r.a.createElement("div",{className:"flex flex-row mb2-ns w-100 bt b--black-05 "},r.a.createElement("button",{title:"View or upload CV",id:"CV-button",className:"db relative w-100 pa3 ph4 pv3 br1- bg-white bg-green-"},r.a.createElement("div",{id:"",className:"db relative w-100"},r.a.createElement("span",{className:"f5 fw6 black-60 -white ph3-"},"Cirriculum Vitae"," "))),r.a.createElement("button",{title:"View or upload CV",id:"CV-button",className:"db relative w-100 pa3 ph4 pv3 br1- bg-white "},r.a.createElement("div",{id:"",className:"db relative w-100"},r.a.createElement("span",{className:"f6 fw6 black-60 -white ph3-"},"Add to Network"))),r.a.createElement("button",{title:"View or upload CV",id:"CV-button",className:"db relative w-100 pa3 ph4 pv3 br1- bg-white bl b--white-20 bw1"},r.a.createElement("div",{id:"",className:"db relative w-100"},r.a.createElement("span",{className:"f6 fw6 black-60 -white ph3-"},"Send Message"))))),r.a.createElement("div",{className:"flex flex-row -nsflex-column w-100 black-60 raleway flex-wrap items-center justify-start-ns justify-between pa4 bt b--black-05"},r.a.createElement("div",{className:"flex flex-column w--100 pb1-ns pb2 mr3"},r.a.createElement("span",{className:"flex-column flex f6 fw4 black-40 items-start"},r.a.createElement("span",{className:"flex  mb3"},"Age"),r.a.createElement("span",{className:"flex items-center justify-center f6 fw6 -ml3-ns black-50- white ph2 pv1 ba b--black-05 br1 -round bw1- bg-white-20- bg-black -ts-a tc ml2-"},A()().diff(this.state.activeCrewMember.profile.dob,"years")))),r.a.createElement("div",{className:"flex flex-column w--100 pb1-ns pb2 mr3"},r.a.createElement("span",{className:"flex-column flex f6 fw4 black-40 items-start"},r.a.createElement("span",{className:"flex  mb3"},"Gender"),r.a.createElement("span",{className:"flex items-center justify-center f6 fw6 -ml3-ns black-50- white ph2 pv1 ba b--black-05 br1 -round bw1- bg-white-20- bg-black -ts-a tc ml2-"},this.state.activeCrewMember.profile.gender&&this.state.activeCrewMember.profile.gender||""))),r.a.createElement("div",{className:"flex flex-column w--100 pb1-ns pb2 mr3"},r.a.createElement("span",{className:"flex-column flex f6 fw4 black-40 items-start"},r.a.createElement("span",{className:"flex  mb3"},"Location"),r.a.createElement("span",{className:"flex items-center justify-center f6 fw6 -ml3-ns black-50- white ph2 pv1 ba b--black-05 br1 -round bw1- bg-white-20- bg-black -ts-a tc ml2-"})))),r.a.createElement(Xe,{user:this.state.activeCrewMember,editSkills:null,editBio:null,canEdit:!1}),r.a.createElement(ia,{type:"user",user:this.state.activeCrewMember}))))),this.state.searchLoading&&r.a.createElement("div",{className:"flex flex-column pv3"},r.a.createElement("div",{className:"sp sp-3balls"})),!this.state.searchLoading&&"search"===this.state.drawerType&&r.a.createElement(k,null,this.state.crew_[0].users.map(function(t,a){return console.log("item",t),r.a.createElement(un,{inviteToProject:e.inviteToProject,toggleInnerDrawer:e.toggleInnerDrawer,userAvatar:e.userAvatar,item:t,project:e.props.project,position:e.state.crew_[0].position})})))),"search"===this.state.drawerType&&r.a.createElement("div",{className:"form-row flex flex-column ph3 pv3 bb b--black-05"},r.a.createElement("div",{className:"form-row flex flex-column"},r.a.createElement("div",{className:"flex flex-row f5 fw4 black-50 pb3"},"Invite user by email for position"," ",r.a.createElement("span",{className:"fw6 black ml2"},!this.state.searchLoading&&this.state.crew_[0]&&this.state.crew_[0].position)),r.a.createElement("div",{className:"flex flex-row "},r.a.createElement("input",{ref:this.inviteByEmailAddress,type:"text",placeholder:"Enter email address",className:"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a w-100"}),r.a.createElement("div",{class:"flex flex-column w-20 bl b--black-05"},r.a.createElement("button",{onClick:this.inviteByEmail,class:"pointer flex h-100 items-center justify-center f6 bg-white bn f5 fw6 black-50 "},"Invite",this.state.inviteBusy?r.a.createElement("div",{className:"flex flex-column items-start ml2"},r.a.createElement(Me.a,{size:15})):r.a.createElement(P.a,{icon:"arrow-right",className:"ml2"})))))))," "))}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(r.a.Component);kn.contextType=Pe;var En=a(400),Nn=a(404),On=(Ae.a.MonthPicker,Ae.a.RangePicker,function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={startDate:a.props.eventData&&a.props.eventData.start,endDate:a.props.eventData&&a.props.eventData.end,buttonLoading:!1},a.addEvent=a.addEvent.bind(Object(v.a)(a)),a.handleChange=a.handleChange.bind(Object(v.a)(a)),a.handleRangeChange=a.handleRangeChange.bind(Object(v.a)(a)),a.disabledRangeTime=a.disabledRangeTime.bind(Object(v.a)(a)),a.range=a.range.bind(Object(v.a)(a)),a.onChange=a.onChange.bind(Object(v.a)(a)),a.eventTitle=r.a.createRef(),a.eventForm=r.a.createRef(),console.log("OnboardingScreen props",e),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"onChange",value:function(e){e.e,e.type;console.log(e)}},{key:"handleRangeChange",value:function(e){console.log(e);var t=e[0].toString(),a=e[1].toString();this.setState({startDate:t,endDate:a})}},{key:"handleDateChange",value:function(e){console.log(e),this.setState({projectDate:e.toString()})}},{key:"range",value:function(e,t){for(var a=[],n=e;n<t;n++)a.push(n);return a}},{key:"disabledRangeTime",value:function(e,t){var a=this;return"start"===t?{disabledHours:function(){return a.range(0,60).splice(4,20)},disabledMinutes:function(){return a.range(30,60)},disabledSeconds:function(){return[55,56]}}:{disabledHours:function(){return a.range(0,60).splice(20,4)},disabledMinutes:function(){return a.range(0,31)},disabledSeconds:function(){return[55,56]}}}},{key:"handleChange",value:function(e){console.log(e.target.value),this.setState({projectType:e.target.value})}},{key:"addEvent",value:function(e){e.preventDefault(),this.setState({buttonLoading:!0});var t={title:this.eventTitle.current.value,start:this.state.startDate,end:this.state.endDate};this.props.addEvent(t)}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return r.a.createElement("form",{ref:this.eventForm,id:"ProjectSearchForm",className:(z.d.get("isMobile")?" vh84 ":"  ")+" flex-column flex justify-between mb0"},r.a.createElement("div",{className:"flex flex-column ma0",id:""},r.a.createElement("div",{className:"form-row flex flex-column"},r.a.createElement("div",{className:"form-row flex flex-column pa5"},r.a.createElement("div",{className:"f4 fw6 black-90 pb4"},"Add Itinerary Item"),r.a.createElement("div",{className:"form-row flex flex-row items-center"},r.a.createElement("label",{className:"f4 fw5 black-50 pb2- w-30 pr3"},"Event Title"),r.a.createElement("input",{ref:this.eventTitle,type:"text",required:!0,className:"flex flex-column ph4 pv3 bn br1- round bg-white black-50 f4 fw5 bs-a- w-100"})),r.a.createElement("div",{className:"form-row flex flex-row items-center pt4"},r.a.createElement("label",{className:"f4 fw5 black-50 pb2- w-30 pr3"},"Event Location"),r.a.createElement(wa,{setLocation:this.props.setLocation,type:"event"})),r.a.createElement("div",{className:"flex flex-row overflow-hidden w-100 ml6 pl3"},r.a.createElement("div",{className:"flex flex-column overflow-hidden w-100 pa3"},r.a.createElement("label",{className:"f4 fw5 black-50 pb2- w-30 pr3"},"Start"),r.a.createElement(Nn.a,{onChange:function(t){return e.onChange({e:t,type:"start"})},defaultOpenValue:A()(this.props.startTime,"HH:mm:ss")})),r.a.createElement("div",{className:"flex flex-column w-100 pa3"},r.a.createElement("label",{className:"f4 fw5 black-50 pb2- w-30 pr3"},"End"),r.a.createElement(Nn.a,{onChange:function(t){return e.onChange({e:t,type:"end"})},defaultOpenValue:A()("00:00:00","HH:mm:ss")})))))),r.a.createElement("div",{className:"Buttons flex flex-row justify-between center w-100"},r.a.createElement("div",{className:"flex flex-column w-100 pa4 bg-white"},r.a.createElement("button",{onClick:this.addEvent,className:"br1- round bs-b bg-black-20 ph3 pv2 pointer bn relative  "},r.a.createElement("span",{className:"f4 fw6 white pv2 flex items-center justify-center"},this.state.buttonLoading&&r.a.createElement("div",{className:"flex mr3 pv2"},r.a.createElement("div",{className:"sp sp-3balls"})),!this.state.buttonLoading&&"Create Event")))))}}]),t}(r.a.Component)),Sn=(a(766),Object(En.extendMoment)(A.a)),Cn=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).componentDidMount=Object(p.a)(f.a.mark(function e(){var t,n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=z.a.get("activeProject"),console.log("project",t),e.next=4,z.c.fetchConfirmedCrew({self:null,project:t});case 4:n=e.sent,a.setState({crew:n}),a.createTimeSlots(),a.setState({crewRoster:a.props.project.crewRoster,months:a.props.project.calendar,ready:!0}),a.calculateTotal(),setInterval(Object(p.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.state.delaySaveActive){e.next=5;break}return(t=a.state.project).crewRoster=a.state.crewRoster,e.next=5,z.c.updateProject({self:Object(v.a)(a),project:t}).then(function(e){Rt.a.loading("Saving"),a.setState({delaySaveActive:!1}),a.setState({project:z.a.get("activeProject")})});case 5:case"end":return e.stop()}},e)})),4e3);case 10:case"end":return e.stop()}},e)})),a.getDerivedStateFromProps=function(e,t){},a.getSnapshotBeforeUpdate=function(e,t){},a.componentDidUpdate=function(){},a.componentWillUnmount=function(){},a.state={hasError:!1,project:a.props.project,drawerOpen:!1,innerDrawerOpen:!1,ready:!1,buttonsReady:!0,view:null,views:[],activeButton:{},buttons:[],projectType:a.props.project.type,startDate:a.props.project.start_date,endDate:a.props.project.end_date,location:a.props.project.location,loading:!1,x:!1,lightboxActive:!1,productionCrew:[],crew:[],crew_:[],searchLoading:!1,activeCrewMember:null,inviteBusy:!1,isDeleting:[],isDeletingStart:[],del:[],deleteConfirmation:[],drawerType:"search",days:0,total:0,months:[],crewDays_:[],crewRoster:[],delaySaveActive:!1,delaySaves:[],items:[{},{},{}],timeSlots:[],isOpen:!1},a.toggleDrawer=a.toggleDrawer.bind(Object(v.a)(a)),a.toggleInnerDrawer=a.toggleInnerDrawer.bind(Object(v.a)(a)),a.closeInnerDrawer=a.closeInnerDrawer.bind(Object(v.a)(a)),a.userAvatar=a.userAvatar.bind(Object(v.a)(a)),a.setRate=a.setRate.bind(Object(v.a)(a)),a.setDays=a.setDays.bind(Object(v.a)(a)),a.updateTotal=a.updateTotal.bind(Object(v.a)(a)),a.checkDay=a.checkDay.bind(Object(v.a)(a)),a.delaySave=a.delaySave.bind(Object(v.a)(a)),a.calculateTotal=a.calculateTotal.bind(Object(v.a)(a)),a.handleDoubleClick=a.handleDoubleClick.bind(Object(v.a)(a)),a.handleClick=a.handleClick.bind(Object(v.a)(a)),a.setLocation=a.setLocation.bind(Object(v.a)(a)),a.projectTitle=r.a.createRef(),a.projectDescription=r.a.createRef(),a.inviteByEmailAddress=r.a.createRef(),window.self=Object(v.a)(a),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"setLocation",value:function(e){console.log("setLocation",e),this.setState({insertEventLocation:e})}},{key:"handleDoubleClick",value:function(e){var t=e.monthIndex,a=e.itenIndex,n=e.slotIndex,r=this.state.months;r[t].itinerary[a].slots[n]=!0,this.setState({months:r})}},{key:"handleClick",value:function(e){var t=e.monthIndex,a=e.itenIndex,n=e.slotIndex,r=this.state.timeSlots[n],s=Sn(r).format("HH:mm:ss"),c=this.state.months;c[t].itinerary[a].slots[n]=!0,c[t].itinerary[a].items.push(r),console.log("timeSlot",s),this.setState({months:c,isOpen:!0,selectedTime:s})}},{key:"createTimeSlots",value:function(){var e=Sn.range((new Date).setHours(4,0,0,0),(new Date).setHours(28,0,0,0)),t=Array.from(e.by("hour",{excludeEnd:!0}));this.setState({timeSlots:t})}},{key:"delaySave",value:function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({delaySaveActive:!0});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"checkDay",value:function(e){var t=e.person,a=e.day;e.index_;console.log("checkDay",e);var n=this.state.crewRoster,r=n.findIndex(function(e){return e.user===t}),s=n[r],c=s.days.findIndex(function(e){return e.day===a});s.days[c].selected=!s.days[c].selected,this.setState({crewRoster:n}),this.setState({delaySaveActive:!0}),this.calculateTotal()}},{key:"updateTotal",value:function(){var e=this.state.crew,t=0,a=!0,n=!1,r=void 0;try{for(var s,c=e[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var o=s.value;t+=o.rate*o.days}}catch(i){n=!0,r=i}finally{try{a||null==c.return||c.return()}finally{if(n)throw r}}this.setState({total:t})}},{key:"setRate",value:function(){var e=Object(p.a)(f.a.mark(function e(t){var a,n,r,s,c,o=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.index,n=t.rate,r=t.user,console.log("set rate",n),(s=this.state.crew)[a].rate=n,this.setState({crew:s}),console.log("updated crew",s),this.state.crewRoster.filter(function(e){return e.user===r})[0].rate=n,(c=this.state.project).crewRoster=this.state.crewRoster,e.next=11,z.c.updateProject({self:this,project:c}).then(function(e){o.calculateTotal()});case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"setDays",value:function(e){e.index,e.days}},{key:"userAvatar",value:function(e){return e.profile&&"undefined"!==e.profile.picture?e.profile.picture:on.placeholderImage}},{key:"closeInnerDrawer",value:function(){this.setState({innerDrawerOpen:!1})}},{key:"toggleInnerDrawer",value:function(e){this.setState({innerDrawerOpen:!0,activeCrewMember:e})}},{key:"toggleDrawer",value:function(e){e.item;var t=e.type;this.setState({drawerType:t,drawerOpen:!this.state.drawerOpen})}},{key:"calculateTotal",value:function(){var e=0,t=!0,a=!1,n=void 0;try{for(var r,s=this.state.crewRoster[Symbol.iterator]();!(t=(r=s.next()).done);t=!0){var c=r.value;e+=c.days.filter(function(e){return e.selected}).length*c.rate}}catch(o){a=!0,n=o}finally{try{t||null==s.return||s.return()}finally{if(a)throw n}}this.setState({total:e})}},{key:"componentWillUnmount",value:function(){clearInterval(void 0)}},{key:"componentDidCatch",value:function(e,t){}},{key:"render",value:function(){var e=this;this.state.total;return this.state.hasError?r.a.createElement("h1",null,"Something went wrong."):r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{id:"People",className:"flex flex-column w-100 pb4 pt0"},r.a.createElement("div",{className:"flex flex-row pv3 "},r.a.createElement(_,{title:this.props.title}),r.a.createElement("div",{id:"SearchInvite",className:"w-100 flex flex-row items-end justify-start justify-end-ns"},r.a.createElement("button",{onClick:this.openSearchDialog,className:(z.a.get("isMobile")?" w-100 mt3 ":"  ")+" br1- round bs-b bg-black-20 ph4 pv2 pointer bn relative w-100-    "},r.a.createElement("span",{className:"f5 fw6 white pv0 flex items-center justify-center pr2"},this.state.buttonLoading?r.a.createElement(P.a,{icon:"loading",className:" absolute right-0 f4 black-60 mr2"}):r.a.createElement(P.a,{icon:"plus",iconSize:12,className:" f4 black-60- white  absolute right-0 mr3"})," ","Add Sheet")))),!this.state.ready&&r.a.createElement("div",{className:"flex flex-column pv4 items-center justify-center w-100"},r.a.createElement("div",{className:"sp sp-3balls"})),r.a.createElement("div",{className:"w-100-ns w-100 flex flex-row flex-wrap justify-between br3- -overflow-hidden"},this.state.x?r.a.createElement(P.a,{icon:"loading",iconSize:"15",className:"absolute right-0 f4 black-60 mr3"}):r.a.createElement(P.a,{icon:"swap-right",iconSize:"15",className:"f4 black-60 -white  absolute right-0 mr3"}))),this.state.ready&&r.a.createElement("section",{id:"People",className:"flex flex-column w-100 pb4 pt0"},r.a.createElement("div",{className:"flex flex-column pv3 "},this.state.months.map(function(t,a){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flex flex-row pv3 bb b--black-05 f4 fw7 black pr3 br bg-white ph4 mt4 br2"},t&&t.name),r.a.createElement("div",{className:"flex flex-column overflow-auto"},r.a.createElement("div",{style:{width:"2000px"},className:"flex flex-row bb b--black-05"},r.a.createElement("div",{className:"flex ",style:{width:"80px"}}),e.state.timeSlots.map(function(e,t){return r.a.createElement("div",{style:{width:"80px"},className:"width3- flex flex-column pv3 f5 fw7 black ph3 bl b--black-05 flex-aut-o"},Sn(e).format("hh:mm"))})),r.a.createElement("div",{className:"flex flex-row overflow-auto"},r.a.createElement("div",{style:{},className:"flex flex-column br bl b--black-05"},r.a.createElement("div",{style:{},className:"flex flex-column bb b--black-05 f5 fw6 black pr3- br- bb bg-white-50"},t&&t.itinerary.map(function(t,n){return r.a.createElement("div",{className:"flex flex-row"},r.a.createElement("div",{style:{width:"80px"},className:"width3- flex flex-column pv3 f5 fw7 black ph3 bl b--black-05 flex-aut-o tc bb"},Sn(t.day).format("Do")),r.a.createElement("div",{className:"flex flex-row bb b--black-05"},t.slots&&t.slots.map(function(s,c){return r.a.createElement("div",{onClick:function(){return e.handleClick({monthIndex:a,itenIndex:n,slotIndex:c})},style:{width:"80px"},className:(e.state.months[a].itinerary[n].slots[c]?" bg-light-blue ":" -bg-light-blue ")+" hover-bg-blue pointer width3- flex flex-column pv3 f5 fw7 black ph3 bl b--black-05 flex-aut-o "},e.state.months[a].itinerary[n].slots[c]&&Sn(t.items[c]).format("HH"))})))}))))))}))),r.a.createElement(Be.a,Object.assign({className:"bp3-light",onClose:function(){e.setState({isOpen:!1})},title:this.state.dialogTitle},this.state),r.a.createElement(On,{addEvent:this.addEvent,setLocation:this.setLocation,eventData:this.state.newEvent,startTime:this.state.selectedTime})),r.a.createElement(V.a,{title:"Crew Search",closable:!0,onClose:this.toggleDrawer,visible:this.state.drawerOpen,width:"60vw"},r.a.createElement(r.a.Fragment,null,this.state.drawerOpen&&r.a.createElement("div",{className:"pointer flex flex-column justify-end items-start pa3 bg-white "},!this.state.searchLoading&&"search"===this.state.drawerType&&r.a.createElement(k,null,r.a.createElement("h3",{className:"f5 fw4 black-50 tc pv2 ph3 word-break-all flex items-center"},r.a.createElement("span",{className:"flex flex-row ph2 pv0 round bg-black-20 white mr2 f5 fw6"},!this.state.searchLoading&&this.state.crew_[0]&&this.state.crew_[0].users.length)," ","Users with role"," ",r.a.createElement("span",{className:"fw6 white ml2 ph3 pv1 round bg-black-20"},!this.state.searchLoading&&this.state.crew_[0]&&this.state.crew_[0].position))),r.a.createElement("div",{className:"pointer flex flex-column justify-end items-start pa3 bg-white w-100 flex-auto"},r.a.createElement(V.a,{title:"Crew Detail",placement:"right",closable:!0,onClose:this.closeInnerDrawer,visible:this.state.innerDrawerOpen,width:"40vw"},r.a.createElement("div",{className:"pointer flex flex-column justify-end items-start pa0 bg-white w-100 flex-auto"},this.state.innerDrawerOpen&&r.a.createElement("div",{className:"pointer flex flex-column justify-end items-start pa0 bg-white"}))),this.state.searchLoading&&r.a.createElement("div",{className:"flex flex-column pv3 items-center justify-center w-100"},r.a.createElement("div",{className:"sp sp-3balls"})))))," "))}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(r.a.Component);Cn.contextType=Pe;var Dn=a(56);window.GeoPattern=Dn;var Pn=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).fetchProjectData=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})),a.load=Object(p.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(v.a)(a),e.next=3,z.a.fetchProject({self:Object(v.a)(a),projectId:a.state.projectId}).then(function(){var e=Object(p.a)(f.a.mark(function e(n){var r,s,c,o;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.setState({project:n}),a.checkUserPermissions(),z.a.set("activeProject",n),!n){e.next=23;break}return console.log("project ]]]",n),e.next=7,z.a.fetchProjectOwner({self:t,project:n});case 7:return r=e.sent,console.log("projectOwner",r),e.next=11,z.a.fetchCrew({self:t,project:n});case 11:return e.sent,e.next=14,z.a.fetchApplications({self:t,project:n});case 14:return e.sent,e.next=17,z.a.fetchInvitedUsers({self:t,project:n});case 17:e.sent,s=n.owner,(c=z.a.get("account"))&&c.hasOwnProperty("user")&&(o=c.user.id,s===o&&a.setState({userIsOwner:!0})),a.setButtons(),a.setState({ready:!0});case 23:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 3:e.sent;case 4:case"end":return e.stop()}},e)})),a.state={isOpen:!1,dialogType:"",dialogTitle:"",ready:!1,projectId:a.props.match.params.id,project:{},drawerVisible:!1,crew:[],drawerItem:{},userIsOwner:!1,applications:[],projectOwner:{},buttons:[],activeButton:{},filters:[],filter:{},view:"overview",invited:[],acceptingInvitation:!1,invitationAccepted:!1,isProjectOwner:!1,currentUserPermissions:[]},a.load=a.load.bind(Object(v.a)(a)),a.fetchProjectData=a.fetchProjectData.bind(Object(v.a)(a)),a.fetchCrew=a.fetchCrew.bind(Object(v.a)(a)),a.applyForPosition=a.applyForPosition.bind(Object(v.a)(a)),a.addToNetwork=a.addToNetwork.bind(Object(v.a)(a)),a.avatar=a.avatar.bind(Object(v.a)(a)),a.userAvatar=a.userAvatar.bind(Object(v.a)(a)),a.toggleDrawer=a.toggleDrawer.bind(Object(v.a)(a)),a.toggleDialog=a.toggleDialog.bind(Object(v.a)(a)),a.crewPositionProfile=a.crewPositionProfile.bind(Object(v.a)(a)),a.checkIsOwner=a.checkIsOwner.bind(Object(v.a)(a)),a.sendMessage=a.sendMessage.bind(Object(v.a)(a)),a.fetchInvitedUsers=a.fetchInvitedUsers.bind(Object(v.a)(a)),a.userLocation=a.userLocation.bind(Object(v.a)(a)),a.setButtons=a.setButtons.bind(Object(v.a)(a)),a.filterProjects=a.filterProjects.bind(Object(v.a)(a)),a.filter=a.filter.bind(Object(v.a)(a)),a.setView=a.setView.bind(Object(v.a)(a)),a.openFileUploadDialog=a.openFileUploadDialog.bind(Object(v.a)(a)),a.acceptInvitation=a.acceptInvitation.bind(Object(v.a)(a)),a.reloadProject=a.reloadProject.bind(Object(v.a)(a)),a.updateProjectState=a.updateProjectState.bind(Object(v.a)(a)),a.setFullScreen=a.setFullScreen.bind(Object(v.a)(a)),a.checkUserPermissions=a.checkUserPermissions.bind(Object(v.a)(a)),console.log("ui.mobile()",z.e.mobile()),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"setFullScreen",value:function(){var e=document.getElementById("projectScreen");document.webkitFullscreenElement?document.webkitCancelFullScreen():e.webkitRequestFullScreen()}},{key:"updateProjectState",value:function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("updateProjectstate",t),e.next=3,z.a.fetchCrew({self:this,project:t});case 3:return e.sent,e.next=6,z.a.fetchApplications({self:this,project:t});case 6:return e.sent,e.next=9,z.a.fetchInvitedUsers({self:this,project:t});case 9:e.sent,this.setState({project:t});case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"reloadProject",value:function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({ready:!1}),this.load();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"acceptInvitation",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t,a,n,r=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({acceptingInvitation:!0}),t=this.state.project,a=z.a.get("account").user.id,n=t.invited.filter(function(e){return e.id===a})[0],setTimeout(Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.crew.push(n),e.next=3,z.c.updateProject({self:r,project:t}).then(function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.setState({project:t}),setTimeout(Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r.setState({acceptingInvitation:!1,invitationAccepted:!0}),r.reloadProject();case 2:case"end":return e.stop()}},e)})),2e3),e.next=4,z.c.createProjectRoster({self:r,project:t}).then(function(e){console.log("Updated project roster ",e)});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}},e)})),1e3);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"toggleDialog",value:function(e,t){this.setState({isOpen:!this.state.isOpen})}},{key:"openFileUploadDialog",value:function(){this.setState({dialogType:"projectAvatarUpload",dialogTitle:"Update Project Image",isOpen:!0})}},{key:"filterProjects",value:function(e){var t=null!==typeof localStorage.getItem("ownProjects")&&JSON.parse(localStorage.getItem("ownProjects"))||[],a=null!==typeof localStorage.getItem("subscribedProjects")&&JSON.parse(localStorage.getItem("subscribedProjects"))||[],n=null!==typeof localStorage.getItem("rojects")&&JSON.parse(localStorage.getItem("projects"))||[],r=A()(new Date);if(this.setState({ready:!1}),"current"===e){var s=n.filter(function(e){return A()(e.start_date).isBefore(r)&&A()(e.deadline).isAfter(r)}),c=t.filter(function(e){return A()(e.start_date).isBefore(r)&&A()(e.deadline).isAfter(r)}),o=a.filter(function(e){return A()(e.start_date).isBefore(r)&&A()(e.deadline).isAfter(r)});this.setState({projects:s,ownProjects:c,subscribedProjects:o,ready:!0})}if("pending"===e){var i=n.filter(function(e){return A()(e.start_date).isAfter(r)}),l=t.filter(function(e){return A()(e.start_date).isAfter(r)}),u=a.filter(function(e){return A()(e.start_date).isAfter(r)});this.setState({projects:i,ownProjects:l,subscribedProjects:u,ready:!0})}if("completed"===e){var f=n.filter(function(e){return A()(e.deadline).isBefore(r)}),p=t.filter(function(e){return A()(e.deadline).isBefore(r)}),m=a.filter(function(e){return A()(e.deadline).isBefore(r)});this.setState({projects:f,ownProjects:p,subscribedProjects:m,ready:!0})}"all"===e&&this.setState({projects:n,ownProjects:t,subscribedProjects:a,ready:!0})}},{key:"setView",value:function(e){var t=e.view,a=e.button;this.setState({view:t,activeButton:a}),z.a.store({label:"projectView",value:t}),z.a.store({label:"activeButton",value:a}),"discussion"===t&&setTimeout(function(){return document.querySelector("body").scroll({top:130,left:0,behavior:"smooth"})},1e3)}},{key:"filter",value:function(e){var t=e.filter,a=e.button;this.setState({filter:t,activeButton:a})}},{key:"setButtons",value:function(){var e=this,t=[{title:"Overview",role:"general",function:function(){return e.setView({filter:"Overview",button:0})}},{title:"Itinerary",role:"general",function:function(){return e.setView({filter:"Itinerary",button:1})}},{title:"Discussion",role:"general",function:function(){return e.setView({filter:"Discussion",button:2})}},{title:"Files",role:"general",permission:"projectfiles",function:function(){return e.setView({filter:"Files",button:3})}},{title:"Settings",role:"admin",permission:"projectsettings",function:function(){return e.setView({filter:"Settings",button:4})}},{title:"People",role:"admin",permission:"projectpeople",function:function(){return e.setView({filter:"People",button:5})}},{title:"Checklist",role:"admin",permission:"projectchecklist",function:function(){return e.setView({filter:"Checklist",button:6})}},{title:"Rate Calculator",role:"admin",permission:"projectratecalculators",function:function(){return e.setView({filter:"Rate Calculator",button:7})}}],a=[{title:"Overview",role:"general"},{title:"Itinerary",role:"general"},{title:"Discussion",role:"general"},{title:"Files",role:"general"},{title:"Settings",role:"admin"},{title:"People",role:"admin"},{title:"Checklist",role:"admin"},{title:"Rate Calculator",role:"admin"}];this.setState({buttons:t,activeButton:t[0],views:a,view:a[0]})}},{key:"userLocation",value:function(e){return e&&e.profile&&e.profile.location&&"undefined"!==typeof e.profile.location.County?e.profile.location.County:e&&e.profile&&e.profile.location&&"undefined"!==typeof e.profile.location.address.county?e.profile.location.address.county:""}},{key:"fetchInvitedUsers",value:function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"fetchShortlist",value:function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"sendMessage",value:function(){var e=Object(p.a)(f.a.mark(function e(t){var a,n,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.context.account.user.id,n=t.id,e.next=4,z.a.checkConversationExists({self:this,selfUserId:a,recipientId:t.id});case 4:if((r=e.sent).exists){e.next=11;break}return e.next=8,z.a.createNewConversation({self:this,selfUserId:a,recipientId:n});case 8:this.props.history.push("/messages"),e.next=13;break;case 11:z.a.store({label:"activeConversation",value:r.conversation}),this.props.history.push("/messages");case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"crewPositionProfile",value:function(){var e=this,t=this.state.project.crew.filter(function(t){return t.position===e.state.drawerItem.title})[0].id;return this.state.crew.filter(function(e){return e.id===t})[0]}},{key:"checkIsOwner",value:function(){}},{key:"addToNetwork",value:function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.context.isAuthenticated,!e.t0){e.next=4;break}return e.next=4,z.a.addToNetwork({self:this,item:t});case 4:!this.context.isAuthenticated&&Rt.a.warning("Please login to use network functions.");case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"applyForPosition",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t,a,n=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=z.a.get("account"),this.setState({buttonLoading:!0}),a={position:this.state.drawerItem,project:this.state.project.id,applicant:t.user.id},e.next=5,z.a.applyForPosition({self:this,application:a}).then(function(e){setTimeout(function(){n.reloadProject()},1e3)});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"toggleDrawer",value:function(e){var t=e.type,a=e.item;this.setState({drawerItem:a,drawerType:t,drawerVisible:!this.state.drawerVisible})}},{key:"fetchCrew",value:function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"avatar",value:function(e){window.log.info("constants",on);var t="undefined"!==typeof e.media&&"undefined"!==typeof e.media.images?e.media.images[0].url:on.placeholderImage;return t}},{key:"userAvatar",value:function(e){var t=this.state.projectOwner;return window.log.info(t),t.profile&&"undefined"!==t.profile.picture?t.profile.picture:on.placeholderImage}},{key:"checkUserPermissions",value:function(){var e=this.state.project.productionCrew,t=z.a.get("account").user.id,a=e.filter(function(e){return e.user===t});console.log(" "),console.log("isProdCrew",a.length>0),console.log("permissions",a[0]&&a[0].permissions),console.log(" "),a.length&&this.setState({currentUserPermissions:a[0]&&a[0].permissions})}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"componentDidMount",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t,a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.load(),null!==localStorage.getItem("projectView")&&(t=z.a.get("projectView"),this.setState({view:t}),"discussion"===t&&setTimeout(function(){return document.querySelector("body").scroll({top:130,left:0,behavior:"smooth"})},1e3)),null!==localStorage.getItem("activeButton")&&(a=z.a.get("activeButton"),this.setState({activeButton:a})),document.querySelector("body").scroll({top:0,left:0,behavior:"smooth"}),setTimeout(function(){document.getElementById("MessagesList")&&document.getElementById("MessagesList").scroll({top:document.getElementById("MessagesList").scrollHeight,left:0,behavior:"smooth"})},500);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;z.a.get("account").user.id;return r.a.createElement(Pe.Consumer,null,function(t){return r.a.createElement(k,null,!e.state.ready&&r.a.createElement(Le,null),z.a.get("isAuthenticated")&&r.a.createElement(r.a.Fragment,null,e.state.ready&&!z.e.mobile()&&r.a.createElement("section",{style:{background:"rgb(103, 103, 103)",top:"12vh",width:"100%",left:"0",zIndex:"4"},id:"ToolbarButtons",className:"flex flex-column fixed "},r.a.createElement("div",{className:"flex flex-row justify-between "},r.a.createElement("div",{className:"flex flex-row flex-auto overflow-hidden"},e.state.buttons.map(function(t,a){return r.a.createElement("button",{title:t.title,onClick:function(){return e.setView({view:e.state.views[a],button:t})},id:t.title,className:" bl b--black-05 "+(e.state.activeButton.title===t.title?" bg-black-20 ":" bg-black-30 ")+" trans-a flex flex-column pa0 mr3- pointer justify-center items-center flex-auto",style:{minWidth:"calc(100% /"+e.state.buttons.length+")"}},r.a.createElement("div",{id:"",className:"flex flex-row ph0 pv0 items-center justify-center"},r.a.createElement("span",{className:"flex f5 fw6 black-40- white ph3 pv4 w-100 tc"},t.title)))}))))),e.state.ready&&r.a.createElement("section",{id:"SingleProject",className:"w-100 top-10vh relative"},r.a.createElement("div",{className:" flex flex-column ph5 "},r.a.createElement("section",{ref:e.mainColumn,id:"MainColumn",className:"flex flex-column w-100 pb4"},r.a.createElement(r.a.Fragment,null,"Itinerary"===e.state.view.title&&r.a.createElement(Cn,{invited:e.state.invited,project:e.state.project,loadingAlign:"center",title:"Itinerary",size:"full",type:"itinerary"}),"Files"===e.state.view.title&&e.state.currentUserPermissions.includes("projectfiles")&&r.a.createElement(La,{invited:e.state.invited,project:e.state.project}),"Discussion"===e.state.view.title&&r.a.createElement(Qa,{invited:e.state.invited,project:e.state.project,loadingAlign:"left",title:"Discussion",size:"full",type:"project-discussion"}),"Settings"===e.state.view.title&&r.a.createElement(r.a.Fragment,null,e.state.currentUserPermissions.includes("projectsettings")&&r.a.createElement(tn,{invited:e.state.invited,project:e.state.project}),!e.state.currentUserPermissions.includes("projectsettings")&&r.a.createElement(An,null)),"People"===e.state.view.title&&r.a.createElement(r.a.Fragment,null,e.state.currentUserPermissions.includes("projectpeople")&&r.a.createElement(wn,{invited:e.state.invited,project:e.state.project,projectOwner:e.state.projectOwner,reloadProject:e.reloadProject,updateProjectState:e.updateProjectState}),!e.state.currentUserPermissions.includes("projectpeople")&&r.a.createElement(An,null)),"Checklist"===e.state.view.title&&r.a.createElement(r.a.Fragment,null,e.state.currentUserPermissions.includes("projectchecklists")&&r.a.createElement(kn,{invited:e.state.invited,project:e.state.project,projectOwner:e.state.projectOwner}),!e.state.currentUserPermissions.includes("projectchecklists")&&r.a.createElement(An,null)),"Rate Calculator"===e.state.view.title&&r.a.createElement(r.a.Fragment,null,e.state.currentUserPermissions.includes("projectratecalculator")&&r.a.createElement(jn,{invited:e.state.invited,project:e.state.project,projectOwner:e.state.projectOwner}),!e.state.currentUserPermissions.includes("projectratecalculator")&&r.a.createElement(An,null))),"Overview"===e.state.view.title&&r.a.createElement("div",{className:"flex flex-column w-100"},r.a.createElement("div",{id:"Overview",className:"flex flex-row-ns flex-column w-100"},r.a.createElement("div",{className:"flex flex-column w-100-ns w-100"},r.a.createElement("div",{id:"SingleProjectHeader",className:" trans-a relative raleway Project_list_item -sans-serif flex flex-column flex--auto w-100  items-center justify-start pa0 bs-b mb4 br2 overflow-hidden relative "},r.a.createElement("div",{onClick:e.state.userIsOwner&&e.openFileUploadDialog,className:"pointer avatar-l- flex flex-column bg-cover bg-center br4-",style:{height:"48vh",width:"100%",background:e.state.project.media&&e.state.project.media.images&&e.state.project.media.images.length&&e.state.project.media.images[0].url?"url("+e.state.project.media.images[0].url+")":Dn.generate(e.state.project.title).toDataUrl()}}),r.a.createElement("div",{className:"flex flex-column  w-100 relative bg-white raleway"},r.a.createElement("div",{className:"flex flex-row w-100"},r.a.createElement("div",{className:"flex flex-column w-100 "},r.a.createElement("div",{className:"flex flex-column pa3 bb b--black-10 "},r.a.createElement("h4",{className:"f5 flex flex-column mb0"},r.a.createElement("span",{className:"f3 fw7 black pv2 ph3"},e.state.project.title),r.a.createElement("span",{className:"f4 fw4 black-40 pb2 ph3"},e.state.project.description))),r.a.createElement("div",{className:"flex flex-row "},r.a.createElement("div",{className:"flex flex-row-ns flex-column mb0 flex-auto"},r.a.createElement("span",{className:"f6 fw7 black-70 ph4 pv3 ttc br b--black-05"},r.a.createElement("span",{className:"fw4 black-40 mr1 ttc"},"Type")," ",e.state.project.type),r.a.createElement("span",{className:"f6 fw7 black-70 ph4 pv3 br b--black-05"},r.a.createElement("span",{className:"fw4 black-40 mr1"},"Location")," ","undefined"!==typeof e.state.project.location.address?e.state.project.location.address.county+", "+e.state.project.location.address.country:e.state.project.location),r.a.createElement("span",{className:"f6 fw7 black-70  ph4 pv3 br b--black-05"},r.a.createElement("span",{className:"fw4 black-40 mr1"},"Start")," ",A()(e.state.project.start_date).format("DD MMMM YYYY")),r.a.createElement("span",{className:"f6 fw7 black-70  ph4 pv3"},r.a.createElement("span",{className:"fw4 black-40 mr1"},"End")," ",A()(e.state.project.end_date).format("DD MMMM YYYY")))))))),z.a.get("isAuthenticated")&&r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{to:"/user/"+e.state.project.owner,id:"ProjectOwner",className:"flex flex-column w-100 pt3 pb5 bb b--black-05"},r.a.createElement("div",{className:"flex flex-row-ns flex-column w-100"},r.a.createElement("div",{className:"flex flex-column w-100="},r.a.createElement("div",{className:"round pa1 bg-white center"},r.a.createElement("div",{style:{width:"150px",height:"150px",backgroundImage:e.state.projectOwner.profile.picture.length?"url("+e.state.projectOwner.profile.picture+")":Dn.generate(e.state.projectOwner.profile.name.first+e.state.projectOwner.profile.name.last).toDataUrl()},className:"center pointer round  cover bg-center"}))),r.a.createElement("div",{className:"flex flex-column justify-center w-100 ph4"},r.a.createElement("div",{className:"f4 flex flex-column items-center w-100 raleway "},r.a.createElement("div",{className:"flex flex-row-ns flex-column items-center w-100 pv3"},r.a.createElement("span",{className:"f5 fw3 black-50"},"Project Owner")),r.a.createElement("span",{className:"flex flex-row-ns flex-column w-100 black f3 fw6"},r.a.createElement("span",{className:"flex flex-row items-center justify-start-ns justify-center black f3 fw6"},e.state.projectOwner&&e.state.projectOwner.profile&&e.state.projectOwner.profile.name.first," ",e.state.projectOwner&&e.state.projectOwner.profile&&e.state.projectOwner.profile.name.last),r.a.createElement("span",{className:"flex flex-row justify-center items-center f7 fw6 ml3-ns black-50- white-ns black bg-black-ns  ph3 pv1 ba-b--black-05 br1 -round bw1- bg-white tc"},e.state.projectOwner.position," "))),r.a.createElement("div",{className:"flex flex-row-ns flex-column w--100 pt3 black-60- raleway"},r.a.createElement("div",{className:"flex flex-column w--100 pb1 mr3"},r.a.createElement("span",{className:"flex flex-row-ns flex-column f6 fw4 black-40 items-center"},r.a.createElement("span",{className:"flex"},"Location"),r.a.createElement("span",{className:"f7 fw6 ml2-ns pv1 ph2 b-a white bg-black b--black-05 br1 mt0-ns mt3"},e.userLocation(e.state.projectOwner)))))))),z.a.get("isAuthenticated")&&r.a.createElement("div",{className:"flex flex-row mt5 pb5   bb b--black-05"},r.a.createElement("div",{className:"flex flex-auto flex-column pb0 "},r.a.createElement("div",{className:"flex flex-row items-center w-100 pb3"},r.a.createElement("span",{className:"f5 fw3 black"},"Positions"),r.a.createElement("span",{className:"f7 fw3 black-50 ml2"},"click a position to apply")),r.a.createElement("div",{className:"flex flex-row flex-wrap f4 fw4 black-60 mb0"},e.state.project&&e.state.project.positions&&e.state.project.positions.length>0&&e.state.project.positions.map(function(t,a){return r.a.createElement("div",{onClick:function(){return e.setState({drawerItem:t,drawerType:"crewPositionDetail",drawerTitle:t,drawerVisible:!e.state.drawerVisible})},className:"crew-position-item pointer flex flex-column pb2 pr3 items-center justify-center"},r.a.createElement("div",{className:" flex flex-row pt2 relative"},r.a.createElement("div",{className:"position-filled-label absolute right-0 top-0"},e.state.project.crew.filter(function(e){return e.position===t}).length>0&&r.a.createElement("div",{className:"ph1 pv0 br1 bg-green"},r.a.createElement("span",{className:"f7 fw6 white-60"},"Filled"))),r.a.createElement("div",{className:"  flex f6 fw5  ph3 pv2 bg-white br1 "},t)))})))))))),z.a.get("isAuthenticated")&&z.e.mobile()&&r.a.createElement("div",{style:{width:"100vw"},className:"bg-white fixed bottom-7vh left-0 w-100- flex flex-row bs-b bb b--black-05 overflow-scroll"},r.a.createElement("div",{className:"w-100- flex flex-row"},e.state.buttons.map(function(t,a){return r.a.createElement("button",{title:t.title,onClick:function(){return e.setView({view:e.state.views[a],button:t})},id:"CV-button",className:(e.state.activeButton.title===t.title?" bg-black-05 fw6":" bg-white fw5 ")+" hover-bg-white-10 flex flex-column pa0 pointer justify-center flex-auto bl b--black-05"},r.a.createElement("div",{id:"",className:"flex flex-row ph0 pv0 items-center justify-center"},r.a.createElement("span",{className:"f5 -fw6 black ph3 pv3"},t.title)))}))))),r.a.createElement(Be.a,Object.assign({className:"bp3-light",onClose:e.toggleDialog,title:e.state.dialogTitle,onValueChange:e.onValueChange},e.state),r.a.createElement("div",{className:"flex flex-column ph4 pt4 pb2"},"bio"===e.state.dialogType&&r.a.createElement(Qt,{value:t.account.user.profile.bio,submitBio:e.submitBio}),"cv"===e.state.dialogType&&r.a.createElement(Qt,null),"addToNetwork"===e.state.dialogType&&r.a.createElement(Qt,null),"addToProject"===e.state.dialogType&&r.a.createElement(Qt,null),"projectAvatarUpload"===e.state.dialogType&&r.a.createElement(ht,{self:e,project:e.state.project,type:"projectAvatarUpload"}))),e.state&&e.state.ready&&r.a.createElement(V.a,{title:"Crew List",placement:"right",closable:!0,onClose:e.toggleDrawer,width:500,visible:e.state.drawerVisible,doc:e.props.project,className:"CrewList -bg-near-white"},r.a.createElement("div",{className:"flex flex-column mb2 pa4-  "},r.a.createElement("div",{className:"flex flex-auto flex-column pb0 "},r.a.createElement("div",{className:"flex flex-row flex-wrap f4 fw4 black-60 mb0"},"crewList"===e.state.drawerType&&e.state.crew.map(function(t,a){return r.a.createElement(D.a,{content:r.a.createElement("div",{onClick:function(){return e.addToNetwork(t)},className:"pointer flex f6 fw5 black-60 ph2 pv2 hover-black"},"Add to network"),trigger:"hover"},r.a.createElement(O.a,{to:"/user/"+t.id,className:" pointer flex flex-column pv2 pr4 items-start justify-center"},r.a.createElement("div",{style:{width:"100px",height:"120px",borderRadius:"5px",backgroundImage:"url("+t.profile.picture+")"},className:"cover bg-center"}),r.a.createElement("div",{className:" flex flex-row pt2 "},r.a.createElement("div",{className:" flex f7 fw6 "},t.profile.name.first),r.a.createElement("div",{className:" flex f7 fw6 ml1"},t.profile.name.last))))}),"crewPositionDetail"===e.state.drawerType&&r.a.createElement("div",{className:"flex flex-auto flex-column pb0"},r.a.createElement("div",{className:"flex flex-column bb b--black-10 "},r.a.createElement("h4",{className:"f5 flex flex-column mb0"},r.a.createElement("span",{className:"f4 fw6 black-80 pv3 ph4"},e.state.drawerItem))),e.state.project.crew.filter(function(t){return t.position&&t.position.position&&t.position.position===e.state.drawerItem.title}).length>0&&r.a.createElement("div",{className:"flex flex-column  pb3 "},r.a.createElement("h4",{className:"f5 flex flex-column mb0 pv3 ph4"},r.a.createElement("span",{className:"f5 fw5 black-30 pb2 pt3"},"Position filled"),r.a.createElement(D.a,{content:r.a.createElement("div",{onClick:function(){return e.addToNetwork(e.crewPositionProfile())},className:"pointer flex f6 fw5 black-60 ph2 pv2 hover-black"},"Add to network"),trigger:"hover"},r.a.createElement(O.a,{to:"/user/"+e.crewPositionProfile().id,className:" pointer flex flex-column pv2 pr4 items-start justify-center"},r.a.createElement("div",{style:{width:"100px",height:"120px",borderRadius:"5px",backgroundImage:"url("+e.crewPositionProfile().profile.picture+")"},className:"cover bg-center"}),r.a.createElement("div",{className:" flex flex-row pt2 black"},r.a.createElement("div",{className:" flex f5 fw6 "},e.crewPositionProfile().profile.name.first),r.a.createElement("div",{className:" flex f5 fw6 ml1"},e.crewPositionProfile().profile.name.last)))))),t.isAuthenticated&&r.a.createElement("div",{className:"flex flex-column pa4 bt bb b--black-10"},r.a.createElement("button",{disabled:e.state.project.crew.filter(function(t){return t.position&&t.position.position&&t.position.position===e.state.drawerItem.title}).length>0,onClick:e.applyForPosition,className:"pointer flex flex-row justify-center flex-auto items-center mb0 ph4 pv3 bg-black-05 hover-bg-black-10 bn br1"},r.a.createElement("span",{className:"f5 fw6 black-40 hover-black-70"},"Apply for Position"," ",e.state.project.crew.filter(function(t){return t.position===e.state.drawerItem}).length>0&&"[ Filled ]"),r.a.createElement("div",{className:"flex flex-row justify-between items-center"},e.state.buttonLoading&&r.a.createElement(Me.a,{size:20})))),!t.isAuthenticated&&r.a.createElement("div",{className:"flex flex-column pt3 "},r.a.createElement("button",{disabled:!0,onClick:e.applyForPosition,className:"pointer flex flex-row justify-center flex-auto items-center mb0 ph4 pv3 bg-black-05 hover-bg-black-10 bn br1"},r.a.createElement("span",{className:"f5 fw6 black-40 hover-black-70"},"Login to Apply for Position"),r.a.createElement("div",{className:"flex flex-row justify-between items-center"},e.state.buttonLoading&&r.a.createElement(Me.a,{size:20})))))))))),e.state.invitationAccepted&&r.a.createElement("div",{className:"fixed top-0 left-0 w-100 h-100 bg-black-90 flex items-center justify-center"},r.a.createElement("div",{className:"flex flex-column items-center justify-center"},r.a.createElement("div",{className:"flex pv4"},r.a.createElement(P.a,{icon:"endorsed",iconSize:"100",className:"white"})),r.a.createElement("div",{className:"flex flex-row items-center justify-center white f3 fw5 pb3"},"You successfully accepted your role as"," ",r.a.createElement("span",{className:"fw6 mh1"},z.a.get("account").user.position)," ","for this project."),r.a.createElement("div",{className:"flex flex-row items-center justify-center f5 fw5 white-60 pb3"},"You will receive a project sheet via email within the next few minutes."),r.a.createElement("div",{className:"flex flex-row items-center justify-center mt4"},r.a.createElement("button",{onClick:function(){e.setState({invitationAccepted:!1})},className:"pointer flex ph4 pv2 f6 fw6 white- black bg-white hover-bg-white-50 round ttc"},"close"," ")))))})}}]),t}(r.a.Component),Tn=Pn;Pn.contextType=Pe;var An=function(){return r.a.createElement("div",{className:"tc flex flex-column pv3 ph4 f4 fw5 black-50"},"You do not have permission to view this content")},In=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).showModal=function(){a.setState({insertModalVisible:!0})},a.handleOk=function(e){console.log(e),a.setState({insertModalVisible:!1})},a.handleCancel=function(e){console.log(e),a.setState({insertModalVisible:!1})},a.state={isOpen:!1,dialogType:"",dialogTitle:"",ready:!1,insertModalVisible:!1,chefInfoVisible:!1,loading:!1,toMessages:!1,conversationReady:!1,activeTab:"1",drawerReady:!1,progressBarPercent:0,progressBarActive:!1,showLocationForm:!1,showOnboardingScreen:!1,searchCity:"",uploadType:"profileImage",connections:[],connectionsReady:!1,AddToNetworkButtonLoading:!1,AddToProjectButtonLoading:!1,recentWorkProjects:[],subscribedProjectsReady:!1,user:null},a.showDrawer=a.showDrawer.bind(Object(v.a)(a)),a.hideDrawer=a.hideDrawer.bind(Object(v.a)(a)),a.refresh=a.refresh.bind(Object(v.a)(a)),a.setLocation=a.setLocation.bind(Object(v.a)(a)),a.start=a.start.bind(Object(v.a)(a)),a.focusLocationSearch=a.focusLocationSearch.bind(Object(v.a)(a)),a.toggleDialog=a.toggleDialog.bind(Object(v.a)(a)),a.addToNetwork=a.addToNetwork.bind(Object(v.a)(a)),a.addToProject=a.addToProject.bind(Object(v.a)(a)),a.cv=a.cv.bind(Object(v.a)(a)),a.networkSeeAll=a.networkSeeAll.bind(Object(v.a)(a)),a.editBio=a.editBio.bind(Object(v.a)(a)),a.submitBio=a.submitBio.bind(Object(v.a)(a)),a.submitProfile=a.submitProfile.bind(Object(v.a)(a)),a.editSkills=a.editSkills.bind(Object(v.a)(a)),a.updateSkills=a.updateSkills.bind(Object(v.a)(a)),a.editProfile=a.editProfile.bind(Object(v.a)(a)),a.closeDialog=a.closeDialog.bind(Object(v.a)(a)),a.avatar=a.avatar.bind(Object(v.a)(a)),a.fetchConnections=a.fetchConnections.bind(Object(v.a)(a)),a.userLocation=a.userLocation.bind(Object(v.a)(a)),a.addRecentWorkProject=a.addRecentWorkProject.bind(Object(v.a)(a)),a.navigateToUser=a.navigateToUser.bind(Object(v.a)(a)),console.log("[[ ViewProfile.js props ]]",e),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"navigateToUser",value:function(e){var t=this,a=e.id;this.setState({ready:!1,userId:null,user:null,connections:[],projects:[],events:[],subscribedProjectsReady:!1}),setTimeout(function(){t.props.history.push("/null"),t.props.history.push("/user/"+a)},300)}},{key:"addRecentWorkProject",value:function(){this.toggleDialog({type:"addPortfolioProject",title:"Add a Project"})}},{key:"userLocation",value:function(){var e=this.state.user;return e.profile.location&&"undefined"!==typeof e.profile.location.County?e.profile.location.County:e.profile.location&&"undefined"!==typeof e.profile.location.address.county?e.profile.location.address.county:""}},{key:"fetchConnections",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.user.profile.connections,e.next=3,z.a.fetchConnections({self:this,connections:t});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"submitBio",value:function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,z.a.submitBio({self:this,data:t});case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"updateSkills",value:function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.updateSkills({self:this,skills:t});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"submitProfile",value:function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,z.a.submitProfile({self:this,data:t});case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"toggleDialog",value:function(e){var t=e.type,a=e.title;this.setState({isOpen:!this.state.isOpen,dialogType:t,dialogTitle:a})}},{key:"closeDialog",value:function(){this.setState({isOpen:!1})}},{key:"editBio",value:function(){this.toggleDialog({type:"bio",title:"Edit your bio"})}},{key:"editSkills",value:function(){this.toggleDialog({type:"editSkills",title:"Edit your skills"})}},{key:"editProfile",value:function(){this.toggleDialog({type:"profile",title:"Edit your profile"})}},{key:"networkSeeAll",value:function(){this.toggleDialog({type:"bio",title:"Edit your bio"})}},{key:"addToNetwork",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({AddToNetworkButtonLoading:!0}),t=this.state.user,e.next=4,z.a.addToNetwork({self:this,item:t});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"addToProject",value:function(){}},{key:"cv",value:function(){this.toggleDialog({type:"cv",title:"Upload your CV"})}},{key:"focusLocationSearch",value:function(){}},{key:"refresh",value:function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.refresh({self:this});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"showDrawer",value:function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.showDrawer({chef:t,self:this});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"hideDrawer",value:function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.hideDrawer({self:this});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"submitReservationRequest",value:function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.submitReservationRequest({data:t,self:this});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"setLocation",value:function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.setLocation({self:this});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"start",value:function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"avatar",value:function(e){console.log("avatar ",e);var t=e;return t&&t.profile&&t.profile.picture.length>0?t.profile.picture:"/img/placeholder.png"}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidUpdate",value:function(){console.log("[[ Home Updated ]]",this.props)}},{key:"componentDidMount",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t,a=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(" "),console.log(" "),console.log("[[ ViewProfile.js Mounted ]]"),console.log(" "),console.log(" "),console.log("viewprofile props",this.props),t=this.props.match.params.id,e.next=9,z.c.fetchSubscribedProjects({self:this,userId:t}).then(function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({projects:t,subscribedProjectsReady:!0});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 9:return e.sent,e.next=12,z.b.fetch("users",t).then(function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({user:t}),e.next=3,z.a.fetchConnections({self:a,connections:t.profile.connections});case 3:z.a.set("activeUser",t),console.log("user",t),a.setState({user:t,ready:!0}),document.querySelector("body").scroll({top:0,left:0,behavior:"smooth"});case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 12:e.sent;case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.ready?r.a.createElement(k,null,r.a.createElement("section",{id:"ViewProfile",className:" w-100 mw9 center pa4-ns pa0 pb6 h-100 overflow-auto"},r.a.createElement("div",{onClick:this.refresh,className:"absolute top-0 right-0 pa4 pointer black-30"},r.a.createElement(P.a,{type:"sync",className:(this.state.ready?" inactive ":" active ")+" loading-icon "})),r.a.createElement("section",{id:"Profile",className:"flex flex-column w-100 pb5 pt5"},r.a.createElement("div",{className:"flex flex-row-ns flex-column w-100 justify-center items-center"},r.a.createElement("div",{className:"flex flex-column w-100="},r.a.createElement(Lt.a,{placement:"top",title:"Update your avatar"},r.a.createElement("div",{className:"round pa1 bg-white"},r.a.createElement("div",{style:{width:"150px",height:"150px",backgroundImage:"url("+this.avatar(this.state.user)+")"},className:"pointer round  cover bg-center"})))),r.a.createElement("div",{className:"flex flex-column justify-center w-100 ph4-ns ph0"},r.a.createElement("div",{className:"f4 flex flex-row-ns flex-column items-center-ns items-center w-100 raleway"},r.a.createElement("span",{className:"f3 fw6 mv0-ns mv4"},this.state.user.profile.name&&this.state.user.profile.name.first," ",this.state.user.profile.name&&this.state.user.profile.name.last),r.a.createElement("span",{className:"flex items-start f6 fw6 ml3-ns whi-te ph3 pv2 ba b--black-05 br1 bg-white black -ts-a"},this.state.user.position," ")),r.a.createElement("div",{className:"flex flex-row -nsflex-column w--100 black-60 raleway flex-wrap items-center justify-start-ns justify-between ph4 ph0-ns pt3 pb3 bt b--black-05 mt4 mt3-ns"},r.a.createElement("div",{className:"flex flex-column w--100 pb1-ns pb2 mr3"},r.a.createElement("span",{className:"flex-column flex f6 fw4 black-40 items-start"},r.a.createElement("span",{className:"flex  mb3"},"Age"),r.a.createElement("span",{className:"flex items-center justify-center f6 fw6 -ml3-ns black-50- white ph2 pv1 ba b--black-05 br1 -round bw1- bg-white-20- bg-black -ts-a tc ml2-"},A()().diff(this.state.user.profile.dob,"years")))),r.a.createElement("div",{className:"flex flex-column w--100 pb1-ns pb2 mr3"},r.a.createElement("span",{className:"flex-column flex f6 fw4 black-40 items-start"},r.a.createElement("span",{className:"flex  mb3"},"Gender"),r.a.createElement("span",{className:"flex items-center justify-center f6 fw6 -ml3-ns black-50- white ph2 pv1 ba b--black-05 br1 -round bw1- bg-white-20- bg-black -ts-a tc ml2-"},this.state.user.profile.gender&&this.state.user.profile.gender||""))),r.a.createElement("div",{className:"flex flex-column w--100 pb1-ns pb2 mr3"},r.a.createElement("span",{className:"flex-column flex f6 fw4 black-40 items-start"},r.a.createElement("span",{className:"flex  mb3"},"Location"),r.a.createElement("span",{className:"flex items-center justify-center f6 fw6 -ml3-ns black-50- white ph2 pv1 ba b--black-05 br1 -round bw1- bg-white-20- bg-black -ts-a tc ml2-"},this.userLocation()))))))),z.e.mobile()&&r.a.createElement("section",{id:"ProfileButtons"},r.a.createElement("div",{className:"flex flex-row mb2-ns w-100 bt b--black-05 ph4 pv4 bg-black-05"},r.a.createElement("a",{href:this.state.user.profile.cv.file,target:"_blank",title:"View or upload CV",id:"CV-button",className:"db relative w-100 pa3 ph4 pv3 br1 bg-black- bg-green round"},r.a.createElement("div",{id:"",className:"db relative w-100"},r.a.createElement("span",{className:"f5 fw6 black-60- white ph3-"},"Cirriculum Vitae"," ")))),r.a.createElement("div",{className:"flex flex-row mb2-ns w-100 bt b--black-05 "},r.a.createElement("button",{title:"View or upload CV",id:"CV-button",className:"db relative w-100 pa3 ph4 pv3 br1- bg-black-30- bg-green-",style:{background:"#e8e8ec"}},r.a.createElement("div",{id:"",className:"db relative w-100"},r.a.createElement("span",{className:"f6 fw6 black-50 -white ph3-"},"Add to Network"))),r.a.createElement("button",{title:"View or upload CV",id:"CV-button",className:"db relative w-100 pa3 ph4 pv3 br1- bg-black-30- bg-gree-n bl b--white-20 bw1",style:{background:"#e8e8ec"}},r.a.createElement("div",{id:"",className:"db relative w-100"},r.a.createElement("span",{className:"f6 fw6 black-50 -white ph3-"},"Send Message"))))),!z.e.mobile()&&r.a.createElement("section",{id:"ProfileButtons"},r.a.createElement("div",{className:"flex flex-row mb0-ns w-100 bt b--black-05 ph4 ph0-ns pv3"},r.a.createElement("a",{target:"_blank",href:this.state.user.profile.cv.file,title:"View or upload CV",id:"CV-button",className:"flex flex-column pa0 mr3 pointer bs-b bg-black-20"},r.a.createElement("div",{id:"",className:"flex flex-row ph0 pv0 items-center justify-center bg-white br1"},r.a.createElement("span",{className:"f6 fw4 black-60 ph3"},"Cirriculum Vitae"),r.a.createElement("div",{className:"flex flex-column ph3 pv2 white bg-green"},r.a.createElement(P.a,{icon:"document-open",iconSize:15,className:""})))))),this.state.ready&&r.a.createElement(qa,{user:this.state.user,editSkills:null,editBio:null,canEdit:!1}),this.state.ready&&this.state.connectionsReady&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Wa,{history:this.context.history,isCurrentUser:!1,canEdit:!1,user:this.state.user,addToNetwork:this.addToNetwork,connections:this.state.connections,navigateToUser:this.navigateToUser})),r.a.createElement(ia,{type:"user",user:this.state.user}),r.a.createElement(fa,{projects:this.state.user.profile.projects,addRecentWorkProject:this.addRecentWorkProject}),this.state.subscribedProjectsReady&&r.a.createElement("div",{className:"flex flex-column flex-auto w-100"},r.a.createElement(ca,{title:"Calendar"}),r.a.createElement(_t,{user:this.state.user,headerType:"square-slim"})),r.a.createElement(Be.a,Object.assign({className:"bp3-light",onClose:this.toggleDialog,title:this.state.dialogTitle,onValueChange:this.onValueChange},this.state),r.a.createElement("div",{className:"flex flex-column pa4-"},"bio"===this.state.dialogType&&r.a.createElement(Qt,{value:this.state.user.profile.bio,submitBio:this.submitBio}),"profile"===this.state.dialogType&&r.a.createElement(aa,{value:this.state.user.profile,submitProfile:this.submitProfile}),"profileImage"===this.state.dialogType&&r.a.createElement(ht,{type:this.state.dialogType,closeDialog:this.closeDialog}),"addToNetwork"===this.state.dialogType&&r.a.createElement(Qt,null),"addToProject"===this.state.dialogType&&r.a.createElement(Qt,null),"editSkills"===this.state.dialogType&&r.a.createElement(sa,{updateSkills:this.updateSkills,skills:this.state.user.profile.additional.skills}),"addPortfolioProject"===this.state.dialogType&&r.a.createElement(ra,{closeDialog:this.closeDialog,updateAccount:this.context.updateAccount}),"cv"===this.state.dialogType&&r.a.createElement(r.a.Fragment,null,!0===this.state.user.profile.cv.uploaded&&r.a.createElement("div",{className:"flex flex-row mb3"},r.a.createElement("a",{href:this.state.user.profile.cv.file,target:"_blank",className:"flex flex-row ph3 pv3 tc br1 f5 fw6 white- black-50 bg-green items-center justify-center w-100"},r.a.createElement(P.a,{icon:"document-open",iconSize:15,className:"mr2 white- black-50"}),"View uploaded CV")),r.a.createElement(ht,{type:this.state.dialogType,closeDialog:this.closeDialog})))))):r.a.createElement(Le,null)}}]),t}(r.a.Component),Rn=In;In.contextType=Pe.Consumer;var Mn=function(e){var t=e.selectType,a=(e.type,e.typeSelected);return N.a.createElement(Pe.Consumer,null,function(e){return!e.isAuthenticated&&N.a.createElement("div",{className:"vh-100 pt5 bg-black h-100 flex flex-column flex-auto justify-start",style:{backgroundRepeat:"no-repeat",backgroundPosition:"0px 20vh",backgroundImage:'url("/img/filmset.jpg")'}},N.a.createElement("div",{className:"raleway pt6 ph3 flex flex-column flex-auto justify-center -h-100"},N.a.createElement("h1",{className:"f2 fw4 white mv0 tc"},"Crew management,"),N.a.createElement("h1",{className:"f2 fw4 white mv0 tc"},"Made easier")),!a&&N.a.createElement("div",{className:"flex flex-column items-center justify-start  h-100 raleway fw5 mw6 center w-100 pt5"},N.a.createElement("div",{className:"flex flex-column ma0 w-100",id:""},N.a.createElement("div",{className:"Buttons flex flex-row justify-between round-"},N.a.createElement("div",{className:"flex flex-column w-100 br b--black-05"},N.a.createElement("button",{onClick:function(){return t("project-finder")},className:" items-center flex flex-column bg-gray ph4 pv2 pointer bn br2 mr1  "},N.a.createElement("span",{className:"ph2 f4 fw6 white -black-70 pt2 flex items-center justify-center"},"CREW"),N.a.createElement("span",{className:"ph2 f5 fw6 white-50 -black-70 pb2 pt1 flex items-center justify-center"},"Project Finder"))),N.a.createElement("div",{className:"flex flex-column w-100"},N.a.createElement("button",{onClick:function(){return t("crew-builder")},className:" flex flex-column items-center bg-gray ph4 pv2 pointer bn br2 ml1   "},N.a.createElement("span",{className:"ph2 f4 fw6 white -black-70 pt2 flex items-center justify-center"},"PRODUCTION"),N.a.createElement("span",{className:"ph2 f5 fw6 white-50 -black-70 pb2 pt1 flex items-center justify-center"},"Crew Builder")))))))})},Ln=(a(171),xe.a.Step,r.a.Component,Ae.a.MonthPicker,Ae.a.RangePicker),Bn=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={projectType:"",startDate:"",endDate:""},a.searchProjects=a.searchProjects.bind(Object(v.a)(a)),a.handleChange=a.handleChange.bind(Object(v.a)(a)),a.handleRangeChange=a.handleRangeChange.bind(Object(v.a)(a)),console.log("OnboardingScreen props",e),a.reset=a.reset.bind(Object(v.a)(a)),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"reset",value:function(){window.localStorage.clear(),this.context.history.push("/"),window.location.reload()}},{key:"handleRangeChange",value:function(e){console.log(e);var t=e[0].toString(),a=e[1].toString();this.setState({startDate:t,endDate:a})}},{key:"handleDateChange",value:function(e){console.log(e),this.setState({projectDate:e.toString()})}},{key:"handleChange",value:function(e){console.log(e.target.value),this.setState({projectType:e.target.value})}},{key:"searchProjects",value:function(){var e={location:z.a.get("location"),projectType:this.state.projectType,startDate:this.state.startDate,endDate:this.state.endDate};this.props.searchProjects(e)}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"StepsForm"},r.a.createElement("div",{className:"flex flex-column ma0",id:""},r.a.createElement("div",{className:"form-row flex flex-column pb3 pt2"},r.a.createElement("div",{className:"form-row flex flex-column"},r.a.createElement("div",{className:"form-row flex flex-row items-center pt4 w-100"},r.a.createElement("label",{className:"f5 fw6 black-20 pb3- tl mr4 w-30"},"Project Location (city)"),r.a.createElement(je,{location:this.state.location,findLocation:this.findLocation,fetchProjects:this.fetchProjects2})),r.a.createElement("div",{className:"form-row flex flex-row items-center pt4 w-100"},r.a.createElement("label",{className:"f5 fw6 black-20 pb3- tl mr4 w-30"},"Project Type"),r.a.createElement("select",{required:!0,className:"flex flex-column ph4 pv3 bn br2 -round bg-black-05- white- black-50 f4 fw5 bs-a- w-100 bg-white",onChange:function(t){return e.handleChange(t)}},r.a.createElement("option",{value:""},"Select"),r.a.createElement("option",{value:"commercial"},"Commercial"),r.a.createElement("option",{value:"film"},"Film"),r.a.createElement("option",{value:"documentary"},"Documentary"))),r.a.createElement("div",{className:"form-row flex flex-row items-center pt4 w-100"},r.a.createElement("label",{className:"f5 fw6 black-20 pb3- tl mr4 w-30"},"Availability Date Range"),r.a.createElement(Ln,{required:!0,className:"flex flex-column ph4 pv0 bn br2 -round bg-black-05- white- black-50 f4 fw5 bs-a- w-100 bg-white",onChange:this.handleRangeChange,format:"YYYY/MM/DD"}))))),r.a.createElement("div",{className:"Buttons flex flex-row justify-between mt4 center w-100 mb4"},r.a.createElement("div",{className:"flex flex-column w-100"},r.a.createElement("button",{onClick:this.searchProjects,className:"br1- round bs-b bg-black-10 ph3 pv2 pointer bn relative  "},r.a.createElement("span",{className:"f5 fw6 white- black-30  pv3 flex items-center justify-center"},this.state.buttonLoading?r.a.createElement(F.a,{type:"loading",className:" absolute right-0 f4 black-60 mr2"}):r.a.createElement(F.a,{type:"-swap-right",className:" f3 fw6 black-30 mr2- absolute right-0"})," Search")))),r.a.createElement("div",{className:"flex flex-row w-100"},r.a.createElement("div",{onClick:this.reset,className:"f5 fw6 black-50 pv2 mt2 mv4 ba b--black-05 ph3"},"Reset")))}}]),t}(r.a.Component),Fn=Bn;Bn.contextType=Pe;xe.a.Step;var _n=[{title:"Select"},{title:"Unit Production Manager"},{title:"Line Producer"},{title:"Production Manager"},{title:"Director"},{title:"Assistant Director"},{title:"2nd Assistant Director"},{title:"Continuity Person"},{title:"Cinematographer"},{title:"Gaffer"},{title:"Camera Operator"},{title:"Assistant Cameraman"},{title:"Film Loader"},{title:"Steadycam Operator"},{title:"Production Sound Mixer"},{title:"Boom Operator"},{title:"Key Grip"},{title:"Dolly Grip"},{title:"Best Boy"},{title:"Visual Effects Director"},{title:"FX Coordinator"},{title:"Property Master"},{title:"Leadman"},{title:"Set Dresser"},{title:"Costumer"},{title:"Make-up Artist"},{title:"Body Make-up Artist"},{title:"Hairdresser"},{title:"Production Assistant"},{title:"Production Office Coordinator"},{title:"Unit Publicist"},{title:"Second Unit Director"},{title:"Production Caterer"},{title:"Craft Services"},{title:"Transportation Coordinator"},{title:"Day Player"}],Vn=(r.a.Component,xe.a.Step,function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={},console.log("OnboardingScreen props",e),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"next",value:function(){var e=this.state.current+1;this.setState({current:e})}},{key:"prev",value:function(){var e=this.state.current-1;this.setState({current:e})}},{key:"componentDidMount",value:function(){console.log("steps",this.props)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"steps-content pb4"},r.a.createElement(Fn,{searchProjects:this.props.searchProjects}))))}}]),t}(r.a.Component)),Un=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={ready:!0,newAccountType:"",accountTypeIsSet:!1,lat:"",long:"",city:"",location:{},country:"",countrySet:!1,redirectProfile:!1,crew:[],users:[],isOpen:!1,activeUser:{},dialogTitle:"",drawerVisible:!1},a.setAccountType=a.setAccountType.bind(Object(v.a)(a)),a.saveOnboardingData=a.saveOnboardingData.bind(Object(v.a)(a)),a.openDialog=a.openDialog.bind(Object(v.a)(a)),a.closeDialog=a.closeDialog.bind(Object(v.a)(a)),a.avatar=a.avatar.bind(Object(v.a)(a)),a.reset=a.reset.bind(Object(v.a)(a)),console.log("OnboardingScreen props",e),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"openDialog",value:function(e){console.log(e);var t=e.item;this.setState({isOpen:!0,activeUser:t,dialogTitle:t.profile.name.first+" "+t.profile.name.last})}},{key:"closeDialog",value:function(){this.setState({isOpen:!1})}},{key:"reset",value:function(){window.localStorage.clear(),this.context.history.push("/"),window.location.reload()}},{key:"avatar",value:function(e){return e&&e.profile&&e.profile.picture.length>0?e.profile.picture:"/img/placeholder.png"}},{key:"saveOnboardingData",value:function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"setAccountType",value:function(e){var t=e.type;console.log("setAccountType",e),this.setState({newAccountType:t,accountTypeIsSet:!0})}},{key:"componentDidMount",value:function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[[ OnboardingScreen props ]]",this.props),e.next=3,z.d.getGeoLocation({self:this});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"flex flex-column ma0 w-100 h-100",id:""},r.a.createElement("div",{className:"ProjectFinder flex flex-row justify-between "}),r.a.createElement("div",{id:"OnboardingScreen",className:"flex flex-column pa4 bg-near-white h-100 w-100"},r.a.createElement("div",{className:"flex flex-column items-center justify-start pt4 w-100 h-100"},r.a.createElement("div",{className:"flex flex-column w-100",id:""},r.a.createElement("div",{className:"form-row flex flex-column pb3 w-100"},r.a.createElement("div",{className:"flex flex-column mw7 center w-100"},r.a.createElement("div",Object(Q.a)({id:"SectionTitle",className:"flex flex-column ma0 w-100"},"id",""),r.a.createElement("div",{className:"flex flex-column justify-center items-center pb3"},r.a.createElement("h1",{className:"  f3 fw6 black-80 mt4 mb2 tc"},"Find A Project"),r.a.createElement("h1",{className:" f5 fw4 black-50 tc raleway"},"Complete the wizard below to find a project to crew for."))),!this.props.projectsReady&&!this.props.searchLoading&&r.a.createElement(Vn,{searchProjects:this.props.searchProjects})),this.props.searchLoading&&r.a.createElement("div",{className:"w-100 flex items-center justify-center pv4 pr4"},r.a.createElement("div",{className:"sp sp-3balls"})),r.a.createElement("div",{className:"flex flex-column mw9 center w-100"},this.props.projectsReady&&!this.props.searchLoading&&this.props.projects.length>0&&r.a.createElement("div",{className:"crew-list- flex flex-column mt3"},r.a.createElement("div",{className:"flex flex-column ma0 w-100",id:""},r.a.createElement("div",{className:"ListProjects flex flex-row justify-between "},r.a.createElement(B,{projects:this.props.projects}))))),r.a.createElement("div",{className:"flex flex-row w-100 items-center justify-start"},r.a.createElement("div",{onClick:this.reset,className:"f5 fw6 black-50- white bg-black-10 pv2 mt2 mv4 bn b--black-05 ph3"},"Reset")))))))}}]),t}(r.a.Component),Jn=Un;Un.contextType=Pe;var zn=function(e){function t(e){var a,n;return Object(m.a)(this,t),(n=Object(h.a)(this,Object(b.a)(t).call(this,e))).state=(a={isOpen:!1,dialogType:"login",type:"",typeSelected:!1,projects:[],filteredProjects:[],projectsReady:!1,drawerVisible:!1,favourites:[],crew:[],crew_:[],drawerType:"crew",drawerTitle:"Your Crew List"},Object(Q.a)(a,"isOpen",!1),Object(Q.a)(a,"activeUser",{}),Object(Q.a)(a,"dialogTitle",""),Object(Q.a)(a,"addToCrewButtonLoading",!1),Object(Q.a)(a,"addToFavButtonLoading",!1),Object(Q.a)(a,"saveAndCreateAccountButtonLoading",!1),Object(Q.a)(a,"searchLoading",!1),a),console.log("Welcome",e),n.selectType=n.selectType.bind(Object(v.a)(n)),n.fetchProjects=n.fetchProjects.bind(Object(v.a)(n)),n.toggleDrawer=n.toggleDrawer.bind(Object(v.a)(n)),n.openDrawer=n.openDrawer.bind(Object(v.a)(n)),n.addToCrew=n.addToCrew.bind(Object(v.a)(n)),n.addToFavourites=n.addToFavourites.bind(Object(v.a)(n)),n.openDialog=n.openDialog.bind(Object(v.a)(n)),n.closeDialog=n.closeDialog.bind(Object(v.a)(n)),n.avatar=n.avatar.bind(Object(v.a)(n)),n.searchProjects=n.searchProjects.bind(Object(v.a)(n)),n.saveAndCreateAccount=n.saveAndCreateAccount.bind(Object(v.a)(n)),console.log("OnboardingScreen props",e),n}return Object(w.a)(t,e),Object(d.a)(t,[{key:"saveAndCreateAccount",value:function(){var e=this;this.setState({saveAndCreateAccountButtonLoading:!0});var t=this.state.favourites,a=this.state.crew,n=this.state.crew_,r=JSON.parse(localStorage.getItem("crewBuilder"));r.invited=n,r.shortlist=t,localStorage.setItem("crewBuilder",JSON.stringify(r));var s={fav:t,crew:a,project:r};localStorage.setItem("onboardingProfile",JSON.stringify(s)),this.context.register(),setTimeout(function(){e.setState({saveAndCreateAccountButtonLoading:!1})},1e3)}},{key:"searchProjects",value:function(e){var t,a=this;console.log(e),this.setState({searchLoading:!0}),console.log(this.state.projects),t="undefined"!==typeof e.location.County?e.location.County.toUpperCase():e.location.address.county.toUpperCase();var n=e.projectType,r=this.state.projects;console.log("location",t);var s=r.filter(function(e){return e.location.toUpperCase()===t&&e.type===n}),c=s.filter(function(t){return A()(t.start_date).isBetween(e.startDate,e.endDate)});console.log("filtered",s),setTimeout(function(){a.setState({filteredProjects:c,projectsReady:!0,searchLoading:!1})},1e3)}},{key:"avatar",value:function(e){return e&&e.profile&&e.profile.picture.length>0?e.profile.picture:"/img/placeholder.png"}},{key:"openDialog",value:function(e){console.log(e);var t=e.item;this.setState({isOpen:!0,activeUser:t,dialogTitle:t.profile.name.first+" "+t.profile.name.last})}},{key:"closeDialog",value:function(){this.setState({isOpen:!1})}},{key:"toggleDrawer",value:function(e){var t=e.type;this.setState({drawerVisible:!this.state.drawerVisible,drawerType:t,drawerTitle:"crew"===t?"Your crew list":"Your favourites list"})}},{key:"openDrawer",value:function(e){var t=e.type;this.toggleDrawer({type:t})}},{key:"addToCrew",value:function(e){var t=this;this.setState({addToCrewButtonLoading:!0}),console.log(e);var a=new Set(this.state.crew),n=new Set(this.state.crew_);a.add(e),n.add({id:e.id,position:e.position});var r=Array.from(a),s=Array.from(n);console.log("Crew",r),console.log("Crew_",s),this.setState({crew:r,crew_:s}),setTimeout(function(){t.setState({addToCrewButtonLoading:!1,isOpen:!1})},1e3)}},{key:"addToFavourites",value:function(e){var t=this;this.setState({addToFavButtonLoading:!0}),console.log(e);var a=new Set(this.state.favourite);a.add({id:e.id,position:e.position});var n=Array.from(a);console.log("ShortList",n),this.setState({favourites:n}),setTimeout(function(){t.setState({addToFavButtonLoading:!1})},1e3)}},{key:"fetchProjects",value:function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.d.fetchProjects({self:this});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"toggleDialog",value:function(){}},{key:"selectType",value:function(e){this.setState({type:e,typeSelected:!0}),"project-finder"===e&&(this.fetchProjects(),z.d.store({label:"accountType",value:"crew"}),z.d.store({label:"accountTypeIsSet",value:!0})),"crew-builder"===e&&(z.d.store({label:"accountType",value:"production"}),z.d.store({label:"accountTypeIsSet",value:!0}))}},{key:"login",value:function(){this.openDialog()}},{key:"logout",value:function(){this.setState({isAuthenticated:!1}),z.d.store({label:"isAuthenticated",value:!1}),this.props.history.push("/")}},{key:"componentDidMount",value:function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:z.d.get("isAuthenticated")&&this.props.history.push("/dashboard");case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,!this.state.typeSelected&&r.a.createElement(Mn,{projects:this.state.projects,type:this.state.type,selectType:this.selectType,typeSelected:this.state.typeSelected}),r.a.createElement(Be.a,Object.assign({className:"bp3-light",onClose:this.closeDialog},this.state),this.state.isOpen&&r.a.createElement("div",{className:"flex flex-column"},r.a.createElement("div",{className:"flex flex-row"},r.a.createElement("section",{id:"Profile",className:"flex flex-column w-100 "},r.a.createElement("div",{className:"flex flex-row w-100"},r.a.createElement("div",{className:"flex flex-column w-100="},r.a.createElement("div",{style:{width:"160px",backgroundImage:"url("+this.avatar(this.state.activeUser)+")"},className:"pointer h-100   cover bg-center"})),r.a.createElement("div",{className:"flex flex-column justify-center w-100"},r.a.createElement("div",{className:"flex flex-column justify-center w-100 pa4"},r.a.createElement("div",{className:"f4 flex flex-column w-100"},r.a.createElement("span",{className:"fw6 black-80"},this.state.activeUser.profile.name&&this.state.activeUser.profile.name.first," ",this.state.activeUser.profile.name&&this.state.activeUser.profile.name.last),r.a.createElement("span",{className:"flex items-start fw4 ml0 mt2 f5 black-50"},this.state.activeUser.position)),r.a.createElement("div",{className:"flex flex-row flex-wrap w-100 pt3 black-60"},r.a.createElement("div",{className:"flex flex-column mr3 mb1"},r.a.createElement("span",{className:"f6 fw4 black-40"},"Age",r.a.createElement("span",{className:"fw6 ml2 black-60"},A()().diff(this.state.activeUser.profile.dob,"years")))),r.a.createElement("div",{className:"flex flex-column mr3 mb1"},r.a.createElement("span",{className:"f6 fw4 black-40"},"Gender",r.a.createElement("span",{className:"fw6 ml2 black-60"},this.state.activeUser.profile.gender&&this.state.activeUser.profile.gender||""))),r.a.createElement("div",{className:"flex flex-column mr3 mb1"},r.a.createElement("span",{className:"f6 fw4 black-40"},"Location",r.a.createElement("span",{className:"fw6 ml2 black-60"},this.state.activeUser.profile.location&&this.state.activeUser.profile.location.County||""))))),r.a.createElement("div",{className:"flex flex-row justify-center w-100"},r.a.createElement("button",{onClick:function(){return e.addToCrew(e.state.activeUser)},className:"pointer pv3 flex-auto flex flex-row justify-center pa0 ma0 bg-white bl b--black-10"},r.a.createElement("span",{className:"f5 fw6 black-40 mr2 "},"Invite to Crew"),this.state.addToCrewButtonLoading?r.a.createElement(Me.a,{size:15}):r.a.createElement(P.a,{icon:"small-plus",iconSize:15,className:"black-50"}))))))))),this.state.typeSelected&&"crew-builder"===this.state.type&&r.a.createElement("div",{id:"CrewBuilder",className:"relative flex flex-column items-center justify-start  h-100 raleway fw5 w-100 pt4"},r.a.createElement("div",{id:"OnboardingStatus",className:"absolute flex flex-column right-0 top-0 z-99"},r.a.createElement("div",{className:"flex flex-column mv4  mh5 bs-b round overflow-hidden"},r.a.createElement("div",{className:"flex flex-row justify-center w-100"},r.a.createElement("button",{onClick:function(){return e.openDrawer({type:"crew"})},className:"pointer pv2 ph4 flex-auto flex flex-row justify-center pa0 ma0 bg-white hover-bg-black-05 hover-black -bs-a"},r.a.createElement("span",{className:"flex items-center f5 fw6 black-40 "},"View Crew ",r.a.createElement(P.a,{icon:"follower",iconSize:15,className:"ml2 black-40"})," "))))),r.a.createElement(V.a,{title:!1,placement:"bottom",closable:!0,onClose:this.toggleDrawer,visible:this.state.drawerVisible,height:"36vh"},r.a.createElement("div",{className:"flex flex-column"},r.a.createElement("div",{className:"flex flex-column pa4"},r.a.createElement("div",{className:"flex flex-row"},this.state[this.state.drawerType]&&this.state[this.state.drawerType].map(function(t,a){return r.a.createElement("div",{className:"flex flex-column mb2"},r.a.createElement("div",{className:"flex flex-row"},r.a.createElement("div",{onClick:function(){return e.openDialog({item:t})},className:" pointer flex flex-column pv2 pr3 items-center justify-center"},r.a.createElement("div",{style:{width:"160px",height:"100px",borderRadius:"5px",backgroundImage:"url("+t.profile.picture+")"},className:"cover bg-center"}),r.a.createElement("div",{className:" flex flex-row pt2 black"},r.a.createElement("div",{className:" flex f5 fw6 "},t.profile.name.first),r.a.createElement("div",{className:" flex f5 fw6 ml1"},t.profile.name.last)))),r.a.createElement("div",{className:"justify-center flex flex-row f6 fw4 black-40 pb3 w-100 tc"},t.position," "))}))))),r.a.createElement(Ht,{type:"crewBuilder",addToCrew:this.addToCrew,addToFavourites:this.addToFavourites,openDialog:this.openDialog,closeDialog:this.closeDialog,saveAndCreateAccount:this.saveAndCreateAccount,saveAndCreateAccountButtonLoading:this.state.saveAndCreateAccountButtonLoading})),this.state.typeSelected&&"project-finder"===this.state.type&&r.a.createElement("div",{id:"CrewBuilder",className:"relative flex flex-column items-center justify-start  h-100 raleway fw5 w-100 "},r.a.createElement(V.a,{title:!1,placement:"bottom",closable:!0,onClose:this.toggleDrawer,visible:this.state.drawerVisible,height:"36vh"},r.a.createElement("div",{className:"flex flex-column"},r.a.createElement("div",{className:"flex flex-column pa4"},r.a.createElement("div",{className:"flex flex-row"},this.state[this.state.drawerType]&&this.state[this.state.drawerType].map(function(t,a){return r.a.createElement("div",{className:"flex flex-column mb2"},r.a.createElement("div",{className:"flex flex-row"},r.a.createElement("div",{onClick:function(){return e.openDialog({item:t})},className:" pointer flex flex-column pv2 pr3 items-center justify-center"},r.a.createElement("div",{style:{width:"100px",height:"120px",borderRadius:"5px",backgroundImage:"url("+t.profile.picture+")"},className:"cover bg-center"}),r.a.createElement("div",{className:" flex flex-row pt3 black-60"},r.a.createElement("div",{className:" flex f6 fw6 "},t.profile.name.first),r.a.createElement("div",{className:" flex f6 fw6 ml1"},t.profile.name.last)))),r.a.createElement("div",{className:"flex flex-row f6 fw4 black-40 pb3 w4"},t.position," "))}))))),r.a.createElement(Jn,{projects:this.state.filteredProjects,searchProjects:this.searchProjects,projectsReady:this.state.projectsReady,openDialog:this.openDialog,closeDialog:this.closeDialog,searchLoading:this.state.searchLoading})))}}]),t}(r.a.Component),Yn=zn;zn.contextType=Pe;y.b.div({hidden:{opacity:0,y:50},visible:{opacity:1,y:0}});var Gn=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={hasError:!1,drawerOpen:!1,activeFile:{},ready:!0,activeConversation:null,conversations:null,activeStream:null,isVisible:!1,stats:[],projects:[]},a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.fetchProjects({self:this});case 2:t=[{title:"Active Projects",number:this.context.subscribedProjects.length,link:"/myprojects"},{title:"Messages",number:this.context.allUnread.length,link:"/messages"},{title:"Notifications",number:this.context.notifications.filter(function(e){return!1===e.read}).length,link:"/notifications"},{title:"Days to Next Launch",number:0,link:"/project/5e4bd087382acb44a1002282"},{title:"Days to Next Job",number:0,link:"/project/5e4bd087382acb44a1002282"}],this.setState({stats:t});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){this.state.isVisible;return this.state.hasError?r.a.createElement("h1",null,"Something went wrong."):r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{id:"Discussion",className:"flex flex-column w-100 pb4 pt0"},r.a.createElement("div",{className:"flex flex-column flex-row-ns justify-between"},this.state.stats.map(function(e,t){return r.a.createElement(O.a,{to:e.link,className:"hover-slide-up trans-a flex flex-column justify-between flex-auto w-100 pv3 pointer "+(0===t?" pr3-ns ":"  ")+(4===t?" pl3-ns ":" ")+(4!==t&&0!==t?" ph3-ns ":" ")},r.a.createElement("div",{className:" br3 overflow-hidden flex flex-auto flex-column bg-white pa4 bs-b items-start justify-between"},r.a.createElement("span",{className:"f2 fw6 black mb2"},e.number),r.a.createElement("span",{className:"f4 f5-ns fw5 black-40"},e.title)))}))))}}]),t}(r.a.Component),Hn=Gn;Gn.contextType=Pe;y.b.div({hidden:{opacity:0,y:50},visible:{opacity:1,y:0}});var qn=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={hasError:!1,project:a.props.project,drawerOpen:!1,activeFile:{},ready:!0,activeConversation:null,conversations:null,activeStream:null,isVisible:!1},a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){this.state.isVisible;return this.state.hasError?r.a.createElement("h1",null,"Something went wrong."):r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{id:"Discussion",className:"flex flex-column w-100 pb4 pt0"},null!==this.props.title&&r.a.createElement(_,{title:"Discussion",docs:this.state.activeConversation&&this.state.activeConversation.messages||[],ready:this.state.conversationReady}),!this.state.conversationReady&&r.a.createElement("div",{className:("center"===this.props.loadingAlign?" items-center justify-center ":" items-center justify-start ")+" items-center justify-center  flex flex-row pv5 pr4"},r.a.createElement("div",{className:"sp sp-3balls"})),this.state.conversationReady&&r.a.createElement("div",{className:" flex flex-column flex-auto box w-100 trans-o-fast trans-y-fast "+(this.state.isVisible?" opacity-1 transform-y-0 ":" opacity-0 transform-y-50 ")},r.a.createElement("div",{style:{height:z.e.mobile()?"54vh":"auto"}},r.a.createElement(Dt,{type:"discussion-large",conversation:this.state.activeConversation,conversations:[this.state.activeConversation],activeConversationIndex:0,stream:this.state.activeStream,updateActiveConversation:this.updateActiveConversation,size:this.props.size})))),r.a.createElement(V.a,{title:"Basic Drawer",placement:"right",closable:!0,onClose:this.toggleDrawer,visible:this.state.drawerOpen,width:"60vw"},this.state.drawerOpen&&r.a.createElement("div",{className:"pointer flex flex-column justify-end items-center pa3 bg-white "},r.a.createElement("h3",{className:"f5 fw6 black tc pv2 ph3 word-break-all"},this.state.activeFile.file.originalname),r.a.createElement("div",{className:"pointer flex flex-column justify-end items-center pa3 bg-white br2 bs-b mb2 mr2"},r.a.createElement("div",{style:{backgroundImage:'url("'+this.state.activeFile.url+'")'},className:"h5 file-item bg-cover bg-center cover flex flex-column justify-end items-center pa3 bg-white br2 bs-b mb2 mr2"})))))}}]),t}(r.a.Component);qn.contextType=Pe;r.a.Component;var Wn="Use the boxes above or menu icon in the top right corner to navigate around the platform.",Kn="Use the calendar below to view your project schedule.",Zn=function(){return r.a.createElement("div",{className:"flex flex-column f5 fw5 black-30 ls-copy raleway pa4 bs-b- mb4"},r.a.createElement("span",{className:"fw5 f4 black-50 pb3"},"Welcome to ",r.a.createElement("span",{className:"fw6 black"},"Crew20")),r.a.createElement("span",{className:"flex flex-column pb2"},Wn),r.a.createElement("span",{className:"flex flex-column"},Kn))},Xn=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).showModal=function(){a.setState({insertModalVisible:!0})},a.handleOk=function(e){console.log(e),a.setState({insertModalVisible:!1})},a.handleCancel=function(e){console.log(e),a.setState({insertModalVisible:!1})},a.state={projects:[],ready:!1,insertModalVisible:!1,projectInfoVisible:!1,loading:!1,toMessages:!1,conversationReady:!1,activeTab:"1",drawerReady:!1,progressBarPercent:0,progressBarActive:!1,showLocationForm:!1,showOnboardingScreen:!1,account:z.a.get("account"),searchCity:null,isOpen:!1,userIsOwner:!1,buttons:[],activeButton:null,views:[],activeView:null,viewsReady:!1,shouldCompleteProfile:!1},a.fetchProjects=a.fetchProjects.bind(Object(v.a)(a)),a.fetchProjects2=a.fetchProjects2.bind(Object(v.a)(a)),a.showDrawer=a.showDrawer.bind(Object(v.a)(a)),a.hideDrawer=a.hideDrawer.bind(Object(v.a)(a)),a.refresh=a.refresh.bind(Object(v.a)(a)),a.setLocation=a.setLocation.bind(Object(v.a)(a)),a.start=a.start.bind(Object(v.a)(a)),a.focusLocationSearch=a.focusLocationSearch.bind(Object(v.a)(a)),a.reserve=a.reserve.bind(Object(v.a)(a)),a.sendMessage=a.sendMessage.bind(Object(v.a)(a)),a.openSearchDialog=a.openSearchDialog.bind(Object(v.a)(a)),a.closeDialog=a.closeDialog.bind(Object(v.a)(a)),a.searchProjects=a.searchProjects.bind(Object(v.a)(a)),console.log("[[ Dashboard props ]]",e),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"setView",value:function(e){var t=e.view,a=e.button;this.setState({activeView:t,activeButton:a}),z.a.store({label:"activeView",value:t}),z.a.store({label:"activeButton",value:a}),"discussion"===t&&setTimeout(function(){return document.querySelector("body").scroll({top:130,left:0,behavior:"smooth"})},1e3)}},{key:"setButtons",value:function(){var e=this,t=[{title:"Overview",role:"general",function:function(){return e.setView({filter:"Overview",button:0})}},{title:"Projects",role:"general",function:function(){return e.setView({filter:"Discussion",button:1})}},{title:"Messages",role:"general",function:function(){return e.setView({filter:"Files",button:2})}},{title:"Calendar",role:"general",function:function(){return e.setView({filter:"Settings",button:3})}},{title:"Notifications",role:"general",function:function(){return e.setView({filter:"People",button:4})}},{title:"Network",role:"general",function:function(){return e.setView({filter:"Checklist",button:5})}},{title:"Files",role:"general",function:function(){return e.setView({filter:"Rate Calculator",button:6})}}],a=[{title:"Overview",role:"general"},{title:"Projects",role:"general"},{title:"Messages",role:"general"},{title:"Calendar",role:"general"},{title:"Notifications",role:"general"},{title:"Network",role:"general"},{title:"Files",role:"general"}];this.setState({viewsReady:!0,buttons:t,activeButton:t[0],views:a,activeView:a[0]})}},{key:"closeDialog",value:function(){this.setState({isOpen:!1})}},{key:"searchProjects",value:function(e){e.location;var t,a=e.projectType;e.startDate,e.endDate;this.setState({ready:!1}),console.log("search config ",e),console.log(this.state.projects),t="undefined"!==typeof e.location.County?e.location.County.toLowerCase():e.location.address.county.toLowerCase();var n=this.state.projects;console.log("location",t);var r=n.filter(function(e){return e.location.toLowerCase()===t&&e.type===a}),s=r.filter(function(t){return A()(t.start_date).isBetween(e.startDate,e.endDate)});console.log("filtered",r),console.log("filteredDateRange",s),this.setState({projects:s,ready:!0,isOpen:!1})}},{key:"openSearchDialog",value:function(){this.setState({isOpen:!0})}},{key:"focusLocationSearch",value:function(){}},{key:"reserve",value:function(e){console.log(e),this.setState({activeDoc:e})}},{key:"sendMessage",value:function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.sendMessage({doc:t,self:this});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchProjects2",value:function(){var e=Object(p.a)(f.a.mark(function e(t){var a=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({ready:!1,searchCity:t}),setTimeout(function(){return console.log("[[ fetchProjects2 city ]]",t),z.a.fetchProjects2({city:t,self:a})},1e3);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchProjects",value:function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({ready:!1,searchCity:t}),e.next=3,z.a.fetchProjects({city:t,self:this});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"refresh",value:function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.refresh({self:this});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"showDrawer",value:function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.showDrawer({project:t,self:this});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"hideDrawer",value:function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.hideDrawer({self:this});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"setLocation",value:function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.setLocation({self:this});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"start",value:function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"checkProfileStatus",value:function(){this.context.account&&this.context.account.user&&this.context.account.user.profile&&0===this.context.account.user.profile.name.first.length&&this.setState({shouldCompleteProfile:!0})}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"componentDidMount",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.context.setPage({title:"Dashboard",subtitle:"..."}),this.checkProfileStatus(),this.setButtons(),z.a.fetchProjects({self:this}),document.querySelector("body").scroll({top:0,left:0,behavior:"smooth"}),null===localStorage.getItem("crewBuilder")){e.next=10;break}if((t=z.a.get("crewBuilder")).hasBeenUploaded){e.next=10;break}return e.next=10,z.a.createProject({self:this,project:t});case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(Pe.Consumer,null,function(t){return r.a.createElement(k,null,!e.state.ready&&r.a.createElement(Le,null),r.a.createElement("section",{id:"Home",className:"w-100 mw8 center pa4 pb6"},e.state.shouldCompleteProfile&&r.a.createElement("div",{onClick:function(){return e.props.history.push("/profile")},className:"flex flex-column pv3"},r.a.createElement("div",{className:"flex flex-column ph4 pv3 br2 bg-yellow black-30 f5 fw6"},r.a.createElement("span",{className:""},"Hi, it looks like you're new around here. Please complete your profile by clicking this link."))),e.state.viewsReady&&"Overview"===e.state.activeView.title&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Hn,{setView:e.setView,projects:e.state.projects}),r.a.createElement(Zn,{hide:function(){e.setState({showWelcome:!1})}}),r.a.createElement(Ja,{dashboard:!0})),e.state.viewsReady&&"Projects"===e.state.activeView.title&&r.a.createElement(Kt,{dashboard:!0}),e.state.viewsReady&&"Calendar"===e.state.activeView.title&&r.a.createElement(Ja,{dashboard:!0}),e.state.viewsReady&&"Messages"===e.state.activeView.title&&r.a.createElement(It,{type:"main",dashboard:!0,padding:!1}),e.state.viewsReady&&"Notifications"===e.state.activeView.title&&r.a.createElement($t,{dashboard:!0,padding:!1})))})}}]),t}(r.a.Component);Xn.contextType=Pe;var $n=function(e){function t(e){return Object(m.a)(this,t),Object(h.a)(this,Object(b.a)(t).call(this,e))}return Object(w.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(k,null,r.a.createElement("section",{id:"ConfirmAccount",className:"raleway flex flex-column items-center justify-center h-100 w-100 pt5 mw7 center pa4"},r.a.createElement(P.a,{icon:"inbox-search",iconSize:50,className:"black-60 pb3 pt4"}),r.a.createElement("h1",{className:"f3 fw5 black-70"},"Please confirm your email address."),r.a.createElement("div",{id:"CreateProject",className:"flex flex-row items-end justify-end mb2"},r.a.createElement("h1",{className:"f3 fw3 black-30 tc mw6"},"Please check your inbox (and spam) for your account confirmation email."))))}}]),t}(r.a.Component),Qn=a(374),er=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={confirmed:!1},a.setConfirmed=a.setConfirmed.bind(Object(v.a)(a)),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"setConfirmed",value:function(){var e=this;this.setState({confirmed:!0}),setTimeout(function(){e.context.login()},3e3)}},{key:"componentDidMount",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("query string",window.location.search),t=Qn.parse(window.location.search),console.log("parsed",t),console.log("parsed type",typeof t),e.next=6,z.c.confirmAccount({self:this,userId:t.user,email:t.email});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(k,null,r.a.createElement("section",{id:"ConfirmAccountConfirmed",className:"flex flex-column items-center justify-center h-100 w-100 pt5 mw7 center pa4"},!this.state.confirmed&&r.a.createElement("h1",{className:"f3 fw1 black-30"},"Confirming your account."),r.a.createElement("div",{id:"CreateProject",className:"flex flex-column items-center justify-center mb2"},this.state.confirmed&&r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{icon:"endorsed",iconSize:60,className:"mt4 mb2 blue"}),r.a.createElement("h1",{className:"f3 fw1 black-50"},"Confirmed"),r.a.createElement("div",{className:" items-center justify-center  flex flex-row pv3 mr3"},r.a.createElement("div",{className:"sp sp-3balls"}))),!this.state.confirmed&&r.a.createElement("div",{className:" items-center justify-center  flex flex-row pv3"},r.a.createElement("div",{className:"sp sp-3balls"})))))}}]),t}(r.a.Component);er.contextType=Pe;var tr=a(401),ar=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement(k,null,r.a.createElement("section",{id:"NotFound",className:"flex flex-column items-center justify-center h-100 w-100 pt7 mw7 center pa4"},r.a.createElement("h1",{className:"f3 fw1 black-30"},"Sorry, that page does not exist"),r.a.createElement("div",{id:"CreateProject",className:"flex flex-row items-end justify-end mb2"},r.a.createElement(O.a,{to:"/myprojects",className:"br1- round bs-b bg-black-20 ph5 pv2 pointer bn relative w-100  "},r.a.createElement("span",{className:"f5 fw6 white pv0 flex items-center justify-center"},"Back to My Projects ",r.a.createElement(P.a,{icon:"arrow-right",iconSize:20,className:" f4 black-60- white  absolute right-0 ml3 mr3"}))))))}}]),t}(r.a.Component),nr=a(37),rr=a(175),sr=a(783),cr=a(56);window.GeoPattern=cr;var or="flex flex-auto f6 fw6 black-50 ph3 pv3 bb b--black-05 w5",ir="flex items-center f3 black-20 ",lr=function(e){return console.log("mainMenu props",e),N.a.createElement("div",{className:"flex flex-column ma0 pa0"},N.a.createElement(O.a,{to:"/dashboard",className:or},N.a.createElement("span",{className:ir},N.a.createElement(P.a,{icon:"layout-grid",iconSize:15}),N.a.createElement("span",{className:"f5 fw6 black ml3"},"Dashboard"))),N.a.createElement(O.a,{to:"/calendar",className:or},N.a.createElement("span",{className:ir},N.a.createElement(P.a,{icon:"numerical",iconSize:15})," ",N.a.createElement("span",{className:"f5 fw6 black ml3"},"Calendar"))),N.a.createElement(O.a,{to:"/network",className:or},N.a.createElement("span",{className:ir},N.a.createElement(P.a,{icon:"exchange",iconSize:15})," ",N.a.createElement("span",{className:"f5 fw6 black ml3"},"Network"))),N.a.createElement(O.a,{to:"/myprojects",className:or},N.a.createElement("span",{className:ir},N.a.createElement(P.a,{icon:"grid-view",iconSize:15}),N.a.createElement("span",{className:"f5 fw6 black ml3"},"My Projects"))),N.a.createElement(O.a,{to:"/home",className:or},N.a.createElement("span",{className:ir},N.a.createElement(P.a,{icon:"search",iconSize:15}),N.a.createElement("span",{className:"f5 fw6 black ml3"},"Find Projects"))),N.a.createElement(O.a,{to:"/messages",className:or},N.a.createElement("span",{className:ir},N.a.createElement(P.a,{icon:"chat",iconSize:15}),N.a.createElement("span",{className:"f5 fw6 black ml3"},"Messages"))),N.a.createElement(O.a,{to:"/notifications",className:or},N.a.createElement("span",{className:ir},N.a.createElement(P.a,{icon:"notifications",iconSize:15})," ",N.a.createElement("span",{className:"f5 fw6 black ml3"},"Notifications"),N.a.createElement("div",{className:"  count-badge- f6 br1 -bg-white ",style:{color:"white",fontWeight:"bold",marginLeft:"1rem",background:"rgb(196, 196, 199)",padding:"0.1rem 0.4rem"}},N.a.createElement("span",{className:"bg-white-"},e.notifications.length)))))},ur=(N.a.createElement("div",{className:"flex flex-column ma0 pa0"}),function(e){var t=e.logout;e.notifications;return N.a.createElement("div",{className:"flex flex-column ma0 pa0"},N.a.createElement(O.a,{to:"/profile",className:or},N.a.createElement("span",{className:ir},N.a.createElement(P.a,{icon:"user",iconSize:15}),N.a.createElement("span",{className:"f5 fw6 black ml3"},"Profile"))),N.a.createElement(O.a,{to:"/account",className:or},N.a.createElement("span",{className:ir},N.a.createElement(P.a,{icon:"lock",iconSize:15}),N.a.createElement("span",{className:"f5 fw6 black ml3"},"Account"))),N.a.createElement("div",{onClick:function(){return t()},className:"flex flex-auto f6 fw6 black-50 ph3 pv3 bb b--black-05 w5 bg-black-05"},N.a.createElement("span",{className:ir},N.a.createElement(P.a,{icon:"log-out",iconSize:15}),N.a.createElement("span",{className:"f5 fw6 black ml3"},"Logout"))))}),fr=function(){return N.a.createElement(Pe.Consumer,null,function(e){return console.log("AccountContext header ",e),console.log("isAuthenticated ",e.isAuthenticated),N.a.createElement("header",{className:" fixed top-0 left-0 w-100 z-101 bg-black -bg-pink vh12 flex items-center "},N.a.createElement("div",{className:"flex flex-row flex-auto justify-between"},!e.isAuthenticated&&N.a.createElement("div",{className:"bb- b--white bw1 flex flex-row flex-auto justify-between vh-50- h-100 ph3"},N.a.createElement("div",{className:"flex flex-row  flex-auto ph3 pv3 black-80 fw7 items-center justify-start"},N.a.createElement(O.a,{to:"/",className:"white flex ph3 ttu pv2 items-center logotext ttu spaced tracked raleway f5 fw8 ba b--white bw1"},"Crew20")),N.a.createElement("div",{className:"flex flex-column items-center justify-center ph3 pv2"},N.a.createElement("button",{onClick:e.login,className:"br1 bg-black primary pointer trans-a bn flex flex-row items-center ph3 pv2 relative "},N.a.createElement("span",{className:"ttu f6 fw6 white raleway tracked-03 pv1 "},"Sign In"))),N.a.createElement("div",{className:"flex flex-column items-center justify-center ph3 pv2"},N.a.createElement("button",{onClick:e.register,className:"br1 bg-white primary pointer trans-a bn flex flex-row items-center ph3 pv2 relative "},N.a.createElement("span",{className:"ttu f6 fw6 black raleway tracked-03 pv1 "},"Register")))),e.isAuthenticated&&N.a.createElement(N.a.Fragment,null,N.a.createElement("div",{className:"flex flex-row  flex-auto ph3 pv3 black-80 fw7 items-center justify-start"},N.a.createElement(O.a,{to:"/home",className:"white flex ph3 ttu pv2 items-center logotext ttu spaced tracked raleway  f4 fw8 ba b--white bw1"},"Crew20")),!e.account&&e.account.user&&e.account.user.profile&&e.account.user.profile.confirmed&&N.a.createElement("div",{className:"flex flex-column items-center justify-center ph3 pv2"},N.a.createElement("button",{onClick:e.logout,className:"br1 bg-black primary pointer trans-a bn flex flex-row items-center ph3 pv2 relative "},N.a.createElement("span",{className:"ttu f6 fw6 white raleway tracked-03 pv1 "},"Logout"))),e.account.user.profile.confirmed&&N.a.createElement("div",{className:"flex flex-column  f6 fw7 "},N.a.createElement("nav",{className:"flex flex-row flex-auto flex-wrap w-100"},N.a.createElement("section",{className:"profile-button flex flex-column flex-auto- items-center justify-center pv3 pl0-ns pr0-ns pr0"},N.a.createElement("span",{className:"profile-widget flex items-center justify-center"},N.a.createElement(D.a,{content:ur({logout:e.logout,notifications:e.notifications||[]}),placement:"bottomRight",trigger:"hover",className:"flex flex-row items-center pointer"},N.a.createElement("div",{className:"flex"},N.a.createElement("span",{className:"f5 fw6 white mr3 visible-ns hidden-sm"},e.account.user.profile&&e.account.user.profile.name.first," ",e.account.user.profile&&e.account.user.profile.name.last),N.a.createElement(sr.a,{size:"large",shape:"round",className:"bg-center bg-cover ",style:{color:"white",backgroundImage:e.account.user.profile.picture.length?"url("+e.account.user.profile.picture+")":cr.generate(e.account.user.profile.name.first+e.account.user.profile.name.last).toDataUrl()}}))))),N.a.createElement("section",{id:"nav",className:" flex flex-auto- flex-column items-end justify-center raleway pv3 pl3 pr4 pl4-ns pr4-ns f3"},N.a.createElement(D.a,{content:lr({logout:e.logout,notifications:e.notifications||[]}),placement:"bottomLeft",trigger:"hover",className:"flex flex-column items-center"},N.a.createElement("span",{className:"flex items-center justify-center",style:{fontSize:"20px"}},N.a.createElement(P.a,{icon:"ring",iconSize:20,className:" white pointer"})),N.a.createElement("span",{className:"dn f7 fw5 black-30- white pointer"},"Menu"))))))))})},pr=[{value:"1",label:"Food"},{value:"2",label:"Supermarket"},{value:"3",label:"Extra",isLeaf:!0}],mr="flex flex-auto- f6 fw6 black-50 ph3 pv4 bb b--black-05 w5 w-100",dr=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).onSelect=function(e){a.setState({visible:!1,selected:e.props.value})},a.handleVisibleChange=function(e){a.setState({visible:e})},a.onMaskClick=function(){a.setState({show:!1})},a.state={visible:!1,selected:"",show:!1,initData:""},a.toggleMenu=a.toggleMenu.bind(Object(v.a)(a)),a.onMaskClick=a.onMaskClick.bind(Object(v.a)(a)),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"toggleMenu",value:function(e){var t=this;e.preventDefault(),this.setState({show:!this.state.show}),this.state.initData||setTimeout(function(){t.setState({initData:pr})},500)}},{key:"render",value:function(){var e,t=this.state,a=t.initData,n=t.show,s=(r.a.createElement(bt.b,{className:"single-foo-menu top-10vh ",data:a,value:["1"],level:1,onChange:this.onChange,height:.6*document.documentElement.clientHeight}),r.a.createElement("div",{style:{position:"absolute",width:"100%",height:.6*document.documentElement.clientHeight,display:"flex",justifyContent:"center"}},r.a.createElement(bt.a,{size:"large"})));return r.a.createElement("div",{id:"Header-Mobile",className:"flex flex-row fixed top-0 left-0 w-100 z-999"},r.a.createElement("div",{className:n?" single-menu-active flex w-100 flex-column ":" flex w-100 flex-column "},r.a.createElement("div",{className:"flex w-100 flex-column"},r.a.createElement(bt.c,{rightContent:r.a.createElement("div",{className:"flex flex-row row-reverse flex-auto ph3 pv3 black-80 fw7 items-center justify-start"},r.a.createElement("div",{className:"white flex ph3 ttu pv2 items-center logotext ttu spaced tracked raleway fw6 ba b--white bw1"},"Crew20")),leftContent:r.a.createElement(P.a,{icon:"menu",iconSize:20}),mode:"light",onLeftClick:this.toggleMenu,className:"single-top-nav-bar row-reverse w-100 flex"})),n?a?(e={context:this.context,close:this.onMaskClick},r.a.createElement("div",{onClick:e.close,className:"mh-90vh oveflow-scroll- flex flex-column ma0 pa0 w-100 bg-white z-99"},r.a.createElement("div",{className:"flex flex-row  bg-black-10 pv4 ph3 items-center justify-start"},r.a.createElement("div",{className:"bg-center bg-cover ",style:{width:"60px",height:"60px",borderRadius:"100px",color:"black",backgroundImage:'url("'+e.context.account.user.profile.picture+'")'}}),r.a.createElement("span",{className:"f4 fw6 black ml3"},e.context.account.user.profile&&e.context.account.user.profile.name.first," ",e.context.account.user.profile&&e.context.account.user.profile.name.last)),r.a.createElement(O.a,{to:"/profile",className:mr},r.a.createElement("span",{className:"ml2"},r.a.createElement(P.a,{icon:"home",iconSize:15,className:"f7 black-20 mr2"})," Profile")),r.a.createElement(O.a,{to:"/home",className:mr},r.a.createElement("span",{className:"ml2"},r.a.createElement(P.a,{icon:"projects",iconSize:15,className:"f7 black-20 mr2"})," Projects")),r.a.createElement(O.a,{to:"/messages",className:mr},r.a.createElement("span",{className:"ml2"},r.a.createElement(P.a,{icon:"chat",iconSize:15,className:"f7 black-30 mr2"})," Messages")),r.a.createElement(O.a,{to:"/calendar",className:mr},r.a.createElement("span",{className:"ml2"},r.a.createElement(P.a,{icon:"timeline-events",iconSize:15,className:"f7 black-30 mr2"})," Calendar")),r.a.createElement(O.a,{to:"/myprojects",className:mr},r.a.createElement("span",{className:"ml2"},r.a.createElement(P.a,{icon:"projects",iconSize:15,className:"f7 black-30 mr2"})," My Projects")))):s:null,n?r.a.createElement("div",{className:"menu-mask",onClick:this.onMaskClick}):null))}}]),t}(r.a.Component),hr=dr;dr.contextType=Pe;a(224);var br=function(e){return r.a.createElement("footer",{className:"vh-10 fixed bottom-0 left-0 w-100 bg-white z-9 bt b--black-05"},r.a.createElement("div",{className:"flex flex-row flex-auto"},r.a.createElement("div",{className:"flex flex-column flex-auto w-100 black-80 fw7"},r.a.createElement("span",{className:"copyright f7 fw1 black-40 ph3 pv3"},"\xa9 2019 Crew20.com. All Rights Reserved.")),r.a.createElement("div",{className:"flex flex-column flex-auto w-100 black-80 fw7"},r.a.createElement("nav",{className:"flex flex-row flex-auto items-center justify-end w-100"},r.a.createElement("div",{className:"nav-item flex ph3 pv3"},r.a.createElement(O.a,{className:"black-40 f7",to:"/privacy-policy"},"Privacy Policy")),r.a.createElement("div",{className:"nav-item flex ph3 pv3"},r.a.createElement(O.a,{className:"black-40 f7",to:"/contact"},"Contact Us")),r.a.createElement("div",{className:"nav-item flex ph3 pv3"},r.a.createElement(O.a,{className:"black-40 f7",to:"/help"},"Help")),r.a.createElement("div",{className:"nav-item flex ph3 pv3"},r.a.createElement(O.a,{className:"black-40 f7",to:"/settings"},"Settings")),r.a.createElement("div",{className:"nav-item flex ph3 pv3"},r.a.createElement(O.a,{className:"black-40 f7",to:"/settings"},"Sign In"))))))},vr=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={isOpen:!1},a.toggleDrawer=a.toggleDrawer.bind(Object(v.a)(a)),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"toggleDrawer",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){return r.a.createElement("footer",{className:"vh-10 fixed bottom-0 left-0 w-100 bg-white z-9 bt b--black-05"},r.a.createElement("div",{className:"flex flex-row flex-auto"},r.a.createElement("div",{className:"flex flex-column flex-auto w-100 black-80 fw7"},r.a.createElement("span",{className:"copyright f7 fw1 black-40 ph3 pv3"},"\xa9 2019 Crew20.com")),r.a.createElement("div",{className:"flex flex-column flex-auto w-100 black-80 fw7 items-end justify-center ph3"},r.a.createElement(P.a,{onClick:this.toggleDrawer,icon:"help",iconSize:"20",className:"black-50"}))),r.a.createElement(V.a,{placement:"bottom",closable:!0,onClose:this.toggleDrawer,width:500,height:350,visible:this.state.isOpen,className:"CrewList -bg-near-white"},r.a.createElement("div",{className:"flex flex-column mb2 pa4- "},r.a.createElement("div",{className:"flex flex-auto flex-column pb0 "},r.a.createElement("div",{className:"flex flex-column flex-auto w-100 black-80 fw7"},r.a.createElement("nav",{className:"flex flex-column flex-auto items-center justify-end w-100"},r.a.createElement("div",{className:"nav-item flex ph3 pv3 bb b--black-05 w-100"},r.a.createElement(O.a,{className:"black-40 f6",to:"/privacy-policy"},"Privacy Policy")),r.a.createElement("div",{className:"nav-item flex ph3 pv3 bb b--black-05 w-100"},r.a.createElement(O.a,{className:"black-40 f6",to:"/contact"},"Contact Us")),r.a.createElement("div",{className:"nav-item flex ph3 pv3 bb b--black-05 w-100"},r.a.createElement(O.a,{className:"black-40 f6",to:"/help"},"Help")),r.a.createElement("div",{className:"nav-item flex ph3 pv3 bb b--black-05 w-100"},r.a.createElement(O.a,{className:"black-40 f6",to:"/settings"},"Settings")),r.a.createElement("div",{className:"nav-item flex ph3 pv3 bb b--black-05 w-100"},r.a.createElement(O.a,{className:"black-40 f6",to:"/settings"},"Sign In"))))))))}}]),t}(r.a.Component),wr=(a(402),a(403),r.a.createContext(),r.a.createContext({})),gr=(wr.Provider,wr.Consumer,a(785)),xr={formLabel:function(){return"f4 fw4 black-20 tl mr4 w-30"},formLabel1:function(){return"f4 fw4 black-20 tl mr4 w-30"},formInput:function(){return"flex flex-column ph4 pv3 bn round black-50 f4 fw5 w-100"},formInputDateRange:function(){return"flex flex-column ph4 bn round black-50 f4 fw5 w-100"},formRow:function(){return"form-row flex flex-row items-center pt4 w-100"},button:function(){return"br1- round bs-b bg-black-20 ph3 pv2 pointer bn relative  "},buttonSpan:function(){return"f4 fw5 white pv2 flex items-center justify-center"},formTitle:function(){return"f4 fw6 black-90 pb3"},formButtonWrapper:function(){return"Buttons flex flex-row justify-between center w-100"},formButtonWrapperInner:function(){return"flex flex-column w-100 pa4 bg-white"},loginv2:function(){return"bg-white bs-b hover-bg-black-10 br3- -round tc w-100 pointer flex button flex-column ph3 pv3 ba- -b--black-10 f4 fw6 white- black -black-50 hover-scale-1 trans-a"},inputSquare:function(){return"flex w-100 mb3- bn br2 pa3 black-50 f4 fw5 bs-b"},inputRound:function(){return"flex w-100 mb3- bn round pa3 black-50 f4 fw5 bs-b"}},yr=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).componentDidMount=function(){console.log(" "),console.log(" "),console.log("Login Form mounted",a.props),console.log(" ")},a.getDerivedStateFromProps=function(e,t){},a.getSnapshotBeforeUpdate=function(e,t){},a.componentDidUpdate=function(){},a.componentWillUnmount=function(){},a.state={hasError:!1,demoUser:{email:"demo@example.com",password:"password1"},buttonLoading:!1},a.email=r.a.createContext(),a.password=r.a.createContext(),a.submit=a.submit.bind(Object(v.a)(a)),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"submit",value:function(){this.setState({buttonLoading:!0}),console.log("[[ Login values ]]",this.password.current.value,this.email.current.value),this.props.submitLoginForm({type:this.props.type,email:this.email.current.value,password:this.password.current.value})}},{key:"componentDidCatch",value:function(e,t){}},{key:"render",value:function(){return this.state.hasError?r.a.createElement("h1",null,"Something went wrong."):r.a.createElement("div",{id:"form-login-wrapper",className:"flex flex-column w-100 mw5-"},r.a.createElement("div",{className:"flex-column flex w-100 ph5 pt5 pb4"},r.a.createElement("div",{className:" flex flex-row items-center w-100 mb4"},r.a.createElement("label",{className:"f5 fw5 black-30 pb2- w-30 pr3 "},"Email"),r.a.createElement("input",{type:"email",ref:this.email,defaultValue:this.state.demoUser.email,className:xr.inputSquare()})),r.a.createElement("div",{className:" flex flex-row items-center w-100 mb4 "},r.a.createElement("label",{className:"f5 fw5 black-30 pb2- w-30 pr3 "},"Password"),r.a.createElement("input",{type:"password",ref:this.password,defaultValue:this.state.demoUser.password,className:xr.inputSquare()}))),r.a.createElement("div",{className:" flex w-100 bt b--black-05"},"login"===this.props.dialogType&&r.a.createElement("div",{onClick:this.props.setDialogToRegister,className:"pointer flex flex-row black-40 f5 fw4 pt3 ph5 pv3 justify-center tc items-center w-100"},"Don't have an account?"," ",r.a.createElement("span",{className:"black-40 fw6 ml2"},"Register")),"register"===this.props.dialogType&&r.a.createElement("div",{onClick:this.props.setDialogToLogin,className:"pointer flex flex-row black-40 f5 fw4 pt3 ph5 pv3 justify-center tc items-center w-100"},"Already have an account?"," ",r.a.createElement("span",{className:"black-40 fw6 ml2"},"Sign In"))),r.a.createElement("div",{className:"form-row ttc flex w-100 bg-white ph4 pv4 bs-b "+xr.loginv2()},r.a.createElement("div",{onClick:this.submit,className:""},this.state.buttonLoading&&r.a.createElement("div",{className:"flex flex-column justify-center items-center pv2 ph4"},r.a.createElement("div",{className:"sp sp-3balls"})),!this.state.buttonLoading&&this.props.dialogType)))}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(r.a.Component),jr=(r.a.Component,{placeholderImage:"http://cdn.shopify.com/s/files/1/2278/2351/products/W1151_GeometricPattern3_1024x1024.jpg?v=1510704914",api:{}});jr.api.findCity=function(e,t){return"https://reverse.geocoder.api.here.com/6.2/reversegeocode.json?prox="+e+","+t+",250&mode=retrieveAddresses&maxresults=1&gen=9&app_id=ZZN2MPuexLyuz3VR0KDD&app_code=TnEsVJR8k3zxGMiAkbP_EQ"},jr.api.base2=function(){return"https://api.crew20.devcolab.site/v1/"},jr.api.base=function(){return"https://api.crew.quantacom.co/v1/"};var kr=jr,Er=(function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))}(),{constants:function(){return kr},getGeolocation:function(){var e=Object(p.a)(f.a.mark(function e(t){var a,n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.self,n=function(e){return a.setState({lat:e.coords.latitude,long:e.coords.longitude}),console.log("[[ Retrieving Geolocation Data ]]",JSON.stringify(e)),a.findCity()},window.navigator.geolocation.getCurrentPosition(n);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),findCity:function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(p.a)(f.a.mark(function e(a){var n,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.self,console.log("[[ Retrieving City Data ]]"),r=kr.api.findCity(n.state.lat,n.state.long),fetch(r,function(e,t){return t}).then(function(e){return e.json()}).then(function(e){console.log("Geo ",e);var t=e.Response.View[0].Result[0].Location.Address.AdditionalData,r=!0,s=!1,c=void 0;try{for(var o,i=t[Symbol.iterator]();!(r=(o=i.next()).done);r=!0){var l=o.value;"CountryName"===l.key&&n.setState({country:l.value,countrySet:!0})}}catch(u){s=!0,c=u}finally{try{r||null==i.return||i.return()}finally{if(s)throw c}}n.setState({city:e.Response.View[0].Result[0].Location.Address.County,suburb:e.Response.View[0].Result[0].Location.Address.District,province:e.Response.View[0].Result[0].Location.Address.State,searchFormReady:!0,location:e.Response.View[0].Result[0].Location.Address,locationIsSet:!0}),localStorage.setItem("location",JSON.stringify(e.Response.View[0].Result[0].Location.Address)),localStorage.setItem("locationIsSet",JSON.stringify(!0)),a(e)});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),findCurrency:function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(p.a)(f.a.mark(function e(a){var n,r,s;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("[[ Retrieving Currency Data ]]"),!(n=t.self).state.countrySet){e.next=7;break}return r=n.state.country,s="https://restcountries.eu/rest/v2/name/"+r,e.next=7,fetch(s,function(e,t){return t}).then(function(e){return e.json()}).then(function(e){if(null!==localStorage.getItem("activeCurrency")){var t=JSON.parse(localStorage.getItem("activeCurrency"));localStorage.setItem("activeCurrencyIsSet",JSON.stringify(!0)),n.setState({activeCurrencyIsSet:!0,activeCurrency:t}),Er.fetchExchangeRate({currency:t}),a(e)}else localStorage.setItem("activeCurrency",JSON.stringify(e[0].currencies[0])),localStorage.setItem("baseCurrency",JSON.stringify(e[0].currencies[0])),localStorage.setItem("activeCurrencyIsSet",JSON.stringify(!0)),n.setState({activeCurrencyIsSet:!0,activeCurrency:e[0].currencies[0],baseCurrency:e[0].currencies[0]}),Er.fetchExchangeRate({currency:e[0].currencies[0]}),a(e)});case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}),Nr=a(374),Or=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).submitLoginForm=function(){var e=Object(p.a)(f.a.mark(function e(t){var n,r,s,c,o,i;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,r=t.password,s=t.type,console.log(" ** data ",t),a.setState({submitInProgress:!0}),c={email:n,password:r},o="production"===z.a.get("env").env?"https://dev.iim.technology/v1/auth/"+s+"/":"http://localhost:3030/v1/auth/"+s+"/",i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)},console.log(o),e.next=9,fetch(o,i).then(function(e){return e.json()}).then(function(e){if(console.log("[[ Login Response ]]",e),400===e.code||401===e.code)Z.a.open({message:"Error",description:e.message});else{z.a.store({label:"authTokens",value:e.tokens}),z.a.store({label:"account",value:e}),z.a.store({label:"isAuthenticated",value:!0});var t=A()((new Date).getTime()),n={start:t,check:t.add(10,"minutes")};z.a.set("loginTimestamps",n),a.setState({isAuthenticated:!0,account:e}),a.toggleDialog({type:null,title:null}),a.props.history.push("/dashboard"),Rt.a.success("Logged In"),z.a.get("account").tokens&&z.a.get("account").tokens.refresh.token&&z.c.refreshTokensEvery10Minutes()}});case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.state={isOpen:!1,dialogType:"login",dialogTitle:"Login",isVisible:!1,theme:"",maskActive:!1,mediaType:"audio",popoverVisible:!1,lat:0,long:0,city:"",currency:null,location:null,country:"",countrySet:!1,ready:!0,activeCurrency:{},activeCurrencyIsSet:!1,exchangeRate:1,isAuthenticated:!1,account:z.a.get("account"),redirectHome:!1,notifications:[],subscribedProjects:[],messages:[],submitInProgress:!1,unreadMessages:[],allUnread:[],page:{title:"Dashboard",subtitle:"..."}},a.login=a.login.bind(Object(v.a)(a)),a.register=a.register.bind(Object(v.a)(a)),a.logout=a.logout.bind(Object(v.a)(a)),a.toggleDialog=a.toggleDialog.bind(Object(v.a)(a)),a.setDialogToRegister=a.setDialogToRegister.bind(Object(v.a)(a)),a.setDialogToLogin=a.setDialogToLogin.bind(Object(v.a)(a)),a.submitLoginForm=a.submitLoginForm.bind(Object(v.a)(a)),a.submitRegisterForm=a.submitRegisterForm.bind(Object(v.a)(a)),a.refreshTokens=a.refreshTokens.bind(Object(v.a)(a)),a.getLocationData=a.getLocationData.bind(Object(v.a)(a)),a.updateAccount=a.updateAccount.bind(Object(v.a)(a)),a.clearState=a.clearState.bind(Object(v.a)(a)),a.fetchUnreadMessages=a.fetchUnreadMessages.bind(Object(v.a)(a)),a.setPage=a.setPage.bind(Object(v.a)(a)),console.log(" "),console.log("[[ Wrapper props]]",e),console.log(" "),a}return Object(w.a)(t,e),Object(d.a)(t,[{key:"setPage",value:function(e){this.setState({page:e})}},{key:"updateAccount_",value:function(){var e=this;z.c.checkAuth(this).then(function(){var t=Object(p.a)(f.a.mark(function t(a){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.log(a),e.setState({account:z.a.get("account")});case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}},{key:"updateAccount",value:function(e){console.log("updateAccount",e);var t=z.a.get("account");this.setState({account:t})}},{key:"setDialogToRegister",value:function(){this.setState({dialogType:"register",dialogTitle:"Register an account"})}},{key:"setDialogToLogin",value:function(){this.setState({dialogType:"login",dialogTitle:"Login"})}},{key:"toggleDialog",value:function(e){var t=e.title,a=e.type;this.setState({isOpen:!this.state.isOpen,dialogType:a,dialogTitle:t})}},{key:"submitRegisterForm",value:function(){var e=Object(p.a)(f.a.mark(function e(t){var a,n=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("data",t),this.setState({submitInProgress:!0}),"https://dev.iim.technology/v1/auth/register",a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},fetch("https://dev.iim.technology/v1/auth/register",a).then(function(e){return e.json()}).then(function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("[[ Register Response ]]",t),400!==t.code&&401!==t.code){e.next=5;break}Z.a.open({message:"Error",description:t.message}),e.next=13;break;case 5:return z.a.store({label:"authTokens",value:t.tokens}),z.a.store({label:"account",value:t}),z.a.store({label:"isAuthenticated",value:!0}),n.setState({isAuthenticated:!1,account:t}),e.next=11,z.a.userAfterRegistration({self:n,data:t});case 11:n.toggleDialog({type:null,title:null}),n.props.history.push("/confirmaccount");case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"refreshTokens",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t,a,n=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"https://dev.iim.technology/v1/auth/refresh-tokens/",t={refreshToken:z.a.get("account").tokens.refresh.token},a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},e.next=5,fetch("https://dev.iim.technology/v1/auth/refresh-tokens/",a).then(function(e){return e.json()}).then(function(e){if(console.log("[[ Refresh Response ]]",e),400===e.code||401===e.code)Z.a.open({message:"Error",description:e.message});else{var t=z.a.get("account");t.tokens=e,z.a.store({label:"authTokens",value:e}),z.a.store({label:"account",value:t}),z.a.store({label:"isAuthenticated",value:!0}),n.setState({isAuthenticated:!0,account:t}),n.toggleDialog({type:null,title:null});var a=A()((new Date).getTime()),r={start:a,check:a.add(10,"minutes")};z.a.set("loginTimestamps",r)}});case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"login",value:function(){this.toggleDialog({type:"login",title:"Login"})}},{key:"register",value:function(){this.toggleDialog({type:"register",title:"Register your account"})}},{key:"logout",value:function(){var e=z.a.get("env"),t=z.a.get("isMobile");this.clearState(),localStorage.clear(),z.a.store({label:"isAuthenticated",value:!1}),z.a.store({label:"account",value:{tokens:null,user:null}}),z.a.set("env",e),z.a.set("isMobile",t),this.props.history.push("/")}},{key:"clearState",value:function(){this.setState({isAuthenticated:!1,account:null,notifications:[],subscribedProjects:[],messages:[]})}},{key:"fetchUnreadMessages",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t,a=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=z.a.get("account")&&z.a.get("account").user&&z.a.get("account").user.id||null,e.t0="undefined"!==typeof userid,!e.t0){e.next=5;break}return e.next=5,z.c.fetchUnreadMessages({userId:t,self:this}).then(function(e){var t=[],n=!0,r=!1,s=void 0;try{for(var c,o=e[Symbol.iterator]();!(n=(c=o.next()).done);n=!0)for(var i=c.value,l=0,u=Object(vt.a)(i.messages);l<u.length;l++){var f=u[l];t.push(f)}}catch(p){r=!0,s=p}finally{try{n||null==o.return||o.return()}finally{if(r)throw s}}a.setState({unreadMessages:e,allUnread:t})});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getLocationData",value:function(){var e=Object(p.a)(f.a.mark(function e(){var t,a,n=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.c.getGeoLocation();case 2:return t=e.sent,e.next=5,z.c.reverseGeocodeCity({lat:t.lat,long:t.long});case 5:return a=e.sent,e.next=8,z.c.findCurrency({country:a.AdditionalData[0].value}).then(function(e){n.setState({location:a,currency:e,activeCurrencyIsSet:!0})});case 8:e.sent;case 9:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){}},{key:"componentDidMount",value:function(){var e=this;this.getLocationData(),z.e.checkmobile(),z.c.checkAuth(this).then(function(){var t=Object(p.a)(f.a.mark(function t(a){var n,r,s;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.log(a),a&&e.fetchUnreadMessages(),n=a&&z.a.get("account")||null,a&&e.setState({account:n,isAuthenticated:!0}),!a&&e.setState({account:null,isAuthenticated:!1}),a&&n&&n.hasOwnProperty("user")?(r=n&&n.user&&n.user.id,z.c.fetchNotifications({self:e,userId:r}),z.c.fetchSubscribedProjects({self:e,userId:r})):e.setState({ready:!0}),"undefined"!==typeof(s=Nr.parse(window.location.search)).newinvite&&localStorage.setItem("newinvite",JSON.parse(s.newinvite)),"undefined"!==typeof s.referrer&&localStorage.setItem("referrer",s.referrer);case 9:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}},{key:"render",value:function(){var e=this,t=this.state,a=t.ready,n=t.account,s=t.isAuthenticated,c=t.theme,o=t.maskActive,i=t.dialogTitle,l=t.dialogType,u=(t.currency,t.activeCurrencyIsSet),f=t.allUnread,p=this.props,m=p.children,d=p.history;return r.a.createElement(k,null,r.a.createElement("div",null,a&&u?r.a.createElement("section",{id:"Wrapper",className:this.state.theme.main+" rubik trans-a w-100 -h-100 -overflow-hidden -scrollbar -scrollbar-dark"},r.a.createElement(Ce,{value:{history:d,account:n,isAuthenticated:s,updateAccount:this.updateAccount,login:this.login,refreshTokens:this.refreshTokens,register:this.register,logout:this.logout,notifications:this.state.notifications,subscribedProjects:this.state.subscribedProjects,messages:this.state.messages,currency:this.state.currency,location:this.state.location,allUnread:f,setPage:this.setPage}},r.a.createElement("main",{id:"App",className:(z.e.mobile()?" h-100 overflow-hidden ":"  ")+" sans-serif relative db "},r.a.createElement("section",{style:this.state.isAuthenticated?{top:"22vh"}:{top:"0vh"},id:"Main",className:(z.e.mobile()?" h-100 overflow-auto ":"  ")+" content relative flex flex-column -pa4 -pt6 -mw7 center w-100 -h-100"},r.a.createElement("div",{className:("/"===this.props.history.location.pathname||this.state.isAuthenticated?"":" blur ")+" flex relative flex-column w-100 "},m)),"/"!==this.props.history.location.pathname&&!this.state.isAuthenticated&&r.a.createElement(Sr,null),z.e.mobile()?r.a.createElement(hr,{history:d}):r.a.createElement(fr,{history:d}),this.state.isAuthenticated&&r.a.createElement(gr.a,{style:this.state.page?{top:"12vh"}:{top:"22vh"},onBack:function(){console.log("*** ",e.props),e.props.history.goBack()},title:this.state.page.title,subTitle:this.state.page.subtitle,className:"vh10 pv0 ant-page-header fixed flex top-0 left-0 w-100 bn bs-b items-center"},r.a.createElement(qt,{ready:this.state.ready,dashboard:this.props.dashboard,refresh:this.refresh})),z.e.mobile()?r.a.createElement(vr,{theme:c,switchTheme:this.switchTheme,history:d}):r.a.createElement(br,{theme:c,switchTheme:this.switchTheme,history:d}),o?r.a.createElement("div",{className:"trans-a z-1000 mask bg-black-80 fixed top-0 ldft-0 vh-100 w-100 "}):null),r.a.createElement(Be.a,Object.assign({className:"bp3-light",onClose:this.toggleDialog,title:i,onValueChange:this.onValueChange},this.state),r.a.createElement("div",{className:"flex flex-column "},"register"===this.state.dialogType&&r.a.createElement(yr,{setDialogToRegister:this.setDialogToRegister,setDialogToLogin:this.setDialogToLogin,dialogType:l,submitLoginForm:this.submitLoginForm,submitInProgress:this.state.submitInProgress,type:"register"}),"login"===this.state.dialogType&&r.a.createElement(yr,{setDialogToRegister:this.setDialogToRegister,setDialogToLogin:this.setDialogToLogin,dialogType:l,submitLoginForm:this.submitLoginForm,submitInProgress:this.state.submitInProgress,type:"login"}),"forgotpassword"===this.state.dialogType&&r.a.createElement(yr,{setDialogToRegister:this.setDialogToRegister,setDialogToLogin:this.setDialogToLogin,dialogType:l,submitInProgress:this.state.submitInProgress,type:"forgotpassword"}))))):null))}}]),t}(r.a.Component),Sr=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"hover-slide-up trans-a flex flex-column items-center justify-center fixed top-0 left-0 h-100 w-100 bg-black-50 z-9"},r.a.createElement("span",{className:"f4 fw5 white-60"},"You have been logged out. Please log in again.")))};window.Fn=z.d,window.logged=[],rr.a.start();var Cr=function(){return r.a.createElement(l.b,{history:i},r.a.createElement("div",{id:"App",className:" flex flex-column h-100"},r.a.createElement(Or,{history:i},r.a.createElement(tr.Helmet,null,r.a.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=0.7,maximum-scale=1,minimum-scale=0.7"}),r.a.createElement("meta",{charSet:"utf-8"}),r.a.createElement("title",null,nr.siteMeta.title),r.a.createElement("meta",{name:"description",content:nr.siteMeta.description}),r.a.createElement("link",{rel:"canonical",href:nr.siteMeta.siteUrl}),r.a.createElement("link",{rel:"manifest",href:"/manifest.json"}),r.a.createElement("script",{src:"https://cdnjs.cloudflare.com/ajax/libs/aws-sdk/2.304.0/aws-sdk.min.js"})),r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/",component:Yn}),r.a.createElement(l.a,{exact:!0,path:"/home",component:_e}),r.a.createElement(l.a,{exact:!0,path:"/dashboard",component:Xn}),r.a.createElement(l.a,{exact:!0,path:"/network",component:ct}),r.a.createElement(l.a,{exact:!0,path:"/project/:id",component:Tn}),r.a.createElement(l.a,{exact:!0,path:"/myprojects",component:Kt}),r.a.createElement(l.a,{exact:!0,path:"/messages",component:It}),r.a.createElement(l.a,{exact:!0,path:"/calendar",component:Ja}),r.a.createElement(l.a,{exact:!0,path:"/notifications",component:$t}),r.a.createElement(l.a,{exact:!0,path:"/profile",component:Xa}),r.a.createElement(l.a,{exact:!0,path:"/account",component:Je}),r.a.createElement(l.a,{path:"/user/:id",component:Rn}),r.a.createElement(l.a,{path:"/confirmaccount",component:$n}),r.a.createElement(l.a,{path:"/confirm",component:er}),r.a.createElement(l.a,{path:"*",component:ar})))))};window.Fn=z.d,c.a.render(r.a.createElement(Cr,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},89:function(e,t,a){"use strict";var n=a(2),r=a.n(n),s=a(4),c=(a(5),a(13),a(37)),o=a.n(c),i={};i.SendNotification=function(){var e=Object(s.a)(r.a.mark(function e(t){var a,n,s,c,i,l,u,f;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("mailsend.SendNotification",t),a=t.user,n=t.content,s=t.subject,c=t.title,console.log(""),i={to:a.email,subject:s,userFirstName:a.profile.name.first,userLastName:a.profile.name.last,userAvatar:a.profile.picture,content:n,title:c},console.log("body",i),l={method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},body:{}},u={apiKey:"15b3483f-bc64-4feb-9e8e-e3909ca8646f",from:o.a.email.systemEmail,to:i.to,bodyText:i.content,merge_content:i.content,template:"crew20_notification",isTransactional:!0,merge_title:i.title,merge_senderfirstname:i.senderFirstName,merge_senderlastname:i.senderLastName,subject:i.subject,fromName:o.a.email.fromName,msgFromName:o.a.email.fromName,replyTo:o.a.email.systemEmail,sender:o.a.email.fromName},console.log("User Mailsend data",u),f="https://api.elasticemail.com/v2/email/send?apikey="+u.apiKey+"&from="+u.from+"&to="+u.to+"&template="+u.template+"&isTransactional="+i.isTransactional+"&bodyText="+u.bodyText+"&merge_content="+u.merge_content+"&merge_usernamefirst="+u.merge_usernamefirst+"&merge_usernamelast="+u.merge_usernamelast+"&merge_email="+u.merge_email+"&subject="+u.subject+"&fromName="+u.fromName+"&msgFromName="+u.msgFromName+"&replyTo="+u.replyTo+"&sender="+u.sender,e.next=11,fetch(f,l).then(function(e){return e.json()}).then(function(e){return console.log("mailsend.reservationRequestNotification Request succeeded with JSON response",e),e}).catch(function(e){return console.log("mailsend.reservationRequestNotification Request failed",e),e});case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),i.SendConfirmationEmail=function(){var e=Object(s.a)(r.a.mark(function e(t){var a,n,s,c,i,l,u,f,p;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("mailsend.SendNotification",t),a=t.user,n=t.subject,s=t.title,c=t.content,i=t.link,console.log(""),l={to:a.email,subject:n,title:s,content:c,link:i},console.log("body",l),u={method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},body:{}},f={apiKey:"15b3483f-bc64-4feb-9e8e-e3909ca8646f",from:o.a.email.systemEmail,to:l.to,bodyText:l.content,merge_content:l.content,template:"crew20_confirmationemail",isTransactional:!0,merge_title:l.title,subject:l.subject,fromName:o.a.email.fromName,msgFromName:o.a.email.fromName,replyTo:o.a.email.systemEmail,sender:o.a.email.fromName,merge_link:l.link},console.log("User Mailsend data",f),p="https://api.elasticemail.com/v2/email/send?apikey="+f.apiKey+"&from="+f.from+"&to="+f.to+"&template="+f.template+"&isTransactional="+l.isTransactional+"&bodyText="+f.bodyText+"&merge_title="+f.merge_title+"&merge_content="+f.merge_content+"&merge_link="+f.merge_link+"&subject="+f.subject+"&fromName="+f.fromName+"&msgFromName="+f.msgFromName+"&replyTo="+f.replyTo+"&sender="+f.sender,e.next=11,fetch(p,u).then(function(e){return e.json()}).then(function(e){return console.log("mailsend.SendConfirmationEmail Request succeeded with JSON response",e),e}).catch(function(e){return console.log("mailsend.SendConfirmationEmail Request failed",e),e});case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),i.SendEmail=function(){var e=Object(s.a)(r.a.mark(function e(t){var a,n,s,c,i,l,u,f,p;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("mailsend.SendPasswordReset",t),a=t.user,n=t.subject,s=t.title,c=t.content,i=t.link,console.log(""),l={to:a.email,subject:n,title:s,content:c,link:i},console.log("body",l),u={method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},body:{}},f={apiKey:"15b3483f-bc64-4feb-9e8e-e3909ca8646f",from:o.a.email.systemEmail,to:l.to,bodyText:l.content,merge_content:l.content,template:"crew20_confirmationemail",isTransactional:!0,merge_title:l.title,subject:l.subject,fromName:o.a.email.fromName,msgFromName:o.a.email.fromName,replyTo:o.a.email.systemEmail,sender:o.a.email.fromName,merge_link:l.link},console.log("User Mailsend data",f),p="https://api.elasticemail.com/v2/email/send?apikey="+f.apiKey+"&from="+f.from+"&to="+f.to+"&template="+f.template+"&isTransactional="+l.isTransactional+"&bodyText="+f.bodyText+"&merge_title="+f.merge_title+"&merge_content="+f.merge_content+"&merge_link="+f.merge_link+"&subject="+f.subject+"&fromName="+f.fromName+"&msgFromName="+f.msgFromName+"&replyTo="+f.replyTo+"&sender="+f.sender,e.next=11,fetch(p,u).then(function(e){return e.json()}).then(function(e){return console.log("mailsend.SendConfirmationEmail Request succeeded with JSON response",e),e}).catch(function(e){return console.log("mailsend.SendConfirmationEmail Request failed",e),e});case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),i.SendPasswordReset=function(){var e=Object(s.a)(r.a.mark(function e(t){var a,n,s,c,i,l,u,f,p;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("mailsend.SendPasswordReset",t),a=t.user,n=t.subject,s=t.title,c=t.content,i=t.link,console.log(""),l={to:a.email,subject:n,title:s,content:c,link:i},console.log("body",l),u={method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},body:{}},f={apiKey:"15b3483f-bc64-4feb-9e8e-e3909ca8646f",from:o.a.email.systemEmail,to:l.to,bodyText:l.content,merge_content:l.content,template:"crew20_confirmationemail",isTransactional:!0,merge_title:l.title,subject:l.subject,fromName:o.a.email.fromName,msgFromName:o.a.email.fromName,replyTo:o.a.email.systemEmail,sender:o.a.email.fromName,merge_link:l.link},console.log("User Mailsend data",f),p="https://api.elasticemail.com/v2/email/send?apikey="+f.apiKey+"&from="+f.from+"&to="+f.to+"&template="+f.template+"&isTransactional="+l.isTransactional+"&bodyText="+f.bodyText+"&merge_title="+f.merge_title+"&merge_content="+f.merge_content+"&merge_link="+f.merge_link+"&subject="+f.subject+"&fromName="+f.fromName+"&msgFromName="+f.msgFromName+"&replyTo="+f.replyTo+"&sender="+f.sender,e.next=11,fetch(p,u).then(function(e){return e.json()}).then(function(e){return console.log("mailsend.SendConfirmationEmail Request succeeded with JSON response",e),e}).catch(function(e){return console.log("mailsend.SendConfirmationEmail Request failed",e),e});case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),i.InviteByEmail=function(){var e=Object(s.a)(r.a.mark(function e(t){var a,n,s,c,i,l,u,f,p,m,d;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("mailsend.SendNotification",t),a=t.link,n=t.receiverEmail,s=t.subject,c=t.title,i=t.content,l=t.projectTitle,u=t.projectStartDate,console.log(""),f={to:n,subject:s,content:i,title:c,projectTitle:l,projectStartDate:u,link:a},console.log("body",f),p={method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},body:{}},m={apiKey:"15b3483f-bc64-4feb-9e8e-e3909ca8646f",from:o.a.email.systemEmail,to:f.to,bodyText:f.content,merge_content:f.content,template:"crew20_inviteByEmail",isTransactional:!0,merge_title:f.title,merge_projectStartDate:f.projectStartDate,merge_projectTitle:f.projectTitle,merge_link:f.link,subject:f.subject,fromName:o.a.email.fromName,msgFromName:o.a.email.fromName,replyTo:o.a.email.systemEmail,sender:o.a.email.fromName},console.log("User Mailsend data",m),d="https://api.elasticemail.com/v2/email/send?apikey="+m.apiKey+"&from="+m.from+"&to="+m.to+"&template="+m.template+"&isTransactional="+f.isTransactional+"&bodyText="+m.bodyText+"&merge_content="+m.merge_content+"&merge_projectTitle="+m.merge_projectTitle+"&merge_projectStartDate="+m.merge_projectStartDate+"&merge_title="+m.merge_title+"&merge_link="+m.merge_link+"&subject="+m.subject+"&fromName="+m.fromName+"&msgFromName="+m.msgFromName+"&replyTo="+m.replyTo+"&sender="+m.sender,e.next=11,fetch(d,p).then(function(e){return e.json()}).then(function(e){return console.log("mailsend.inviteByEmail Request succeeded with JSON response",e),e}).catch(function(e){return console.log("mailsend.inviteByEmail Request failed",e),e});case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),t.a=i},98:function(e){e.exports=JSON.parse('[{"name":"January","short":"Jan","number":1,"days":31},{"name":"February","short":"Feb","number":2,"days":29},{"name":"March","short":"Mar","number":3,"days":31},{"name":"April","short":"Apr","number":4,"days":30},{"name":"May","short":"May","number":5,"days":31},{"name":"June","short":"Jun","number":6,"days":30},{"name":"July","short":"Jul","number":7,"days":31},{"name":"August","short":"Aug","number":8,"days":31},{"name":"September","short":"Sep","number":9,"days":30},{"name":"October","short":"Oct","number":10,"days":31},{"name":"November","short":"Nov","number":11,"days":30},{"name":"December","short":"Dec","number":12,"days":31}]')}},[[413,1,2]]]);
//# sourceMappingURL=main.f57067e5.chunk.js.map