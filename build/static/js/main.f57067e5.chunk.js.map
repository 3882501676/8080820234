{"version":3,"sources":["utils/util/notifications.js","utils/init.js","utils/themes.js","utils/config/app.config.js","utils/fn/alertMessages.js","utils/methods/index.js","utils/fn/Fn.js","serviceWorker.js","utils/history.js","components/Layouts/Transition.js","CurrencyContext.js","components/elements/display/projects/list/GridItem.js","components/elements/display/projects/list/index.js","components/elements/layout/PageTitle_B.js","components/elements/display/messages/messagebox1.js","components/elements/display/data/ReservationConfirmation.js","utils/methods/mail.js","components/elements/display/forms/ReservationForm.js","components/elements/display/forms/ReservationFormWrapper.js","components/elements/display/drawers/ProjectInfo.js","components/elements/display/forms/LocationSearchForm.js","components/elements/display/forms/_fn.js","components/elements/display/onboarding/__AccountType.js","components/elements/display/forms/LocationSearchFormWrapper.js","components/elements/display/onboarding/__ProfileUser.js","components/elements/display/onboarding/Two.js","components/elements/display/forms/LocationSearchBar.js","components/elements/display/onboarding/One.js","components/elements/display/onboarding/Three.js","components/elements/display/onboarding/OnboardingSteps.js","utils/context/AccountContext.js","components/elements/display/onboarding/OnboardingScreen.js","components/elements/forms/ProjectSearch.js","components/elements/Loading.js","components/Pages/General/Home.js","components/Pages/Account/Account/index.js","components/elements/display/notifications/listItem.js","components/elements/display/notifications/index.js","components/a/UserList/index.js","components/a/_Elements/Bio/Bio.jsx","components/elements/display/messages/messagebox2.js","components/elements/display/drawers/notificationDrawer.js","components/Pages/General/Network/index.js","components/elements/upload/Filepond.js","components/elements/display/messages/CommentListItem.js","components/elements/display/messages/MBox.js","components/a/Conversations/ConversationItem/index.js","components/Pages/General/Messages/index.js","components/a/Projects/index.js","components/a/ProjectCalendar/index.js","components/a/FormCreateProject/index.js","components/a/CrewFinder/Two.js","components/a/CrewFinder/One.js","components/a/CrewFinder/Three.js","components/a/CrewFinder/OnboardingSteps.js","components/a/CrewFinder/index.js","components/a/Refresh/index.js","components/Pages/General/MyProjects.js","components/Pages/General/Notifications/types.js","components/Pages/General/Notifications/index.js","components/a/FormBio/index.js","components/a/FormProfile/index.js","components/a/FormPortfolioProject/index.js","components/a/FormSkills/index.js","components/a/_Elements/SectionTitle/SectionTitle.jsx","components/a/RecentWork/index.js","components/a/RecentWorkArchive/index.js","components/a/ProjectCalendar2/index.js","components/elements/display/forms/LocationSearchBar2.js","components/elements/forms/AddEvent.js","components/a/ViewEvent/One.js","components/a/ViewEvent/Two.js","components/a/ViewEvent/Three.js","components/a/ViewEvent/index.js","components/a/ViewEvent/OnboardingSteps.js","components/elements/display/messages/messageboxProject.js","components/a/Discussion/event.js","components/a/Files/index.js","components/a/Schedule/person.js","components/a/Schedule/index.js","components/Pages/General/Calendar/index.js","components/a/_Elements/Network/Network.jsx","components/a/_Elements/index.js","components/Pages/General/OwnProfile.js","components/a/Discussion/index.js","components/a/Settings/index.js","components/a/CrewFinder/CrewFinder_People.js","components/elements/forms/Invite.js","utils/constants.js","components/a/Person/index.js","components/a/People/UserDetail.js","components/a/FormUserDetailProject/index.js","components/a/People/UserDetailProject.js","components/a/People/index.js","components/a/UserList/forRateSheet.js","components/a/UserList/minimal.js","components/a/RateCalculator/index.js","components/a/Checklist/index.js","components/elements/forms/AddItineraryItem.js","components/a/Itinerary/index.js","components/Pages/General/SingleProject.js","components/Pages/General/ViewProfile.js","components/elements/layout/WelcomeScreen.js","components/a/ProjectFinder/One.js","components/a/ProjectFinder/Two.js","components/a/ProjectFinder/Three.js","components/a/ProjectFinder/OnboardingSteps.js","components/a/ProjectFinder/index.js","components/Pages/General/Welcome.js","components/a/Stats/index.js","components/a/NetworkActivity/index.js","components/Pages/General/Messages/UnreadMessages.js","components/Pages/General/Dashboard.js","components/Pages/Utility/ConfirmAccount.js","components/Pages/Utility/ConfirmAccountConfirmed.js","components/Pages/Utility/NotFound.js","components/elements/layout/Header.js","components/elements/layout/HeaderMobile.js","components/elements/layout/Footer.js","components/elements/layout/FooterMobile.js","utils/context/CurrencyContext.js","utils/auth/react-auth0-spa.js","utils/ui/classses.js","components/a/FormLogin/index.js","utils/util/constants.js","components/a/FormRegister/index.js","utils/util/index.js","utils/util/__.js","Wrapper.js","App.js","index.js","utils/methods/mailSend.js"],"names":["notificationTypes","prodCrewInvite","__","console","log","user","title","content","data","icon","createdAt","Date","read","owner","crewInvite","id","crewInviteAccept","sender","name","first","last","project","crewInviteReject","message","substring","applicationReject","applicationApprove","crewApplication","applicant","connectRequest","receiverId","connectDeny","addToChatGroup","eventInvite","eventInviteAccept","event","eventInviteReject","window","initialise","initialiseState","theme","main","colorScheme","color","bg","accent","dark","light","font","primary","other","other1","projects","conversations","notifications","messages","localStorage","getItem","baseCurrency","JSON","parse","setGlobal","activeCurrency","activeCurrencyIsSet","setItem","stringify","gs","appconfig","api","prod","hydrate","module","exports","siteRoot","siteMeta","author","image","description","siteUrl","social","twitter","postsPerPage","dev","email","systemEmail","fromName","maps","apiKey","mailjet","api_key","api_secret","mailgun","alertMessages","status","info","warning","danger","methods","extendUser","a","auth0User","profile","config","type","onboardingcomplete","location","preferredCurrency","contact","phone","grade","bio","role","connections","additional","ratings","rating","skills","user_","password","auth0","store","insert","endpoint","apiUrl","method","headers","body","fetch","then","res","json","query","length","payload","globalData","getGlobal","call","post","call2","fetchCollection","self","setState","something","collection","fetchConversations","updateDoc","doc","state","_id","syncActiveDoc","activeItem","syncDoc","updateActiveProject","url","fetchProjects","refresh","setTimeout","checkIfConversationExists","recipientID","conversationExists1","item","participants","includes","exists","currentUserId","sub","newConversation","Math","random","toString","substr","push","postCollection","findConversation","userID","db","find","$and","e","r","success","Set","app","get","label","set","value","fetchUnreadMessages","Promise","resolve","userId","unread","seen","filter","conversation","add","Fn","checkConversationExists","selfUserId","recipientId","url1","url2","conv1","conv2","item_","id_","c","match","updateConversation","updateTimestamp","updatedAt","lastUpdate","conversation_","props","index","findIndex","updateActiveConversation","activeConversation","findCurrency","country","err","currency","currencies","reverseGeocodeCity","lat","long","Response","View","Result","Location","Address","AdditionalData","getGeoLocation","setPosition","data_","coords","latitude","longitude","navigator","geolocation","getCurrentPosition","createProject","top","duration","maxCount","loading","createProjectMain","createProjectConversations","createProjectCalendar","createProjectRoster","p","projectName","projectType","start_date","projectDate","end_date","projectEndDate","positions","address","county","crew","productionCrew","permissions","comments","invited","shortlist","checklists","threads","getDates","days","createProjectConversation","projectOwner","conversationId","conv","day","updateProject","updateProjectConversations","monthNames_","months","days_","monthName","moment","format","monthNames","month","days__","itinerary_","items","slots","Array","fill","month__","itinerary","calendar","crewRoster","rosterItem","rate","selected","lastFetch","lastFetchTime","time","checkAuth","clear","env","ui","checkmobile","history","isAuthenticated","setEnv","process","NODE_ENV","insertNotification","sendNotification","mailsend","SendNotification","subject","sendConfirmationEmail","link","protocol","host","SendConfirmationEmail","sendWelcomeEmail","SendWelcomeEmail","fetchNotifications","ready","fetchProductionCrew","prodCrew","productionCrew_","fetchConfirmedCrew","crew_","isDeleting","isDeletingStart","deleteConfirmation","fetchInvitedCrew","invited_","inviteByEmail","position","invitation","receiverEmail","projectTitle","projectStartDate","InviteByEmail","sent","notification","open","inviteBusy","inviteByEmailAddress","current","inviteByUser","updateNotification","createNetworkNotification","createNotification","Authorization","tokens","access","token","updateEvent","checkConfirmed","isConfirmed","createNewConversation","fetchSubscribedProjects","fetchEvents","createEvent","isOpen","reload","startDate","stopDate","dateArray","end","isBefore","refreshTokensEvery10Minutes","setInterval","refreshTokens","account","refreshToken","code","start","getTime","loginTimestamps","check","confirmAccount","confirmed","setConfirmed","updateUser","fetchConnections","lastfetch","util","shouldFetchNewData","connections_","addProductionCrewMember","fetchUser","projectOwnerData","picture","crewMember","response","notification_","mobile","matchMedia","matches","elapsed","diff","unique","array","uniqueArray","from","saveSnapShot","fetchAuthors","authorIds","authors","authorId","authorData","base","fetch_","fetchAndSet","apiBase","getUser","users","isArray","storedUsers","userExists","stored","fetchInvitedUsers","invitedUsers","users_","fetchShortlistedUsers","approveCrewApplication","application","load","fetchScheduleUsers","people","people_","fetchUsers","positions_","searchLoading","connectionsReady","fetchApplicantData","applicants","applicants_","applications","fetchApplications","applyForPosition","buttonLoading","drawerVisible","fetchCrew_","next","nextIndex","nextIndex_","fetchProjectOwner","logged","fetchh","_","fetchProject","projectId","fetchCrew","fetchProject__","logger","text","ok","hasOwnProperty","userIsOwner","drawerReady","activeProject","fetchCommentAuthors","conversationReady","document","getElementById","scroll","left","behavior","fetchCommentAuthor","b","filterSubscribedProjects","subscribedProjects","subscribed","subscribedProjectsReady","fetchOwnProjects","currentDate","crewBuilder","hasBeenUploaded","destroy","addUserToProject","closeDialog","placement","fetchAuthor","updateProjectComments","hideDrawer","activeTab","projectInfoVisible","submitBio","context","updateAccount","updateSkills","submitProfile","firstname","lastname","dob","gender","submitPortfolioItem","addToNetwork","requestUserId","pending","network","distinctConnections","distinctPending","apiUrl1","AddToNetworkButtonLoading","userData","connections1","distinctConnections1","config1","options","dbInitData","storageProvider","initUrl","logPrimary","join","logInfo","loggerColorScheme","alert","hydrateDataFromLocalstorage","layout","alerts","getLocallyStoredAlerts","getTheme","dummyScript","test","Alerts","shift","mv","snapshots","sampleData","initialValues","initial","hydrateFromLocalstorage","Startup","checkExists","values","checkInterval","run","size","clearInterval","createMessagesDB","createNotificationsDB","createAlertsDB","getCollectionEndpointUrl","storageProviderUrl","createAlert","filterJSON","Number","isInteger","sleep","fn","milliseconds","key","countrySet","city","County","suburb","District","province","State","searchFormReady","findLocation","searchTerm","showDrawer","userAfterRegistration","cv","file","uploaded","uploadProfileImage","fileUrl","createFileConversation","uploadEventFiles","parent","convRes","file__","uploadedBy","files","uploadProjectFiles","fileType","uploadProjectAvatar","media","video","images","unshift","uploadCV","uploadWorkPortfolioImage","portfolioImage","modifyUsers","extractAuthors","fetchRecipientData","getRecipientId","userIndex","indexOf","splice","updateConversationMessages","activeConversationIndex","createGroupConversation","u","map","group","deleteAllConversations","modifyProjects","admins","roles","canEditCrew","canEditProject","canManageFiles","canEditCalendar","accepted","deleteConversation","convId","modifyConversations","events","deleteEvents","eurl","eurl1","deleteProjects","deleteConversations","Boolean","hostname","createBrowserHistory","Box","posed","div","hidden","opacity","visible","TransitionLayout","isVisible","this","className","pose","children","React","Component","CurrencyContext","createContext","Provider","Consumer","GeoPattern","require","GridItem","avatar","bind","to","style","height","backgroundImage","generate","toDataUrl","trigger","deadline","iconSize","List","section","x","delayChildren","staggerChildren","closed","delay","Item","y","ListProjects","toggle","col","updateActiveDoc","activeDoc","docs","showInsertForm","showButton","fontWeight","marginLeft","background","onClick","ItemC","forwardRef","ref","avatarAuthor","fromNow","enter","transition","stiffness","damping","default","exit","ease","restDelta","restSpeed","TransitionItems","animateOnMount","enterAfterExit","beforeChildren","MessageBox1","onClose","onChange","target","chef","characters","recipient","showWidget","checkUploadResult","goToTab1","tabOnChange","submitMessage","getRecipientDetail","insertMessage","messageText","createRef","preventDefault","apiurl","convID","update","widget","resultEvent","given_name","family_name","onSubmit","required","placeholder","ReservationConfirmationScreen","confirm","cancel","submitReservationRequest","reservationData","closeReservationScreen","date","timeStart","timeEnd","symbol","round","parseInt","extended","exchangeRate","cost","additionalCharges","totalCost","mail","ReservationRequestUser","ChefReservationRequestNotification","confirmationEmailSubject","reservationCancellationNotification","reservationConfirmationNotification","reservationRequestConfirmation","reservationDeniedConfirmation","userRegistration","userWelcomeEmail","passwordReset","passwordResetConfirmation","newMessage","ReservationForm","formData","startTime","endTime","selectedDate","timeRounded","saveFormData","submit","timeOnChangeEnd","timeOnChangeStart","dateOnChange","stopPropagation","start_","hours","showReservationConfirmationScreen","setHours","getHours","getMinutes","setMinutes","roundMinutes","defaultTime","defaultValue","showArrowButtons","useAmPm","TabPane","Tabs","ReservationFormWrapper","reservationCost","showConfirmationScreen","openNotification","checkMultipleDays","daysCount","clearReservationForm","sendChefReservationConfirmationEmail","sendUserReservationConfirmationEmail","setDaysCount","addFormData","reservationDate","reservationTime","reservationHours","checked","count","keys","UserReservationRequestNotification","reservations","error","reservationID","hideInnerDrawer","ReservationConfirmation","defaultActiveKey","tabPosition","tab","specialties","cuisines","active","ProjectInfo","showChildrenDrawer","childrenDrawer","specialtiesDrawerVisible","itemDetailDrawerVisible","goToTab2","toggleSpecialtiesDrawer","toggleItemDetailDrawer","doc_","width","closable","activeKey","disabled","allowHalf","reputation","LocationSearchForm","increase","percent","handleSearch","searchResults","handleChange","progressBarPercent","progressBarActive","searchAttempts","abind","submitSearch","origin","mode","suggestions","locationSet","fetchChefs","strokeColor","showInfo","setLocation","_fn","OnboardingAccountType","setAccountType","OnboardingProfileChef","Steps","Step","mobileNumber","saveStep2","handleDateChange","accountType","rows","minDate","maxDate","prev","LocationSearchBar","updateProjectLocation","OnboardingProfileChef_Rate","saveStep1","OnboardingProfileChef_Extended","cuisines_","skills_","insertSkill","addSkillInput","saveStep3","specOnChange","OnboardingSteps","saveOnboardingData","steps","accountTypeIsSet","AccountContext","AccountProvider","AccountConsumer","OnboardingScreen","newAccountType","redirectProfile","contextType","RangePicker","DatePicker","MonthPicker","FormProjectSearch","endDate","searchProjects","handleRangeChange","fetchProjects2","Loading","Transition","Home","showModal","insertModalVisible","handleOk","handleCancel","toMessages","showLocationForm","showOnboardingScreen","searchCity","focusLocationSearch","reserve","sendMessage","openSearchDialog","location_","toLowerCase","filterByLocation","filterByType","filterByDateRange","isBetween","buttons","action","setPage","subtitle","querySelector","Empty","PRESENTED_IMAGE_SIMPLE","locationIsSet","close","dialogTitle","Account","componentDidMount","Currencies","hasError","drawerOpen","lightboxActive","currencyOnChange","userEmailAddress","userMobilePhone","toggleDrawer","activeFile","originalname","toggleLightbox","ListItem","ListNotifications","container","show","UserList","variants","animate","columns","transitionDelay","confirmDelete","remove","Bio","createBio","canEdit","editBio","Skills","editSkills","NotificationDrawer","Network","activeUser","del","userLocation","activeCrewMember","crewItemIndex","invitedItemIndex","reloadProject","innerDrawerOpen","drawerType","docInfoVisible","padding","userAvatar","registerPlugin","FilePondPluginFileRename","FilePondPluginImageExifOrientation","FilePondPluginImagePreview","Filepond","handleInit","updateFile","handlePondFile","onProcessFile","renameFile","filename","now","fieldName","metadata","progress","abort","transfer","pond","getFile","setImage","allowMultiple","oninit","fileRenameFunction","onprocessfile","onupdatefile","multiple","server","CommentListItem","isSameAuthorAsPreviousComment","isMe","messageIsSameDayAsPrevious","checkForUrls","replace","urlify","me","previous","previousCreatedAt","isSame","as","inView","entry","markAsSeen","MBox","socket","addMessage","stream","initSocketConnection","onClientDisconnected","onReconnection","setupSocketListeners","onMessageRecieved","onConnect","scrollMessageBoxIntoView","getAuthors","messagesList","author_","dashboard","isSendingMessage","scrollHeight","randomId","messageId","emit","on","io","connect","scrollMessages","inputPosition","Messages","markAllAsSeen","activeStream","streams","toggleDialog","openFilePanel","selectConversation","setActiveConversation","activateSearch","newConveration","groupChat","newChat","addUserToGroupChat","startGroupChat","messageFullScreen","chatGroupName","elem","webkitFullscreenElement","webkitCancelFullScreen","webkitRequestFullScreen","groupName","dialogType","conversationExists","messageSearchActive","filtered","sort","borderRadius","boxShadow","isActive","maxHeight","overflow","class","onClear","onFocus","onBlur","onCancel","showCancelButton","ProjectCalendar","createDays","currentMonthString","currentMonth","year","months_","projectEvents","ownEvents","projectsWithDates","contextMenuOpen","eventsReady","projectsReady","calendarDataReady","calendarRefresh","existingEntries","getMonthDateRange","projectImage","toggleStyle","onSelectSlot","checkForNewEntry","itemId","allEventsForDay","___","dates","setDrawerData","subtract","dates_","schedule","tz","toDate","toBase64","endOf","daysInMonth","dateRange","month_","headerType","index_","onMouseEnter","toLocaleDateString","filled","index__","onSelectEvent","One","Select","Option","handleStartDateChange","warn","handleEndDateChange","submitLoading","reset","href","defultValue","Three","CrewFinder","openDialog","toggleCreateProject","saveAndCreateAccount","saveAndCreateAccountButtonLoading","Refresh","MyProjects","ownProjectsReady","ownProjects","activeButton","filters","favourites","addToCrewButtonLoading","addToFavButtonLoading","filterProjects","submitProject","addToCrew","addToFavourites","favourite","s","onboardingProfile","function","button","ownprojects","today","isAfter","pOwn","pSub","setButtons","onValueChange","addToNetworkButtonLoading","Notifications","activeNotification","showButtons","type_","setReady","FormBio","FormProfile","getDerivedStateFromProps","nextProps","prevState","getSnapshotBeforeUpdate","prevProps","componentDidUpdate","componentWillUnmount","handleRadioChange","inline","selectedValue","large","FormPortfolioProject","FormSkills","SectionTitle","labels","functionButton","backgroundColor","RecentWork","getCompletedProjects","completedProjects","archive","completed","RecentWorkArchive","addRecentWorkProject","DragAndDropCalendar","withDragAndDrop","Calendar","localizer","momentLocalizer","ProjectCalendar2","calendarFilter","createCalendar","getOwnEvents","getProjectEvents","events_","m","projectMonth","projectStart","projectEnd","number","day_","entries","monthIndex","daysList","dayIndex","defaultView","Views","MONTH","defaultDate","toolbar","selectable","onEventDrop","moveEvent","LocationSearchBar2","houseNumber","street","district","AddEvent","eventData","addEvent","disabledRangeTime","range","eventTitle","eventForm","result","i","disabledHours","disabledMinutes","disabledSeconds","showTime","ViewEvent","MessageBoxProject","projectOwnerId","EventDiscussion","fetchConversation","loadingAlign","Files","reverse","mboxActive","toggleInnerDrawer","backgroundSize","src","mainSrc","nextSrc","prevSrc","onCloseRequest","Peson","person","Schedule","peopleReady","Calendar_","resizeEvent","pathname","activeEvent","innerDrawerOpen2","insertEventLocation","newEvent","views","activeView","userIsAdmin","calendarReady","activeConversationId","onSelectEvent2","getClickPosition","dateClick","setView","checkRoles","eventImage","timeOnChange","insertScheduleItem","addUserToEvent","insertScheduleItem2","fullCalendar","scheduleTitle","scheduleDescription","scheduleLocation","scheduleForm","projectCalendar","allevents","scheduleItem","eventType","updatedEvent","isAllDay","allDay","getApi","hour","minute","second","slot","view","selectAllOnFocus","networkPending","navigateToUser","isCurrentUser","Bio_","SectionTitle_","Network_","OwnProfile","chefInfoVisible","uploadType","AddToProjectButtonLoading","recentWorkProjects","addToProject","networkSeeAll","editProfile","Discussion","Settings","handleProjectTypeChange","TextTrackCueList","projectDescription","projectSettingsView","projectSettingsActiveButton","archived","CrewFinder_People","save","search","bulkSearch","FormInvite","emailAddress","constants","findCity","Person","inviteToProject","crewItem","projectOwner_","showUserProfile","UserDetail","FormUserDetailProject","selectedUserId","selectedProdCrewMember","projectSpecificDetails","UserDetailProject","People","setPermissionTypes","buttonsReady","crewReady","productionCrewReady","crewProfileType","profileDrawerType","permissionTypes","closeInnerDrawer","setPanelView","setPermission","activeUserId","prodCrewItem","has","slug","delete","updateProjectState","itemIndex","rosterItemIndex","placeholderImage","filteredDateRange","connectionIds","sorted","setRate","setDays","RateCalculator","calculateTotal","delaySaveActive","total","crewDays_","delaySaves","updateTotal","checkDay","delaySave","saveInterval","Checklist","activeChecklist","checklistsReady","checkListItemLabelInputError","setChecklist","addChecklist","addChecklistItem","updateChecklistTitle","checkItem","checklistTitle","checklistItemLabel","checklist","newChecklist","AddItineraryItem","defaultOpenValue","extendMoment","Moment","Itinerary","createTimeSlots","timeSlots","handleDoubleClick","handleClick","itenIndex","slotIndex","timeSlot","timeSlot_","selectedTime","by","excludeEnd","iten","SingleProject","fetchProjectData","checkUserPermissions","ownerId","params","drawerItem","acceptingInvitation","invitationAccepted","isProjectOwner","currentUserPermissions","crewPositionProfile","checkIsOwner","openFileUploadDialog","acceptInvitation","setFullScreen","test12","permission","crewMemberId","isProdCrew","zIndex","minWidth","mainColumn","drawerTitle","NoPermissions","ViewProfile","WelcomeScreen","selectType","typeSelected","backgroundRepeat","backgroundPosition","ProjectFinder","Welcome","filteredProjects","openDrawer","fav","register","toUpperCase","c_","Stats","stats","allUnread","NetworkActivity","welcomeText","Dashboard","viewsReady","shouldCompleteProfile","checkProfileStatus","hide","showWelcome","ConfirmAccount","queryString","login","parsed","NotFound","mainMenuListClass","menuItemClass","mainMenu","profileMenu","logout","Header","shape","fontSize","isLeaf","HeaderMobile","onSelect","opt","handleVisibleChange","onMaskClick","initData","toggleMenu","loadingEl","level","documentElement","clientHeight","display","justifyContent","rightContent","leftContent","onLeftClick","Footer","formClassnames","formLabel","formLabel1","formInput","formInputDateRange","formRow","buttonSpan","formTitle","formButtonWrapper","formButtonWrapperInner","loginv2","inputSquare","inputRound","FormLogin","demoUser","submitLoginForm","setDialogToRegister","setDialogToLogin","base2","getGeolocation","fetchExchangeRate","App","submitInProgress","submitData","maskActive","mediaType","popoverVisible","redirectHome","unreadMessages","page","submitRegisterForm","getLocationData","clearState","isMobile","userid","currency_","newinvite","referrer","onBack","goBack","subTitle","FooterMobile","switchTheme","LoggedOut","Wrapper","Helmet","charSet","rel","exact","path","component","ConfirmAccountConfirmed","ReactDOM","render","serviceWorker","registration","unregister","userFirstName","userLastName","config_","bodyText","merge_content","template","isTransactional","merge_title","merge_senderfirstname","senderFirstName","merge_senderlastname","senderLastName","msgFromName","replyTo","merge_usernamefirst","merge_usernamelast","merge_email","catch","merge_link","SendEmail","SendPasswordReset","merge_projectStartDate","merge_projectTitle"],"mappings":"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","file":"static/js/main.f57067e5.chunk.js","sourcesContent":["const dataModel = {\n    data: {\n        info: 'contains associated project, conversation or event data',\n        sender: {\n            profile: {}\n        },\n        applicant: {\n            profile: {}\n        },\n        event: {},\n        project: {},\n        message: {},\n        position: {},\n    }\n}\n\n\nexport const notificationTypes = {\n    prodCrewInvite: (__) => {\n        console.log('prodCrewInvite notification',__)\n        return {\n            user: __.user,\n            title: \"Invite\",\n            content: \"You have been invited as production crew member for a project\",\n            data: __.data,\n            icon: \"\",\n            createdAt: new Date(),\n            read: false,\n            owner: __.owner,        \n        }\n    },\n    crewInvite: (__) => {\n        return {\n            user: __.user.id,\n            title: \"Invite\",\n            content: \"You have been invited to crew for a project\",\n            data: __.data,\n            icon: \"\",\n            createdAt: new Date(),\n            read: false,\n            owner: __.owner,\n\n        }\n    },\n    crewInviteAccept: (__) => {\n        return {\n            title: \"Invite Accepted\",\n            content: __.data.sender.name.first + \" \" + __.data.sender.name.last + \" has accepted your invitation to \" + __.data.project.title,\n            data: __.data,\n            icon: \"\",\n            createdAt: new Date(),\n            read: false,\n            owner: __.owner\n        }\n    },\n    crewInviteReject: (__) => {\n        return {\n            title: \"Invite Rejected\",\n            content: __.data.sender.name.first + \" \" + __.data.sender.name.last + \" has rejected your invitation to \" + __.data.project.title,\n            data: __.data,\n            icon: \"\",\n            createdAt: new Date(),\n            read: false,\n            owner: __.owner\n        }\n    },\n    message: (__) => {\n        return {\n            title: \"New Message\",\n            content: __.content.substring(0, 50),\n            data: __.data,\n            icon: \"\",\n            createdAt: new Date(),\n            read: false,\n            owner: __.owner\n            \n        }\n    },  \n    applicationReject: (__) => {\n        return {\n            title: \"Rejected\",\n            content: \"Your application for crew has been rejected\",\n            data: __.data,\n            icon: \"\",\n            createdAt: new Date(),\n            read: false,\n            owner: __.owner\n        }\n    },\n    applicationApprove: (__) => {\n        return {\n            title: \"Approved\",\n            content: \"Your application for crew has been approved\",\n            data: __.data,\n            icon: \"\",\n            createdAt: new Date(),\n            read: false,\n            owner: __.owner\n        }\n    },\n    crewApplication: (__) => {\n        return {\n            title: \"Crew Application\",\n            content: __.data.applicant.name.first + \" \" + __.data.applicant.name.last + \" has applied as crew for \" + __.data.project.title,\n            data: __.data,\n            icon: \"\",\n            createdAt: new Date(),\n            read: false,\n            owner: __.owner\n        }\n    },\n    connectRequest: (__) => {\n        return {\n            title: \"Connection Request\",\n            content: __.data.sender.name.first + \" \" + __.data.sender.name.last + \" wants to connect\",\n            data: __.data,\n            icon: \"\",\n            createdAt: new Date(),\n            read: false,\n            user: __.receiverId\n        }\n    },\n    connectDeny: (__) => {\n        return {\n            title: \"Connection Ignored\",\n            data: __.data,\n            content: __.content,\n            icon: \"\",\n            createdAt: new Date(),\n            read: false,\n            owner: __.owner\n        }\n    },\n    addToChatGroup: (__) => {\n        return {\n            title: \"Chat Group Invite\",\n            content: __.data.sender.name.first + \" \" + __.data.sender.name.last + \" has added you to a chat group\",\n            data: __.data,\n            icon: \"\",\n            createdAt: new Date(),\n            read: false,\n            owner: __.owner\n        }\n    },\n    eventInvite: (__) => {\n        return {\n            title: \"Event Invite\",\n            content: __.data.sender.name.first + \" \" + __.data.sender.name.last + \" has invited you to an event\",\n            data: __.data,\n            icon: \"\",\n            createdAt: new Date(),\n            read: false,\n            owner: __.owner\n        }\n    },\n    eventInviteAccept: (__) => {\n        return {\n            title: \"Event Invite Accepted\",\n            content: __.data.sender.name.first + \" \" + __.data.sender.name.last + \" has accepted your invite to event: \" + __.data.event.title,\n            data: __.data,\n            icon: \"\",\n            createdAt: new Date(),\n            read: false,\n            owner: __.owner\n        }\n    },\n    eventInviteReject: (__) => {\n        return {\n            title: \"Event Invite Rjected\",\n            content: __.data.sender.name.first + \" \" + __.data.sender.name.last + \" cannot attend your event \" + __.data.event.title,\n            data: __.data,\n            icon: \"\",\n            createdAt: new Date(),\n            read: false,\n            owner: __.owner\n        }\n    },\n\n}\n\nwindow.notificationTypes = notificationTypes;\nexport default notificationTypes","import { setGlobal, getGlobal, clearGlobal } from \"reactn\";\nimport appconfig from \"./config/app.config\";\n// import { DOUBLE_CHEVRON_UP } from \"@blueprintjs/icons/lib/esm/generated/iconNames\";\n// // import { Datastore } from \"nedb-async-await\";\n// // var Datastore = require('nedb');\n// var db = {};\n\n\nlet initialise = {};\n// initialise.global = () => {\n//   window.clearGlobal = clearGlobal;\n//   window.getGlobal = getGlobal;\n//   window.setGlobal = setGlobal;\n// }\n// initialise.DB = async (db) => {\n\n//   // var users = new Datastore({ filename: '../data/users.db', autoload: true, inMemoryOnly: false });\n//   // var conversations = new Datastore({ filename: '../data/conversations.db', autoload: true, inMemoryOnly: false });\n//   // var reservations = new Datastore({ filename: '../data/reservations.db', autoload: true, inMemoryOnly: false });\n//   // var notifications = new Datastore({ filename: '../data/notifications.db', autoload: true, inMemoryOnly: false });\n\n//   // const users = new Datastore({\n//   //   filename: '../data/users.db',\n//   //   autoload: true,\n//   //   inMemoryOnly: false\n//   // })\n//   // const conversations = new Datastore({\n//   //   filename: '../data/conversations.db',\n//   //   autoload: true,\n//   //   inMemoryOnly: false\n//   // })\n//   // const reservations = new Datastore({\n//   //   filename: '../data/reservations.db',\n//   //   autoload: true,\n//   //   inMemoryOnly: false\n//   // })\n//   // const notifications = new Datastore({\n//   //   filename: '../data/notifications.db',\n//   //   autoload: true,\n//   //   inMemoryOnly: false\n//   // })\n\n\n//   // db = {\n//   //   users, conversations, reservations, notifications\n//   // }\n//   // window.db = db;\n//   // db.users.loadDatabase();\n//   // db.conversations.loadDatabase();\n//   // db.reservations.loadDatabase();\n//   // db.notifications.loadDatabase();\n// }\n\ninitialise.state = () => {\n\n  const initialiseState = {\n\n    theme: {\n      main: \"light\",\n      colorScheme: {\n        name: \"c_1\",\n        color: \"c_1\",\n        bg: \"c_1_bg\",\n        accent: {\n          dark: \"light-grey\",\n          light: \"light-grey\"\n        }\n      },\n      font: {\n        primary: \"rubik\",\n        other: \"varela\",\n        other1: \"roboto\"\n      }\n    },\n    projects: [],\n    conversations: [],\n    notifications: [],\n    messages: []\n  };\n\n  window.initialiseState = initialiseState;\n  return initialiseState;\n\n}\ninitialise.setDefaultCurrency = () => {\n  if (localStorage.getItem('baseCurrency') !== null) {\n    let baseCurrency = JSON.parse(localStorage.getItem('baseCurrency'));\n    setGlobal({ baseCurrency: baseCurrency });\n  }\n  else {\n    setGlobal({ baseCurrency: {} });\n  }\n  if (localStorage.getItem('activeCurrency') !== null) {\n    let activeCurrency = JSON.parse(localStorage.getItem('activeCurrency'));\n    setGlobal({ activeCurrency: activeCurrency, activeCurrencyIsSet: true });\n  }\n  else {\n    setGlobal({ activeCurrency: {}, activeCurrencyIsSet: false });\n  }\n}\ninitialise.hydrate = () => {\n\n  if (localStorage.getItem('account') === null) {\n\n    localStorage.setItem('account', JSON.stringify(null))\n\n  }\n  if (localStorage.getItem('isAuthenticated') === null) {\n\n    localStorage.setItem('isAuthenticated', JSON.stringify(false))\n\n  }\n  if (localStorage.getItem('activeConversation') === null) {\n\n    localStorage.setItem('activeConversation', JSON.stringify(null))\n\n  }\n  if (!window.localStorage.gs) {\n\n    // console.log(\"[[ Configuring Initial State ]]\");\n    \n    // window.localStorage.setItem(\n    //   \"globalState\",\n    //   JSON.stringify(initialise.state())\n    // )\n\n    // setGlobal({ config: initialise.state() });\n\n    // setGlobal({\n    //   locationIsSet: JSON.parse(window.localStorage.getItem('locationIsSet')),\n    //   location: JSON.parse(window.localStorage.getItem('location')),\n    //   account: JSON.parse(window.localStorage.getItem('account')),\n    //   config: JSON.parse(window.localStorage.getItem('globalState'))\n    // })\n    // window.localStorage.setItem(\"gs\", true);\n\n    // console.log('[[ getGlobal ]]', getGlobal())\n\n  } else {\n\n    // console.log(\"[[ Hydrating Global State from localStorage ]]\");\n    \n    // let config = JSON.parse(window.localStorage.getItem('globalState'));\n    \n    // setGlobal({\n    //   locationIsSet: JSON.parse(window.localStorage.getItem('locationIsSet')),\n    //   location: JSON.parse(window.localStorage.getItem('location')),\n    //   account: JSON.parse(window.localStorage.getItem('account')),\n    //   config: config\n    // })\n\n    // console.log('[[ getGlobal ]]', getGlobal())\n\n  }\n}\n// initialise.cloudinary = () => {\n//   if (typeof window.cloudinary !== \"undefined\") {\n//     let widget = window.cloudinary.createUploadWidget(\n//       {\n//         cloudName: \"doy0ozmqb\",\n//         uploadPreset: \"kmegjnr9\"\n//         // uploadPreset: \"hj2fahfn\"\n//       },\n//       (err, res) => {\n//         console.log(res, err);\n//         // if (res.event === \"success\") {\n//         //   // let _ = res;\n//         // }\n//       }\n//     );\n//     window.widget = widget;\n//   }\n// }\n\ninitialise.api = () => {\n  let api;\n\n  if (process.env.NODE_ENV !== 'production') {\n    api = appconfig.api.dev;\n    // let global = getGlobal();\n    // global.api = api;\n    // setGlobal(global)\n  }\n  else {\n    api = appconfig.api.prod;\n    // let global = getGlobal();\n    // global.api = api;\n    // setGlobal(global)\n  }\n  return api\n  // console.log('[[ THEMES ]]', themeColors());\n}\n\n// initialise.global = () => {\n//   window.getGlobal = getGlobal\n// }\n\n// initialise.importDemoUsers = async () => {\n//   if (window.db && window.db.users !== \"undefined\") {\n//     let fetchData = async () => {\n//       let url = \"https://jsonblob.com/api/29254ce5-eb1d-11e9-9c02-d9f7655db410\";\n//       let config = {\n//         method: \"GET\",\n//         headers: {\n//           \"Content-Type\": \"application/json\"\n//         }\n//       }      \n\n//       await fetch(url, config).then(res => {\n//         return res.json()\n//       }).then(res => {\n//         console.log('res', res)\n//         // return res\n//         for (let item of res) {\n//           // db_.collection('users').insert(item).asArray()\n//           // ).then(docs => {\n//           //   console.log(\"Found docs\", docs)\n          \n//           //   console.log(\"[MongoDB Stitch] Connected to Stitch\")\n//           // }).catch(err => {\n//           //   console.error(err)\n//           // });\n       \n//         }\n//       })\n//     }\n//     await window.db.users.find({}, function (err, docs) {\n//       if (docs.length === 0) {\n//         // fetchData();\n//       }\n//     })\n//   }\n// }\n\n// initialise.complete = () => {\n//   if (getGlobal() !== \"undefined\") {\n//     return true\n//   }\n//   else {\n//     return false\n//   }\n// }\ninitialise.start = () => {\n  // initialise.global()\n  // initialise.DB()\n  // // initialise.importDemoUsers()\n  // initialise.setDefaultCurrency()\n  initialise.hydrate();\n  // initialise.cloudinary();\n  initialise.api();\n\n}\n\nexport default initialise\n","module.exports = function() {\n  return [\n    {\n      name: \"c_1\",\n      color: \"c_1\",\n      bg: \"c_1_bg\",\n      accent: {\n        dark: \"light-grey\",\n        light: \"light-grey\"\n      }\n    },\n    {\n      name: \"c_2\",\n      color: \"c_2\",\n      bg: \"c_2_bg\",\n      accent: {\n        dark: \"light-grey\",\n        light: \"light-grey\"\n      }\n    },\n    {\n      name: \"c_3\",\n      color: \"c_3\",\n      bg: \"c_3_bg\",\n      accent: {\n        dark: \"light-grey\",\n        light: \"light-grey\"\n      }\n    },\n    {\n      name: \"c_4\",\n      color: \"c_4\",\n      bg: \"c_4_bg\",\n      accent: {\n        dark: \"light-grey\",\n        light: \"light-grey\"\n      }\n    },\n    {\n      name: \"c_5\",\n      color: \"c_5\",\n      bg: \"c_5_bg\",\n      accent: {\n        dark: \"light-grey\",\n        light: \"light-grey\"\n      }\n    },\n    {\n      name: \"c_6\",\n      color: \"c_6\",\n      bg: \"c_6_bg\",\n      accent: {\n        dark: \"light-grey\",\n        light: \"light-grey\"\n      }\n    },\n    {\n      name: \"c_7\",\n      color: \"c_7\",\n      bg: \"c_7_bg\",\n      accent: {\n        dark: \"light-grey\",\n        light: \"light-grey\"\n      }\n    },\n    {\n      name: \"c_8\",\n      color: \"c_8\",\n      bg: \"c_8_bg\",\n      accent: {\n        dark: \"light-grey\",\n        light: \"light-grey\"\n      }\n    },\n    {\n      name: \"c_9\",\n      color: \"c_9\",\n      bg: \"c_9_bg\",\n      accent: {\n        dark: \"light-grey\",\n        light: \"light-grey\"\n      }\n    },\n  ]\n}\n","module.exports = {\n\t// siteRoot: 'http://crew20.devcolab.site',\n\tsiteRoot: \"https://crew.quantacom.co/\",\n\tsiteMeta: {\n\t\ttitle: \"Crew20 : Film Crew Management Made Easier\",\n\t\tauthor: \"Christopher Hurrell \",\n\t\timage: \"/image.png\",\n\t\tdescription: \"Crew management, made easier\",\n\t\tsiteUrl: \"http://crew.quantacom.co\",\n\t\tsocial: {\n\t\t\ttwitter: \"crew20\"\n\t\t},\n\t\tpostsPerPage: 5\n\t},\n\tapi: {\n\t\tdev: \"http://localhost:3030/v1/\",\n\t\t// prod: \"https://api.imaginiq.com:3030\",\n\t\tprod: \"https://dev.iim.technology/v1/\"\n\t},\n\temail: {\n\t\tsystemEmail: \"quantacomsoftware@gmail.com\",\n\t\tfromName: \"[ Crew 20 ]\"\n\t},\n\tmaps: {\n\t\tapiKey: \"AIzaSyA_IMH_3G-OhGEZvzzbNrGU1e8p4yfJf4s\"\n\t},\n\tmailjet: {\n\t\tapi_key: \"5aa08edbff41a28262efbd53bd10c535\",\n\t\tapi_secret: \"6e1c9c1eb1511c874adaf0614bdec260\"\n\t},\n\tmailgun: {\n\t\tapi_key: \"13be5264a82a538df626bb3461961a50-898ca80e-e8f3fe11\"\n\t}\n};\n","import appconfig from '../config/app.config.js';\n\nlet alertMessages = {};\n\nalertMessages.info = (data) => {\n    let text = \"ECG stream indicating abnormal cardiac readings.\"\n    return text;\n}\nalertMessages.warning = (data) => {\n    let text = \"Warning, you could be in danger of cardiac arrest.\"\n    return text;\n}\nalertMessages.danger = (data) => {\n    let text = \"You are in danger, get to the hospital immediately.\"\n    return text;\n}\nalertMessages.alert = (data) => {\n    // console.log('alertMessages.alert',data)\n    // let message;\n    if( data.status === 'info' ) { return alertMessages.info() }\n    if( data.status === 'warning' ) { return alertMessages.warning() }\n    if( data.status === 'danger' ) { return alertMessages.danger() }\n}\n\n\nexport default alertMessages;\n\n// let alertThresholds = [\n//     {\n//         type: 'excited',\n//         status: 'info',\n//         severity: 0,\n//         min: 8,\n//         max: 12\n//     },\n//     {\n//         type: 'disturbance',\n//         status: 'warning',\n//         severity: 1,\n//         min: 12,\n//         max: 16\n//     },\n//     {\n//         type: 'rush',\n//         status: 'warning',\n//         severity: 2,\n//         min: 16,\n//         max: 24\n//     },\n//     {\n//         type: 'cardiac arrest',\n//         status: 'danger',\n//         severity: 3,\n//         min: 24,\n//         max: 30\n//     },\n//     {\n//         type: 'danger',\n//         status: 'danger',\n//         severity: 4,\n//         min: 30,\n//         max: 40\n//     }\n// ]","import { setGlobal, getGlobal } from \"reactn\";\n// import appconfig from \"../../utils/config/app.config\";\nimport initialise from \"../init\";\nlet methods = {};\n\nmethods.start = () => { }\nmethods.extendUser = async (data) => {\n  const { user } = data;\n  const auth0User = { ...user };\n\n  console.log(' ')\n  console.log('[[ methods.extendUser profile ...user raw data]]', auth0User);\n  console.log(' ')\n\n  let profile = {\n    config: {\n      type: \"\",\n      onboardingcomplete: false,\n    },\n    location: {},\n    preferredCurrency: {},\n    contact: {\n      phone: \"\",\n    },\n    grade: 0,\n    bio: \"\",\n    role: \"\",\n    connections: [],\n    projects: [],\n    additional: {\n      ratings: {\n        rating: 0,\n        ratings: []\n      },\n      skills: []\n    }\n  }\n  let user_ = {\n    email: auth0User.email,\n    password: \"password1\",\n    auth0: auth0User,\n    profile: profile\n  }\n  let store = async (data) => {\n\n    console.log(' ')\n    console.log('[[ Store ]]', data)\n    console.log(' ')\n\n    return methods.store({ type: 'account', data: data })\n  }\n  let insert = async (user_) => {\n    // const { profile } = data;\n    console.log(' ')\n    console.log('[[ Insert : extended profile ]]', user_)\n    console.log(' ')\n    // let apiurl = \"http://3.135.242.213:8010/nedb/\";\n    let apiUrl = 'https://localhost:3030/v1/'\n    let collection = 'users';\n\n    // let query =  '?q={\"$and\":[{\"participants\":\"' + userID + '\"},{\"participants\":\"' + recipientID + '\"}]}';\n    let endpoint = apiUrl + collection;\n\n    console.log('[[ Endpoint ]]', endpoint)\n    let config = {\n      method: \"POST\",\n      headers: {\n        \"origin\": \"localhost:3000\",\n        // \"x-apikey\": \"5dbadbac64e7774913b6e751\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(user_)\n    }\n    return fetch(endpoint, config).then(res => {\n\n      return res.json()\n\n    }).then(res => {\n\n      console.log(' ')\n      console.log('[[ Extended user created ]]', res.user)\n      console.log(' ')\n\n      return methods.store({ type: 'account', data: res.user })\n    })\n\n  }\n  // let apiurl = \"http://3.135.242.213:8010/nedb/\";\n  let apiUrl = 'https://localhost:3030/v1/'\n  let collection = 'users';\n\n  // let query = '?$filter={\"auth0.email\":\"' + auth0User.email + '\"}';\n  let query = \"?email=\" + auth0User.email\n  let endpoint = apiUrl + collection + query;\n\n  console.log('[[ Endpoint ]]', endpoint)\n  let config = {\n    method: \"GET\",\n    headers: {\n      \"origin\": \"localhost:3000\",\n      // \"x-apikey\": \"5dbadbac64e7774913b6e751\",\n      \"Content-Type\": \"application/json\"\n    }\n  }\n  return fetch(endpoint, config).then(res => {\n\n    return res.json()\n  }).then(res => {\n    console.log(' ')\n    console.log('[[ find users with email ' + auth0User.email + ']]', res);\n    console.log(' ')\n\n    if (res.length > 0) {\n      // return store(res[0])\n      return methods.store({ type: 'account', data: res[0] })\n\n    }\n    else if (res.length === 0) {\n\n      return insert(user_)\n\n    }\n  })\n\n  // return await window.db.users.find({ sub: profile.sub }, (err, res) => {\n\n  //   if (err) { console.error(err) }\n\n  //   if(res) {\n\n  //     console.log(' ')\n  //     console.log('[[ ExtendUser : User find ]]', JSON.stringify(res));\n  //     console.log(' ')\n\n  //     if(res.length > 0){\n  //       return store(res[0])\n  //     }\n  //     else if(res.length === 0) {\n  //       return insert()\n  //     }\n  //   }   \n  // })\n}\nmethods.store = (payload) => {\n\n  let { type, data } = payload;\n  console.log(' ')\n  console.log('[[[ Storing ' + type + ' ]]]', data)\n  console.log(' ')\n  setGlobal({\n    [type]: data\n  });\n\n  let globalData = getGlobal();\n\n  localStorage.setItem('globalData', JSON.stringify(globalData))\n\n  localStorage.setItem(type, JSON.stringify(data))\n\n}\n\nmethods.call = async (data) => {\n  console.log(\"appfunctions.call\", data);\n  let { endpoint, config, type } = data;\n\n  return fetch(endpoint, config)\n    .then(res => {\n      return res.json();\n    })\n    .then(res => {\n      methods.store({ type, data: res.data })\n      console.log('Request Response : ', res.data)\n      return res.data\n    })\n}\nmethods.post = async (data) => {\n  console.log(\"appfunctions.call\", data);\n  let { endpoint, config, type } = data;\n  // let apiurl = initial.api() + endpoint;\n  // console.log(apiurl);\n\n  return fetch(endpoint, config)\n    .then(res => {\n      return res.json();\n    })\n    .then(res => {\n      methods.store({ type, data: res.data })\n      console.log('Request Response : ', res.data)\n      return res.data\n    })\n}\nmethods.call2 = async (data) => {\n  console.log(\"appfunctions.call\", data);\n  let { endpoint, config, type } = data;\n  // let apiurl = initial.api() + endpoint;\n  // console.log(apiurl);\n\n  return fetch(endpoint, config)\n    .then(res => {\n      return res.json();\n    })\n    .then(res => {\n      methods.store({ type, data: res })\n      console.log('Request Response : ', res)\n      return res\n    })\n}\nmethods.fetchCollection = async (data) => {\n  const { type, self } = data;\n  // console.log(that.state);\n  // let self = that;\n  self.setState({\n    something: 'test'\n  })\n  let endpoint = initialise.api() + '/' + type;\n  let config = {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  }\n  // type\n  const collection = await methods.call({ endpoint, config, type });\n  methods.store(type, collection)\n  console.log('Collection', collection)\n  return collection\n}\n// methods.postCollection = async (data) => {\n//   const { type, self, payload, endpoint } = data;\n\n//   let config = {\n//     method: \"PUT\",\n//     headers: {\n//       \"Content-Type\": \"application/json\"\n//     },\n//     body: JSON.stringify(payload)\n//   }\n//   return fetch(endpoint, config)\n//     .then(res => {\n//       return res.json();\n//     })\n//     .then(res => {\n//       methods.store({ type, data: res })\n//       console.log('Request Response Post Messages : ', res)\n//       return res\n//     })\n//   // type\n//   // const collection = await methods.post({endpoint, config, type});\n//   // methods.store(type,collection)\n//   // console.log('Collection',collection)\n//   // return collection\n// }\n// methods.fetchCollectionLocal = async (data) => {\n//   const { endpoint, type, self } = data;\n//   let config = {\n//     method: \"GET\",\n//     headers: {\n//       \"Content-Type\": \"application/json\"\n//     }\n//   }\n\n//   const collection = await methods.call2({ endpoint, config, type });\n//   methods.store(type, collection)\n//   console.log('Collection', collection)\n//   return collection\n// }\n// methods.singleConversationFromArray = async (data) => {\n//   const { collection, activeChef } = data;\n//   console.log('data', data);\n//   let conv = {};\n//   for (let item of data.collection) {\n//     if (item.participants.includes(activeChef._id)) {\n//       conv = { hasData: true, data: item };\n//     }\n//     else {\n//       conv = {\n//         hasData: false\n//       }\n//     }\n//   }\n//   if (!conv.hasData) {\n\n//     let recipientID = activeChef._id;\n//     let currentUserId = JSON.parse(localStorage.getItem('account')).user.sub;\n//     let existingConversations = JSON.parse(localStorage.getItem('conversations'));\n//     let newConversation = {\n//       \"_id\": Math.random().toString(36).substr(2, 10),\n//       \"participants\": [\n//         currentUserId,\n//         recipientID\n//       ],\n//       \"messages\": []\n//     }\n//     existingConversations.push(newConversation);\n//     console.log('existingConversations', existingConversations);\n//     const collection = await methods.postCollection({ endpoint: \"https://jsonblob.com/api/7986d895-eb1d-11e9-9c02-633d90d7f5ff\", type: 'conversations', self: this, payload: existingConversations })\n\n//     console.log('singleConversationFromArray', collection)\n\n\n//   }\n//   else {\n//     return conv\n//   }\n\n// }\nmethods.fetchConversations = async (data) => {\n  const { endpoint, type, self } = data;\n  let config = {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  }\n  const collection = await methods.call2({ endpoint, config, type });\n  methods.store(type, collection)\n  console.log('Collection', collection)\n  return collection\n}\n// methods.fetchConversation = async (data) => {\n//   const { endpoint, type, self } = data;\n//   let config = {\n//     method: \"GET\",\n//     headers: {\n//       \"Content-Type\": \"application/json\"\n//     }\n//   }\n//   // let conversations = await methods.checkIfConversationExists(doc);\n\n//   const collection = await methods.call2({ endpoint, config, type });\n//   let activeChef = JSON.parse(localStorage.getItem('activeDoc'));\n//   let data_ = {\n//     collection, activeChef\n//   }\n\n//   // let currentUserId = JSON.parse(localStorage.getItem('account')).user.sub;\n//   const singleConversation = methods.singleConversationFromArray(data_)\n//   console.log('singleConversation', singleConversation);\n\n//   // methods.store(type, collection)\n//   // console.log('Collection', collection)\n//   // return collection\n// }\nmethods.updateDoc = async (payload) => {\n  let { doc, self } = payload;\n  console.log(this.state)\n  let endpoint = initialise.api() + '/' + doc._id;\n  let config = {\n    method: \"PUT\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  }\n  const type = \"activeDoc\";\n  return await methods.call({ endpoint, config, type });\n  // return doc\n}\nmethods.syncActiveDoc = (payload) => {\n  let { doc, self } = payload;\n  self.setState({ activeItem: doc });\n  methods.store({ type: \"activeDoc\", data: doc })\n  // let gs_local = JSON.parse(window.localStorage.globalState);\n  // gs_local.activeProject = data\n  // setGlo?bal({\n  // activeProject: data\n  // });\n  // localStorage.setItem(\"globalState\",JSON.stringify(gs_local))\n}\nmethods.syncDoc = (payload) => {\n  let { doc, self } = payload;\n  this.updateActiveProject(doc);\n  methods.syncActiveDoc(doc);\n\n  let url = getGlobal().api + '/projects/' + doc._id;\n\n  fetch(url, {\n    method: \"PATCH\",\n    body: JSON.stringify(doc),\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  })\n    .then(res => {\n      return res.json();\n    })\n    .then(data => {\n      console.log(\"Updated Project\", data);\n      this.fetchProjects();\n      this.refresh();\n      setTimeout(() => {\n      }, 1500);\n    });\n}\nmethods.checkIfConversationExists = async (doc) => {\n\n  let conversations = JSON.parse(localStorage.getItem('conversations'));\n  // let conversations = \n  if (!doc) {\n    return conversations\n  }\n  console.log('Messages', conversations)\n  let recipientID = doc._id;\n  // console.log('Check', , doc._id)\n  let conversationExists1 = {}\n  if (conversations.length > 0) {\n    for (let item of conversations) {\n      // console.log('Check', item, doc._id)\n\n      if (item.participants.includes(doc._id)) {\n        conversationExists1 = { exists: true, doc: item }\n      }\n      else {\n        conversationExists1 = { exists: false, doc: item }\n      }\n    }\n  }\n  else {\n    conversationExists1 = false\n  }\n  // let findMessage = messages.find(r => r.recipient._id === doc._id);\n  // let conversationExists = Boolean(messages.find(r => r.recipient._id === doc._id))\n  // console.log('converationExists',conversationExists);\n  let currentUserId = JSON.parse(localStorage.getItem('account')).user.sub;\n\n  let newConversation = {\n    \"_id\": Math.random().toString(36).substr(2, 10),\n    \"participants\": [\n      currentUserId,\n      recipientID\n    ],\n    \"messages\": []\n  }\n\n  console.log('newConversation', newConversation)\n  // console.log('find',Boolean(messages.find(r => r.recipient._id === doc._id)))\n\n  if (!conversationExists1) {\n    conversations.push(newConversation)\n    console.log('Messages payload', conversations);\n    const collection = await methods.postCollection({ endpoint: \"https://jsonblob.com/api/7986d895-eb1d-11e9-9c02-633d90d7f5ff\", type: 'conversations', self: this, payload: conversations })\n    console.log('updated conversations', collection)\n    return { collection, conversationExists1 }\n  }\n  else {\n    return { conversations, conversationExists1 }\n  }\n}\n// methods.getRecipientDetail = async (data) => {\n//   const { doc, self } = data;\n//   console.log('getRecipientDetail doc', data)\n//   console.log('getRecipientDetail doc', data.doc.participants)\n//   let p = data.doc.participants;\n\n//   const participants_ = { ...p };\n//   const userid = JSON.parse(localStorage.getItem('account')).user.sub;\n//   // const chefs = getGlobal().chefs;\n//   // const index = participants_.indexOf(userid);\n//   // let newArray = participants_.splice(index, 1);\n//   let recipientUserId = participants_[0];\n//   // let recipient = chefs       \n//   // let recipient = chefs.find(o => o._id === recipientUserId);\n//   let recipient = window.db.users.find({ _id: recipientUserId }, (e, r) => {\n//     doc.recipient = r[0];\n//     self.setState({ ready: true, conversation: doc })\n//     // console.log('getRecipientDetail doc',doc)\n//     // conversations_.push(item)\n//     return doc\n//   });\n// }\nmethods.findConversation = async (data) => {\n  const { recipientID, userID } = data;\n  return await window.db.conversations.find({\n    $and: [{ participants: recipientID }, { participants: userID }]\n  }, function (e, r) {\n    console.log('methods.findConversation', r[0])\n    return r\n  })\n\n}\nexport default methods;\n","import { setGlobal } from \"reactn\";\nimport appconfig from \"../config/app.config.js\";\nimport alertMessages from \"./alertMessages\";\nimport methods from \"../methods/index.js\";\nimport { notification, message } from \"antd\";\nimport mailsend from \"../methods/mailSend.js\";\nimport moment from \"moment\";\nimport notificationTypes from \"../util/notifications.js\";\n// import {} fr\n// import Investments from '';\n// import appconfig from '../config/app.config.js'\nvar success = new Set([]);\n\nvar success_ = new Set([]);\n\n// export const util = {};\nexport const app = {\n  get: label => {\n    // console.log(' get ', label, localStorage[label])\n\n    if (localStorage.getItem(label) === null) {\n      // console.log('object is undefined')\n      // // console.log('label',localStorage[label])\n      // return\n      // return data\n      return {};\n    }\n    if (localStorage.getItem(label) !== null) {\n      // console.log('object is not undefined')\n\n      let a = localStorage.getItem(label);\n\n      // console.log(' ')\n      // console.log(' ')\n      // console.log('localStorage[label]', label, localStorage[label])\n      // console.log(' ')\n\n      if (a !== \"undefined\") {\n        // console.log(' ')\n        // console.log(' ')\n        // console.log('a',a)\n        // console.log(' ')\n\n        return JSON.parse(a);\n      } else {\n        return {};\n      }\n    }\n\n    // else {\n\n    //     let a = localStorage[label]\n    //     // // console.log('[[ Fn.get a ]]', a)\n    //     return JSON.parse(a)\n    // }\n  },\n  set: (label, value) => {\n    localStorage.setItem(label, JSON.stringify(value));\n  },\n  fetchUnreadMessages: async (__) => {\n\n    return new Promise(async resolve => {\n\n      const { self, userId } = __\n\n      await app.fetchConversations({ self, userId, type: 'private' }).then(conversations => {\n\n        // let unreadC = []\n        let unread = new Set()\n\n        for (let item of conversations) {\n\n          for (let message of item.messages) {\n\n            if (!message.seen.includes(userId)) {\n\n              if ([...unread].filter(a => a.conversation.id === item.id).length === 0) {\n                unread.add({ conversation: item, messages: new Set() })\n              }\n\n              if ([...unread].filter(a => a.conversation.id === item.id).length > 0) {\n                [...unread].filter(a => a.conversation.id === item.id)[0].messages.add(message)\n              }\n\n            }\n          }\n\n        }\n\n\n        console.log('** Unread', [...unread])\n        // let messages;\n\n        resolve([...unread])\n\n      })\n\n\n    })\n\n\n  },\n  fetchConversations: async __ => {\n    // console.log('  ')\n    // console.log('  ')\n    // console.log('  ')\n    // console.log(\" \");\n    // console.log(\" \");\n    // console.log(\" \");\n    // console.log(\"[[ fetchConversations ]]\", data);\n    // console.log(\" \");\n    // console.log(\" \");\n    // console.log(\" \");\n\n    const { self, userId, type } = __;\n\n\n    return new Promise(async resolve => {\n      let url =\n        \"https://api.crew20.devcolab.site/v1/conversations/?participants=\" +\n        userId +\n        \"&type=\" +\n        type;\n\n      // console.log(\"conv fetch url \", url);\n\n      await fetch(url)\n        .then(async res => {\n          return res.json();\n        })\n        .then(async conversations => {\n          // console.log(\"Conv RES \", res);\n\n          Fn.set(\"conversations\", conversations);\n\n          resolve(conversations);\n        });\n    });\n  },\n  checkConversationExists: async __ => {\n    // console.log('  ')\n    // console.log('  ')\n    // console.log('  ')\n\n    return new Promise(async resolve => {\n\n      const { self, selfUserId, recipientId } = __;\n\n      // console.log('checkConversationExists', data)\n\n      let url1 =\n        \"https://api.crew20.devcolab.site/v1/conversations/?participants=\" +\n        selfUserId;\n      let url2 =\n        \"https://api.crew20.devcolab.site/v1/conversations/?participants=\" +\n        recipientId;\n\n      let conv1 = await fetch(url1)\n        .then(res => {\n          return res.json();\n        })\n        .then(res => {\n          // console.log('conv1 ', res)\n          return res;\n        });\n      let conv2 = await fetch(url2)\n        .then(res => {\n          return res.json();\n        })\n        .then(res => {\n          // console.log('conv2 ', res)\n          return res;\n        });\n\n      let match;\n      let exists = false;\n      for (let item of conv1) {\n        let id = item.id;\n        for (let item_ of conv2) {\n          let id_ = item_.id;\n          if (id === id_) {\n            if (item_.type === \"private\") {\n\n              let a = item;\n              let b = item_;\n              let c = { ...a, ...b };\n              // console.log(\"Found existing conversation\", c);\n              match = c;\n              exists = true;\n            }\n            if (item_.type === \"group\") {\n\n              let a = item;\n              let b = item_;\n              let c = { ...a, ...b };\n              // console.log(\"Found group conversation\", c);\n              match = c;\n              exists = false;\n            }\n\n            // else {\n            //   match = null;\n            //   exists = false;\n            // }\n\n            // if(c.participants.length > 2) {\n            //   exists = false\n            //   // return\n            // }\n            // else {\n\n            // }\n          }\n          // else {\n          //     exists\n          // }\n        }\n      }\n      // console.log('match', match)\n      // Fn.store({ label: 'activeConversation', value: match})\n\n      // let exists = match.length > 0 ? true : false\n\n      // console.log('[[ EXISTS ]]', exists, match )\n      resolve({ exists: exists, conversation: match })\n      // return { exists: exists, conversation: match };\n\n      // if(res.length > 0) {\n      //     // console.log(' ')\n      //     // console.log('[[ Conversation Exists ]]')\n      //     // console.log(' ')\n      //     return true\n      // }\n      // else {\n      //     // console.log(' ')\n      //     // console.log('[[ Conversation does Not Exist ]]')\n      //     // console.log(' ')\n      //     return false\n      // }\n    })\n\n  },\n  updateConversation: async __ => {\n\n    return new Promise(async resolve => {\n\n      const { self, conversation, updateTimestamp } = __;\n\n\n      conversation.updatedAt = new Date()\n      conversation.lastUpdate = new Date()\n\n      if (updateTimestamp) {\n        conversation.lastUpdate = new Date()\n      }\n      // console.log('app.updateConversation => conversation ', conversation)\n\n\n      let apiUrl = api.url(\"conversations\") + conversation.id;\n\n\n      let config = {\n        method: \"PATCH\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(conversation)\n      };\n\n      return await fetch(apiUrl, config)\n        .then(res => {\n          return res.json();\n        })\n        .then(conversation_ => {\n\n          // console.log('** updated conversation', conversation )\n\n          // let index = self.props.activeConversationIndex;\n          if (self.props.conversations) {\n            let conversations = self.props.conversations;\n            let index = conversations.findIndex(a => a.id === conversation_.id);\n            conversations[index] = conversation_;\n\n            // conversations[index] = conversation_;\n\n            // conversations[index].authors = conversation.authors;\n\n            // console.log(\"conversations\", conversations, conversation);\n\n            self.props.updateActiveConversation({\n              conversations: conversations,\n              activeConversation: conversation_\n              // activeConversation:\n            });\n          }\n\n\n          resolve(conversation)\n        })\n\n    })\n\n  },\n  findCurrency: async __ => {\n    // const { self } = __;\n    const { country } = __;\n    return new Promise(async resolve => {\n      if (country) {\n        // const country = self.state.country;\n        let url = \"https://restcountries.eu/rest/v2/name/\" + country;\n        await fetch(url, (err, res) => {\n          return res;\n        })\n          .then(res => {\n            return res.json();\n            // // console.log('Country data',res)\n          })\n          .then(res => {\n            // return res.json()\n            // console.log('Country data', res[0].currencies[0]);\n            // setGlobal({\n            //   activeCurrencyIsSet: true,\n            //   activeCurrency: res[0].currencies[0],\n            //   baseCurrency: res[0].currencies[0]\n            // });\n            let currency = res[0].currencies[0];\n            localStorage.setItem(\n              \"activeCurrency\",\n              JSON.stringify(res[0].currencies[0])\n            );\n            localStorage.setItem(\n              \"baseCurrency\",\n              JSON.stringify(res[0].currencies[0])\n            );\n            localStorage.setItem(\"activeCurrencyIsSet\", JSON.stringify(true));\n\n            resolve(currency);\n          });\n      }\n    });\n  },\n  reverseGeocodeCity: async __ => {\n    // // console.log('[[ Fn.reverseGeocodeCity ]]');\n    // const { self } = __;\n    const { lat, long } = __;\n    return new Promise(async resolve => {\n      let url =\n        \"https://reverse.geocoder.api.here.com/6.2/reversegeocode.json?prox=\" +\n        lat +\n        \",\" +\n        long +\n        \",250&mode=retrieveAddresses&maxresults=1&gen=9&app_id=ZZN2MPuexLyuz3VR0KDD&app_code=TnEsVJR8k3zxGMiAkbP_EQ\";\n      fetch(url, (e, r) => {\n        return r;\n      })\n        .then(res => {\n          return res.json();\n        })\n        .then(res => {\n          // // console.log('reverse geocode res', res)\n\n          // // console.log('[[ Fn.reverseGeocodeCity ]]', JSON.stringify(res.Response && res.Response.View && res.Response.View[0] && res.Response.View[0].Result[0] && res.Response.View[0].Result[0].Location && res.Response.View[0].Result[0].Location.Address));\n\n          let data =\n            res.Response &&\n            res.Response.View[0] &&\n            res.Response.View[0].Result[0] &&\n            res.Response.View[0].Result[0].Location &&\n            res.Response.View[0].Result[0].Location.Address &&\n            res.Response.View[0].Result[0].Location.Address.AdditionalData;\n          let location =\n            res.Response &&\n            res.Response.View[0] &&\n            res.Response.View[0].Result[0] &&\n            res.Response.View[0].Result[0].Location &&\n            res.Response.View[0].Result[0].Location.Address;\n          let address =\n            res.Response &&\n            res.Response.View[0] &&\n            res.Response.View[0].Result[0] &&\n            res.Response.View[0].Result[0].Location &&\n            res.Response.View[0].Result[0].Location.Address;\n\n          // for (let item of data) {\n          //   if (item.key === \"CountryName\") {\n          //     let country = item.value;\n          //     // console.log('country', country);\n          //     self.setState({ country: country, countrySet: true });\n          //   }\n          // }\n          // self.setState({\n          //   location: address,\n          //   city: address.County,\n          //   suburb: address.District,\n          //   province: address.State,\n          //   searchFormReady: true,\n          //   ready: true\n          // });\n          // Fn.findCurrency({ self });\n          // console.log('[[ store : location ]]', location)\n          methods.store({ type: \"location\", data: location });\n          methods.store({ type: \"locationIsSet\", data: true });\n\n          resolve(location);\n        });\n    });\n  },\n  getGeoLocation: async __ => {\n    // const { self } = __;\n\n    return new Promise(async resolve => {\n      const setPosition = data_ => {\n        console.log(\"[[ getGeoLocation ]]\", data_);\n        // // console.log('getGeolocation', data_)\n\n        // self.setState({\n        //   lat: data_.coords.latitude || 0,\n        //   long: data_.coords.longitude || 0\n        // });\n\n        // Fn.reverseGeocodeCity({ self });\n        let data = {\n          lat: data_.coords.latitude || 0,\n          long: data_.coords.longitude || 0\n        };\n\n        resolve(data);\n      };\n\n      if (typeof window.navigator.geolocation !== \"undefined\") {\n        window.navigator.geolocation.getCurrentPosition(setPosition);\n      }\n    });\n  },\n  createProject: async __ => {\n    const { self, project } = __;\n\n    message.config({\n      top: 250,\n      duration: 0,\n      maxCount: 10\n    });\n\n    message.loading(\"Creating project ... \");\n\n    let one = await app\n      .createProjectMain({ self, project })\n      .then(async project => {\n        // message.destroy();\n        message.loading(\"Configuring additional data ... \");\n\n        await app\n          .createProjectConversations({ self, project })\n          .then(async project => {\n            // message.destroy();\n            message.loading(\"Configuring conversations ... \");\n\n            await app\n              .createProjectCalendar({ self, project })\n              .then(async project => {\n                // message.destroy();\n                message.loading(\"Configuring calendar ... \");\n\n                console.log(\"createProjectCalendar res => project \", project);\n                await app\n                  .createProjectRoster({ self, project })\n                  .then(async project => {\n                    // message.destroy();\n                    message.loading(\"Configuring roster ... \");\n\n                    // setTimeout(() => {\n                    //   message.destroy();\n                    // },2000)\n                  })\n                  .then(async project => { });\n              });\n          });\n      });\n\n    // let two = one && await app.createProjectConversations({ self, project: one }).then( async project => {\n    //   // message.destroy();\n    //   message.loading('Configuring additional data 2 ... ');\n    // })\n\n    // let three = two && await app.createProjectRoster({ self, project: two }).then( async project => {\n    //   // message.destroy();\n    //   message.loading('Configuring additional data 3 ... ');\n\n    //   setTimeout(() => {\n    //     message.destroy();\n    //   },2000)\n    // })\n  },\n  createProjectMain: async __ => {\n    const { self, project } = __;\n\n    return new Promise(async resolve => {\n      // project.owner = Fn.get('account').user.id;\n\n      let p = {};\n      p.title = project.projectName;\n\n      p.description = \"\";\n      p.type = project.projectType;\n\n      p.start_date = project.projectDate;\n      p.end_date = project.projectEndDate;\n      p.positions = project.positions;\n\n      console.log(\"project\", project);\n      p.location =\n        typeof project.location.address.county !== \"undefined\"\n          ? project.location.address.county\n          : project.location.address.county;\n\n      p.owner = Fn.get(\"account\").user.id;\n      p.crew = [];\n      p.productionCrew = [\n        {\n          user: Fn.get(\"account\").user.id,\n          permissions: [\n            \"projectfiles\",\n            \"projectsettings\",\n            \"projectpeople\",\n            \"projectchecklists\",\n            \"projectratecalculator\"\n          ]\n        }\n      ];\n      p.comments = [];\n      p.invited = project.invited;\n\n      p.shortlist = project.shortlist;\n\n      p.createdAt = new Date();\n      p.checklists = [];\n      p.threads = [];\n      p.conversations = [];\n\n      let days = await Fn.getDates(project.projectDate, project.projectEndDate);\n      p.days = days;\n\n      console.log(\" \");\n      console.log(\" \");\n      console.log(\"[[ Project to create ]] \", JSON.stringify(p));\n      console.log(\" \");\n      console.log(\" \");\n\n      // let apiUrl = \"https://api.crew20.devcolab.site/v1/projects/\";\n      let apiUrl = api.url(\"projects\");\n\n      const config = {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(p)\n      };\n\n      return await fetch(apiUrl, config)\n        .then(res => {\n          return res.json();\n        })\n        .then(res => {\n          console.log(\"Project Created\", res);\n\n          resolve(res);\n        });\n    });\n  },\n  createProjectConversations: __ => {\n    const { self, project } = __;\n\n    console.log(\"createProjectConversations\", __);\n\n    return new Promise(async resolve => {\n      let conversation = await app\n        .createProjectConversation({\n          self,\n          projectOwner: Fn.get(\"account\").user.id,\n          type: \"event\"\n        })\n        .then(async conversation_ => {\n          project.conversationId = conversation_.id;\n\n          let days = project.days;\n\n          for (let item of days) {\n            let conv = await app.createProjectConversation({\n              self,\n              projectOwner: Fn.get(\"account\").user.id,\n              type: \"project\"\n            });\n\n            if (conv) {\n              let item_ = {\n                day: item,\n                conversationId: conv.id\n              };\n              project.conversations.push(item_);\n            }\n          }\n\n          await app.updateProject({ self, project }).then(project => {\n            console.log(\"updated project with conversations\", project);\n\n            resolve(project);\n          });\n        });\n    });\n  },\n  updateProjectConversations: __ => {\n\n    const { self, project } = __;\n\n    console.log(\"createProjectConversations\", __);\n\n    return new Promise(async resolve => {\n\n      let days = project.days;\n\n      for (let day of days) {\n        if (project.conversations.filter(a => a.day === day).length === 0) {\n          await app.createProjectConversation({\n            self,\n            projectOwner: Fn.get(\"account\").user.id,\n            type: \"project\"\n          }).then(conversation => {\n\n            let item_ = {\n              day: day,\n              conversationId: conversation.id\n            }\n\n            project.conversations.push(item_)\n\n          })\n\n        }\n\n      }\n\n      await app.updateProject({ self, project }).then(project => {\n        console.log(\"updated project with conversations\", project);\n\n        resolve(project);\n      });\n    });\n  },\n  createProjectCalendar: __ => {\n    const { self, project } = __;\n\n    console.log(\"createProjectRoster\", __);\n\n    return new Promise(async resolve => {\n\n      let monthNames_ = new Set();\n\n      let months = [];\n\n      let days_ = project.days;\n\n      // let diff = end.diff(start, 'months', false);\n      for (let day of days_) {\n        let monthName = moment(day).format(\"MMMM\");\n        monthNames_.add(monthName);\n      }\n\n      let monthNames = [...monthNames_];\n\n      console.log(\"monthNames\", monthNames);\n\n      for (let month of monthNames) {\n        let days__ = [];\n        let itinerary_ = []\n\n        for (let day of days_) {\n          let dayMonth = moment(day).format(\"MMMM\");\n\n          if (dayMonth === month) {\n            days__.push(day);\n            itinerary_.push({\n              day: day,\n              items: [],\n              slots: new Array(24).fill(false)\n            })\n          }\n        }\n\n        let month__ = {\n          name: month,\n          days: days__,\n          itinerary: itinerary_\n        };\n\n        months.push(month__);\n      }\n\n      project.calendar = months;\n\n      await app.updateProject({ self, project }).then(project => {\n\n        console.log(\"updated project with conversations\", project);\n\n        resolve(project);\n      });\n\n      // resolve(project);\n    });\n  },\n  createProjectRoster: async __ => {\n    const { self, project } = __;\n\n    return new Promise(async resolve => {\n      // let crew_ = this.state.crew;\n      let crew = project.crew;\n      let days = project.days;\n\n      let crewRoster = project.crewRoster || [];\n\n      for (let item of crew) {\n        if (!crewRoster.filter(a => a.user === item.id).length > 0) {\n          let rosterItem = {\n            user: item.id,\n            days: [],\n            rate: 0\n          };\n\n          for (let day of days) {\n            rosterItem.days.push({ day, selected: true });\n          }\n\n          crewRoster.push(rosterItem);\n        }\n        // else {\n\n        // }\n      }\n\n      console.log(\"crewRoster\", crewRoster);\n\n      project.crewRoster = crewRoster;\n\n      await app.updateProject({ self, project }).then(project => {\n        console.log(\"updated project crew roster\", project);\n\n        resolve(project);\n      });\n    });\n  },\n  lastFetch: async __ => {\n    return new Promise(async resolve => {\n      const { type } = __;\n\n      let lastFetchTime = Fn.get(type).time;\n\n      resolve(lastFetchTime);\n    });\n  },\n  checkAuth: async __ => {\n    // const { self } = __\n\n    // console.log(\" \");\n    // console.log(\" \");\n    // console.log(\"App checkAuth\");\n    // console.log(\" \");\n    // console.log(\" \");\n\n    return new Promise(async resolve => {\n      if (localStorage.getItem(\"isAuthenticated\") === null) {\n        localStorage.clear();\n        localStorage.setItem(\"isAuthenticated\", JSON.stringify(false));\n        localStorage.setItem(\n          \"env\",\n          JSON.stringify({ env: \"production\", set: true })\n        );\n        ui.checkmobile();\n        __.props.history.push(\"/\");\n        resolve(JSON.parse(localStorage.isAuthenticated));\n      }\n      if (JSON.parse(localStorage.isAuthenticated) === false) {\n        localStorage.clear();\n        localStorage.setItem(\"isAuthenticated\", JSON.stringify(false));\n        localStorage.setItem(\n          \"env\",\n          JSON.stringify({ env: \"production\", set: true })\n        );\n        ui.checkmobile();\n        __.props.history.push(\"/\");\n        resolve(JSON.parse(localStorage.isAuthenticated));\n      }\n    });\n  },\n  //   checkAuth: __ => {\n  //     // const { self } = __\n\n  //     console.log(\" \");\n  //     console.log(\" \");\n  //     console.log(\"App checkAuth\");\n  //     console.log(\" \");\n  //     console.log(\" \");\n\n  //     if (localStorage.getItem(\"isAuthenticated\") === null) {\n  //       __.props.history.push(\"/\");\n  //       localStorage.clear();\n  //       localStorage.setItem(\"isAuthenticated\", JSON.stringify(false));\n  //       localStorage.setItem(\n  //         \"env\",\n  //         JSON.stringify({ env: \"production\", set: true })\n  //       );\n  //       ui.checkmobile();\n  //     }\n  //     if (JSON.parse(localStorage.isAuthenticated) === false) {\n  //       __.props.history.push(\"/\");\n  //       localStorage.clear();\n  //       localStorage.setItem(\"isAuthenticated\", JSON.stringify(false));\n  //       localStorage.setItem(\n  //         \"env\",\n  //         JSON.stringify({ env: \"production\", set: true })\n  //       );\n  //       ui.checkmobile();\n  //     }\n  //   },\n  setEnv: () => {\n    // console.log(\" \");\n    // console.log(\" \");\n    // console.log(\"Set Env\");\n    // console.log(\" \");\n    // console.log(\" \");\n\n    console.log(\"process.NODE_ENV\", process.NODE_ENV);\n    if (localStorage.getItem(\"env\") === null) {\n    }\n  },\n  insertNotification: async __ => {\n    const { userId, title, content } = __;\n\n    let body = {\n      title: title,\n      content: content,\n      user: userId,\n      createdAt: new Date()\n    };\n    let config = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(body)\n    };\n    let url = api.url(\"notifications\");\n\n    await fetch(url, config)\n      .then(res => {\n        return res.json();\n      })\n      .then(async res => {\n        // return res\n        // resolve(res)\n        console.log(\"notification insert res\", res);\n\n        await app.sendNotification({ userId, title, content });\n        // self.setState({\n        //     notifications: res,\n        //     ready: true\n        // })\n\n        return res;\n      });\n  },\n  sendNotification: async __ => {\n    const { self, userId, title, content } = __;\n\n    let user = await api.fetch(\"users\", userId);\n\n    await mailsend.SendNotification({ user, subject: title, content });\n  },\n  sendConfirmationEmail: async __ => {\n    const { self, userId } = __;\n\n    let user = await api.fetch(\"users\", userId);\n\n    // let title = \"Please confirm your email address\";\n    let title = \"Confirm your account.\";\n    let subject = \"Confirm your account [ Crew20 ]\";\n    let content =\n      \"Please confirm your Crew20 account by clicking the link below:\";\n\n    // let link = \"https://app.crew20.devcolab.site/confirm/?user=\" + userId + \"&email=\" + user.email;\n    let link =\n      window.location.protocol +\n      \"//\" +\n      window.location.host +\n      \"/confirm/?user=\" +\n      userId +\n      \"&email=\" +\n      user.email;\n    console.log(\"link\", link);\n\n    await mailsend.SendConfirmationEmail({\n      user,\n      subject,\n      title,\n      content,\n      link\n    });\n  },\n  sendWelcomeEmail: async __ => {\n    const { self, userId, title, content } = __;\n\n    let user = await api.fetch(\"users\", userId);\n\n    await mailsend.SendWelcomeEmail({ user, subject: title, content });\n  },\n  fetchNotifications: async __ => {\n    const { self, userId } = __;\n\n    let url = api.url(\"notifications\") + \"?user=\" + userId;\n\n    await fetch(url)\n      .then(res => {\n        return res.json();\n      })\n      .then(res => {\n        // return res\n        // resolve(res)\n        console.log(\"notifications\", res);\n\n        self.setState({\n          notifications: res,\n          ready: true\n        });\n\n        return res;\n      });\n  },\n  fetchProductionCrew: async __ => {\n    const { self, project } = __;\n    return new Promise(async resolve => {\n      let prodCrew = [];\n      let productionCrew_ =\n        (typeof project.productionCrew !== \"undefined\" &&\n          project.productionCrew) ||\n        [];\n\n      console.log(\"productionCrew_\", productionCrew_);\n      // productionCrew_.push({ id: project.owner });\n      for (let item of productionCrew_) {\n        let url = api.url(\"users\") + item.user;\n\n        await fetch(url)\n          .then(res => {\n            return res.json();\n          })\n          .then(res => {\n            prodCrew.push(res);\n          });\n      }\n\n      // self.setState({\n      //   productionCrew: prodCrew\n      // });\n\n      resolve(prodCrew);\n    });\n  },\n  fetchConfirmedCrew: async __ => {\n    const { self, project } = __;\n    return new Promise(async resolve => {\n      let crew = [];\n      let crew_ = project.crew;\n      // let crew_ = project.invited || [];\n      // productionCrew_.push({ id: project.owner })\n      for (let item of crew_) {\n        let url = api.url(\"users\") + item.id;\n\n        await fetch(url)\n          .then(res => {\n            return res.json();\n          })\n          .then(res => {\n            crew.push(res);\n          });\n      }\n\n      let isDeleting = [];\n      let isDeletingStart = [];\n      let deleteConfirmation = [];\n\n      for (let item of crew) {\n        isDeleting.push(false);\n        isDeletingStart.push(false);\n        deleteConfirmation.push(false);\n      }\n\n      if (self && self.setState) {\n        self.setState({\n          crew: crew,\n          isDeleting: isDeleting,\n          isDeletingStart: isDeletingStart,\n          deleteConfirmation: deleteConfirmation,\n          ready: true\n        });\n      }\n\n      resolve(crew);\n    });\n  },\n  fetchInvitedCrew: async __ => {\n    const { self, project } = __;\n    return new Promise(async resolve => {\n      let invited = [];\n      let invited_ = project.invited || [];\n      // productionCrew_.push({ id: project.owner })\n      for (let item of invited_) {\n        let url = api.url(\"users\") + item.id;\n\n        await fetch(url)\n          .then(res => {\n            return res.json();\n          })\n          .then(res => {\n            invited.push(res);\n          });\n      }\n\n      let isDeleting = [];\n      let isDeletingStart = [];\n      let deleteConfirmation = [];\n\n      for (let item of invited) {\n        isDeleting.push(false);\n        isDeletingStart.push(false);\n        deleteConfirmation.push(false);\n      }\n\n      if (self && self.setState) {\n        self.setState({\n          // crew: crew,\n          invited: invited,\n          isDeleting: isDeleting,\n          isDeletingStart: isDeletingStart,\n          deleteConfirmation: deleteConfirmation,\n          ready: true\n        });\n      }\n\n      resolve(invited);\n    });\n  },\n  inviteByEmail: async __ => {\n    const { self, link, position, project, projectOwner, email } = __;\n\n    let invitation = {\n      receiverEmail: email,\n      subject: \"You have been invited to a project [ Crew20 ]\",\n      title: \"You have been invited to crew for a project on Crew20\",\n      content:\n        projectOwner.profile.name.first +\n        \" \" +\n        projectOwner.profile.name.last +\n        \" has invited you as \" +\n        position +\n        \" crew member for their new project. Follow the link to register your account and accept the position. Project details are below.\",\n      // user: \"\",\n      projectTitle: project.title,\n      projectStartDate: project.start_date,\n      link: link + \"&email=\" + email\n    };\n\n    console.log(\"invite by email\", __);\n    console.log(\"invite by email invitation\", invitation);\n\n    let sent = await mailsend.InviteByEmail(invitation);\n    if (sent) {\n      console.log(\"sent\", sent);\n      setTimeout(() => {\n        if (sent.success === true) {\n          notification.open({\n            message: \"Invite Sent\",\n            description: \"Invite sent successfully\"\n          });\n          self.setState({ inviteBusy: false });\n          self.inviteByEmailAddress.current.value = null;\n        }\n\n        if (sent.success === false) {\n          notification.open({\n            message: \"Invite Send Error\",\n            description:\n              \"There was an issue sending the invite. Please try again or contact support.\"\n          });\n          self.setState({ inviteBusy: false });\n          self.inviteByEmailAddress.current.value = null;\n        }\n      }, 1000);\n    }\n  },\n  inviteByUser: async __ => {\n    const { self, link, position, project, projectOwner, user } = __;\n\n    let invitation = {\n      receiverEmail: user.email,\n      subject: \"You have been invited to a project [ Crew20 ]\",\n      title: \"You have been invited to crew for a project on Crew20\",\n      content:\n        projectOwner.name.first +\n        \" \" +\n        projectOwner.name.last +\n        \" has invited you as \" +\n        position +\n        \" crew member for their new project. Follow the link to register your account and accept the position. Project details are below.\",\n      // user: \"\",\n      projectTitle: project.title,\n      projectStartDate: project.start_date,\n      link: link\n    };\n\n    console.log(\"invite by email\", __);\n    console.log(\"invite by email invitation\", invitation);\n\n    let sent = await mailsend.InviteByEmail(invitation);\n    if (sent) {\n      console.log(\"sent\", sent);\n      setTimeout(() => {\n        if (sent.success === true) {\n          notification.open({\n            message: \"Invite Sent\",\n            description: \"Invite sent successfully\"\n          });\n          self.setState({ inviteBusy: false });\n          //   self.inviteByEmailAddress.current.value = null;\n        }\n\n        if (sent.success === false) {\n          notification.open({\n            message: \"Invite Send Error\",\n            description:\n              \"There was an issue sending the invite. Please try again or contact support.\"\n          });\n          self.setState({ inviteBusy: false });\n          //   self.inviteByEmailAddress.current.value = null;\n        }\n      }, 1000);\n    }\n  },\n  updateNotification: async __ => {\n    const { self, notification } = __;\n    let url = api.url(\"notifications\") + notification.id;\n    let config = {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(notification)\n    };\n    await fetch(url, config)\n      .then(res => {\n        return res.json();\n      })\n      .then(res => {\n        console.log(\"notification\", res);\n      });\n\n    // if (notification) {\n    //   setTimeout(() => {\n    //     self.setState({ inviteBusy: false });\n    //   }, 1000);\n    // }\n  },\n  createNetworkNotification: async __ => {\n    const { self, type, sender, receiverId } = __;\n\n    console.log(\"createNetworkNotification\", __);\n\n    let notification = notificationTypes[type]({\n      data: { sender: sender },\n      user: receiverId\n    });\n\n    console.log(\"notification\", notification);\n\n    let url = api.url(\"notifications\");\n    let config = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(notification)\n    };\n    await fetch(url, config)\n      .then(res => {\n        return res.json();\n      })\n      .then(res => {\n        console.log(\"notification\", res);\n      });\n\n    if (notification) {\n      setTimeout(() => {\n        self.setState({ inviteBusy: false });\n      }, 1000);\n    }\n  },\n  createNotification: async __ => {\n    const { self, type, link, position, project, projectOwner, user } = __;\n\n    console.log(\"create notification\", __);\n    // import\n    // type === \"\"\n    console.log(\"notificationTypes\", notificationTypes);\n    console.log(\"notificationTypes\", notificationTypes[type]);\n\n    let notification = notificationTypes[type]({\n      owner: projectOwner,\n      data: { sender: projectOwner, project: project },\n      user: user\n    });\n    console.log(\"notification\", notification);\n\n    // let notification = {\n    //   user: user.id,\n    //   type: type,\n    //   title: \"You have been invited to crew for \" + project.title,\n    //   content:\n    //     projectOwner.profile.name.first +\n    //     \" \" +\n    //     projectOwner.profile.name.last +\n    //     \" has invited you as \" +\n    //     position +\n    //     \" crew member for their new project. Follow the link to register your account and accept the position. Project details are below.\",\n    //   // user: \"\",\n    //   project: project.id,\n    //   createdAt: new Date(),\n    //   data: project\n\n    // };\n\n    // console.log(\"create notification\", notification);\n\n    // let notification = await mailsend.createNotification(invitation)\n    let url = api.url(\"notifications\");\n    let config = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(notification)\n    };\n    await fetch(url, config)\n      .then(res => {\n        return res.json();\n      })\n      .then(res => {\n        console.log(\"notification\", res);\n      });\n\n    if (notification) {\n      setTimeout(() => {\n        self.setState({ inviteBusy: false });\n      }, 1000);\n    }\n  },\n  updateProject: async __ => {\n    return new Promise(async resolve => {\n      const { self, project } = __;\n\n      let url = api.url(\"projects\") + project.id;\n\n      let config = {\n        method: \"PATCH\",\n        headers: {\n          Authorization: \"Bearer \" + Fn.get(\"account\").tokens.access.token,\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(project)\n      };\n\n      await fetch(url, config)\n        .then(res => {\n          return res.json();\n        })\n        .then(async res => {\n          console.log(\"[[ Updated Project ]]\", res);\n          Fn.set(\"activeProject\", res);\n          resolve(res);\n          // self.props.load()\n\n          // Fn.store({ label: 'activePro===', value: res })\n\n          // self.setState({ projects: res, ready: true })\n        });\n      // resolve()\n    });\n  },\n  updateEvent: async __ => {\n    return new Promise(async resolve => {\n      const { self, event } = __;\n\n      let url = api.url(\"events\") + event.id;\n\n      let config = {\n        method: \"PATCH\",\n        headers: {\n          Authorization: \"Bearer \" + Fn.get(\"account\").tokens.access.token,\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(event)\n      };\n\n      await fetch(url, config)\n        .then(res => {\n          return res.json();\n        })\n        .then(async res => {\n          console.log(\"[[ Updated Event ]]\", res);\n          Fn.set(\"activeEvent\", res);\n          resolve(res);\n          // self.props.load()\n\n          // Fn.store({ label: 'activePro===', value: res })\n\n          // self.setState({ projects: res, ready: true })\n        });\n      // resolve()\n    });\n  },\n  checkConfirmed: __ => {\n    const { invited, crew } = __;\n    let invited_ = [];\n    console.log(\"chechConfirmed\", invited);\n    console.log(\"chechConfirmed\", crew);\n\n    return new Promise(async resolve => {\n      for (let item of invited) {\n        let filterCrew = crew.filter(a => a.id === item.id);\n        let crewIncludesUser = filterCrew.length > 0;\n\n        if (crewIncludesUser) {\n          item.isConfirmed = true;\n          invited_.push(item);\n        } else {\n          item.isConfirmed = false;\n          invited_.push(item);\n        }\n      }\n      console.log(\"invited\", invited_);\n      resolve(invited_);\n    });\n  },\n  createNewConversation: async __ => {\n    // console.log('  ')\n    // console.log('  ')\n    // console.log('  ')\n    return new Promise(async resolve => {\n      const { self, selfUserId, recipientId } = __;\n\n      let conversation = {\n        participants: [selfUserId, recipientId],\n        messages: [],\n        author: selfUserId,\n        type: 'private'\n      };\n      // console.log('[[ Conv to create ]]', conversation)\n      let apiUrl = \"https://api.crew20.devcolab.site/v1/conversations/\";\n\n      let config = {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(conversation)\n      };\n      // // console.log('conversation to create ',config)\n      return await fetch(apiUrl, config)\n        .then(res => {\n\n          return res.json()\n\n        })\n        .then(async conversation => {\n\n          // console.log('[[ new Converation created ]]', conversation )\n\n          resolve(conversation)\n\n          // let userId = selfUserId;\n\n          // await Fn.fetchConversations({ self, userId: selfUserId }).then( conversations => {\n          //   resolve(conversations)\n          // })\n\n          // self.setState({\n          //     conversations: res,\n          //     activeConversation: res[0],\n          //     ready: true\n          // })\n\n          // Fn.store({ label: 'conversations', value: res })\n\n          // return res\n\n          // self.props.updateActiveConversation({\n          //     conversation: res,\n          //     conversationData: {\n          //         authorData: self.props.authorData,\n          //         recipientData: self.props.recipientData\n          //     }\n          // })\n        });\n    })\n\n\n  },\n  createProjectConversation: async __ => {\n    // console.log('  ')\n    // console.log('  ')\n    // console.log('  ')\n    return new Promise(async resolve => {\n      const { self, projectOwner, type } = __;\n\n      let conversation = {\n        participants: [projectOwner],\n        messages: [],\n        author: projectOwner,\n        type: type\n      };\n      // console.log('[[ Conv to create ]]', conversation)\n      // let apiUrl = \"https://api.crew20.devcolab.site/v1/conversations/\";\n      let url = api.url(\"conversations\");\n      let config = {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(conversation)\n      };\n      // // console.log('conversation to create ',config)\n      return await fetch(url, config)\n        .then(res => {\n          return res.json();\n        })\n        .then(async res => {\n          // return res;\n\n          resolve(res);\n          // app.updateProject({ self, project: res })\n\n          // await Fn.fetchConversations({ self, userId: projectOwner });\n        });\n    });\n  },\n  fetchSubscribedProjects: async __ => {\n    return new Promise(async resolve => {\n      const { self, userId } = __;\n\n      let url = api.url(\"projects\") + \"?owner=\" + userId;\n\n      // console.log(\"url\", url);\n\n      return await fetch(url)\n        .then(res => {\n          return res.json();\n        })\n        .then(res => {\n          Fn.set(\"subscribedProjects\", res);\n          resolve(res);\n        });\n    });\n  },\n  fetchEvents: async __ => {\n    return new Promise(async resolve => {\n      const { self, userId } = __;\n\n      let url = api.url(\"events\") + \"?user=\" + userId;\n\n      // console.log(\"url\", url);\n      let config = {\n        // method: \"GET\",\n        headers: {\n          Authorization: \"Bearer \" + Fn.get(\"account\").tokens.access.token,\n          \"Content-Type\": \"application/json\"\n        }\n      };\n      return await fetch(url, config)\n        .then(res => {\n          return res.json();\n        })\n        .then(res => {\n          resolve(res);\n        });\n    });\n  },\n  // createProjectConversation: async __ => {\n  //   // console.log('  ')\n  //   // console.log('  ')\n  //   // console.log('  ')\n\n  //   const { self, day, projectOwner } = __;\n\n  //   let conversation = {\n  //     participants: [projectOwner],\n  //     messages: [],\n  //     author: projectOwner\n  //   };\n  //   // console.log('[[ Conv to create ]]', conversation)\n  //   // let apiUrl = \"https://api.crew20.devcolab.site/v1/conversations/\";\n  //   let url = api.url('conversations')\n  //   let config = {\n  //     method: \"POST\",\n  //     headers: { \"Content-Type\": \"application/json\" },\n  //     body: JSON.stringify(conversation)\n  //   };\n  //   // // console.log('conversation to create ',config)\n  //   return await fetch(url, config)\n  //     .then(res => {\n  //       return res.json();\n  //     })\n  //     .then(async res => {\n\n  //       return res\n  //       // app.updateProject({ self, project: res })\n\n  //       // await Fn.fetchConversations({ self, userId: projectOwner });\n\n  //     })\n  // },\n  createEvent: async __ => {\n    return new Promise(async resolve => {\n      const { self, event } = __;\n\n      console.log(\"event data to insert \", event);\n\n      let conversations = [];\n\n      for (let item of event.days) {\n        let conversation = await app.createProjectConversation({\n          self,\n          projectOwner: event.user,\n          type: \"event\"\n        });\n        if (conversation) {\n          let conv = {\n            day: item,\n            conversationId: conversation.id\n          };\n          conversations.push(conv);\n        }\n      }\n\n      let conversation = await app.createProjectConversation({\n        self,\n        projectOwner: event.user,\n        type: \"event\"\n      });\n\n      if (conversation) {\n        event.conversationId = conversation.id;\n        event.conversations = conversations;\n\n        let url = api.url(\"events\");\n        console.log(\"event to insert \", event);\n        let config = {\n          method: \"POST\",\n          headers: {\n            Authorization: \"Bearer \" + Fn.get(\"account\").tokens.access.token,\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify(event)\n        };\n        console.log(\"config\", config);\n        await fetch(url, config)\n          .then(res => {\n            return res.json();\n          })\n          .then(res => {\n            console.log(\"createEvent res\", res);\n\n            self.setState({\n              isOpen: false\n            });\n\n            self.reload();\n\n            resolve(res);\n          });\n      }\n    });\n  },\n  getDates: async (startDate, stopDate) => {\n    console.log(\"getDates\", startDate, stopDate);\n    return new Promise(async resolve => {\n      var dateArray = [];\n      var current = moment(startDate);\n      var end = moment(stopDate);\n      while (current.isBefore(end)) {\n        // console.log('isBefore', current.isBefore(end), current.isSame(end))\n        dateArray.push(moment(current).format(\"YYYY-MM-DD\"));\n        current = moment(current).add(1, \"days\");\n      }\n      dateArray.push(moment(end).format(\"YYYY-MM-DD\"));\n      // let end\n\n      // while (currentDate <= stopDate) {\n      //   dateArray.push(moment(currentDate).format(\"YYYY-MM-DD\"));\n      //   currentDate = moment(currentDate).add(1, \"days\");\n      // }\n      console.log(\"getDates\", dateArray);\n      // return dateArray;\n      resolve(dateArray);\n    });\n  },\n  refreshTokensEvery10Minutes: async () => {\n    // a.add(10, 'minutes').format('hh:mm')\n\n    // let timestamps = Fn.get('loginTimestamps');\n    console.log(\"refreshTokensEvery10Minutes\");\n\n    setInterval(() => {\n      console.log(\"refreshTokensEvery10Minutes\");\n\n      app.refreshTokens();\n    }, 10 * 60 * 1000);\n  },\n  refreshTokens: async () => {\n    const url = \"https://api.crew20.devcolab.site/v1/auth/refresh-tokens/\";\n    let account = Fn.get(\"account\");\n    const data = {\n      refreshToken: account.tokens.refresh.token\n    };\n    const config = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(data)\n    };\n    await fetch(url, config)\n      .then(res => {\n        return res.json();\n      })\n      .then(res => {\n        console.log(\"[[ Refresh Response ]]\", res);\n\n        if (res.code === 400 || res.code === 401) {\n          notification.open({\n            message: \"Error\",\n            description: res.message\n          });\n        } else {\n          console.log(\"refresh tokens res \", res);\n          account.tokens = res;\n\n          Fn.store({ label: \"authTokens\", value: res });\n          Fn.store({ label: \"account\", value: account });\n          Fn.store({ label: \"isAuthenticated\", value: true });\n\n          let start = moment(new Date().getTime());\n\n          let loginTimestamps = {\n            start: start,\n            check: start.add(10, \"minutes\")\n          };\n          Fn.set(\"loginTimestamps\", loginTimestamps);\n          console.log(\"refreshTokensEvery10Minutes\", loginTimestamps);\n          // this.setState({ isAuthenticated: true, account: res })\n          // this.toggleDialog({ type: null, title: null })\n          // this.props.history.push('/dashboard')\n          // message.success('Logged In');\n        }\n      });\n  },\n  confirmAccount: async __ => {\n    const { self, userId, email } = __;\n    // const url = \"https://api.crew20.devcolab.site/v1/users/\";\n    let url = api.url(\"users\") + userId;\n\n    let user = await fetch(url)\n      .then(res => {\n        return res.json();\n      })\n      .then(res => {\n        return res;\n      });\n\n    // if(user && user.email !== email) {\n    //   notification.open({\n    //     message: 'Error',\n    //     description:\n    //       \"Your email address does not match the account address.\"\n    //   })\n\n    // }\n    if (user) {\n      user.profile.confirmed = true;\n\n      const config = {\n        method: \"PATCH\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(user)\n      };\n      await fetch(url, config)\n        .then(res => {\n          return res.json();\n        })\n        .then(res => {\n          console.log(\" \");\n          console.log(\" \");\n          console.log(\"[[ Account Confirm Response ]]\", res);\n          console.log(\" \");\n\n          self.setConfirmed();\n          // self.setState({\n          //   confirmed: true\n          // })\n        });\n    }\n  },\n  updateUser: async __ => {\n    return new Promise(async resolve => {\n      const { self, user } = __;\n      let url = api.url(\"users\") + user.id;\n      let config = {\n        method: \"PATCH\",\n        headers: {\n          Authorization: \"Bearer \" + Fn.get(\"account\").tokens.access.token,\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(user)\n      };\n\n      await fetch(url, config)\n        .then(res => {\n          return res.json();\n        })\n        .then(res => {\n\n          let account = Fn.get(\"account\");\n\n          account.user = res;\n\n          Fn.set(\"account\", account);\n\n          resolve(user);\n        });\n    });\n  },\n  fetchConnections: async data => {\n    return new Promise(async resolve => {\n      const { self, connections } = data;\n\n      let lastfetch = await Fn.get(\"connections\").time;\n\n      // let shouldFetchNewData = (lastfetch) => {\n\n      //   let time = moment(lastfetch)\n      //   let elapsed = time.diff( moment(new Date())) / 1000;\n      //   return elapsed > 300\n\n      // }\n\n      let shouldFetch = util.shouldFetchNewData(lastfetch);\n\n      if (shouldFetch) {\n        let connections_ = [];\n\n        for (let item of connections) {\n          // let apiUrl = 'https://api.crew20.devcolab.site/v1/users/' + item\n          let apiUrl = api.url(\"users\") + item;\n\n          await fetch(apiUrl)\n            .then(res => {\n              return res.json();\n            })\n            .then(res => {\n              // console.log('fetchConnection response', item, res)\n\n              connections_.push(res);\n            });\n        }\n\n        // console.log('[[ Fetched Connections ]]', connections_)\n\n        Fn.store({\n          label: \"connections\",\n          value: { time: new Date(), data: connections_ }\n        });\n\n        // return connections_\n        // self.setState({\n        //   connections: connections_,\n        //   connectionsReady: true\n        // })\n        resolve(connections_);\n      } else {\n        let connections = Fn.get(\"connections\").data;\n        resolve(connections);\n      }\n    });\n  },\n  addProductionCrewMember: async __ => {\n    return new Promise(async resolve => {\n      const { self, userId, project } = __;\n\n      let crew = project.productionCrew;\n\n      let projectOwnerData = await Fn.fetchUser({\n        self,\n        userId: project.owner\n      });\n      console.log(\"projectOwnerData\", projectOwnerData);\n      let owner = {\n        name: projectOwnerData.profile.name,\n        picture: projectOwnerData.profile.picture\n      };\n      console.log(\"owner\", owner);\n      if (crew.filter(a => a.user === userId).length === 0) {\n        let crewMember = {\n          permissions: [],\n          user: userId\n        };\n\n        project.productionCrew.push(crewMember);\n\n        await app.updateProject({ self, project }).then(async response => {\n          //\n          // let __ = { data: { project }, user: userId, owner: owner  }\n\n          let notification_ = notificationTypes.prodCrewInvite({\n            data: { project, sender: owner },\n            user: userId,\n            owner: owner\n          });\n\n          console.log(\"notification_\", notification_);\n          let url = api.url(\"notifications\");\n          let config = {\n            method: \"POST\",\n            headers: {\n              \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(notification_)\n          };\n          await fetch(url, config)\n            .then(res => {\n              return res.json();\n            })\n            .then(res => {\n              console.log(\"inserted notification\", res);\n            });\n\n          notification.open({\n            message: \"Success\",\n            description: \"User added to production crew\"\n          });\n          resolve(response);\n        });\n      } else {\n        notification.open({\n          message: \"Error\",\n          description: \"User is already part of production crew\"\n        });\n\n        resolve({ status: \"error\" });\n      }\n\n      // if(crew.filter(a => a.user === userId).length > 0) {\n\n      //   notification.open({\n      //     message: \"Error\",\n      //     description: \"User is already part of production crew\"\n      //   });\n\n      //   resolve({ status: 'error'})\n\n      // }\n    });\n  }\n};\nexport const ui = {\n  mobile: () => {\n    return Fn.get(\"isMobile\");\n\n    console.log(\" \");\n    console.log(\" \");\n    // console.log('App checkAuth')\n    console.log(\" \");\n    console.log(\" \");\n  },\n  checkmobile: () => {\n    // console.log(\" \");\n    // console.log(\" \");\n    // console.log(\"UI Check Mobile\");\n    // console.log(\" \");\n    // console.log(\" \");\n    if (window.matchMedia(\"only screen and (max-width: 760px)\").matches) {\n      Fn.set(\"isMobile\", true);\n    } else {\n      Fn.set(\"isMobile\", false);\n    }\n  }\n};\nexport const util = {\n  shouldFetchNewData: async lastfetch => {\n    let time = moment(lastfetch);\n    let elapsed = time.diff(moment(new Date())) / 1000;\n    return elapsed > 300;\n  },\n  unique: async __ => {\n    return new Promise(async resolve => {\n      const { array } = __;\n      let set = new Set();\n      for (let item of array) {\n        set.add(item);\n      }\n      let uniqueArray = Array.from(set);\n      resolve(uniqueArray);\n    });\n  }\n};\nexport const Fn = {\n  saveSnapShot: (label, value) => {\n    localStorage.setItem(label, JSON.stringify(value));\n  },\n  initialise: () => { },\n  set: (type, value) => {\n    localStorage.setItem(type, JSON.stringify(value));\n  },\n  fetchAuthors: async __ => {\n    const { self, authorIds } = __;\n\n    console.log(\"fetching authors\");\n\n    let authors = [];\n\n    for (let authorId of authorIds) {\n      let authorData = await api.fetch(\"users\", authorId);\n      authors.push(authorData);\n      // return authorData\n    }\n\n    console.log(\" \");\n    console.log(\" \");\n    console.log(\" \");\n    console.log(\"[[ participants : authors ]] \", authors);\n    console.log(\" \");\n    console.log(\" \");\n    console.log(\" \");\n\n    return authors;\n    //   self.setState({\n    //     conversations: conversations,\n    //     activeConversation: conversations[0],\n    //     ready: true,\n    //     conversationReady: true\n\n    //   })\n\n    //   setTimeout(() => {\n    //     if (document.getElementById('MessagesList')) {\n    //       document.getElementById('MessagesList').scroll({\n    //         top: 999999999999,\n    //         left: 0,\n    //         behavior: 'smooth'\n    //       });\n    //     }\n    //   }, 500)\n  }\n};\nexport const api = {\n  base: () => {\n    if (\n      localStorage &&\n      localStorage.getItem(\"env\") !== null &&\n      JSON.parse(localStorage.getItem(\"env\")).set === true\n    ) {\n      let env = JSON.parse(localStorage.getItem(\"env\")).env;\n      // console.log('environment override is active', env)\n\n      if (env === \"development\") {\n        // console.log('appconfig', appconfig, appconfig.api, appconfig.api.dev)\n        return appconfig.api.dev;\n      }\n      if (env === \"production\") {\n        // console.log('appconfig', appconfig, appconfig.api, appconfig.api.prod)\n        return appconfig.api.prod;\n      }\n    } else {\n      if (process.env.NODE_ENV === \"development\") {\n        return appconfig.api.dev;\n      }\n      if (process.env.NODE_ENV === \"production\") {\n        return appconfig.api.prod;\n      }\n    }\n  },\n  url: type => {\n    if (type) {\n      return api.base() + type + \"/\";\n    } else {\n      return api.base();\n    }\n  },\n  fetch: async (type, id) => {\n    // const { type, id } = __\n\n    return new Promise(async resolve => {\n      let url = api.url(type) + id;\n\n      await fetch(url)\n        .then(res => {\n          return res.json();\n        })\n        .then(res => {\n          // return res\n          resolve(res);\n        });\n    });\n  },\n  post: async (type, body) => {\n    // const { type, id } = __\n\n    return new Promise(async resolve => {\n      let url = api.url(type);\n      let config = {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(body)\n      };\n\n      await fetch(url, config)\n        .then(res => {\n          return res.json();\n        })\n        .then(res => {\n          // return res\n          resolve(res);\n        });\n    });\n  },\n  fetch_: async __ => {\n    const { self, type, method, id, filter, data } = __;\n\n    let apiUrl = api.url(type);\n\n    let config = {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      method: method,\n      body:\n        method === \"POST\" || method === \"PUT\" || method === \"PATCH\"\n          ? JSON.stringify(data)\n          : null\n    };\n\n    await fetch(apiUrl, config)\n      .then(res => {\n        return res.json();\n      })\n      .then(res => {\n        return res;\n      });\n  },\n  fetchAndSet: async __ => {\n    const { self, type, method, id, filter, data } = __;\n\n    const res = await api.fetch(__);\n\n    self.setState({\n      [type]: res\n    });\n  }\n};\n\nFn.initialise = {};\nFn.apiBase = type => {\n  if (\n    localStorage &&\n    localStorage.getItem(\"env\") !== null &&\n    localStorage.getItem(\"env\").set === true\n  ) {\n    let env = localStorage.getItem(\"env\").env;\n\n    if (env === \"development\") {\n      return appconfig.api.dev + type + \"/\";\n    }\n    if (env === \"production\") {\n      return appconfig.api.prod + type + \"/\";\n    }\n  } else {\n    if (process.env.NODE_ENV === \"development\") {\n      return appconfig.api.dev + type + \"/\";\n    }\n    if (process.env.NODE_ENV === \"production\") {\n      return appconfig.api.dev + type + \"/\";\n    }\n  }\n\n  // if (process.env.NODE_ENV === \"development\") {\n  //     return appconfig.api.dev + type + \"/\"\n  // }\n  // if (process.env.NODE_ENV === \"production\") {\n  //     return appconfig.api.production + type + \"/\"\n  // }\n};\n\nFn.api = type => {\n  // const { type } = data_;\n\n  console.log(\"api type\", type);\n\n  let apiBase = api.url(type);\n\n  return apiBase;\n};\nFn.set = (label, value) => {\n  localStorage.setItem(label, JSON.stringify(value));\n};\n\n// Fn.addToNetwork = async(data) => {\n\n//     const { self, item} = data;\n//     Fn.logger({ label: 'addToNetwork', data: item})\n\n//     let account = Fn.get('account')\n\n//     let user = account.user;\n//     // console.log('[ user to update]', user)\n//     let connections = user.profile.connections;\n//     connections.push(item.id)\n\n//     user.profile.connections = connections;\n\n//     let apiUrl = 'https://api.crew20.devcolab.site/v1/users/' + user.id\n//     let config = {\n\n//         method: \"PATCH\",\n//         headers: { \"Content-Type\": \"application/json\" },\n//         body: JSON.stringify(user)\n//     }\n//     // console.log('config', apiUrl, user, config)\n//     await fetch(apiUrl, config).then(res => {\n//         return res.json()\n//     }).then(res => {\n//         // console.log('addToNetwork response', res)\n//         // return res\n//         account.user = res\n//         Fn.store({ label: 'account', value: account })\n//         self.setState({ isOpen: false })\n//         self.context.updateAccount()\n//         return res\n//     })\n\n// }\n\nFn.getUser = async userId => {\n  return new Promise(async resolve => {\n    let users = Fn.get(\"users\").data;\n\n    let user = users.filter(a => a.id === userId)[0];\n\n    resolve(user);\n  });\n};\n\nFn.fetchUser = async data => {\n  return new Promise(async resolve => {\n    const { self, userId } = data;\n\n    // self.setState({ ready: false });\n    if (!Array.isArray(Fn.get(\"users\"))) {\n      console.log(\"object\");\n      Fn.set(\"users\", []);\n    }\n    let storedUsers = Fn.get(\"users\");\n\n    let userExists = storedUsers.filter(a => a.data.id === userId).length > 0;\n\n    if (userExists) {\n      console.log(\"user is stored\", userExists);\n\n      let user = storedUsers.filter(a => a.data.id === userId)[0];\n\n      if (util.shouldFetchNewData(user.time)) {\n        let url = api.url(\"users\") + userId;\n\n        await fetch(url)\n          .then(res => {\n            return res.json();\n          })\n          .then(async res => {\n            // console.log(\" \");\n            // console.log(\" \");\n            // console.log(\" \");\n            // console.log(\"[[ user data ]] \", res);\n            // console.log(\" \");\n            // console.log(\" \");\n            // console.log(\" \");\n\n            // self.setState({ user: res, ready: true });\n            // let storedUsers = Fn.get('users');\n            // let userExists = storedUsers.filter(a => a.data.id === userId).length > 0;\n            storedUsers.push({ time: new Date(), data: res });\n\n            Fn.set(\"users\", storedUsers);\n            // if(!userExists) {\n            // }\n\n            resolve(res);\n\n            // let connections = res.profile.connections;\n\n            // await Fn.fetchConnections({ self, connections });\n          });\n      } else {\n        resolve(user.data);\n      }\n    } else {\n      console.log(\"user is not stored\", userExists);\n\n      let url = api.url(\"users\") + userId;\n\n      await fetch(url)\n        .then(res => {\n          return res.json();\n        })\n        .then(async res => {\n          // console.log(\" \");\n          // console.log(\" \");\n          // console.log(\" \");\n          // console.log(\"[[ user data ]] \", res);\n          // console.log(\" \");\n          // console.log(\" \");\n          // console.log(\" \");\n\n          // self.setState({ user: res, ready: true });\n          // let storedUsers = Fn.get('users');\n          // let userExists = storedUsers.filter(a => a.data.id === userId).length > 0;\n          let stored = Fn.get(\"users\");\n\n          console.log(\"adding new user to store\", stored);\n\n          stored.push({ time: new Date(), data: res });\n\n          console.log(\"added\", stored);\n\n          Fn.set(\"users\", stored);\n\n          resolve(res);\n\n          // let connections = res.profile.connections;\n\n          // await Fn.fetchConnections({ self, connections });\n        });\n    }\n  });\n};\n\nFn.fetchInvitedUsers = async data => {\n  const { self, project } = data;\n\n  let invitedUsers = project.invited || [];\n\n  let users_ = [];\n\n  for (let user of invitedUsers) {\n    let apiUrl = api.url(\"users\") + user.id;\n\n    await fetch(apiUrl)\n      .then(res => {\n        return res.json();\n      })\n      .then(async res => {\n        users_.push(res);\n      });\n  }\n\n  console.log(\" \");\n  console.log(\" \");\n  console.log(\" \");\n  console.log(\" [ Invited Users Data ] \", users_);\n  console.log(\" \");\n  console.log(\" \");\n\n  self.setState({\n    invited: users_\n  });\n};\nFn.fetchShortlistedUsers = async data => {\n  const { self, users } = data;\n\n  let users_ = [];\n\n  for (let user of users) {\n    // let apiUrl = 'https://api.crew20.devcolab.site/v1/users/' + user.id;\n    let apiUrl = api.url(\"users\") + user.id;\n\n    await fetch(apiUrl)\n      .then(res => {\n        return res.json();\n      })\n      .then(async res => {\n        users_.push(res);\n      });\n  }\n\n  self.setState({\n    shortlist: users_\n  });\n};\n\nFn.approveCrewApplication = async data_ => {\n  const { self, project, application } = data_;\n\n  let projectId = application.project;\n\n  // let projectData =\n  let crew = new Set(project.crew);\n\n  crew.add({\n    id: application.applicant.id,\n    position: application.position.title\n  });\n  let crew_ = Array.from(crew);\n  project.crew = crew_;\n\n  // console.log(' ')\n  // console.log('project',project)\n\n  // console.log(' ')\n\n  let config = {\n    method: \"PATCH\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(project)\n  };\n\n  // let apiUrl = 'https://api.crew20.devcolab.site/v1/projects/' + project.id;\n  let apiUrl = api.url(\"projects\") + project.id;\n\n  await fetch(apiUrl, config)\n    .then(res => {\n      return res.json();\n    })\n    .then(async res => {\n      // console.log(' ')\n      // console.log('approve application response ', res)\n      // console.log(' ')\n\n      self.setState({\n        project: res\n      });\n\n      Fn.store({ label: \"activeProject\", value: res });\n\n      notification.open({\n        message: \"Approved\",\n        description:\n          application.applicant.profile.name.first +\n          \" \" +\n          application.applicant.profile.name.last +\n          \" has been added to the project crew.\"\n      });\n\n      self.load();\n    });\n};\nFn.fetchScheduleUsers = async data => {\n  const { self, people } = data;\n  console.log(\"fetchScheduleUsers\", data);\n  // self.setState({ ready: false })\n  // self.setState({ user: null, userid: null, connections: null  })\n\n  // let apiUrl = 'https://api.crew20.devcolab.site/v1/users/';\n\n  let people_ = [];\n\n  for (let item of people) {\n    if (item.id) {\n      let apiUrl = api.url(\"users\") + item.id;\n\n      await fetch(apiUrl)\n        .then(res => {\n          return res.json();\n        })\n        .then(async res => {\n          console.log(\"fetchUsers response\", res);\n\n          people.push(item);\n        });\n    } else {\n      let apiUrl = api.url(\"users\") + item;\n\n      await fetch(apiUrl)\n        .then(res => {\n          return res.json();\n        })\n        .then(async res => {\n          console.log(\"fetchUsers response\", res);\n\n          people.push(item);\n        });\n    }\n  }\n\n  return people_;\n\n  // console.log(\"people\", people_);\n  // self.setState({\n  //   people: people_,\n  //   peopleReady: true\n  // });\n};\nFn.fetchUsers = async data => {\n  const { self, positions } = data;\n  console.log(\"fetchUsers\", data);\n  // self.setState({ ready: false })\n  // self.setState({ user: null, userid: null, connections: null  })\n\n  // let apiUrl = 'https://api.crew20.devcolab.site/v1/users/';\n  return new Promise(async resolve => {\n    let positions_ = [];\n    for (let item of positions) {\n      let apiUrl = api.url(\"users\") + \"?position=\" + item;\n\n      await fetch(apiUrl)\n        .then(res => {\n          return res.json();\n        })\n        .then(async res => {\n          console.log(\"fetchUsers response\", res);\n\n          let item_ = {\n            position: item,\n            users: res\n          };\n          // console.log('item_', item_)\n\n          positions_.push(item_);\n\n          // for (let item of positions) {\n\n          // }\n\n          // console.log('positions', positions_)\n\n          // return res\n          // let connections = res.profile.connections;\n\n          // await Fn.fetchConnections({ self, connections })\n        });\n    }\n    // self.setState({ users: res, ready: true })\n\n    // Fn.store({ label: 'users', value: res })\n    console.log(\"crew\", positions_);\n    self.setState({\n      crew_: positions_\n      // searchLoading: false\n    });\n    resolve(positions_);\n    setTimeout(() => {\n      self.setState({\n        // crew_: positions_,\n        searchLoading: false\n      });\n    }, 1000);\n  });\n};\nFn.fetchConnections = async data => {\n  const { self, connections } = data;\n\n  let connections_ = [];\n\n  for (let item of connections) {\n    // let apiUrl = 'https://api.crew20.devcolab.site/v1/users/' + item\n    let apiUrl = api.url(\"users\") + item;\n\n    await fetch(apiUrl)\n      .then(res => {\n        return res.json();\n      })\n      .then(res => {\n        // console.log('fetchConnection response', item, res)\n\n        connections_.push(res);\n      });\n  }\n\n  // console.log('[[ Fetched Connections ]]', connections_)\n\n  Fn.set(\"connections\", { time: new Date(), data: connections_ });\n\n  // return connections_\n  self.setState({\n    connections: connections_,\n    connectionsReady: true\n  });\n};\n\nFn.fetchApplicantData = async data_ => {\n  const { self, applicants } = data_;\n\n  let applicants_ = [];\n\n  for (let item of applicants) {\n    // const url = \"https://api.crew20.devcolab.site/v1/users/\" + item.applicant\n    const url = api.url(\"users\") + item.applicant;\n\n    await fetch(url)\n      .then(res => {\n        return res.json();\n      })\n      .then(res => {\n        item.applicant = res;\n\n        applicants_.push(item);\n      });\n\n    // Fn.logger({ data: applicants_, text: \"Applications\", type: \"primary\" });\n\n    Fn.store({ label: \"applications\", value: applicants_ });\n\n    self.setState({\n      applications: applicants_\n    });\n  }\n};\n\nFn.fetchApplications = async data_ => {\n  const { self, project } = data_;\n\n  // const url = \"https://api.crew20.devcolab.site/v1/applications/?project=\" + project.id\n\n  const url = api.url(\"applications\") + \"?project=\" + project.id;\n\n  await fetch(url)\n    .then(res => {\n      return res.json();\n    })\n    .then(async res => {\n      return await Fn.fetchApplicantData({ self, applicants: res });\n\n      // Fn.logger({ data: res, text: \"Applications\", type: 'primary' })\n\n      // Fn.store({ label: 'applications', value: res})\n\n      // self.setState({\n      //     applications: res\n      // })\n    });\n};\n\nFn.applyForPosition = async data_ => {\n  const { self, application } = data_;\n\n  // const url = \"https://api.crew20.devcolab.site/v1/applications\"\n\n  const url = api.url(\"applications\");\n\n  const config = {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(application)\n  };\n\n  // console.log('[[ Application Request config  ]]', config)\n\n  await fetch(url, config)\n    .then(res => {\n      return res.json();\n    })\n    .then(res => {\n      // console.log('[[ Application Response ]]', res)\n\n      setTimeout(() => {\n        self.setState({\n          buttonLoading: false,\n          drawerVisible: false\n        });\n      }, 2000);\n      setTimeout(() => {\n        notification.open({\n          message: \"Application Submitted\",\n          description: \"Your crew application request has been submitted.\"\n        });\n      }, 3000);\n    });\n};\n\nFn.fetchCrew_ = async data_ => {\n  // console.log('fetchCrew config ',data_)\n\n  const { self, next, nextIndex, project } = data_;\n\n  // Fn.logger({ data: next, text: \"Fetching Crew Data\", type: \"primary\" });\n\n  const crew = project.crew;\n\n  // let nextIndex = 0;\n\n  let data = [];\n\n  for (let crewMember of crew) {\n    // const url = \"https://api.crew20.devcolab.site/v1/users/\" + crewMember.id;\n\n    const url = api.url(\"users\") + crewMember.id;\n\n    await fetch(url)\n      .then(res => {\n        return res.json();\n      })\n\n      .then(res => {\n        // console.log(\"[[ Crew Member Data ]]\", res)\n\n        data.push(res);\n      });\n  }\n\n  // Fn.logger({\n  //   data: null,\n  //   text: \"type next : \" + nextIndex + \", \" + typeof next[nextIndex],\n  //   type: \"primary\"\n  // });\n  if (typeof next[nextIndex] === \"function\") {\n    self.setState({\n      crew: data\n    });\n\n    let nextIndex_ = nextIndex + 1;\n\n    next[nextIndex]({\n      self,\n      data,\n      next: next[nextIndex_],\n      nextIndex: nextIndex_\n    });\n  } else {\n    self.setState({\n      crew: data,\n      ready: true\n    });\n  }\n};\n\nFn.fetchProjectOwner = async data_ => {\n  const { self, project } = data_;\n\n  // const url = Fn.api('users') + project.owner\n  const url = api.url(\"users\") + project.owner;\n\n  await fetch(url)\n    .then(res => {\n      return res.json();\n    })\n    .then(res => {\n      console.log(\" \");\n      console.log(\" \");\n      console.log(\" \");\n      console.log(\" \");\n      console.log(\"projectOwner\", res);\n      console.log(\" \");\n      console.log(\" \");\n      console.log(\" \");\n      console.log(\" \");\n\n      window.logged.push({ title: \"projectOwner\", data: res });\n\n      self.setState({\n        projectOwner: res\n      });\n    });\n};\n\nFn.fetchh = async _ => {\n  const { url, type, body } = _;\n\n  let config =\n    type === \"PATCH\" || type === \"PUT\" || type === \"POST\"\n      ? {\n        method: type,\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(body)\n      }\n      : {\n        method: type\n      };\n\n  return await fetch(url, config)\n    .then(res => {\n      return res.json();\n    })\n    .then(res => {\n      return res;\n    });\n};\nFn.fetchProject = async _ => {\n  const { self, projectId, next } = _;\n\n  return new Promise(async resolve => {\n    console.log(_);\n\n    let url = api.url(\"projects\") + projectId;\n\n    let project = await fetch(url)\n      .then(res => {\n        return res.json();\n      })\n      .then(res => {\n        return res;\n      });\n\n    // self.setState({ project })\n\n    // let crew = await Fn.fetchCrew({ self, project })\n\n    resolve(project);\n  });\n};\n\nFn.fetchCrew = async data_ => {\n  // console.log('fetchCrew config ',data_)\n\n  const { self, project } = data_;\n  console.log(\"project\", project);\n\n  // Fn.logger({ data: crew, text: 'Fetching Crew Data', type: 'primary' })\n\n  const crew = project.crew;\n\n  // let nextIndex = 0;\n\n  let data = [];\n\n  for (let crewMember of crew) {\n    // const url = \"https://api.crew20.devcolab.site/v1/users/\" + crewMember.id;\n    const url = api.url(\"users\") + crewMember.id;\n\n    await fetch(url)\n      .then(res => {\n        return res.json();\n      })\n\n      .then(res => {\n        // console.log(\"[[ Crew Member Data ]]\", res)\n\n        data.push(res);\n      });\n  }\n\n  // Fn.logger({ data: null, text: 'type next : ' + nextIndex + \", \" + typeof next[nextIndex], type: 'primary' })\n  self.setState({\n    crew: data,\n    ready: true\n  });\n};\n\nFn.fetchProject__ = async data_ => {\n  const { self, projectId, next } = data_;\n\n  Fn.logger({ data: data_, text: \"Fetching Project Data\", type: \"primary\" });\n\n  let userId = Fn.get(\"account\").user.id;\n\n  let nextIndex = 0;\n\n  // let apiUrl = \"https://api.crew20.devcolab.site/v1/projects/\" + projectId\n  let apiUrl = api.url(\"projects\") + projectId;\n\n  await fetch(apiUrl)\n    .then(res => {\n      console.log(\" \");\n      console.log(\" \");\n      console.log(\"fetch project initial res \", res);\n\n      console.log(\" \");\n      console.log(\" \");\n\n      if (!res.ok) {\n        let a = res.json();\n        a.ok = res.ok;\n        a.status = res.status;\n        return a;\n      }\n      if (res.ok) {\n        let a = res.json();\n        a.ok = res.ok;\n        a.status = res.status;\n        return a;\n      }\n    })\n    .then(async res => {\n      console.log(\" \");\n      console.log(\" \");\n      console.log(\"fetch project json res \", res);\n\n      console.log(\" \");\n      console.log(\" \");\n\n      if (!res.hasOwnProperty(\"id\")) {\n        self.props.history.push(\"/notfound\");\n        return false;\n      }\n      if (res.hasOwnProperty(\"id\")) {\n        self.setState({\n          project: res\n        });\n\n        await Fn.fetchInvitedUsers({ self, users: res.invited });\n\n        Fn.store({ label: \"activeProject\", value: res });\n\n        let projectOwner = res.owner;\n\n        await Fn.fetchProjectOwner({ self, userId: projectOwner });\n\n        // console.log(' ')\n        // console.log(' ')\n        // console.log('isOwner', projectOwner, userId)\n        // console.log(' ')\n        if (projectOwner === userId) {\n          self.setState({\n            userIsOwner: true\n          });\n        }\n\n        if (typeof next[nextIndex] === \"function\") {\n          let nextIndex_ = nextIndex + 1;\n\n          // console.log(' ')\n          // console.log(' ')\n\n          // console.log('fetchProject next ',{ next: next, self, project: res, next: next[nextIndex_], nextIndex: nextIndex_ })\n\n          // console.log(' ')\n\n          // let fn = next[nextIndex];\n          // JSON.stringify(fn)\n          // // console.log('fn', next, next[nextIndex])\n          // return await fn({ self: self, project: res, next: next[nextIndex_], nextIndex: nextIndex_ })\n\n          return await next[nextIndex]({\n            self: self,\n            project: res,\n            next: next[nextIndex_],\n            nextIndex: nextIndex_\n          });\n\n          // return await next[0]({ self, project: res, next })\n        } else {\n          // self.setState({ ready: true})\n        }\n      }\n    });\n};\nFn.fetchProjects = async data => {\n  const { self } = data;\n\n  // let apiUrl = \"https://api.crew20.devcolab.site/v1/projects\";\n\n  let apiUrl = api.url(\"projects\");\n\n  return await fetch(apiUrl)\n    .then(res => {\n      return res.json();\n    })\n    .then(async res => {\n      // console.log('[[ Fetched Projects]]', res)\n\n      Fn.store({ label: \"activeProject\", value: res[0] });\n      Fn.store({ label: \"projects\", value: res });\n\n      if (self) {\n        self.setState({\n          drawerReady: true,\n          projects: res,\n          activeProject: res[0],\n          ready: true\n        });\n      } else {\n        return res;\n      }\n    });\n};\n\nFn.fetchCommentAuthors = async data_ => {\n  const { self, authorIds } = data_;\n  // console.log('comments',comments)\n\n  console.log(\" \");\n  console.log(\" \");\n  console.log(\" \");\n  console.log(\"[[ authorIds ]]\", authorIds);\n  console.log(\" \");\n  console.log(\" \");\n  console.log(\" \");\n\n  return new Promise(async resolve => {\n    let authors = [];\n\n    for (let authorId of authorIds) {\n      // let commentAuthorId = item.author;\n\n      // let url = Fn.api('users') + authorId\n      let url = api.url(\"users\") + authorId;\n\n      await fetch(url)\n        .then(res => {\n          return res.json();\n        })\n        .then(res => {\n          // item.authorData = res\n\n          authors.push(res);\n        });\n\n      // console.log('Fn.api(user)',Fn.api('user'))\n    }\n\n    self.setState({\n      authors: authors,\n      ready: true,\n      conversationReady: true\n    });\n    console.log(\" \");\n    console.log(\" \");\n    console.log(\" \");\n    console.log(\"[[ authors  ]]\", authors);\n    console.log(\" \");\n    console.log(\" \");\n    console.log(\" \");\n\n    setTimeout(() => {\n      if (document.getElementById(\"MessagesList\")) {\n        document.getElementById(\"MessagesList\").scroll({\n          top: 9999999999,\n          left: 0,\n          behavior: \"smooth\"\n        });\n      }\n    }, 500);\n\n    resolve(authors);\n  });\n\n  // return comments_\n};\nFn.fetchCommentAuthor = async data_ => {\n  const { self, authorId } = data_;\n  // console.log('comments',comments)\n\n  // let url = Fn.api('users') + authorId\n  let url = api.url(\"users\") + authorId;\n\n  let author = await fetch(url)\n    .then(res => {\n      return res.json();\n    })\n    .then(res => {\n      return res;\n    });\n\n  let a = new Set(self.state.authors);\n\n  a.add(author);\n\n  let b = Array.from(a);\n  // res\n  self.setState({ authors: b });\n\n  // self.setState( self.state => ({ authors: [res, ...self.state.authors] }))\n\n  // return comments_\n};\nFn.filterSubscribedProjects = async data => {\n  const { self, projects, next } = data;\n\n  let userId = Fn.get(\"account\").user.id;\n\n  // let userId = api.url('account')\n  let p = [];\n\n  for (let project of projects) {\n    let crew = project.crew;\n\n    let isCrew = crew.filter(a => a.id === userId);\n    // console.log(' ')\n    // console.log('isCrew',isCrew)\n    // console.log(' ')\n    if (isCrew.length > 0) {\n      p.push(project);\n    }\n  }\n\n  // projects.filter(a => a.crew.filter(c => c.id === userId)[0].id === )\n  Fn.store({ label: \"activeProject\", value: p[0] });\n\n  Fn.store({ label: \"subscribedProjects\", value: p });\n\n  self.setState({\n    drawerReady: true,\n    subscribedProjects: p,\n    activeProject: p[0]\n  });\n\n  if (typeof next === \"function\") {\n    self.setState({ ready: false });\n\n    // eval()\n    next({ self });\n  } else {\n    self.setState({ ready: true });\n  }\n};\n\nFn.fetchSubscribedProjects = async data => {\n  const { self, userId } = data;\n\n  let apiUrl = api.url(\"projects\");\n\n  return new Promise(async resolve => {\n    return await fetch(apiUrl)\n      .then(res => {\n        return res.json();\n      })\n      .then(async res => {\n        let subscribed = [];\n\n        console.log(\"### all projects sub res\", res);\n\n        for (let project of res) {\n          let crew = project.crew;\n\n          let isCrew = crew.filter(a => a.id === userId);\n\n          if (isCrew.length > 0) {\n            subscribed.push(project);\n          }\n        }\n\n        Fn.set(\"subscribedProjects\", subscribed);\n\n        Fn.set(\"activeProject\", subscribed[0]);\n\n        self.setState({\n          // ready: true,\n          // drawerReady: true,\n          subscribedProjectsReady: true,\n          subscribedProjects: subscribed,\n          activeProject: subscribed[0]\n        });\n\n        resolve(subscribed);\n      });\n  });\n};\nFn.fetchOwnProjects = async data => {\n  const { self } = data;\n\n  const userId = Fn.get(\"account\").user.id;\n\n  let apiUrl = api.url(\"projects\") + \"?owner=\" + userId;\n\n  return new Promise(async resolve => {\n    return await fetch(apiUrl)\n      .then(res => {\n        return res.json();\n      })\n      .then(async res => {\n        console.log(\"[[ Fetched Own Projects]]\", res);\n\n        Fn.store({ label: \"activeProject\", value: res[0] });\n\n        Fn.store({ label: \"ownProjects\", value: res });\n\n        resolve(res);\n      });\n  });\n};\nFn.getDates = async (startDate, stopDate) => {\n  var dateArray = [];\n  var currentDate = moment(startDate);\n  var stopDate = moment(stopDate);\n  while (currentDate <= stopDate) {\n\n    dateArray.push(moment(currentDate).format(\"YYYY-MM-DD\"));\n    currentDate = moment(currentDate).add(1, \"days\");\n  }\n  dateArray.push(moment(stopDate).format(\"YYYY-MM-DD\"));\n\n  console.log('get days', dateArray)\n  return dateArray;\n};\nFn.createProject = async data => {\n  const { self, project, message } = data;\n\n  // project.owner = Fn.get('account').user.id;\n\n  let p = {};\n  p.title = project.projectName;\n\n  p.description = \"\";\n  p.type = project.projectType;\n\n  p.start_date = project.projectDate;\n  p.end_date = project.projectEndDate;\n  p.positions = project.positions;\n\n  let days = Fn.getDates(project.projectDate, project.projectEndDate);\n  // for (let item of project.positions) {\n  //   let pos = {\n  //     title: item,\n  //     description: \"\"\n  //   };\n  //   p.positions.push(pos);\n  // }\n  console.log(\"project\", project);\n  p.location =\n    typeof project.location.address.county !== \"undefined\"\n      ? project.location.address.county\n      : project.location.address.county;\n\n  p.owner = Fn.get(\"account\").user.id;\n  p.crew = [];\n  p.productionCrew = [\n    {\n      user: Fn.get(\"account\").user.id,\n      permissions: [\n        \"projectfiles\",\n        \"projectsettings\",\n        \"projectpeople\",\n        \"projectchecklists\",\n        \"projectratecalculator\"\n      ]\n    }\n  ];\n  p.comments = [];\n  p.invited = project.invited;\n\n  p.shortlist = project.shortlist;\n\n  p.createdAt = new Date();\n  p.checklists = [];\n  p.threads = [];\n  p.conversations = [];\n  p.days = days;\n\n  // p.conversation = {}\n  for (let item of days) {\n    let conv = await app.createProjectConversation({\n      self,\n      projectOwner: Fn.get(\"account\").user.id,\n      type: \"project\"\n    });\n\n    if (conv) {\n      let item_ = {\n        day: item,\n        conversationId: conv.id\n      };\n      p.conversations.push(item_);\n    }\n  }\n\n  let conversation = await app.createProjectConversation({\n    self,\n    projectOwner: Fn.get(\"account\").user.id,\n    type: \"event\"\n  });\n\n  if (conversation) {\n    p.conversationId = conversation.id;\n\n    // // console.log(' ')\n    // // console.log(' ')\n    // // console.log(' ')\n    // // console.log(' ')\n    // // console.log('[[ Project to create ]] ', p)\n    console.log(\" \");\n    console.log(\" \");\n    console.log(\"[[ Project to create ]] \", JSON.stringify(p));\n    console.log(\" \");\n    console.log(\" \");\n\n    // let apiUrl = \"https://api.crew20.devcolab.site/v1/projects/\";\n    let apiUrl = api.url(\"projects\");\n\n    const config = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(p)\n    };\n\n    return await fetch(apiUrl, config)\n      .then(res => {\n        // // console.log(' ','[[ Status ]] ',res,' ')\n        // // console.log\n\n        if (!res.ok) {\n          notification.open({\n            message: \"Error Creating Project\",\n            description: \"Error creating project.\"\n          });\n        } else {\n          notification.open({\n            message: \"Project Created\",\n            description: \"Your project has been created successfully.\"\n          });\n        }\n\n        return res.json();\n      })\n      .then(res => {\n        // console.log('[[ Project Insert Response ]]', res)\n\n        // Fn.store({ label: 'projects', value: [res] })\n\n        let crewBuilder = Fn.get(\"crewBuilder\");\n\n        crewBuilder.hasBeenUploaded = true;\n\n        Fn.store({ label: \"crewBuilder\", value: crewBuilder });\n\n        self.setState({\n          createProject: false\n        });\n\n        self.refresh();\n\n        message.destroy();\n      });\n  }\n};\n// Fn.fetchOwnProjects = async (data) => {\n\n//     const { self } = data\n\n//     let userId = Fn.get('account').user.id;\n\n//     // let apiUrl = \"https://api.crew20.devcolab.site/v1/projects?owner=\" + userId;\n//     let apiUrl = api.url('projects') + \"?owner=\" + userId\n\n//     return await fetch(apiUrl).then(res => {\n\n//         return res.json()\n\n//     }).then(async res => {\n\n//         // // console.log('[[ Fetched Projects]]', res)\n\n//         Fn.store({ label: 'ownProjects', value: res })\n\n//         self.setState({ ownProjects: res, ready: true })\n\n//     })\n\n// }\nFn.addUserToProject = async data => {\n  const { self, project, userId, closeDialog } = data;\n\n  // let userId = Fn.get('account').user.id;\n\n  let crew = new Set(project.crew);\n\n  crew.add({ id: userId });\n  let crew_ = Array.from(crew);\n  project.crew = crew_;\n\n  // let apiUrl = \"https://api.crew20.devcolab.site/v1/projects/\" + project.id;\n  let apiUrl = api.url(\"projects\") + project.id;\n\n  let config = {\n    method: \"PATCH\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify(project)\n  };\n\n  return await fetch(apiUrl, config)\n    .then(res => {\n      return res.json();\n    })\n    .then(async res => {\n      // // console.log('[[ Updated Project with Crew Member ]]', res)\n      notification.info({\n        message: \"Added to Project\",\n        description: \"User has been added to your project.\",\n\n        placement: \"bottomRight\"\n      });\n\n      closeDialog();\n      // Fn.store({ label: 'activePro===', value: res })\n\n      // self.setState({ projects: res, ready: true })\n    });\n};\nFn.fetchAuthor = async data => {\n  const { self, authorId } = data;\n  // let apiUrl = \"https://api.crew20.devcolab.site/v1/users/\" + authorId;\n  let apiUrl = api.url(\"users\") + authorId;\n  // let config = {\n  //     method: \"PATCH\",\n  //     headers: { \"Content-Type\": \"application/json\" },\n  //     body: JSON.stringify(project)\n\n  // }\n\n  return await fetch(apiUrl)\n    .then(res => {\n      return res.json();\n    })\n    .then(res => {\n      // // console.log('[[ Author data ]]', res)\n\n      self.setState({\n        author: res,\n        ready: true\n      });\n    });\n};\nFn.updateProjectComments = async data => {\n  const { self, project } = data;\n\n  // console.log('Project to update', project)\n\n  // let p = {...project}\n\n  // let apiUrl = \"https://api.crew20.devcolab.site/v1/projects/\" + project.id;\n  let apiUrl = api.url(\"projects\") + project.id;\n\n  let config = {\n    method: \"PATCH\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify(project)\n  };\n\n  return await fetch(apiUrl, config)\n    .then(res => {\n      return res.json();\n    })\n    .then(async res => {\n      console.log(\"[[ Updated Project with comments ]]\", res);\n      self.props.load();\n\n      // Fn.store({ label: 'activePro===', value: res })\n\n      // self.setState({ projects: res, ready: true })\n    });\n};\nFn.hideDrawer = async data => {\n  const { self } = data;\n  self.setState({\n    activeTab: \"1\",\n    projectInfoVisible: false,\n    conversationReady: false\n  });\n  setTimeout(() => {\n    self.setState({\n      drawerReady: false\n    });\n    setTimeout(() => {\n      self.setState({\n        drawerReady: true\n      });\n    }, 500);\n  }, 500);\n};\nFn.submitBio = async data_ => {\n  const { self, data } = data_;\n  let account = Fn.get(\"account\");\n  let userId = account.user.id;\n  let user = account.user;\n  user.profile.bio = data;\n  // console.log('userId', userId)\n  // let apiUrl = 'http://3.135.242.213:3030/nedb/users/' + accountId\n  // let apiUrl = 'https://api.crew20.devcolab.site/v1/users/' + userId\n  let apiUrl = api.url(\"users\") + userId;\n  let config = {\n    method: \"PATCH\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify(user)\n    // body: account\n  };\n  // console.log('config', config)\n  await fetch(apiUrl, config)\n    .then(res => {\n      return res.json();\n    })\n    .then(res => {\n      // console.log('submitBio response', res)\n      // return res\n      account.user = res;\n      Fn.store({ label: \"account\", value: account });\n      self.setState({ isOpen: false });\n      self.context.updateAccount();\n      return res;\n    });\n};\n\nFn.updateSkills = async data => {\n  const { self, skills } = data;\n\n  let account = Fn.get(\"account\");\n\n  let userId = account.user.id;\n\n  let user = account.user;\n\n  user.profile.additional.skills = skills;\n\n  // let apiUrl = 'https://api.crew20.devcolab.site/v1/users/' + userId\n  let apiUrl = api.url(\"users\") + userId;\n\n  let config = {\n    method: \"PATCH\",\n\n    headers: { \"Content-Type\": \"application/json\" },\n\n    body: JSON.stringify(user)\n  };\n\n  // // console.log('config', user)\n\n  await fetch(apiUrl, config)\n    .then(res => {\n      return res.json();\n    })\n    .then(res => {\n      // console.log('Update Skills response', res)\n\n      account.user = res;\n\n      Fn.store({ label: \"account\", value: account });\n\n      self.setState({ isOpen: false });\n\n      self.context.updateAccount();\n\n      return res;\n    });\n};\n\nFn.submitProfile = async data_ => {\n  const { self, data } = data_;\n\n  console.log(\"data\", data);\n\n  let account = Fn.get(\"account\");\n\n  let userId = account.user.id;\n\n  let user = account.user;\n\n  user.profile.name = {\n    first: data.firstname,\n    last: data.lastname\n  };\n\n  user.profile.dob = data.dob;\n  user.profile.gender = data.gender;\n  user.profile.location = data.location;\n  user.position = data.role;\n\n  console.log(\"user\", user);\n\n  // let apiUrl = 'https://api.crew20.devcolab.site/v1/users/' + userId\n  let apiUrl = api.url(\"users\") + userId;\n\n  let config = {\n    method: \"PATCH\",\n\n    headers: { \"Content-Type\": \"application/json\" },\n\n    body: JSON.stringify(user)\n  };\n\n  // console.log('config', user)\n\n  await fetch(apiUrl, config)\n    .then(res => {\n      return res.json();\n    })\n    .then(res => {\n      // console.log('submitBio response', res)\n\n      account.user = res;\n\n      Fn.store({ label: \"account\", value: account });\n\n      self.setState({ isOpen: false });\n\n      self.context.updateAccount();\n\n      return res;\n    });\n};\n\nFn.submitPortfolioItem = async data_ => {\n  const { self, data, updateAccount, closeDialog } = data_;\n\n  let account = Fn.get(\"account\");\n\n  let userId = account.user.id;\n\n  let user = account.user;\n\n  let projects =\n    typeof user.profile.projects !== \"undefined\" ? user.profile.projects : [];\n\n  projects.push(data);\n\n  user.profile.projects = projects;\n\n  // // console.log('userId', userId)\n\n  // let apiUrl = 'https://api.crew20.devcolab.site/v1/users/' + userId\n  let apiUrl = api.url(\"users\") + userId;\n\n  let config = {\n    method: \"PATCH\",\n\n    headers: { \"Content-Type\": \"application/json\" },\n\n    body: JSON.stringify(user)\n  };\n\n  // console.log('config', user)\n\n  await fetch(apiUrl, config)\n    .then(res => {\n      return res.json();\n    })\n    .then(res => {\n      // console.log('submitBio response', res)\n\n      account.user = res;\n\n      Fn.store({ label: \"account\", value: account });\n\n      self.setState({ isOpen: false });\n\n      updateAccount();\n      closeDialog();\n\n      return res;\n    });\n};\n\nFn.addToNetwork = async data => {\n  const { self, item } = data;\n\n  // console.log('User to add to network', item)\n\n  let account = Fn.get(\"account\");\n  // console.log('user to update', account.user)\n  let requestUserId = account.user.id;\n\n  let connections = account.user.profile.connections;\n  let pending = account.user.profile.network.pending;\n\n  connections.push(item.id);\n  const distinctConnections = [...new Set(connections)];\n  account.user.profile.connections = distinctConnections;\n\n  pending.push(item.id);\n  const distinctPending = [...new Set(pending)];\n  account.user.profile.network.pending = distinctPending;\n\n  // // console.log('accountId', accountId)\n\n  // let apiUrl = 'http://3.135.242.213:3030/nedb/users/' + accountId\n\n  let apiUrl = api.url(\"users\") + requestUserId;\n  let apiUrl1 = api.url(\"users\") + item.id;\n\n  let config = {\n    method: \"PATCH\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify(account.user)\n  };\n\n  // console.log('config', config)\n\n  await fetch(apiUrl, config)\n    .then(res => {\n      return res.json();\n    })\n    .then(res => {\n      // console.log('addToNetwork response', res)\n\n      account.user = res;\n\n      Fn.store({ label: \"account\", value: account });\n\n      self.setState({ isOpen: false, AddToNetworkButtonLoading: false });\n\n      self.context.updateAccount();\n\n      notification.open({\n        message: \"Added to Network\",\n        description:\n          \"A connect request has been sent to \" +\n          item.profile.name.first +\n          \" \" +\n          item.profile.name.last\n      });\n\n      Fn.createNetworkNotification({});\n\n      return res;\n    });\n\n  // let apiUrl1 = 'https://api.crew20.devcolab.site/v1/users/' + item.id\n  let userData = await fetch(apiUrl1)\n    .then(res => {\n      return res.json();\n    })\n    .then(res => {\n      // console.log('[[ Connecting user data ]]', res)\n      return res;\n    });\n\n  // console.log('UserData', userData)\n  let connections1 = userData.profile.connections;\n\n  connections1.push(requestUserId);\n  const distinctConnections1 = [...new Set(connections1)];\n  userData.profile.connections = distinctConnections1;\n  // connections1.push(userId)\n\n  let config1 = {\n    method: \"PATCH\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify(userData)\n  };\n\n  await fetch(apiUrl1, config1)\n    .then(res => {\n      return res.json();\n    })\n    .then(res => {\n      // console.log('addToNetwork2 response', res)\n    });\n};\nFn.fetch = async options => {\n  const { collection, self } = options;\n\n  // console.log('[[ Fn.fetch options ]]', options)\n\n  const dbInitData = {\n    type: \"alert\",\n    text: \"First alert to initialise the remote alerts db.\",\n    createdAt: new Date()\n  };\n\n  const config = {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"access-control-expose-headers\": \"X-jsonBlob\"\n    },\n    body: JSON.stringify(dbInitData)\n  };\n\n  const url = appconfig.storageProvider.initUrl;\n\n  await fetch(url, config).then(res => {\n    Fn.store({\n      label: \"db_alerts_endpoint_id\",\n      value: res.headers.get(\"X-jsonBlob\")\n    });\n\n    success.add(url);\n\n    return res.headers.get(\"X-jsonBlob\");\n  });\n  // return new Promise(async resolve => {\n\n  //     let a = await Fn.checkExists({ self, values })\n\n  //     resolve(a)\n\n  // })\n};\n\nFn.logger = async config => {\n  const { data, text, type } = config;\n\n  // const colorScheme = type.length && colorScheme[type]\n  const logPrimary = [\n    \"background: #38c172\",\n    ,\n    \"padding: 1rem 0.7rem\",\n    \"border: none\",\n    \"color: white\",\n    \"display: block\",\n    \"line-height: auto\",\n    \"text-align: left\",\n    \"font-weight: bold\",\n    \"font-size: 0.9rem\",\n    \"border-radius: 2px\",\n    \"width: 100%\",\n    \"margin-top: 1rem\",\n    \"margin-bottom: 1rem\"\n  ].join(\";\");\n\n  const logInfo = [\n    \"background: #f3f3f3\",\n    \"padding: 1rem 0.7rem\",\n    \"border: none\",\n    \"color: grey\",\n    \"display: block\",\n    \"line-height: 1.5rem\",\n    \"text-align: left\",\n    \"font-weight: light\",\n    \"font-size: 0.8rem\",\n    \"border-radius: 2px\",\n    \"width: 100%\",\n    \"margin-top: 1rem\",\n    \"margin-bottom: 1rem\"\n  ].join(\";\");\n\n  let loggerColorScheme = {\n    alert: logPrimary,\n    info: logInfo\n  };\n\n  {\n    text &&\n      text.length &&\n      console.log(\"%c \" + text + \" \", loggerColorScheme.alert);\n  }\n\n  {\n    data &&\n      data.length &&\n      console.log(\"%c \" + JSON.stringify(data) + \" \", loggerColorScheme.info);\n  }\n\n  {\n    data && data.length && console.log(\"%c data >\", logInfo, data);\n  }\n};\n\nFn.store = data => {\n  // console.log('[[ Storing Data ]]', data)\n\n  const { label, value } = data;\n\n  localStorage.setItem(label, JSON.stringify(value));\n\n  setGlobal({ activeProject: data.value });\n};\n\n// Fn.get = (data) => {\n\n//     return JSON.parse(localStorage.getItem(data))\n\n// }\n\nFn.hydrateDataFromLocalstorage = async data => {\n  const { self } = data;\n\n  self.setState({\n    theme: Fn.get(\"theme\"),\n    layout: Fn.get(\"layout\"),\n    alerts: Fn.get(\"alerts\"),\n    ready: true\n  });\n};\n// Fn.set = (label, value) => {\n//   localStorage.setItem(label, JSON.stringify(value));\n// };\n\nFn.get = label => {\n  // console.log(' get ', label, localStorage[label])\n\n  if (localStorage.getItem(label) === null) {\n    // console.log('object is undefined')\n    // // console.log('label',localStorage[label])\n    // return\n    // return data\n    return {};\n  }\n  if (localStorage.getItem(label) !== null) {\n    // console.log('object is not undefined')\n\n    let a = localStorage.getItem(label);\n\n    // console.log(' ')\n    // console.log(' ')\n    // console.log('localStorage[label]', label, localStorage[label])\n    // console.log(' ')\n\n    if (a !== \"undefined\") {\n      // console.log(' ')\n      // console.log(' ')\n      // console.log('a',a)\n      // console.log(' ')\n\n      return JSON.parse(a);\n    } else {\n      return {};\n    }\n  }\n\n  // else {\n\n  //     let a = localStorage[label]\n  //     // // console.log('[[ Fn.get a ]]', a)\n  //     return JSON.parse(a)\n  // }\n};\n\nFn.getLocallyStoredAlerts = () => {\n  return JSON.parse(localStorage.getItem(\"Alerts\"));\n};\n\nFn.getTheme = () => {\n  return JSON.parse(localStorage.getItem(\"Theme\"));\n};\n\nFn.dummyScript = async data => {\n  // Fn.logger({\n  //   data: null,\n  //   text:\n  //     \"dummy localstorage item does not exist, so we are running this dummy script.\"\n  // });\n\n  localStorage.setItem(\"dummy\", JSON.stringify({ test: \"dummy\" }));\n\n  success.add({});\n};\n\nFn.initialise.Alerts = async data => {\n  const { self } = data;\n\n  return new Promise(async resolve => {\n    Fn.store({ label: \"Alerts\", value: [] });\n\n    self.setState({ alerts: [] });\n\n    success.add({});\n\n    resolve({ alerts: [] });\n  });\n};\nFn.initialise.layout = async data => {\n  const { self } = data;\n\n  return new Promise(async resolve => {\n    Fn.store({ label: \"layout\", value: \"default\" });\n\n    self.setState({ layout: \"default\" });\n\n    success.add({});\n\n    resolve({ layout: \"default\" });\n  });\n};\n\nFn.initialise.theme = async data => {\n  const { self } = data;\n\n  // Fn.logger({ data: null, text: \"Setting theme\" });\n\n  return new Promise(async resolve => {\n    let theme = { base: \"dark\" };\n\n    Fn.store({ label: \"theme\", value: theme });\n\n    self.setState({ theme });\n\n    success.add({});\n\n    resolve({ theme: theme });\n  });\n};\n\nFn.initialise.shift = async data => {\n  const { self } = data;\n\n  return new Promise(async resolve => {\n    Fn.store({ label: \"shift\", value: 200 });\n\n    self.setState({ shift: 200 });\n\n    success.add({});\n\n    resolve({ shift: 200 });\n  });\n};\n\n// Fn.initialise.mvoffset = async (data) => {\n\n//     const { self } = data;\n\n//     return new Promise(async resolve => {\n\n//         Fn.store({ label: 'mvoffset', value: 0 })\n\n//         self.setState({ offsetY: 0 })\n\n//         success.add({})\n\n//         resolve({ offsetY: 0 })\n\n//     })\n\n// }\n\nFn.initialise.mv = async data => {\n  const { self } = data;\n\n  return new Promise(async resolve => {\n    Fn.store({ label: \"mv\", value: 25 });\n\n    self.setState({ mv: 25 });\n\n    success.add({});\n\n    resolve({ mv: 25 });\n  });\n};\nFn.initialise.snapshots = async data => {\n  const { self } = data;\n\n  return new Promise(async resolve => {\n    Fn.store({ label: \"snapshots\", value: [] });\n\n    self.setState({ snapshots: [] });\n\n    success.add({});\n\n    resolve({ snapshots: [] });\n  });\n};\n\n// Fn.initialise.snapshots = async() => {\n//     // const { label, type } = options\n\n//     // const data = type === \"array\" ? [] : type === \"string\" ? \"\" : {}\n\n//     localStorage.setItem('snapshots', JSON.stringify([]))\n\n// }\n\nFn.initialise.sampleData = async () => {\n  let url = \"https://jsonblob.com/api/f77c0c24-014e-11ea-be47-f9ab32f9bc7d\";\n\n  return await fetch(url)\n    .then(res => {\n      return res;\n    })\n    .then(res => {\n      return res.json();\n    })\n    .then(res => {\n      // Fn.logger({\n      //   data: null,\n      //   text: \"Sample data imported into localstorage from [ \" + url + \" ]\"\n      // });\n\n      Fn.store({ label: \"sampledata\", value: res });\n    });\n};\nFn.initialise.initialValues = () => {\n  let items = [\n    {\n      label: \"theme\",\n      initial: { base: \"light\" }\n    },\n    {\n      label: \"investments\",\n      initial: []\n    }\n  ];\n\n  for (let item of items) {\n    if (localStorage.getItem(item.label) === null) {\n      return localStorage.setItem(item.label, JSON.stringify(item.initial));\n    }\n  }\n};\n\nFn.hydrateFromLocalstorage = options => {\n  const { self } = options;\n\n  let items = [\n    {\n      label: \"theme\",\n      initial: {}\n    },\n    {\n      label: \"alerts\",\n      initial: []\n    },\n    {\n      label: \"sampledata\",\n      initial: []\n    },\n    {\n      label: \"shift\",\n      initial: 0\n    },\n    {\n      label: \"mv\",\n      initial: 0\n    }\n  ];\n\n  for (let item of items) {\n    if (localStorage.getItem(item.label) !== null) {\n      let value = JSON.parse(localStorage.getItem(item.label));\n      self.setState({ [item.label]: value });\n    } else {\n      localStorage.setItem(item.label, JSON.stringify(item.initial));\n    }\n  }\n};\n\nFn.initialise.Startup = async data => {\n  const { self } = data;\n};\nFn.initialise.store = (label, type) => {\n  // const { label, type } = options\n\n  const data = type === \"array\" ? [] : type === \"string\" ? \"\" : {};\n\n  localStorage.setItem(label, JSON.stringify(data));\n};\n\nFn.checkExists = async data => {\n  return new Promise(async resolve => {\n    let { self, values } = data;\n\n    var checkInterval = setInterval(() => {\n      for (let item of values) {\n        // // console.log(item, item.check, typeof item.check)\n        // let item_ = { ...item }\n\n        if (item.check !== null) {\n          // Fn.logger({\n          //   data: item,\n          //   text: \"[ \" + item.label + \" ] does exist, moving on ...\"\n          // });\n\n          success.add(item);\n\n          // return item\n        }\n        if (item.check === null) {\n          // eval('Fn.' + item.run)\n\n          // Fn.logger({\n          //   data: item,\n          //   text:\n          //     \"[ \" + item.label + \" ] does not exist, attempting to create ...\"\n          // });\n\n          return item.run;\n        }\n      }\n\n      // console.log(success.size, values.length)\n\n      if (success.size >= values.length) {\n        let res = {\n          success: [...new Set(success)],\n          ok: true\n        };\n\n        // Fn.logger({ data: null, text: \"All checks complete\" });\n\n        clearInterval(checkInterval);\n\n        resolve(JSON.stringify(res));\n      }\n    }, 2000);\n  });\n};\nFn.createMessagesDB = async data => {\n  // console.log('[[ Fn.createMessagesDB ]]', data)\n\n  const { self } = data;\n\n  const dbInitData = {\n    type: \"message\",\n    text: \"First message to initialise the remote messages db.\",\n    createdAt: new Date()\n  };\n\n  const config = {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"access-control-expose-headers\": \"X-jsonBlob\"\n    },\n    body: JSON.stringify(dbInitData)\n  };\n\n  const url = appconfig.storageProvider.initUrl;\n\n  await fetch(url, config).then(res => {\n    Fn.store({\n      label: \"db_messages_endpoint_id\",\n      value: res.headers.get(\"X-jsonBlob\")\n    });\n\n    success.add(url);\n\n    return res.headers.get(\"X-jsonBlob\");\n  });\n};\nFn.createNotificationsDB = async data => {\n  // console.log('[[ Fn.createNotificationsDB ]]', data)\n\n  const { self } = data;\n\n  const dbInitData = {\n    type: \"notification\",\n    text: \"First notification to initialise the remote notifications db.\",\n    createdAt: new Date()\n  };\n\n  const config = {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"access-control-expose-headers\": \"X-jsonBlob\"\n    },\n    body: JSON.stringify(dbInitData)\n  };\n\n  const url = appconfig.storageProvider.initUrl;\n\n  await fetch(url, config).then(res => {\n    Fn.store({\n      label: \"db_notifications_endpoint_id\",\n      value: res.headers.get(\"X-jsonBlob\")\n    });\n\n    success.add(url);\n\n    return res.headers.get(\"X-jsonBlob\");\n  });\n};\nFn.createAlertsDB = async data => {\n  // console.log('[[ Fn.createAlertsDB ]]', data)\n\n  const { self } = data;\n\n  const dbInitData = {\n    type: \"alert\",\n    text: \"First alert to initialise the remote alerts db.\",\n    createdAt: new Date()\n  };\n\n  const config = {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"access-control-expose-headers\": \"X-jsonBlob\"\n    },\n    body: JSON.stringify(dbInitData)\n  };\n\n  const url = appconfig.storageProvider.initUrl;\n\n  await fetch(url, config).then(res => {\n    Fn.store({\n      label: \"db_alerts_endpoint_id\",\n      value: res.headers.get(\"X-jsonBlob\")\n    });\n\n    success.add(url);\n\n    return res.headers.get(\"X-jsonBlob\");\n  });\n};\nFn.getCollectionEndpointUrl = type => {\n  const storageProviderUrl = appconfig.storageProvider.url;\n\n  if (type === \"alerts\") {\n    const id = JSON.parse(localStorage.getItem(\"db_alerts_endpoint_id\"));\n    const url = storageProviderUrl + id;\n    return url;\n  }\n  if (type === \"messages\") {\n    const id = JSON.parse(localStorage.getItem(\"db_messages_endpoint_id\"));\n    const url = storageProviderUrl + id;\n    return url;\n  }\n  if (type === \"notifications\") {\n    const id = JSON.parse(localStorage.getItem(\"db_notifications_endpoint_id\"));\n    const url = storageProviderUrl + id;\n    return url;\n  }\n};\nFn.createAlert = async data => {\n  let { self, alert } = data;\n\n  alert.createdAt = new Date();\n\n  alert.message = alertMessages.alert(alert);\n\n  let alerts = await Fn.get(\"Alerts\");\n\n  alerts.push(alert);\n\n  self.setState({ alerts: alerts });\n\n  Fn.store({ label: \"Alerts\", value: alerts });\n\n  return new Promise(async resolve => {\n    const url = Fn.getCollectionEndpointUrl(\"alerts\");\n\n    const config = {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(alerts)\n    };\n\n    await fetch(url, config)\n      .then(res => {\n        return res.json();\n      })\n      .then(res => {\n        return res;\n      })\n      .then(data => {\n        resolve({ data, ok: true });\n      });\n  });\n};\n\nFn.filterJSON = a => {\n  let b = a.filter((item, index) => !Number.isInteger(index / 2));\n  return b;\n};\n\nFn.sleep = async fn => {\n  const sleep = milliseconds => {\n    return new Promise(resolve => setTimeout(resolve, milliseconds));\n  };\n};\nFn.reverseGeocodeCity = async data => {\n  // // console.log('[[ Fn.reverseGeocodeCity ]]');\n  const { self } = data;\n  let url =\n    \"https://reverse.geocoder.api.here.com/6.2/reversegeocode.json?prox=\" +\n    self.state.lat +\n    \",\" +\n    self.state.long +\n    \",250&mode=retrieveAddresses&maxresults=1&gen=9&app_id=ZZN2MPuexLyuz3VR0KDD&app_code=TnEsVJR8k3zxGMiAkbP_EQ\";\n  fetch(url, (e, r) => {\n    return r;\n  })\n    .then(res => {\n      return res.json();\n    })\n    .then(res => {\n      // // console.log('reverse geocode res', res)\n\n      // // console.log('[[ Fn.reverseGeocodeCity ]]', JSON.stringify(res.Response && res.Response.View && res.Response.View[0] && res.Response.View[0].Result[0] && res.Response.View[0].Result[0].Location && res.Response.View[0].Result[0].Location.Address));\n\n      let data =\n        res.Response &&\n        res.Response.View[0] &&\n        res.Response.View[0].Result[0] &&\n        res.Response.View[0].Result[0].Location &&\n        res.Response.View[0].Result[0].Location.Address &&\n        res.Response.View[0].Result[0].Location.Address.AdditionalData;\n      let location =\n        res.Response &&\n        res.Response.View[0] &&\n        res.Response.View[0].Result[0] &&\n        res.Response.View[0].Result[0].Location &&\n        res.Response.View[0].Result[0].Location.Address;\n      let address =\n        res.Response &&\n        res.Response.View[0] &&\n        res.Response.View[0].Result[0] &&\n        res.Response.View[0].Result[0].Location &&\n        res.Response.View[0].Result[0].Location.Address;\n\n      for (let item of data) {\n        if (item.key === \"CountryName\") {\n          let country = item.value;\n          // console.log('country', country);\n          self.setState({ country: country, countrySet: true });\n        }\n      }\n      self.setState({\n        location: address,\n        city: address.County,\n        suburb: address.District,\n        province: address.State,\n        searchFormReady: true,\n        ready: true\n      });\n      Fn.findCurrency({ self });\n      // console.log('[[ store : location ]]', location)\n      methods.store({ type: \"location\", data: location });\n      methods.store({ type: \"locationIsSet\", data: true });\n    });\n};\nFn.findCurrency = async data => {\n  const { self } = data;\n  if (self.state.countrySet) {\n    const country = self.state.country;\n    let url = \"https://restcountries.eu/rest/v2/name/\" + country;\n    await fetch(url, (err, res) => {\n      return res;\n    })\n      .then(res => {\n        return res.json();\n        // // console.log('Country data',res)\n      })\n      .then(res => {\n        // return res.json()\n        // console.log('Country data', res[0].currencies[0]);\n        setGlobal({\n          activeCurrencyIsSet: true,\n          activeCurrency: res[0].currencies[0],\n          baseCurrency: res[0].currencies[0]\n        });\n        localStorage.setItem(\n          \"activeCurrency\",\n          JSON.stringify(res[0].currencies[0])\n        );\n        localStorage.setItem(\n          \"baseCurrency\",\n          JSON.stringify(res[0].currencies[0])\n        );\n        localStorage.setItem(\"activeCurrencyIsSet\", JSON.stringify(true));\n      });\n  }\n};\nFn.getGeoLocation = async data => {\n  const { self } = data;\n\n  const setPosition = data_ => {\n    // // console.log('[[ getGeoLocation ]]', data_)\n    // // console.log('getGeolocation', data_)\n\n    self.setState({\n      lat: data_.coords.latitude || 0,\n      long: data_.coords.longitude || 0\n    });\n\n    Fn.reverseGeocodeCity({ self });\n  };\n\n  if (typeof window.navigator.geolocation !== \"undefined\") {\n    window.navigator.geolocation.getCurrentPosition(setPosition);\n  }\n};\nFn.findLocation = data => {\n  const { searchTerm, self } = data;\n\n  let url =\n    \"https://geocoder.api.here.com/6.2/geocode.json?searchtext=\" +\n    searchTerm +\n    \"&app_id=ZZN2MPuexLyuz3VR0KDD&app_code=TnEsVJR8k3zxGMiAkbP_EQ&gen=9\";\n  fetch(url, (e, r) => {\n    return r;\n  })\n    .then(res => {\n      return res.json();\n    })\n\n    .then(res => {\n      // // console.log('findLocation', res.Response.View[0].Result[0].Location.Address)\n\n      self.setState({\n        city: res.Response.View[0].Result[0].Location.Address.County,\n        suburb: res.Response.View[0].Result[0].Location.Address.District,\n        province: res.Response.View[0].Result[0].Location.Address.State,\n        searchFormReady: true,\n        location: res.Response.View[0].Result[0].Location.Address\n      });\n\n      return Fn.findCurrency({ self });\n    });\n};\nFn.showDrawer = async data => {\n  const { project, self } = data;\n\n  // // console.log('showDrawer', project);\n\n  setGlobal({\n    activeProject: project\n  });\n  self.setState({\n    projectInfoVisible: true,\n    activeProject: project,\n\n    conversationReady: true,\n    activeTab: \"1\"\n  });\n\n  localStorage.setItem(\"activeProject\", JSON.stringify(project));\n};\nFn.refresh = async data => {\n  const { self } = data;\n  self.setState({\n    ready: false\n  });\n  setTimeout(() => {\n    Fn.fetchProjects({ self });\n  }, 1000);\n};\nFn.userAfterRegistration = async data_ => {\n  // // console.log('userAfterRegistration', data_)\n\n  const { self, data } = data_;\n  console.log(\"userAfterRegistration\", data);\n  let user = data.user;\n\n  user.profile = {\n    confirmed: false,\n    config: {\n      type: \"\",\n      onboardingcomplete: false\n    },\n    name: {\n      first: \"\",\n      last: \"\"\n    },\n    picture: \"\",\n    location: {},\n    preferredCurrency: {},\n    contact: {\n      phone: \"\"\n    },\n    grade: 0,\n    bio: \"\",\n    role: \"\",\n    dob: \"\",\n    gender: \"\",\n    connections: [],\n    network: {\n      pending: [],\n      confirmed: []\n    },\n    projects: [],\n    cv: {\n      file: \"\",\n      uploaded: false\n    },\n    additional: {\n      ratings: {\n        rating: 0,\n        ratings: []\n      },\n      skills: []\n    }\n  };\n  user.confirmed = false;\n\n  const url = \"https://api.crew20.devcolab.site/v1/users/\" + user.id;\n\n  const config = {\n    method: \"PATCH\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(user)\n  }\n\n  await fetch(url, config)\n    .then(res => {\n\n      return res.json();\n\n    })\n    .then(async res => {\n\n      if (res.code === 400 || res.code === 401) {\n\n      } else {\n\n        let account = Fn.get(\"account\");\n\n        account.user = res;\n\n        self.setState({ isAuthenticated: true, account: account });\n\n        Fn.store({ label: \"account\", value: account });\n\n        await app.sendConfirmationEmail({ self, userId: res.id });\n\n      }\n    });\n};\n\nFn.uploadProfileImage = async data => {\n\n  const { self, file } = data;\n\n  console.log(\"uploadProfileImage\", file);\n\n  let fileUrl =\n    \"https://crew20-uploads.s3.eu-west-2.amazonaws.com/\" + file.name;\n\n  let account = Fn.get(\"account\");\n\n  let user = account.user;\n\n  user.profile.picture = fileUrl;\n\n  let url = api.url(\"users\") + user.id;\n\n  let config = {\n    method: \"PATCH\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(user)\n  };\n\n  await fetch(url, config)\n    .then(res => {\n\n      if (res.status !== 200) {\n        return null;\n      }\n\n      return res.json();\n    })\n    .then(res => {\n\n      account.user = res;\n\n      Fn.set(\"account\", account);\n\n      self.context.updateAccount();\n\n      self.props.closeDialog();\n\n    });\n};\nFn.createFileConversation = async data_ => {\n  return new Promise(async resolve => {\n    let conversation = {\n      type: \"file\",\n      createdAt: new Date(),\n      updatedAt: new Date(),\n      messages: [],\n      participants: [Fn.get(\"account\").user.id],\n      type: \"file\"\n    };\n\n    let url = api.url(\"conversations\");\n\n    let config = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(conversation)\n    };\n\n    await fetch(url, config)\n      .then(res => {\n        return res.json();\n      })\n      .then(res => {\n        console.log(\"conversation\", res);\n        resolve(res);\n      });\n  });\n};\nFn.uploadEventFiles = async data => {\n  const { self, parent, event, file } = data;\n\n  // let project = self.state.project;\n\n  let conversation = await Fn.createFileConversation().then(async convRes => {\n    console.log(\"convRes\", convRes);\n\n    let fileUrl =\n      \"https://crew20-uploads.s3.eu-west-2.amazonaws.com/\" + file.name;\n    let account = Fn.get(\"account\");\n\n    let user = account.user;\n\n    let file__ = {\n      url: fileUrl,\n      file: fileUrl,\n      title: fileUrl,\n      uploadedBy: user.id,\n      createdAt: new Date(),\n      conversation: convRes.id,\n      event: event.id\n      // type: \"calendar\"\n    };\n\n    if (!event.hasOwnProperty(\"files\")) {\n      event.files = [];\n    }\n\n    event.files.push(file__);\n\n    console.log(\"event\", event);\n\n    let url = api.url(\"events\") + event.id;\n\n    let config = {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + Fn.get(\"account\").tokens.access.token\n      },\n      body: JSON.stringify(event)\n    };\n\n    console.log(\"file upload project patch config\", config);\n\n    await fetch(url, config)\n      .then(res => {\n        // if (res.status !== 200) {\n\n        //     return null\n        // }\n        return res.json();\n      })\n      .then(res => {\n        // account.user = res\n\n        console.log(\"Updated event : file uploaded\", res);\n\n        Fn.store({ label: \"activeEvent\", value: res });\n\n        parent.setState({\n          event: res,\n\n          files: res.files\n        });\n\n        // self.context.updateAccount()\n\n        // self.props.closeDialog()\n      });\n  });\n\n  // if( conversation ) {\n\n  // }\n};\nFn.uploadProjectFiles = async data => {\n\n  const { self, parent, project, file, fileType } = data;\n\n  // let project = self.state.project;\n\n  let conversation = await Fn.createFileConversation().then(async conversation => {\n\n    console.log(\"created file converasation\", conversation);\n\n    let fileUrl =\n      \"https://crew20-uploads.s3.eu-west-2.amazonaws.com/\" + file.name;\n\n    let account = Fn.get(\"account\");\n\n    let user = account.user;\n\n    let file__ = {\n      url: fileUrl,\n      file: fileUrl,\n      title: fileUrl,\n      uploadedBy: user.id,\n      createdAt: new Date(),\n      conversation: conversation.id,\n      project: project.id,\n      fileType: fileType\n    };\n\n    if (!project.hasOwnProperty(\"files\")) {\n      project.files = [];\n    }\n\n    project.files.push(file__);\n\n    console.log(\"project\", project);\n\n    let url = api.url(\"projects\") + project.id;\n\n    let config = {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(project)\n    };\n\n    console.log(\"file upload project patch config\", config);\n\n    await fetch(url, config)\n      .then(res => {\n        return res.json();\n      })\n      .then(res => {\n        // account.user = res\n\n        console.log(\"Updated project : file uploaded\", res);\n\n        Fn.store({ label: \"activeProject\", value: res });\n\n        parent.setState({\n          project: res,\n          files: res.files\n        });\n\n        // self.context.updateAccount()\n\n        // parent.closeDialog()\n\n      });\n  });\n\n  // if( conversation ) {\n\n  // }\n};\nFn.uploadProjectAvatar = async data => {\n  const { self, parent, project, file } = data;\n\n  let fileUrl =\n    \"https://crew20-uploads.s3.eu-west-2.amazonaws.com/\" + file.name;\n\n  let account = Fn.get(\"account\");\n\n  let user = account.user;\n\n  // let file__ = {\n  //     url: fileUrl,\n  //     file: file_,\n  //     title:   fileUrl,\n  //     uploadedBy: user.id,\n  //     createdAt: new Date(),\n  //     conversation: convRes.id,\n  //     project: project.id\n\n  // }\n\n  if (!project.hasOwnProperty(\"media\")) {\n    project.media = {\n      video: [],\n      images: []\n    };\n  }\n\n  project.media.images.unshift({ title: fileUrl, url: fileUrl });\n\n  console.log(\"project\", project);\n\n  let url = Fn.api(\"projects\") + project.id;\n\n  let config = {\n    method: \"PATCH\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(project)\n  };\n\n  console.log(\"file upload project patch config\", config);\n\n  await fetch(url, config)\n    .then(res => {\n      // if (res.status !== 200) {\n\n      //     return null\n      // }\n      return res.json();\n    })\n    .then(res => {\n      // account.user = res\n\n      console.log(\"Update project\", res);\n\n      Fn.store({ label: \"activeProject\", value: res });\n\n      parent.setState({\n        project: res,\n\n        isOpen: false\n        // files: res.files\n      });\n\n      // self.context.updateAccount()\n\n      // self.props.closeDialog()\n    });\n};\nFn.uploadCV = async data => {\n  const { self, file } = data;\n\n  let fileUrl =\n    \"https://crew20-uploads.s3.eu-west-2.amazonaws.com/\" + file.name;\n\n  // // console.log(fileUrl)\n\n  let account = Fn.get(\"account\");\n\n  let user = account.user;\n\n  user.profile.cv.file = fileUrl;\n\n  user.profile.cv.uploaded = true;\n\n  // let userId = user.id;\n\n  // let url = \"https://api.crew20.devcolab.site/v1/users/\" + userId;\n  let url = api.url(\"users\") + user.id;\n\n  let config = {\n    method: \"PATCH\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(user)\n  };\n  await fetch(url, config)\n    .then(res => {\n      // // console.log('res', res)\n\n      if (res.status !== 200) {\n        return null;\n      }\n      return res.json();\n    })\n    .then(res => {\n      // console.log('CV Upload Updated User', res)\n\n      account.user = res;\n\n      Fn.store({ label: \"account\", value: account });\n\n      self.context.updateAccount();\n\n      self.props.closeDialog();\n    });\n};\n\nFn.uploadWorkPortfolioImage = async data => {\n  const { self, file } = data;\n\n  let fileUrl =\n    \"https://crew20-uploads.s3.eu-west-2.amazonaws.com/\" + file.name;\n\n  // console.log(fileUrl)\n\n  self.setState({\n    portfolioImage: fileUrl\n  });\n\n  return fileUrl;\n\n  // let account = Fn.get('account');\n  // let user = account.user;\n\n  // user.profile.portfolio = fileUrl\n  // let userId = user.id;\n\n  // let url = \"https://api.crew20.devcolab.site/v1/users/\" + userId;\n\n  // let config = {\n  //     method: \"PATCH\",\n  //     headers: {\n  //         \"Content-Type\": \"application/json\"\n  //     },\n  //     body: JSON.stringify(user)\n  // }\n  // await fetch(url, config).then(res => {\n  //     // console.log('res', res)\n  //     if (res.status !== 200) {\n\n  //         return null\n  //     }\n  //     return res.json()\n  // }).then(res => {\n  //     // console.log('user update', res)\n  //     account.user = res\n  //     Fn.store({ label: 'account', value: account })\n  //     self.context.updateAccount()\n  //     self.props.closeDialog()\n  // })\n};\n\nFn.modifyUsers = async () => {\n  let url = \"https://api.crew20.devcolab.site/v1/users/\";\n  let users = await fetch(url)\n    .then(res => {\n      return res.json();\n    })\n    .then(res => {\n      return res;\n    });\n\n  for (let user of users) {\n    // let role = item.profile.additional.role;\n\n    // item.position = role;\n\n    // user.profile.cv = {\n    //   file: \"\",\n    //   uploaded: false\n    // };\n    user.profile.network = {\n      pending: [],\n      confirmed: []\n    };\n    user.profile.confirmed = true;\n\n    let url = \"https://api.crew20.devcolab.site/v1/users/\" + user.id;\n\n    let config = {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(user)\n    };\n    await fetch(url, config)\n      .then(res => {\n        return res.json();\n      })\n      .then(res => {\n        // console.log(res)\n      });\n  }\n};\n\nFn.extractAuthors = async data_ => {\n  const { self, conversations } = data_;\n\n  console.log(\" \");\n  console.log(\" \");\n  console.log(\" \");\n  console.log(\"[[ extractAuthors ]]\", data_);\n  console.log(\" \");\n  console.log(\" \");\n  console.log(\" \");\n\n  return new Promise(async resolve => {\n    // let messages = messages;\n\n    for (let conversation of conversations) {\n      let authorIds = new Set();\n\n      let messages = conversation.messages;\n\n      for (let item of messages) {\n        authorIds.add(item.author);\n      }\n\n      let a = Array.from(authorIds);\n\n      // this.setState({\n      //     authorIds: a\n      // })\n    }\n\n    // console.log(' ')\n    // console.log(' ')\n    // console.log(' ')\n    // console.log('[[ authorIds ]]', a)\n    // console.log(' ')\n    // console.log(' ')\n    // console.log(' ')\n\n    // setTimeout(() => {\n    //     resolve(a)\n    // },1000)\n  });\n\n  // await Fn.fetchCommentAuthors({ self: this, authorIds: a })\n};\nFn.fetchConversations = async data => {\n  // console.log('  ')\n  // console.log('  ')\n  // console.log('  ')\n  // console.log(\" \");\n  // console.log(\" \");\n  // console.log(\" \");\n  // console.log(\"[[ fetchConversations ]]\", data);\n  // console.log(\" \");\n  // console.log(\" \");\n  // console.log(\" \");\n\n  const { self, userId, type } = data;\n\n\n  return new Promise(async resolve => {\n    let url =\n      \"https://api.crew20.devcolab.site/v1/conversations/?participants=\" +\n      userId +\n      \"&type=\" +\n      type;\n\n    // console.log(\"conv fetch url \", url);\n\n    await fetch(url)\n      .then(async res => {\n        return res.json();\n      })\n      .then(async res => {\n        // console.log(\"Conv RES \", res);\n\n        Fn.store({ label: \"conversations\", value: res });\n\n        self.setState({\n          conversations: res,\n          activeConversation: res[0]\n        });\n\n        resolve(res);\n      });\n  });\n};\nFn.fetchRecipientData = async data => {\n  // console.log('  ')\n  // console.log('  ')\n  // console.log('  ')\n\n  const { self, recipientId } = data;\n\n  let url = \"https://api.crew20.devcolab.site/v1/users/\" + recipientId;\n\n  return await fetch(url)\n    .then(res => {\n      return res.json();\n    })\n    .then(res => {\n      // console.log('recipient data ', res)\n      // self.setState({\n      //     recipientData: res,\n      //     conversation: {\n      //         messages: self.props.item.messages,\n      //         authorData: Fn.get('account').user,\n      //         recipientData: res,\n      //         item: self.props.item\n      //     },\n      //     ready: true\n      // })\n      // Fn.store({ label: 'conversations', value: res })\n      return res;\n    });\n};\nFn.getRecipientId = async data => {\n  const { self, participants, userId } = data;\n\n  let userIndex = participants.indexOf(userId);\n\n  let p = [...participants];\n\n  p.splice(userIndex, 1);\n\n  return p[0];\n};\nFn.updateConversationMessages = async data => {\n  const { self, conversation } = data;\n\n  // console.log('conversation to update', conversation)\n\n  let apiUrl = api.url(\"conversations\") + conversation.id;\n\n  let config = {\n    method: \"PATCH\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify(conversation)\n  };\n\n  return await fetch(apiUrl, config)\n    .then(res => {\n      return res.json();\n    })\n    .then(res => {\n      let index = self.props.activeConversationIndex;\n\n      let conversations = self.props.conversations;\n\n      conversations[index] = res;\n      conversations[index].authors = conversation.authors;\n\n      // console.log(\"conversations\", conversations, conversation);\n\n      self.props.updateActiveConversation({\n        conversations: conversations,\n        activeConversation: conversations[index]\n        // activeConversation:\n      });\n    });\n};\nFn.createGroupConversation = async data => {\n  console.log(\"  \");\n  console.log(\" conversation to insert  \", data);\n  console.log(\"  \");\n\n  const { self, users, type, name } = data;\n\n  const author = Fn.get(\"account\").user.id;\n\n  let u = users.map(item => item.id);\n\n  let conversation = {\n    participants: u,\n    messages: [],\n    author: author,\n    type: type,\n    name: name,\n    group: true\n  };\n\n  let url = \"https://api.crew20.devcolab.site/v1/conversations/\";\n\n  let config = {\n    method: \"POST\",\n    headers: {\n      Authorization: \"Bearer \" + Fn.get(\"account\").tokens.access.token,\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(conversation)\n  };\n\n  console.log(\"group con to insert\", conversation);\n\n  return await fetch(url, config)\n    .then(res => {\n      // console.log(res)\n      return res.json();\n    })\n    .then(async res => {\n      console.log(\"[[ new Group Converation created ]]\", res);\n\n      Fn.set(\"activeConversation\", res);\n      // await Fn.fetchConversations({ self, userId: selfUserId });\n\n      self.setState({\n        buttonLoading: false,\n        isOpen: false\n      });\n      self.reload();\n    });\n};\nFn.createNewConversation = async data => {\n  console.log(\"  \");\n  console.log(\" conversation to insert  \", data);\n  console.log(\"  \");\n\n  const { self, selfUserId, recipientId, type } = data;\n\n  let conversation = {\n    participants: [selfUserId, recipientId],\n    messages: [],\n    author: selfUserId,\n    type: type\n  };\n  // console.log('[[ Conv to create ]]', conversation)\n  let url = \"https://api.crew20.devcolab.site/v1/conversations/\";\n\n  let config = {\n    method: \"POST\",\n    headers: {\n      Authorization: \"Bearer \" + Fn.get(\"account\").tokens.access.token,\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(conversation)\n  };\n  // // console.log('conversation to create ',config)\n  return await fetch(url, config)\n    .then(res => {\n      console.log(res);\n      return res.json();\n    })\n    .then(async res => {\n      console.log(\"[[ new Converation created ]]\", res);\n\n      // let userId = selfUserId;\n\n      await Fn.fetchConversations({ self, userId: selfUserId });\n      // self.setState({\n      //     conversations: res,\n      //     activeConversation: res[0],\n      //     ready: true\n      // })\n\n      // Fn.store({ label: 'conversations', value: res })\n\n      // return res\n\n      // self.props.updateActiveConversation({\n      //     conversation: res,\n      //     conversationData: {\n      //         authorData: self.props.authorData,\n      //         recipientData: self.props.recipientData\n      //     }\n      // })\n    });\n};\n\nFn.checkConversationExists = async data => {\n  // console.log('  ')\n  // console.log('  ')\n  // console.log('  ')\n\n  const { self, selfUserId, recipientId } = data;\n\n  // console.log('checkConversationExists', data)\n\n  let url1 =\n    \"https://api.crew20.devcolab.site/v1/conversations/?participants=\" +\n    selfUserId;\n  let url2 =\n    \"https://api.crew20.devcolab.site/v1/conversations/?participants=\" +\n    recipientId;\n\n  let conv1 = await fetch(url1)\n    .then(res => {\n      return res.json();\n    })\n    .then(res => {\n      // console.log('conv1 ', res)\n      return res;\n    });\n  let conv2 = await fetch(url2)\n    .then(res => {\n      return res.json();\n    })\n    .then(res => {\n      // console.log('conv2 ', res)\n      return res;\n    });\n\n  let match;\n  let exists = false;\n  for (let item of conv1) {\n    let id = item.id;\n    for (let item_ of conv2) {\n      let id_ = item_.id;\n      if (id === id_) {\n        if (item_.type === \"private\") {\n          let a = item;\n          let b = item_;\n          let c = { ...a, ...b };\n          console.log(\"Found existing conversation\", c);\n          match = c;\n          exists = true;\n        } else {\n          match = null;\n          exists = false;\n        }\n\n        // if(c.participants.length > 2) {\n        //   exists = false\n        //   // return\n        // }\n        // else {\n\n        // }\n      }\n      // else {\n      //     exists\n      // }\n    }\n  }\n  // console.log('match', match)\n  // Fn.store({ label: 'activeConversation', value: match})\n\n  // let exists = match.length > 0 ? true : false\n\n  // console.log('[[ EXISTS ]]', exists)\n\n  return { exists: exists, conversation: match };\n\n  // if(res.length > 0) {\n  //     // console.log(' ')\n  //     // console.log('[[ Conversation Exists ]]')\n  //     // console.log(' ')\n  //     return true\n  // }\n  // else {\n  //     // console.log(' ')\n  //     // console.log('[[ Conversation does Not Exist ]]')\n  //     // console.log(' ')\n  //     return false\n  // }\n};\nFn.deleteAllConversations = async () => {\n  let url = \"https://api.crew20.devcolab.site/v1/conversations/\";\n\n  let conversations = await fetch(url)\n    .then(res => {\n      return res.json();\n    })\n    .then(res => {\n      return res;\n    });\n\n  for (let item of conversations) {\n    let url = \"https://api.crew20.devcolab.site/v1/conversations/\" + item.id;\n\n    let config = {\n      method: \"DELETE\"\n    };\n    await fetch(url, config);\n  }\n};\nFn.modifyProjects = async data => {\n  let urlP = \"https://api.crew20.devcolab.site/v1/projects/\";\n  let projects = await fetch(urlP)\n    .then(res => {\n      return res.json();\n    })\n    .then(res => {\n      console.log(\"p\", res);\n      return res;\n    });\n\n  for (let item of projects) {\n    let admins = [];\n    let roles = [\n      {\n        canEditCrew: [],\n        canEditProject: [],\n        canManageFiles: [],\n        canEditCalendar: []\n      }\n    ];\n    item.admins = admins;\n    item.roles = roles;\n    item.accepted = [];\n    let config = {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(item)\n    };\n    let url = \"https://api.crew20.devcolab.site/v1/projects/\" + item.id;\n    await fetch(url, config)\n      .then(res => {\n        return res.json();\n      })\n      .then(res => {\n        console.log(\"p\", res);\n        return res;\n      });\n    // if (item.hasOwnProperty(\"positions\")) {\n    //   // item.discussion = []\n\n    //   // let url = \"https://api.crew20.devcolab.site/v1/projects/\" + item.id;\n\n    //   let body = {\n    //     messages: [],\n    //     participants: [],\n    //     createdAt: new Date(),\n    //     updatedAt: new Date()\n    //   };\n\n    //   let conversation = await api\n    //     .post(\"projects\", body)\n    //     .then(async conversation => {\n    //       item.conversation = conversation.id;\n\n    //       let url = api.url(\"projects\") + item.id;\n\n    //       let config = {\n    //         method: \"PATCH\",\n    //         headers: {\n    //           \"Content-Type\": \"application/json\"\n    //         },\n    //         body: JSON.stringify(item)\n    //       };\n\n    //       await fetch(url, config)\n    //         .then(res => {\n    //           return res.json();\n    //         })\n    //         .then(res => {\n    //           console.log(\" updated project res\", res);\n    //         });\n    //     });\n\n    //   // let body = {\n\n    //   // }\n    // }\n\n    // if (!item.hasOwnProperty(\"shortlist\")) {\n    //   item.shortlist = [];\n\n    //   let url = \"https://api.crew20.devcolab.site/v1/projects/\" + item.id;\n\n    //   let config = {\n    //     method: \"PATCH\",\n    //     headers: {\n    //       \"Content-Type\": \"application/json\"\n    //     },\n    //     body: JSON.stringify(item)\n    //   };\n\n    //   await fetch(url, config)\n    //     .then(res => {\n    //       return res.json();\n    //     })\n    //     .then(res => {\n    //       console.log(\" updated project res\", res);\n    //     });\n    // }\n  }\n};\nFn.deleteConversation = async data_ => {\n  const { convId } = data_;\n\n  let url = Fn.api(\"conversations\") + convId;\n\n  console.log(\"url\", url);\n\n  let config = {\n    method: \"DELETE\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  };\n\n  await fetch(url, config);\n};\nFn.modifyConversations = async () => {\n  let url = await Fn.api(\"conversations\");\n\n  let conversations = await fetch(url)\n    .then(res => {\n      return res.json();\n    })\n    .then(res => {\n      return res;\n    });\n\n  for (let conv of conversations) {\n    if (!conv.hasOwnProperty(\"author\")) {\n      console.log(\"conv doesnt have author\");\n\n      let convId = conv.id;\n\n      await Fn.deleteConversation({ convId });\n    }\n  }\n};\n\nFn.createEvent = async _ => {\n  const { self, user, event } = _;\n\n  if (!user.profile.hasOwnProperty(\"events\")) {\n    user.profile.events = [];\n  }\n\n  let events = user.profile.events;\n\n  events.push(event);\n\n  user.profile.events = events;\n\n  let url = Fn.api(\"users\") + user.id;\n\n  let config = {\n    method: \"PATCH\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(user)\n  };\n\n  await fetch(url, config)\n    .then(res => {\n      return res.json();\n    })\n    .then(res => {\n      console.log(\"createEvent res\", res);\n\n      self.context.updateAccount(res);\n\n      self.setState({\n        isOpen: false\n      });\n\n      self.reload();\n    });\n};\n\nFn.deleteEvents = async () => {\n  let eurl = api.url(\"events\");\n  let config = {\n    headers: {\n      Authorization: \"Bearer \" + Fn.get(\"account\").tokens.access.token\n    }\n  };\n  // let events = []\n  let events = await fetch(eurl, config)\n    .then(res => {\n      return res.json();\n    })\n    .then(res => {\n      console.log(\"event\", res);\n      // events.push(res.id)\n      return res;\n    });\n\n  for (let item of events) {\n    let eurl1 = api.url(\"events\") + item.id;\n    let config = {\n      method: \"DELETE\",\n      headers: {\n        Authorization: \"Bearer \" + Fn.get(\"account\").tokens.access.token\n      }\n    };\n    // let events = []\n    await fetch(eurl1, config)\n      .then(res => {\n        // return res.json()\n      })\n      .then(res => {\n        // events.push(res.id)\n        // console.log('event deleted', res)\n      });\n  }\n};\n\nFn.deleteProjects = async () => {\n  let eurl = api.url(\"projects\");\n\n  let config = {\n    headers: {\n      Authorization: \"Bearer \" + Fn.get(\"account\").tokens.access.token\n    }\n  };\n\n  // let events = []\n  let events = await fetch(eurl, config)\n    .then(res => {\n      return res.json();\n    })\n    .then(res => {\n      console.log(\"event\", res);\n      // events.push(res.id)\n      return res;\n    });\n\n  for (let item of events) {\n    let eurl1 = api.url(\"projects\") + item.id;\n    let config = {\n      method: \"DELETE\",\n      headers: {\n        Authorization: \"Bearer \" + Fn.get(\"account\").tokens.access.token\n      }\n    };\n    // let events = []\n    await fetch(eurl1, config)\n      .then(res => {\n        // return res.json()\n        console.log(res);\n      })\n      .then(res => {\n        // events.push(res.id)\n        // console.log('event deleted', res)\n      });\n  }\n};\n\nFn.deleteConversations = async () => {\n  let eurl = api.url(\"conversations\");\n  let config = {\n    headers: {\n      Authorization: \"Bearer \" + Fn.get(\"account\").tokens.access.token\n    }\n  };\n  // let events = []\n  let events = await fetch(eurl, config)\n    .then(res => {\n      return res.json();\n    })\n    .then(res => {\n      console.log(\"event\", res);\n      // events.push(res.id)\n      return res;\n    });\n\n  for (let item of events) {\n    let eurl1 = api.url(\"conversations\") + item.id;\n    let config = {\n      method: \"DELETE\",\n      headers: {\n        Authorization: \"Bearer \" + Fn.get(\"account\").tokens.access.token\n      }\n    };\n    // let events = []\n    await fetch(eurl1, config)\n      .then(res => {\n        // return res.json()\n        console.log(res);\n      })\n      .then(res => {\n        // events.push(res.id)\n        // console.log('event deleted', res)\n      });\n  }\n};\n\n// export const api = () => {\n\n// }\n\n// api.fetch = async (__) => {\n\n//     const { self, type, method, id, filter, data } = __\n\n//     let apiUrl = api.url(type)\n\n//     let config = {\n//         headers: {\n//             \"Content-Type\": \"application/json\"\n//         },\n//         method: method,\n//         body: method === \"POST\" || method === \"PUT\" || method === \"PATCH\" ? JSON.stringify(data) : null\n//     }\n\n//     await fetch(apiUrl, config).then(res => {\n\n//         return res.json()\n\n//     }).then(res => {\n\n//         return res\n\n//     })\n\n// }\n\n// api.fetchAndSet = async (__) => {\n\n//     const { self, type, method, id, filter, data } = __\n\n//     const res = await api.fetch(__)\n\n//     self.setState({\n//         [type]: res\n//     })\n\n// }\n\n// api.url = (type) => {\n\n//     if (localStorage && localStorage.getItem('env') !== null && localStorage.getItem('env').set === true) {\n\n//         let env = localStorage.getItem('env').env\n\n//         if (env === \"development\") {\n//             return appconfig.api.dev + type + \"/\"\n//         }\n//         if (env === \"production\") {\n//             return appconfig.api.prod + type + \"/\"\n//         }\n\n//     }\n//     else {\n//         if (process.env.NODE_ENV === \"development\") {\n//             return appconfig.api.dev + type + \"/\"\n//         }\n//         if (process.env.NODE_ENV === \"production\") {\n//             return appconfig.api.dev + type + \"/\"\n//         }\n//     }\n\n//     // if (process.env.NODE_ENV === \"development\") {\n//     //     return appconfig.api.dev + type + \"/\"\n//     // }\n//     // if (process.env.NODE_ENV === \"production\") {\n//     //     return appconfig.api.production + type + \"/\"\n//     // }\n\n// }\n\n// api.api = (type) => {\n\n//     // const { type } = data_;\n\n//     console.log('api type', type)\n\n//     let apiBase = Fn.apiBase(type)\n\n//     return apiBase\n\n// }\n\nutil.Fn = Fn;\nutil.api = api;\nutil.ui = ui;\nutil.app = app;\nutil.util = util;\n\nwindow.Fn = Fn;\nwindow.api = api;\nwindow.util = util;\nwindow.ui = ui;\nwindow.app = app;\nexport default Fn;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { createBrowserHistory } from \"history\";\nexport default createBrowserHistory();","\nimport React from 'react';\n// import { Tabs, Icon } from \"antd\";\nimport posed from 'react-pose';\n\nconst Box = posed.div({\n    hidden: { opacity: 0 },\n    visible: { opacity: 1 }\n})\n\nclass TransitionLayout extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = { isVisible: false };\n    }\n    componentDidMount() {\n        let self = this;\n        setTimeout(() => {\n            self.setState({ isVisible: !this.state.isVisible });\n        }, 100)\n    }\n    componentWillUnmount() {\n        let self = this;\n        setTimeout(() => {\n            self.setState({ isVisible: !this.state.isVisible });\n        }, 100)\n    }\n    render() {\n        const { isVisible } = this.state;\n        return (\n            <Box className=\"box w-100\" pose={isVisible ? 'visible' : 'hidden'} >\n                {this.props.children}\n            </Box>\n        );\n    }\n\n};\n\nexport default TransitionLayout;\n","import React from 'react'\n\nconst CurrencyContext = React.createContext({})\n\nexport const CurrencyProvider = CurrencyContext.Provider\nexport const CurrencyConsumer = CurrencyContext.Consumer\nexport default CurrencyContext","import React, { getGlobal } from \"reactn\";\nimport { Link } from 'react-router-dom';\n\nimport './style.css';\nimport CurrencyContext from '../../../../../CurrencyContext';\nimport { Popover, Button } from 'antd';\nimport { Icon } from '@blueprintjs/core'\nimport moment from 'moment';\nwindow.moment = moment;\n\nvar GeoPattern = require(\"geopattern\");\nwindow.GeoPattern = GeoPattern;\nconst text = <span>Title</span>;\n\nconst listActionButtons = (props) => (\n  <div className={(\" flex flex-column f7 fw6 exo br3\")}>\n    <span className=\"bg-white-80 trans-a list-actions-item pointer pv2 ph3 flex bb b--black-05 black-60-white-80 flex items-center\"><Icon className=\"f7 fw6 black-40 -white mr2\" type=\"container\" /> Add to shortlist</span>\n    <span className=\"bg-white-80 trans-a list-actions-item pointer pv2 ph3 flex bb b--black-05 black-60 -white-80 flex items-center\"><Icon className=\"f7 fw6 black-40 -white mr2\" type=\"message\" /> Send Message</span>\n  </div>\n);\n\nclass GridItem extends React.Component {\n\n  constructor(props) {\n    super(props)\n    \n    this.state = {\n\n    }\n\n    console.log('Project Detail', this.props)\n\n    this.avatar = this.avatar.bind(this);\n    \n  }\n  avatar(item) {\n    let avatar =\n    typeof (item.media) !== \"undefined\" && typeof (item.media.images) !== \"undefined\" ? item.media.images[0].url : \"http://cdn.shopify.com/s/files/1/2278/2351/products/W1151_GeometricPattern3_1024x1024.jpg?v=1510704914\";\n    return avatar;\n  }\n\n  componentDidUpdate() {\n    // console.log('[[ ProjectItem updated ]]', this.props)    \n  }\n  componentDidMount() {\n  }\n  render() {\n    return (\n      <Link\n        to={'/project/' + this.props.project.id}\n        className={\n          \n           (\" trans-a relative raleway Project_list_item pointer -sans-serif flex flex-column flex-auto w-100  items-center justify-start pa0 bs-b mb4 br2 overflow-hidden relative \")}\n      >\n        <div        \n          className=\"avatar-l- w-100 flex flex-column bg-cover bg-center br4-\"\n          style={{ \n            height: '120px',\n          backgroundImage: this.props.project.media && this.props.project.media.images.length\n          ? \"url(\" +\n          this.props.project.media.images[0].url +\n            \")\"\n          : GeoPattern.generate(this.props.project.title).toDataUrl() }}\n        />\n\n        <div className=\"flex flex-column  w-100 relative bg-white raleway\">\n          <div className=\"list-action-buttons\">\n            <Popover\n              placement=\"bottomRight\"\n              content={listActionButtons()}\n              trigger=\"hover\">\n              <div className={(\" pv0 ph2 br3 f4 fw6 black\")}><span className=\"flex items-center justify-center w-100 h-100\"><Icon className=\"white f4\" type=\"ellipsis\" /></span></div>\n            </Popover>\n          </div>\n          <div className=\"flex flex-row w-100\">\n            <div className=\"flex flex-column w-100 \">\n              <div className={\n                (\"flex flex-column pa3 bb b--black-10 \")}>\n                <h4 className=\"f5 flex flex-column mb0\">\n                  <span className=\"f4 fw6 black-80\">{this.props.project.title === \"\" ? \"Untitled\" : this.props.project.title }</span>\n                  {/* <span className=\"f5 fw3 black-40\">{this.props.project.description}</span> */}\n                </h4>\n              </div>\n              <div className={\n                (\"flex flex-row \")}>\n                \n                <div className=\"flex flex-column mb0 pa3 flex-auto\">\n                  <span className=\"f7 fw7 black-70 mb1\"><span className=\"fw4 black-40 mr2\">Start date</span> {moment(this.props.project.start_date).format('DD MMM YYYY')}</span>\n                  <span className=\"f7 fw7 black-70\"><span className=\"fw4 black-40 mr2\">Deadline</span> {moment(this.props.project.deadline).format('DD MMM YYYY')}</span>\n                </div>\n\n                <div className=\"flex flex-column w-30 bl b--black-10 bw-1 items-center justify-center ph2\">\n                \n                <span className=\"flex f5 fw5 black tc items-center justify-center pb1\">{moment(this.props.project.start_date).diff(new Date(), 'days')} days</span>\n                \n                  <span className=\"flex f7 fw3 black-60 tc\">until start date</span>\n                \n                </div>\n                \n                </div>\n\n            </div>\n            \n          </div>\n\n\n\n        </div>\n        <div className={(\" exo flex flex-row justify-between  w-100\")} >\n\n          <div\n            // style={{ background: 'rgb(120, 150, 120)' }}\n            className=\" bg-black-05-  flex flex-row justify-between w-100\">\n\n            <div className={(\" flex flex-row w-100 justify-between\")}>\n\n              <div className=\"flex flex-row  mb0 flex-auto items-center justify-center  \">\n\n                <span className={\"flex f7 fw3 black-50 pa2\"}>\n                  \n                  <span className=\"fw7 mr1\">{this.props.project.positions.length}</span> positions\n               \n                </span>\n\n              </div>\n\n              <div className=\"flex flex-row  mb0 flex-auto items-center justify-center bl b--white-30 \">\n\n                <span className={\"flex f7 fw3 black-50  pa2\"}>\n                 \n                  <span className=\"fw7 mr1\">{this.props.project.crew.length}</span> filled\n                \n                </span>\n\n              </div>\n\n              <div className=\"flex flex-row  mb0 flex-auto items-center justify-center bl b--white-30 \">\n\n                <span className={\"flex f7 fw3 black-50 items-center justify-center  pa2\"}>\n                  \n                  <Icon icon={'comment'} iconSize={14} className=\"mr1\" /> {this.props.project.comments.length}\n              \n                </span>\n                \n              </div>\n\n              <div className=\"flex flex-row  mb0 flex-auto items-center justify-center bl b--white-30 bg-black-1-0 \">\n\n                <span className={\"flex f7 fw3 black-50 items-center justify-center  pa2\"}>\n                \n                  view <Icon icon={'arrow-right'} iconSize={14} className=\"ml1\" />\n              \n                </span>\n\n              </div>\n\n            </div>\n\n          </div>\n\n        </div>\n      </Link>\n    )\n  }\n}\nexport default GridItem\n","import React, { getGlobal } from \"reactn\";\n// import { Statistic, Icon, Rate } from 'antd';\n\nimport posed from \"react-pose\";\n// import { timingSafeEqual } from \"crypto\";\n// import ChefItem from './ChefItem';\nimport GridItem from './GridItem'\n\nconst List = posed.section({\n  open: {\n    x: \"0\",\n    delayChildren: 200,\n    staggerChildren: 100\n  },\n  closed: { x: \"0\", delay: 300 }\n});\n\nconst Item = posed.div({\n  open: { y: 0, opacity: 1 },\n  closed: { y: 50, opacity: 0 }\n});\n\n// let loader = (\n//   <div className=\"lds-ripple\">\n//     <div />\n//     <div />\n//   </div>\n// );\nclass ListProjects extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpen: false,\n      loading: false\n    };\n    this.avatar = this.avatar.bind(this);\n    this.toggle = this.toggle.bind(this);\n    // this.fetchExchangeRate = this.fetchExchangeRate.bind(this)\n    console.log('List', props)\n  }\n  toggle = () => this.setState({ isOpen: !this.state.isOpen });\n  \n  avatar(item) {\n    // console.log('avatar',item)\n    let avatar =\n      typeof (item.picture) !== \"undefined\" ? item.picture : \"http://cdn.shopify.com/s/files/1/2278/2351/products/W1151_GeometricPattern3_1024x1024.jpg?v=1510704914\";\n    return avatar;\n  }\n  \n  // getExchangeRate() {\n    \n  // }\n  setForeignCurrencyRate() {\n\n  }\n  componentDidMount() {\n    setTimeout(this.toggle, 100);\n  }\n  render() {\n    const { isOpen } = this.state;\n    // console.log('chefs list props',this.props)\n    // let exchangeRate = this.props.exchangeRate;\n    return (\n      <List\n        pose={isOpen ? \"open\" : \"closed\"}\n        id=\"List_A\"\n        className={ ( \" col-\" + this.props.col ) + ( \" list array flex flex-row justify-between flex-auto flex-wrap w-100 pb4 pt2 ph0 bg-transparent \" ) }\n      >\n        { this.props.projects.map((item, index) => (\n          <Item key={index} className=\"relative mb4\">\n            <GridItem \n            key={index} \n            activeProject={this.props.activeProject} \n            project={item} \n            showDrawer={this.props.showDrawer} \n            theme={this.props.theme}\n            activeCurrency={this.props.activeCurrency}\n            // exchangeRate={this.props.exchangeRate}\n            // rate={item.extended.rate * exchangeRate}\n            />\n          </Item>\n        ))}\n      </List>\n    );\n  }\n}\nexport default ListProjects;\n","import React, { getGlobal } from \"reactn\";\nimport { Icon } from \"antd\";\nimport './style.css'\n// const docList = docs => (\n//   <div className=\"flex flex-column\">\n//     {docs.map((item, index) => (\n//       <div className=\"flex flex-row bb b--black-05\">\n//         <div\n//           style={{ backgroundImage: \"url(\" + item.avatar + \")\" }}\n//           className=\"project-image pa2 br2\"\n//         />\n//         <div className=\"flex\">\n//           <span className=\"f5 fw5 black-70\">{item.title}</span>\n//         </div>\n//       </div>\n//     ))}\n//   </div>\n// );\n\nexport default ({\n  updateActiveDoc,\n  activeDoc,\n  title,\n  theme,\n  docs,\n  showInsertForm,\n  trigger,\n  ready,\n  showButton\n}) => (\n  <section className=\"flex flex-row w-100\">\n    <section id=\"PageTitle\" className=\"flex flex-column w-100 relative\">\n      <h1\n        className={          \n          \"ma0 raleway -raleway f3 fw6  mb-0 flex flex-row items-center justify-start black\"\n        }\n      >\n        <span>{title}</span>\n        {\n          typeof docs !== \"undefined\" && docs !== false && \n          <div\n          style={{\n            color: \"white\",\n            fontWeight: \"bold\",\n            marginLeft: \"1rem\",\n            background: '#c4c4c7'\n          }}\n          className={\"  count-badge- f6 pv1 ph2 br1 -bg-white \"}\n        >\n          <span className={\"bg-white-\"}>\n            { ready && docs && docs.length || 0}\n          </span>\n        </div>\n        }\n        \n      </h1>\n      {\n        showButton ? \n        <h5\n        onClick={showInsertForm}\n        className={theme && theme.colorScheme.color + \" raleway -varela f6 fw6 mb4\"} >\n          <Icon type=\"plus\" /> Add New\n        </h5>\n        : null\n      }\n      \n    </section>\n    \n  </section>\n);\n","// import React, { Component, getGlobal, setGlobal, useGlobal } from \"react\";\nimport React from 'react';\nimport { getGlobal } from \"reactn\";\nimport { Icon } from \"antd\";\nimport posed, { PoseGroup, Transition } from \"react-pose\";\nimport moment from 'moment';\nimport './style.css';\nimport { Fn } from '../../../../utils/fn/Fn.js';\nconst ItemC = React.forwardRef((props, ref) => {\n  console.log('ItemC', props);\n  // diff(b) {\n  //   let now = new Date()\n  //   let a = moment(now);\n  //   let dif = a.diff(b)\n  // }\n  return (\n    <div\n      key={props.item.createdAt}\n      ref={ref}\n      style={props.style}\n      className={(props.recipientID !== props.item.author ? \"row-reverse justify-start message-list-item \" : \" message-list-item justify-start \") + (\" items-start flex flex-row w-100 pb4\")}\n    > {console.log('', props.recipientID), console.log('', props.item.author)}\n      <div style={{ backgroundImage: `url(` + props.avatarAuthor(props.item) + `)` }}\n        className=\"avatar-s flex flex-column bg-cover bg-center br2\" />\n      <div className={(props.recipientID !== props.item.author ? \"tr\" : \" tl\") + (\" flex flex-column w-100 message-text-box ph3 pt3 pb4 br2 mh2 mw5 right bs-b bg-white relative\")}>\n        {props.item.text}\n\n        <div className=\"message-sent-time flex flex-column\">\n          <span className=\" fw5 black-30\">{moment(props.item.createdAt).fromNow()}</span>\n        </div>\n      </div>\n    </div>\n  );\n});\nconst Item = posed(ItemC)({\n  enter: {\n    y: 0,\n    opacity: 1,\n    delay: 0,\n    transition: {\n      y: { type: 'spring', stiffness: 1000, damping: 100 },\n      default: { duration: 300 }\n    }\n  },\n  exit: {\n    y: -50,\n    opacity: 1,\n    delay: 300,\n    transition: {\n      y: { type: 'spring', stiffness: 1000, damping: 100 },\n      default: { duration: 300 }\n    }\n  }\n});\nconst List = posed.div({\n  enter: {\n    y: -50,\n    opacity: 1,\n    delay: 0,\n    transition: {\n      y: { type: 'spring', ease: 'easeInOut', stiffness: 1000, damping: 100 },\n      default: { duration: 300 }\n    }\n  },\n  exit: {\n    y: 0,\n    opacity: 0,\n    delay: 0,\n    transition: {\n      y: {\n        type: 'spring', stiffness: 1000, damping: 100, restDelta: 0.5,\n        restSpeed: 10\n      },\n      default: { duration: 300 }\n    }\n  }\n});\nconst TransitionItems = (props) => (\n  <Transition animateOnMount={true}  >\n    {\n      props.items.map(item =>\n        <Item\n          enterAfterExit={true}\n          beforeChildren={true}\n          animateOnMount={true}\n          key={item.createdAt}\n          item={item}\n          recipientID={props.recipientID}\n          avatarAuthor={props.avatarAuthor} />)\n    }\n  </Transition>\n)\n\nclass MessageBox1 extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      ready: false,\n      doc: {},\n      chef: {},\n      visible: this.props.visible,\n      placement: \"right\",\n      test: this.props.visible,\n      activeTab: \"1\",\n      characters: [],\n      conversation: {\n        messages: [],\n        participants: []\n      },\n      recipient: this.props.chef\n    };\n\n    console.log('Messagebox1', props)\n\n    this.showWidget = this.showWidget.bind(this);\n    this.checkUploadResult = this.checkUploadResult.bind(this);\n    this.avatar = this.avatar.bind(this);\n    this.avatarAuthor = this.avatarAuthor.bind(this);\n    this.goToTab1 = this.goToTab1.bind(this);\n    this.tabOnChange = this.tabOnChange.bind(this);\n    this.submitMessage = this.submitMessage.bind(this);\n    this.getRecipientDetail = this.getRecipientDetail.bind(this);\n    this.createNewConversation = this.createNewConversation.bind(this);\n    this.insertMessage = this.insertMessage.bind(this)\n    this.findConversation = this.findConversation.bind(this)\n\n    this.messageText = React.createRef()\n\n  }\n  submitMessage(e) {\n    e.preventDefault();\n    let text = this.messageText.current.value;\n    let message = {\n      author: JSON.parse(localStorage.getItem('account')).sub,\n      text: text,\n      createdAt: new Date()\n    }\n    this.insertMessage(message)\n  }\n  showDrawer = () => {\n    this.setState({\n      visible: true\n    });\n  };\n  onClose = () => {\n    this.setState({\n      visible: false\n    });\n  };\n  onChange = e => {\n    this.setState({\n      placement: e.target.value\n    });\n  };\n  tabOnChange(e) {\n    console.log(e);\n    this.setState({\n      activeTab: e\n    });\n  }\n  goToTab1() {\n    this.setState({ activeTab: \"1\" });\n  }\n  avatar() {\n    // console.log('avatar doc', this.props)\n    let avatar =\n      typeof this.state.recipient !== \"undefined\"\n        ? this.state.recipient.picture\n        : \"http://cdn.shopify.com/s/files/1/2278/2351/products/W1151_GeometricPattern3_1024x1024.jpg?v=1510704914\";\n    return avatar;\n  }\n  avatarAuthor(message) {\n    const authorID = message.author;\n    // console.log('author', id, this.props.chef.recipient._id)\n    if (message.author === this.state.recipient.sub) {\n      return this.state.recipient.picture\n    }\n    else {\n      return getGlobal().account.picture\n    }\n  }\n  async getRecipientDetail(doc) {\n    // let data = { doc, self: this };\n    // console.log('docinfo.js getRecipientDetail doc', data)\n    // let doc_ = await methods.getRecipientDetail(data);\n    // console.log('getRecipientDetail', doc_)\n  }\n\n  createNewConversation() {\n    const userID = getGlobal().account.sub;\n    const recipientID = this.props.chef.sub;\n    let conv = {\n      \"participants\": [\n        userID, recipientID\n      ],\n      \"messages\": []\n    }\n    // window.db.conversations.insert(conv, (e, r) => {\n    //   if (e) {\n    //     console.log('Insert Conversation Error', r)\n    //   }\n    //   else {\n    //     console.log('Insert Conversation Response', r)\n    //     this.setState({ conversation: r, ready: true })\n    //   }\n    // })\n    let apiurl = \"https://homechef-51a6.restdb.io/rest/\";\n    let collection = 'conversations';\n\n    // let query =  '/?q={\"$and\":[{\"participants\":\"' + userID + '\"},{\"participants\":\"' + recipientID + '\"}]}';\n    let endpoint = apiurl + collection;\n    let config = {\n      method: \"POST\",\n      headers: {\n        \"origin\": \"localhost\",\n        \"x-apikey\": \"5dbadbac64e7774913b6e751\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(conv)\n    }\n    return fetch(endpoint, config).then(res => { return res.json() }).then(res => {\n\n      console.log('new conv', res)\n      this.setState({ conversation: res, ready: true })\n\n    })\n  }\n  async findConversation() {\n\n    const userID = getGlobal().account.sub;\n    let chef = this.props.chef;\n\n    this.setState({ chef: chef })\n    const recipientID = chef.sub;\n\n    let apiurl = \"https://homechef-51a6.restdb.io/rest/\";\n    let collection = 'conversations';\n\n    let query = '?q={\"$and\":[{\"participants\":\"' + userID + '\"},{\"participants\":\"' + recipientID + '\"}]}';\n    let endpoint = apiurl + collection + query;\n\n    console.log('[[ Endpoint ]]', endpoint)\n    let config = {\n      headers: {\n        \"origin\": \"localhost:3000\",\n        \"x-apikey\": \"5dbadbac64e7774913b6e751\",\n        \"Content-Type\": \"application/json\"\n      }\n    }\n    return fetch(endpoint, config).then(res => {\n\n      return res.json()\n    }).then(r => {\n      console.log('findconversation', r)\n      if (r.length === 0) {\n        this.createNewConversation()\n      } else {\n        this.setState({ conversation: r[0] })\n        setTimeout(() => {\n          this.setState({ ready: true })\n        }, 500)\n        console.log('[[ findConversation ]]', this.state)\n      }\n    })\n    // return await window.db.conversations.find({\n    //   $and: [{ participants: recipientID }, { participants: userID }]\n    // }, (e, r) => {\n    //   console.log('methods.findConversation', r[0])\n\n    //   if (r.length === 0) {\n    //     this.createNewConversation()\n    //   } else {\n    //     this.setState({ conversation: r[0] })\n    //     setTimeout(() => {\n    //       this.setState({ ready: true })\n    //     }, 500)\n    //     console.log('[[ findConversation ]]', this.state)\n    //   }\n    // })\n  }\n  insertMessage2(message) {\n    const convID = this.state.conversation._id;\n    const conv = this.state.conversation;\n    conv.messages.unshift(message);\n\n    window.db.conversations.update({ _id: convID }, conv, (e, r) => {\n      this.findConversation()\n    })\n\n    this.messageText.current.value = null;\n  }\n  insertMessage(message) {\n    const convID = this.state.conversation._id;\n    const conv = this.state.conversation;\n    conv.messages.unshift(message);\n    this.setState({ conv: conv })\n    this.messageText.current.value = null;\n    let apiurl = \"https://homechef-51a6.restdb.io/rest/\";\n    let collection = 'conversations';\n\n    // let query =  '?q={\"$and\":[{\"participants\":\"' + userID + '\"},{\"participants\":\"' + recipientID + '\"}]}';\n    let endpoint = apiurl + collection + \"/\" + convID;\n\n    console.log('[[ Endpoint ]]', endpoint)\n    let config = {\n      method: \"PUT\",\n      headers: {\n        \"origin\": \"localhost:3000\",\n        \"x-apikey\": \"5dbadbac64e7774913b6e751\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(conv)\n    }\n    return fetch(endpoint, config).then(res => {\n\n      return res.json()\n    }).then(r => {\n      console.log('insertMessage', r)\n      // return this.findConversation()\n\n    })\n  }\n  showWidget(widget) {\n    window.widget.open();\n  }\n  checkUploadResult(resultEvent) {\n    if (resultEvent.event === \"success\") {\n    }\n  }\n  componentDidUpdate() {\n  }\n  componentDidMount() {\n    // this.setState({ ready: true });\n    this.findConversation()\n  }\n  render() {\n    return (\n      <div>\n        <div className=\"messageBox flex flex-column relative h-100 flex-auto\">\n          {this.props.conversationReady && this.state.ready ?\n            <>\n              <div className=\"flex flex-auto flex-column relative bg-white\">\n                <div\n                  className=\" relative flex flex-auto flex-column w-100 bg-center bg-cover items-start justify-end pa3 relative overflow-hidden\"\n                >\n                  <div\n                    className={\n                      (this.props.theme.main === \"dark\" ? \" \" : \" \")\n                      + (\"List_A_item cursor-pointer sans-serif flex flex-row flex-auto w-100  items-center justify-start pa0 mb4- br2 overflow-hidden relative \")}\n                  >\n                    <div\n                      style={{ backgroundImage: `url(` + this.avatar(this.props.chef) + `)` }}\n                      className=\"avatar flex flex-column bg-cover bg-center br2\"\n                    />                 <div className=\"flex flex-column pa3 w-100\">\n                      <div className=\"flex flex-row w-100\">\n                        <div className={\n                          (this.props.theme.main === \"dark\" ? \" white \" : \" black-70 \")\n                          + (\"flex flex-column mr2 f5 fw6 \")}>\n                          {this.props.chef.given_name}\n                        </div>\n                        <div className={\n                          (this.props.theme.main === \"dark\" ? \" white-50 \" : \" black-50 \")\n                          + (\"flex flex-column flex-auto fw4 f5 black-50 \")}>\n                          {this.props.chef.family_name}\n                        </div>\n                      </div>\n                    </div></div>\n                </div>\n              </div>\n              <div className=\"flex -absolute -bottom-0 w-100\">\n                <form onSubmit={this.submitMessage} className=\"flex flex-row w-100 ma0\">\n                  <div className=\"flex flex-column w-80\">\n                    <input\n                      required={true}\n                      placeholder={'Enter message ...'}\n                      ref={this.messageText}\n                      className=\"bn pa3 f4 fw5 black-60- white bg-black-20\"\n                      type=\"text\"></input>\n                  </div>\n                  <div className=\"flex flex-column w-20 bl b--black-05\">\n\n                    <button type={'submit'} className={Fn.get('theme').config.theme.colorScheme.bg + (\"- bg-black-20 flex h-100 items-center justify-center f4 bn white\")}><Icon type=\"arrow-right\" /></button>\n                  </div>\n                </form>\n              </div>\n              <div\n                className=\" relative flex flex-auto flex-column w-100 bg-center bg-cover items-start justify-end relative overflow-hidden \"\n              > <List animateOnMount={true} className=\"messages-list db relative overflow-auto w-100 pa4 \">\n                  <TransitionItems\n                    items={this.state.conversation.messages}\n                    recipientID={this.state.recipient.sub}\n                    avatarAuthor={this.avatarAuthor} />\n                </List>\n              </div>\n\n            </>\n            : <div className=\"flex flex-column flex-auto h-100 w-100 items-center justify-center\">\n              <div className=\"flex flex-column pa5\">\n                <Icon type=\"loading\" className=\"f2 black-20\" />\n              </div>\n            </div>\n          }\n\n        </div>\n\n      </div>\n    );\n  }\n}\n\nexport default MessageBox1;\n// {this.state.conversation.messages.map((item, index) => (\n//   <Item key={item.createdAt} recipientID={this.state.recipient._id} item={item} avatarAuthor={this.avatarAuthor}  />\n// ))}</TransitionItems>","import React, { getGlobal } from \"reactn\";\nimport { Icon } from 'antd';\nimport moment from \"moment\";\nimport CurrencyContext from '../../../../CurrencyContext';\nimport { Fn } from '../../../../utils/fn/Fn.js';\nclass ReservationConfirmationScreen extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            isOpen: false,\n            loading: false,\n            buttonLoading: false\n        }\n        this.confirm = this.confirm.bind(this)\n        this.cancel = this.cancel.bind(this)\n    }\n    confirm() {\n        this.setState({ buttonLoading: true })\n        this.props.submitReservationRequest(this.props.reservationData)\n    }\n    cancel() {\n        this.props.closeReservationScreen()\n    }\n    componentDidMount() {\n        console.log('ReservationConfirmationScreen props',this.props.reservationData.chef.rate)\n    }\n    componentDidUpdate() {\n        console.log('ReservationConfirmationScreen props',this.props)\n    }\n    render() {\n        return (<>\n            <CurrencyContext.Consumer>\n                  {props => {\n                    console.log('[[ currency context ]]', props);\n                    return <div className=\"flex flex-column  bg-near-white h-100 exo\">\n                    <section id=\"\" className=\"flex flex-column ph4 pt4 h-100\">\n    \n                        <div className=\"flex flex-column mb2 bb b--black-05 pa4 ba b--black-05 bg-white bs-b\">\n                            <div className=\"ProjectScenesHeading pt0\">\n                                <h3 className=\"f7 fw3 black-30 mb2\">Location</h3>\n                            </div>\n                            <div className=\"flex flex-auto flex-column pb0\">\n                                <p className=\"f4 fw4 black-60 mb0\">{this.props.reservationData.location}</p>\n                            </div>\n    \n                        </div>\n                        <div className=\"flex flex-column mb2 pa4 ba b--black-05 bg-white bs-a\">\n                            <div className=\"ProjectScenesHeading pt0\">\n                                <h3 className=\"f7 fw3 black-30 mb2\">Date</h3>\n                            </div>\n                            <div className=\"flex flex-auto flex-column pb0\">\n                                <p className=\"f4 fw4 black-60 mb0\">{moment(this.props.reservationData.date).format('MMMM Do YYYY')}</p>\n                            </div>\n    \n                        </div>\n    \n                        <div className=\"flex flex-row justify-between mb2 pa4 ba b--black-05 bg-white bs-a\">\n                            <div className=\"flex flex-column\">\n                                <div className=\"ProjectScenesHeading pt0\">\n                                    <h3 className=\"f7 fw3 black-30 mb2\">Start Time</h3>\n                                </div>\n                                <div className=\"flex flex-auto flex-column pb0\">\n                                    <p className=\"f4 fw4 black-60 mb0\">{moment(this.props.reservationData.timeStart).format('LT')}</p>\n                                </div>\n                            </div>\n                            <div className=\"flex flex-column\">\n                                <div className=\"ProjectScenesHeading pt0\">\n                                    <h3 className=\"f7 fw3 black-30 mb2\">End Time</h3>\n                                </div>\n                                <div className=\"flex flex-auto flex-column pb0\">\n                                    <p className=\"f4 fw4 black-60 mb0\">{moment(this.props.reservationData.timeEnd).format('LT')}</p>\n                                </div>\n                            </div>\n                        </div>\n    \n                        <div className=\"flex flex-column mb2 pa4 ba b--black-05 bg-white bs-a\">\n                            <div className=\"ProjectScenesHeading pt0\">\n                                <h3 className=\"f7 fw3 black-30 mb2\">Hourly Rate</h3>\n                            </div>\n                            <div className=\"flex flex-auto flex-column pb0\">\n                                <p className=\"f4 fw4 black-60 mb0\">{this.props.currency.symbol}{Math.round(parseInt(this.props.reservationData.chef.extended.rate) * this.props.exchangeRate)}</p>\n                            </div>                        \n                        </div>\n     \n    \n                        <div className=\"flex flex-column mb2 pa4 ba b--black-05 bg-white bs-a\">\n                            <div className=\"ProjectScenesHeading pt0\">\n                                <h3 className=\"f7 fw3 black-30 mb2\">Cost</h3>\n                            </div>\n                            <div className=\"flex flex-auto flex-column pb0\">\n                                <p className=\"f4 fw4 black-60 mb0\">{this.props.reservationData.cost}.00</p>\n                            </div>\n    \n                        </div>\n    \n                        <div className=\"flex flex-column mb2 pa4 ba b--black-05 bg-white bs-a\">\n                            <div className=\"ProjectScenesHeading pt0\">\n                                <h3 className=\"f7 fw3 black-30 mb2\">Additional Charges</h3>\n                            </div>\n                            <div className=\"flex flex-auto flex-column pb0\">\n                                <p className=\"f4 fw4 black-60 mb0\">{this.props.reservationData.additionalCharges}.00</p>\n                            </div>\n    \n                        </div>\n                        <div className=\"flex flex-column  mb2 pa4 ba b--black-05 bg-white bs-a mb6\">\n                            <div className=\"ProjectScenesHeading pt0\">\n                                <h3 className=\"f7 fw3 black-30 mb2\">Total Cost</h3>\n                            </div>\n                            <div className=\"flex flex-auto flex-column\">\n                                <p className={(Fn.get('theme').config.theme.colorScheme.color) + (\" f1 fw4 black-60 mb0\")}>{this.props.reservationData.totalCost}.00</p>\n                            </div>\n                            <div className=\"ProjectScenesHeading pt0\">\n                                <h3 className=\"f7 fw5 black-30 mb0\">{this.props.reservationData.currency.name}</h3>\n                            </div>    \n                        </div>\n                    </section>\n                    <section id=\"ActionButtons\" className=\"absolute bottom-0 w-100 flex flex-column bs-b\">\n                        <div className=\"Buttons flex flex-row justify-between\">\n                            <div className=\"flex flex-column w-100 \">\n                                <button\n                                    className={(Fn.get('theme').config.theme.colorScheme.bg) + (\" -bg-white -bs-a -c_1_bg ph3 pv3 pointer bn  \")}\n                                    onClick={this.confirm} >\n                                    <span className=\"f4 fw6 white -black-30 pv2 flex items-center justify-center\">\n                                        {/* <Icon type=\"calendar\" className={(\" whtie f4 black-60 mr2 \")} />  */}\n                                        Confirm  </span>\n                                </button>\n                            </div>\n                            {/* <div className=\"flex flex-column w-100 \">\n                                <button\n                                    className={(Fn.get('theme').config.theme.colorScheme.bg) + (\"- bg-white -bs-a -c_1_bg ph3 pv3 pointer bn\")}\n                                    onClick={this.cancel}>\n                                    <span className=\"f7 fw5 white- black-30 pv2 flex items-center justify-center\">\n                                        <Icon type=\"close\" className={(Fn.get('theme').config.theme.colorScheme.color) + (\" f4 black-60 mr2\")} /> Cancel\n                                            </span>\n                                </button>\n                            </div> */}\n                        </div>\n    \n                    </section>\n    \n                </div>\n                  }}\n                </CurrencyContext.Consumer>\n            </>\n        )\n    }\n}\nexport default ReservationConfirmationScreen;\n\n","// import React, { setGlobal, useGlobal, getGlobal } from \"reactn\";\nimport mailsend from './mailSend.js';\nlet mail = {}\n// mail.init = () => {\n//     let a = \"test\"\n// }\nmail.ReservationRequestUser = async (data) => {\n    return await mailsend.ReservationRequestUser(data)\n}\nmail.SendNotification = async (data) => {\n    console.log('mail.SendNotification', data)\n    // const subject_ = data.subject + \" [ Crew20 ]\",\n    // data_ = { subject_, ...data }\n    return await mailsend.SendNotification(data)\n}\nmail.ChefReservationRequestNotification = async (data) => {\n    console.log('mail.ChefReservationRequestNotification', data)\n    const confirmationEmailSubject = \"Reservation request received [ HomeChef ]\",\n        data_ = { confirmationEmailSubject, ...data }\n    return await mailsend.ChefReservationRequestNotification(data_)\n}\nmail.reservationCancellationNotification = async (data) => { }\nmail.reservationConfirmationNotification = async (data) => { }\nmail.reservationRequestConfirmation = async (data) => { }\nmail.reservationDeniedConfirmation = async (data) => { }\n\nmail.userRegistration = async (data) => { }\nmail.userWelcomeEmail = async (data) => { }\n\nmail.passwordReset = async (data) => { }\nmail.passwordResetConfirmation = async (data) => { }\n\nmail.newMessage = async (data) => { }\n// mail.EmailNotification = async (data) => { \n\n// }\nexport default mail;","import React, { getGlobal } from \"reactn\";\nimport { Icon } from 'antd';\nimport './style.css';\nimport { Fn } from '../../../../utils/fn/Fn.js';\n// import mobiscroll from '@mobiscroll/react';\n// import '@mobiscroll/react/dist/css/mobiscroll.min.css';\n// mobiscroll.settings = {\n//     theme: 'ios'\n// };\nimport { DatePicker, TimePicker } from \"@blueprintjs/datetime\";\n// import DatePicker_ from './DatePicker';\nimport moment from 'moment';\nimport \"@blueprintjs/core/lib/css/blueprint.css\";\nimport \"@blueprintjs/datetime/lib/css/blueprint-datetime.css\";\n\nclass ReservationForm extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            loading: false,\n            buttonLoading: false,\n            reservationData: {},\n            formData: {},\n            startTime: '',\n            endTime: '',\n            selectedDate: new Date(),\n            timeRounded: ''\n        }\n\n        this.saveFormData = this.saveFormData.bind(this)\n        this.submit = this.submit.bind(this)\n        this.timeOnChangeEnd = this.timeOnChangeEnd.bind(this)\n        this.timeOnChangeStart = this.timeOnChangeStart.bind(this)\n        this.dateOnChange = this.dateOnChange.bind(this)\n\n        console.log('ReservationForm', props)\n    }\n    saveFormData() {\n        this.setState({ buttonLoading: true })\n    }\n    timeOnChangeStart(value) {\n        console.log(value)\n        this.setState({ startTime: value })\n    }\n    timeOnChangeEnd(value) {\n        console.log(value)\n        this.setState({ endTime: value })\n    }\n    dateOnChange(value) {\n        console.log(value)\n        this.setState({ selectedDate: value })\n    }\n    submit(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        let start = this.state.startTime;\n        let end = this.state.endTime;\n        let start_ = moment(start);\n        let end_ = moment(end);\n        let hours = end_.diff(start_, 'hours', true);\n        const data = {\n            date: this.state.selectedDate,\n            timeStart: this.state.startTime,\n            timeEnd: this.state.endTime,\n            hours: hours\n        }\n        // console.log('Formdata', data)\n        this.props.showReservationConfirmationScreen(data);\n    }\n    componentDidMount() {\n        let date = new Date(2011, 1, 1, 4, 55); // 4:55\n        let timeRounded = roundMinutes(date); // 5:00\n        this.setState({\n            defaultTime: timeRounded\n        })\n        function roundMinutes(date) {\n            date.setHours(date.getHours() + Math.round(date.getMinutes() / 60));\n            date.setMinutes(0);\n            return date;\n        }\n    }\n    render() {\n        return (\n            <div className=\"flex flex-column -bg-near-white h-100\">\n                <form\n                    onSubmit={this.props.type === \"single\" ? this.submit : this.saveFormData}\n                    className=\"flex flex-column ma0\" id=\"\">\n                    <div className=\"form-row flex flex-column pb3\">\n                        <>\n                            <div className=\"form-row flex flex-column pa4\">\n                                <label className=\"f7 fw6 black-90 pb2\">Date</label>\n                                <DatePicker\n                                    defaultValue={new Date()}\n                                    onChange={this.dateOnChange}\n                                    required={true}\n                                />\n                            </div>\n                            <div className=\"flex flex-row justify-between w-100 pa4\">\n                                <div className=\"form-row flex flex-column pb3\">\n                                    <label className=\"f7 fw6 black-90 pb2\">Start Time</label>\n                                    <TimePicker\n                                        required={true}\n                                        showArrowButtons={true}\n                                        useAmPm={true}\n                                        defaultValue={new Date()}\n                                        onChange={this.timeOnChangeStart}\n                                    />\n                                </div>\n                                <div className=\"form-row flex flex-column pb3\">\n                                    <label className=\"f7 fw6 black-90 pb2\">End Time</label>\n                                    <TimePicker\n                                        required={true}\n                                        showArrowButtons={true}\n                                        useAmPm={true}\n                                        onChange={this.timeOnChangeEnd}\n                                        defaultValue={new Date()}\n                                    />\n                                </div>\n                            </div>\n                        </>\n                    </div>\n                    <div className=\"Buttons flex flex-row justify-between pa4-\">\n\n                        <div className=\"flex flex-column w-100 mr1\">\n                            <button\n                                className={(\" bg-white -bs-a -c_1_bg ph3 pv2 pointer bn    \")} >\n                                <span className=\"f6 fw5 white- black-30 pv3 flex items-center justify-center\">\n                                    {this.state.buttonLoading ? <Icon type=\"loading\" className={' f4 black-60 mr2'} /> : <Icon type=\"check-circle\" className={ Fn.get('theme').config.theme.colorScheme.color + (' f4 black-60 mr2')} />} Request Reservation</span>\n                            </button>\n                        </div>\n\n                    </div>\n                </form>\n            </div>\n        )\n    }\n}\nexport default ReservationForm;\n\n","import React, { getGlobal } from \"reactn\";\nimport { notification, Checkbox, Tabs } from 'antd';\nimport ReservationConfirmationScreen from '../data/ReservationConfirmation';\nimport mail from '../../../../utils/methods/mail';\nimport ReservationForm from './ReservationForm';\nimport './style.css';\nconst { TabPane } = Tabs\n\n\nclass ReservationFormWrapper extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            isOpen: false,\n            loading: false,\n            buttonLoading: false,\n            showConfirmationScreen: false,\n            reservationData: {},\n            checkMultipleDays: false,\n            daysCount: [\"1\",\"2\"],\n            formData: []\n        };\n        this.submitReservationRequest = this.submitReservationRequest.bind(this)\n        this.openNotification = this.openNotification.bind(this)\n        this.clearReservationForm = this.clearReservationForm.bind(this)\n        this.showReservationConfirmationScreen = this.showReservationConfirmationScreen.bind(this)\n        this.sendChefReservationConfirmationEmail = this.sendChefReservationConfirmationEmail.bind(this)\n        this.sendUserReservationConfirmationEmail = this.sendUserReservationConfirmationEmail.bind(this)\n        this.closeReservationScreen = this.closeReservationScreen.bind(this)\n        this.checkMultipleDays = this.checkMultipleDays.bind(this)\n        this.setDaysCount = this.setDaysCount.bind(this)\n        this.addFormData = this.addFormData.bind(this)\n\n        this.reservationDate = React.createRef();\n        this.reservationTime = React.createRef();\n        this.reservationHours = React.createRef();\n        this.daysCount = React.createRef();\n\n        console.log('ReservationForm', props)\n    }\n    checkMultipleDays(e) {\n        console.log(`checked = ${e.target.checked}`);\n        this.setState({\n            checkMultipleDays: e.target.checked\n        })\n    }\n    setDaysCount(e) {   \n        let count = e.target.value;\n        console.log('count',count)\n        let days = Array.from(Array(parseInt(count)).keys())\n        console.log('count',count, days)\n        this.setState({ daysCount: days })\n    }\n    \n    closeReservationScreen() {\n        this.setState({ showConfirmationScreen: false })\n    }\n    clearReservationForm() {\n        this.reservationHours.current.value = null;\n        this.reservationDate.current.value = null;\n    }\n    addFormData(data) {\n        let formData = this.state.formData;\n        formData.push(data)\n    }\n    async sendUserReservationConfirmationEmail() {\n        const data = this.state.reservationData;\n        // console.log('sendReservationConfirmationEmail', data)\n        return await mail.UserReservationRequestNotification(data);\n        // return await mail.ReservationRequestUser(data);\n    }\n    async sendChefReservationConfirmationEmail() {\n        const data = this.state.reservationData;\n        // console.log('sendReservationConfirmationEmail', data)\n        return await mail.ChefReservationRequestNotification(data);\n    }\n    \n    async submitReservationRequest(reservationData) {\n        console.log('submitReservationRequest props',this.props)\n        console.log('reservationdata', reservationData)\n        let currency = this.props.activeCurrency;\n        let exchangeRate = this.props.exchangeRate;\n\n        this.setState({ reservationData: reservationData })\n        window.db.reservations.insert(reservationData, (err, res) => {\n            if (err) {\n                console.error(err)\n                this.openNotification({ type: \"reservation\", title: \"Error\", message: \"There was an error making your reservation, our team has been notitifed and will get back to you shortly.\" })\n            }\n            else {\n                console.log('[[ db.reservations.insert response ]]',res)\n                setTimeout(() => {\n\n                    this.openNotification({ type: \"reservation\", title: \"Success\", message: \"Your reservation request has been sent.\" });\n                    this.setState({ buttonLoading: false })\n\n                    let reservationData = this.state.reservationData;\n\n                    reservationData.reservationID = res._id;\n                    reservationData.currency = currency;\n\n                    this.setState({ reservationData: reservationData });\n\n                    this.sendUserReservationConfirmationEmail()\n                    this.sendChefReservationConfirmationEmail()\n\n                    this.props.hideInnerDrawer()\n                    this.props.hideDrawer()\n                    \n                }, 1000)\n            }\n        })\n    }   \n    showReservationConfirmationScreen = (data) => {\n        console.log('showReservationConfirmationScreen', this.props, data)\n        const chef = this.props.chef;\n        const user = getGlobal().account;\n        // const currency = getGlobal().activeCurrency.symbol;\n        const reservationCost = chef.extended.rate * data.hours;\n        // const reservationCostString = reservationCost;\n        const additionalCharges = 0;\n        const totalCost = ( reservationCost + additionalCharges );\n        const location = \"233 Jan Smuts Avenue, Rosebank, Johannesburg\";\n        let currency = this.props.currency;\n        let exchangeRate = this.props.exchangeRate;\n\n        let reservationData = { \n            chef: this.props.chef,\n            user,\n            location, \n            totalCost: currency.symbol + ( Math.round(totalCost * exchangeRate)), \n            additionalCharges: currency.symbol + ( Math.round(additionalCharges * exchangeRate)), \n            cost: currency.symbol + ( Math.round(reservationCost * exchangeRate)), \n            hours: data.hours, \n            timeStart: data.timeStart.toString(), \n            timeEnd: data.timeEnd.toString(), \n            date: data.date.toString(),\n            currency: currency            \n        }\n        console.log('reservationData', reservationData)\n        this.setState({ showConfirmationScreen: true, reservationData: reservationData })\n    }\n    openNotification = (data) => {\n        const { title, message } = data;\n\n        notification.open({\n            message: title,\n            description:\n                message,\n            onClick: () => {\n            }\n        })\n    }\n    componentDidMount() {\n        setTimeout(this.toggle, 100);\n    }\n    render() {\n        // const { isOpen } = this.state;\n        console.log('chefs list props', this.props)\n        return (\n            this.state.showConfirmationScreen ?\n                <ReservationConfirmationScreen\n                    submitReservationRequest={this.submitReservationRequest}\n                    reservationData={this.state.reservationData}\n                    closeReservationScreen={this.closeReservationScreen}\n                    exchangeRate={this.props.exchangeRate}\n                    currency={this.props.currency}\n                />\n                :\n                <div className=\"flex flex-column -bg-near-white h-100 exo\">\n                    <section id=\"Rate\" className=\"ma4 flex flex-column pa3 ba b--black-05 bg-white- bs-b-\">\n                        <div className=\"ProjectScenesHeading pt0\">\n                            <h3 className=\"f7 fw5 black-30 pb2\">Hourly Rate</h3>\n                        </div>\n                        <div className=\"flex flex-auto flex-column pb3\">\n                            <p className=\"f3 fw5 black-60 mb0\">{this.props.currency.symbol}{Math.round(this.props.chef.extended.rate * this.props.exchangeRate)}</p>\n                        </div>\n                    </section>\n                    <div\n                        // onSubmit={this.showReservationConfirmationScreen}\n                        className=\"flex flex-column\" id=\"\">\n                        <div className=\"form-row flex flex-column\">\n                            <Checkbox \n                            className=\" flex ph4 \" \n                            onChange={this.checkMultipleDays}>Reserve Multiple days</Checkbox>\n                            {\n                                this.state.checkMultipleDays ?\n                                <>\n                                <div className=\"flex flex-column ph4\">\n                                    <label className=\"f7 fw6 black-90 pb2\">Number of days</label>\n                                    <input\n                                        required={false}\n                                        ref={this.daysCount}\n                                        className=\"ph3 pv3 br1 bn bs-a f4 fw5 black-80 h-100\"\n                                        type={\"number\"} \n                                        onChange={this.setDaysCount} \n                                        value={this.state.daysCount.length}\n                                        />\n                                </div>\n                                <div className=\"flex flex-column daysCount-tabs pv3\">\n                                <Tabs \n                                size={'small'} \n                                defaultActiveKey=\"0\" \n                                tabPosition={\"top\"} \n                                className=\"daysCount-tabs\">\n                                    {this.state.daysCount.map((item, index) => (\n                                        <TabPane tab={`Day ${index + 1}`} key={index}>\n                                            <div className=\"flex flex-column pv3 ph4-\">\n                                                <ReservationForm \n                                                showReservationConfirmationScreen={this.showReservationConfirmationScreen}\n                                                type={'multi'} \n                                                addFormData={this.addFormData} />\n                                            </div>\n                                        </TabPane>\n                                    ))}\n                                </Tabs>\n                                </div>\n                                </>\n                                : \n                                <ReservationForm \n                                showReservationConfirmationScreen={this.showReservationConfirmationScreen} \n                                type={'single'} \n                                addFormData={this.addFormData} />\n                            }\n                        </div>\n                        \n                        \n                    </div>\n\n                </div>\n\n        )\n    }\n}\nexport default ReservationFormWrapper;\n\n","import React, { getGlobal } from \"reactn\";\nimport { Link } from \"react-router-dom\";\nimport { Drawer, Rate } from \"antd\";\nimport { Tabs, Icon } from \"antd\";\nimport MessageBox1 from '../messages/messagebox1';\nimport methods from '../../../../utils/methods';\nimport { Fn } from '../../../../utils/fn/Fn.js';\nimport ReservationFormWrapper from '../forms/ReservationFormWrapper';\n\nimport './style.css';\n\nconst { TabPane } = Tabs;\n\nconst specialties = [\n  {\n    name: \"pizza\",\n    description: \"pizza\",\n    image: \"https://img.theculturetrip.com/768x432/wp-content/uploads/2018/11/p028c1.jpg\"\n  },\n  {\n    name: \"pasta\",\n    description: \"pasta\",\n    image: \"https://www.bbcgoodfood.com/sites/default/files/editor_files/2017/08/goan.jpg\"\n  },\n  {\n    name: \"lasagne\",\n    description: \"lasagne\",\n    image: \"https://www.africa.com/wp-content/uploads/2019/04/potjiekos_sa_geckoro_sGNEZ.jpg\"\n  },\n]\nconst cuisines = [\n  {\n    name: \"italian\",\n    description: \"italian\",\n    image: \"https://img.theculturetrip.com/768x432/wp-content/uploads/2018/11/p028c1.jpg\"\n  },\n  {\n    name: \"thai\",\n    description: \"thai\",\n    image: \"https://www.bbcgoodfood.com/sites/default/files/editor_files/2017/08/goan.jpg\"\n  },\n  {\n    name: \"south african\",\n    description: \"south african\",\n    image: \"https://www.africa.com/wp-content/uploads/2019/04/potjiekos_sa_geckoro_sGNEZ.jpg\"\n  },\n]\n\nconst roles = [\n  { name: \"Executive Project\",\n  description: \"\",\n    active: true },\n    { name: \"Project de Cuisine\",\n    description: \"\",\n    active: false },\n    { name: \"Sous Project\",\n    description: \"\",\n    active: true },\n    { name: \"Project de Partie\",\n    description: \"\",\n    active: false },\n    { name: \"Commis Project\",\n    description: \"\",\n    active: false },\n]\n\nclass ProjectInfo extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      doc: this.props.project,\n      conversation: this.props.activeConversation,\n      visible: this.props.visible,\n      childrenDrawer: false,\n      placement: \"right\",\n      test: this.props.visible,\n      activeTab: this.props.activeTab,\n      characters: [],\n      conversationReady: false,\n      ready: false,\n      specialtiesDrawerVisible: false,\n      itemDetailDrawerVisible: false,\n      activeItem: {}\n    }\n\n    console.log('DocInfo', props);\n\n    this.avatar = this.avatar.bind(this);\n    this.goToTab1 = this.goToTab1.bind(this);\n    this.goToTab2 = this.goToTab2.bind(this);\n    this.tabOnChange = this.tabOnChange.bind(this);\n    this.showChildrenDrawer = this.showChildrenDrawer.bind(this)\n    this.hideInnerDrawer = this.hideInnerDrawer.bind(this);\n    this.getRecipientDetail = this.getRecipientDetail.bind(this);\n    this.toggleSpecialtiesDrawer = this.toggleSpecialtiesDrawer.bind(this);\n    this.toggleItemDetailDrawer = this.toggleItemDetailDrawer.bind(this)\n\n    this.reservationHours = React.createRef();\n    this.reservationDate = React.createRef();\n  }\n  toggleItemDetailDrawer(data) {\n    // alert()\n    const { item } = data;\n    this.setState({\n      activeItem: item && item || this.state.activeItem,\n      itemDetailDrawerVisible: !this.state.itemDetailDrawerVisible\n    })\n  }\n  toggleSpecialtiesDrawer() {\n    this.setState({\n      specialtiesDrawerVisible: !this.state.specialtiesDrawerVisible\n    })\n  }\n  showChildrenDrawer = () => {\n    this.setState({\n      childrenDrawer: true,\n    });\n  };\n\n  hideInnerDrawer = () => {\n    this.setState({\n      childrenDrawer: false,\n    });\n  };\n  showDrawer = () => {\n    this.setState({\n      visible: true\n    });\n  };\n  onClose = () => {\n    this.setState({\n      visible: false\n    });\n  };\n  onChange = e => {\n    this.setState({\n      placement: e.target.value\n    });\n  };\n  tabOnChange(e) {\n    console.log('activeTab', e);\n    this.setState({\n      activeTab: e\n    })\n  }\n  goToTab1() {\n    this.setState({ activeTab: \"1\" });\n  }\n  goToTab2() {\n    this.setState({ activeTab: \"2\" });\n  }\n  avatar(project) {\n    console.log('ProjectInfo user', project)\n    let avatar =\n      typeof project.media.images !== \"undefined\"\n        ? project.media.images[0].url\n        : \"http://cdn.shopify.com/s/files/1/2278/2351/products/W1151_GeometricPattern3_1024x1024.jpg?v=1510704914\";\n    return avatar;\n  }\n  checkUploadResult(resultEvent) {\n    if (resultEvent.event === \"success\") {\n      // console.log(this.props.currentUser.id)\n    }\n  }\n  async getRecipientDetail(doc) {\n    let data = { doc, self: this };\n    console.log('docinfo.js getRecipientDetail doc', data)\n    let doc_ = await methods.getRecipientDetail(data);\n    console.log('getRecipientDetail', doc_)\n  }\n  componentDidUpdate() {\n    // console.log(\"Update\", this.state, this.props.visible);\n  }\n  componentDidMount() {\n    console.log('docinfo props', this.props)\n  }\n  render() {\n\n    return (\n      <div>\n        <Drawer\n          // title={\"Project Detail\"}\n          placement={\"right\"}\n          // closable={true}\n          onClose={this.props.hideDrawer}\n          width={500}\n          visible={this.props.visible}\n          doc={this.props.project}\n          className={\"ProjectDetail -bg-near-white\"}\n        >\n          <Drawer\n            // title=\"Request a Reservation\"\n            width={500}\n            closable={false}\n            onClose={this.hideInnerDrawer}\n            visible={this.state.childrenDrawer}\n            className={\"-bg-near-white\"}\n          >\n            <ReservationFormWrapper\n              project={this.props.project}\n              hideDrawer={this.props.hideDrawer}\n              hideInnerDrawer={this.hideInnerDrawer}\n              exchangeRate={this.props.exchangeRate}\n              currency={this.props.activeCurrency}\n            />\n          </Drawer>\n\n          <Drawer\n            // title=\"Request a Reservation\"\n            width={400}\n            closable={true}\n            onClose={this.toggleSpecialtiesDrawer}\n            visible={this.state.specialtiesDrawerVisible}\n          >\n            <div className=\"flex flex-column mb2 pa4  \">\n              <div className=\"ProjectScenesHeading pt0\">\n                <h3 className=\"f6 fw3 black-30 mb3\">Specialties</h3>\n              </div>\n\n              <div className=\"flex flex-auto flex-column pb0\">\n                <div className=\"specialties-list- flex flex-column flex-wrap justify-start f4 fw4 black-60 mb0\">\n                  {\n                    specialties.map((item, index) => (\n                      <div onClick={() => this.toggleItemDetailDrawer({ item })} className=\"specialties-list-item- flex flex-column mb4 \">\n                        <div className=\"ttc flex flex-column pb2 f5 fw5 exo\">{item.name}</div>\n                        <div\n                          style={{ backgroundImage: 'url(' + item.image + ')' }}\n                          className=\"h4 w-100 cover bg-center br3 bs-c\"></div>\n\n                      </div>\n                    ))\n                  }\n                  {\n                    specialties.length === 0 &&\n\n\n                    <h3 className=\"f5 fw1 black-30 pb3\">No Specialties Added Yet</h3>\n                  }\n                </div>\n              </div>\n            </div>\n          </Drawer>\n          <Drawer\n            title=\"Detail\"\n            width={400}\n            closable={true}\n            onClose={this.toggleItemDetailDrawer}\n            visible={this.state.itemDetailDrawerVisible}\n          >\n            <div className=\"flex flex-column mb2 pa4  \">\n              <div className=\"ProjectScenesHeading pt0\">\n                <h3 className=\"f6 fw3 black-30 mb3\">Specialties</h3>\n              </div>\n\n              <div className=\"flex flex-auto flex-column pb0\">\n                <div className=\"specialties-list- flex flex-column flex-wrap justify-start f4 fw4 black-60 mb0\">\n                  <div className=\"specialties-list-item- flex flex-column mb4 \">\n                    <div className=\"ttc flex flex-column pb2 f5 fw5 exo\">{this.state.activeItem.name}</div>\n                    <div\n                      style={{ backgroundImage: 'url(' + this.state.activeItem.image + ')' }}\n                      className=\"h4 w-100 cover bg-center br2 bs-c\"></div>\n                    <div className=\"ttc flex flex-column pb2 f4 fw3 exo mt3 black-60\">{this.state.activeItem.description}</div>\n                  </div>\n\n                </div>\n              </div>\n            </div>\n          </Drawer>\n\n          <Tabs\n            onChange={this.tabOnChange}\n            defaultActiveKey=\"1\"\n            activeKey={this.state.activeTab}\n          >\n            <TabPane tab={<span className=\"exo f7 fw5 white- black-30 pv2 flex items-center justify-center\"><Icon type=\"calendar\" className={(Fn.get('theme').config.theme.colorScheme.color) + (\" f4 black-60 mr2\")} /> View</span>} key=\"1\">\n              <div className=\"exo flex flex-auto flex-column relative\">\n                <div\n                  style={{\n                    backgroundImage: \"url(\" + this.avatar(this.props.project) + \")\"\n                  }}\n                  className=\" project-cover-image relative h5 flex flex-auto flex-column w-100 bg-center bg-cover items-start justify-end pa5 relative overflow-hidden\"\n                >\n                  <h4 className=\"f4 fw6 black-70- white mb0 rubik\">\n                    {this.props.project.title}\n                  </h4>\n                  <h4 className=\"f5 fw4 black-50- white-80 mb0\">\n                    {this.props.project.description}\n                  </h4>\n\n                  <div className=\"absolute bottom-0 right-0 flex flex-auto flex-column pa3\">\n                    <button\n                      className=\"addCoverPhoto -pulse flex flex-auto items-center justify-center ph3 pv2 bn br1 -c_1_bg white f6 fw6 bg-transparent relative\"\n                      onClick={this.showWidget}\n                    >\n                      <Icon type=\"file\" className=\"slide-fwd-center \" />\n                    </button>\n                  </div>\n                </div>\n              </div>\n              <section id=\"ActionButtons\" className=\"-ph3 -pv3 -pb5 -bb -b--black-05\">\n\n                <div className=\"Buttons flex flex-row justify-between\">\n                  <div className=\"flex flex-column w-100 \">\n                    <button className={(\"- bg-white -bs-a -c_1_bg ph3 pv2 pointer bn \")} onClick={this.showChildrenDrawer}><span className=\"exo c_5- f6 fw5 white- black-30 pv3 flex items-center justify-center\"><Icon type=\"calendar\" className={(\" f4 black-60 mr2\")} /> Reserve</span></button>\n                  </div>\n                  <div className=\"flex flex-column w-100  bl b--black-05\">\n                    <button className={ + (\"- bg-white -bs-a -c_1_bg ph3 pv2 pointer bn\")} onClick={this.goToTab2}><span className=\"exo c_5- f6 fw5 white- black-30 pv3 flex items-center justify-center\"><Icon type=\"message\" className={ (\" f4 black-60 mr2\")} /> Message</span></button>                  </div>\n                </div>\n\n              </section>\n              <div className=\"pa4 bg-white-60 exo \">\n                <div className=\"flex flex-column mb2 \">\n                  <div className=\"flex flex-row justify-between\">\n                    <section id=\"Reputation\" className=\"flex flex-column pa4\">\n                      <div className=\"ProjectScenesHeading pt0\">\n                        <h3 className=\"f6 fw3 black-30 mb2\">Hourly Rate</h3>\n                      </div>\n                      <div className=\"flex flex-auto flex-column\">\n\n                        {/* <p className={this.props.theme.colorScheme.color + (\" f3 fw6 black-60-\")}>\n                          {this.props.activeCurrency.symbol}\n                          {Math.round(this.props.project.extended.rate * this.props.exchangeRate)}.00\n</p>\n                        <p className=\"f7 fw4 black-20 mb0\">\n                          {this.props.activeCurrency.name}\n                        </p> */}\n\n                      </div>\n\n                    </section>\n                    <section id=\"Rate\" className=\"flex flex-column pa4\">\n                      <div className=\"ProjectScenesHeading pt0\">\n                        <h3 className=\"f6 fw3 black-30 mb3\">Reputation</h3>\n                      </div>\n                      <div className=\"flex flex-auto flex-column\">\n                        <Rate\n                          disabled\n                          allowHalf\n                          className={\"\"}\n                          defaultValue={this.props.project.reputation && this.props.project.reputation || 3} />\n\n                      </div>\n                    </section>\n                  </div>\n                </div>\n                <div className=\"flex flex-column mb2 pa4 br4 bg-white\">\n                  <div className=\"flex flex-column\">\n                    <div className=\"ProjectScenesHeading pt0\">\n                      <h3 className=\"f6 fw3 black-30 mb2\">Bio</h3>\n                    </div>\n\n                    <div className=\"flex flex-auto flex-column pb0\">\n                      <p className=\"f4 fw4 black-60 mb0\">{this.props.project.description}</p>\n                    </div>\n                  </div>\n                  <div className=\"flex flex-column pt4\">\n                    <div className=\"ProjectScenesHeading pt0\">\n                      <h3 className=\"f6 fw3 black-30 mb3\">Ideal role</h3>\n                    </div>\n\n                    <div className=\"flex flex-auto flex-column pb0\">\n                      <p className=\"flex flex-row flex-wrap f4 fw4 black-60 mb0\">{roles.map((item, index) => (\n                      <span className={ (item.active &&  \" bg-blue white \") + (\" flex f7 fw6 black-60 ph2 pv1 br1 bs-d mr2 mb2\" ) }>{ item.active && <Icon type=\"check\" />} {item.name}</span>\n                      ))}</p>\n                    </div>\n                  </div>\n                </div>\n\n\n\n                <div className=\"flex flex-column mb2 pa4  \">\n                  <div className=\"ProjectScenesHeading pt0\">\n                    <h3 className=\"f6 fw3 black-30 mb3\">Specialties</h3>\n\n                  </div>\n\n                  <div className=\"flex flex-auto flex-column pb0\">\n                    <div className=\"specialties-list flex flex-row flex-wrap justify-start f4 fw4 black-60 mb0\">\n                      {\n                        specialties.map((item, index) => (\n                          <div onClick={() => this.toggleItemDetailDrawer({ item })} className=\"specialties-list-item flex flex-column \">\n                            <div\n                              style={{ backgroundImage: 'url(' + item.image + ')' }}\n                              className=\"avatar-m cover bg-center br3 bs-c\"></div>\n\n                          </div>\n                        ))\n                      }\n                      {\n                        specialties.length === 0 &&\n                        <h3 className=\"f5 fw1 black-30 pb3\">No Specialties Added Yet</h3>\n                      }\n                    </div>\n                    <span\n                      onClick={this.toggleSpecialtiesDrawer}\n                      className={Fn.get('theme').config.theme.colorScheme.color + (\" white- c_9 ph1 pv0 br1 f7 fw6 mt3\")}>\n                      see more\n                      </span>\n                  </div>\n                </div>\n                <div className=\"flex flex-column mb2 pa4  \">\n                  <div className=\"ProjectScenesHeading pt0\">\n                    <h3 className=\"f6 fw3 black-30 mb3\">Cuisines</h3>\n                  </div>\n\n                  <div className=\"flex flex-auto flex-column pb0\">\n                    <div className=\"cuisines-list flex flex-row flex-wrap justify-start f4 fw4 black-60 mb0\">\n                      {\n                        cuisines.map((item, index) => (\n                          <div onClick={() => this.toggleItemDetailDrawer({ item })} className=\"cuisines-list-item flex flex-column \">\n                            <div\n                              style={{ backgroundImage: 'url(' + item.image + ')' }}\n                              className=\"avatar-m cover bg-center br3 bs-c\"></div>\n\n                          </div>\n                        ))\n                      }\n                      {\n                        cuisines.length === 0 &&\n                        <h3 className=\"f5 fw1 black-30 pb3\">No Cuisines Added Yet</h3>\n                      }\n                    </div>\n                    <span\n                      onClick={this.toggleSpecialtiesDrawer}\n                      className={Fn.get('theme').config.theme.colorScheme.color + (\" white- c_9 ph1 pv0 br1 f7 fw6 mt3\")}>\n                      see more\n                      </span>\n                  </div>\n                </div>\n\n\n\n              </div>\n            </TabPane>\n            <TabPane tab={<span className=\"f7 fw5 white- black-30 pv2 flex items-center justify-center\"><Icon type=\"message\" className={(Fn.get('theme').config.theme.colorScheme.color) + (\" f4 black-60 mr2\")} /> Message</span>} key=\"2\">\n              <div className=\"flex flex-auto flex-column relative\">\n                {\n                  this.props.conversationReady\n                    ? <MessageBox1\n                      type={\"info\"}\n                      project={this.props.project}\n                      postCollection={this.postCollection}\n                      updateDoc={this.updateDoc}\n                      theme={Fn.get('theme').config.theme}\n                      conversationReady={this.props.conversationReady}\n                    />\n                    : null\n                }\n              </div>\n            </TabPane>\n\n          </Tabs>\n        </Drawer>\n      </div>\n    );\n  }\n}\n\nexport default ProjectInfo;\n","import React, { setGlobal } from \"reactn\";\nimport { Icon } from 'antd';\nimport { Progress } from 'antd';\nimport './style.css';\n\n\nclass LocationSearchForm extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            loading: false,\n            searchResults: [],\n            location: this.props.location,\n            percent: this.props.progressBarPercent,\n            progressBarActive: this.props.progressBarActive,\n            searchAttempts: 0\n        }\n\n        this.submit = this.submit.bind(this)\n        this.onChange = this.onChange.bind(this)\n        this.handleSearch = this.handleSearch.abind(this);\n        this.handleChange = this.handleChange.bind(this)\n        this.submitSearch = this.submitSearch.bind(this)\n        // this.findLocation = this.findLocation.bind(this)\n        this.increase = this.increase.bind(this)\n\n        this.location = React.createRef();\n\n\n        console.log('LocationSearchForm', props)\n    }\n    increase = () => {\n        let percent = this.state.percent + 10;\n        if (percent > 100) {\n            percent = 100;\n        }\n        this.setState({ percent });\n    };\n    // async onChange1(e) {\n    //     let address = e.target.value;\n    //     const proxyurl = \"https://cors-anywhere.herokuapp.com/\";\n    //     let url = \"http://gd.geobytes.com/AutoCompleteCity?callback=?&q=\" + address\n    //     const config = {\n    //         origin: 'locahost',\n    //         mode: 'cors',\n    //         headers: {\n    //             'Accept': 'application/json',\n    //         }\n    //     }\n    //     await fetch(proxyurl + url, config, (e, r) => {\n    //         return r\n    //     }).then(res => {\n    //         return res.text()\n    //     }).then(response => {\n    //         return response\n    //     })\n    //         .then(res => {\n    //             let a = res.replace(\"?(\", \"\")\n    //             let b = a.replace(\");\", \"\");\n    //             this.setState({\n    //                 searchResults: JSON.parse(b)\n    //             })\n    //         })\n\n    // }\n    async onChange(e) {\n        this.setState({ progressBarActive: false })\n        let address = e.target.value;\n        // const proxyurl = \"https://cors-anywhere.herokuapp.com/\";\n        let url = \"https://autocomplete.geocoder.api.here.com/6.2/suggest.json?app_id=ZZN2MPuexLyuz3VR0KDD&app_code=TnEsVJR8k3zxGMiAkbP_EQ&query=\" + address;\n        const config = {\n            origin: 'locahost',\n            mode: 'cors',\n            headers: {\n                'Accept': 'application/json',\n            }\n        }\n        await fetch(url, config, (err, res) => {\n            if (!res.ok) { console.error(err) }\n            return res\n        }).then(res => { return res.json() }).then(res => {\n            // return res\n            console.log('Autocomplete res', res)\n            this.setState({\n                searchResults: res.suggestions\n            })\n        })\n\n    }\n\n    // findLocation(searchTerm) {\n    //     let url = \"https://geocoder.api.here.com/6.2/geocode.json?searchtext=\" + searchTerm + \"&app_id=ZZN2MPuexLyuz3VR0KDD&app_code=TnEsVJR8k3zxGMiAkbP_EQ&gen=9\";\n    //     fetch(url, (e, r) => {\n    //         return r\n    //     })\n    //         .then(res => { return res.json() })\n    //         .then(res => {\n    //             console.log('findLocation', res.Response.View[0].Result[0].Location.Address)\n    //             this.setState({\n    //                 location: res.Response.View[0].Result[0].Location.Address,\n    //                 progressBarActive: true,\n    //                 percent: 50\n    //             })\n    //             this.location.current.value = res.Response.View[0].Result[0].Location.Address.County;\n    //             console.log('state', this.state)\n    //             return res.Response.View[0].Result[0].Location.Address;\n    //         })\n    // }\n    \n    async setLocation(item) {\n        // alert(JSON.stringify(item))\n        alert('setLocation')\n        this.setState({\n            location: item,\n            // progressBarActive: true,\n            // percent: 50\n        })\n        this.location.current.value = item.address.county;\n        this.setState({ searchResults: [] })\n        setGlobal({location: item, locationSet: true})\n        localStorage.setItem('location', JSON.stringify(item));\n        localStorage.setItem('locationSet', JSON.stringify(true));\n        return await this.props.fetchChefs(item.address.city)\n        // await this.findLocation(item)\n    }\n    async submitSearch(e) {\n        e.preventDefault()\n        e.stopPropagation()\n        setGlobal({location: this.props.location, locationSet: true})\n        localStorage.setItem('location', JSON.stringify(this.props.location));\n        localStorage.setItem('locationSet', JSON.stringify(true));\n        // alert(JSON.stringify(this.props.location))\n        let city = this.props.location.County;\n        return await this.props.fetchChefs(city)\n    }\n    submit(e) {\n        e.preventDefault();\n        e.stopPropagation();\n\n    }\n    handleSearch = value => {\n        if (value) {\n            fetch(value, data => this.setState({ data }));\n        } else {\n            this.setState({ searchResults: [] });\n        }\n    };\n\n    handleChange = value => {\n        this.setState({ location: value });\n    };\n    componentDidMount() {\n        const location = this.props.location;\n        this.setState({\n            location: location,\n            ready: true\n        })\n    }\n    render() {\n        // const options = this.state.searchResults.map(d => <Option key={d}>{d}</Option>);\n        return (\n            <div className=\"flex flex-column bg-near-white h-100 mw6 center w-100\">\n                <form\n                    onSubmit={this.submitSearch}\n                    className=\"flex flex-column\" id=\"\">\n                    {this.state.ready && <div className=\"flex flex-column relative\">\n\n                        <div className=\"flex flex-column \">\n\n                            <input\n                                id={\"LocationSearch\"}\n                                ref={this.location}\n                                onChange={this.onChange}\n                                className=\"ph3 pv3 br1 bn bs-a f3 fw5 black-80 h-100\"\n                                placeholder={\"Enter an address\"}\n                                type={\"text\"}\n                                defaultValue={this.state && this.state.location && this.state.location.County}\n\n                            ></input>{this.props.progressBarActive && <Icon type=\"loading\" className=\"formLoadingIcon\" />}\n                        </div>\n                        {\n                            this.props.progressBarActive && \n                            <div className=\"LocationProgressBar absolute w-100 left-0 flex flex-column pt2 \">\n                            <Progress\n                                strokeColor={'gainsboro'}\n                                showInfo={false}\n                                percent={this.props.progressBarPercent} />\n                        </div>\n                    }\n\n\n\n\n                        {this.state && this.state.searchResults && this.state.searchResults.length > 0 &&\n                            <div className=\"searchResults flex flex-column bs-a bg-near-white br1 w-100\">\n                                {\n                                    this.state.searchResults.map((item, index) => (\n                                        item.address && item.address.county && <div\n                                            onClick={() => this.setLocation(item)}\n                                            className=\"pointer flex flex-row f6 fw5 black-50 pa2\">\n                                            <span className=\"location-label-primary flex items-center pl2 f5 fw1 black-40\">{item.address.city || \"n/a\"}</span>\n                                            <span className=\"location-label-secondary flex items-center  f7 fw6 black-60 pl3\">{item.address.state}</span>\n                                            <span className=\"location-label-secondary flex items-center f7 fw6 black-60 pl2\">{item.address.country}</span>\n                                        </div>\n                                    ))\n                                }\n                            </div>}\n\n                    </div>}\n                </form>\n            </div>\n        )\n    }\n}\nexport default LocationSearchForm;","import { setGlobal } from 'reactn';\nimport methods from '../../../../utils/methods';\n\nlet _fn = {};\n_fn.sleep = async (fn) => {\n    const sleep = (milliseconds) => {\n        return new Promise(resolve => setTimeout(resolve, milliseconds))\n    }\n}\n_fn.reverseGeocodeCity = async (data) => {\n    console.log('[[ _fn.reverseGeocodeCity ]]');\n    const { self } = data;\n    let url = \"https://reverse.geocoder.api.here.com/6.2/reversegeocode.json?prox=\" + self.state.lat + \",\" + self.state.long + \",250&mode=retrieveAddresses&maxresults=1&gen=9&app_id=ZZN2MPuexLyuz3VR0KDD&app_code=TnEsVJR8k3zxGMiAkbP_EQ\";\n    fetch(url, (e, r) => {\n        return r\n    })\n        .then(res => { return res.json() })\n        .then(res => {\n            // console.log('reverse geocode res', res)\n\n            console.log('[[ _fn.reverseGeocodeCity ]]', JSON.stringify(res.Response.View[0].Result[0].Location.Address));\n\n            let data = res.Response.View[0].Result[0].Location.Address.AdditionalData;\n            let location = res.Response.View[0].Result[0].Location.Address;\n            for (let item of data) {\n                if (item.key === \"CountryName\") {\n                    let country = item.value;\n                    console.log('country', country);\n                    self.setState({ country: country, countrySet: true })\n                }\n            }\n            self.setState({\n                city: res.Response.View[0].Result[0].Location.Address.County,\n                suburb: res.Response.View[0].Result[0].Location.Address.District,\n                province: res.Response.View[0].Result[0].Location.Address.State,\n                searchFormReady: true,\n                location: res.Response.View[0].Result[0].Location.Address,\n                ready: true\n            })\n            _fn.findCurrency({ self })\n            console.log('[[ store : location ]]',location)\n            methods.store({ type: 'location', data: location })\n            methods.store({ type: 'locationIsSet', data: true })\n        })\n}\n_fn.findCurrency = async (data) => {\n    const { self } = data;\n    if (self.state.countrySet) {\n        const country = self.state.country;\n        let url = \"https://restcountries.eu/rest/v2/name/\" + country;\n        await fetch(url, (err, res) => {\n            return res\n        }).then(res => {\n            return res.json()\n            // console.log('Country data',res)\n        }).then(res => {\n            // return res.json()\n            console.log('Country data', res[0].currencies[0]);\n            setGlobal({ activeCurrencyIsSet: true, activeCurrency: res[0].currencies[0], baseCurrency: res[0].currencies[0] })\n            localStorage.setItem('activeCurrency', JSON.stringify(res[0].currencies[0]))\n            localStorage.setItem('baseCurrency', JSON.stringify(res[0].currencies[0]))\n            localStorage.setItem('activeCurrencyIsSet', JSON.stringify(true))\n        })\n    }\n}\n_fn.getGeoLocation = async (data) => {\n    const { self } = data;\n\n    const setPosition = (data_) => {\n        console.log('[[ getGeoLocation ]]', data_)\n        // console.log('getGeolocation', data_)\n        self.setState({\n            lat: data_.coords.latitude,\n            long: data_.coords.longitude\n        })\n        _fn.reverseGeocodeCity({ self })\n    }\n    window.navigator.geolocation.getCurrentPosition(setPosition)\n}\n_fn.findLocation = (data) => {\n    const { searchTerm, self } = data;\n\n    let url = \"https://geocoder.api.here.com/6.2/geocode.json?searchtext=\" + searchTerm + \"&app_id=ZZN2MPuexLyuz3VR0KDD&app_code=TnEsVJR8k3zxGMiAkbP_EQ&gen=9\";\n    fetch(url, (e, r) => {\n        return r\n    })\n        .then(res => { return res.json() })\n        .then(res => {\n            console.log('findLocation', res.Response.View[0].Result[0].Location.Address)\n            self.setState({\n                city: res.Response.View[0].Result[0].Location.Address.County,\n                suburb: res.Response.View[0].Result[0].Location.Address.District,\n                province: res.Response.View[0].Result[0].Location.Address.State,\n                searchFormReady: true,\n                location: res.Response.View[0].Result[0].Location.Address\n            })\n            return _fn.findCurrency({ self })\n            // return res.Response.View[0].Result[0].Location.Address\n            // console\n        })\n\n}\nexport default _fn","import React, { getGlobal } from \"reactn\";\nimport { Icon } from 'antd';\nimport './style.css';\n// import mobiscroll from '@mobiscroll/react';\n// import '@mobiscroll/react/dist/css/mobiscroll.min.css';\n// mobiscroll.settings = {\n//     theme: 'ios'\n// };\nimport { DatePicker, TimePicker } from \"@blueprintjs/datetime\";\n// import DatePicker_ from './DatePicker';\nimport moment from 'moment';\nimport \"@blueprintjs/core/lib/css/blueprint.css\";\nimport \"@blueprintjs/datetime/lib/css/blueprint-datetime.css\";\n\nclass OnboardingAccountType extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n        \n        }\n\n    }\n\n\n    componentDidMount() {\n\n    }\n    render() {\n        return (\n            <div className=\"flex flex-column bg-near-white h-100 raleway fw5\">\n                <div                    \n                    className=\"flex flex-column ma0\" id=\"\">\n                    \n                    <div className=\"Buttons flex flex-row justify-between round\">\n\n                        <div className=\"flex flex-column w-100 mr1\">\n                            <button\n                                onClick={() => this.props.setAccountType({type: 'crew'})}\n                                className={(\" button-account bg-white -bs-a -c_1_bg ph3 pv2 pointer bn    \")} >\n                                <span className=\"f5 fw6 white- black-70 pv3 flex items-center justify-center\">\n                                  Crew\n                                </span>\n                            </button>\n                        </div>\n\n                        <div className=\"flex flex-column w-100\">\n                            <button\n                                onClick={() => this.props.setAccountType({type: 'producer'})}\n                                className={(\" button-account bg-white -bs-a -c_1_bg ph3 pv2 pointer bn    \")} >\n                                <span className=\"f5 fw6 white- black-70 pv3 flex items-center justify-center\">\n                                  Producer\n                                </span>\n                            </button>\n                        </div> \n\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\nexport default OnboardingAccountType;\n\n","import React, { setGlobal } from \"reactn\";\n// import { Statistic, Icon, Rate, notification, Checkbox, Tabs } from 'antd';\n// import ReservationConfirmationScreen from '../data/ReservationConfirmation';\n// import mail from '../../../../utils/methods/mail';\nimport LocationSearchForm from './LocationSearchForm';\nimport './style.css';\nimport _fn from './_fn';\n\nclass LocationSearchFormWrapper extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            lat: \"\",\n            long: \"\",\n            city: \"\",\n            location: {},\n            country: \"\",\n            countrySet: false,\n            searchFormReady: false,            \n            \n        }\n\n        // this.addFormData = this.addFormData.bind(this)\n\n        // this.reservationDate = React.createRef();\n        // this.reservationTime = React.createRef();\n        // this.reservationHours = React.createRef();\n        // this.daysCount = React.createRef();\n        this.getGeolocation = this.getGeolocation.bind(this);\n        this.findCity = this.findCity.bind(this);\n        this.findLocation = this.findLocation.bind(this);\n        this.findCurrency = this.findCurrency.bind(this);\n\n        console.log('Location Search Form Wrapper', props)\n    }\n    async getGeolocation() {\n        return await _fn.getGeoLocation({ self: this })\n    }\n    async findLocation(searchTerm) {\n        return await _fn.findLocation({ searchTerm, self: this })\n    }\n    async findCity() {\n\n        return await _fn.reverseGeocodeCity({ self: this });\n\n        // let url = \"https://reverse.geocoder.api.here.com/6.2/reversegeocode.json?prox=\" + this.state.lat + \",\" + this.state.long + \",250&mode=retrieveAddresses&maxresults=1&gen=9&app_id=ZZN2MPuexLyuz3VR0KDD&app_code=TnEsVJR8k3zxGMiAkbP_EQ\";\n        // fetch(url, (e, r) => {\n        //     return r\n        // })\n        //     .then(res => { return res.json() })\n        //     .then(res => {\n        //         console.log('reverse geocode res', res)\n        //         let data = res.Response.View[0].Result[0].Location.Address.AdditionalData;\n        //         for (let item of data) {\n        //             if (item.key === \"CountryName\") {\n        //                 let country = item.value;\n        //                 console.log('country', country);\n        //                 this.setState({ country: country, countrySet: true })\n        //             }\n        //         }\n        //         this.setState({\n        //             city: res.Response.View[0].Result[0].Location.Address.County,\n        //             suburb: res.Response.View[0].Result[0].Location.Address.District,\n        //             province: res.Response.View[0].Result[0].Location.Address.State,\n        //             searchFormReady: true,\n        //             location: res.Response.View[0].Result[0].Location.Address\n        //         })\n        //         this.findCurrency()\n        //     })\n\n    }\n    async findCurrency() {\n        console.log('findCurrency location', this.state.location.AdditionalData);\n        // let data = this.state.location.AdditionalData;\n        // for(let item of data) {\n        //     if(item.key === \"CountryName\"){\n        //         let country = item.value;\n        //         console.log('country',country);\n        //         this.setState({country: country, countrySet: true})\n        //     }            \n        // }\n        return await _fn.findCurrency()\n    }\n\n    componentDidMount() {\n        // setTimeout(this.toggle, 100);\n        this.getGeolocation()\n    }\n    render() {\n\n        return (\n\n            <div className=\"fixed top-0 left-0 flex flex-column pa4 bg-near-white vh-100 w-100\">\n                <div className=\"flex flex-column items-center justify-center w-100 h-100\">\n\n                    <div\n                        // onSubmit={this.showReservationConfirmationScreen}\n                        className=\"flex flex-column w-100\" id=\"\">\n                        <div className=\"form-row flex flex-column pb3 w-100\">\n                            <div className=\"flex flex-column w-100\">\n\n                            </div>\n                            {\n                                this.state.searchFormReady\n                                    ? <LocationSearchForm\n                                        showReservationConfirmationScreen={this.showReservationConfirmationScreen}\n                                        type={'single'}\n                                        addFormData={this.addFormData}\n                                        location={this.state.location}\n                                        findLocation={this.findLocation}\n                                        fetchChefs={this.props.fetchChefs}\n                                        progressBarPercent={this.props.progressBarPercent}\n                                        progressBarActive={this.props.progressBarActive}\n                                    />\n                                    : null\n                            }\n\n\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\nexport default LocationSearchFormWrapper;\n\n","import React, { getGlobal } from \"reactn\";\nimport { Icon } from 'antd';\nimport './style.css';\nimport { Fn } from '../../../../utils/fn/Fn.js';\n// import mobiscroll from '@mobiscroll/react';\n// import '@mobiscroll/react/dist/css/mobiscroll.min.css';\n// mobiscroll.settings = {\n//     theme: 'ios'\n// };\nimport { DatePicker, TimePicker } from \"@blueprintjs/datetime\";\n// import DatePicker_ from './DatePicker';\nimport moment from 'moment';\nimport \"@blueprintjs/core/lib/css/blueprint.css\";\nimport \"@blueprintjs/datetime/lib/css/blueprint-datetime.css\";\n\nclass OnboardingProfileUser extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            loading: false,\n            buttonLoading: false,\n            reservationData: {},\n            formData: {},\n            startTime: '',\n            endTime: '',\n            selectedDate: new Date(),\n            timeRounded: ''\n        }\n\n        this.saveFormData = this.saveFormData.bind(this)\n        this.submit = this.submit.bind(this)\n        this.timeOnChangeEnd = this.timeOnChangeEnd.bind(this)\n        this.timeOnChangeStart = this.timeOnChangeStart.bind(this)\n        this.dateOnChange = this.dateOnChange.bind(this)\n\n        console.log('ReservationForm', props)\n    }\n    saveFormData() {\n        this.setState({ buttonLoading: true })\n    }\n    timeOnChangeStart(value) {\n        console.log(value)\n        this.setState({ startTime: value })\n    }\n    timeOnChangeEnd(value) {\n        console.log(value)\n        this.setState({ endTime: value })\n    }\n    dateOnChange(value) {\n        console.log(value)\n        this.setState({ selectedDate: value })\n    }\n    submit(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        let start = this.state.startTime;\n        let end = this.state.endTime;\n        let start_ = moment(start);\n        let end_ = moment(end);\n        let hours = end_.diff(start_, 'hours', true);\n        const data = {\n            date: this.state.selectedDate,\n            timeStart: this.state.startTime,\n            timeEnd: this.state.endTime,\n            hours: hours\n        }\n        this.props.showReservationConfirmationScreen(data);\n    }\n    componentDidMount() {\n        let date = new Date(2011, 1, 1, 4, 55); // 4:55\n        let timeRounded = roundMinutes(date); // 5:00\n        this.setState({\n            defaultTime: timeRounded\n        })\n        function roundMinutes(date) {\n            date.setHours(date.getHours() + Math.round(date.getMinutes() / 60));\n            date.setMinutes(0);\n            return date;\n        }\n    }\n    render() {\n        return (\n            <div className=\"flex flex-column bg-near-white h-100\">\n                <form\n                    onSubmit={this.props.type === \"single\" ? this.submit : this.saveFormData}\n                    className=\"flex flex-column ma0\" id=\"\">\n                    <div className=\"form-row flex flex-column pb3\">\n                        <>\n                           \n                            <div className=\"flex flex-row justify-between w-100 pa4\">\n                                <div className=\"form-row flex flex-column pb3\">\n                                    <label className=\"f7 fw6 black-90 pb2\">Start Time</label>\n                                    \n                                </div>\n                                \n                            </div>\n                        </>\n                    </div>\n                    <div className=\"Buttons flex flex-row justify-between pa4-\">\n\n                        <div className=\"flex flex-column w-100 mr1\">\n                            <button\n                                className={(\" bg-white -bs-a -c_1_bg ph3 pv2 pointer bn    \")} >\n                                <span className=\"f6 fw5 white- black-30 pv3 flex items-center justify-center\">\n                                    {this.state.buttonLoading ? <Icon type=\"loading\" className={' f4 black-60 mr2'} /> : <Icon type=\"check-circle\" className={ Fn.get('theme').config.theme.colorScheme.color + (' f4 black-60 mr2')} />} Request Reservation</span>\n                            </button>\n                        </div>\n\n                    </div>\n                </form>\n            </div>\n        )\n    }\n}\nexport default OnboardingProfileUser;\n\n","import React from 'react';\nimport OnboardingForm from './OnboardingSteps';\nimport './style.css';\n\nimport { Steps, Icon, Button, message } from 'antd';\nimport { DatePicker, TimePrecision } from \"@blueprintjs/datetime\";\n\nconst { Step } = Steps;\n\nconst steps = [\n  {\n    title: 'First',\n    content: 'First-content',\n  },\n  {\n    title: 'Second',\n    content: 'Second-content',\n  },\n  {\n    title: 'Last',\n    content: 'Last-content',\n  },\n];\nclass OnboardingProfileChef extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      current: 0,\n      dob: ''\n    };\n\n    console.log('OnboardingScreen props', props)\n    this.mobileNumber = React.createRef()\n    this.bio = React.createRef()\n    this.grade = React.createRef()\n    this.firstname = React.createRef()\n    this.lastname = React.createRef()\n    this.gender = React.createRef()\n\n    \n    this.saveStep2 = this.saveStep2.bind(this)\n    this.handleDateChange = this.handleDateChange.bind(this)\n    console.log('OnboardingScreen props', props)\n\n  }\n    handleDateChange(e) {\n    console.log(e)\n    this.setState({dob: e.toString()})\n  }\n  saveStep2() {\n    let accountType = JSON.parse(localStorage.getItem('accountType'));\n\n    let mobileNumber = this.mobileNumber.current.value;\n    let bio = this.bio.current.value;\n    let grade = accountType === \"crew\" && this.grade.current.value || null;\n    let firstname = this.firstname.current.value;\n    let lastname = this.lastname.current.value;\n    let gender = this.gender.current.value;\n    let dob = this.state.dob;\n\n    let data = { mobileNumber, bio, grade, gender, firstname, lastname, dob };\n    this.props.saveStep2(data);\n    this.props.next()\n\n  }\n  componentDidMount() {\n  }\n  render() {\n    // const { current } = this.state;\n    let accountType = JSON.parse(localStorage.getItem('accountType'));\n\n    return (\n      <div id=\"StepsForm\">\n        <div className=\"flex flex-column ma0\" id=\"\">\n          <div className=\"form-row flex flex-column pb3 pt2\">\n          <div className=\"form-row flex flex-column\">\n              <div className=\"form-row flex flex-column pt4\">\n                <label className=\"f7 fw6 black-90 pb2\">First Name</label>\n                <input \n                required={true}\n                ref={this.firstname}\n                type={'text'} className=\"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a\" />\n              </div>\n              <div className=\"form-row flex flex-column pt4\">\n                <label className=\"f7 fw6 black-90 pb2\">Last Name</label>\n                <input mobileNumber\n                required={true}\n                ref={this.lastname}\n                type={'text'} className=\"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a\" />\n              </div>\n\n            </div>\n            \n            <div className=\"form-row flex flex-column\">\n              <div className=\"form-row flex flex-column pt4\">\n                <label className=\"f7 fw6 black-90 pb2\">Mobile Phone</label>\n                <input \n                required={true}\n                ref={this.mobileNumber}\n                type={'number'} className=\"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a\" />\n              </div>\n\n            </div>\n            <div className=\"form-row flex flex-column\">\n              <div className=\"form-row flex flex-column pt4\">\n                <label className=\"f7 fw6 black-90 pb2\">Gender</label>\n                <input \n                required={true}\n                ref={this.gender}\n                type={'text'} className=\"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a\" />\n              </div>\n\n            </div>\n\n            {\n              accountType === \"crew\" && \n              <div className=\"form-row flex flex-column\">\n              <div className=\"form-row flex flex-column pt4\">\n                <label className=\"f7 fw6 black-90 pb2\">Enter your grade</label>\n                <input \n                required={true}\n                ref={this.grade}\n                type={'number'} className=\"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a\" />\n              </div>\n            </div>\n            }\n            \n            <div className=\"form-row flex flex-column\">\n              <div className=\"form-row flex flex-column pt4\">\n                <label className=\"f7 fw6 black-90 pb2\">Bio</label>\n                <textarea\n                required={true}\n                ref={this.bio}\n                rows={4} \n                type={'text'}\n                className=\"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a\" />\n              </div>\n            </div>\n\n            <div className=\" flex flex-column w-100 mb3\">\n\n                <span className=\"flex flex-column f6 fw5 black-60 pb3 pt3\">Your Date of Birth</span>\n\n                <DatePicker\n                  minDate={new Date('01/01/1940')}\n                  maxDate={new Date()}\n                  // defaultValue={typeof this.props.value.dob !== \"undefined\" && this.props.value.dob.length > 0 ? new Date(this.props.value.dob) : null} className={''} \n                  onChange={this.handleDateChange} \n                  />\n\n              </div>\n\n          </div>\n          \n        </div>\n        <div className=\"Buttons flex flex-row justify-between mt4 mw5 center w-100\">\n\n          <div className=\"flex flex-column w-100\">\n            <button\n              onClick={this.saveStep2}\n              className={(\" br1 bs-b bg-black ph3 pv2 pointer bn relative    \")} >\n              <span className=\"f5 fw5 white pv2 flex items-center justify-center\">\n                {this.state.buttonLoading ? <Icon type=\"loading\" className={' absolute right-0 f4 black-60 mr2'} /> : <Icon type=\"swap-right\" className={(' f4 black-60 mr2 absolute right-0')} />} Next</span>\n            </button>\n\n            {\n              this.props.current > 0 && <div className=\"flex flex-column w-100 \">\n                <span onClick={this.props.prev} className=\"pointer f6 fw5 black-30 pv2 flex items-center justify-center\">\n                  go back to previous step\n                          </span>\n\n              </div>\n            }\n          </div>\n\n        </div>\n      </div>\n    )\n  }\n}\nexport default OnboardingProfileChef;","import React from 'react';\nimport { Icon } from 'antd';\nimport { Progress } from 'antd';\nimport './style.css';\n\nclass LocationSearchBar extends React.Component {\n\n    constructor(props) {\n\n        super(props);\n\n        this.state = {\n            loading: false,\n            searchResults: [],\n            location: this.props.location,\n            percent: this.props.progressBarPercent,\n            progressBarActive: this.props.progressBarActive,\n            searchAttempts: 0\n        }\n\n        this.submit = this.submit.bind(this)\n        this.onChange = this.onChange.bind(this)\n        this.handleSearch = this.handleSearch.bind(this);\n        this.handleChange = this.handleChange.bind(this)\n        this.submitSearch = this.submitSearch.bind(this)\n\n        this.increase = this.increase.bind(this)\n\n        this.location = React.createRef();\n\n        console.log('LocationSearchForm', props)\n    }\n    increase = () => {\n        let percent = this.state.percent + 10;\n        if (percent > 100) {\n            percent = 100;\n        }\n        this.setState({ percent });\n    };\n\n    async onChange(e) {\n\n        this.setState({ progressBarActive: false })\n\n        let address = e.target.value;\n\n        // const proxyurl = \"https://cors-anywhere.herokuapp.com/\";\n\n        let url = \"https://autocomplete.geocoder.api.here.com/6.2/suggest.json?app_id=ZZN2MPuexLyuz3VR0KDD&app_code=TnEsVJR8k3zxGMiAkbP_EQ&query=\" + address;\n\n        const config = {\n            origin: 'locahost',\n            mode: 'cors',\n            headers: {\n                'Accept': 'application/json',\n            }\n        }\n\n        await fetch(url, config, (err, res) => {\n            if (!res.ok) { console.error(err) }\n            return res\n        }).then(res => { return res.json() }).then(res => {\n            // return res\n            console.log('Autocomplete res', res)\n            this.setState({\n                searchResults: res.suggestions\n            })\n        })\n\n    }\n\n    async setLocation(item) {\n        // alert(JSON.stringify(item))\n        // alert('setLocation')\n        this.setState({\n            location: item,\n            // progressBarActive: true,\n            // percent: 50\n        })\n        this.location.current.value = item.address.county;\n        this.setState({ searchResults: [] })\n        if (typeof this.props.updateProjectLocation !== \"undefined\") {\n            localStorage.setItem('updateProjectLocation', JSON.stringify(item));\n            this.props.updateProjectLocation(item)\n        }\n        else {\n            // setGlobal({ location: item, locationSet: true })\n            localStorage.setItem('location', JSON.stringify(item));\n            localStorage.setItem('locationSet', JSON.stringify(true));\n        }\n\n        if (typeof this.props.type !== \"undefined\" && this.props.type === \"event\") {\n            this.props.setLocation(item)\n        }\n        if (this.props.type === \"profile\") {\n            this.props.setLocation(item)\n        }\n\n        // return await this.props.fetchChefs(item.address.city)\n        // await this.findLocation(item)\n    }\n    async submitSearch(e) {\n        e.preventDefault()\n        e.stopPropagation()\n        // setGlobal({ location: this.props.location, locationSet: true })\n        localStorage.setItem('location', JSON.stringify(this.props.location));\n        localStorage.setItem('locationSet', JSON.stringify(true));\n        // alert(JSON.stringify(this.props.location))\n        let city = this.props.location.County;\n        return await this.props.fetchChefs(city)\n    }\n    submit(e) {\n        e.preventDefault();\n        e.stopPropagation();\n\n    }\n    handleSearch = value => {\n        if (value) {\n            fetch(value, data => this.setState({ data }));\n        } else {\n            this.setState({ searchResults: [] });\n        }\n    };\n\n    handleChange = value => {\n        this.setState({ location: value });\n    };\n    componentDidMount() {\n        const location = this.props.location;\n        this.setState({\n            location: location,\n            ready: true\n        })\n    }\n    render() {\n        // const options = this.state.searchResults.map(d => <Option key={d}>{d}</Option>);\n        return (\n            <div id=\"LocationSearchBar\" className=\"flex flex-column h-100 w-100 \">\n                <form\n                    onSubmit={this.submitSearch}\n                    className=\"flex flex-column items-end justify-center ma0 pa0 w-100\" id=\"\">\n                    {this.state.ready && <div className=\"flex flex-column relative w-100 items-end\">\n\n                        <div className=\"flex flex-column items-end mt3- w-100 mw-5 right \">\n                            <input\n                                id={\"toolbarLocationSearch\"}\n                                ref={this.location}\n                                onChange={this.onChange}\n                                className=\"flex flex-column ph4 pv3 bn br2 -round bg-black-05- white- black-50 f4 fw5 bs-a- w-100\"\n                                placeholder={\"Enter an address\"}\n                                type={\"text\"}\n                                defaultValue={this.props.defaultValue}\n\n                            ></input>{this.props.progressBarActive && <Icon type=\"loading\" className=\"formLoadingIcon\" />}\n                        </div>\n                        {\n                            this.props.progressBarActive &&\n                            <div className=\"LocationProgressBar absolute w-100 left-0 flex flex-column pt2 \">\n                                <Progress\n                                    strokeColor={'gainsboro'}\n                                    showInfo={false}\n                                    percent={this.props.progressBarPercent} />\n                            </div>\n                        }\n\n                        {this.state && this.state.searchResults && this.state.searchResults.length > 0 &&\n                            <div className=\"searchResults flex flex-column bs-a bg-near-white br1 w-100\">\n                                {\n                                    this.state.searchResults.map((item, index) => (\n                                        item.address && item.address.county && item.address.city && <div\n                                            onClick={() => this.setLocation(item)}\n                                            className=\"pointer flex flex-row f6 fw5 black-50 pa2\">\n                                            <span className=\"location-label-primary flex flex-auto items-center pl2 f5 fw4 black-40\">{item.address.city || \"n/a\"}</span>\n                                            <div className=\"flex flex-row items-center justify-end flex-auto \">\n                                                <span className=\"location-label-secondary flex items-center  f7 fw6 black-60 pl3\">{item.address.state}</span>\n                                                <span className=\"location-label-secondary flex items-center f7 fw6 black-60 pl2\">{item.address.country}</span>\n                                            </div>\n                                        </div>\n                                    ))\n                                }\n                            </div>}\n\n                    </div>}\n                </form>\n            </div>\n        )\n    }\n}\nexport default LocationSearchBar;","import React from 'react';\nimport OnboardingForm from './OnboardingSteps';\nimport './style.css';\n\n// import Filepond from '../../upload/Filepond.js';\n\nimport { Steps, Icon, Button, message } from 'antd';\nimport { DatePicker, TimePrecision } from \"@blueprintjs/datetime\";\nimport LocationSearchBar from '../forms/LocationSearchBar.js';\nimport { Fn } from '../../../../utils/fn/Fn.js';\nconst { Step } = Steps;\n\nconst steps = [\n  {\n    title: 'First',\n    content: 'First-content',\n  },\n  {\n    title: 'Second',\n    content: 'Second-content',\n  },\n  {\n    title: 'Last',\n    content: 'Last-content',\n  },\n];\nclass OnboardingProfileChef_Rate extends React.Component {\n  constructor(props) {\n    \n    super(props)\n\n    this.state = {\n      current: 0,\n      dob: ''\n    }\n\n    this.rate = React.createRef();\n    this.saveStep1 = this.saveStep1.bind(this)\n    // this.handleDateChange = this.handleDateChange.bind(this)\n    console.log('OnboardingScreen props', props)\n\n    // this.firstname = React.createContext()\n    // this.lastname = React.createContext()\n    // this.role = React.createContext()\n    // this.dob = React.createContext()\n    // this.gender = React.createContext()\n    // this.location = React.createContext()\n\n  }\n  // handleDateChange(e) {\n  //   console.log(e)\n  //   this.setState({dob: e.toString()})\n  // }\n  saveStep1() {\n    let location = Fn.get('location');\n    // let currency = getGlobal().baseCurrency;\n    // let rate = parseInt(this.rate.current.value);\n    let data = { location };\n    this.props.saveStep1(data);\n    this.props.next()\n  }\n  componentDidMount() {\n  }\n  render() {\n    let location = Fn.get('location');\n    let city;\n    if(typeof location.County !== \"undefined\") {\n      city = location.County\n    }\n    else if(typeof location.address.County !== \"undefined\") {\n      city = location.address.County\n    }\n    else {\n      city = ''\n    }\n\n    // const { current } = this.state;\n    return (\n      <div id=\"StepsForm\">\n\n        \n        <div className=\"flex flex-column ma0 h5\" id=\"\">\n          <div className=\"form-row flex flex-column pb3 pt2\">\n            <div className=\"form-row flex flex-column\">       \n\n\n              <div className=\"form-row flex flex-column pt4\">\n                <label className=\"f7 fw6 black-90 pb2\">Your Home City</label>\n                <LocationSearchBar \n                location={city}\n                />\n                {/* <input\n                  required={true}\n                  defaultValue={getGlobal().location.County}\n                  type={'text'} className=\"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a\" /> */}\n              </div>\n\n\n            </div>\n            \n          </div>\n\n        </div>\n        <div className=\"Buttons flex flex-row justify-between mt4 mw5 center w-100\">\n\n          <div className=\"flex flex-column w-100\">\n            <button\n              onClick={this.saveStep1}\n              className={(\" br1 bs-b bg-black ph3 pv2 pointer bn relative    \")} >\n              <span className=\"f5 fw5 white pv2 flex items-center justify-center\">\n                {this.state.buttonLoading ? <Icon type=\"loading\" className={' absolute right-0 f4 black-60 mr2'} /> : <Icon type=\"swap-right\" className={(' f4 black-60 mr2 absolute right-0')} />} Next</span>\n            </button>\n\n            {\n              this.props.current > 0 && <div className=\"flex flex-column w-100 \">\n                <span onClick={this.props.prev} className=\"pointer f6 fw5 black-30 pv2 flex items-center justify-center\">\n                  go back to previous step\n                          </span>\n\n              </div>\n            }\n          </div>\n\n        </div>\n      </div>\n    )\n  }\n}\nexport default OnboardingProfileChef_Rate;","import React from 'react';\nimport OnboardingForm from './OnboardingSteps';\nimport './style.css';\n\nimport { Steps, Icon, Button, message } from 'antd';\nimport { Checkbox } from 'antd';\nconst { Step } = Steps;\n\nconst steps = [\n  {\n    title: 'First',\n    content: 'First-content',\n  },\n  {\n    title: 'Second',\n    content: 'Second-content',\n  },\n  {\n    title: 'Last',\n    content: 'Last-content',\n  },\n];\nconst plainOptions = ['Mexican', 'American', 'Italian', 'South African', 'Greek', 'Portuguese', 'Chinese', 'Turkish', 'Thai'];\nclass OnboardingProfileChef_Extended extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      current: 0,\n      cuisines: [],\n      cuisines_: [{}],\n      role: \"\",\n      skills: [],\n      skills_: [{}],\n      value: ''\n    };\n\n    console.log('OnboardingScreen props', props)\n    \n    this.insertSkill = this.insertSkill.bind(this)\n    this.addSkillInput = this.addSkillInput.bind(this)\n    this.saveStep3 = this.saveStep3.bind(this)\n    this.specOnChange = this.specOnChange.bind(this)\n\n    this.role = React.createRef()\n\n  }\n  saveStep3() {\n    \n    let role = this.role.current.value;\n    let skills = this.state.skills;\n    let data = { role, skills };\n    console.log('saveStep3 data ',data)\n    this.props.saveStep3(data);\n    this.props.next()\n  }\n  \n  insertSkill(item) {\n    let skills = this.state.skills;\n    skills.push(item)\n    this.setState({ skills: skills })\n  }\n  addSkillInput() {\n    let skills_ = this.state.skills_;\n    skills_.push({});\n    this.setState({ skills_: skills_ })\n  }\n  specOnChange(data) {\n    const {e, index} = data;\n    let skills = this.state.skills;\n    skills[index] = e.target.value;\n    this.setState({\n      skills\n    })\n    console.log(this.state);\n    \n  }\n  \n  componentDidMount() {\n  }\n  render() {\n    \n    return (\n      <div id=\"StepsForm\">\n        <div className=\"flex flex-column ma0\" id=\"\">\n          <div className=\"form-row flex flex-column pb3 pt2\">\n            <div className=\"form-row flex flex-column\">\n              <div className=\"form-row flex flex-column pt4\">\n                <label className=\"f7 fw6 black-90 pb2\">Your Preferred Role</label>\n                <input \n                required={true}\n                ref={this.role}\n                type={'text'} className=\"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a\" />\n                {/* <Checkbox.Group required={true} options={plainOptions} onChange={this.onChange} /> */}\n              </div>\n\n            </div>\n            <div className=\"form-row flex flex-column\">\n              <div className=\"form-row flex flex-column pt4\">\n                <label className=\"f7 fw6 black-90 pb2\">Skills</label>\n                <div className=\"flex flex-column flex-wrap\">\n                {\n                  this.state.skills_.map((item, index) => (\n                    <div className=\"flex pb2 w-100\">\n                      <input\n                      required={true}\n                        onChange={(e) => this.specOnChange({ e, index})}\n                        defaultValue={this.state.skills[index]}\n                        type={'text'} className=\"w-100 flex flex-row ph3 pv2 bn br1 bg-white black-50 f4 fw5 bs-a\" />\n                    </div>\n                  ))\n                }\n                </div>\n              </div>\n              <div className=\"form-row flex flex-row pt2\">\n                <button onClick={this.addSkillInput} \n                className=\"bn br1 bg-black-30 f7 fw5 white pv1 ph2\">Add +</button>\n              </div>\n            </div>\n\n          </div>\n\n        </div>\n\n        <div className=\"Buttons flex flex-row justify-between mt4 mw5 center w-100\">\n\n<div className=\"flex flex-column w-100\">\n  <button\n    onClick={this.saveStep3}\n    className={(\" br1 bs-b bg-black ph3 pv2 pointer bn relative    \")} >\n    <span className=\"f5 fw5 white pv2 flex items-center justify-center\">\n      {this.state.buttonLoading ? <Icon type=\"loading\" className={' absolute right-0 f4 black-60 mr2'} /> : <Icon type=\"swap-right\" className={(' f4 black-60 mr2 absolute right-0')} />} Next</span>\n  </button>\n\n  {\n    this.props.current > 0 && <div className=\"flex flex-column w-100 \">\n      <span onClick={this.props.prev} className=\"pointer f6 fw5 black-30 pv2 flex items-center justify-center\">\n        go back to previous step\n                </span>\n\n    </div>\n  }\n</div>\n\n</div>\n      </div>\n    )\n  }\n}\nexport default OnboardingProfileChef_Extended;","import React from 'react';\nimport OnboardingForm from './OnboardingSteps';\nimport './style.css';\n\nimport OnboardingAccountType from './__AccountType';\nimport OnboardingProfileUser from './__ProfileUser';\nimport Two from './Two';\nimport One from './One';\nimport Three from './Three';\nimport { Steps, Button, message } from 'antd';\n// import { useReducer } from \"react\";\n\nimport { Fn } from '../../../../utils/fn/Fn.js';\nconst { Step } = Steps;\n\n\n\nclass OnboardingSteps extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      current: 0,\n      location: Fn.get('location'),\n      currency: Fn.get('baseCurrency'),\n      grade: 0,\n      mobileNumber: '',\n      bio: '',\n      specialties: [],\n      cuisines: [],\n      firstname: '',\n      lastname: ''\n    }\n\n    console.log('OnboardingScreen props', props)\n\n    this.prev = this.prev.bind(this)\n    this.next = this.next.bind(this)\n    this.saveStep1 = this.saveStep1.bind(this)\n    this.saveStep2 = this.saveStep2.bind(this)\n    this.saveStep3 = this.saveStep3.bind(this)\n\n  }\n  saveStep1(data) {\n    const { location } = data;\n    this.setState({ location })  \n  }\n  saveStep2(data) {\n    const { mobileNumber, bio, grade, firstname, lastname, dob, gender } = data;\n    this.setState({ mobileNumber, bio, grade, firstname, lastname, gender, dob })  \n  }\n  saveStep3(data) {\n    const { role, skills } = data;\n    // console.log(data)\n    // this.setState({ role, skills })\n    return this.props.saveOnboardingData({\n      location: this.state.location,      \n      mobileNumber: this.state.mobileNumber,\n      bio: this.state.bio,\n      skills: skills,\n      role: role,\n      grade: this.state.grade,\n      firstname: this.state.firstname,\n      lastname: this.state.lastname,\n      gender: this.state.gender,\n      dob: this.state.dob\n    })  \n  }\n  next() {\n    const current = this.state.current + 1;\n    this.setState({ current });\n  }\n\n  prev() {\n    const current = this.state.current - 1;\n    this.setState({ current });\n  }\n  componentDidMount() {\n    console.log('steps', this.props)\n  }\n  render() {\n    let steps;\n\n    const accountTypeIsSet = JSON.parse(localStorage.getItem('accountTypeIsSet'));\n    const accountType = JSON.parse(localStorage.getItem('accountType'));\n\n    if (accountType === \"crew\") {\n      steps = [\n        {\n          title: 'Location',\n          content: 'First-content',\n        },\n        {\n          title: 'Personal',\n          content: 'Second-content',\n        },\n        {\n          title: 'Skills',\n          content: 'Last-content',\n        },\n      ];\n    }\n    if (accountType === \"production\") {\n      steps = [\n        {\n          title: 'Location',\n          content: 'First-content',\n        },\n        {\n          title: 'Personal',\n          content: 'Second-content',\n        },\n        {\n          title: 'Skills',\n          content: 'Last-content',\n        },\n      ];\n    }\n\n    const { current } = this.state;\n\n    \n\n    return (\n      <div className=\"flex flex-column w-100\">\n        {\n          !accountTypeIsSet && (\n            <><div className=\"flex flex-column raleway fw5\">\n              <h3 className=\"f5 fw3 black-30 tc pv0\">welcome to</h3>\n              <div className=\"flex flex-row flex-auto justify-center\">\n              <h3 className=\"tc pv3\">\n                <span className=\"flex ph3 ttu pv2 items-center logotext ttu spaced tracked ba b--black bw1 raleway f3 fw6 black\">Crew20</span>\n                </h3>\n              </div>\n              <h3 className=\"f5 fw3 black-30 tc pv4\">Please choose your account type</h3>\n            </div>\n              <div className=\"flex flex-column br3 overflow-hidden\">\n                <OnboardingAccountType\n                  setAccountType={this.props.setAccountType}\n                />\n              </div>\n\n            </>\n          )\n        }\n        {\n\n          accountTypeIsSet && (\n            <>\n            <div className=\"flex flex-column pb5\">\n            <p className=\"f5 fw5 black-50 tc\">Please tell us a bit about yourself.</p>\n            </div>\n              <Steps current={current}>\n                {steps.map(item => (\n                  <Step key={item.title} title={item.title} />\n                ))}\n              </Steps>\n              <div className=\"steps-content\">\n\n                {\n                  this.state.current === 0 && (\n\n                    <One\n                      prev={this.prev}\n                      next={this.next}\n                      current={this.state.current}\n                      saveStep1={this.saveStep1}\n                    />\n\n                  )\n                }\n\n                {\n                  this.state.current === 1 && (\n\n                    <Two\n                      prev={this.prev}\n                      next={this.next}\n                      current={this.state.current}\n                      saveStep2={this.saveStep2}\n                    />\n\n                  )\n                }\n                {\n                  this.state.current === 2 && (\n\n                    <Three\n                      prev={this.prev}\n                      next={this.next}\n                      current={this.state.current}\n                      saveStep3={this.saveStep3}\n                    />\n\n                  )\n                }\n              </div>\n\n            </>\n          )\n        }\n\n        {/* {\n\n          accountTypeIsSet && this.props.newAccountType === \"producer\" && (\n            <>\n              <Steps current={current}>\n                {steps.map(item => (\n                  <Step key={item.title} title={item.title} />\n                ))}\n              </Steps>\n              <div className=\"steps-content\">{steps[current].content}</div>\n              <div className=\"steps-action\">\n\n                {\n                  current === steps.length - 1 && (\n\n                    <OnboardingProfileChef />\n\n                  )\n                }\n\n\n                {\n                  current > 0 && (\n\n                    <OnboardingProfileChef_Rate />\n\n                  )\n\n                }\n\n              </div>\n\n            </>\n          )\n        } */}\n\n      </div>\n    )\n  }\n}\nexport default OnboardingSteps;","import React from 'react'\n\nconst AccountContext = React.createContext({})\n\nexport const AccountProvider = AccountContext.Provider\nexport const AccountConsumer = AccountContext.Consumer\nexport default AccountContext","import React from 'react';\nimport { Redirect } from 'react-router-dom';\nimport OnboardingSteps from './OnboardingSteps';\nimport './style.css';\nimport { Fn } from '../../../../utils/fn/Fn.js';\nimport methods from '../../../../utils/methods'\n\nimport AccountContext, { AccountProvider } from '../../../../utils/context/AccountContext.js';\n\nclass OnboardingScreen extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ready: false,\n            newAccountType: \"\",\n            accountTypeIsSet: false,\n            lat: \"\",\n            long: \"\",\n            city: \"\",\n            location: {},\n            country: \"\",\n            countrySet: false,\n            redirectProfile: false\n        }\n        this.setAccountType = this.setAccountType.bind(this)\n\n        this.saveOnboardingData = this.saveOnboardingData.bind(this)\n\n        console.log('OnboardingScreen props', props)\n\n    }\n    async saveOnboardingData(data) {\n\n        console.log('saveOnboardingData data', data)\n\n        const { gender, dob, grade, role, bio, mobileNumber, skills, firstname, lastname, location } = data;\n\n        let account = Fn.get('account')\n        let userId = account.user.id;\n\n        let profile = account.user.profile;\n        account.user.position = role;\n        profile.config = {\n            type: this.state.newAccountType,\n            onboardingcomplete: true\n        }\n        profile.contact = {\n            mobile: mobileNumber\n        }\n\n        profile.bio = bio\n        \n        profile.additional = {\n            skills: skills,\n            role: role,\n            grade: grade\n        }\n        profile.name = {\n            first: firstname,\n            last: lastname\n        }\n        profile.location = location;\n        profile.gender = gender;\n        profile.dob = dob;\n     \n        let user = account.user\n\n        console.log('saveOnboardingData profile', user)\n        let apiUrl = 'https://api.crew20.devcolab.site/v1/users/' + userId\n\n        \n\n        console.log('[[ Endpoint ]]', apiUrl)\n        let config = {\n            method: \"PATCH\",\n            headers: {\n                \"origin\": \"localhost:3000\",\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(user)\n        }\n        return fetch(apiUrl, config).then(res => {\n\n            return res.json()\n        }).then(async res => {\n            console.log('insertUser', res)\n            // if (err) { console.error(err) }\n\n            console.log(' ')\n            console.log('[[ User Updated ]]', JSON.stringify(res))\n            console.log(' ')\n            let account = Fn.get('account')\n            account.user = res\n            await methods.store({ type: 'account', data: account })\n\n            console.log(' [[ onboarding context ]]',this.context)\n            this.context.history.push('/profile')\n            this.context.updateAccount()\n\n            // this.setState({ redirectProfile: true })\n\n            // window.location.href = \"/profile\"\n\n        })\n\n    }\n    setAccountType(data) {\n        const { type } = data;\n        console.log('setAccountType', data)\n        this.setState({\n            newAccountType: type,\n            accountTypeIsSet: true\n        })\n\n        Fn.store({ label: 'accountType', value: type })\n        Fn.store({ label: 'accountTypeIsSet', value: true })\n\n    }\n    async componentDidMount() {\n        console.log('[[ OnboardingScreen props ]]', this.props)\n        await Fn.getGeoLocation({ self: this })\n    }\n    render() {\n        // if(this.state.redirectProfile) {\n        //     return <Redirect to={'/profile'} />\n        // }\n        return (\n            <div id=\"OnboardingScreen\" className=\"fixed top-0 left-0 flex flex-column pa4 bg-near-white vh-100 w-100\">\n                <div className=\"flex flex-column items-center justify-center w-100 h-100\">\n                    <div\n                        className=\"flex flex-column w-100 overflow-auto\" id=\"\">\n                        <div className=\"form-row flex flex-column pb3 w-100\">\n\n                            <div className=\"flex flex-column mw6 center w-100\">\n                                <OnboardingSteps\n                                    newAccountType={this.state.newAccountType}\n                                    accountTypeIsSet={this.state.accountTypeIsSet}\n                                    setAccountType={this.setAccountType}\n                                    saveOnboardingData={this.saveOnboardingData}\n                                />\n                            </div>\n\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\nexport default OnboardingScreen;\nOnboardingScreen.contextType = AccountContext;\n","import React from 'react';\n// import OnboardingForm from './OnboardingSteps';\nimport './style.css';\n\n// import Filepond from '../../upload/Filepond.js';\nimport { Fn } from '../../../utils/fn/Fn.js';\nimport { DatePicker, Steps, Select, Button, message } from 'antd';\nimport { Icon } from \"@blueprintjs/core\";\nimport moment from 'moment';\nimport LocationSearchBar from '../../elements/display/forms/LocationSearchBar.js';\nconst { MonthPicker, RangePicker } = DatePicker;\nconst dateFormat = 'YYYY/MM/DD';\n\n\n// import { DatePicker, TimePrecision } from \"@blueprintjs/datetime\";\n// const { Step } = Steps;\n// const { Option } = Select;\n\n// const steps = [\n//   {\n//     title: 'First',\n//     content: 'First-content',\n//   },\n//   {\n//     title: 'Second',\n//     content: 'Second-content',\n//   },\n//   {\n//     title: 'Last',\n//     content: 'Last-content',\n//   },\n// ];\nclass FormProjectSearch extends React.Component {\n  constructor(props) {\n\n    super(props)\n\n    this.state = {\n      projectType: '',\n      startDate: '',\n      endDate: '',\n      buttonLoading: false\n    }\n\n    // this.rate = React.createRef();\n    // this.projectName = React.createRef()\n    this.searchProjects = this.searchProjects.bind(this)\n    this.handleChange = this.handleChange.bind(this)\n    this.handleRangeChange = this.handleRangeChange.bind(this)\n    // this.handleDateChange = this.handleDateChange.bind(this)\n\n    console.log('OnboardingScreen props', props)\n\n  }\n  handleRangeChange(e) {\n    console.log(e)\n    let startDate = e[0].toString()\n    let endDate = e[1].toString()\n    this.setState({\n      startDate, endDate\n    })\n  }\n  handleDateChange(e) {\n\n    console.log(e)\n\n    this.setState({ projectDate: e.toString() })\n\n  }\n\n  handleChange(e) {\n    console.log(e.target.value);\n\n    this.setState({\n      projectType: e.target.value\n    })\n\n  }\n\n  searchProjects() {\n\n    this.setState({\n      buttonLoading: true })\n\n      let location = Fn.get('location');\n      let projectType = this.state.projectType;\n      let startDate = this.state.startDate;\n      let endDate = this.state.endDate;\n  \n      let data = { location, projectType, startDate, endDate };\n  \n      setTimeout(() => {\n        this.props.searchProjects(data);\n\n      },1000)\n\n  }\n\n  componentDidMount() {\n  }\n\n  render() {\n    // const { current } = this.state;\n    return (\n      <div id=\"ProjectSearchForm\">\n        <div className=\"flex flex-column ma0\" id=\"\">\n          <div className=\"form-row flex flex-column\">\n\n            <div className=\"form-row flex flex-column pa4\">\n\n            <div className=\"f4 fw6 black-90 pb3\">Project Search</div>\n\n              <div className=\"form-row flex flex-row items-center\">\n\n                <label className=\"f4 fw4 black-20 pb3- tl mr4 w-30\">Location (City)</label>\n\n                <LocationSearchBar\n                  location={this.state.location}\n                  findLocation={this.findLocation}\n                  fetchProjects={this.fetchProjects2}\n                />\n\n              </div>\n\n              <div className=\"form-row flex flex-row items-center pt4 w-100\">\n                <label className=\"f4 fw4 black-20 pb3- tl mr4 w-30\">Project Type</label>\n\n                <select\n                  className=\"flex flex-column ph4 pv3 bn br2- round bg-black-05- white- black-50 f4 fw5 bs-a- w-100 bg-white\"\n                  // defaultValue=\"commercial\"                \n                  onChange={(e) => this.handleChange(e)}>\n\n                  <option value=\"\">Select</option>\n                  <option value=\"commercial\">Commercial</option>\n                  <option value=\"film\">Film</option>\n                  <option value=\"documentary\">Documentary</option>\n\n                </select>\n\n              </div>\n\n              <div className=\"form-row flex flex-row items-center pt4 w-100\">\n                <label className=\"f4 fw4 black-20 pb3- tl mr4 w-30\">Date Range</label>\n\n          \n\n                <RangePicker\n                  className=\"bs-a f4 fw5\"\n                  onChange={this.handleRangeChange}\n                  // defaultValue={[moment('2015/01/01', dateFormat), moment('2015/01/01', dateFormat)]}\n                  format={dateFormat}\n                  className=\"flex flex-column ph4 pv3- bn br2- round bg-black-05- white- black-50 f4 fw5 bs-a- w-100 bg-white\"\n                />\n              </div>\n\n\n\n\n\n\n\n\n\n            </div>\n\n          </div>\n\n        </div>\n\n        <div className=\"Buttons flex flex-row justify-between center w-100\">\n\n          <div className=\"flex flex-column w-100 pa4 bg-white\">\n\n            <button\n              onClick={this.searchProjects}\n              className={(\"br1- round bs-b bg-black-20 ph3 pv2 pointer bn relative  \")} >\n\n              <span className=\"f4 fw5 white pv2 flex items-center justify-center\">\n\n              {this.state.buttonLoading && (\n                    <div className=\"flex flex-column pv2 mr3 items-center\">\n                      {/* <Spinner size={25} /> */}\n                      <div className=\"sp sp-3balls\"></div>\n                    </div>\n                  )}\n                  {\n                    !this.state.buttonLoading && (\n                      <>\n                    <Icon icon=\"search\" iconSize={15} className={(' f4 white mr3')} /> Search\n                    </>\n                    )\n                  }\n\n                </span>\n            </button>\n\n            {/* {\n              this.props.current > 0 && <div className=\"flex flex-column w-100 \">\n                <span onClick={this.props.prev} className=\"f6 fw5 black-30 pv2 flex items-center justify-center\">\n                  go back to previous step\n                          </span>\n\n              </div>\n            } */}\n          </div>\n\n        </div>\n      </div>\n    )\n  }\n}\nexport default FormProjectSearch;","import React, { getGlobal } from \"reactn\";\n// import { Icon } from 'antd';\nimport { Spinner } from \"@blueprintjs/core\";\n\nimport TransitionLayout from '../Layouts/Transition.js';\n\nconst Loading = () => (\n<TransitionLayout>\n<section \nstyle={{opacity: '0.7'}}\nid=\"Loading\" className={(\" trans-a fixed top-0 w-100 vh-100 bg-near-white z-99\")}>\n    <div className=\"flex flex-column flex-auto vh-100 w-100 items-center justify-start pt6\">\n      <div className=\"flex flex-column pa5- h-100 justify-center\">\n        <Spinner size={80} className=\"red\"/>\n      </div>\n    </div>\n  </section>\n  </TransitionLayout>\n)\n\nexport default Loading\n{/* <Icon type=\"loading\" className=\"f2 black-20\" /> */ }","import React from \"react\";\n// import React, { getGlobal, setGlobal, useGlobal } from \"reactn\";\nimport { Redirect } from \"react-router-dom\";\nimport { Popover, Empty, Skeleton, Rate } from \"antd\";\n\nimport TransitionLayout from \"../../Layouts/Transition\";\nimport ListProjects from \"../../elements/display/projects/list\";\nimport PageTitle from \"../../elements/layout/PageTitle_B\";\nimport ProjectInfo from \"../../elements/display/drawers/ProjectInfo\";\nimport LocationSearchFormWrapper from '../../elements/display/forms/LocationSearchFormWrapper';\nimport OnboardingScreen from '../../elements/display/onboarding/OnboardingScreen';\nimport LocationSearchBar from '../../elements/display/forms/LocationSearchBar';\nimport FormProjectSearch from '../../elements/forms/ProjectSearch.js';\nimport Loading from '../../elements/Loading.js';\n\nimport { Dialog, Icon, Spinner } from '@blueprintjs/core';\nimport moment from 'moment';\nimport methods from '../../../utils/methods';\nimport Fn from '../../../utils/fn/Fn.js';\n\nimport AccountContext, { AccountConsumer } from \"../../../utils/context/AccountContext\";\nimport './style.css';\n// import { dilate } from \"popmotion/lib/calc\";\n// window.getGlobal = getGlobal;\n// window.useGlobal = useGlobal;\n// window.setGlobal = setGlobal;\n\nclass Home extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      projects: [],\n      // projects: [],\n      // activeProject: getGlobal().activeProject,\n      ready: false,\n      insertModalVisible: false,\n      projectInfoVisible: false,\n      loading: false,\n      // theme: Fn.get('theme').config.theme,\n      toMessages: false,\n      conversationReady: false,\n      activeTab: \"1\",\n      drawerReady: false,\n      // locationIsSet: getGlobal().locationIsSet,\n      progressBarPercent: 0,\n      progressBarActive: false,\n      showLocationForm: false,\n      showOnboardingScreen: false,\n      // location: getGlobal().location,\n      // activeCurrency: getGlobal().activeCurrency,\n      account: Fn.get('account'),\n      searchCity: '',\n      isOpen: false\n    }\n\n    this.fetchProjects = this.fetchProjects.bind(this);\n    this.fetchProjects2 = this.fetchProjects2.bind(this);\n    this.showDrawer = this.showDrawer.bind(this);\n    this.hideDrawer = this.hideDrawer.bind(this);\n    this.refresh = this.refresh.bind(this);\n    // this.updateActiveDoc = this.updateActiveDoc.bind(this);\n    this.setLocation = this.setLocation.bind(this)\n    this.start = this.start.bind(this)\n    this.focusLocationSearch = this.focusLocationSearch.bind(this)\n\n    this.reserve = this.reserve.bind(this)\n    this.sendMessage = this.sendMessage.bind(this)\n    this.openSearchDialog = this.openSearchDialog.bind(this)\n    this.closeDialog = this.closeDialog.bind(this)\n    this.searchProjects = this.searchProjects.bind(this)\n\n    // this.submitReservationRequest = this.submitReservationRequest.bind(this)\n    // this.setFilter = this.setFilter.bind(this)\n\n    console.log('[[ Home props ]]', props)\n  }\n  closeDialog() {\n    this.setState({\n      isOpen: false\n    })\n  }\n  searchProjects(data) {\n\n    const { location, projectType, startDate, endDate } = data;\n\n    this.setState({\n      ready: false\n    })\n    // alert()\n\n    console.log('search config ', data)\n\n    console.log(this.state.projects)\n\n    let location_;\n\n    if (typeof data.location.County !== \"undefined\") {\n      location_ = data.location.County.toLowerCase()\n    }\n    else {\n      location_ = data.location.address.county.toLowerCase()\n    }\n\n    // let type = data.projectType;\n    let projects = this.state.projects;\n\n    console.log('location', location_)\n\n    let filterByLocation = projects.filter(p => p.location.toLowerCase() === location_)\n    console.log('Results filtered by Location', filterByLocation)\n    let filterByType = filterByLocation.filter(p => p.type === projectType)\n    console.log('Results filtered by Project Type', filterByType)\n    let filterByDateRange = filterByType.filter(p => moment(p.start_date).isBetween(data.startDate, data.endDate))\n    console.log('Results filtered by Date Range', filterByDateRange)\n\n    // console.log('filtered', filtered)\n    // console.log('filteredDateRange', filteredDateRange)\n\n    this.setState({\n      projects: filterByDateRange,\n      ready: true,\n      isOpen: false\n    })\n\n  }\n  openSearchDialog() {\n    this.setState({ isOpen: true })\n  }\n  focusLocationSearch() {\n\n  }\n  reserve(doc) {\n    console.log(doc)\n    this.setState({ activeDoc: doc })\n    // setGlobal({ \"reserve\": true, recipient: doc })\n  }\n  async sendMessage(doc) {\n    return await Fn.sendMessage({ doc, self: this })\n  }\n  async fetchProjects2(city) {\n    this.setState({ ready: false, searchCity: city })\n    setTimeout(() => {\n      console.log('[[ fetchProjects2 city ]]', city)\n      return Fn.fetchProjects2({ city, self: this })\n    }, 1000)\n\n  }\n  async fetchProjects(city) {\n    this.setState({ ready: false, searchCity: city })\n    return await Fn.fetchProjects({ city, self: this })\n  }\n  async refresh() {\n    return await Fn.refresh({ self: this })\n  }\n  async showDrawer(project) {\n    return await Fn.showDrawer({ project, self: this })\n  }\n  async hideDrawer() {\n    return await Fn.hideDrawer({ self: this })\n  }\n  showModal = () => {\n    this.setState({\n      insertModalVisible: true\n    });\n  }\n  handleOk = e => {\n    console.log(e);\n    this.setState({\n      insertModalVisible: false\n    });\n  }\n  handleCancel = e => {\n    console.log(e);\n    this.setState({\n      insertModalVisible: false\n    });\n  }\n\n  async setLocation() {\n    return await Fn.setLocation({ self: this })\n  }\n  async start() {\n    // find location by browser geolocation, \n    // then query Here maps api for location data using reverse geolocation.\n    // Fn.fetchProjects({ self: this })\n    // return await Fn.setLocation({ self: this })\n  }\n\n  componentWillUnmount() {\n  }\n  componentDidUpdate() {\n    console.log('[[ Home Updated ]]', this.props)\n  }\n  async componentDidMount() {\n\n    const buttons = [\n      { \n        label: \"Find a Project\",\n        action: this.openSearchDialog\n      }\n    ]\n    this.context.setPage({ title: \"Find a Project\", subtitle: \"...\", buttons: buttons })\n\n    Fn.fetchProjects({ self: this })\n\n    document.querySelector(\"body\").scroll({\n      top: 0,\n      left: 0,\n      behavior: \"smooth\"\n    })\n\n    if(localStorage.getItem('crewBuilder') !== null){\n      let crewBuilder = Fn.get('crewBuilder');\n      if(!crewBuilder.hasBeenUploaded) {\n\n        await Fn.createProject({self:this, project: crewBuilder })\n       \n      }\n    }\n\n    // this.start()\n  }\n  render() {\n\n    return (\n\n      <AccountContext.Consumer>\n\n        {props => {\n\n          return (\n\n            <TransitionLayout>\n              {\n                !this.state.ready &&\n                <Loading />\n              }\n\n              {/* {\n                props.account.user.profile.config.onboardingcomplete === false\n                && <OnboardingScreen location={this.state.location} />\n              } */}\n\n              <section id=\"Home\" className=\"w-100 mw9 center pa4 pb6\">\n\n                {/* <div className=\"flex flex-column flex-row-ns justify-between mb4 mt3\"> */}\n\n                  {/* <PageTitle\n                    title={\"Find a Project\"}\n                    ready={this.state.ready}\n                    theme={props.theme}\n                    showInsertForm={this.showModal}\n                    docs={this.state.projects}\n                    activeDoc={this.state.activeProject}\n                    updateActiveDoc={this.updateActiveDoc}\n                    showButton={false}\n                  /> */}\n\n                  <div\n                    id=\"ProjectSearch\"\n                    className=\"w-100 flex flex-row items-end justify-start justify-end-ns mb2\">\n                    <button\n                      onClick={this.openSearchDialog}\n                      className={(Fn.get('isMobile') ? \" w-100 mt3 \" : \"  \") + (\" br1- round bs-b bg-black-20 ph4 pv2 pointer bn relative w-100-    \")} >\n\n                      <span className=\"f5 fw6 white pv1 flex items-center justify-center pr2 raleway\">\n\n                        {this.state.buttonLoading ? <Icon icon=\"loading\" className={' absolute right-0 f4 black-60 mr2'} /> : <Icon icon={\"search\"} iconSize={12} className={(' f4 black-60- white  absolute right-0 mr3')} />} Find a Project</span>\n                    </button>\n                  </div>\n                  {/* {this.state.locationIsSet &&\n                    <LocationSearchBar\n                      location={this.state.location}\n                      findLocation={this.findLocation}\n                      fetchProjects={this.fetchProjects2}\n\n                    />} */}\n\n                {/* </div> */}\n                {/* <div className=\"flex flex-row justify-between pb3\">\n                  <h4 className=\"f7 fw5 black-30\">Showing results for <span onClick={this.focusLocationSearch} className=\"ph2 pv1 br1 fw6 black-40 bg-black-10 white\">{this.state.searchCity}</span></h4>\n                </div> */}\n\n                {this.state.ready ? (\n                  this.state.projects.length > 0 ? (\n                    <ListProjects\n                      projects={this.state.projects}\n                      activeProject={this.state.activeProject}\n                      className=\"trans-a\"\n                      showDrawer={this.showDrawer}\n                      hideDrawer={this.hideDrawer}\n                      theme={props.theme}\n                      activeCurrency={props.activeCurrency}\n                      exchangeRate={props.exchangeRate}\n                      col={3}\n                    />\n                  ) : (\n                      <Empty\n                        className=\"trans-a flex flex-column justify-center items-start\"\n                        image={Empty.PRESENTED_IMAGE_SIMPLE}\n                      />\n                    )\n                ) : (\n                    <div className=\"trans-a\">\n                      <Skeleton active />\n                    </div>\n                  )}\n                {\n                  this.state\n                  && this.state.locationIsSet\n                  && this.state.ready\n                  && this.state.drawerReady\n                  &&\n                  <ProjectInfo\n                    type={\"info\"}\n                    project={this.state.activeProject}\n                    updateDoc={this.updateDoc}\n                    visible={this.state.projectInfoVisible}\n                    hideDrawer={this.hideDrawer}\n                    close={this.props.handleOk}\n                    refresh={this.refresh}\n                    theme={props.theme}\n                    reserve={this.reserve}\n                    sendMessage={this.sendMessage}\n                    conversationReady={this.state.conversationReady}\n                    submitReservationRequest={this.submitReservationRequest}\n                    activeTab={this.state.activeTab}\n                    activeCurrency={props.activeCurrency}\n                    exchangeRate={props.exchangeRate}\n                  />\n                }\n\n              </section>\n              {/* {\n                account\n                && account.extended\n                && account.extended.config\n                && account.extended.config.type === \"user\"\n                && this.state.showLocationForm\n                && <LocationSearchFormWrapper\n                  progressBarActive={this.state.progressBarActive}\n                  progressBarPercent={this.state.progressBarPercent}\n                  fetchProjects={this.fetchProjects}\n                />\n              } */}\n              {/* <div\n                onClick={this.refresh}\n                className={(Fn.get('isMobile') ? \" top-6vh \" : \"  \")\n                  + (\" absolute top-0 right-0 pa3 pointer black-20- hover-black-40 flex flex-row items-center z-9 \")}>\n                <span className=\"mr2 f5 fw4 black-30\">{this.state.ready ? \"reload\" : \"loading\"}</span> {this.state.ready ? <Icon icon=\"refresh\" iconSize={15} className=\"black-40\" /> : <Spinner size={15} className=\"black-40\" />}\n              </div> */}\n              <Dialog\n                className={'bp3-light'}\n\n                // icon=\"info-sign\"\n                onClose={this.closeDialog}\n                title={this.state.dialogTitle}\n                {...this.state}\n              >\n                <FormProjectSearch\n                  searchProjects={this.searchProjects}\n                />\n\n              </Dialog>\n\n            </TransitionLayout>\n\n          )\n        }}\n\n      </AccountContext.Consumer>\n    );\n  }\n}\n\nexport default Home;\nHome.contextType = AccountContext","import React from 'react';\nimport { DatePicker, Drawer, message } from 'antd';\nimport moment from 'moment';\nimport TransitionLayout from '../../../Layouts/Transition.js';\nimport AccountContext from '../../../../utils/context/AccountContext.js';\nimport { Fn, app } from '../../../../utils/fn/Fn.js';\n// import LocationSearchBar from '../../elements/display/forms/LocationSearchBar.js';\nimport PageTitle from '../../../elements/layout/PageTitle_B.js';\n// import FormCrew from '../../CrewFinder/Three.js';\n// import { Icon } from '@blueprintjs/core';\nimport { Icon } from '@blueprintjs/core';\nimport Currencies from '../../../../utils/currencies/worldcurrencies.json';\n// import Lightbox from 'react-lightbox-component';\n// import Lightbox from 'react-image-lightbox';\n// import 'react-image-lightbox/style.css';\n// import { TH_LIST } from '@blueprintjs/icons/lib/esm/generated/iconNames';\n\nclass Account extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      hasError: false,\n      drawerOpen: false,\n      ready: false,\n      loading: false,\n      lightboxActive: false,\n      x: false,\n      currencies: []\n    }\n\n    // this.toggleDrawer = this.toggleDrawer.bind(this)\n    // this.openFilePanel = this.openFilePanel.bind(this)\n\n    this.updateAccount = this.updateAccount.bind(this)\n    this.currencyOnChange = this.currencyOnChange.bind(this)\n\n    this.userEmailAddress = React.createRef();\n    this.userMobilePhone = React.createRef();\n    this.currency = React.createRef()\n\n  }\n  async currencyOnChange(e) {\n      let value = e.target.value;\n      console.log('selected currency ', value)\n\n      let currency = Currencies.filter( a => a.name === value )[0]\n\n      let user = Fn.get('account').user;\n\n      user.currency = currency;\n\n      await app.updateUser({ self: this, user }).then( user => {\n        this.context.updateAccount()\n      })\n\n  }\n  updateAccount() {\n\n  }\n  // toggleLightbox() {\n\n  //   alert()\n\n  //   this.setState({\n  //     lightboxActive: !this.state.lightboxActive\n  //   })\n  // }\n\n  componentDidMount = () => {\n    this.context.setPage({ title: \"Account\", subtitle: \"...\"})\nconsole.log('Account context ',this.context)\nlet currencies = []\nfor(let item of Currencies){\n  currencies.push(item.name)\n}\n    this.setState({\n      ready: true,\n      currencies: currencies\n    })\n\n  }\n\n\n\n  render() {\n    if (this.state.hasError) {\n      return <h1>Something went wrong.</h1>;\n    }\n    return (\n      <>\n        <AccountContext.Consumer>\n\n          {props => {\n\n            return (\n\n              <TransitionLayout>\n                {/* {\n        !this.state.ready &&\n        <Loading />\n      } */}\n\n                {/* {\n        props.account.user.profile.config.onboardingcomplete === false\n        && <OnboardingScreen location={this.state.location} />\n      } */}\n\n                <section id=\"Home\" className=\"w-100 mw9 center pa4 pb6\">\n\n                  \n\n\n\n                  <div className=\"w-60-ns w-100 flex flex-row flex-wrap justify-between br3- -overflow-hidden\">\n\n                    {\n                      this.state.x\n                        ? <Icon icon=\"loading\" iconSize=\"15\" className=\"absolute right-0 f4 black-60 mr3\" /> : <Icon icon=\"swap-right\" iconSize=\"15\" className=\"f4 black-60 -white  absolute right-0 mr3\" />\n                    }\n\n                    {\n                      !this.state.ready && <div className=\"flex flex-column pv4 items-start\">\n                        {/* <Spinner size={25} /> */}\n                        <div className=\"sp sp-3balls\"></div>\n                      </div>\n                    }\n\n                    {\n                      this.state.ready &&\n\n                      <div id=\"SettingsForm_General\" className=\"flex flex-column mb6 w-100\">\n\n                        <div className=\"flex flex-column mt0 w-100\" id=\"\">\n\n                          <div className=\"form-row flex flex-column pb3 pt2\">\n\n                            <div className=\"form-row flex flex-column\">\n\n                              <div className=\"form-row flex flex-row pt4 items-center\">\n\n                                <label className=\"f5 fw6 black-20 pb3- tl mr4 w-30\">Email Address</label>\n\n                                <input\n                                  ref={this.userEmailAddress}\n                                  required={true}\n                                  type={'text'}\n                                  defaultValue={this.context.account.user.email}\n                                  className=\"flex flex-column ph4 pv3 bn br2- round bg-black-05- white- black-50 f4 fw5 bs-a- w-100 bg-white\" />\n\n                              </div>\n\n                              <div className=\"form-row flex flex-row pt4 items-center\">\n\n                                <label className=\"f5 fw6 black-20 pb3- tl mr4 w-30\">Mobile Phone</label>\n\n                                <input\n                                  ref={this.userMobilePhone}\n                                  required={true}\n                                  type={'text'}\n                                  defaultValue={this.context.account.user.profile.contact.phone}\n                                  className=\"flex flex-column ph4 pv3 bn br2- round bg-black-05- white- black-50 f4 fw5 bs-a- w-100 bg-white\" />\n\n                              </div>\n                              <div className=\"form-row flex flex-row pt4 items-center\">\n\n                                <label className=\"f5 fw6 black-20 pb3- tl mr4 w-30\">Currency</label>\n                                <div className=\"flex pb3 w-100\">\n                        <select\n                          // required={true}\n                          ref={this.currency}\n                          onChange={this.currencyOnChange}\n                          // value={this.context.currency.name}\n                          // type={'text'} \n\n                          className=\"w-100 flex flex-row ph4 pv3 bn round -br1 bg-white black-50 f4 fw5 -bs-a\"\n                        >\n                          \n                          {\n                            this.state.currencies.map( ( item, index) => (\n                              <option\n                              // onSelect={(item) => this.currencyOnChange(item)}\n                              selected={this.context.currency.name === item } \n                              value={item}>{item}</option>\n                            ))\n                          }\n\n                        </select>\n                      </div>\n\n                                {/* <input\n                                  ref={this.currency}\n                                  required={true}\n                                  type={'select'}\n                                  defaultValue={this.context.currency.name + \" : \" + this.context.currency.code}\n                                  className=\"flex flex-column ph4 pv3 bn br2- round bg-black-05- white- black-50 f4 fw5 bs-a- w-100 bg-white\" /> */}\n\n                              </div>\n\n            \n\n                            </div>\n\n                          </div>\n\n                        </div>\n\n                        <div className=\"Buttons flex flex-row justify-between mt4\">\n\n                          <div className=\"flex flex-column -w-100\">\n\n                            <button\n                              onClick={() => this.updateAccount()}\n                              className={(\"br1- round bs-b bg-black-20 ph5 pv2 pointer bn relative w-100  \")} >\n\n                              <span className=\"relative f5 fw6 white pv1 flex items-center justify-center w-100\">\n                                {this.state.loading ? 'Saving' : 'Save'}\n                              </span>\n\n                            </button>\n\n                          </div>\n\n                        </div>\n                      </div>\n\n                    }\n\n                    {\n                      this.context.isAuthenticated &&\n                      <div id=\"SettingsForm_Crew\" className=\"flex flex-column mb6 w-100\">\n\n                        {/* <FormCrew\n                  project={this.props.project}\n                /> */}\n\n                      </div>\n\n                    }\n\n                  </div>\n\n                </section>\n\n                <Drawer\n                  title=\"Basic Drawer\"\n                  placement=\"right\"\n                  closable={true}\n                  onClose={this.toggleDrawer}\n                  visible={this.state.drawerOpen}\n                  width={'60vw'}\n                >\n                  {\n                    this.state.drawerOpen &&\n                    <div className=\"pointer flex flex-column justify-end items-center pa3 bg-white \">\n                      <h3 className=\"f5 fw6 black tc pv2 ph3 word-break-all\">{this.state.activeFile.file.originalname}</h3>\n                      <div\n                        onClick={this.toggleLightbox}\n                        className=\"pointer flex flex-column justify-end items-center pa3 bg-white br2 bs-b mb2 mr2\">\n                        <div\n                          style={{ backgroundImage: 'url(\"' + this.state.activeFile.url + '\")' }}\n                          className=\"h5 file-item bg-cover bg-center cover flex flex-column justify-end items-center pa3 bg-white br2 bs-b mb2 mr2\">\n\n                        </div>\n\n\n                      </div>\n\n                    </div>\n                  }\n\n                </Drawer>\n              </TransitionLayout>\n            )\n          }}\n        </AccountContext.Consumer>\n      </>\n\n    );\n  }\n}\n\nexport default Account;\nAccount.contextType = AccountContext;","import React, { getGlobal } from 'reactn';\n// import methods from \"../../../../utils/methods\";\nimport moment from 'moment';\nclass ListItem extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            ready: true,\n            doc: {},\n            // chef: this.props.conversation.recipinet\n        }\n        console.log('listItem props', props)\n        // this.avatar = this.avatar.bind(this);\n        // this.toggle = this.toggle.bind(this);\n        // this.getRecipientDetail = this.getRecipientDetail.bind(this)\n    }\n    avatar(user) {\n        console.log('avatar', user)\n        return user.hasOwnProperty('picture') ? user.picture : \"http://cdn.shopify.com/s/files/1/2278/2351/products/W1151_GeometricPattern3_1024x1024.jpg?v=1510704914\";\n\n    }\n    async getRecipientDetail(doc) {\n        // console.log('listItem.js getRecipientDetail',doc)\n        // let participants = doc.participants;\n        // let userID = getGlobal().account.sub;\n        // let index = participants.indexOf(userID);\n        // let p = [...participants];\n        // p.splice(index,1);\n        // let recipientID = p[0];\n\n        // await window.db.users.find({sub: recipientID}, (err,res) => {\n        //     if(err) {console.error(err)}\n        //     console.log('recipient doc',res)\n        //     this.setState({ chef: res[0], ready: true })\n        // })   \n    }\n    componentDidMount() {\n        // this.getRecipientDetail(this.props.conversation);\n        console.log('[[ conv item ]]', this.props)\n    }\n    render() {\n        return (\n            this.state.ready ?\n                <div\n                    onClick={() => this.props.showDrawer({ notification: this.props.notification })}\n                    className={(\"br2 bs-b List_A_item cursor-pointer sans-serif flex flex-row flex-auto w-100 items-center justify-start pa0 mb2- relative overflow-hidden \")}\n                >\n                    {/* <div\n                        className=\"avatar flex flex-column bg-cover bg-center br2\"\n                    /> */}\n                    <div className=\"flex flex-row w-100 bg-white  \">\n                        <div className=\"flex flex-column w-100\">\n                            <div className={(\"flex flex-column mr2 f4 fw6 pb2 ph4 pt3 \")}>\n                                {this.props.notification.title}\n                            </div>\n                            <div className=\"flex flex-column mr2 f5 fw5 black-50 pb3 ph4\">{this.props.notification.content}</div>\n                  \n                            \n                        </div>\n\n                        <div\n                            className={\n                                (\"flex flex-row flex-auto fw3 f6 black-30 pt3 pb3 pr3 w-60 justify-end\")}>\n                                <span className=\"fw4 ml1 mr3 black-30\">{moment(this.props.notification.createdAt).format('h:mm A')}</span> <span className=\"fw4 ml1 mr3- black-30\">{moment(this.props.notification.createdAt).format('D MMMM YYYY')}</span>\n                            </div>\n\n                    </div>\n                    </div>\n                : null\n        )\n    }\n}\nexport default ListItem","import React from \"reactn\";\nimport ListItem from './listItem';\nimport posed from \"react-pose\";\nimport './style.css';\n\nconst List = posed.section({\n  open: {\n    x: \"0%\",\n    delayChildren: 200,\n    staggerChildren: 100\n  },\n  closed: { x: \"0\", delay: 300 }\n});\n\nconst Item = posed.div({\n  open: { y: 0, opacity: 1 },\n  closed: { y: 50, opacity: 0 }\n});\n\n// let loader = (\n//   <div className=\"lds-ripple\">\n//     <div />\n//     <div />\n//   </div>\n// );\nclass ListNotifications extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpen: false,\n      loading: false,\n      ready: true,\n      conversations: this.props.conversations\n    };\n    console.log('Notifications List', props)\n    this.toggle = this.toggle.bind(this);\n  }\n  toggle = () => this.setState({ isOpen: !this.state.isOpen });\n  componentDidMount() {\n    setTimeout(this.toggle, 100)\n  }\n  render() {\n    const { isOpen } = this.state;\n    // console.log(this.props.conversations)\n    return (\n      <List\n        pose={isOpen ? \"open\" : \"closed\"}\n        id=\"List_A\"\n        className=\"list array flex flex-column justify-between flex-auto flex-wrap w-100 pb4 pt2- ph0 bg-transparent\"\n      >\n\n        {this.state.ready && this.props.notifications.map((item, index) => (\n          <Item key={index} className=\"relative mb2\">\n\n            <ListItem\n              showDrawer={this.props.showDrawer}\n              // activeConversation={this.props.activeConversation}\n              notification={item}\n            />\n\n          </Item>\n        ))}\n\n      </List>\n\n    );\n  }\n}\nexport default ListNotifications;\n","import React from \"react\";\n\nimport { Icon } from \"@blueprintjs/core\";\n\nimport { motion, AnimatePresence } from \"framer-motion\";\n// import { Motion, Frame, Scroll, useCycle } from \"framer\"\n\n// import func from \"./fn\";\nvar GeoPattern = require(\"geopattern\");\nwindow.GeoPattern = GeoPattern;\n\nconst spring = {\n  type: \"spring\",\n  damping: 20,\n  stiffness: 300\n};\n\nconst container = {\n  hidden: { y: 10, opacity: 0 },\n  show: {\n    opacity: 1,\n    y: 0,\n    transition: {\n      //   delayChildren: 0.2,\n      staggerChildren: 0.2,\n      // delay: 1,\n      // x: { type: \"spring\", stiffness: 100 },\n      y: { type: \"spring\", stiffness: 100 },\n      default: { duration: 0.3 }\n    }\n  }\n};\n\nconst item = {\n  hidden: { opacity: 0, y: 50 },\n  show: { opacity: 1, y: 0 },\n  transition: {\n    //   delayChildren: 0.2,\n    staggerChildren: 0.2,\n    // delay: 1,\n    // x: { type: \"spring\", stiffness: 100 },\n    y: { type: \"spring\", stiffness: 100 },\n    default: { duration: 0.3 }\n  }\n};\n\nexport default class UserList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      crew: [],\n      invited: [],\n      items: [],\n      isConfirmed: false,\n      ready: false\n    };\n  }\n  async componentDidMount() {\n    console.log(\"UserList props\", this.props);\n    // this.setState({\n    //   // crew: this.props.crew,\n    //   // invited: this.props.invited\n    // });\n    // i\n    // let crew = this.props.crew;\n    // let invited = this.props.invited;\n    // // let invited_ = [];\n    // func.checkConfirmed({ invited, crew }).then(res => {\n    //   if (this.props.type === \"production\") {\n    //     this.setState({\n    //       invited: res,\n    //       items: this.props.crew,\n    //       ready: true\n    //     });\n    //   }\n    //   if (this.props.type === \"crew\") {\n    //     this.setState({\n    //       invited: res,\n    //       items: res,\n    //       ready: true\n    //     });\n    //   }\n    // });\n  }\n  render() {\n    // const { isConfirmed } = this.state;\n    return (\n      <div\n        className={\n          \" flex flex-column mt0 w-100 -pa3 -ba -b--black-05 -br4 -overflow-hidden justify-between\"\n        }\n        id=\"\"\n      >\n        {this.props.ready && (\n          <motion.section\n            variants={container}\n            initial=\"hidden\"\n            animate=\"show\"\n            className={\n              (this.props.columns && \" col-\" + this.props.columns) +\n              (this.props.columns > 1\n                ? \" flex-row flex-wrap \"\n                : \" flex-column \") +\n              \" flex justify-between \"\n            }\n          >\n            {this.props.items.length > 0 &&\n              this.props.items.map((item, index) => (\n                <motion.div\n                  // onClick={() =>\n                  //   this.props.toggleDrawer({ item, type: this.props.type })\n                  // }\n                  className=\"pointer\"\n                  variants={item}\n                  key={index}\n                  // initial={\"hidden\"}\n                  // animate={\"show\"}\n                  // layoutTransition={spring}\n                  //  style={{ transitionDelay: ((index * 0.05) + \"s\") }}\n                  //  initial={{ x: 0, y:50, opacity: 0 }}\n                  // animate={\"show\"}\n                  exit={\"hidden\"}\n                  transitionDelay={ index + 0.3 }\n                  //   transition={{\n                  // delay: 1}}\n\n                  // style={{ background }}\n                >\n                  {item && (\n                    <div\n                      // style={{ transitionDelay: ((index * 0.05) + \"s\") }}\n                      id={\"user-\" + item.id}\n                      className={\n                        // ( this.state.isDeletingStart[index] ? \" opacity-50 blur-grayscale \" : \"  \" )\n                        // + ( this.state.isDeleting[index] ? \" transform-y-up opacity-0 blur-10\" : \" transform-y-0 opacity-1  blur-0\" )\n                        \" flex flex-row justify-start w-100 trans-a bg-white-50 hover-bg-white mb3 bs-b br3 overflow-hidden \"\n                      }\n                    >\n                      <div\n                        className={\n                          (this.props.type === \"people\"\n                            ? \" w-40 \"\n                            : \" w-100 \") +\n                          \" flex flex-row-ns flex-column flex-auto-\"\n                        }\n                      >\n                        <div className=\"flex flex-column w-100=\">\n                          <div className=\"round- p-a1 bg-white center\">\n                            <div\n                              onClick={() =>\n                                this.props.toggleDrawer({\n                                  item,\n                                  type: this.props.type\n                                })\n                              }\n                              style={{\n                                width: \"120px\",\n                                height: \"90px\",\n                                backgroundImage:\n                                  item.profile &&\n                                  item.profile.picture &&\n                                  item.profile.picture.length\n                                    ? \"url(\" + item.profile.picture + \")\"\n                                    : GeoPattern.generate(\n                                        item.profile &&\n                                          item.profile.name &&\n                                          item.profile.name.first +\n                                            item.profile &&\n                                          item.profile.name &&\n                                          item.profile.name.last\n                                      ).toDataUrl()\n                              }}\n                              className=\"center pointer round-  cover bg-center\"\n                            ></div>\n                          </div>\n                        </div>\n\n                        <div\n                          onClick={() =>\n                            this.props.toggleDrawer({\n                              item,\n                              type: this.props.type\n                            })\n                          }\n                          className=\"flex flex-column justify-center items-start ph4\"\n                        >\n                          <div className=\"f4 flex flex-column items-start w-100 raleway \">\n                            <span className=\"flex flex-row-ns flex-column -w-100 black f3 fw6\">\n                              <span\n                                className={\n                                  \"userList-type-\" +\n                                  this.props.type +\n                                  \" flex flex-row items-center justify-start-ns justify-center black f5 fw6\"\n                                }\n                              >\n                                {item.profile.name.first}{\" \"}\n                                {item.profile.name.last}\n                              </span>\n                            </span>\n                          </div>\n                        </div>\n                      </div>\n\n                      {this.props.type === \"people\" && (\n                        <div className=\"flex flex-row-ns flex-column w-30 ph4 pv3 \">\n                          <div className=\"flex flex-column justify-center\">\n                            <span className=\"flex flex-row items-center justify-start-ns justify-start black-40 f6 fw6\">\n                              {item.position}\n                            </span>\n                          </div>\n                        </div>\n                      )}\n\n                      {this.props.type === \"crew\" && (\n                        <div className=\"flex flex-row-ns flex-column w-30 ph4 pv3 \">\n                          <div className=\"flex flex-column justify-center\">\n                            <span className=\"flex flex-row items-center justify-start-ns justify-start black-40 f6 fw6\">\n                              {item.isConfirmed\n                                ? \"Confirmed \"\n                                : \"Not Confirmed\"}\n                              {item.isConfirmed ? (\n                                <Icon\n                                  icon=\"endorsed\"\n                                  iconSize={\"20\"}\n                                  className=\"f6 green ml2\"\n                                />\n                              ) : (\n                                \"\"\n                              )}\n                            </span>\n                          </div>\n                        </div>\n                      )}\n\n                      <div className=\"flex flex-row-ns flex-column w-30 ph4 pv3 \"></div>\n\n                      {this.props.state.deleteConfirmation[index] === false && (\n                        <div\n                          onClick={() =>\n                            this.props.confirmDelete({ item, index })\n                          }\n                          className=\"pointer flex flex-column items-end justify-center w-20 ph4 pv3\"\n                        >\n                          <div className=\"flex flex-column justify-center\">\n                            <span className=\"flex flex-row items-center justify-start-ns justify-center black-30 hover-black-70 f6 fw6\">\n                              Remove\n                              <Icon\n                                icon={\"delete\"}\n                                iconSize={20}\n                                className=\"ml2 black-20 f6\"\n                              />\n                            </span>\n                          </div>\n                        </div>\n                      )}\n\n                      {this.props.state.deleteConfirmation[index] === true && (\n                        <div\n                          onClick={e => this.props.remove({ e, item, index })}\n                          className=\"pointer flex flex-column items-end justify-center w-20 ph4 pv3\"\n                        >\n                          <div className=\"flex flex-column justify-center\">\n                            <span className=\"flex flex-row items-center justify-start-ns justify-center black-30 hover-black-70 f6 fw6\">\n                              Are you sure?\n                              <Icon\n                                icon={\"delete\"}\n                                iconSize={20}\n                                className=\"ml2 red f6\"\n                              />\n                            </span>\n                          </div>\n                        </div>\n                      )}\n                    </div>\n                  )}\n                </motion.div>\n              ))}\n          </motion.section>\n        )}\n\n        {this.props.items.length === 0 && this.props.type === \"people\" && (\n          <div className=\"flex f5 fw5 black-50 pv3\">No crew assigned yet.</div>\n        )}\n        {/* {this.props.items.length === 0 && this.props.type === \"network\" && (\n          <div className=\"flex f5 fw5 black-50 pv3\">No crew assigned yet.</div>\n        )} */}\n      </div>\n    );\n  }\n}\n","// @flow\nimport React from \"react\";\nimport { Icon, Spinner, Dialog, NumericInput } from \"@blueprintjs/core\";\n\n// import PropTypes from 'prop-types';\n\nconst Bio = props => (\n  console.log(\"bio\", props),\n  (\n    <section id=\"Bio\" className=\"mt0-ns\">\n      <div className=\"flex flex-column mb2 pa4 br1 bg-white\">\n        <div className=\"flex flex-row\">\n          <div className=\"flex flex-auto flex-row pb0\">\n            <p className=\"f4 fw4 black-60 mb0 flex flex-row flex-auto\">\n              {props.user.profile.bio.length === 0 && (\n                <div\n                  onClick={props.createBio}\n                  className=\"pointer flex ph3 pv2 f5 fw5 black-60 ba b--black-10 br1\"\n                >\n                  Bio not available\n                </div>\n              )}{\" \"}\n              {props.user.profile.bio}{\" \"}\n              {props.canEdit && (\n                <Icon\n                  onClick={props.editBio}\n                  icon={\"edit\"}\n                  iconSize={12}\n                  Skills\n                  className=\"pointer black-30 ml2\"\n                />\n              )}\n            </p>\n          </div>\n        </div>\n        <div className=\"flex flex-column pt4\">\n          <div className=\" pt0\">\n            <h3 className=\"f5 fw3 black-30 mb3 flex justify-start\">Skills</h3>\n          </div>\n\n          <div className=\"flex flex-auto flex-column pb0 \">\n            <p className=\"flex flex-row flex-wrap f4 fw4 black-60 mb0\">\n              {props.user.profile.additional.skills.map((item, index) => (\n                <span className=\"   pointer flex f5 fw6 black-60 ph3 pv2 round- br2 bs-b mr2-ns bn w-100-s- items-center tc justify-center mb3 mb0-ns bg-black-20 white ts-a- mr2 \">\n                  {item}\n                </span>\n              ))}{\" \"}\n              {props.canEdit && (\n                <Icon\n                  onClick={props.editSkills}\n                  icon={\"edit\"}\n                  iconSize={12}\n                  className=\"pointer black-30 ml2\"\n                />\n              )}\n            </p>\n          </div>\n        </div>\n      </div>\n    </section>\n  )\n);\n\nexport default Bio;\n","import React from 'react';\nimport { getGlobal } from \"reactn\";\n\n// import { Link } from \"react-router-dom\";\nimport { Icon } from \"antd\";\n\n// import methods from '../../../../utils/methods';\n\nimport posed, { PoseGroup, Transition } from \"react-pose\";\n\nconst ItemC = React.forwardRef((props, ref) => {\n  console.log('ItemC', props);\n  return (\n    <div\n    key={props.item.createdAt}\n     ref={ref} \n     style={props.style}\n     className={(props.recipientID !== props.item.author ? \"row-reverse justify-end message-list-item \" : \" message-list-item justify-start \") + (\" items-start flex flex-row w-100 pb3\")}\n     >\n      <div style={{ backgroundImage: `url(` + props.avatarAuthor(props.item) + `)` }}\n        className=\"avatar-s flex flex-column bg-cover bg-center br2\" />\n      <div className={(props.recipientID !== props.item.author ? \"tr\" : \" tl\") + (\" flex flex-column ph3 w-100\")}>\n        {props.item.text}\n      </div>\n    </div>\n  );\n});\nconst Item = posed(ItemC)({\n  enter: {\n    y: 0,\n    opacity: 1,\n    delay: 0,\n    transition: {\n      y: { type: 'spring', stiffness: 1000, damping: 100 },\n      default: { duration: 300 }\n    }\n  },\n  // enter: { opacity: 1, y: 0 },\n  exit: {\n    y: -50,\n    opacity: 1,\n    delay: 300,\n    transition: {\n      y: { type: 'spring', stiffness: 1000, damping: 100 },\n      default: { duration: 300 }\n    }\n  }\n});\nconst List = posed.div({\n  enter: {\n    y: -50,\n    opacity: 1,\n    delay: 0,\n    transition: {\n      y: { type: 'spring', ease: 'easeInOut', stiffness: 1000, damping: 100 },\n      default: { duration: 300 }\n    }\n  },\n  exit: {\n    y: 500,\n    opacity: 0,\n    delay: 0,\n    transition: {\n      y: { type: 'spring', stiffness: 1000, damping: 100,restDelta: 0.5,\n      restSpeed: 10 },\n      default: { duration: 300 }\n    }\n  }\n});\nconst TransitionItems = (props) => (\n  <Transition animateOnMount={true}  >\n{\n    props.items.map(item => <Item enterAfterExit={true} beforeChildren={true}  animateOnMount={true} key={item.createdAt} item={item} recipientID={props.recipientID} avatarAuthor={props.avatarAuthor} />)\n}\n</Transition>\n)\n\n\nclass MessageBox2 extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      ready: false,\n      doc: {},\n      cjef: {},\n      visible: this.props.visible,\n      placement: \"right\",\n      test: this.props.visible,\n      activeTab: \"1\",\n      characters: [],\n      conversation: {\n        messages: [],\n        participants: []\n      },\n      recipient: this.props.chef\n    };\n\n    console.log('Messagebox1', props)\n\n    this.showWidget = this.showWidget.bind(this);\n    this.checkUploadResult = this.checkUploadResult.bind(this);\n    this.avatar = this.avatar.bind(this);\n    this.avatarAuthor = this.avatarAuthor.bind(this);\n    this.goToTab1 = this.goToTab1.bind(this);\n    this.tabOnChange = this.tabOnChange.bind(this);\n    this.submitMessage = this.submitMessage.bind(this);\n    this.getRecipientDetail = this.getRecipientDetail.bind(this);\n    this.createNewConversation = this.createNewConversation.bind(this);\n    this.insertMessage = this.insertMessage.bind(this)\n    this.findConversation = this.findConversation.bind(this)\n    this.messageText = React.createRef()\n\n  }\n\n  submitMessage(e) {\n    e.preventDefault();\n    let text = this.messageText.current.value;\n    let message = {\n      author: JSON.parse(localStorage.getItem('account')).sub,\n      text: text,\n      createdAt: new Date()\n    }\n    this.insertMessage(message);\n\n  }\n  insertMessage(message) {\n    const convID = this.state.conversation._id;\n    const conv = this.state.conversation;\n    conv.messages.unshift(message);\n\n    window.db.conversations.update({ _id: convID }, conv, (e, r) => {\n      this.findConversation()\n    })\n    this.messageText.current.value = null;\n  }\n  avatar() {\n    console.log('avatar doc', this.props)\n    let avatar =\n      typeof this.state.recipient !== \"undefined\"\n        ? this.state.recipient.picture\n        : \"http://cdn.shopify.com/s/files/1/2278/2351/products/W1151_GeometricPattern3_1024x1024.jpg?v=1510704914\";\n    return avatar;\n  }\n  avatarAuthor(message) {\n    const authorID = message.author;\n    console.log('author', message, this.state)\n    if (message.author === this.state.recipient._id) {\n      return this.state.recipient.avatar\n    }\n    else {\n      return getGlobal().account.picture\n    }\n  }\n  showDrawer = () => {\n    this.setState({\n      visible: true\n    });\n  };\n  onClose = () => {\n    this.setState({\n      visible: false\n    });\n  };\n  onChange = e => {\n    this.setState({\n      placement: e.target.value\n    });\n  };\n  tabOnChange(e) {\n    console.log(e);\n    this.setState({\n      activeTab: e\n    });\n  }\n  goToTab1() {\n    this.setState({ activeTab: \"1\" });\n  }\n  \n  async getRecipientDetail(doc) {\n    // let data = { doc, self: this };\n    // console.log('docinfo.js getRecipientDetail doc', data)\n    // let doc_ = await methods.getRecipientDetail(data);\n    // console.log('getRecipientDetail', doc_)\n  }\n\n  createNewConversation() {\n    const userID = getGlobal().account.sub;\n    const recipientID = this.props.chef._id;\n    let conv = {\n      \"participants\": [\n        userID, recipientID\n      ],\n      \"messages\": []\n    }\n    window.db.conversations.insert(conv, (e, r) => {\n      if (e) {\n        console.log('Insert Conversation Error', r)\n      }\n      else {\n        console.log('Insert Conversation Response', r)\n        this.setState({ conversation: r, ready: true })\n      }\n    })\n  }\n  async findConversation() {\n    const userID = getGlobal().account.sub;\n    let chef = this.props.chef;\n    this.setState({ chef: chef })\n    const recipientID = chef._id;\n\n    return await window.db.conversations.find({\n      $and: [{ participants: recipientID }, { participants: userID }]\n    }, (e, r) => {\n      console.log('methods.findConversation', r[0])\n      if (r.length === 0) {\n        this.createNewConversation()\n      } else {\n        this.setState({ conversation: r[0] })\n        setTimeout(() => {\n          this.setState({ ready: true })\n        },500)\n        console.log('state', this.state)\n      }\n    })\n  }\n  \n  showWidget(widget) {\n    window.widget.open();\n  }\n  checkUploadResult(resultEvent) {\n    if (resultEvent.event === \"success\") {\n    }\n  }\n  getRecipient() {\n    \n  }\n  componentDidUpdate() {\n  }\n  componentDidMount() {\n    // this.setState({ ready: true });\n    this.findConversation()\n  }\n  render() {\n    return (\n      <div>\n        <div className=\"flex flex-column relative h-100 flex-auto \">\n          { this.props.conversationReady && this.state.ready ?\n            <>\n              <div className=\"flex flex-auto flex-column relative\">\n                <div\n                  className=\" relative flex flex-auto flex-column w-100 bg-center bg-cover items-start justify-end pa3 relative overflow-hidden bb b--black-05\"\n                >\n                  <div\n                    className={\n                      (this.props.theme.main === \"dark\" ? \" \" : \" \")\n                      + (\"List_A_item cursor-pointer sans-serif flex flex-row flex-auto w-100  items-center justify-start pa0 mb4- br2 overflow-hidden relative \")}\n                  >\n                    <div\n                      style={{ backgroundImage: `url(` + this.avatar(this.props.chef) + `)` }}\n                      className=\"avatar flex flex-column bg-cover bg-center br2\"\n                    />                 <div className=\"flex flex-column pa3 w-100\">\n                      <div className=\"flex flex-row w-100\">\n                        <div className={\n                          (this.props.theme.main === \"dark\" ? \" white \" : \" black-70 \")\n                          + (\"flex flex-column mr2 f5 fw6 \")}>\n                          {this.props.chef.given_name}\n                        </div>\n                        <div className={\n                          (this.props.theme.main === \"dark\" ? \" white-50 \" : \" black-50 \")\n                          + (\"flex flex-column flex-auto fw4 f5 black-50 \")}>\n                          {this.props.chef.family_name}\n                        </div>\n                      </div>\n                    </div></div>\n                </div>\n              </div>\n              <div className=\"flex -absolute -bottom-0 w-100 bb b--black-05\">\n                <form onSubmit={this.submitMessage} className=\"flex flex-row w-100 ma0\">\n                  <div className=\"flex flex-column w-80\">\n                    <input required={true} placeholder={'Enter message ...'} ref={this.messageText} className=\"bn pa3 f4 fw5 black-60\" type=\"text\"></input>\n                  </div>\n                  <div className=\"flex flex-column w-20 bl b--black-05\">\n\n                    <button type={'submit'} className=\"flex h-100 items-center justify-center f4 bg-black-10 bn\"><Icon type=\"arrow-right\" /></button>\n                  </div>\n                </form>\n              </div>\n              <div\n                className=\" relative flex flex-auto flex-column w-100 bg-center bg-cover items-start justify-end relative overflow-hidden \"\n              > <List animateOnMount={true} className=\"messages-list db relative overflow-auto w-100 pa4 \">\n              <TransitionItems items={this.state.conversation.messages} recipientID={this.state.recipient._id} avatarAuthor={this.avatarAuthor} />\n            </List>\n              </div>\n            </>\n            : <div className=\"flex flex-column flex-auto h-100 w-100 items-center justify-center\">\n              <div className=\"flex flex-column pa5\">\n                <Icon type=\"loading\" className=\"f2 black-20\" />\n              </div>\n            </div>\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default MessageBox2;\n","import React, { getGlobal } from \"reactn\";\nimport { Link } from \"react-router-dom\";\nimport { Drawer } from \"antd\";\n// import { Tabs } from \"antd\";\nimport MessageBox2 from \"../messages/messagebox2\";\nvar GeoPattern = require(\"geopattern\");\nwindow.GeoPattern = GeoPattern;\n\nexport default class NotificationDrawer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      doc: this.props.doc,\n      // conversation: this.props.activeConversation,\n      visible: this.props.visible,\n      childrenDrawer: false,\n      placement: \"right\",\n      test: this.props.visible,\n      activeTab: \"1\",\n      characters: [],\n      conversationReady: false,\n      ready: false\n    };\n\n    // console.log(\"DocInfo\", props);\n\n    this.showWidget = this.showWidget.bind(this);\n    this.checkUploadResult = this.checkUploadResult.bind(this);\n  }\n\n  showWidget(widget) {\n    window.widget.open();\n  }\n  checkUploadResult(resultEvent) {\n    if (resultEvent.event === \"success\") {\n    }\n  }\n  render() {\n    return (\n      <div>\n        <Drawer\n          title={\"Notification Detail\"}\n          placement={\"right\"}\n          closable={true}\n          onClose={this.props.close}\n          width={500}\n          visible={this.props.visible}\n          doc={this.props.doc}\n          className=\"Conversation\"\n        >\n          {this.props.visible && (\n            <div className=\"flex flex-auto flex-column relative pa5\">\n              <div className=\"flex flex-column mr2 f3 fw6 pb3\">\n                {this.props.doc.title}\n              </div>\n              <div className=\"flex flex-column mr2 f4 fw4 black-50 pb3 -ph4\">\n                {this.props.doc.content}\n              </div>\n              <div className=\"flex flex-column mr2 f5 fw6 pb3 pt3\">\n                Sender\n              </div>\n              <div className=\"flex flex-column mr2 f4 fw4 black-50 pb3 -ph4\">\n                \n                {\n                  this.props.doc.data && this.props.doc.data.sender &&\n                  <div className=\"flex flex-row-ns flex-row -w-100\">\n                  <div\n                    // onClick={() => this.props.toggleInnerDrawer(item)}\n                    className=\"flex flex-column w-100=\"\n                  >\n                    <div className=\"round pa1 bg-white center\">\n                      <div\n                        style={{\n                          width: \"50px\",\n                          height: \"50px\",\n                          backgroundImage:\n                          this.props.doc.data.sender.picture.length\n                          ? \"url(\" + this.props.doc.data.sender.picture + \")\"\n                          : GeoPattern.generate(this.props.doc.data.sender.name.first + this.props.doc.data.sender.name.last).toDataUrl()\n                        }}\n                        className=\"center pointer round  cover bg-center\"\n                      ></div>\n                    </div>\n                  </div>\n        \n                  <div\n                    // onClick={() => this.props.toggleInnerDrawer(item)}\n                    className=\"flex flex-column justify-center w-100- flex-auto ph3\"\n                  >\n                    <div className=\"f4 flex flex-column items-center w-100 raleway \">\n                      <span className=\"flex flex-row-ns flex-column w-100 black f3 fw6\">\n                        <span className=\"flex flex-row items-center justify-start-ns justify-center black-70 f5 fw6\">\n                          {this.props.doc.data.sender.name.first} {this.props.doc.data.sender.name.last}\n                        </span>\n                      </span>\n                    </div>\n                  </div>\n        \n      \n                </div>\n                }\n              </div>\n              <div className=\"flex flex-column mr2 f5 fw6 pb3 pt3\">\n                Project\n              </div>\n              <div className=\"flex flex-column mr2 f4 fw4 black-50 pb3 -ph4\">\n                {\n                  this.props.doc.data && this.props.doc.data.project && this.props.doc.data.project.title.length && \n                  <div className=\"flex flex-row-ns flex-row -w-100\">\n                  <div\n                    // onClick={() => this.props.toggleInnerDrawer(item)}\n                    className=\"flex flex-column w-100=\"\n                  >\n                    <div className=\"round pa1 bg-white center\">\n                      <div\n                        style={{\n                          width: \"50px\",\n                          height: \"50px\",\n                          backgroundImage:\n                                                     this.props.doc.data.project.picture\n                                                      ? \"url(\" + this.props.doc.data.project.picture + \")\"\n                                                      : GeoPattern.generate(this.props.doc.data.project.title).toDataUrl()\n                        }}\n                        className=\"center pointer round  cover bg-center\"\n                      ></div>\n                    </div>\n                  </div>\n        \n                  <div\n                    // onClick={() => this.props.toggleInnerDrawer(item)}\n                    className=\"flex flex-column justify-center w-100- flex-auto ph3\"\n                  >\n                    <div className=\"f4 flex flex-column items-center w-100 raleway \">\n                      <span className=\"flex flex-row-ns flex-column w-100 black f3 fw6\">\n                        <span className=\"flex flex-row items-center justify-start-ns justify-center black-70 f5 fw6\">\n                          {this.props.doc.data.project.title}\n                        </span>\n                      </span>\n                    </div>\n                  </div>\n        \n      \n                </div>\n                }\n              </div>\n              <div className=\"flex flex-auto flex-row relative mt3\">\n                <Link\n                  to={\"/project/\" + this.props.doc.data.project.id}\n                  className=\"round f5 fw5 white bg-black-20 hover-bg-black-30 ph4 pv2 bs-b hover-white\"\n                >\n                  View Project\n                </Link>\n\n                {/* {this.props.doc.data.type === \"project_invite\" &&\n                  <Link to={'/project/' + this.props.doc.data.link} className=\"f6 fw5 black-50\">View Project</Link>\n                }\n\n                {this.props.doc.data.type === \"message_reply\" &&\n                  <Link to={'/project/' + this.props.doc.data.link} className=\"f6 fw5 black-50\">View Message</Link>\n                }\n                {this.props.doc.data.type === \"application_response\" &&\n                  <Link to={'/project/' + this.props.doc.data.link} className=\"f6 fw5 black-50\">View Application</Link>\n                } */}\n              </div>\n            </div>\n          )}\n        </Drawer>\n      </div>\n    );\n  }\n}\n\n// export default MessageDrawer;\n","import React from \"react\";\n// import { getGlobal, setGlobal, useGlobal } from \"reactn\";\n// import methods from '../../../utils/methods';\nimport { Empty, Skeleton } from \"antd\";\nimport { Fn, app } from \"../../../../utils/fn/Fn.js\";\nimport { Spinner, Icon } from \"@blueprintjs/core\";\nimport { DatePicker, Drawer, Popconfirm, message } from \"antd\";\n// import { RingSpinner } from \"react-spinners-kit\";\nimport TransitionLayout from \"../../../Layouts/Transition\";\n// import InsertModal from \"../../elements/forms/project/modal/insert\";\nimport ListNotifications from \"../../../elements/display/notifications\";\nimport PageTitle from \"../../../elements/layout/PageTitle_B\";\nimport UserList from \"../../../a/UserList/index.js\";\nimport Bio from \"../../../a/_Elements/Bio/Bio.jsx\";\nimport NotificationDrawer from \"../../../elements/display/drawers/notificationDrawer\";\n// import fn from '../../../../../../../UNIT/client/src/utils/fn/fn'\nimport AccountContext, {\n  AccountConsumer\n} from \"../../../../utils/context/AccountContext.js\";\nimport Loading from \"../../../elements/Loading.js\";\n// import notificationTypes\n// import { notificationTypes } from \"./types\";\n\nimport moment from \"moment\";\nvar GeoPattern = require(\"geopattern\");\nwindow.GeoPattern = GeoPattern;\nclass Network extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      ready: false,\n      connections: [],\n      activeUser: null,\n      filter: \"active\",\n      isDeleting: [],\n      isDeletingStart: [],\n      del: [],\n      deleteConfirmation: []\n    };\n\n    this.start = this.start.bind(this);\n    this.reload = this.reload.bind(this);\n    this.toggleDrawer = this.toggleDrawer.bind(this);\n    // this.handleOk = this.handleOk.bind(this);\n    this.hideDrawer = this.hideDrawer.bind(this);\n    this.filter = this.filter.bind(this);\n    this.remove = this.remove.bind(this);\n    this.confirmDelete = this.confirmDelete.bind(this);\n    this.userLocation = this.userLocation.bind(this);\n  }\n  userLocation() {\n    let user = this.state.activeCrewMember;\n    let location;\n    if (\n      user.profile.location &&\n      typeof user.profile.location.County !== \"undefined\"\n    ) {\n      location = user.profile.location.County;\n    } else if (\n      user.profile.location &&\n      typeof user.profile.location.address.county !== \"undefined\"\n    ) {\n      location = user.profile.location.address.county;\n    } else {\n      location = \"\";\n    }\n    return location;\n    // props.account.user.profile.location && props.account.user.profile.location.address.county || \"\"\n  }\n  filter(type) {\n    this.setState({\n      filter: type\n    });\n  }\n  confirmDelete({ item, index }) {\n    let deleteConfirmation = this.state.deleteConfirmation;\n    deleteConfirmation[index] = true;\n\n    this.setState({\n      deleteConfirmation: deleteConfirmation\n    });\n  }\n  async remove({ item, index }) {\n    let isDeleting = this.state.isDeleting;\n    let isDeletingStart = this.state.isDeletingStart;\n\n    isDeletingStart[index] = true;\n\n    this.setState({\n      isDeletingStart: isDeletingStart\n    });\n\n    setTimeout(async () => {\n      isDeleting[index] = true;\n      isDeletingStart[index] = false;\n      this.setState({\n        isDeleting: isDeleting,\n        isDeletingStart: isDeletingStart\n      });\n\n      let userId = item.id;\n      let project = this.props.project;\n      let invited = project.invited;\n      let crew = project.crew;\n\n      let crewItemIndex = crew.findIndex(a => a.id === userId);\n      let invitedItemIndex = invited.findIndex(a => a.id === userId);\n\n      crew.splice(crewItemIndex, 1);\n      invited.splice(invitedItemIndex, 1);\n\n      console.log(\"crew\", crew);\n      console.log(\"crew member to delete\", userId);\n      console.log(\"index of crew member to delete\", invitedItemIndex);\n      console.log(\"update crew list after delete\", crew);\n\n      project.crew = crew;\n      project.invited = invited;\n\n      await app.updateProject({ self: this, project }).then(async res => {\n        await app.fetchCrew({ self: this, project });\n        this.reloadProject();\n      });\n    }, 1000);\n  }\n  async refresh() {\n    this.setState({\n      ready: false\n    });\n\n    setTimeout(async () => {\n      return await this.fetchNotifications();\n    }, 1000);\n\n    // this.fetchCollection()\n  }\n  closeInnerDrawer() {\n    this.setState({\n      innerDrawerOpen: false\n    });\n  }\n  toggleInnerDrawer(item) {\n    this.setState({\n      innerDrawerOpen: true,\n      activeCrewMember: item\n    });\n    // this.state.activeCrewMember\n  }\n  toggleDrawer({ item, type }) {\n    console.log(item);\n    this.setState({\n      drawerType: type,\n      drawerOpen: !this.state.drawerOpen,\n      activeCrewMember: item\n    });\n  }\n  // async showDrawer(data) {\n\n  //   const { notification } = data;\n\n  //   console.log(\"show drawer \", notification);\n\n  //   this.setState({\n  //     drawerReady: true,\n  //     docInfoVisible: true,\n  //     activeNotification: notification\n  //   });\n\n  //   // let notification =\n  //   notification.read = true;\n\n  //   await app.updateNotification({ self: this, notification });\n\n  //   // setGlobal({ activeConversation: conversation, activeChef: chef })\n  // }\n\n  hideDrawer(doc) {\n    this.setState({\n      drawerReady: false,\n      docInfoVisible: false\n    });\n  }\n  reload() {\n    this.setState({\n      ready: false\n    });\n    this.start();\n  }\n  start = async () => {\n    let connections = this.context.account.user.profile.connections;\n\n    console.log(\"connections\", connections);\n\n    await app\n      .fetchConnections({ self: this, connections })\n      .then(connections => {\n        console.log(\"connections\", connections);\n\n        setTimeout(() => {\n          this.setState({\n            connections: connections,\n            ready: true\n          });\n        }, 1000);\n      });\n  }\n\n  componentWillUnmount() {}\n\n  async componentDidMount() {\n\n    this.context.setPage({ title: \"Network\", subtitle: \"...\"})\n  \n    this.start();\n  \n  }\n  render() {\n    return (\n      <AccountContext.Consumer>\n        {props => (\n          <TransitionLayout>\n            {!this.state.ready && <Loading />}\n\n            <section\n              id=\"Notifications\"\n              className={\n                (this.props.padding !== false ? \" pa4 \" : \"  \") +\n                \" w-100 mw8 center mt3- \"\n              }\n            >\n              {/* <div onClick={this.refresh} className=\"absolute top-0 right-0 pa4\">\n            <Icon type=\"sync\" />\n          </div> */}\n\n              {/* <PageTitle\n                title={\"Network\"}\n                ready={this.state.ready}\n                // theme={props.theme}\n                // showInsertForm={this.showModal}\n                docs={this.state.connections}\n                // activeDoc={this.state.activeProject}\n                // updateActiveDoc={this.updateActiveDoc}\n                showButton={false}\n              /> */}\n\n              <div className={\" flex flex-row mt3 \"}>\n                <div className=\"flex flex-row\">\n                  <div\n                    onClick={() => this.filter(\"active\")}\n                    className={\n                      (this.state.filter === \"active\" ? \" fw6 \" : \" fw5 \") +\n                      \" pointer flex flex-column pv2 f5 black-30 mr2 \"\n                    }\n                  >\n                    Active\n                  </div>\n                  <div\n                    onClick={() => this.filter(\"pending\")}\n                    className={\n                      (this.state.filter === \"pending\" ? \" fw6 \" : \" fw5 \") +\n                      \" pointer flex flex-column pv2 f5 black-30 mr2 \"\n                    }\n                  >\n                    Pending\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"h2\"></div>\n\n              {this.state.ready && this.state.connections.length === 0 && (\n                <div\n                  className=\"flex flex-row ph0 pb3 items-center justify-start\"\n                  id=\"\"\n                >\n                  <span className=\"f6 fw5 black-50 pv2 ph3 ba b--black-05\">\n                    You do not have any connections\n                  </span>\n                </div>\n              )}\n\n              <UserList\n                // crew={this.state.productionCrew}\n                items={this.state.connections}\n                invited={this.props.invited}\n                userAvatar={this.userAvatar}\n                confirmDelete={this.confirmDelete}\n                remove={this.remove}\n                state={this.state}\n                ready={this.state.ready}\n                toggleDrawer={this.toggleDrawer}\n                type={\"production\"}\n                columns={3}\n                type={\"network\"}\n              />\n\n              {/* {this.state.ready && (\n                this.state.notifications.length > 0 && (\n                  <ListNotifications\n                    notifications={this.state.connections}\n                    // activeNotification={this.state.activeNotification}\n                    showDrawer={this.showDrawer}\n                    // theme={Fn.get('theme').config.theme}\n                    // setReady={this.setReady}\n                    // filter={}\n                  />\n                )\n              )} */}\n              {!this.state.ready && (\n                <div className=\"trans-a\">\n                  <Skeleton active />\n                  <Skeleton active />\n                </div>\n              )}\n\n              {/* {this.state.ready ? (\n                <NotificationDrawer\n                  type={\"info\"}\n                  notification={this.state.notification}\n                  doc={this.state.activeNotification}\n                  // chef={this.state.activeChef}/\n                  // updateDoc={this.updateDoc}\n                  visible={this.state.docInfoVisible}\n                  hideDrawer={this.hideDrawer}\n                  className=\"NotificationDetail\"\n                  close={this.hideDrawer}\n                  refresh={this.refresh}\n\n                  // theme={/Fn.get('theme').config.theme}\n                  // reserve={this.reserve}\n                  // sendMessage={this.sendMessage}\n                  // conversationReady={this.state.drawerReady}\n                />\n              ) : null} */}\n\n              <Drawer\n                title={\"Crew Search\"}\n                closable={true}\n                onClose={this.toggleDrawer}\n                visible={this.state.drawerOpen}\n                width={\"60vw\"}\n              >\n                <>\n                  {this.state.drawerOpen && (\n                    <div className=\"pointer flex flex-column justify-end items-start pa3- bg-white \">\n                      {this.state.drawerType === \"crewprofile\" && (\n                        <>\n                          <div\n                            // to={\"/user/\" + item.id}\n                            // onClick={this.toggleInnerDrawer}\n                            id=\"ProjectOwner\"\n                            className=\"flex flex-column w-100 pa0\"\n                          >\n                            <div className=\"pa4 flex flex-row-ns flex-column w-100\">\n                              <div className=\"flex flex-column w-100=\">\n                                <div className=\"round pa1 bg-white center\">\n                                  <div\n                                    style={{\n                                      width: \"90px\",\n                                      height: \"90px\",\n                                      backgroundImage: this.state\n                                        .activeCrewMember.profile.picture.length\n                                        ? \"url(\" +\n                                          this.state.activeCrewMember.profile\n                                            .picture +\n                                          \")\"\n                                        : GeoPattern.generate(\n                                            this.state.activeCrewMember.profile\n                                              .name.first +\n                                              this.state.activeCrewMember\n                                                .profile.name.last\n                                          ).toDataUrl()\n                                    }}\n                                    className=\"center pointer round  cover bg-center\"\n                                  ></div>\n                                </div>\n                              </div>\n\n                              <div className=\"flex flex-column justify-center w-100 ph3\">\n                                <div className=\"f4 flex flex-column items-center w-100 raleway \">\n                                  <span className=\"flex flex-row-ns flex-column w-100 black f3 fw6\">\n                                    <span className=\"flex flex-row items-center justify-start-ns justify-center black-70 f4 fw6\">\n                                      {\n                                        this.state.activeCrewMember.profile.name\n                                          .first\n                                      }{\" \"}\n                                      {\n                                        this.state.activeCrewMember.profile.name\n                                          .last\n                                      }\n                                    </span>\n                                  </span>\n                                </div>\n                              </div>\n                            </div>\n                          </div>\n                          <section\n                            id=\"ProfileButtons\"\n                            className=\"flex flex-auto w-100\"\n                          >\n                            <div className=\"flex flex-row mb2-ns- w-100 bt b--black-05 \">\n                              <button\n                                title=\"View or upload CV\"\n                                id=\"CV-button\"\n                                className=\"db relative w-100 ph4 pv3 br1- bg-white black-50 hover-black pointer\"\n                              >\n                                <div id=\"\" className=\"db relative w-100\">\n                                  <span className=\"f5 fw6 ph3-\">\n                                    Cirriculum Vitae{\" \"}\n                                  </span>\n                                </div>\n                              </button>\n                              <button\n                                title=\"View or upload CV\"\n                                id=\"CV-button\"\n                                className=\"db relative w-100 ph4 pv3 br1- bg-white black-50 hover-black pointer\"\n                                // style={{ background: \"#e8e8ec\" }}\n                              >\n                                <div id=\"\" className=\"db relative w-100\">\n                                  <span className=\"f6 fw6 \">\n                                    Add to Network\n                                  </span>\n                                </div>\n                              </button>\n                              <button\n                                title=\"View or upload CV\"\n                                id=\"CV-button\"\n                                className=\"db relative w-100 ph4 pv3 br1- bg-white black-50 hover-black pointer\"\n                                // style={{ background: \"#e8e8ec\" }}\n                              >\n                                <div id=\"\" className=\"db relative w-100\">\n                                  <span className=\"f6 fw6 \">Send Message</span>\n                                </div>\n                              </button>\n                            </div>\n                          </section>\n                          <div className=\"flex flex-row -nsflex-column w-100 black-60 raleway flex-wrap items-center justify-start-ns justify-between pa4 bt b--black-05\">\n                            <div className=\"flex flex-column w--100 pb1-ns pb2 mr3\">\n                              <span className=\"flex-column flex f6 fw4 black-40 items-start\">\n                                <span\n                                  className=\"flex \n mb3\"\n                                >\n                                  Age\n                                </span>\n                                <span className=\"flex items-center justify-center f6 fw6 -ml3-ns black-50- white ph2 pv1 ba b--black-05 br1 -round bw1- bg-white-20- bg-black -ts-a tc ml2-\">\n                                  {moment().diff(\n                                    this.state.activeCrewMember.profile.dob,\n                                    \"years\"\n                                  )}\n                                </span>\n                              </span>\n                            </div>\n                            <div className=\"flex flex-column w--100 pb1-ns pb2 mr3\">\n                              <span className=\"flex-column flex f6 fw4 black-40 items-start\">\n                                <span\n                                  className=\"flex \n mb3\"\n                                >\n                                  Gender\n                                </span>\n                                <span className=\"flex items-center justify-center f6 fw6 -ml3-ns black-50- white ph2 pv1 ba b--black-05 br1 -round bw1- bg-white-20- bg-black -ts-a tc ml2-\">\n                                  {(this.state.activeCrewMember.profile\n                                    .gender &&\n                                    this.state.activeCrewMember.profile\n                                      .gender) ||\n                                    \"\"}\n                                </span>\n                              </span>\n                            </div>\n                            <div className=\"flex flex-column w--100 pb1-ns pb2 mr3\">\n                              <span className=\"flex-column flex f6 fw4 black-40 items-start\">\n                                <span\n                                  className=\"flex \n mb3\"\n                                >\n                                  Location\n                                </span>\n                                <span className=\"flex items-center justify-center f6 fw6 -ml3-ns black-50- white ph2 pv1 ba b--black-05 br1 -round bw1- bg-white-20- bg-black -ts-a tc ml2-\">\n                                  {this.userLocation()}\n                                </span>\n                              </span>\n                            </div>\n                          </div>\n\n                          <Bio\n                            user={this.state.activeCrewMember}\n                            editSkills={null}\n                            editBio={null}\n                            canEdit={false}\n                          />\n                        </>\n                      )}\n                    </div>\n                  )}{\" \"}\n                </>\n              </Drawer>\n\n              {/* {!this.props.dashboard && (\n                <div\n                  onClick={this.reload}\n                  className={\n                    (Fn.get(\"isMobile\") ? \" top-6vh \" : \"  \") +\n                    \" absolute top-0 right-0 pa4 pointer black-20- hover-black-40 flex flex-row items-center z-9 \"\n                  }\n                >\n                  <span className=\"mr2 f5 fw4 black-30\">\n                    {this.state.ready ? \"reload\" : \"loading\"}\n                  </span>{\" \"}\n                  {this.state.ready ? (\n                    <Icon icon=\"refresh\" iconSize={15} className=\"black-40\" />\n                  ) : (\n                    <Spinner size={15} className=\"black-40\" />\n                  )}\n                </div>\n              )} */}\n            </section>\n          </TransitionLayout>\n        )}\n      </AccountContext.Consumer>\n    );\n  }\n}\n\nexport default Network;\nNetwork.contextType = AccountContext;\n","import React from \"react\";\nimport { FilePond, registerPlugin } from \"react-filepond\";\n\n// Import FilePond styles\nimport \"filepond/dist/filepond.min.css\";\n\nimport FilePondPluginImageExifOrientation from \"filepond-plugin-image-exif-orientation\";\nimport FilePondPluginImagePreview from \"filepond-plugin-image-preview\";\nimport FilePondPluginFileRename from 'filepond-plugin-file-rename';\n\nimport \"filepond-plugin-image-preview/dist/filepond-plugin-image-preview.css\";\nimport Fn from \"../../../utils/fn/Fn.js\";\nimport AccountContext, {\n  AccountConsumer\n} from \"../../../utils/context/AccountContext.js\";\n\n// Register the plugins\nregisterPlugin(FilePondPluginFileRename, FilePondPluginImageExifOrientation, FilePondPluginImagePreview);\n\nconst mimetypes = [\n  { \"image/png\": \".png\" },\n  { \"image/jpg\": \".jpg\" },\n  { \"image/gif\": \".gif\" }\n];\n// Our app\nclass Filepond extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      // Set initial files, type 'local' means this is a file\n      // that has already been uploaded to the server (see docs)\n      files: []\n    };\n\n    this.handleInit = this.handleInit.bind(this);\n    this.updateFile = this.updateFile.bind(this);\n    this.handlePondFile = this.handlePondFile.bind(this);\n    this.onProcessFile = this.onProcessFile.bind(this);\n    this.renameFile = this.renameFile.bind(this)\n    // this.pond = React.createRef();\n  }\n  renameFile(file) {\n    console.log('renaming file',file);\n    let filename = Date.now().toString() +\"-\"+ file.name\n    console.log('new filename', filename)\n    return filename\n  }\n  componentDidMount() {\n    console.log(\"Filepond props\", this.props);\n  }\n  onProcessFile(\n    fieldName,\n    file,\n    metadata,\n    load,\n    error,\n    progress,\n    abort,\n    transfer,\n    options\n  ) {\n    console.log(\"onProcessFile\", file);\n\n  }\n  handleInit() {\n    console.log(\"FilePond instance has initialised\", this.pond);\n  }\n  updateFile(file) {\n    console.log('[[ File ]]', file)\n\n  }\n\n  async handlePondFile(error, file) {\n    if (error) {\n      console.log(\"Oh no\");\n      return;\n    }\n    if (file) {\n\n      console.log('file', file)\n\n\n\n      if (this.props.type === \"profileImage\") {\n        Fn.uploadProfileImage({ self: this, file: this.pond.getFile().file });\n      }\n\n      if (this.props.type === \"cv\") {\n        Fn.uploadCV({ self: this, file: this.pond.getFile().file });\n      }\n\n      if (this.props.type === \"WorkPortfolioImage\") {\n        let image = await Fn.uploadWorkPortfolioImage({\n          self: this,\n          file: this.pond.getFile().file\n        });\n        this.props.setImage(image);\n      }\n\n      console.log('filepond props', this.props)\n\n      if (this.props.type === \"files\") {\n        \n        console.log(\"[[ File ]]\", file);\n        console.log(\"[[ File ]]\", this.pond.getFile());\n\n        let files = await Fn.uploadProjectFiles({\n          parent: this.props.self,\n          self: this,\n          project: this.props.project,\n          file: this.pond.getFile().file,\n          fileType: this.pond.getFile().fileType\n        });\n\n        // this.setState({ files: [] });\n      }\n      if (this.props.type === \"projectAvatarUpload\") {\n        console.log(\"[[ File ]]\", file);\n\n        let files = await Fn.uploadProjectAvatar({\n          parent: this.props.self,\n          self: this,\n          project: this.props.project,\n          file: this.pond.getFile().file\n        });\n\n        this.setState({ files: [] });\n      }\n\n      if (this.props.type === \"calendar\") {\n        console.log(\"[[ File ]]\", file);\n\n        console.log(\"Event\", this.props.project);\n\n        let files = await Fn.uploadEventFiles({\n          parent: this.props.self,\n          self: this,\n          event: this.props.project.event,\n          file: this.pond.getFile().file\n        });\n\n        this.setState({ files: [] });\n      }\n    }\n  }\n  componentDidMount() {\n\n    console.log('this.pond', this.pond)\n\n  }\n  render() {\n    return (\n      <div className=\"FilePond-Wrapper flex flex-column w-100 \">\n        <FilePond\n          ref={ref => (this.pond = ref)}\n          files={this.state.files}\n          allowMultiple={true}\n          oninit={() => this.handleInit()}\n          fileRenameFunction={file => this.renameFile(file)}\n          onprocessfile={this.handlePondFile}\n          onupdatefile={this.handlePondFile}\n          multiple={true}\n          name=\"images\"\n          server=\"https://upload.crew20.devcolab.site/api/image\"\n          // server=\"http://localhost:3001/api/image\"\n        />\n\n        {/* <div onClick={() => this.pond.browse()} className=\"f5 fw5 black pa3 ba b--black-05 pointer mt4 mb4\">Browse</div>\n        <div onClick={() => this.setState({files: []})} className=\"f5 fw5 black pa3 ba b--black-05 pointer mt4 mb4\">Clear</div> */}\n      </div>\n    );\n  }\n}\nexport default Filepond;\nFilepond.contextType = AccountContext;\n","import React from 'react'\nimport Fn from '../../../../utils/fn/Fn.js'\nimport moment from 'moment';\nimport Linkify from 'react-linkify';\nimport { InView } from 'react-intersection-observer'\n\nvar GeoPattern = require(\"geopattern\");\nwindow.GeoPattern = GeoPattern;\n\nclass CommentListItem extends React.Component {\n\n    constructor(props) {\n\n        super(props)\n\n        this.state = {\n            author: {},\n            picture: null,\n            ready: false\n        }\n\n        this.authorData = this.authorData.bind(this)\n        this.author = this.author.bind(this)\n        this.isSameAuthorAsPreviousComment = this.isSameAuthorAsPreviousComment.bind(this)\n        this.isMe = this.isMe.bind(this)\n        this.messageIsSameDayAsPrevious = this.messageIsSameDayAsPrevious.bind(this)\n        this.authorData = this.authorData.bind(this)\n        this.checkForUrls = this.checkForUrls.bind(this)\n\n        // this.fetchAuthor = this.fetchAuthor.bind(this)\n    }\n\n    // async fetchAuthor() {\n\n    //     let authorId = this.props.item.author;\n\n    //     console.log('fetch author', authorId)\n\n    //     await Fn.fetchAuthor({ self: this, authorId: authorId })\n\n    // }\n    checkForUrls(text) {\n        function urlify(text) {\n            var urlRegex = /(https?:\\/\\/[^\\s]+)/g;\n            return text.replace(urlRegex, function (url) {\n                return '<a href=\"' + url + '\">' + url + '</a>';\n            })\n            // or alternatively\n            // return text.replace(urlRegex, '<a href=\"$1\">$1</a>')\n        }\n        // var text = \"Find me at http://www.example.com and also at http://stackoverflow.com\";\n        var html = urlify(text);\n        return html\n    }\n\n    avatar(user) {\n        // let profile = this.props.item.authorData.profile;\n        // let profile = this.state.author.profile;\n        // console.log('authors', this.props.authors)\n        // console.log('author', this.props.item.author)\n\n        // let user = this.props.authors.filter(a => a.id === this.props.item.author)[0]\n\n        if (user && user.profile && user.profile.picture) {\n            return user.profile.picture\n        }\n        else {\n            return 'https://cdn.shopify.com/s/files/1/2278/2351/products/W1151_GeometricPattern3_1024x1024.jpg?v=1510704914'\n        }\n    }\n\n    authorData() {\n\n        // console.log('CommentListItem props authordata ',this.props)\n        let authors = this.props.authors;\n        let authorId = this.props.item.author;\n        let author = authors.filter(a => a.id === authorId)[0];\n        let picture = author && author.profile.picture;\n        // console.log(' ')\n        // console.log(' ')\n        // console.log('authorData', authors.filter(a => a.id === authorId))\n        // console.log(' ')\n        // console.log(' ')\n\n        this.setState({ author: author, picture: picture })\n\n        setTimeout(() => {\n\n            this.setState({ ready: true })\n\n        }, 300)\n\n    }\n\n    author(id) {\n\n        // console.log('this.author() author data', this.props.authors.filter(a => a.id === id)[0])\n        return this.props.authors.filter(a => a.id === id)[0]\n\n    }\n    isMe() {\n        return this.props.item.author === this.props.me\n    }\n    isSameAuthorAsPreviousComment() {\n\n        let item = this.props.item;\n        let author = item.author;\n        let index = this.props.index;\n\n        let previous = (index - 1);\n\n        if (index > 0) {\n\n            // console.log('comment index check', index, 'previous', previous, 'items', this.props.items, 'items[previous]', this.props.items[previous])\n\n            let previousCommentAuthor = previous > 0 ? this.props.items[previous].author : this.props.items[0].author;\n\n            return author === previousCommentAuthor\n        }\n        else {\n\n            return false\n\n        }\n\n    }\n    messageIsSameDayAsPrevious() {\n\n        let item = this.props.item;\n        let items = this.props.items;\n        let index = this.props.index;\n\n        let current = this.props.index;\n        let previous = (index - 1);\n\n        let createdAt = item.createdAt;\n\n        if (index > 0) {\n\n            // console.log('items', items)\n            // console.log('index', index)\n            // console.log('previous', previous)\n            // console.log('createdAt', createdAt)\n            // console.log('items[previous]', items[previous])\n\n            let previousCreatedAt = items[previous].createdAt;\n\n            return moment(createdAt).isSame(previousCreatedAt, 'day')\n        }\n\n    }\n    componentDidMount() {\n\n        // console.log(' ')\n        // console.log(' ')\n        // console.log('commentListItem', this.props)\n        // console.log(' ')\n        // console.log(' ')\n\n        this.authorData()\n        // this.fetchAuthor()\n    }\n\n    render() {\n        return (\n            this.state.ready &&\n            <>\n                {\n                    !this.messageIsSameDayAsPrevious() &&\n                    <div className=\"flex flex-column f7 fw5 black-20 pb4 pt3 w-100 tc\">\n                        {\n                            moment(this.props.item.createdAt).format('ddd DD MMMM')\n                        }\n                    </div>\n                }\n\n                <InView as=\"div\" onChange={(inView, entry) => !this.props.item.seen.includes(this.props.me) && this.props.markAsSeen(this.props.item)}>\n\n\n                    <div\n                        // ref={(node) => {this[(this.props.id.toString())] = node}}\n                        id={this.props.item.id}\n                        className={\n                            (this.isMe() ? \"justify-end\" : \"justify-start\")\n                            + (!this.isSameAuthorAsPreviousComment() ? \" ph3 pb3 pt5 \" : \" ph3 pb3 shrink \")\n                            + (\" flex flex-row \")}>\n\n                        {!this.isSameAuthorAsPreviousComment() && !this.isMe() &&\n                            <div\n                                style={{\n                                    width: '50px',\n                                    height: '50px',\n                                    background:\n                                    this.props.authors.filter( a => a.id === this.props.item.author)[0].profile.picture.length && this.props.authors.filter( a => a.id === this.props.item.author)[0].profile.picture\n                                            ? \"url(\" + this.state.picture + \")\"\n                                            : GeoPattern.generate(this.props.authors.filter( a => a.id === this.props.item.author)[0].profile.name.first + this.props.authors.filter( a => a.id === this.props.item.author)[0].profile.name.last).toDataUrl()\n                                }}\n                                className=\"adjust-top flex flex-column bg-cover bg-center round mr2\" />\n                        }\n\n                        <div className=\"flex flex-column\">\n\n                            {!this.isSameAuthorAsPreviousComment() &&\n                                <span className={\n                                    (this.isMe()\n                                        ? \" tr \" : \" tl \")\n                                    + (\" flex flex-column f7 fw4 black-20 adjust-top pb1 \")}>\n\n                                    {moment(this.props.item.createdAt).format('HH:mm A')}\n\n                                </span>\n                            }\n                            <div\n                                key={this.props.item.createdAt}\n                                ref={this.props.ref}\n                                style={this.props.style}\n                                className={(this.isMe()\n                                    ? \"row-reverse justify-end message-list-item \"\n                                    : \" message-list-item justify-start \")\n                                    + (\" items-start- flex flex-row  ph3 pv2 br4 bg-light-blue mw7\")}\n                            >\n\n                                <div className={(this.isMe() ? \"tr\" : \" tl\") + (\" flex flex-column  w-100 f5 fw5 black-70 word-break-word\")}>\n\n                                    {/* {this.checkForUrls(this.props.item.text)} */}\n                                    <Linkify>{this.props.item.text}</Linkify>\n\n                                    <span className=\"f6 fw5 black-50\">\n                                        {this.props.item.author === this.props.me ? (!this.isSameAuthorAsPreviousComment() && \"me\") : this.props.authors.filter( a => a.id === this.props.item.author)[0].profile.name.first + \" \" + this.props.authors.filter( a => a.id === this.props.item.author)[0].profile.name.last} {\" \"}\n                                    </span>\n\n                                </div>\n\n                            </div>\n\n                        </div>\n\n                        {\n                            this.isMe() && (\n\n                                (\n                                    !this.isSameAuthorAsPreviousComment() || !this.messageIsSameDayAsPrevious())\n                                    ? <div\n                                    style={{\n                                        width: '50px',\n                                        height: '50px',\n                                        background:\n                                        this.props.authors.filter( a => a.id === this.props.item.author)[0].profile.picture.length && this.props.authors.filter( a => a.id === this.props.item.author)[0].profile.picture\n                                                ? \"url(\" + this.state.picture + \")\"\n                                                : GeoPattern.generate(this.props.authors.filter( a => a.id === this.props.item.author)[0].profile.name.first + this.props.authors.filter( a => a.id === this.props.item.author)[0].profile.name.last).toDataUrl()\n                                    }}\n                                        className=\"adjust-top flex flex-column bg-cover bg-center round ml2\" />\n                                    : <></>\n                            )\n\n                        }\n\n                    </div>\n\n                </InView>\n            </>\n        )\n    }\n}\nexport default CommentListItem","import React from \"react\";\nimport { getGlobal } from \"reactn\";\nimport io from \"socket.io-client\";\n\nimport { app, Fn, ui, api } from \"../../../../utils/fn/Fn\";\n\nimport AccountContext, {\n  AccountConsumer\n} from \"../../../../utils/context/AccountContext.js\";\n\nimport { Icon, message, Skeleton, Empty } from \"antd\";\nimport posed, { PoseGroup, Transition } from \"react-pose\";\nimport CommentListItem from \"./CommentListItem.js\";\n// import { InView } from 'react-intersection-observer'\n\n// const Component = () => (\n//   <InView as=\"div\" onChange={(inView, entry) => console.log('Inview:', inView)}>\n//     <h2>Plain children are always rendered. Use onChange to monitor state.</h2>\n//   </InView>\n// )\n\n// export default Component\nvar socket;\n// const ItemC = React.forwardRef((props, ref) => {\n//   return <InView as=\"div\" onChange={(inView, entry) => console.log('Inview:', inView)}>\n//  <CommentListItem {...props} ref={ref} />\n// </InView>;\n// });\nconst ItemC = React.forwardRef((props, ref) => {\n  return <CommentListItem {...props} ref={ref} />;\n});\nconst Item = posed(ItemC)({\n  enter: {\n    y: 0,\n    opacity: 1,\n    delay: 0,\n    transition: {\n      y: { type: \"spring\", stiffness: 1000, damping: 100 },\n      default: { duration: 300 }\n    }\n  },\n  exit: {\n    y: -50,\n    opacity: 1,\n    delay: 300,\n    transition: {\n      y: { type: \"spring\", stiffness: 1000, damping: 100 },\n      default: { duration: 300 }\n    }\n  }\n});\nconst List = posed.div({\n  enter: {\n    y: -50,\n    opacity: 1,\n    delay: 0,\n    transition: {\n      y: { type: \"spring\", ease: \"easeInOut\", stiffness: 1000, damping: 100 },\n      default: { duration: 300 }\n    }\n  },\n  exit: {\n    y: 500,\n    opacity: 0,\n    delay: 0,\n    transition: {\n      y: {\n        type: \"spring\",\n        stiffness: 1000,\n        damping: 100,\n        restDelta: 0.5,\n        restSpeed: 10\n      },\n      default: { duration: 300 }\n    }\n  }\n});\nconst TransitionItems = props => (\n  <Transition animateOnMount={true}>\n    {props.items.map((item, index) => (\n      <CommentListItem\n        enterAfterExit={true}\n        beforeChildren={true}\n        animateOnMount={true}\n        key={index}\n        item={item}\n        index={index}\n        {...props}\n      />\n    ))}\n  </Transition>\n);\n\n// const SOCKET_URI = 'http://localhost:8002';\n// const SOCKET_URI = \"http://3.135.242.213:8002\"\nconst SOCKET_URI = \"https://socketio.quantacom.co\";\n\nclass MBox extends React.Component {\n  socket = null;\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      ready: true,\n      messages: this.props.conversation.messages,\n      conversation: this.props.conversation,\n      stream: this.props.stream,\n      authors: []\n    };\n\n    // console.log('Messagebox', props)\n    this.avatar = this.avatar.bind(this);\n    this.submitMessage = this.submitMessage.bind(this);\n    this.addMessage = this.addMessage.bind(this);\n    this.submitMessage = this.submitMessage.bind(this);\n    this.initSocketConnection = this.initSocketConnection.bind(this);\n    this.onClientDisconnected = this.onClientDisconnected.bind(this);\n    this.onReconnection = this.onReconnection.bind(this);\n    this.setupSocketListeners = this.setupSocketListeners.bind(this);\n    this.onMessageRecieved = this.onMessageRecieved.bind(this);\n    this.onConnect = this.onConnect.bind(this);\n    this.scrollMessageBoxIntoView = this.scrollMessageBoxIntoView.bind(this);\n    this.getAuthors = this.getAuthors.bind(this);\n    this.markAsSeen = this.markAsSeen.bind(this)\n    // this.extractAuthors = this.extractAuthors.bind(this)\n\n    this.messageText = React.createRef();\n    this.messagesList = React.createRef();\n  }\n  markAsSeen = async (item) => {\n    // console.log('mark as seen => item',item)\n    let conversation = this.props.conversation;\n    // let messages = this.props.conversation.messages;\n    let index = conversation.messages.findIndex(a => a.id === item.id);\n\n    let seen = new Set()\n\n    seen.add(this.props.selfUserId)\n\n    conversation.messages[index].seen = [...seen]\n    // console.log('updated message ',conversation.messages[index])\n\n    await app.updateConversation({ self: this, conversation, updateTimestamp: false })\n\n  }\n  async extractAuthors() {\n    let messages = this.props.conversation.messages;\n\n    let authorIds = new Set();\n\n    for (let item of messages) {\n      authorIds.add(item.author);\n    }\n\n    let a = Array.from(authorIds);\n\n    this.setState({\n      authorIds: a\n    });\n\n    await Fn.fetchCommentAuthors({ self: this, authorIds: a });\n  }\n  async getAuthors() {\n    // conversation.authors = [];\n    let conversation = this.props.conversation;\n    let authors = [];\n\n    let participants = conversation.participants;\n\n    for (let author of participants) {\n      //   console.log(\" \");\n      //   console.log(\" \");\n      //   console.log(\" \");\n      //   console.log(\"[[ conv participant ]] \", author);\n      //   console.log(\" \");\n      //   console.log(\" \");\n      //   console.log(\" \");\n\n      let author_ = await fetch(Fn.api(\"users\") + author)\n        .then(res => {\n          return res.json();\n        })\n        .then(res => {\n          return res;\n        });\n\n      // console.log(\" \");\n      // console.log(\" \");\n      // console.log(\" \");\n      // console.log(\"[[ author_ ]] \", author_);\n      // console.log(\" \");\n      // console.log(\" \");\n      // console.log(\" \");\n\n      // console.log(\" \");\n      // console.log(\" \");\n      // console.log(\" \");\n      // console.log(\"[[ authors ]] \", conversation.authors);\n      // console.log(\" \");\n      // console.log(\" \");\n      // console.log(\" \");\n\n      authors.push(author_);\n    }\n    this.setState({\n      authors: authors,\n      ready: true\n    });\n  }\n  scrollMessageBoxIntoView() {\n    if (this.props.dashboard) {\n      !Fn.get(\"isMobile\") &&\n        document.querySelector(\"body\").scroll({\n          top: 475,\n          left: 0,\n          behavior: \"smooth\"\n        });\n    } else {\n      !Fn.get(\"isMobile\") &&\n        document.querySelector(\"body\").scroll({\n          top: 90,\n          left: 0,\n          behavior: \"smooth\"\n        });\n    }\n  }\n  addMessage = message =>\n    this.setState(state => ({ comments: [message, ...state.comments] }));\n\n  async submitMessage(e) {\n    e.preventDefault();\n\n    this.setState({\n      isSendingMessage: true\n    });\n\n    setTimeout(() => {\n      if (document.getElementById(\"MessagesList\")) {\n        document.getElementById(\"MessagesList\").scroll({\n          top: document.getElementById(\"MessagesList\").scrollHeight,\n          left: 0,\n          behavior: \"smooth\"\n        });\n      }\n    }, 500);\n\n    // on submitting the ChatInput form, send the message, add it to the list and reset the input\n    // const message = { author: this.state.name, message: messageString }\n\n    let authorId = this.context.account.user.id;\n    let randomId =\n      Math.random()\n        .toString(36)\n        .substring(2, 15) +\n      Math.random()\n        .toString(36)\n        .substring(2, 15);\n    let message = {\n      author: authorId,\n      text: this.messageText.current.value,\n      createdAt: new Date(),\n      messageId: randomId,\n      conversationId: this.props.conversation.id,\n      seen: []\n    };\n\n    console.log(\"message ]]\", message);\n\n    if (!this.props.conversation.hasOwnProperty(\"participants\")) {\n      this.props.conversation.participants = [Fn.get(\"account\").user.id];\n    }\n    let authorIds = this.props.conversation.participants;\n\n    if (!authorIds.includes(authorId)) {\n      // this.setState(this.state => ({ authorIds: [authorId, ...this.state.authorIds] }))\n\n      let authorIds = this.state.authorIds;\n\n      let a = new Set(authorIds);\n\n      a.add(authorId);\n\n      let b = Array.from(a);\n\n      this.setState({ authorIds: b });\n\n      await Fn.fetchCommentAuthor({ self: this, authorId: authorId });\n    }\n\n    this.socket.emit(\"message\", JSON.stringify(message));\n\n    this.messageText.current.value = null;\n\n    // setTimeout(() => {\n\n    //   if (document.getElementById('MessagesList')) {\n    //     document.getElementById('MessagesList').scroll({\n    //       top: 999999999999,\n    //       left: 0,\n    //       behavior: 'smooth'\n    //     });\n    //   }\n\n    // }, 500)\n  }\n\n  /**\n   *\n   * Shows error if client gets disconnected.\n   */\n  onClientDisconnected() {\n    // message.info('Connection Lost from server, please check your connection')\n    console.log(\"[[ Socket.io server disconnected. ]]\");\n    // NotificationManager.error(\n    //   \"Connection Lost from server please check your connection.\",\n    //   \"Error!\"\n    // );\n  }\n\n  /**\n   *\n   * Established new connection if reconnected.\n   */\n  onReconnection() {\n    // message.info('Server re-connected')\n    console.log(\"[[ Socket.io server reconnected. ]]\");\n    // if (this.state.user) {\n    //   // this.socket.emit(\"sign-in\", this.state.user);\n    //   // NotificationManager.success(\"Connection Established.\", \"Reconnected!\");\n    // }\n  }\n\n  onConnect() {\n    console.log(\" \", \" \", \" \", \" \");\n    console.log(\"[[ Socket.io server connected. ]]\");\n    console.log(\" \", \" \", \" \", \" \");\n\n    // message.info('Server re-connected')\n  }\n  /**\n   *\n   * Setup all listeners\n   */\n\n  setupSocketListeners() {\n    this.socket.on(\"ping\", () => console.log(\"ping\"));\n    this.socket.on(\"connect\", this.onConnect);\n    this.socket.on(\"message\", this.onMessageRecieved);\n    this.socket.on(\"reconnect\", this.onReconnection);\n    this.socket.on(\"disconnect\", this.onClientDisconnected);\n\n    this.socket.emit(\"register\", this.props.conversation.id);\n\n  }\n\n  /**\n   *\n   * @param {MessageRecievedFromSocket} message\n   *\n   * Triggered when message is received.\n   * It can be a message from user himself but on different session (Tab).\n   * so it decides which is the position of the message \"right\" or \"left\".\n   *\n   * increments unread count and appends in the messages array to maintain Chat History\n   */\n\n  async onMessageRecieved(message) {\n\n    // console.log(' ')\n    // console.log('Message Received', message)\n    // console.log(' ')\n\n    // let messages = this.state.messages\n    // let messages  = this.props.conversation.messages;\n\n    // Fn.get(\"activeConversation\");\n\n    // messages.push(JSON.parse(message))\n\n    // this.setState({ messages })\n\n    // let conversation = Fn.get(\"activeConversation\")\n    let conversation = this.props.conversation;\n\n    // conversation.messages = messages\n    conversation.messages.push(JSON.parse(message))\n    // console.log(\"onMessageReceived Mbox props\", this.props);\n\n    this.setState({\n      isSendingMessage: false\n    });\n\n    await app.updateConversation({ self: this, conversation }).then(conversation => {\n\n      // console.log('added message to conversation', conversation)\n\n      if (document.getElementById(\"MessagesList\")) {\n        document.getElementById(\"MessagesList\").scroll({\n          top: document.getElementById(\"MessagesList\").scrollHeight,\n          left: 0,\n          behavior: \"smooth\"\n        });\n      }\n      // setTimeout(() => {\n\n      // }, 500);\n    })\n\n\n\n\n    //  this.addMessage(message)\n  }\n  async avatar(item) {\n    // let authorId = item.author;\n    // return await Fn.fetchAuthor({ self: this, authorId: authorId })\n  }\n  initSocketConnection() {\n    this.socket = io.connect(SOCKET_URI);\n  }\n\n  async componentWillReceiveProps() {\n    // this.createMessageList()\n    // console.log('will receive props', this.props)\n    // await Fn.fetchCommentAuthors({ self: this, comments: this.props.project.comments })\n  }\n  componentDidUpdate() {\n    // console.log('MessageBox updated', this.props)\n  }\n  // componentWillReceiveProps() {\n  //   this.setState({\n  //     messages: [],\n  //     conversation: null\n  //   })\n  // }\n  async componentDidMount() {\n    document.querySelector(\"body\").scroll({\n      top: 0,\n      left: 0,\n      behavior: \"smooth\"\n    });\n\n    let scrollMessages = setInterval(() => {\n      if (document.getElementById(\"MessagesList\") !== null) {\n        document.getElementById(\"MessagesList\").scroll({\n          top: document.getElementById(\"MessagesList\").scrollHeight,\n          left: 0,\n          behavior: \"smooth\"\n        });\n        clearInterval(scrollMessages);\n      }\n    }, 250);\n\n    // let targetIndex = userChatData.findIndex(u => u.id === targetId);\n\n    // this.getAuthors();\n\n    this.initSocketConnection();\n\n    this.setupSocketListeners();\n\n\n\n    // this.socket.emit(\"register\", this.props.conversation.id);\n\n    // this.extractAuthors()\n    // console.log(\" \");\n    // console.log(\" \");\n    // console.log(\" \");\n    // console.log(\"MBox\", this.props);\n    // console.log(\" \");\n    // console.log(\" \");\n    // console.log(\" \");\n\n    setTimeout(() => {\n      if (document.getElementById(\"MessagesList\")) {\n        document.getElementById(\"MessagesList\").scroll({\n          top: document.getElementById(\"MessagesList\").scrollHeight,\n          left: 0,\n          behavior: \"smooth\"\n        });\n      }\n    }, 500);\n  }\n  render() {\n\n    // console.log('Mbox => Conversation ', this.props.conversation)\n    return (\n<>\n      <div\n            id=\"messageInput\"\n            style={{ background: \"#fdfdfd\" }}\n            className={\n              (this.props.inputPosition === \"fixed-bottom\" ? \" fixed bottom-0 left-0  \" : \"\")\n              + (this.props.inputPosition === \"standard\" ? \"   \" : \"\")\n              + (\" w-100 z-999-0 flex ph3 pv3 bb bt br b--black-05 \")}\n          >\n            <div\n              id=\"\"\n              className={\n                (this.props.size === \"small\"\n                  ? \"\"\n                  : \" bs-b br3- - round overflow-hidden \") +\n                (Fn.get(\"isMobile\")\n                  ? \"  isMobile bt- b--black-05 bs-a \"\n                  : \" isNotMobile bb b--black-05 \") +\n                \" message-input-wrapper flex -absolute -bottom-0 w-100 mw9 center\"\n              }\n            >\n              <form\n                onSubmit={this.submitMessage}\n                className=\"flex flex-row w-100 ma0\"\n              >\n                <div className=\"flex flex-column w-80\">\n                  <input\n                    onClick={this.scrollMessageBoxIntoView}\n                    required={true}\n                    placeholder={\"Enter text ...\"}\n                    ref={this.messageText}\n                    className=\"bn pv3 ph4 f4 fw5 black-30\"\n                    type=\"text\"\n                  ></input>\n                </div>\n                <div className=\"flex flex-column w-20 bl b--black-05\">\n                  <button\n                    type={\"submit\"}\n                    className=\"flex h-100 items-center justify-center f6 bg-white bn\"\n                  >\n                    <Icon type=\"arrow-right\" />\n                  </button>\n                </div>\n              </form>\n            </div>\n          </div>\n\n      <div\n        className={\n          (ui.mobile() ? \" bt- b--black-05 \" : \"  \") +\n          \" flex flex-column relative h-100 w-100 flex-auto \"\n        }\n      >\n        <div\n          className={\n            (ui.mobile() ? \" column-reverse \" : \"  \") +\n            \" flex flex-column relative h-100 w-100 flex-auto \"\n          }\n        >\n          \n          {/* {\n                !this.state.ready &&\n\n                <div className=\"trans-a ph4\">\n                  <Skeleton active />\n                  <Skeleton active />\n                </div>\n\n              } */}\n\n          {!this.state.ready && (\n            <div className=\"pa3\">\n              <div className=\"trans-a ph4 ph0-ns bg-light-blue pulse\">\n                {/* <Skeleton active />\n                <Skeleton active /> */}\n              </div>\n            </div>\n          )}\n\n          {this.state.ready && this.props.conversationReady && (\n            <>\n              <div\n                style={{ background: \"#fdfdfd\" }}\n                className={\n                  (ui.mobile() ? \" mh-74vh overflow-scroll \" : \"  \") +\n                  \" mh-75vh relative flex flex-auto flex-column w-100 bg-center bg-cover items-start justify-start relative overflow-hidden \"\n                }\n              >\n                {this.props.conversation.messages.length > 0 ? (\n\n                  <List\n                    ref={this.messagesList}\n                    animateOnMount={true}\n                    id=\"MessagesList\"\n                    className={\n                      (this.props.type === \"discussion-large\" ? \" vh64 \" : \"\") +\n                      (this.props.type === \"project-overview\" ? \" vh50 \" : \"\") +\n                      (this.props.type === \"calendar-event\" ? \" vh64 \" : \"\") +\n                      \" vh47- messages-list mh-150--vh db relative overflow-auto w-100 pa3 \"\n                    }\n                  >\n                    {\n                      this.props.ready &&\n                      <TransitionItems\n                        items={this.props.conversation.messages}\n                        authors={this.props.conversation.authors}\n                        fetchAuthor={this.fetchAuthor}\n                        markAsSeen={this.markAsSeen}\n                        // projectOwnerId={this.props.project.owner}\n                        me={this.context.account.user.id}\n                        isSendingMessage={this.state.isSendingMessage}\n\n\n                      />\n                    }\n\n                    {this.state.isSendingMessage && (\n                      <div className=\"ph3 pv2 flex flex-row items-end justify-end\">\n                        <div className=\"pulsating-dot small mr3\"></div>\n                      </div>\n                    )}\n                  </List>\n                ) : (\n                    <div className=\"flex flex-column pv3 f6 fw5 black-40 tc w-100\">\n                      No messages yet\n                  </div>\n                  )}\n              </div>\n            </>\n          )\n            // : <div className=\"flex flex-column flex-auto h-100 w-100 items-center justify-center\">\n            //   <div className=\"trans-a ph4\">\n            //     <Skeleton active />\n            //     <Skeleton active />\n            //   </div>\n            // </div>\n          }\n        </div>\n      </div>\n      </>\n    );\n  }\n}\n\nexport default MBox;\nMBox.contextType = AccountContext;\n","// @flow\nimport React, { Component } from \"react\";\nimport Fn from \"../../../../utils/fn/Fn\";\n// import PropTypes from 'prop-types';\nvar GeoPattern = require(\"geopattern\");\nwindow.GeoPattern = GeoPattern;\n\nclass ConversationItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hasError: false,\n      ready: true,\n      // data: {},\n      // recipientData: {},\n      recipientId: this.props.item.participants.filter(a => a.id !== this.props.selfUserId)[0],\n      conversation: null,\n      author: this.props.item.authors.filter(a => a.id !== this.props.item.participants.filter(a => a.id !== this.props.selfUserId)[0])[0],\n      authors: this.props.item.authors,\n      picture: this.props.item.authors.filter(a => a.id !== this.props.item.participants.filter(a => a.id !== this.props.selfUserId)[0])[0].profile.picture,\n      multi: false\n    };\n\n    // this.recipientData = this.recipientData.bind(this);\n    // this.isActive = this.isActive.bind(this);\n\n    // this.fetchRecipientData = this.fetchRecipientData.bind(this)\n  }\n\n  // async recipientData() {\n\n  //   const multi = this.state.multi;\n\n  //   if (multi) {\n      \n  //     let recipientId = this.props.item.participants.filter(a => a.id !== this.props.selfUserId)[0]\n      \n  //     let authors = this.props.item.authors;\n\n  //     let author = this.props.item.authors.filter(a => a.id === recipientId)[0];\n\n  //     let picture = author && author.profile.picture;\n\n  //     if (author) {\n  //       this.setState({ author: author, picture: picture, ready: true });\n  //     }\n  //   }\n  //   if (!multi) {\n\n  //     let recipientId = this.props.item.participants.filter(a => a.id !== this.props.selfUserId)[0]\n      \n  //     let authors = this.props.item.authors;\n\n  //     let author = this.props.item.authors.filter(a => a.id === recipientId)[0];\n\n  //     let picture = author && author.profile.picture;\n\n  //     if (author) {\n  //       this.setState({ author: author, picture: picture, ready: true });\n  //     }\n  //   }\n  // }\n  componentDidUpdate() {\n    // console.log(' ')\n    // console.log(' ')\n    // console.log('ConversationItem updated', this.props)\n    // console.log(' ')\n    // console.log(' ')\n  }\n\n  // isActive() {\n  //   console.log(\" \");\n  //   // console.log(' ')\n  //   // console.log('isActive', this.props, this.props.conversation.id, this.props.item.id, this.props.conversation.id === this.props.item.id)\n  //   // console.log(' ')\n  //   // console.log(' ')\n\n  //   return this.props.conversation.id === this.props.activeConversation.id;\n  // }\n  componentDidMount = () => {\n    // console.log(\"ConversationItem mounted\", this.props);\n    // console.log(\n    //   \"Participants > 2\",\n    //   this.props.item.participants.length > 2 && this.props.item.participants\n    // );\n    // if (this.props.item.participants.length > 2) {\n    //   this.setState({\n    //     multi: true\n    //   });\n    //   // console.log(' ')\n    //   // console.log(' ')\n    //   // console.log('conv data', this.props.item)\n    //   // console.log(' ')\n    //   // console.log(' ')\n    // }\n\n    // this.recipientData();\n\n    // this.fetchRecipientData(this.props.item)\n  };\n\n  render() {\n    // const { multi } = this.state;\n\n    if (this.state.hasError) {\n      return <h1>Something went wrong.</h1>;\n    }\n    return (\n      this.state.ready && (\n        <div\n          onClick={() =>\n            this.props.selectConversation({\n              conversation: this.props.item,\n              // activeConversation: this.props.item\n            })\n          }\n          id={this.props.item.id}\n          className={\n            ( this.props.conversation.id === this.props.activeConversation.id ? \" bg-light-blue \" : \" bg-white \") +\n            \" pointer conversation-item flex flex-column w-100\"\n          }\n        >\n\n          {!this.props.item.group && (\n            <div\n              className={\n                ( this.props.conversation.id === this.props.activeConversation.id ? \"  \" : \" bb b--black-05 \") +\n                \" flex flex-row items-center pv3 ph4 \"\n              }\n            >\n              <div className=\"conversation-recipient-avatar flex flex-row\">\n                <div className=\" pointer flex flex-column pv2 pr3 items-center justify-center\">\n                  <div\n                    className=\"cover bg-center\"\n                    style={{\n                      width: \"50px\",\n                      height: \"50px\",\n                      borderRadius: \"100px\",\n                      boxShadow: \"0 0px 0px 6px #ffffff9e\",\n                      background:\n                      this.state.picture.length\n                      ? \"url('\" +  this.state.picture + \"')\"\n                      : GeoPattern.generate( ( this.state.author && this.state.author.profile && this.state.author.profile.name.first ) + ( this.state.author && this.state.author.profile && this.state.author.profile.name.last )).toDataUrl()\n                    }}\n                  />\n                </div>\n              </div>\n\n              <div className=\" flex flex-column items-start justify-center\">\n                <div className=\" raleway -raleway flex flex-row  fw6\">\n                  <div className=\" flex f5 fw5- black-70 \">\n                    { this.state.author && this.state.author.profile && this.state.author.profile.name.first}\n                  </div>\n                  <div className=\" flex f5 fw5- ml1 black-70\">\n                    { this.state.author && this.state.author.profile && this.state.author.profile.name.last}\n                  </div>\n                </div>\n\n                <div className=\" flex flex-row pt1\">\n                  <div className=\" raleway flex f6 fw5 black-20 \">\n                    { this.state.author && this.state.author.profile && this.state.author.profile && this.state.author.profile.additional.role}\n                  </div>\n                </div>\n              </div>\n\n              <div className=\" flex flex-row w-100\"></div>\n            </div>\n          )}\n\n          {this.props.item.group && (\n            <div\n              className={\n                (this.isActive() ? \"  \" : \" bb b--black-05 \") +\n                \" flex flex-row items-center pv3 ph4 \"\n              }\n            >\n              <div className=\"conversation-recipient-avatar flex flex-row justify-between w-100\">\n                <div className=\" pointer flex flex-row pv2 pr3 items-center justify-start\">\n\n                <div\n                        className=\"cover bg-center mh2- \"\n                        style={{\n                          width: \"50px\",\n                          height: \"50px\",\n                          borderRadius: \"100px\",\n                          boxShadow: \"0 0px 0px 6px #ffffff9e\",\n                          background:\n                          GeoPattern.generate( this.props.item.name ).toDataUrl()\n                        }}\n                      />\n                      \n                </div>\n                <div className=\" flex flex-column w-100 items-start justify-center\">\n                <div className=\" raleway -raleway flex flex-row  fw6\">\n                  <div className=\" flex f5 fw5- black-70 \">\n                    { this.props.item.name }\n                  </div>\n                 \n                </div>\n                </div>\n\n                <div className=\"flex w-40 flex-row items-center\">\n                  {this.props.item.authors && this.props.item.authors.length && this.props.item.authors\n                    .filter(a => a.id !== this.props.item.author)\n                    .map((item, index) => (\n                      <div\n                        className=\"cover bg-center mh2\"\n                        style={{\n                          width: \"30px\",\n                          height: \"30px\",\n                          borderRadius: \"100px\",\n                          backgroundImage:\n                            'url(\"' + item.profile.picture + '\")',\n                          boxShadow: \"0 0px 0px 6px #ffffff9e\"\n                        }}\n                      />\n                    ))}\n                    </div>\n\n              </div>\n            </div>\n          )}\n        </div>\n      )\n    );\n  }\n}\n\nexport default ConversationItem;\n","// @flow\nimport React, { Component } from \"react\";\nimport AccountContext, {\n  AccountConsumer\n} from \"../../../../utils/context/AccountContext.js\";\nimport PageTitle from \"../../../elements/layout/PageTitle_B.js\";\nimport FilePond from \"../../../elements/upload/Filepond.js\";\nimport { Drawer, Skeleton, Checkbox } from \"antd\";\nimport { SearchBar } from \"antd-mobile\";\nimport { Icon, Spinner, Dialog } from \"@blueprintjs/core\";\nimport MBox from \"../../../elements/display/messages/MBox.js\";\nimport { Fn, app } from \"../../../../utils/fn/Fn.js\";\nimport ConversationItem from \"../../../a/Conversations/ConversationItem/index.js\";\nimport \"./style.css\";\nimport Transition from \"../../../Layouts/Transition.js\";\nimport moment from 'moment';\nimport Loading from '../../../elements/Loading.js';\n\n\nvar GeoPattern = require(\"geopattern\")\nwindow.GeoPattern = GeoPattern\n\nclass Messages extends React.Component {\n  \n  constructor(props) {\n    \n    super(props)\n\n    this.state = {\n      hasError: false,\n      drawerOpen: false,\n      activeFile: {},\n      ready: false,\n      conversationReady: false,\n      activeStream: {},\n      streams: [],\n      activeConversation: [],\n      activeConversationIndex: 0,\n      conversations: [],\n      connections: [],\n      connectionsReady: false,\n      isOpen: false,\n      checked: [],\n      group: [],\n      buttonLoading: false,\n      isSendingMessage: false\n      // isMobil\n    };\n\n    this.toggleDrawer = this.toggleDrawer.bind(this);\n    this.toggleDialog = this.toggleDialog.bind(this);\n    this.openFilePanel = this.openFilePanel.bind(this);\n    this.fetchConnections = this.fetchConnections.bind(this);\n\n    this.selectConversation = this.selectConversation.bind(this);\n    this.updateActiveConversation = this.updateActiveConversation.bind(this);\n    this.setActiveConversation = this.setActiveConversation.bind(this);\n    // this.updateConversations = this.updateConversations.bind(this)\n    this.activateSearch = this.activateSearch.bind(this);\n    this.extractAuthors = this.extractAuthors.bind(this);\n    this.reload = this.reload.bind(this);\n    this.start = this.start.bind(this);\n    this.newConveration = this.newConversation.bind(this);\n    this.groupChat = this.groupChat.bind(this);\n    this.newChat = this.newChat.bind(this);\n    this.addUserToGroupChat = this.addUserToGroupChat.bind(this);\n    this.startGroupChat = this.startGroupChat.bind(this);\n    this.messageFullScreen = this.messageFullScreen.bind(this);\n    this.markAllAsSeen = this.markAllAsSeen.bind(this)\n\n    this.chatGroupName = React.createRef()\n\n  }\n  // newCo3nversation(user) {\n  //   let\n  // }\n  markAllAsSeen = async(conversation) => {\n\n\n    let currentUserId = Fn.get('account').user.id;\n\n    for(let item of conversation.messages) {\n      item.seen.push(currentUserId)\n    }\n\n    await app.updateConversation({ self: this, conversation, updateTimestamp: false })\n\n\n  }\n  componentWillReceiveProps() {\n    // let conversations = this.state.conversations;\n    // let sorted = conversations.sort((a, b) => b.updatedAt.unix() - a.updatedAt.unix())\n    // this.setState({\n    //   conversations: conversations\n    // })\n  }\n  messageFullScreen() {\n\n    var elem = document.getElementById(\"MessageBox\")\n\n    if (document.webkitFullscreenElement) {\n      document.webkitCancelFullScreen();\n    } else {\n      elem.webkitRequestFullScreen();\n    }\n\n  }\n  async startGroupChat() {\n    this.setState({\n      buttonLoading: true\n    });\n\n    let groupName = this.chatGroupName.current.value;\n    let author = Fn.get('account').user;\n\n    let users = this.state.group;\n    let users_ = new Set();\n    users_.add(author)\n    // console.log(\"users_ Set\", users_);\n    for (let user of users) {\n      users_.add(user);\n      // console.log(\"user\", user);\n    }\n    let type = \"main\";\n    // console.log(\"users_ Set\", users_);\n    let u = Array.from(users_);\n    await Fn.createGroupConversation({ self: this, users: u, type, name: groupName });\n  }\n  addUserToGroupChat(config) {\n    const { user, index } = config;\n    let checked = this.state.checked;\n    checked[index] = !this.state.checked[index];\n    let group = this.state.group;\n    group.push(user);\n    this.setState({\n      checked: checked,\n      group: group\n    });\n  }\n  newChat() {\n    this.setState({\n      dialogType: \"single\"\n    });\n    this.toggleDialog();\n  }\n  async groupChat() {\n    this.setState({\n      dialogType: \"multi\"\n    });\n    this.toggleDialog();\n\n    let connections = Fn.get(\"account\").user.profile.connections;\n    let checked = new Array(connections.length).fill(false);\n    await app\n      .fetchConnections({ self: this, connections: connections })\n      .then(connections_ => {\n        this.setState({\n          connections: connections_,\n          connectionsReady: true,\n          checked: checked\n        });\n      });\n  }\n  async newConversation(user) {\n    // console.log(\"doc\", data);\n\n    let selfUserId = this.context.account.user.id;\n\n    let recipientId = user.id;\n    let type = \"main\";\n\n    // let participants = [selfUserId, recipientId];\n\n    const conversationExists = await Fn.checkConversationExists({\n      self: this,\n      selfUserId,\n      recipientId\n    });\n\n    if (!conversationExists.exists) {\n      // console.log('participants',participants)\n\n      await Fn.createNewConversation({\n        self: this,\n        selfUserId,\n        recipientId,\n        type\n      });\n      this.toggleDialog()\n      this.reload();\n      // this.props.history.push(\"/messages\");\n    } else {\n      // Fn.getConversationData({})\n      Fn.store({\n        label: \"activeConversation\",\n        value: conversationExists.conversation\n      });\n      this.toggleDialog()\n      this.reload();\n      // this.props.history.push(\"/messages\");\n    }\n\n    // return await Fn.sendMessage({ doc, self: this })\n  }\n  toggleDialog() {\n    this.setState({\n      isOpen: !this.state.isOpen\n    });\n  }\n  async reload() {\n    this.setState({ ready: false });\n    setTimeout(() => {\n      this.start();\n    }, 500);\n  }\n  async fetchConnections() {\n\n\n    let connections = Fn.get(\"account\").user.profile.connections;\n    // let checked = new Array(connections.length).fill(false);\n    await app\n      .fetchConnections({ self: this, connections: connections })\n      .then(connections_ => {\n        this.setState({\n          connections: connections_,\n          connectionsReady: true\n          // checked: checked\n        });\n      });\n\n\n  }\n  async start() {\n    let self = this;\n    let type =\n      typeof this.props.type !== \"undefined\" ? this.props.type : \"main\";\n\n    await this.fetchConnections();\n\n    await app.fetchConversations({\n      self: this,\n      userId: this.context.account.user.id,\n      type: 'private'\n    }).then(async conversations => {\n\n      // console.log(\"fetchConversations response \", conversations);\n\n      for (let conversation of conversations) {\n\n        conversation.authors = []\n\n        let participants = conversation.participants;\n\n        for (let author of participants) {\n\n          // console.log(\" \");\n          // console.log(\" \");\n          // console.log(\" \");\n          // console.log(\"[[ conv participant ]] \", author);\n          // console.log(\" \");\n          // console.log(\" \");\n          // console.log(\" \");\n\n          // let author_ = await fetch(Fn.api(\"users\") + author)\n          //   .then(res => {\n          //     return res.json();\n          //   })\n          //   .then(res => {\n          //     return res;\n          //   });\n\n          let author_ = await Fn.fetchUser({ self: this, userId: author }).then(user => {\n            return user\n          })\n\n          // console.log(\" \");\n          // console.log(\" \");\n          // console.log(\" \");\n          // console.log(\"[[ author_ ]] \", author_);\n          // console.log(\" \");\n          // console.log(\" \");\n          // console.log(\" \");\n\n          // console.log(\" \");\n          // console.log(\" \");\n          // console.log(\" \");\n          // console.log(\"[[ authors ]] \", conversation.authors);\n          // console.log(\" \");\n          // console.log(\" \");\n          // console.log(\" \");\n\n          conversation.authors.push(author_);\n\n        }\n      }\n\n      // self.setState({\n      //   conversations: res,\n      //   activeConversation: res[0]\n      // });\n\n      // console.log(\" \");\n      // console.log(\" \");\n      // console.log(\" \");\n      // console.log(\"[[ updated conversations ]] \", conversations);\n      // console.log(\" \");\n      // console.log(\" \");\n      // console.log(\" \");\n\n      self.setState({\n        conversations: conversations,\n        activeConversation: conversations[0],\n        ready: true,\n        conversationReady: true\n      });\n\n      setTimeout(() => {\n        if (document.getElementById(\"MessagesList\")) {\n          document.getElementById(\"MessagesList\").scroll({\n            top: 999999999999,\n            left: 0,\n            behavior: \"smooth\"\n          });\n        }\n      }, 500);\n    });\n\n    if (localStorage.getItem(\"activeConversation\") !== null) {\n      // console.log(\"activeConversation\", Fn.get(\"activeConversation\"));\n\n      // console.log(\"history\", this.props.history);\n\n      this.setActiveConversation();\n    }\n\n    // console.log(\"Messages mounted : props\", this.props);\n\n    // console.log(\"Messages mounted : state\", this.state);\n  }\n\n  async extractAuthors() {\n    let messages = this.props.conversation.messages;\n\n    let authorIds = new Set();\n\n    for (let item of messages) {\n      authorIds.add(item.author);\n    }\n\n    let a = Array.from(authorIds);\n\n    this.setState({\n      authorIds: a\n    });\n\n    await Fn.fetchCommentAuthors({ self: this, authorIds: a });\n  }\n\n  activateSearch() {\n    this.setState({\n      messageSearchActive: true\n    });\n  }\n\n  updateActiveConversation(data) {\n\n    const { conversations, activeConversation } = data;\n\n    this.setState({\n      activeConversation: activeConversation,\n      conversations: conversations\n    });\n  }\n  async selectConversation(data) {\n\n    const { conversation } = data;\n\n    this.setState({\n      conversationReady: false,\n      activeConversation: conversation\n    });\n\n    // console.log(\"select conversation\", data);\n\n    // this.setState({\n    //   activeConversation: conversation\n    // });\n\n    Fn.set(\"activeConversation\", conversation)\n\n    setTimeout(() => {\n\n      this.setState({\n        conversationReady: true\n      })\n\n    }, 100)\n\n    // setTimeout(() => {\n    // }, 500);\n\n    Fn.get(\"isMobile\") && this.setState({ drawerOpen: false });\n\n    setTimeout(() => {\n      if (document.getElementById(\"MessagesList\")) {\n        document.getElementById(\"MessagesList\").scroll({\n          top: 999999999999,\n          left: 0,\n          behavior: \"smooth\"\n        });\n      }\n    }, 500);\n  }\n  setActiveConversation() {\n    let a = setInterval(() => {\n      if (localStorage.getItem(\"activeConversation\") !== null) {\n        if (\n          this.state.ready &&\n          Fn.get(\"activeConversation\") !== null &&\n          Fn.get(\"activeConversation\") !== {}\n        ) {\n          let active = Fn.get(\"activeConversation\").id;\n\n          let conversations = this.state.conversations;\n\n          // console.log(\"Conversations to filter \", conversations);\n\n          let filtered = conversations.filter(c => c.id === active);\n\n          // console.log(\"filtered \", filtered);\n\n          if (filtered.length > 0) {\n            this.setState({ activeConversation: filtered[0] });\n          } else {\n            this.setState({ activeConversation: conversations[0] });\n          }\n\n          this.markAllAsSeen(conversations[0])\n\n          clearInterval(a);\n        }\n      }\n    }, 200);\n  }\n\n  openFilePanel(file) {\n    this.setState({\n      activeFile: file\n    });\n    this.toggleDrawer();\n  }\n\n  toggleDrawer() {\n    this.setState({\n      drawerOpen: !this.state.drawerOpen\n    });\n  }\n  closeDialog() {\n    this.setState({\n      isOpen: false\n    });\n  }\n  componentDidMount = async () => {\n    this.start();\n    // let connections = Fn.get(\"account\").user.profile.connections;\n    // let connections = Fn.get(\"connections\");\n    // let checked = new Array(connections.length).fill(false);\n\n    this.setState({\n      // connections: connections,\n      // connectionsReady: false,\n      // checked: checked\n    });\n\n    this.context.setPage({ title: \"Messages\", subtitle: \"...\"})\n\n\n  };\n  render() {\n    const dialogTypes = [\"single\", \"multi\"]\n    const emptyArray = []\n    const selfUserId = Fn.get('account').user.id;\n    if (this.state.hasError) {\n      return <h1>Something went wrong.</h1>;\n    }\n    return (\n      <>\n        {!this.state.ready && !this.props.dashboard && <Loading />}\n        <section\n          id=\"Messages\"\n          className={\n            (this.props.padding !== false ? \"  pa4-ns \" : \"  \") +\n            \" flex flex-column w-100 mw8 center pv4- ph0 pb6- mt3- \"\n          }\n        >\n\n\n          <div className=\"flex flex-row justify-between bs-b bs-none-ns\">\n            {/* <div className=\"flex flex-column ph4 ph0-ns mb3 mt3- -mt3-ns mb4-ns\">\n              <PageTitle\n                title={\"Messaging\"}\n                docs={this.state.conversations}\n                ready={this.state.ready}\n              />\n            </div> */}\n            {\n              <div className=\"flex flex-row ph4 ph0-ns mb3 mt3- -mt3-ns mb4-ns\">\n                <button\n                  className=\"br1- round bs-b bg-black-20 ph3 pv2 pointer bn relative \"\n                  onClick={this.newChat}\n                >\n                  <span className=\"f5 fw6 white pv0 flex items-center justify-center\">\n                    New Message\n                  </span>\n                </button>\n                <button\n                  className=\"br1- round bs-b bg-black-20 ph3 pv2 pointer bn relative ml3 \"\n                  onClick={this.groupChat}\n                >\n                  <span className=\"f5 fw6 white pv0 flex items-center justify-center\">\n                    Group Chat\n                  </span>\n                </button>\n\n                <button\n                  className=\"bg-transparent ph3 pv2 pointer bn relative ml3 \"\n                  onClick={this.messageFullScreen}\n                >\n                  <Icon\n                    icon={\"fullscreen\"}\n                    iconSize={15}\n                    className=\"black-30\"\n                  />\n                </button>\n              </div>\n            }\n\n            {/* {!this.props.dashboard && (\n              <div\n                onClick={this.reload}\n                className={\n                  (Fn.get(\"isMobile\") ? \" -top-6vh \" : \" top-6vh \") +\n                  \" absolute top-0 right-0 pa4 pointer black-20- hover-black-40 flex flex-row items-center z-9 \"\n                }\n              >\n                <span className=\"mr2 f5 fw4 black-30\">\n                  {this.state.ready ? \"reload\" : \"loading\"}\n                </span>{\" \"}\n                {this.state.ready ? (\n                  <Icon icon=\"refresh\" iconSize={15} className=\"black-40\" />\n                ) : (\n                  <Spinner size={15} className=\"black-40\" />\n                )}\n              </div>\n            )} */}\n\n            {Fn.get(\"isMobile\") && (\n              <div\n                className={\n                  \"  recipientList flex flex-row bg-transparent ph4 bt b--black-05 pv3 \"\n                }\n              >\n                <div\n                  onClick={this.toggleDrawer}\n                  className=\"pointer flex flex-row ph0 pv2 f5 fw6 white-80 -black-50 w-100 justify-center items-center ba- bg-black-20 b--black-05- ph4 tc round bs-a\"\n                >\n                  <span className=\"flex\">Select recipient</span>\n                  <Icon\n                    icon=\"follower\"\n                    iconSize={15}\n                    className=\"white-40 -black-20 ml3\"\n                  />\n                </div>\n              </div>\n            )}\n          </div>\n\n          {this.state.ready && this.state.conversations.length === 0 && (\n            <div\n              className=\"flex flex-row ph0 pb3 items-center justify-start\"\n              id=\"\"\n            >\n              <span className=\"f6 fw5 black-50 pv2 ph3 ba b--black-05\">\n                You have not started any conversations yet\n              </span>\n            </div>\n          )}\n\n          <div\n            id=\"MessageBox\"\n            className={\n              (Fn.get(\"isMobile\") ? \" flex-column \" : \" flex-row br4 \") +\n              \"  flex-row br4- flex flex-wrap justify-between overflow-hidden bg-white mb5  bs-b \"\n            }\n          >\n            {!Fn.get(\"isMobile\") && (\n              <div\n                className={\n                  (this.props.dashboard === true ? \" w-30 \" : \" w-30 \") +\n                  (Fn.get(\"isMobile\") ? \" w-100  \" : \"  \") +\n                  \" recipientList flex flex-column bg-white br b--black-05\"\n                }\n              >\n                {/* <div\n                  className=\"flex ph3 pv3 bb bt br b--black-05\"\n                  style={{ background: \"#fdfdfd\" }}\n                >\n                  <div\n                    id=\"\"\n                    className=\" bs-b br3 -round overflow-hidden  isNotMobile bb b--black-05  message-input-wrapper flex -absolute -bottom-0 w-100 \"\n                  >\n                    <form className=\"flex flex-row w-100 ma0\">\n                      <div className=\"flex flex-column w-80\">\n                        <input\n                          required=\"\"\n                          placeholder=\"Search users\"\n                          className=\"bn pv3 ph4 f4 fw5 black-30\"\n                          type=\"text\"\n                        />\n                      </div>\n                      <div className=\"flex flex-column w-20 bl b--black-05\">\n                        <button\n                          type=\"submit\"\n                          className=\"flex h-100 items-center justify-center f6 bg-white bn\"\n                        >\n                          +\n                        </button>\n                      </div>\n                    </form>\n                  </div>\n                </div> */}\n                {/* const myData = [].concat */}\n\n                {this.state.ready &&\n                  this.state.conversations.length > 0 &&\n                  this.state.conversations.sort((a, b) => moment(b.updatedAt) - moment(a.updatedAt)).map((item, index) => (\n                    <Transition>\n               \n                    <div\n                      onClick={() => {\n                        this.selectConversation({\n                          conversation: item,\n                          // activeConversation: item\n                        })\n                      }\n                      }\n                      id={item.id}\n                      className={\n                        (item.id === this.state.activeConversation.id ? \" bg-light-blue \" : \" bg-white \") +\n                        \" pointer conversation-item flex flex-column w-100\"\n                      }\n                    >\n\n                      {!item.group && (\n                        <div\n                          className={\n                            (item.id === this.state.activeConversation.id ? \"  \" : \" bb b--black-05 \") +\n                            \" flex flex-row items-center pv3 ph4 \"\n                          }\n                        >\n                          <div className=\"conversation-recipient-avatar flex flex-row\">\n                            <div className=\" pointer flex flex-column pv2 pr3 items-center justify-center\">\n                              <div\n                                className=\"cover bg-center\"\n                                style={{\n                                  width: \"50px\",\n                                  height: \"50px\",\n                                  borderRadius: \"100px\",\n                                  boxShadow: \"0 0px 0px 6px #ffffff9e\",\n                                  background:\n                                    item.authors.filter(a => a.id !== item.participants.filter(a => a.id !== selfUserId)[0])[0].profile.picture.length\n                                      ? \"url('\" + item.authors.filter(a => a.id !== item.participants.filter(a => a.id !== selfUserId)[0])[0].profile.picture + \"')\"\n                                      : GeoPattern.generate((item.authors.filter(a => a.id !== item.participants.filter(a => a.id !== selfUserId)[0])[0] && item.authors.filter(a => a.id !== item.participants.filter(a => a.id !== selfUserId)[0])[0].profile && item.authors.filter(a => a.id !== item.participants.filter(a => a.id !== selfUserId)[0])[0].profile.name.first) + (item.authors.filter(a => a.id !== item.participants.filter(a => a.id !== selfUserId)[0])[0] && item.authors.filter(a => a.id !== item.participants.filter(a => a.id !== selfUserId)[0])[0].profile && item.authors.filter(a => a.id !== item.participants.filter(a => a.id !== selfUserId)[0])[0].profile.name.last)).toDataUrl()\n                                }}\n                              />\n                            </div>\n                          </div>\n\n                          <div className=\" flex flex-column items-start justify-center\">\n                            <div className=\" raleway -raleway flex flex-row  fw6\">\n                              <div className=\" flex f5 fw5- black-70 \">\n                                {item.authors.filter(a => a.id !== item.participants.filter(a => a.id !== selfUserId)[0])[0] && item.authors.filter(a => a.id !== item.participants.filter(a => a.id !== selfUserId)[0])[0].profile && item.authors.filter(a => a.id !== item.participants.filter(a => a.id !== selfUserId)[0])[0].profile.name.first}\n                              </div>\n                              <div className=\" flex f5 fw5- ml1 black-70\">\n                                {item.authors.filter(a => a.id !== item.participants.filter(a => a.id !== selfUserId)[0])[0] && item.authors.filter(a => a.id !== item.participants.filter(a => a.id !== selfUserId)[0])[0].profile && item.authors.filter(a => a.id !== item.participants.filter(a => a.id !== selfUserId)[0])[0].profile.name.last}\n                              </div>\n                            </div>\n\n                            <div className=\" flex flex-row pt1\">\n                              <div className=\" raleway flex f6 fw5 black-20 \">\n                                {item.authors.filter(a => a.id !== item.participants.filter(a => a.id !== selfUserId)[0])[0] && item.authors.filter(a => a.id !== item.participants.filter(a => a.id !== selfUserId)[0])[0].profile && item.authors.filter(a => a.id !== item.participants.filter(a => a.id !== selfUserId)[0])[0].profile && item.authors.filter(a => a.id !== item.participants.filter(a => a.id !== selfUserId)[0])[0].profile.additional.role}\n                              </div>\n                            </div>\n                          </div>\n\n                          <div className=\" flex flex-row w-100\"></div>\n                        </div>\n                      )}\n\n                      {item.group && (\n                        <div\n                          className={\n                            (this.isActive() ? \"  \" : \" bb b--black-05 \") +\n                            \" flex flex-row items-center pv3 ph4 \"\n                          }\n                        >\n                          <div className=\"conversation-recipient-avatar flex flex-row justify-between w-100\">\n                            <div className=\" pointer flex flex-row pv2 pr3 items-center justify-start\">\n\n                              <div\n                                className=\"cover bg-center mh2- \"\n                                style={{\n                                  width: \"50px\",\n                                  height: \"50px\",\n                                  borderRadius: \"100px\",\n                                  boxShadow: \"0 0px 0px 6px #ffffff9e\",\n                                  background:\n                                    GeoPattern.generate(item.name).toDataUrl()\n                                }}\n                              />\n\n                            </div>\n                            <div className=\" flex flex-column w-100 items-start justify-center\">\n                              <div className=\" raleway -raleway flex flex-row  fw6\">\n                                <div className=\" flex f5 fw5- black-70 \">\n                                  {item.name}\n                                </div>\n\n                              </div>\n                            </div>\n\n                            <div className=\"flex w-40 flex-row items-center\">\n                              {item.authors && item.authors.length && item.authors\n                                .filter(a => a.id !== item.author)\n                                .map((item, index) => (\n                                  <div\n                                    className=\"cover bg-center mh2\"\n                                    style={{\n                                      width: \"30px\",\n                                      height: \"30px\",\n                                      borderRadius: \"100px\",\n                                      backgroundImage:\n                                        'url(\"' + item.profile.picture + '\")',\n                                      boxShadow: \"0 0px 0px 6px #ffffff9e\"\n                                    }}\n                                  />\n                                ))}\n                            </div>\n\n                          </div>\n                        </div>\n                      )}\n                    </div>\n                    </Transition>\n                  ))}\n\n                {!this.state.ready && (\n                  <div className=\"pa3-\">\n                    <div className=\"flex items-center justify-center rans-a ph4- -ph0-ns bg-light-blue pulse h4\">\n                      {/* <Skeleton active />\n                      <Skeleton active /> */}\n                      <span className=\"flex f5 fw5 black-30\">Loading</span>\n\n                    </div>\n                  </div>\n                )}\n              </div>\n            )}\n\n            <div\n              className={\n                (Fn.get(\"isMobile\")\n                  ? \" w-100 \"\n                  : this.props.dashboard === true\n                    ? \" w-70 \"\n                    : \"  w-70 bg-white \") + \" flex flex-column\"\n              }\n            >\n              {this.state.conversations.length > 0 && (\n                <MBox\n                  conversationReady={this.state.conversationReady}\n                  type={\"discussion-large\"}\n                  conversation={this.state.activeConversation}\n                  // conversations={this.sta}\n                  // activeConversationIndex={this.state.activeConversationIndex}\n                  conversations={this.state.conversations}\n                  stream={this.state.activeStream}\n                  updateActiveConversation={this.updateActiveConversation}\n                  isSendingMessage={this.state.isSendingMessage}\n                  dashboard={this.props.dashboard}\n                  ready={this.state.conversationReady}\n                  selfUserId={selfUserId}\n                // load={this.props.load}\n                />\n              )}\n            </div>\n          </div>\n        </section>\n\n        <Dialog\n          className={\"bp3-light\"}\n          onClose={this.toggleDialog}\n          // title={this.state.dialogTitle}\n          // onValueChange={this.onValueChange}\n          {...this.state}\n        >\n\n          {dialogTypes.includes(this.state.dialogType) && (\n            <div className=\"flex flex-column ph4- pt4- pb2-\">\n\n              <div className=\"flex flex-column pt3-\">\n                {/* <div className=\"form-row flex flex-column\">\n\n                    <div className=\"form-row flex flex-column pb4\">\n                      <input\n                        ref={this.searchTerm}\n                        type={\"text\"}\n                        placeholder={\"Search by Name\"}\n                        className=\"flex flex-column ph3 pv2 bn round bg-white black-50 f5 fw5 bs-a- w-100\"\n                      />\n                    </div>\n                  </div> */}\n\n                <div\n                  className=\"flex flex-column\"\n                  style={{ maxHeight: \"400px\", overflow: \"auto\" }}\n                >\n                  <div className=\"mb0 mt0 raleway f5 fw5  mb-0 flex flex-row items-center justify-start black-50 pa3 bg-white-40\">\n                    <span>Your Network Connections</span>\n                    <div className=\"pv1 ph2 br1 black fw6 bg-white ml3\">\n                      <span class=\"\">\n                        {this.state.connections.length}\n                      </span>\n                    </div>\n                  </div>\n\n                  {!this.state.connectionsReady && (\n                    <div className=\"flex mr3 pv4 items-center justify-center\">\n                      <div className=\"sp sp-3balls-small\"></div>\n                    </div>\n                  )}\n\n\n                  {this.state.connectionsReady &&\n                    this.state.connections.map((item, index) => (\n                      <div\n                        onClick={\n                          this.state.dialogType === \"single\" &&\n                          (() => this.newConversation(item))\n                        }\n                        className=\"flex flex-row justify-between\"\n                      >\n                        <div\n                          // to={\"/user/\" + item.id}\n                          className={\n                            \"    trans-a pointer flex flex-row-ns flex-row items-center justify-between  w-100-s bn-ns bb b--black-05 pa3 hover-bg-white-70 w-100\"\n                          }\n                        >\n\n                          <div\n                            style={{\n                              width: \"50px\",\n                              height: \"50px\",\n                              borderRadius: \"100px\",\n                              background: item.profile.picture.length\n                                ? \"url(\" + item.profile.picture + \")\"\n                                : GeoPattern.generate(\n                                  item.profile.picture\n                                ).toDataUrl()\n                            }}\n                            className=\"cover bg-center\"\n                          />\n                          <div\n                            className={\n                              \" flex flex-row flex-auto -flex-column pt2-ns- pl3  flex f5 fw6 black-70 raleway \"\n                            }\n                          >\n                            <div className={\"  flex    \"}>\n                              {item.profile.name.first}\n                            </div>\n                            <div className={\" flex ml1\"}>\n                              {item.profile.name.last}\n                            </div>\n                          </div>\n\n                          {this.state.dialogType === \"multi\" && (\n                            <div\n                              className={\n                                \"  checkbox-square  flex flex-row -flex-column pt2-ns pl3 f5 fw6 black ph4  \"\n                              }\n                            >\n                              <Checkbox\n                                type={\"checkbox\"}\n                                onChange={() =>\n                                  this.addUserToGroupChat({ user: item, index })\n                                }\n                                checked={this.state.checked[index]}\n                              />\n                            </div>\n                          )}\n\n                        </div>\n\n                      </div>\n                    ))}\n                </div>\n              </div>\n            </div>\n          )}\n          {this.state.dialogType === \"multi\" && (\n            <div\n              className={\n                \"  flex flex-row justify-end -flex-column pv3 f5 fw6 black ph4 bt b--black-05  \"\n              }\n            >\n              <input\n                ref={this.chatGroupName}\n                type={\"text\"}\n                placeholder={\"Chat group name\"}\n                className=\"f5 fw5 br2 bg-white ph4 pv3 pointer bn relative w-100 \"\n              >\n\n              </input>\n            </div>\n          )}\n          {this.state.dialogType === \"multi\" && (\n            <div\n              className={\n                \"  flex flex-row justify-end -flex-column pv3 f5 fw6 black ph4 bt b--black-05  \"\n              }\n            >\n              <button\n                onClick={this.startGroupChat}\n                className=\"br0- round bs-b bg-black-20 ph5 pv3 pointer bn relative w-100 \"\n              >\n                {this.state.buttonLoading && (\n                  <div className=\"flex items-center justify-center mr3 pv2\">\n                    <div className=\"sp sp-3balls-small\"></div>\n                  </div>\n                )}\n                {!this.state.buttonLoading && (\n                  <span className=\"f5 fw6 white pv0 flex items-center justify-center\">\n                    Start Group Chat\n                  </span>\n                )}\n              </button>\n            </div>\n          )}\n        </Dialog>\n\n        <Drawer\n          title=\"Recipient List\"\n          placement=\"right\"\n          closable={true}\n          onClose={this.toggleDrawer}\n          visible={this.state.drawerOpen}\n          width={\"80vw\"}\n        >\n          {this.state.drawerOpen && (\n            <div className=\"pointer flex flex-column justify-end items-center bg-white w-100 h-100\">\n              <div className=\"pointer flex flex-column justify-end items-center bg-white w-100 h-100\">\n                {/* <div\n                  className={\n                    \" w-100 recipientList flex flex-column bg-white relative  h-100\"\n                  }\n                >\n                  {this.state.ready &&\n                    this.state.conversations.length > 0 &&\n                    this.state.conversations.map((item, index) => (\n                      <ConversationItem\n                        conversation={this.state.activeConversation}\n                        selectConversation={this.selectConversation}\n                        item={item}\n                        key={index}\n                        selfUserId={this.context.account.user.id}\n                      />\n                    ))}\n                </div> */}\n                <SearchBar\n                  value={this.state.value}\n                  placeholder=\"Search\"\n                  onSubmit={value => console.log(value, \"onSubmit\")}\n                  onClear={value => console.log(value, \"onClear\")}\n                  onFocus={() => console.log(\"onFocus\")}\n                  onBlur={() => console.log(\"onBlur\")}\n                  onCancel={() => console.log(\"onCancel\")}\n                  showCancelButton\n                  onChange={this.onChange}\n                />\n              </div>\n            </div>\n          )}\n        </Drawer>\n      </>\n    );\n  }\n}\n\nexport default Messages;\nMessages.contextType = AccountContext;\n","// @flow\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\n// import PropTypes from 'prop-types';\n\nimport Fn from '../../../utils/fn/Fn.js';\n\nclass Projects extends Component {\n\n  constructor(props) {\n\n    super(props)\n\n    this.state = {\n      hasError: false,\n      projects: []\n    }\n\n    this.fetchProjects = this.fetchProjects.bind(this)\n\n  }\n  async fetchProjects() {\n\n    await Fn.fetchProjects({self:this})\n    \n\n  }\n\n  componentDidMount = () => {\n    // console.log('RecentWork mounted');\n  }\n\n  static getDerivedStateFromError(error) {\n    // getDerivedStateFromError -> Update state so the next render will show the fallback UI.\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, info) {\n    // You can also log the error to an error reporting service\n  }\n\n  getDerivedStateFromProps = (nextProps, prevState) => {\n    // console.log('RecentWork getDerivedStateFromProps', nextProps, prevState);\n  }\n\n  getSnapshotBeforeUpdate = (prevProps, prevState) => {\n    // console.log('RecentWork getSnapshotBeforeUpdate', prevProps, prevState);\n  }\n\n  componentDidUpdate = () => {\n    console.log('RecentWork did update');\n  }\n\n  componentWillUnmount = () => {\n    console.log('RecentWork will unmount');\n  }\n\n  render() {\n\n    \n\n    if (this.state.hasError) {\n      return <h1>Something went wrong.</h1>;\n    }\n    return (\n      <section id=\"RecentWork\" className=\"mt3\">\n\n        <div className=\"flex flex-column mb2 pa0 br1 \">\n\n          \n\n            <div className=\"flex flex-row pv3\">\n\n              <div className=\"flex flex-auto flex-column pb0 \">\n\n                <div className=\"flex flex-row flex-wrap f4 fw4 black-60 mb0 col-2 justify-between\">\n                  {this.state.projects.map((item, index) => (\n                    console.log('[[ Project item ]]', item),\n\n                    <Link\n                      to={'/projects/' + item.id}\n                      className={\"  pointer flex flex-column items-center justify-center pr3- mb4\"}>\n                      <div\n                        style={{ width: '100%', height: '270px', borderRadius: '0', backgroundImage: \"url(\" + item.image + \")\" }}\n                        className=\"cover bg-center\" />\n                      <div className={\" flex flex-column bg-white w-100 pa3\"}>\n                        <div className={\" flex f4 fw6 pb2 black-70\"}>\n                          {item.title}\n                        </div>\n                        <div className={\" flex f6 fw5 pb3 black-50\"}>\n                          {item.position}\n                        </div>\n                        <div className={\" flex f5 fw5  black-50\"}>\n                          {item.description}\n                        </div>\n                      </div>\n                    </Link>\n\n                  ))}\n                </div>\n\n              </div>\n\n            </div>\n\n          </div>\n\n      </section>\n        );\n      }\n    }\n    \n    \n    \nexport default Projects;","// @flow\nimport React, { Component } from \"react\";\n// import PropTypes from 'prop-types';\nimport months from \"../../../utils/calendar/months.json\";\nimport moment from \"moment\";\nimport \"./style.css\";\nimport { Tooltip, Popover, Skeleton, notification } from \"antd\";\nimport { Icon } from \"@blueprintjs/core\";\nimport { Fn, app, api, ui } from \"../../../utils/fn/Fn.js\";\nimport AccountContext, { AccountProvider, AccountConsumer }  from \"../../../utils/context/AccountContext\";\n// import Login from '../../../../../../../___/recipes3/src/pages/Login/index';\nimport Loading from '../../elements/Loading.js';\nvar GeoPattern = require(\"geopattern\");\nwindow.GeoPattern = GeoPattern;\n\n\n\nclass ProjectCalendar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hasError: false,\n      current: parseInt(moment(new Date()).format(\"M\")),\n      currentMonthString: moment(new Date()).format(\"MMMM\"),\n      currentMonth: moment(new Date()),\n      year: moment(new Date()).format(\"YYYY\"),\n      months: [],\n      months_: [],\n      ready: false,\n      projectEvents: [],\n      ownEvents: [],\n      projects: [],\n      events: [],\n      projectsWithDates: [],\n      style: \"two\",\n      contextMenuOpen: 0,\n      eventsReady: false,\n      projectsReady: false,\n      calendarDataReady: this.props.calendarRefresh,\n      existingEntries: []\n    };\n    // this.calendarFilter = this.calendarFilter.bind(this)\n\n    // this.createCalendar = this.createCalendar.bind(this)\n    this.start = this.start.bind(this);\n    this.getDates = this.getDates.bind(this);\n    this.createDays = this.createDays.bind(this);\n    this.getMonthDateRange = this.getMonthDateRange.bind(this);\n    this.projectImage = this.projectImage.bind(this);\n    this.toggleStyle = this.toggleStyle.bind(this);\n    this.next = this.next.bind(this);\n    this.prev = this.prev.bind(this);\n    this.reload = this.reload.bind(this)\n    this.onSelectSlot = this.onSelectSlot.bind(this)\n    this.checkForNewEntry = this.checkForNewEntry.bind(this)\n  }\n  checkForNewEntry(itemId) {\n\n    let entries = this.state.existingEntries;\n\n    return !entries.includes(itemId)\n\n    // if(!entries.includes(itemId)){\n    //   // existingEntries.push(item.id)\n    //   return true\n    // }\n    // else {\n      \n    //   return false\n      \n    // }\n    // setTimeout(() => {\n    //   entries.push(item.id)\n    // },3000\n    \n  }\n  onSelectSlot(__) {\n\n    const { day, index } = __\n\n    // console.log('select slot',__)\n\n    const projectsWithDates = this.state.projectsWithDates;\n\n    const data = projectsWithDates[index];\n\n    // console.log('data',data)\n\n    let filter = (___) => {\n      // console.log('filter',___, ___.days)\n      if(___.dates) {\n        return ___.dates.includes(day)\n      }\n    }\n\n    let allEventsForDay = projectsWithDates.filter(a => filter(a));\n\n    this.props.setDrawerData({ day: day, events: allEventsForDay })\n\n    // console.log('allEventsForDay',allEventsForDay)\n\n  }\n  reload() {\n    this.start().then(res => {\n      this.createDays();\n    });\n    // this.props.setReady()\n  }\n  next() {\n    // let current = this.state.current;\n    // let next = ++current;\n    this.setState({\n      ready: false,\n      current: parseInt(moment(this.state.currentMonth).add(1,'month').format('M')),\n      currentMonthString: moment(this.state.currentMonth).add(1,'month').format('MMMM'),\n      currentMonth: moment(this.state.currentMonth).add(1,'month'),\n      year: moment(this.state.currentMonth).add(1,'month').format('YYYY')\n    });\n    this.start().then(res => {\n      this.createDays();\n    });\n    // setTimeout(() => {\n      \n    // },300)\n    \n  }\n  prev() {\n    // let current = this.state.current;\n    // let next = --current;\n    this.setState({\n      ready: false,\n      current: parseInt(moment(this.state.currentMonth).subtract(1,'month').format('M')),\n      currentMonth: moment(this.state.currentMonth).subtract(1,'month'),\n      currentMonthString: moment(this.state.currentMonth).subtract(1,'month').format('MMMM'),\n      year: moment(this.state.currentMonth).subtract(1,'month').format('YYYY')\n    });\n    this.start().then(res => {\n      this.createDays();\n    });\n  }\n  toggleStyle(style) {\n    // let style= this.state.style;\n    // if(style === \"one\") {\n    //   this.setState({ style: \"two\"})\n    // }\n    // else {\n    // }\n    this.setState({ style: style });\n  }\n  projectImage(event) {\n    if (event.type === \"project\") {\n      // console.log('no picture', project)\n      if (event.project.hasOwnProperty(\"media\")) {\n        return event.project.media.images[0].url;\n      } else {\n        return null;\n      }\n    }\n    if (event.type === \"event\") {\n      // console.log('no picture', project)\n      if (event.picture !== null) {\n        return event.picture;\n      } else {\n        return null;\n      }\n    }\n\n    // project.picture\n  }\n  \n  async start() {\n    this.setState({ calendarDataReady: false })\n    return new Promise(async resolve => {\n\n      let projects = await app\n        .fetchSubscribedProjects({\n          self: this,\n          // userId: Fn.get(\"account\").user.id\n          userId: this.props.user.id\n        })\n        .then(projects => {\n          // console.log(\"createCalendar : projects\", projects);\n          this.setState({\n            projects: projects,\n            projectsReady: true\n          });\n          return projects;\n        });\n      \n        let events = [];\n\n      events = await app\n        .fetchEvents({\n          self: this,\n          // userId: Fn.get(\"account\").user.id,\n          userId: this.props.user.id\n        })\n        .then(events => {\n          // console.log(\"createCalendar : events\", events);\n          if(events.code === 401) {\n            // console.log('unauthorized', events)\n            app.refreshTokens()\n            this.setState({\n              events: []\n            });\n            return [];\n          }\n          else {\n\n            this.setState({\n              events: events,\n              eventsReady: true\n            });\n            return events;\n          }\n\n          \n        });\n\n      // let ownEvents = Fn.get(\"account\").user.profile.events;\n\n      // console.log(\"Projects\", projects);\n      // console.log(\"ownEvents\", events);\n\n      if (events.code === 401) {\n        // notification.open({\n        //   message: \"Unauthorized\",\n        //   description: \"Please log in again.\"\n        // });\n        this.context.refreshTokens();\n        // return false;\n      }\n\n      let dates = [];\n\n      // console.log('events is not iterable', events)\n\n      if(this.state.eventsReady && this.state.projectsReady) {\n        for (let item of events) {\n          // console.log(\" \");\n          // console.log(\" \");\n          // console.log(\" \");\n          // // console.log(\"[[ Calendar : Project Item ]]\", item);\n          // console.log(\" \");\n          // console.log(\" \");\n          // console.log(\" \");\n  \n          let start = item.start;\n          let end = item.end;\n          let dates_ = this.getDates(start, end);\n          let item_ = {\n            id: item.id,\n            type: \"event\",\n            title: item.title,\n            conversations: item.conversations,\n            conversationId: item.conversationId,\n            schedule: item.schedule || [],\n            files: item.files || [],\n            days: item.days,\n            project: null,\n            start: moment(start).tz(\"Africa/Johannesburg\")\n            .toDate(),\n            end: moment(end).tz(\"Africa/Johannesburg\")\n            .toDate(),\n            dates: dates_,\n            picture:\n              (item &&\n                item.media &&\n                item.media.images &&\n                item.media.images.length > 0 &&\n                item.media.images[0].url) ||\n              null\n            // GeoPattern.generate(item.title).toBase64()\n          };\n  \n          dates.push(item_);\n        }\n        for (let item of projects) {\n\n          // let existingEntries = [];\n          \n\n          // console.log(\" \");\n          // console.log(\" \");\n          // console.log(\" \");\n          // // console.log(\"[[ Calendar : Project Item ]]\", item);\n          // console.log(\" \");\n          // console.log(\" \");\n          // console.log(\" \");\n  \n          let start = item.start_date;\n          let end = item.end_date;\n  \n          let item_ = {\n            id: item.id,\n            type: \"project\",\n            title: item.title,\n            schedule: item.schedule || [],\n            files: item.files || [],\n            project: item,\n            start: moment(start).tz(\"Africa/Johannesburg\")\n            .toDate(),\n            end: moment(end).tz(\"Africa/Johannesburg\")\n            .toDate(),\n            dates: item.days,\n            picture:\n              (item &&\n                item.media &&\n                item.media.images &&\n                item.media.images.length > 0 &&\n                item.media.images[0].url) ||\n              GeoPattern.generate(item.title).toBase64()\n          };\n          dates.push(item_);\n        }\n\n  \n        // console.log('event dates', dates)\n        // for(let item of dates){\n\n        //   // let entries = this.state.existingEntries;\n        //   //   entries.push(item.id)\n        //   //   this.setState({\n        //   //     existingEntries: entries\n        //   //   })\n\n        //   if(this.state.existingEntries.length === 0) {\n        //     let entries = this.state.existingEntries;\n        //     entries.push(item.id)\n        //     this.setState({\n        //       existingEntries: entries\n        //     })\n        // }\n        // }\n        this.setState({\n          projectsWithDates: dates,\n          calendarDataReady: true\n        })\n  \n        resolve(dates);\n      }\n      \n      \n    });\n  }\n\n  getDates(startDate, stopDate) {\n    var dateArray = [];\n    var currentDate = moment(startDate);\n    var stopDate = moment(stopDate);\n    while (currentDate <= stopDate) {\n      dateArray.push(moment(currentDate).format(\"YYYY-MM-DD\"));\n      currentDate = moment(currentDate).add(1, \"days\");\n    }\n    return dateArray;\n  }\n  getMonthDateRange(year, month) {\n    // var moment = require(\"moment\");\n\n    // month in moment is 0 based, so 9 is actually october, subtract 1 to compensate\n    // array is 'year', 'month', 'day', etc\n    var startDate = moment([year, month - 1]);\n\n    // Clone the value before .endOf()\n    var endDate = moment(startDate).endOf(\"month\");\n\n    // just for demonstration:\n    // console.log(startDate.toDate());\n    // console.log(endDate.toDate());\n\n    // make sure to call toDate() for plain JavaScript date type\n    return { start: startDate, end: endDate };\n  }\n  createDays() {\n    let current = this.state.current;\n    // alert('current',this.state.current)\n    let year_ = parseInt(moment(new Date()).format(\"Y\"));\n    let date = current + \"/01/\" + year_;\n    let currentMonth = parseInt(moment(new Date(date)).format(\"M\"));\n    let daysInMonth = moment(new Date(date)).daysInMonth();\n    // let days = new Array(daysInMonth).fill({})\n    let year = parseInt(moment(new Date(date)).format(\"Y\"));\n    let month = parseInt(moment(new Date(date)).format(\"M\"));\n    let dateRange = this.getMonthDateRange(year, month);\n\n    // console.log(\"#####\");\n    // console.log(\" \");\n    // console.log(\"dateRange\", dateRange);\n    // console.log(\" \");\n    // console.log(\" \");\n    // console.log(\" \");\n\n    let start = dateRange.start;\n    let end = dateRange.end;\n    let days = this.getDates(start, end);\n\n    let months = [];\n\n    let month_ = {\n      name: moment(new Date(date)).format(\"MMMM\"),\n      days: days\n    };\n\n    // console.log(\"#####\");\n    // console.log(\" \");\n    // console.log(\"month_\", month_);\n    // console.log(\" \");\n    // console.log(\" \");\n\n    months.push(month_);\n\n    this.setState({\n      months: months,\n      ready: true\n    });\n  }\n  componentDidMount = async () => {\n\n    console.log(\"ProjectCalendar mounted\");\n    // this.calendarFilter()\n\n    this.start().then(res => {\n      this.createDays()\n    })\n\n  }\n  render() {\n\n    if (this.state.hasError) {\n      return <h1>Something went wrong.</h1>;\n    }\n    return (\n     <>\n      {/* {!this.state.ready && <Loading />} */}\n\n      <section id=\"Calendar\" className=\"flex -mt3\">\n        <div className=\"flex flex-column mb2 pa0 br1 \">\n          <div className=\"calendar flex flex-row-ns flex-column flex-wrap- justify-between col--3 pt3  \">\n            {this.state.months.map((item, index) => (\n              <div\n                key={index}\n                id={item.name}\n                className=\"calendar-month flex flex-column flex-wrap flex--auto w-100 \"\n              >\n                <div\n                  id=\"Calendar-header\"\n                  className={\n                    ( this.props.profile ? \" br2 \" : \" round- br3 \") \n                    + ( this.props.headerType === \"square-slim\" ? \" w-100 flex flex-row b-b b--black-10 justify-between bg-white- br2- overflow-hidden bs-b \" : \" -round flex flex-row justify-between bb b--black-05 bg-white- mb4 \" ) }>\n                 \n                 <div className=\"vh10 flex flex-row justify-between flex-wrap w-100 ph4- pv2- f4 fw6 black-70\">\n                    <div\n                      onClick={this.prev}\n                      className=\"w-40 pointer flex flex-row items-center justify-start pv2 pl2 pr3 pv0 f5 fw6 black-20 hover-black-50\"\n                    >\n                      <div className=\"flex items-center justify-center w2 h2 mr2 br3 bg-black-05 -hover-bg-black-10 overflow-hidden\">\n                        <Icon\n                          icon={\"chevron-left\"}\n                          iconSize={15}\n                          className=\"white pa2 hover-black-\"\n                        />\n                      </div>\n                      <span>prev</span>\n                    </div>\n\n                     <div className=\"w-20 flex flex-row flex-wrap pv0 ph3 f5 fw6 black items-center justify-center\">\n                   \n                    <span className=\"black-30 fw5\">\n                      {moment(new Date()).format('Do')}\n                    </span>\n\n                    <span className=\" black fw6 f3 ph3\">\n                    {this.state.currentMonthString}\n                     </span>   \n\n                  \n                    <span className=\" black-30 fw5\">\n                      {this.state.year}\n                    </span>\n                    {/* <span className={ ( this.state.calendarDataReady ? \" black-40 \" : \" black-20 \" ) + (\"  pointer fw5 pl4 \" )}>\n                    \n<Icon onClick={() => this.start()} icon={\"refresh\"} iconSize={10} />\n                    </span> */}\n\n\n\n                  </div>\n\n                    <div\n                      onClick={this.next}\n                      className=\"w-40 pointer flex flex-row items-center justify-end pv2 pl2 pr3 pv0 f5 fw6 black-20  hover-black-50\"\n                    >\n                      <span>next</span>\n\n                      <div className=\"flex items-center justify-center w2 h2 ml2 br3 bg-black-05 -hover-bg-black-10 overflow-hidden\">\n                        <Icon\n                          icon={\"chevron-right\"}\n                          iconSize={15}\n                          className=\"white pa2 hover-black-\"\n                        />\n                      </div>\n                    </div>\n                  </div>\n                 \n                 \n                  {/* <div className=\"flex flex-row justify-between flex-wrap pr3 pl4 pv0 f4 fw6 black-70 bl b--black-05\">\n                    <div\n                      onClick={() => this.toggleStyle(\"one\")}\n                      className=\"pointer flex flex-row items-center justify-center ph3 pv0 f5 fw6 black-40 hover-black-50\"\n                    >\n                      <div className=\"flex items-center justify-center w2 h2 mr2 br3 bg-black-05 overflow-hidden\">\n                        <div\n                          className={\n                            (this.state.style === \"one\"\n                              ? \" opacity-1 \"\n                              : \" opacity-0\") +\n                            \" w1 h1 bg-white-70 trans-a br2 \"\n                          }\n                        ></div>\n                      </div>\n                      <span>sm</span>\n                    </div>\n                    <div\n                      onClick={() => this.toggleStyle(\"two\")}\n                      className=\"pointer flex flex-row items-center justify-center ph3 pv0 f5 fw6 black-40 hover-black-50\"\n                    >\n                      <div className=\"flex items-center justify-center w2 h2 mr2 round- br3 bg-black-05 overflow-hidden\">\n                        <div\n                          className={\n                            (this.state.style === \"two\"\n                              ? \" opacity-1 \"\n                              : \" opacity-0\") +\n                            \" w1- h1- calendar-event-block bg-white-70 trans-a br2 \"\n                          }\n                        ></div>\n                      </div>\n                      <span>lg</span>\n                    </div>\n                    {/* <div\n                      onClick={() => this.toggleStyle(\"three\")}\n                      className=\"pointer flex flex-row items-center justify-center ph3 pv2 f5 fw6 black-40 hover-black-50\"\n                    >\n                      <div className=\"flex items-center justify-center w2 h2 mr2 round- br3 bg-black-05 overflow-hidden\">\n                        <div\n                          className={\n                            (this.state.style === \"three\"\n                              ? \" opacity-1 \"\n                              : \" opacity-0\") +\n                            \" w1 h1 bg-white-70 trans-a br2 \"\n                          }\n                        ></div>\n                      </div>\n                      <span>three</span>\n                    </div> */}\n                  {/* </div>  */}\n                </div>\n\n                {/* {!this.state.ready && (\n\n                  <div className=\"trans-a pv3 ph1\">\n                    <Skeleton active />\n                    <Skeleton active />\n                  </div>\n                \n                )} */}\n\n\n                  <div className=\"calendar-days-list flex flex-row col-7 flex-wrap -bl -bt -b--black-05\">\n                    {item.days.map((day, index_) => (\n                      // console.log(\"day\", day),\n                      // console.log('isToday', new Date(moment(new Date())).toLocaleDateString() === new Date(moment(day)).toLocaleDateString()),\n                      <div\n                        onClick={() => this.onSelectSlot({day,index})}\n                        className={ ( \" pr3 pl3 pv3 pt3 \" + \" flex flex-column \" )}\n                      >\n                        <div\n                        style={ ui.mobile() ? { height: \"200px\" } : { height: \"200px\" }}\n                          onMouseEnter={() => {\n                            this.setState({\n                              contextMenuOpen: index_\n                            });\n                          }}\n                          key={index_}\n                          className={\n                            ( new Date().toLocaleDateString() === new Date(moment(day)).toLocaleDateString() ? \" ba bw2 b--black-05 \" : \"  \" ) \n                            + (day.filled ? \" filled bg-green \" : \" \") +\n                            \"   calendar-day flex flex-column flex-wrap -ba round- br3 pa3 -b--black-05 h4-  relative hover-bg-white-50 hover-scale-up -hover-scale-down-slide-up pointer hover-black black-20 trans-a justify-end items-end overflow-hidden\"\n                          }\n                        >\n                          <span className=\"calendar-day-label trans-s pa3 absolute top-0 right-0 f3 fw3 black-20- raleway relative\">\n                            {index_ + 1}\n                          </span>\n\n                          <div className=\"calendar-day-buttons absolute top-0 left-0  flex flex-row ph2 pv2\">\n                            <div\n                              onClick={() => this.props.onSelectSlot(day)}\n                              className=\"flex -insert-event-button -trans-a -pa3\"\n                            >\n                              {/* \n                          <Icon\n                            icon={\"plus\"}\n                            iconSize={20}\n                            className=\"bg-white-50 hover-bg-white round- black-20 pa2 hover-black -bb -br b--black-05 bbrr-3\"\n                          /> */}\n                              {/* <Icon\n                                icon={\"ring\"}\n                                iconSize={15}\n                                className=\" black-20 pa2 hover-black-30 hover-green\"\n                              /> */}\n\n                              {/* <div className={ (\" trans-a transform-origin-left-top day-context-menu flex absolute top-0 left-0 bg-white -br3 bs-b \" ) }>\n                        <div className=\"flex flex-column f5 fw5 black-50 w-100\"> \n<p className=\"flex ma0 pv2 ph2 bb b--black-05 w-100 \"><Icon icon={'selection'} iconSize={15} className=\"mr3 black-20\"></Icon> Highlight</p>\n<p className=\"flex ma0 pv2 ph2 bb b--black-05 w-100 \"><Icon icon={'small-plus'} iconSize={15} className=\"mr3 black-20\"></Icon>  Add Event</p>\n</div>\n                        </div> */}\n                            </div>\n{/* \n                            <div\n                              onClick={() => this.props.onSelectSlot({day,index})}\n                              className=\"flex -insert-event-button -trans-a -absolute -top-0 -left-0 -pa3\"\n                            >\n                              <Icon\n                                icon={\"star\"}\n                                iconSize={15}\n                                className=\"black-20 pa2 hover-black-30 hover-yellow\"\n                              />\n                            </div> */}\n                          </div>\n\n                          <div\n                            className={\n                              (this.state.style === \"one\"\n                                ? \" flex-row \"\n                                : this.state.style === \"two\"\n                                ? \" flex-row \"\n                                : \" flex-column w-100 flex-wrap \") +\n                              \" flex items-end justify-end flex-wrap trans-a \"\n                            }\n                          >               \n                           {/* {this.state.ready && ()} */}\n                            { this.props.ready && this.state.projectsWithDates.map(\n                              (project, index__) =>\n                                project.dates.filter(a => a === day).length >\n                                  0 && (\n                                  <Tooltip\n                                    placement={\"topLeft\"}\n                                    title={project.title}\n                                  >\n                                    <div\n                                      onClick={(e) =>\n                                        this.props.onSelectEvent({ e, data: {\n                                          event: project,\n                                          day\n                                        } })\n                                      }\n                                      style={{\n                                        backgroundImage:\n                                          this.projectImage(project) === null\n                                            ? GeoPattern.generate(\n                                                project.title\n                                              ).toDataUrl()\n                                            : 'url(\"' +\n                                              this.projectImage(project) +\n                                              '\")'\n                                      }}\n                                      className={\n                                        (this.state.style === \"one\"\n                                          ? \" calendar-event-block mh1 w1- h1- ml2- -w1 -h3 -ml2 \"\n                                          : this.state.style === \"two\"\n                                          ? \" calendar-event-block lg w2- h2- mh1 \"\n                                          : \" h1- w-100 \") +\n                                        \" hover-slide-up trans-b bg-cover bg-center br2 -round -bg-green mt2\"\n                                      }\n                                    >{ this.checkForNewEntry(project.id) ? <div className=\"-scale-up-center -calendar-event-block-new-entry \"></div> : null }<></></div>\n                                  </Tooltip>\n                                )\n                            )}\n                          </div>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                \n              </div>\n            ))}\n          </div>\n        </div>\n      </section>\n      </>\n    );\n  }\n}\n\nexport default ProjectCalendar;\nProjectCalendar.contextType = AccountContext;\n","// @flow\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\n// import { DatePicker } from '@blueprintjs/core'\n\nimport { DatePicker, TimePrecision } from \"@blueprintjs/datetime\";\n\nclass FormCreateProject extends React.Component {\n  constructor(props) {\n\n    super(props)\n\n    this.state = {\n      hasError: false,\n      dob: ''\n    }\n\n    this.title = React.createContext()\n    this.description = React.createContext()\n    // this. = React.createContext()\n    // this.dob = React.createContext()\n    // this.gender = React.createContext()\n    // this.location = React.createContext()\n\n\n    this.submit = this.submit.bind(this)\n    this.handleDateChange = this.handleDateChange.bind(this)\n  }\n\n  handleDateChange(e) {\n    console.log(e)\n    this.setState({ dob: e.toString() })\n  }\n\n  submit() {\n\n    const data = {\n      title: this.firstname.current.value,\n      description: this.lastname.current.value,\n      location: this.role.current.value,\n      start_date: this.state.dob,\n      end_date: this.gender.current.value,\n      \n    }\n\n    this.props.submitProfile(data)\n    // console.log(this.bio.current.value)\n  }\n\n  componentDidMount = () => {\n    console.log('FormBio mounted');\n  }\n\n  static getDerivedStateFromError(error) {\n    // getDerivedStateFromError -> Update state so the next render will show the fallback UI.\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, info) {\n    // You can also log the error to an error reporting service\n  }\n\n  getDerivedStateFromProps = (nextProps, prevState) => {\n    console.log('FormBio getDerivedStateFromProps', nextProps, prevState);\n  }\n\n  getSnapshotBeforeUpdate = (prevProps, prevState) => {\n    console.log('FormBio getSnapshotBeforeUpdate', prevProps, prevState);\n  }\n\n  componentDidUpdate = () => {\n    console.log('FormBio did update');\n  }\n\n  componentWillUnmount = () => {\n    console.log('FormBio will unmount');\n  }\n\n  render() {\n\n    if (this.state.hasError) {\n\n      return <h1>Something went wrong.</h1>\n\n    }\n\n    return (\n      <div className=\"FormBio-wrapper\" className=\"flex flex-column w-100\">\n\n        <div className=\"flex-column flex w-100 mh-400 overflow-auto pa4\">\n\n          <div className=\" flex flex-column w-100\">\n            <span className=\"f5 fw5 black-50 pb3\">First Name</span>\n            <input\n              type={'text'}\n              placeholder={'Your first name'}\n              ref={this.firstname}\n              defaultValue={this.props.value.name.first}\n              className=\"flex w-100 mb3 bn br1 pa3 black-50 f3 fw5\" />\n\n          </div>\n          <div className=\" flex flex-column w-100\">\n            <span className=\"f5 fw5 black-50 pb3 pt3\">Last Name</span>\n            <input\n              type={'text'}\n              placeholder={'Your first name'}\n              ref={this.lastname}\n              defaultValue={this.props.value.name.last}\n              className=\"flex w-100 mb3 bn br1 pa3 black-50 f3 fw5\" />\n\n          </div>\n          <div className=\" flex flex-column w-100\">\n            <span className=\"f5 fw5 black-50 pb3 pt3\">Gender</span>\n\n            <input\n              type={'text'}\n              placeholder={'Your gender'}\n              ref={this.gender}\n              defaultValue={this.props.value.gender}\n              className=\"flex w-100 mb3 bn br1 pa3 black-50 f3 fw5\" />\n\n          </div>\n          <div className=\" flex flex-column w-100\">\n            <span className=\"f5 fw5 black-50 pb3 pt3\">Role</span>\n\n            <input\n              type={'text'}\n              placeholder={'Your professional role'}\n              ref={this.role}\n              defaultValue={this.props.value.additional.role}\n              className=\"flex w-100 mb3 bn br1 pa3 black-50 f3 fw5\" />\n\n          </div>\n\n          <div className=\" flex flex-column w-100 mb3\">\n\n            <span className=\"f5 fw5 black-50 pb3 pt3\">Your Date of Birth</span>\n\n            <DatePicker\n              minDate={new Date('01/01/1940')}\n              defaultValue={typeof this.props.value.dob !== \"undefined\" && this.props.value.dob.length > 0 ? new Date(this.props.value.dob) : null} className={''} onChange={this.handleDateChange} />\n\n          </div>\n\n        </div>\n\n        <div className=\"form-row flex w-100 bg-white ph4 pv3\">\n\n          <div\n            onClick={this.submit}\n            className=\"tc w-100 pointer flex button flex-column ph3 pv2 ba b--black-10 f4 fw6 black-50\">\n            Submit\n            </div>\n\n        </div>\n\n      </div>\n    );\n  }\n}\n\n\nexport default FormCreateProject;","import React from 'react';\nimport OnboardingForm from './OnboardingSteps';\nimport './style.css';\n\nimport { Steps, Icon, Button, message } from 'antd';\nimport { DatePicker, TimePrecision } from \"@blueprintjs/datetime\";\nimport { Fn } from '../../../utils/fn/Fn.js';\nconst { Step } = Steps;\n\nconst steps = [\n  {\n    title: 'First',\n    content: 'First-content',\n  },\n  {\n    title: 'Second',\n    content: 'Second-content',\n  },\n  {\n    title: 'Last',\n    content: 'Last-content',\n  },\n];\nclass Two extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      current: 0,\n      dob: ''\n    };\n\n    console.log('OnboardingScreen props', props)\n    this.mobileNumber = React.createRef()\n    this.bio = React.createRef()\n    this.grade = React.createRef()\n    this.firstname = React.createRef()\n    this.lastname = React.createRef()\n    this.gender = React.createRef()\n\n    \n    this.saveStep2 = this.saveStep2.bind(this)\n    this.handleDateChange = this.handleDateChange.bind(this)\n    console.log('OnboardingScreen props', props)\n    this.reset = this.reset.bind(this)\n\n  }\n    handleDateChange(e) {\n    console.log(e)\n    this.setState({dob: e.toString()})\n  }\n  reset(){\n    window.localStorage.clear()\n    // this.context.history.push('/')\n    window.location.href = \"/\"\n  }\n  saveStep2() {\n\n    let mobileNumber = this.mobileNumber.current.value;\n    let bio = this.bio.current.value;\n    let grade = this.grade.current.value;\n    let firstname = this.firstname.current.value;\n    let lastname = this.lastname.current.value;\n    let gender = this.gender.current.value;\n    let dob = this.state.dob;\n\n    let data = { mobileNumber, bio, grade, gender, firstname, lastname, dob };\n    this.props.saveStep2(data);\n    this.props.next()\n\n  }\n  componentDidMount() {\n  }\n  render() {\n    // const { current } = this.state;\n    return (\n      <div id=\"StepsForm\">\n        <div className=\"flex flex-column ma0\" id=\"\">\n          <div className=\"form-row flex flex-column pb3 pt2\">\n          <div className=\"form-row flex flex-column\">\n              <div className=\"form-row flex flex-column pt4\">\n                <label className=\"f7 fw6 black-90 pb2\">First Name</label>\n                <input \n                required={true}\n                ref={this.firstname}\n                type={'text'} className=\"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a\" />\n              </div>\n              <div className=\"form-row flex flex-column pt4\">\n                <label className=\"f7 fw6 black-90 pb2\">Last Name</label>\n                <input mobileNumber\n                required={true}\n                ref={this.lastname}\n                type={'text'} className=\"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a\" />\n              </div>\n\n            </div>\n            \n            <div className=\"form-row flex flex-column\">\n              <div className=\"form-row flex flex-column pt4\">\n                <label className=\"f7 fw6 black-90 pb2\">Mobile Phone</label>\n                <input \n                required={true}\n                ref={this.mobileNumber}\n                type={'number'} className=\"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a\" />\n              </div>\n\n            </div>\n            <div className=\"form-row flex flex-column\">\n              <div className=\"form-row flex flex-column pt4\">\n                <label className=\"f7 fw6 black-90 pb2\">Gender</label>\n                <input \n                required={true}\n                ref={this.gender}\n                type={'text'} className=\"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a\" />\n              </div>\n\n            </div>\n            <div className=\"form-row flex flex-column\">\n              <div className=\"form-row flex flex-column pt4\">\n                <label className=\"f7 fw6 black-90 pb2\">Enter your grade</label>\n                <input \n                required={true}\n                ref={this.grade}\n                type={'number'} className=\"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a\" />\n              </div>\n\n            </div>\n            <div className=\"form-row flex flex-column\">\n              <div className=\"form-row flex flex-column pt4\">\n                <label className=\"f7 fw6 black-90 pb2\">Bio</label>\n                <textarea\n                required={true}\n                ref={this.bio}\n                rows={4} \n                type={'text'}\n                className=\"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a\" />\n              </div>\n            </div>\n\n            {/* <div className=\" flex flex-column w-100 mb3\">\n\n                <span className=\"flex flex-column f6 fw5 black-60 pb3 pt3\">Your Date of Birth</span>\n\n                <DatePicker\n                  minDate={new Date('01/01/1940')}\n                  // defaultValue={typeof this.props.value.dob !== \"undefined\" && this.props.value.dob.length > 0 ? new Date(this.props.value.dob) : null} className={''} \n                  onChange={this.handleDateChange} \n                  />\n\n            </div> */}\n\n          </div>\n          \n        </div>\n        <div className=\"Buttons flex flex-row justify-between mt4 mw5 center w-100\">\n\n          <div className=\"flex flex-column w-100\">\n          <button\n              onClick={this.saveStep2}\n              className={(\" br1 bs-b bg-white ph3 pv1 pointer bn relative  \")} >\n              <span className=\"f5 fw5 black-30 pv2 flex items-center justify-center\">\n                {this.state.buttonLoading ? <Icon type=\"loading\" className={' absolute right-0 f4 black-60 mr2'} /> : <Icon type=\"swap-right\" className={Fn.get('theme').config.theme.colorScheme.color + (' f4 black-60 mr2 absolute right-0')} />} Next</span>\n            </button>\n\n            {\n              this.props.current > 0 && <div className=\"flex flex-column w-100 \">\n                <span onClick={this.props.prev} className=\"f6 fw5 black-30 pv2 flex items-center justify-center\">\n                  go back to previous step\n                          </span>\n\n              </div>\n            }\n            <div className=\"flex flex-row w-100\">\n          <div \n          onClick={this.reset}\n          className=\"pointer f5 fw6 black-50 pv2 mt2 mv4 ba b--black-05 ph3\">Reset</div>\n        </div>\n          </div>\n\n        </div>\n      </div>\n    )\n  }\n}\nexport default Two;","import React from \"react\";\nimport OnboardingForm from \"./OnboardingSteps\";\nimport \"./style.css\";\n\n// import Filepond from '../../upload/Filepond.js';\n\nimport { DatePicker, Steps, Icon, Select, Button, message } from \"antd\";\n\nimport LocationSearchBar from \"../../elements/display/forms/LocationSearchBar.js\";\nimport { TimePrecision } from \"@blueprintjs/datetime\";\nimport { Fn } from \"../../../utils/fn/Fn.js\";\nimport moment from \"moment\";\nconst { Step } = Steps;\nconst { Option } = Select;\n\nconst steps = [\n  {\n    title: \"First\",\n    content: \"First-content\"\n  },\n  {\n    title: \"Second\",\n    content: \"Second-content\"\n  },\n  {\n    title: \"Last\",\n    content: \"Last-content\"\n  }\n];\nclass One extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      current: 0,\n      projectType: \"\",\n      // projectName: '',\n      projectDate: new Date(),\n      projectEndDate: new Date(),\n      formData: null,\n      ready: false,\n      submitLoading: false\n    };\n    this.rate = React.createRef();\n    this.projectName = React.createRef();\n    this.saveStep1 = this.saveStep1.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleDateChange = this.handleDateChange.bind(this);\n\n    this.reset = this.reset.bind(this);\n    console.log(\"OnboardingScreen props\", props);\n  }\n  handleStartDateChange = e => {\n    window.log.warn(\"start date\", e.toString());\n    this.setState({\n      projectDate: e.toString()\n    });\n  };\n  handleEndDateChange = e => {\n    window.log.warn(\"end date\", e.toString());\n    this.setState({\n      projectEndDate: e.toString()\n    });\n  };\n  reset() {\n    window.localStorage.clear();\n    // this.context.history.push('/')\n    window.location.href = \"/\";\n  }\n  handleDateChange(e) {\n    console.log(e);\n    this.setState({ projectDate: e.toString() });\n  }\n  handleChange(e) {\n    console.log(e.target.value);\n    this.setState({\n      projectType: e.target.value\n    });\n  }\n\n  saveStep1(e) {\n    e.preventDefault()\n    this.setState({\n      submitLoading: true\n    });\n    let location = Fn.get(\"location\");\n    let projectType = this.state.projectType;\n    let projectName = this.projectName.current.value;\n    let projectDate = this.state.projectDate;\n    let projectEndDate = this.state.projectEndDate;\n\n    let data = {\n      location,\n      projectType,\n      projectName,\n      projectDate,\n      projectEndDate\n    };\n    Fn.set(\"step1Data\", data);\n    setTimeout(() => {\n      this.props.saveStep1(data);\n      this.props.next();\n      this.setState({\n        submitLoading: false\n      });\n    }, 1000);\n  }\n\n  componentDidMount() {\n    this.setState({\n      formData: Fn.get(\"step1Data\"),\n      ready: true\n    });\n  }\n\n  render() {\n    // const { current } = this.state;\n    return (\n      <form\n      onSubmit={this.saveStep1}\n      >\n        <div id=\"StepsFormProduction\" className=\"flex flex-column mb3\">\n          <div className=\"flex flex-column mt0\" id=\"\">\n            <div className=\"form-row flex flex-column pb3 pt4\">\n              {this.state.ready && (\n                <div className=\"form-row flex flex-column\">\n                  <div className=\"form-row flex flex-row pt4 items-center\">\n                    <label className=\"f5 fw6 black-20 pb3- tl mr4 w-30\">\n                      Project Name\n                    </label>\n\n                    <input\n                      ref={this.projectName}\n                      required={true}\n                      type={\"text\"}\n                      defultValue={this.state.formData.projectName}\n                      className=\"flex flex-column ph4 pv3 bn br2 -round bg-black-05- white- black-50 f4 fw5 bs-a- w-100 bg-white\"\n                    />\n                  </div>\n                  <div className=\"form-row flex flex-row pt4 items-center\">\n                    <label className=\"w-30 f5 fw6 black-20 pb3- tl mr4 w-\">\n                      Project Location\n                    </label>\n\n                    <LocationSearchBar\n                      location={this.state.location}\n                      findLocation={this.findLocation}\n                      fetchProjects={this.fetchProjects2}\n                      defultValue={this.state.formData.location}\n                    />\n\n                    {/* <input\n                  required={true}\n                  defaultValue={getGlobal().location.County}\n                  type={'text'} \n                  className=\"flex flex-column ph4 pv3 bn br2 -round bg-black-05 -white black-50 f4 fw5 bs-a-\" /> */}\n                  </div>\n\n                  <div className=\"form-row flex flex-row pt4 items-center\">\n                    <label className=\"w-30 f5 fw6 black-20 pb3- tl mr4 w-\">\n                      Project Type\n                    </label>\n\n                    <select\n                      className=\"flex flex-column ph4 pv3 bn br2 -round bg-white white- black-50 f4 fw5 bs-a- w-100\"\n                      required={true}\n                      // defaultValue=\"commercial\"\n                      defultValue={this.state.formData.projectType}\n                      onChange={e => this.handleChange(e)}\n                    >\n                      <option value=\"\">Select</option>\n                      <option value=\"commercial\">Commercial</option>\n                      <option value=\"film\">Film</option>\n                      <option value=\"documentary\">Documentary</option>\n                    </select>\n                  </div>\n\n                  <div className=\"form-row flex flex-column justify-between w-100\">\n                    <div className=\" form-row flex flex-row pt4 items-center mr2-\">\n                      <span className=\"w-30 f5 fw6 black-20 pb3- tl mr4 w-\">\n                        Start Date\n                      </span>\n\n                      <DatePicker\n                        required={true}\n                        minDate={new Date(\"01/01/1940\")}\n                        maxDate={new Date(\"01/01/2030\")}\n                        // defaultValue={moment(new Date())}\n                        defultValue={this.state.formData.projectDate}\n                        onChange={this.handleStartDateChange}\n                        className=\"flex flex-column ph4 pv3- bn br2 -round bg-black-05- white- black-50 f4 fw5 bs-a- w-100 bg-white\"\n                        // defaultValue=\"commercial\"\"\n                      />\n                    </div>\n\n                    <div className=\" form-row flex flex-row pt4 items-center ml2-\">\n                      <span className=\"w-30 f5 fw6 black-20 pb3- tl mr4 w-\">\n                        Completion Date\n                      </span>\n\n                      <DatePicker\n                        required={true}\n                        minDate={new Date(\"01/01/1940\")}\n                        maxDate={new Date(\"01/01/2030\")}\n                        defaultValue={moment(new Date())}\n                        defultValue={this.state.formData.projectEndDate}\n                        // defaultValue={typeof this.props.value.dob !== \"undefined\" && this.props.value.dob.length > 0 ? new Date(this.props.value.dob) : null} className={''}\n                        onChange={this.handleEndDateChange}\n                        className=\"flex flex-column ph4 pv3- bn br2 -round bg-black-05- white- black-50 f4 fw5 bs-a- w-100 bg-white\"\n                        // defaultValue=\"commercial\"\"\n                      />\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"Buttons flex flex-row justify-between mt4 mw5- center w-100\">\n          <div className=\"flex flex-column w-100\">\n            <button\n              type={'submit'}\n              \n              className={\n                \"br1- round bs-b bg-black-10 ph3 pv3 pointer bn relative w-100  \"\n              }\n            >\n              <span className=\"f4 fw6 black-30- white -white pv2 flex items-center justify-center\">\n                {this.state.submitLoading && (\n                  <div className=\"pv2\">\n                    <div className=\"sp sp-3balls\"></div>\n                  </div>\n                )}\n                {!this.state.submitLoading && \"Next\"}\n              </span>\n            </button>\n\n            {this.props.current > 0 && (\n              <div className=\"flex flex-column w-100 \">\n                <span\n                  onClick={this.props.prev}\n                  className=\"f6 fw5 black-30 pv2 flex items-center justify-center\"\n                >\n                  go back to previous step\n                </span>\n              </div>\n            )}\n\n            <div className=\"flex flex-row w-100\">\n              <div\n                onClick={this.reset}\n                className=\"pointer f5 fw6 black-50 pv2 mt2 mv4 ba b--black-05 ph3\"\n              >\n                Reset\n              </div>\n            </div>\n          </div>\n        </div>\n      </form>\n    );\n  }\n}\nexport default One;\n","import React from 'react';\nimport OnboardingForm from './OnboardingSteps';\nimport './style.css';\n\n\nimport { Steps, Icon, Button, message } from 'antd';\nimport { Checkbox } from 'antd';\nconst { Step } = Steps;\n\nconst steps = [\n  {\n    title: 'First',\n    content: 'First-content',\n  },\n  {\n    title: 'Second',\n    content: 'Second-content',\n  },\n  {\n    title: 'Last',\n    content: 'Last-content',\n  },\n];\nconst positions = [\n  {\n    title: \"Select\"\n  },\n  {\n    title: \"Unit Production Manager\"\n  },\n  {\n    title: \"Line Producer\"\n  },\n  {\n    title: \"Production Manager\"\n  },\n  {\n    title: \"Director\"\n  },\n  {\n    title: \"Assistant Director\"\n  },\n  {\n    title: \"2nd Assistant Director\"\n  },\n  {\n    title: \"Continuity Person\"\n  },\n  {\n    title: \"Cinematographer\"\n  },\n  {\n    title: \"Gaffer\"\n  },\n  {\n    title: \"Camera Operator\"\n  },\n  {\n    title: \"Assistant Cameraman\"\n  },\n  {\n    title: \"Film Loader\"\n  },\n  {\n    title: \"Steadycam Operator\"\n  },\n  {\n    title: \"Production Sound Mixer\"\n  },\n  {\n    title: \"Boom Operator\"\n  },\n  {\n    title: \"Key Grip\"\n  },\n  {\n    title: \"Dolly Grip\"\n  },\n  {\n    title: \"Best Boy\"\n  },\n  {\n    title: \"Visual Effects Director\"\n  },\n  {\n    title: \"FX Coordinator\"\n  },\n  {\n    title: \"Property Master\"\n  },\n  {\n    title: \"Leadman\"\n  },\n  {\n    title: \"Set Dresser\"\n  },\n  {\n    title: \"Costumer\"\n  },\n  {\n    title: \"Make-up Artist\"\n  },\n  {\n    title: \"Body Make-up Artist\"\n  },\n  {\n    title: \"Hairdresser\"\n  },\n  {\n    title: \"Production Assistant\"\n  },\n  {\n    title: \"Production Office Coordinator\"\n  },\n  {\n    title: \"Unit Publicist\"\n  },\n  {\n    title: \"Second Unit Director\"\n  },\n  {\n    title: \"Production Caterer\"\n  },\n  {\n    title: \"Craft Services\"\n  },\n  {\n    title: \"Transportation Coordinator\"\n  },\n  {\n    title: \"Day Player\"\n  }\n]\nconst plainOptions = ['Mexican', 'American', 'Italian', 'South African', 'Greek', 'Portuguese', 'Chinese', 'Turkish', 'Thai'];\n\nclass Three extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      current: 0,\n      cuisines: [],\n      cuisines_: [{}],\n      role: \"\",\n      skills: [],\n      skills_: [],\n      value: '',\n      buttonLoading: false,\n      submitLoading: false\n    };\n\n    console.log('OnboardingScreen props', props)\n    // this.insertCuisine = this.insertCuisine.bind(this)\n    // this.onChange = this.onChange.bind(this)\n    this.insertSkill = this.insertSkill.bind(this)\n    this.addSkillInput = this.addSkillInput.bind(this)\n    // this.rate = React.createRef();\n    this.saveStep3 = this.saveStep3.bind(this)\n    this.specOnChange = this.specOnChange.bind(this)\n    console.log('OnboardingScreen props', props)\n    this.reset = this.reset.bind(this)\n    this.role = React.createRef()\n\n  }\n  \n  reset() {\n    window.localStorage.clear()\n    // this.context.history.push('/')\n    window.location.href = \"/\"\n  }\n  saveStep3() {\n    // let cuisines = this.state.cuisines;\n    // let role = this.role.current.value;\n    this.setState({\n      buttonLoading: true\n    })\n    \n    let skills = this.state.skills;\n    let data = { positions: skills };\n    console.log('saveStep3 data ', data)\n\n    setTimeout(() => {\n      this.props.saveStep3(data);\n      this.props.next()\n      this.setState({\n        buttonLoading: true\n      })\n\n      document.querySelector(\"body\").scroll({\n        top: 0,\n        left: 0,\n        behavior: \"smooth\"\n      });\n      document.querySelector(\"#OnboardingScreen\").scroll({\n        top: 0,\n        left: 0,\n        behavior: \"smooth\"\n      });\n    },1000)\n  }\n  // onChange(checkedValues) {\n  //   console.log('checked = ', checkedValues);\n  //   this.setState({cuisines: checkedValues})\n  // }\n  // role()/\n  // insertCuisine(cuisine) {\n  //   let cuisines = this.state.cuisines;\n  //   cuisines.push(cuisine)\n  // }\n  insertSkill(item) {\n    let skills = this.state.skills;\n    skills.push(item)\n    this.setState({ skills: skills })\n  }\n  addSkillInput() {\n    let skills_ = this.state.skills_;\n    skills_.push({});\n    this.setState({ skills_: skills_ })\n  }\n  specOnChange(data) {\n    const { e, index } = data;\n    let skills = this.state.skills;\n    skills[index] = e.target.value;\n    this.setState({\n      skills\n    })\n    console.log(this.state);\n\n    // let \n  }\n\n  // onChange = e => {\n  //   console.log('radio checked', e.target.value);\n  //   this.setState({\n  //     value: e.target.value,\n  //   });\n  // };\n  componentDidMount() {\n\n    // new Array(this.props.project.positions.length).fill({})\n    if(this.props.project && this.props.project.hasOwnProperty('positions')) {\n      let positions = this.props.project.positions;\n      let p = []\n      let a = []\n      for(let item of positions){\n        p.push(item.title)\n        a.push({})\n      }\n      console.log(a,p)\n      this.setState({\n        skills: p,\n        skills_: a\n      })\n    }\n    \n  }\n  render() {\n    // const { current } = this.state;\n    return (\n      <div id=\"StepsForm\">\n        <div className=\"flex flex-column ma0\" id=\"\">\n          <div className=\"form-row flex flex-column pb3 pt2\">\n            {/* <div className=\"form-row flex flex-column\">\n              <div className=\"form-row flex flex-column pt4\">\n                <label className=\"f7 fw6 black-90 pb2\">Your Crew Role</label>\n                <input \n                required={true}\n                ref={this.role}\n                type={'text'} className=\"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a\" />\n                <Checkbox.Group required={true} options={plainOptions} onChange={this.onChange} />\n              </div>\n\n            </div> */}\n            <div className=\"form-row flex flex-column\">\n              <div className=\"form-row flex flex-row items-end pt4\">\n                <label className=\"f5 fw6 black-50 tl mr4 pb4 w-30\">Crew Needed</label>\n                <div className=\"flex flex-column flex-wrap w-100\">\n                  {\n                    this.state.skills_.map((item, index) => (\n                      <div className=\"flex pb3 w-100\">\n                        <select\n                          // required={true}\n                          onChange={(e) => this.specOnChange({ e, index })}\n                          value={this.state.skills[index]}\n                          // type={'text'} \n                          className=\"w-100 flex flex-row ph4 pv3 bn round -br1 bg-white black-50 f4 fw5 -bs-a\"\n                        >\n                          \n                          {\n                            positions.map((item, index) => (\n                              <option value={item.title}>{item.title}</option>\n                            ))\n                          }\n\n                        </select>\n                      </div>\n                    ))\n                  }\n                </div>\n              </div>\n              <div className=\"form-row flex flex-row pt2\">\n                <button onClick={this.addSkillInput}\n                  className=\"pointer ba b--black-05 br1- round -bg-black-10- bg-transparent f5 fw6 white- black-60 pv3 ph3 w-100\">Add +</button>\n              </div>\n            </div>\n\n          </div>\n\n        </div>\n\n        <div className=\"Buttons flex flex-row justify-center mt4\">\n\n          <div className=\"flex flex-column w-100\">\n\n            <button\n              onClick={this.saveStep3}\n              className={\" round -br1 bs-b bg-black-10 ph3 pv3 pointer bn relative w-100   \"} >\n\n              <span className=\"f4 fw6 black-30- white -white pv2 flex items-center justify-center\">\n\n                { !this.state.buttonLoading && \"Next\" }\n              \n                { this.state.buttonLoading && \n                  <div className=\"flex mr3 pv2\">\n                    <div className=\"sp sp-3balls\"></div>\n                  </div>\n                }\n                </span>\n\n            </button>\n\n            {\n              this.props.current > 0 && <div className=\"flex flex-column w-100 \">\n                <span onClick={this.props.prev} className=\"f6 fw5 black-30 pt3 ttu flex items-center justify-center\">\n                  go back to previous step\n                </span>\n\n              </div>\n            }\n\n            <div className=\"flex flex-row items-center justify-center w-100\">\n              <div\n                onClick={this.reset}\n                className=\"pointer f5 fw6 black-50 pv2 mt2 mv4 ba b--black-05 ph3\">Reset</div>\n            </div>\n          </div>\n\n        </div>\n      </div>\n    )\n  }\n}\nexport default Three;","import React from \"react\";\nimport OnboardingForm from \"./OnboardingSteps\";\nimport \"./style.css\";\nimport { Fn } from \"../../../utils/fn/Fn\";\n// import OnboardingAccountType from './__AccountType';\n// import OnboardingProfileUser from './__ProfileUser';\nimport Two from \"./Two\";\nimport One from \"./One\";\nimport Three from \"./Three\";\nimport { Steps, Button, message } from \"antd\";\n// import { useReducer } from \"react\";\n\nconst { Step } = Steps;\n\nclass OnboardingSteps extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      current: 0,\n      location: Fn.get(\"location\"),\n      currency: Fn.get(\"baseCurrency\"),\n      grade: 0,\n      mobileNumber: \"\",\n      bio: \"\",\n      specialties: [],\n      cuisines: [],\n      firstname: \"\",\n      lastname: \"\",\n      positions: []\n    };\n\n    console.log(\"OnboardingScreen props\", props);\n\n    this.prev = this.prev.bind(this);\n    this.next = this.next.bind(this);\n    this.saveStep1 = this.saveStep1.bind(this);\n    this.saveStep2 = this.saveStep2.bind(this);\n    this.saveStep3 = this.saveStep3.bind(this);\n  }\n  saveStep1(data) {\n    const {\n      location,\n      projectType,\n      projectDate,\n      projectEndDate,\n      projectName\n    } = data;\n    this.setState({\n      location,\n      projectType,\n      projectDate,\n      projectEndDate,\n      projectName\n    });\n    document.querySelector(\"body\").scroll({\n      top: 0,\n      left: 0,\n      behavior: \"smooth\"\n    });\n    document.querySelector(\"#OnboardingScreen\").scroll({\n      top: 0,\n      left: 0,\n      behavior: \"smooth\"\n    });\n  }\n  saveStep2(data) {\n    const { mobileNumber, bio, grade, firstname, lastname, dob, gender } = data;\n    this.setState({\n      mobileNumber,\n      bio,\n      grade,\n      firstname,\n      lastname,\n      gender,\n      dob\n    });\n\n    return this.props.saveOnboardingData({\n      location: this.state.location,\n      mobileNumber: this.state.mobileNumber,\n      bio: this.state.bio,\n      positions: this.state.positions,\n      // role: role,\n      grade: this.state.grade,\n      firstname: this.state.firstname,\n      lastname: this.state.lastname,\n      gender: this.state.gender,\n      dob: this.state.dob\n    });\n  }\n  saveStep3(data) {\n    const { positions } = data;\n    // console.log(data)\n    this.setState({ positions: positions });\n\n    return this.props.saveOnboardingData({\n      location: this.state.location,\n      projectName: this.state.projectName,\n      projectDate: this.state.projectDate,\n      projectEndDate: this.state.projectEndDate,\n      projectType: this.state.projectType,\n      positions: positions\n    });\n  }\n  next() {\n    const current = this.state.current + 1;\n    this.setState({ current });\n  }\n\n  prev() {\n    const current = this.state.current - 1;\n    this.setState({ current });\n  }\n  componentDidMount() {\n    console.log(\"steps\", this.props);\n  }\n  render() {\n    let steps;\n\n    steps = [\n      {\n        title: \"Project Info\",\n        content: \"First-content\"\n      },\n      {\n        title: \"Crew\",\n        content: \"Second-content\"\n      }\n      // {\n      //   title: 'Skills',\n      //   content: 'Last-content',\n      // },\n    ];\n\n    const { current } = this.state;\n    return (\n      <div className=\"flex flex-column flex-auto overflow-visible\">\n        {\n          <>\n            <Steps current={current}>\n              {steps.map(item => (\n                <Step key={item.title} title={item.title} />\n              ))}\n            </Steps>\n            <div className=\"steps-content\">\n              {this.state.current === 0 && (\n                <One\n                  type={this.props.type}\n                  prev={this.prev}\n                  next={this.next}\n                  current={this.state.current}\n                  saveStep1={this.saveStep1}\n                />\n              )}\n\n              {this.state.current === 1 && (\n                <Three\n                  type={this.props.type}\n                  prev={this.prev}\n                  next={this.next}\n                  current={this.state.current}\n                  saveStep3={this.saveStep3}\n                />\n              )}\n\n              {this.state.current === 2 && (\n                <div className=\"flex flex-column w-100 \">\n                  <span\n                    onClick={this.prev}\n                    className=\"f6 fw5 black-30 pt3 ttu flex items-center justify-center\"\n                  >\n                    go back to previous step\n                  </span>\n                </div>\n              )}\n\n              {/* {\n                  this.state.current === 2 && (\n\n                    <Two\n                      prev={this.prev}\n                      next={this.next}\n                      current={this.state.current}\n                      saveStep2={this.saveStep2}\n                    />                   \n\n                  ) \n                } */}\n            </div>\n          </>\n        }\n      </div>\n    );\n  }\n}\nexport default OnboardingSteps;\n","import React from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport OnboardingSteps from \"./OnboardingSteps\";\n\nimport { Spinner, Dialog, Icon } from \"@blueprintjs/core\";\nimport \"@blueprintjs/core/lib/css/blueprint.css\";\nimport \"./style.css\";\n\nimport Fn from \"../../../utils/fn/Fn.js\";\nimport methods from \"../../../utils/methods/index.js\";\nimport moment from \"moment\";\nimport AccountContext, {\n  AccountProvider\n} from \"../../../utils/context/AccountContext.js\";\nimport { timeline } from \"popmotion\";\nimport { TH_LIST } from \"@blueprintjs/icons/lib/esm/generated/iconNames\";\n\nexport default class CrewFinder extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      ready: true,\n      newAccountType: \"\",\n      accountTypeIsSet: false,\n      lat: \"\",\n      long: \"\",\n      city: \"\",\n      location: {},\n      country: \"\",\n      countrySet: false,\n      redirectProfile: false,\n      crew: [],\n      crew_: [],\n      users: [],\n      isOpen: false,\n      activeUser: {},\n      dialogTitle: \"\",\n      drawerVisible: false,\n      searchLoading: false\n    };\n    this.setAccountType = this.setAccountType.bind(this);\n\n    this.saveOnboardingData = this.saveOnboardingData.bind(this);\n    this.openDialog = this.openDialog.bind(this);\n    this.closeDialog = this.closeDialog.bind(this);\n    this.avatar = this.avatar.bind(this);\n\n    console.log(\"OnboardingScreen props\", props);\n  }\n\n  openDialog(item) {\n    console.log(item);\n    let user = item.item;\n    this.setState({\n      isOpen: true,\n      activeUser: user,\n      dialogTitle: user.profile.name.first + \" \" + user.profile.name.last\n    });\n  }\n\n  closeDialog() {\n    this.setState({\n      isOpen: false\n    });\n  }\n  reset() {\n    window.localStorage.clear();\n    this.context.history.push(\"/\");\n    window.location.reload();\n  }\n  avatar(user) {\n    // console.log('avatar ', user)\n    // const user = data.user\n\n    if (user && user.profile && user.profile.picture.length > 0) {\n      return user.profile.picture;\n    } else {\n      return \"/img/placeholder.png\";\n    }\n  }\n\n  async saveOnboardingData(data) {\n    this.setState({\n      searchLoading: true\n    });\n    console.log(\"saveOnboardingData data\", data);\n\n    const {\n      location,\n      projectName,\n      projectDate,\n      projectEndDate,\n      projectType,\n      positions\n    } = data;\n\n    data.hasBeenUploaded = false;\n\n    localStorage.setItem(\"crewBuilder\", JSON.stringify(data));\n\n    let a = await Fn.fetchUsers({ self: this, positions });\n  }\n\n  setAccountType(data) {\n    const { type } = data;\n\n    console.log(\"setAccountType\", data);\n\n    this.setState({\n      newAccountType: type,\n      accountTypeIsSet: true\n    });\n  }\n\n  async componentDidMount() {\n    console.log(\"[[ OnboardingScreen props ]]\", this.props);\n\n    await Fn.getGeoLocation({ self: this });\n  }\n\n  render() {\n    // if(this.state.redirectProfile) {\n    //     return <Redirect to={'/profile'} />\n    // }\n    return (\n      <div className=\"flex flex-column ma0 w-100 z-99 relative\" id=\"\">\n        <div className=\"CrewFinder flex flex-row justify-between \"></div>\n\n        <div\n          id=\"OnboardingScreen\"\n          className=\"fixed top-10vh left-0 flex flex-column pa4 bg-near-white vh-100 w-100 overflow-scroll\"\n        >\n          <div className=\"flex flex-column items-center justify-start pt0 w-100 h-100\">\n            <div className=\"flex flex-column w-100\" id=\"\">\n              <div className=\"form-row flex flex-column pb3 w-100\">\n                <div className=\"flex flex-column mw7 center w-100\">\n                  <div\n                    id=\"SectionTitle\"\n                    className=\"flex flex-column ma0 w-100\"\n                    id=\"\"\n                  >\n                    <div className=\"flex flex-column justify-center items-center pb4\">\n                      <h1 className=\"  f3 fw6 black-80 mt5 mb2 tc\">\n                        {this.props.type === \"createProject\"\n                          ? \"Create a Project\"\n                          : \"Find Crew\"}\n                      </h1>\n                      <h1 className=\" f4 fw4 black-50 tc raleway\">\n                        Complete the wizard below to create a project and build\n                        a crew list\n                      </h1>\n                    </div>\n\n                    {this.props.type === \"createProject\" && (\n                      <div className=\"flex flex-row items-center justify-center pb3 w-100\">\n                        <div\n                          onClick={this.props.toggleCreateProject}\n                          className=\"pointer f5 fw6 black-50 pv2 ba b--black-05 ph3\"\n                        >\n                          Go back to projects\n                        </div>\n                      </div>\n                    )}\n                  </div>\n\n                  <OnboardingSteps\n                    type={this.props.type}\n                    newAccountType={this.state.newAccountType}\n                    accountTypeIsSet={this.state.accountTypeIsSet}\n                    setAccountType={this.setAccountType}\n                    saveOnboardingData={this.saveOnboardingData}\n                  />\n\n                  {this.state.searchLoading && (\n                    <div className=\"flex flex-column pv5 ph3 items-center\">\n                      {/* <Spinner size={25} /> */}\n                      <div className=\"sp sp-3balls\"></div>\n                    </div>\n                  )}\n                  <div className=\"crew-list flex flex-column mt3\">\n                    {!this.state.searchLoading &&\n                      this.state.crew_.length === 0 && (\n                        <>\n                          <div\n                            id=\"\"\n                            className=\"flex flex-row ph0 pb3 items-center justify-center\"\n                          >\n                            <span className=\"f6 fw5 black-50 pv2 ph3 mv4 ba b--black-05\">\n                              There are no users that match your search\n                            </span>\n                          </div>\n                          <div></div>\n                        </>\n                      )}\n                    {!this.state.searchLoading &&\n                      this.state.crew_.map((item, index) => (\n                        <div className=\"flex flex-column pt3 pb4 bb b--black-05 bw1 mb2\">\n                          <div className=\"flex flex-row f5 fw5 black-40 pb3\">\n                            {item.position}{\" \"}\n                            <span className=\"bg-black-10 white f7 fw6 br1 ph2 pv1 mb0 ml2\">\n                              {item.users.length}\n                            </span>\n                          </div>\n\n                          <div className=\"flex flex-row\">\n                            {item.users.map((item_, index_) => (\n                              <div\n                                onClick={() =>\n                                  this.props.openDialog({ item: item_ })\n                                }\n                                className={\n                                  \" pointer flex flex-column pv2 pr3 items-center justify-center\"\n                                }\n                              >\n                                <div\n                                  style={{\n                                    width: \"100px\",\n                                    height: \"120px\",\n                                    borderRadius: \"5px\",\n                                    backgroundImage:\n                                      \"url(\" + item_.profile.picture + \")\"\n                                  }}\n                                  className=\"cover bg-center\"\n                                />\n\n                                <div className={\" flex flex-row pt2 black-60\"}>\n                                  <div className={\" flex f6 fw6 \"}>\n                                    {item_.profile.name.first}\n                                  </div>\n\n                                  <div className={\" flex f6 fw6 ml1\"}>\n                                    {item_.profile.name.last}\n                                  </div>\n                                </div>\n                              </div>\n                            ))}\n                          </div>\n                        </div>\n                      ))}\n                  </div>\n\n                  {/* {this.state.crew_.length > 0 && ( */}\n                    <div className=\"crew-list-save flex flex-column mt2\">\n                      <div className=\"flex flex-row justify-center w-100\">\n                        <button\n                          onClick={this.props.saveAndCreateAccount}\n                          id=\"saveAndCreateAccount\"\n                          className=\"round -br1 bs-b bg-black-10 ph3 pv3 pointer bn relative w-100  \"\n                        >\n                          <span className=\"f4 fw6 black-30- white -white pv2 flex items-center justify-center\">\n                            {!this.props.saveAndCreateAccountButtonLoading && (\n                              <>\n                                {this.props.type === \"crewBuilder\"\n                                  ? \"Save & Create Account \"\n                                  : \"Create Project\"}\n                              </>\n                            )}\n                            {\n                            this.props.saveAndCreateAccountButtonLoading &&\n                            <div>\n                                <div className=\"sp sp-3balls\"></div>\n                              </div>\n  }\n                          </span>\n                        </button>\n                      </div>\n                    </div>\n                  {/* )} */}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n// export default CrewFinder;\nCrewFinder.contextType = AccountContext;\n","// @flow\nimport React, { Component } from \"react\";\nimport { Icon } from '@blueprintjs/core';\nimport { Fn } from \"../../../utils/fn/Fn\";\n// import MessageBox from \"../../../elements/display/messages/messagebox.js\";\n\n// import PropTypes from 'prop-types';\n\nexport default class Refresh extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n   \n    return (\n      <div\n        onClick={this.props.refresh}\n        className={\n          (this.props.dashboard\n            ? \" top12vh-\"\n            : Fn.get(\"isMobile\")\n            ? \" top-6vh- \"\n            : \"  \") +\n          \" absolute top-0 right-0 pointer black-20- hover-black-40 flex flex-row items-center z-99 justify-center h-100 ph3 \"\n        }\n      >\n        <span className=\"mr2 f5 fw6 black-20 raleway\">\n          {this.props.ready ? \"reload\" : \" \" }\n        </span>\n        \n        {\" \"}\n\n        { this.props.ready ? (\n          <Icon icon=\"refresh\" iconSize={15} className=\"black-20\" />\n        ) : (\n          <div>\n            <div className=\"mt2 mr4 sp sp-3balls-small\"></div>\n          </div>\n        ) }\n      </div>\n    );\n  }\n}\n\n// export default Refresh;\n","import React from \"react\";\n// import React, { getGlobal, setGlobal, useGlobal } from \"reactn\";\nimport { Redirect, Link } from \"react-router-dom\";\nimport moment, { fn, HTML5_FMT } from 'moment';\nimport { Popover, Empty, Skeleton, Rate, Tooltip, message } from \"antd\";\n\nimport TransitionLayout from \"../../Layouts/Transition\";\n// import ListChefs from \"../../elements/display/chefs/list\";\nimport PageTitle from \"../../elements/layout/PageTitle_B\";\n// import ChefInfo from \"../../elements/display/drawers/ProjectInfo\";\nimport LocationSearchFormWrapper from '../../elements/display/forms/LocationSearchFormWrapper';\nimport OnboardingScreen from '../../elements/display/onboarding/OnboardingScreen';\nimport LocationSearchBar from '../../elements/display/forms/LocationSearchBar';\nimport { Icon, Spinner, Dialog, NumericInput } from '@blueprintjs/core';\n// import \nimport Filepond from '../../elements/upload/Filepond.js';\n\nimport ListProjects from '../../elements/display/projects/list/index.js';\n\nimport Projects from '../../a/Projects/index.js';\nimport ProjectCalendar from '../../a/ProjectCalendar/index.js';\n\nimport AccountContext, { AccountConsumer } from \"../../../utils/context/AccountContext\";\nimport './style.css';\nimport FormCreateProject from \"../../a/FormCreateProject\";\nimport CrewFinder from '../../a/CrewFinder/index.js'\nimport Refresh from '../../a/Refresh/index.js';\n\nimport { Fn, app } from '../../../utils/fn/Fn.js';\n\n// import { dilate } from \"popmotion/lib/calc\";\n// window.getGlobal = getGlobal;\n// window.useGlobal = useGlobal;\n// window.setGlobal = setGlobal;\n\nclass MyProjects extends React.Component {\n\n  constructor(props) {\n\n    super(props)\n\n    this.state = {\n      ready: false,\n      subscribedProjectsReady: false,\n      ownProjectsReady: false,\n      isOpen: false,\n      dialogType: '',\n      dialogTitle: '',\n      subscribedProjects: [],\n      projects: [],\n      ownProjects: [],\n      activeButton: {},\n      buttons: [],\n      filters: [],\n      filter: '',\n      buttonLoading: false,\n      favourites: [],\n      crew: [],\n      addToCrewButtonLoading: false,\n      addToFavButtonLoading: false,\n      saveAndCreateAccountButtonLoading: false,\n      activeUser: {},\n      createProject: false\n    }\n\n    this.fetchProjects = this.fetchProjects.bind(this)\n    this.filterProjects = this.filterProjects.bind(this)\n    this.filter = this.filter.bind(this)\n    this.openDialog = this.openDialog.bind(this)\n    this.closeDialog = this.closeDialog.bind(this)\n    this.refresh = this.refresh.bind(this)\n    this.submitProject = this.submitProject.bind(this)\n\n    this.saveAndCreateAccount = this.saveAndCreateAccount.bind(this)\n    this.addToCrew = this.addToCrew.bind(this)\n    this.addToFavourites = this.addToFavourites.bind(this)\n    this.toggleCreateProject = this.toggleCreateProject.bind(this)\n\n    console.log('[[ Home props ]]', props)\n\n  }\n  toggleCreateProject() {\n    this.setState({\n      createProject: !this.state.createProject\n    })\n  }\n  addToCrew(item) {\n    this.setState({\n      addToCrewButtonLoading: true\n    })\n    console.log(item)\n    let crew = new Set(this.state.crew);\n    crew.add({ id: item.id, position: item.position })\n    let c = Array.from(crew)\n    console.log('Crew', c)\n\n    // crew.push(item)\n    this.setState({\n      crew: c\n    })\n    setTimeout(() => {\n      this.setState({\n        addToCrewButtonLoading: false,\n        isOpen: false\n      })\n\n    }, 1000)\n\n  }\n\n  addToFavourites(item) {\n    this.setState({\n      addToFavButtonLoading: true\n    })\n    console.log(item)\n    let favourites = new Set(this.state.favourite);\n    favourites.add({ id: item.id, position: item.position })\n    let s = Array.from(favourites)\n    // crew.push(item)\n    console.log('ShortList', s)\n\n    this.setState({\n      favourites: s\n    })\n    setTimeout(() => {\n      this.setState({\n        addToFavButtonLoading: false\n      })\n\n    }, 1000)\n  }\n  async saveAndCreateAccount() {\n\n    this.setState({\n      saveAndCreateAccountButtonLoading: true\n    })\n\n    // message.config({\n    //   top: 250,\n    //   // duration: 2,\n    //   maxCount: 3,\n    // });\n    // message.loading('Action in progress..');\n    // Dismiss manually and asynchronously\n\n\n    let shortlist = this.state.favourites;\n    let invited = this.state.crew;\n    let project = JSON.parse(localStorage.getItem('crewBuilder'))\n    project.shortlist = shortlist;\n    project.invited = invited;\n    project.accepted = [];\n\n    // let accountType = 'production';\n\n    let onboardingProfile = { shortlist, invited, project }\n\n    localStorage.setItem('crewBuilder', JSON.stringify(project))\n    localStorage.setItem('onboardingProfile', JSON.stringify(onboardingProfile))\n\n    // this.context.register()\n\n    // setTimeout(() => {\n    //   this.setState({\n    //     saveAndCreateAccountButtonLoading: false\n    //   })\n\n\n\n    // }, 1000)\n\n    // await Fn.createProject({ self: this, project, refresh: this.refresh, message: message })\n\n    await app.createProject({ self: this, project, refresh: this.refresh, message: message }).then(project => {\n      // this.setState({\n      // })\n      let crewBuilder = Fn.get(\"crewBuilder\");\n      \n      crewBuilder.hasBeenUploaded = true;\n      \n      Fn.store({ label: \"crewBuilder\", value: crewBuilder });\n      \n      this.setState({\n        saveAndCreateAccountButtonLoading: false,\n            createProject: false\n          });\n  \n          this.refresh();\n  \n          message.destroy();\n\n    })\n\n  }\n  async submitProject(data) {\n\n    const { project } = data\n\n    await Fn.submitProject({ self: this, project })\n\n  }\n  refresh() {\n    this.setState({ ready: false })\n    this.fetchProjects()\n  }\n  setButtons() {\n\n    const buttons = [\n      {\n        title: 'All',\n        function: () => this.filter({ filter: 'all', button: 0 })\n      },\n      {\n        title: 'Completed',\n        function: () => this.filter({ filter: 'completed', button: 1 })\n      },\n      {\n        title: 'Current',\n        function: () => this.filter({ filter: 'current', button: 2 })\n      },\n      {\n        title: 'Pending',\n        function: () => this.filter({ filter: 'pending', button: 3 })\n      },\n    ]\n\n    const filters = ['all', 'completed', 'current', 'pending']\n\n    this.setState({\n      buttons: buttons,\n      activeButton: buttons[0],\n      filters: filters,\n      filter: filters[0]\n    })\n\n  }\n\n  filter(config) {\n\n    const { filter, button } = config\n\n    console.log('filter ', config)\n\n    this.setState({\n      filter: filter,\n      activeButton: button\n    })\n\n    this.filterProjects(filter)\n\n  }\n  async fetchProjects() {\n\n    await Fn.fetchSubscribedProjects({ self: this, userId: Fn.get('account').user.id })\n      .then(async res => {\n\n        this.setState({\n          subscribedProjectsReady: true,\n          subscribedProjects: res\n        })\n\n        return await Fn.fetchOwnProjects({ self: this })\n\n      })\n      .then(ownprojects => {\n\n        this.setState({\n          ownProjectsReady: true,\n          ownProjects: ownprojects,\n          activeProject: ownprojects[0],\n          ready: true\n        })\n\n      })\n\n  }\n  filterProjects(filter) {\n    // let projects\n    console.log(' ')\n    console.log('filter', filter)\n    console.log(' ')\n\n    let ownProjects = typeof localStorage.getItem('ownProjects') !== null && JSON.parse(localStorage.getItem('ownProjects')) || [];\n    let subscribedProjects = typeof localStorage.getItem('subscribedProjects') !== null && JSON.parse(localStorage.getItem('subscribedProjects')) || [];\n    let projects = typeof localStorage.getItem('rojects') !== null && JSON.parse(localStorage.getItem('projects')) || [];\n\n    // let filter = this.state.filter;\n\n    let today = moment(new Date());\n\n    this.setState({ ready: false })\n\n    // alert('filter', filter)\n    if (filter === \"current\") {\n\n      let p = projects.filter(a => moment(a.start_date).isBefore(today) && moment(a.deadline).isAfter(today))\n      let pOwn = ownProjects.filter(a => moment(a.start_date).isBefore(today) && moment(a.deadline).isAfter(today))\n      let pSub = subscribedProjects.filter(a => moment(a.start_date).isBefore(today) && moment(a.deadline).isAfter(today))\n\n      // alert('updating projects' + filter)\n      console.log(' ')\n      console.log('filtered projects ', p)\n      console.log(' ')\n      this.setState({\n        projects: p,\n        ownProjects: pOwn,\n        subscribedProjects: pSub,\n        ready: true,\n        subscribedProjectsReady: true,\n        ownProjectsReady: true,\n      })\n    }\n\n    if (filter === \"pending\") {\n\n      let p = projects.filter(a => moment(a.start_date).isAfter(today))\n      let pOwn = ownProjects.filter(a => moment(a.start_date).isAfter(today))\n      let pSub = subscribedProjects.filter(a => moment(a.start_date).isAfter(today))\n\n      // alert('updating projects' + filter)\n      console.log(' ')\n      console.log('filtered projects ', pSub)\n      console.log(' ')\n      this.setState({\n        projects: p,\n        ownProjects: pOwn,\n        subscribedProjects: pSub,\n        ready: true,\n        subscribedProjectsReady: true,\n        ownProjectsReady: true,\n      })\n    }\n\n    if (filter === \"completed\") {\n\n      let p = projects.filter(a => moment(a.deadline).isBefore(today))\n      let pOwn = ownProjects.filter(a => moment(a.deadline).isBefore(today))\n      let pSub = subscribedProjects.filter(a => moment(a.deadline).isBefore(today))\n\n      // alert('updating projects' + filter)\n      console.log(' ')\n      console.log('filtered projects ', p)\n      console.log(' ')\n      this.setState({\n        projects: p,\n        ownProjects: pOwn,\n        subscribedProjects: pSub,\n        ready: true,\n        subscribedProjectsReady: true,\n        ownProjectsReady: true,\n      })\n    }\n\n    if (filter === \"all\") {\n      // let p = projects.filter(a => moment(a.deadline).isBefore(today))\n      // // alert('updating projects' + filter)\n      // console.log(' ')\n      // console.log('filtered projects ', p)\n      // console.log(' ')\n      this.setState({\n        projects: projects,\n        ownProjects: ownProjects,\n        subscribedProjects: subscribedProjects,\n        ready: true,\n        subscribedProjectsReady: true,\n        ownProjectsReady: true,\n      })\n    }\n\n  }\n  addRecentWorkProject() {\n\n    this.toggleDialog({ type: 'addPortfolioProject', title: 'Add a Project' })\n\n  }\n\n  openDialog(item) {\n\n    // const { type, title } = config\n    let user = item.item;\n    console.log('active user', user)\n    this.setState({\n      isOpen: !this.state.isOpen,\n      dialogType: \"createProject\",\n      // dialogTitle: \"Create a Project\",\n      activeUser: user,\n      dialogTitle: user.profile.name.first + \" \" + user.profile.name.last\n    })\n\n  }\n  closeDialog() {\n    this.setState({\n      isOpen: false\n    })\n  }\n\n  async showDrawer(chef) {\n    return await Fn.showDrawer({ chef, self: this })\n  }\n  async hideDrawer() {\n    return await Fn.hideDrawer({ self: this })\n  }\n  showModal = () => {\n    this.setState({\n      insertModalVisible: true\n    });\n  }\n  handleOk = e => {\n    console.log(e);\n    this.setState({\n      insertModalVisible: false\n    });\n  }\n  handleCancel = e => {\n    console.log(e);\n    this.setState({\n      insertModalVisible: false\n    });\n  }\n\n  avatar(data) {\n    console.log('avatar ', data)\n    const user = data\n\n    if (user && user.profile && user.profile.picture.length) {\n      return user.profile.picture\n    }\n    else {\n      return '/img/placeholder.png';\n    }\n  }\n  componentWillUnmount() {\n  }\n  componentDidUpdate() {\n    // console.log('[[ Home Updated ]]', this.props)\n  }\n  async componentDidMount() {\n\n    // this.start()\n    this.context.setPage({ title: \"My Projects\", subtitle: \"...\"})\n\n    this.setButtons()\n\n    this.fetchProjects()\n\n    document.querySelector(\"body\").scroll({\n      top: 0,\n      left: 0,\n      behavior: \"smooth\"\n    })\n\n  }\n  render() {\n\n    return (\n\n      <AccountConsumer>\n        {props => (\n          console.log('[[ OwnProfile <AccountContext.Consumer> ]]', props),\n\n          <TransitionLayout>\n\n            <section id=\"MyProjects\" className={(this.props.dashboard ? \"  \" : \" pa4 pb6 \") + (\" w-100 mw8 center mt3-  \")}>\n              {/* <Refresh\n                ready={this.state.ready}\n                dashboard={this.props.dashboard}\n                refresh={this.refresh} /> */}\n              {/* <div\n                onClick={this.refresh}\n                className={(this.props.dashboard  ? \" top12vh\" : Fn.get('isMobile') ? \" top-6vh \" : \"  \") + (\" absolute top-0 right-0 pa4 pointer black-20- hover-black-40 flex flex-row items-center z-99 \")}>\n                <span className=\"mr2 f5 fw4 black-30\">{this.state.ready ? \"reload\" : \"loading\"}</span> {this.state.ready ? <Icon icon=\"refresh\" iconSize={15} className=\"black-40\" /> : <Spinner size={15} className=\"black-40\" />}\n              </div> */}\n\n              <div className=\"flex flex-column flex-row-ns justify-between mb4 mt3-\">\n\n                {/* <PageTitle\n                  title={\"My Projects\"}\n                  docs={this.state.ready && [...this.state.ownProjects, ...this.state.subscribedProjects]}\n                  showButton={false}\n                  ready={this.state.ready}\n                /> */}\n\n                {Fn.get('isMobile') &&\n                  <div id=\"CreateProject\" className=\"flex flex-column w-20-ns w-100 items-end justify-end mb2 mt3\">\n                    <button\n                      onClick={() => this.toggleCreateProject()}\n                      className={(\"br1- round bs-b bg-black-20 ph3 pv2 pointer bn relative w-100  \")} >\n\n                      <span className=\"f5 fw6 white pv1 flex items-center justify-center raleway\">\n\n                        {\n                          this.state.buttonLoading\n                            ? <Icon icon=\"loading\" className={' absolute right-0 f4 black-60 mr2'} />\n                            : <Icon icon={\"small-plus\"} iconSize={20} className={(' f4 black-60- white  absolute right-0 mr3')} />\n                        } Create a Project</span>\n\n                    </button>\n                  </div>\n                }\n\n              </div>\n\n              {!Fn.get('isMobile') && (\n                <section\n                  id=\"ToolbarButtons\"\n                  className=\"flex flex-column mb3\"\n                >\n                  <div className=\"flex flex-row justify-between mb3\">\n                    <div className=\"flex flex-row flex-auto mw6 br2 overflow-hidden\">\n                      {this.state.buttons.map((button, index) => (\n                        <button\n                          title={button.title}\n                          onClick={() =>\n                            this.filter({\n                              filter: this.state.filters[index],\n                              button: button\n                            })\n                          }\n                          id={button.title}\n                          className={\n                            (index > 0 && \" bl b--black-05 \") +\n                            (this.state.activeButton.title ===\n                              button.title\n                              ? \" bg-white-60 \"\n                              : \" bg-white \") +\n                            \" flex flex-column pa0 mr3- pointer justify-center items-center flex-auto\"\n                          }\n                        >\n                          <div\n                            id=\"\"\n                            className=\"flex flex-row ph0 pv0 items-center justify-center\"\n                          >\n                            <span className=\"f5 fw6 black-40 ph3 pv2\">\n                              {button.title}\n                            </span>\n                          </div>\n                        </button>\n                      ))}\n                    </div>\n                    <div id=\"CreateProject\" className=\"flex flex-column w-20-ns w-100 items-end justify-end mb2\">\n                      <button\n                        onClick={() => this.toggleCreateProject()}\n                        className={(\"br1- round bs-b bg-black-20 ph3 pv2 pointer bn relative w-100  \")} >\n\n                        <span className=\"f5 fw6 white pv1 flex items-center justify-center raleway\">\n\n                          {\n                            this.state.buttonLoading\n                              ? <Icon icon=\"loading\" className={' absolute right-0 f4 black-60 mr2'} />\n                              : <Icon icon={\"small-plus\"} iconSize={20} className={(' f4 black-60- white  absolute right-0 mr3')} />\n                          } Create a Project</span>\n\n                      </button>\n                    </div>\n                  </div>\n                </section>\n              )}\n\n              {/* {!Fn.get('isMobile') &&\n                <section id=\"ToolbarButtons\" className=\"flex flex-column mb3\">\n\n                  <div className=\"flex flex-row justify-between mb3\">\n\n                    <div className=\"flex flex-row\">\n                      {\n                        this.state.buttons.map((button, index) => (\n                          <button\n                            title={button.title}\n                            onClick={() => this.filter({ filter: this.state.filters[index], button: button })}\n                            id=\"CV-button\"\n                            className={(this.state.activeButton.title === button.title ? \" bg-white-60 \" : \"  \") + (\" flex flex-column pa0 mr3 pointer justify-center \")}>\n\n                            <div id=\"\" className=\"flex flex-row ph0 pv0 items-center justify-center\">\n\n                              <span className=\"f5 fw4 black-60 ph3 pv2\">{button.title}</span>\n\n                            </div>\n\n                          </button>\n                        ))\n                      }\n                    </div>\n                    <div id=\"CreateProject\" className=\"flex flex-column w-20-ns w-100 items-end justify-end mb2\">\n                      <button\n                        onClick={() => this.toggleCreateProject()}\n                        className={(\"br1- round bs-b bg-black-20 ph3 pv2 pointer bn relative w-100  \")} >\n\n                        <span className=\"f5 fw6 white pv0 flex items-center justify-center\">\n\n                          {\n                            this.state.buttonLoading\n                              ? <Icon icon=\"loading\" className={' absolute right-0 f4 black-60 mr2'} />\n                              : <Icon icon={\"small-plus\"} iconSize={20} className={(' f4 black-60- white  absolute right-0 mr3')} />\n                          } Create a Project</span>\n\n                      </button>\n                    </div>\n\n                  </div>\n\n                </section>\n              } */}\n              {/* \n              <Projects\n                projects={props.account.user.profile.projects}\n                addRecentWorkProject={this.addRecentWorkProject}\n              /> */}\n              <div className=\"flex flex-column flex-row-ns col-2 justify-between\">\n               \n\n                <div className=\"flex flex-column mt4- w-50\">\n\n                  <div id=\"\" className=\"flex flex-column flex-row-ns ph0 pb3 items-start items-center-ns justify-start\">\n\n                    <span className=\"f5 fw6 black-50 pv2\">Created Projects</span>\n                    <span className=\"f6 fw5 black-30 pv0 pv2-ns flex items-center ml3-ns\"><Icon icon={'info-sign'} iconSize={15} className=\"black-20 mr2\" /> Projects you own</span>\n\n                  </div>\n                  {\n                    this.state.ready && this.state.ownProjectsReady ? (\n                      this.state.ownProjects.length > 0 ? (\n                        <ListProjects\n                          projects={this.state.ownProjects}\n                          activeProject={this.state.activeProject}\n                          className=\"trans-a\"\n                          showDrawer={this.showDrawer}\n                          hideDrawer={this.hideDrawer}\n                          theme={props.theme}\n                          activeCurrency={props.activeCurrency}\n                          exchangeRate={props.exchangeRate}\n                        />\n                      ) : (\n                          <div id=\"\" className=\"flex flex-row ph0 mv4 items-center justify-start\">\n\n                            <span className=\"f6 fw5 black-50 pv2 ph3 ba b--black-05\">No projects to show</span>\n\n                          </div>\n                        )\n                    ) : (\n                        <div className=\"trans-a\">\n                          <Skeleton active />\n                        </div>\n                      )\n                  }\n\n                </div> \n                <div className=\"flex flex-column\">\n                  <div id=\"\" className=\"flex flex-column flex-row-ns ph0 pb3 items-start items-center-ns justify-start\">\n\n                    <span className=\"f5 fw6 black-50 pv2\">Subscribed Projects</span>\n                    <span className=\"f6 fw5 black-30 pv0 pv2-ns flex items-center ml3-ns\"><Icon icon={'info-sign'} iconSize={15} className=\"black-20 mr2\" /> Projects you crew for</span>\n\n                  </div>\n\n                  {\n                    this.state.ready && this.state.subscribedProjectsReady ? (\n                      this.state.subscribedProjects.length > 0 ? (\n                        <ListProjects\n                          projects={this.state.subscribedProjects}\n                          activeProject={this.state.activeProject}\n                          className=\"trans-a\"\n                          showDrawer={this.showDrawer}\n                          hideDrawer={this.hideDrawer}\n                          theme={props.theme}\n                          activeCurrency={props.activeCurrency}\n                          exchangeRate={props.exchangeRate}\n                        />\n                      ) : (\n                          <div id=\"\" className=\"flex flex-row ph0 pb3 items-center justify-start\">\n\n                            <span className=\"f6 fw5 black-50 pv2 ph3 mv4 ba b--black-05\">No projects to show</span>\n\n                          </div>\n                        )\n                    ) : (\n                        <div className=\"trans-a\">\n                          <Skeleton active />\n                        </div>\n                      )\n                  }\n                </div>\n                \n                </div>\n\n              {Fn.get('isMobile') &&\n                <div className=\"bg-white fixed bottom-7vh left-0 w-100 flex flex-row bs-b bb b--black-05\">\n                  {\n                    this.state.buttons.map((button, index) => (\n                      <button\n                        title={button.title}\n                        onClick={() => this.filter({ filter: this.state.filters[index], button: button })}\n                        id=\"CV-button\"\n                        className={(this.state.activeButton.title === button.title ? \" bg-black-05 fw6\" : \" bg-white fw5 \") + (\" flex flex-column pa0 pointer justify-center flex-auto bl b--black-05\")}>\n\n                        <div id=\"\" className=\"flex flex-row ph0 pv0 items-center justify-center\">\n\n                          <span className=\"f5 -fw6 black ph3 pv3\">{button.title}</span>\n\n                        </div>\n\n                      </button>\n                    ))\n                  }\n                </div>}\n\n              {\n                this.state.createProject &&\n                <CrewFinder\n                  toggleCreateProject={this.toggleCreateProject}\n                  type={'createProject'}\n                  addToCrew={this.addToCrew}\n                  addToFavourites={this.addToFavourites}\n                  openDialog={this.openDialog}\n                  closeDialog={this.closeDialog}\n                  saveAndCreateAccount={this.saveAndCreateAccount}\n                  saveAndCreateAccountButtonLoading={this.state.saveAndCreateAccountButtonLoading}\n                />\n              }\n\n              <Dialog\n                className={'bp3-light'}\n                // icon=\"info-sign\"\n                onClose={this.toggleDialog}\n                title={this.state.dialogTitle}\n                onValueChange={this.onValueChange}\n                {...this.state}\n              >\n                {\n                  this.state.isOpen &&\n\n                  <div className=\"flex flex-column pa4-\">\n\n                    <div className=\"flex flex-column\">\n\n                      <div className=\"flex flex-row\">\n\n                        <section id=\"Profile\" className=\"flex flex-column w-100 \">\n\n                          <div className=\"flex flex-row w-100\">\n\n                            <div className=\"flex flex-column w-100=\">\n\n                              <div\n\n                                style={{ width: '160px', backgroundImage: 'url(' + this.avatar(this.state.activeUser) + ')' }}\n                                className=\"pointer h-100   cover bg-center\"></div>\n\n                            </div>\n\n                            <div className=\"flex flex-column justify-center w-100\">\n\n                              <div className=\"flex flex-column justify-center w-100 pa4\">\n\n                                <div className=\"f4 flex flex-column w-100\">\n                                  <span className=\"fw6 black-80\">{this.state.activeUser.profile.name && this.state.activeUser.profile.name.first} {this.state.activeUser.profile.name && this.state.activeUser.profile.name.last}</span>\n                                  <span className=\"flex items-start fw4 ml0 mt2 f5 black-50\">{this.state.activeUser.position}</span>\n                                </div>\n\n                                <div className=\"flex flex-row flex-wrap w-100 pt3 black-60\">\n\n                                  <div className=\"flex flex-column mr3 mb1\">\n                                    <span className=\"f6 fw4 black-40\">Age<span className=\"fw6 ml2 black-60\">{moment().diff(this.state.activeUser.profile.dob, 'years')}</span></span>\n                                  </div>\n\n                                  <div className=\"flex flex-column mr3 mb1\">\n                                    <span className=\"f6 fw4 black-40\">Gender<span className=\"fw6 ml2 black-60\">{this.state.activeUser.profile.gender && this.state.activeUser.profile.gender || \"\"}</span></span>\n                                  </div>\n\n                                  <div className=\"flex flex-column mr3 mb1\">\n                                    <span className=\"f6 fw4 black-40\">Location<span className=\"fw6 ml2 black-60\">{this.state.activeUser.profile.location && this.state.activeUser.profile.location.County || \"\"}</span></span>\n                                  </div>\n\n                                </div>\n\n                              </div>\n\n                              <div className=\"flex flex-row justify-center w-100\">\n                                <button\n                                  onClick={() => this.addToNetwork(this.state.activeUser)}\n                                  className=\"pointer pv3 flex-auto flex flex-row justify-center pa0 ma0 bg-white\">\n                                  <span className=\"f5 fw6 black-40 mr2\">Add to Network</span>\n\n                                  {\n                                    this.state.addToNetworkButtonLoading ?\n                                      <Spinner size={15} /> :\n                                      <Icon icon={'small-plus'} iconSize={15} className=\"black-50\" />\n                                  }\n\n                                </button>\n                                <button\n                                  onClick={() => this.addToCrew(this.state.activeUser)}\n                                  className=\"pointer pv3 flex-auto flex flex-row justify-center pa0 ma0 bg-white bl b--black-10\">\n                                  <span className=\"f5 fw6 black-40 mr2 \">Invite to Crew</span>\n                                  {\n                                    this.state.addToCrewButtonLoading ?\n                                      <Spinner size={15} /> :\n                                      <Icon icon={'small-plus'} iconSize={15} className=\"black-50\" />\n                                  }\n\n                                </button>\n                              </div>\n\n                            </div>\n\n                          </div>\n\n                        </section>\n\n                      </div>\n\n                    </div>\n\n                  </div>\n                }\n              </Dialog>\n\n            </section>\n\n          </TransitionLayout>\n\n        )}\n\n      </AccountConsumer>\n    )\n  }\n}\n\nexport default MyProjects;\nMyProjects.contextType = AccountContext.Consumer","const dataModel = {\n    data: {\n        info: 'contains associated project, conversation or event data',\n        sender: {\n            profile: {}\n        },\n        applicant: {\n            profile: {}\n        },\n        event: {},\n        project: {},\n        message: {},\n        position: {},\n    }\n}\n\nexport const notificationTypes = {\n    crewInvite: (__) => {\n        return {\n            title: \"Invite\",\n            content: \"You have been invited to crew for a project\",\n            data: __.data,\n            icon: \"\",\n            createdAt: new Date(),\n            read: false,\n            owner: __.owner\n        }\n    },\n    crewInviteAccept: (__) => {\n        return {\n            title: \"Invite Accepted\",\n            content: __.data.sender.name.first + \" \" + __.data.sender.name.last + \" has accepted your invitation to \" + __.data.project.title,\n            data: __.data,\n            icon: \"\",\n            createdAt: new Date(),\n            read: false,\n            owner: __.owner\n        }\n    },\n    crewInviteReject: (__) => {\n        return {\n            title: \"Invite Rejected\",\n            content: __.data.sender.name.first + \" \" + __.data.sender.name.last + \" has rejected your invitation to \" + __.data.project.title,\n            data: __.data,\n            icon: \"\",\n            createdAt: new Date(),\n            read: false,\n            owner: __.owner\n        }\n    },\n    message: (__) => {\n        return {\n            title: \"New Message\",\n            content: __.content.substring(0, 50),\n            data: __.data,\n            icon: \"\",\n            createdAt: new Date(),\n            read: false,\n            owner: __.owner\n            \n        }\n    },  \n    applicationReject: (__) => {\n        return {\n            title: \"Rejected\",\n            content: \"Your application for crew has been rejected\",\n            data: __.data,\n            icon: \"\",\n            createdAt: new Date(),\n            read: false,\n            owner: __.owner\n        }\n    },\n    applicationApprove: (__) => {\n        return {\n            title: \"Approved\",\n            content: \"Your application for crew has been approved\",\n            data: __.data,\n            icon: \"\",\n            createdAt: new Date(),\n            read: false,\n            owner: __.owner\n        }\n    },\n    crewApplication: (__) => {\n        return {\n            title: \"Crew Application\",\n            content: __.data.applicant.name.first + \" \" + __.data.applicant.name.last + \" has applied as crew for \" + __.data.project.title,\n            data: __.data,\n            icon: \"\",\n            createdAt: new Date(),\n            read: false,\n            owner: __.owner\n        }\n    },\n    connectRequest: (__) => {\n        return {\n            title: \"Connection Request\",\n            content: __.data.sender.name.first + \" \" + __.data.sender.name.last + \" wants to connect\",\n            data: __.data,\n            icon: \"\",\n            createdAt: new Date(),\n            read: false,\n            owner: __.owner\n        }\n    },\n    connectDeny: (__) => {\n        return {\n            title: \"Connection Ignored\",\n            data: __.data,\n            content: __.content,\n            icon: \"\",\n            createdAt: new Date(),\n            read: false,\n            owner: __.owner\n        }\n    },\n    addToChatGroup: (__) => {\n        return {\n            title: \"Chat Group Invite\",\n            content: __.data.sender.name.first + \" \" + __.data.sender.name.last + \" has added you to a chat group\",\n            data: __.data,\n            icon: \"\",\n            createdAt: new Date(),\n            read: false,\n            owner: __.owner\n        }\n    },\n    eventInvite: (__) => {\n        return {\n            title: \"Event Invite\",\n            content: __.data.sender.name.first + \" \" + __.data.sender.name.last + \" has invited you to an event\",\n            data: __.data,\n            icon: \"\",\n            createdAt: new Date(),\n            read: false,\n            owner: __.owner\n        }\n    },\n    eventInviteAccept: (__) => {\n        return {\n            title: \"Event Invite Accepted\",\n            content: __.data.sender.name.first + \" \" + __.data.sender.name.last + \" has accepted your invite to event: \" + __.data.event.title,\n            data: __.data,\n            icon: \"\",\n            createdAt: new Date(),\n            read: false,\n            owner: __.owner\n        }\n    },\n    eventInviteReject: (__) => {\n        return {\n            title: \"Event Invite Rjected\",\n            content: __.data.sender.name.first + \" \" + __.data.sender.name.last + \" cannot attend your event \" + __.data.event.title,\n            data: __.data,\n            icon: \"\",\n            createdAt: new Date(),\n            read: false,\n            owner: __.owner\n        }\n    },\n\n}\n\nwindow.notificationTypes = notificationTypes;\nexport default notificationTypes","import React from \"react\";\n// import { getGlobal, setGlobal, useGlobal } from \"reactn\";\n// import methods from '../../../utils/methods';\nimport { Empty, Skeleton } from \"antd\";\nimport { Fn, app } from \"../../../../utils/fn/Fn.js\";\nimport { Spinner, Icon } from \"@blueprintjs/core\";\n// import { RingSpinner } from \"react-spinners-kit\";\nimport TransitionLayout from \"../../../Layouts/Transition\";\n// import InsertModal from \"../../elements/forms/project/modal/insert\";\nimport ListNotifications from \"../../../elements/display/notifications\";\nimport PageTitle from \"../../../elements/layout/PageTitle_B\";\n\nimport NotificationDrawer from \"../../../elements/display/drawers/notificationDrawer\";\n// import fn from '../../../../../../../UNIT/client/src/utils/fn/fn'\nimport AccountContext, {\n  AccountConsumer\n} from \"../../../../utils/context/AccountContext.js\";\nimport Loading from \"../../../elements/Loading.js\";\n// import notificationTypes\nimport { notificationTypes } from \"./types\";\n\nclass Notifications extends React.Component {\n  constructor(props) {\n    super(props);\n    // console.log('PROPS', props)\n    this.state = {\n      ready: false,\n      notifications: [],\n      activeNotification: null,\n      showButtons: true,\n      filter: false\n    };\n\n    this.fetchNotifications = this.fetchNotifications.bind(this);\n    this.refresh = this.refresh.bind(this);\n    this.showDrawer = this.showDrawer.bind(this);\n    this.handleOk = this.handleOk.bind(this);\n    this.hideDrawer = this.hideDrawer.bind(this);\n    this.filter = this.filter.bind(this);\n  }\n  filter(type) {\n    let type_ = type === \"new\" ? false : true;\n\n    this.setState({\n      filter: type_\n    });\n  }\n\n  async fetchNotifications() {\n    const userId = Fn.get(\"account\").user.id;\n    await app.fetchNotifications({ userId: userId, self: this });\n  }\n\n  setReady() {\n    this.setState({ ready: true });\n  }\n\n  async refresh() {\n    this.setState({\n      ready: false\n    });\n    setTimeout(async () => {\n      return await this.fetchNotifications();\n    }, 1000);\n\n    // this.fetchCollection()\n  }\n  async showDrawer(data) {\n    const { notification } = data;\n    console.log(\"show drawer \", notification);\n    this.setState({\n      drawerReady: true,\n      docInfoVisible: true,\n      activeNotification: notification\n    });\n\n    // let notification =\n    notification.read = true;\n    await app.updateNotification({ self: this, notification });\n\n    // setGlobal({ activeConversation: conversation, activeChef: chef })\n  }\n\n  hideDrawer(doc) {\n    this.setState({\n      drawerReady: false,\n      docInfoVisible: false\n    });\n  }\n  showModal = () => {\n    this.setState({\n      insertModalVisible: true\n    });\n  };\n  handleOk = e => {\n    // console.log(e);\n    this.setState({\n      insertModalVisible: false\n    });\n  };\n  handleCancel = e => {\n    // console.log(e);\n    this.setState({\n      insertModalVisible: false\n    });\n  };\n  componentWillUnmount() {}\n  async componentDidMount() {\n    this.context.setPage({ title: \"Notifications\", subtitle: \"...\"})\n    this.fetchNotifications();\n  }\n  render() {\n    return (\n      <AccountContext.Consumer>\n        {props => (\n          <TransitionLayout>\n            {!this.state.ready && !this.props.dashboard && <Loading />}\n\n            <section\n              id=\"Notifications\"\n              className={\n                (this.props.padding !== false ? \" pa4 \" : \"  \") +\n                \" w-100 mw8 center mt3- \"\n              }\n            >\n              {/* <div onClick={this.refresh} className=\"absolute top-0 right-0 pa4\">\n            <Icon type=\"sync\" />\n          </div> */}\n\n              {/* <PageTitle\n                title={\"Notifications\"}\n                ready={this.state.ready}\n                theme={props.theme}\n                showInsertForm={this.showModal}\n                docs={this.state.notifications.filter(\n                  a => a.read === this.state.filter\n                )}\n                activeDoc={this.state.activeProject}\n                updateActiveDoc={this.updateActiveDoc}\n                showButton={false}\n              /> */}\n\n              {this.state.showButtons && (\n                <div className={\" flex flex-row \"}>\n                  <div className=\"flex flex-row\">\n                    <div\n                      onClick={() => this.filter(\"new\")}\n                      className={\n                        (this.state.filter ? \" fw5 \" : \" fw6 \") +\n                        \" pointer flex flex-column pv2 f5 black-30 mr2 \"\n                      }\n                    >\n                      New\n                    </div>\n                    <div\n                      onClick={() => this.filter(\"read\")}\n                      className={\n                        (this.state.filter ? \" fw6 \" : \" fw5 \") +\n                        \" pointer flex flex-column pv2 f5 black-30 mr2 \"\n                      }\n                    >\n                      Read\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              <div className=\"h2\"></div>\n\n              {this.state.ready && !this.state.filter && this.state.notifications.filter(\n                      a => a.read === false\n                    ).length === 0 && (\n                <div\n                  className=\"flex flex-row ph0 pb3 items-center justify-start\"\n                  id=\"\"\n                >\n                  <span className=\"f6 fw5 black-50 pv2 ph3 ba b--black-05\">\n                    No new notifications\n                  </span>\n                </div>\n              )}\n\n\n              {this.state.ready && (\n                this.state.notifications.length > 0 && (\n                  <ListNotifications\n                    notifications={this.state.notifications.filter(\n                      a => a.read === this.state.filter\n                    )}\n                    activeNotification={this.state.activeNotification}\n                    showDrawer={this.showDrawer}\n                    // theme={Fn.get('theme').config.theme}\n                    setReady={this.setReady}\n                    // filter={}\n                  />\n                )\n              )}\n              { !this.state.ready && (\n                <div className=\"trans-a\">\n                  <Skeleton active />\n                  <Skeleton active />\n                </div>\n              )\n              }\n\n              {this.state.ready ? (\n                <NotificationDrawer\n                  type={\"info\"}\n                  notification={this.state.notification}\n                  doc={this.state.activeNotification}\n                  // chef={this.state.activeChef}/\n                  // updateDoc={this.updateDoc}\n                  visible={this.state.docInfoVisible}\n                  hideDrawer={this.hideDrawer}\n                  className=\"NotificationDetail\"\n                  close={this.hideDrawer}\n                  refresh={this.refresh}\n\n                  // theme={/Fn.get('theme').config.theme}\n                  // reserve={this.reserve}\n                  // sendMessage={this.sendMessage}\n                  // conversationReady={this.state.drawerReady}\n                />\n              ) : null}\n\n              {/* {!this.props.dashboard && (\n                <div\n                  onClick={this.refresh}\n                  className={\n                    (Fn.get(\"isMobile\") ? \" top-6vh \" : \"  \") +\n                    \" absolute top-0 right-0 pa4 pointer black-20- hover-black-40 flex flex-row items-center z-9 \"\n                  }\n                >\n                  <span className=\"mr2 f5 fw4 black-30\">\n                    {this.state.ready ? \"reload\" : \"loading\"}\n                  </span>{\" \"}\n                  {this.state.ready ? (\n                    <Icon icon=\"refresh\" iconSize={15} className=\"black-40\" />\n                  ) : (\n                    <Spinner size={15} className=\"black-40\" />\n                  )}\n                </div>\n              )} */}\n            </section>\n          </TransitionLayout>\n        )}\n      </AccountContext.Consumer>\n    );\n  }\n}\n\nexport default Notifications;\nNotifications.contextType = AccountContext;","// @flow\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nclass FormBio extends React.Component {\n  constructor(props) {\n\n    super(props)\n\n    this.state = {\n      hasError: false,\n      buttonLoading: false\n    }\n\n    this.bio = React.createContext()\n    this.submit = this.submit.bind(this)\n  }\n\n  submit() {\n    this.setState({\n      buttonLoading: true\n    })\n    setTimeout(() => {\n\n      this.props.submitBio(this.bio.current.value)\n    },1000)\n    // console.log(this.bio.current.value)\n  }\n\n  componentDidMount = () => {\n    console.log('FormBio mounted');\n  }\n\n  render() {\n\n    if (this.state.hasError) {\n\n      return <h1>Something went wrong.</h1>\n\n    }\n\n    return (\n      <div className=\"FormBio-wrapper\" className=\"flex flex-column w-100\">\n\n        <div className=\"flex-column flex w-100 pa4\">\n\n          <div className=\" flex w-100\">\n\n            <textarea\n              rows={5}\n              type={'textarea'}\n              placeholder={'Enter your bio'}\n              ref={this.bio}\n              defaultValue={this.props.value}\n              className=\"flex -round bn w-100 mb0 bn br1 pv3 ph4 black-50 f3 fw5\" />\n\n          </div>\n\n\n\n        </div>\n\n        <div className=\"form-row flex w-100 bg-white ph4 pv4 bs-b\">\n\n          <div\n            onClick={this.submit}\n            className=\"bg-black-20 round tc w-100 pointer flex button flex-column ph3 pv3 ba- -b--black-10 f4 fw6 white -black-50\">\n\n{this.state.buttonLoading && (\n                    <div className=\"flex flex-column pv2 items-center justify-center\">\n                      {/* <Spinner size={25} /> */}\n                      <div className=\"sp sp-3balls\"></div>\n                    </div>\n                  )}\n\n{!this.state.buttonLoading && (\n                    <div>Save</div>\n                  )}\n\n            \n          </div>\n\n        </div>\n\n        </div>\n        )\n      }\n    }\n    \n    \n    \nexport default FormBio;","// @flow\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { Radio, RadioGroup } from \"@blueprintjs/core\";\n\nimport { DatePicker, TimePrecision } from \"@blueprintjs/datetime\";\nimport LocationSearchBar from \"../../elements/display/forms/LocationSearchBar.js\";\n\nimport \"./style.css\";\n\nclass FormProfile extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      hasError: false,\n      dob: this.props.value.dob,\n      gender: this.props.value.gender,\n      location: this.props.value.location\n    };\n\n    this.firstname = React.createContext();\n    this.lastname = React.createContext();\n    this.role = React.createContext();\n    this.dob = React.createContext();\n    this.gender = React.createContext();\n    this.location = React.createContext();\n\n    this.submit = this.submit.bind(this);\n    this.handleDateChange = this.handleDateChange.bind(this);\n    this.handleRadioChange = this.handleRadioChange.bind(this);\n    this.setLocation = this.setLocation.bind(this);\n  }\n  setLocation(data) {\n    console.log(\"location\", data);\n    this.setState({\n      location: data\n    });\n  }\n  handleRadioChange(e) {\n    console.log(e.target.value);\n    this.setState({ gender: e.target.value });\n  }\n  handleDateChange(e) {\n    console.log(e);\n    this.setState({ dob: e.toString() });\n  }\n\n  submit() {\n    const data = {\n      firstname: this.firstname.current.value,\n      lastname: this.lastname.current.value,\n      role: this.role.current.value,\n      dob: this.state.dob,\n      gender: this.state.gender,\n      location: this.state.location\n    };\n\n    this.props.submitProfile(data);\n    // console.log(this.bio.current.value)\n  }\n\n  componentDidMount = () => {\n    console.log(\"FormBio mounted\");\n  };\n\n  static getDerivedStateFromError(error) {\n    // getDerivedStateFromError -> Update state so the next render will show the fallback UI.\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, info) {\n    // You can also log the error to an error reporting service\n  }\n\n  getDerivedStateFromProps = (nextProps, prevState) => {\n    console.log(\"FormBio getDerivedStateFromProps\", nextProps, prevState);\n  };\n\n  getSnapshotBeforeUpdate = (prevProps, prevState) => {\n    console.log(\"FormBio getSnapshotBeforeUpdate\", prevProps, prevState);\n  };\n\n  componentDidUpdate = () => {\n    console.log(\"FormBio did update\");\n  };\n\n  componentWillUnmount = () => {\n    console.log(\"FormBio will unmount\");\n  };\n\n  render() {\n    if (this.state.hasError) {\n      return <h1>Something went wrong.</h1>;\n    }\n\n    return (\n      <div id=\"FormProfile\" className=\"flex flex-column items-center w-100\">\n        <div className=\"flex-column flex w-100 mh-400 overflow-auto pa5\">\n          <div className=\" flex flex-row flex flex-row items-center w-100 mb4 items-center w-100 mb\">\n            <span className=\"f5 fw5 black-50 w-30 pr3\">First Name</span>\n            <input\n              type={\"text\"}\n              placeholder={\"Your first name\"}\n              ref={this.firstname}\n              defaultValue={this.props.value.name.first}\n              className=\"flex round bn w-100 mb0 bn br1 pv3 ph4 black-50 f3 fw5\"\n            />\n          </div>\n          <div className=\" flex flex-row flex flex-row items-center w-100 mb4 items-center w-100 mb\">\n            <span className=\"f5 fw5 black-50 w-30 pr3\">Last Name</span>\n            <input\n              type={\"text\"}\n              placeholder={\"Your first name\"}\n              ref={this.lastname}\n              defaultValue={this.props.value.name.last}\n              className=\"flex round bn w-100 mb0 bn br1 pv3 ph4 black-50 f3 fw5\"\n            />\n          </div>\n          <div className=\" flex flex-row flex flex-row items-center w-100 mb4 items-center w-100 mb\">\n            <span className=\"f5 fw5 black-50 w-30 pr3\">Gender</span>\n\n            {/* <input\n              type={'text'}\n              placeholder={'Your gender'}\n              ref={this.gender}\n              defaultValue={this.props.value.gender}\n              className=\"flex round bn w-100 mb0 bn br1 pv3 ph4 black-50 f3 fw5\" /> */}\n\n            <RadioGroup\n              inline={true}\n              // label=\"Gender\"\n              name=\"group\"\n              onChange={this.handleRadioChange}\n              selectedValue={this.state.gender}\n              large={true}\n            >\n              <Radio large label=\"Male\" value=\"male\" />\n              <Radio large label=\"Female\" value=\"female\" />\n            </RadioGroup>\n          </div>\n          <div className=\" flex flex-row flex flex-row items-center w-100 mb4 items-center w-100 mb\">\n            <span className=\"f5 fw5 black-50 w-30 pr3\">Role</span>\n\n            <input\n              type={\"text\"}\n              placeholder={\"Your professional role\"}\n              ref={this.role}\n              defaultValue={this.props.role}\n              className=\"flex round bn w-100 mb0 bn br1 pv3 ph4 black-50 f3 fw5\"\n            />\n          </div>\n\n          <div className=\" flex flex-row flex flex-row items-center w-100 mb4 items-center w-100 mb\">\n            <span className=\"f5 fw5 black-50 w-30 pr3 pb3 pt3\">Location</span>\n\n            <LocationSearchBar\n              type={\"profile\"}\n              setLocation={this.setLocation}\n            />\n          </div>\n          <div className=\" flex flex-row flex flex-row items-center w-100 mb4 items-center w-100 mb mb3\">\n            <span className=\"f5 fw5 black-50 w-30 pr3 pb3 pt3\">\n              Your Date of Birth\n            </span>\n            <div className=\"flex bn w-100 mb0 bn br1 pa3 black-50 f4 fw5\">\n              <DatePicker\n                minDate={new Date(\"01/01/1940\")}\n                defaultValue={\n                  typeof this.props.value.dob !== \"undefined\" &&\n                  this.props.value.dob.length > 0\n                    ? new Date(this.props.value.dob)\n                    : null\n                }\n                className={\"\"}\n                onChange={this.handleDateChange}\n              />\n            </div>\n          </div>\n        </div>\n\n        <div className=\"form-row flex w-100 bg-white ph4 pv4 bs-b\">\n          <div\n            onClick={this.submit}\n            className=\"bg-black round tc w-100 pointer flex button flex-column ph3 pv3 ba- -b--black-10 f4 fw6 white -black-50\"\n          >\n            Submit\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default FormProfile;\n","// @flow\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { DatePicker } from 'antd';\nimport Filepond from '../../elements/upload/Filepond.js';\nimport Fn from '../../../utils/fn/Fn.js';\n\nconst { MonthPicker, RangePicker } = DatePicker;\nconst dateFormat = 'YYYY/MM/DD';\n\nclass FormPortfolioProject extends React.Component {\n  constructor(props) {\n\n    super(props)\n\n    this.state = {\n      hasError: false,\n      image: '',\n      startDate: '',\n      endDate: ''\n    }\n\n    this.title = React.createContext()\n    this.description = React.createContext()\n    this.position = React.createContext()\n    // this.image = React.createContext()\n\n    this.submit = this.submit.bind(this)\n    this.setImage = this.setImage.bind(this)\n    this.handleRangeChange = this.handleRangeChange.bind(this)\n  }\n  handleRangeChange(e) {\n    console.log(e)\n    let startDate = e[0].toString()\n    let endDate = e[1].toString()\n    this.setState({\n      startDate, endDate\n    })\n  }\n  setImage(image) {\n    this.setState({\n      image: image\n    })\n  }\n  async submit() {\n\n    let title = this.title.current.value;\n    let description = this.description.current.value;\n    let position = this.position.current.value;\n    let image = this.state.image;\n    let date = {\n      startDate: this.state.startDate,\n      endDate: this.state.endDate\n    }\n\n    let data = {\n      title, description, position, image, date\n    }\n    console.log()\n    // this.props.submitPortfolioItem(this.bio.current.value)\n    await Fn.submitPortfolioItem({ self: this, data, updateAccount: this.props.updateAccount, closeDialog: this.props.closeDialog })\n    // console.log(this.bio.current.value)\n  }\n\n  componentDidMount = () => {\n    console.log('FormBio mounted');\n  }\n\n  static getDerivedStateFromError(error) {\n    // getDerivedStateFromError -> Update state so the next render will show the fallback UI.\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, info) {\n    // You can also log the error to an error reporting service\n  }\n\n  getDerivedStateFromProps = (nextProps, prevState) => {\n    console.log('FormBio getDerivedStateFromProps', nextProps, prevState);\n  }\n\n  getSnapshotBeforeUpdate = (prevProps, prevState) => {\n    console.log('FormBio getSnapshotBeforeUpdate', prevProps, prevState);\n  }\n\n  componentDidUpdate = () => {\n    console.log('FormBio did update');\n  }\n\n  componentWillUnmount = () => {\n    console.log('FormBio will unmount');\n  }\n\n  render() {\n\n    if (this.state.hasError) {\n\n      return <h1>Something went wrong.</h1>\n\n    }\n\n    return (\n      <div className=\"FormBio-wrapper\" className=\"flex flex-column w-100\">\n\n        <div className=\"flex-column flex w-100 pa4\">\n\n          <div className=\" flex flex-column w-100\">\n            <span className=\"f5 fw5 black-50 pb3 pt3\">Project Title</span>\n            <input\n              type={'text'}\n              placeholder={'Some cool project'}\n              ref={this.title}\n              // defaultValue={this.props.value.name.first}\n              className=\"flex w-100 mb3 bn br1 pa3 black-50 f3 fw5\" />\n\n          </div>\n\n          <div className=\" flex flex-column w-100\">\n            <span className=\"f5 fw5 black-50 pb3 pt3\">Project Description</span>\n            <textarea\n              rows={5}\n              type={'textarea'}\n              placeholder={'Lorum ipsum dolor sit amet'}\n              ref={this.description}\n              // defaultValue={this.props.value}\n              className=\"flex w-100 mb3 bn br1 pa3 black-50 f3 fw5\" />\n\n          </div>\n\n          <div className=\" flex flex-column w-100\">\n            <span className=\"f5 fw5 black-50 pb3 pt3\">Position Filled</span>\n            <input\n              type={'text'}\n              placeholder={'i.e Videographer'}\n              ref={this.position}\n              // defaultValue={this.props.value.name.first}\n              className=\"flex w-100 mb3 bn br1 pa3 black-50 f3 fw5\" />\n\n          </div>\n          <div className=\"form-row flex flex-column pt4 w-100\">\n            <label className=\"f7 fw6 black-90 pb2\">Project Date Range</label>\n\n\n\n            <RangePicker\n              className=\"bs-a f4 fw5\"\n              onChange={this.handleRangeChange}\n              // defaultValue={[moment('2015/01/01', dateFormat), moment('2015/01/01', dateFormat)]}\n              format={dateFormat}\n            />\n          </div>\n\n          <div className=\" flex flex-column w-100\">\n            <span className=\"f5 fw5 black-50 pb3 pt3\">Image</span>\n\n            <Filepond setImage={this.setImage} type={'WorkPortfolioImage'} closeDialog={this.closeDialog} />\n\n          </div>\n\n\n\n\n\n\n        </div>\n        <div className=\"form-row flex w-100 bg-white ph4 pv3\">\n\n          <div\n            onClick={this.submit}\n            className=\"tc w-100 pointer flex button flex-column ph3 pv2 ba b--black-10 f4 fw6 black-50\">\n            Submit\n  </div>\n\n        </div>\n\n      </div>\n    );\n  }\n}\n\n// FormBio.PropTypes = {\n\n// }\n\n// FormBio.defaultProps = {\n\n// }\n\nexport default FormPortfolioProject;","// @flow\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nclass FormSkills extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      hasError: false,\n      skills: [],\n      skills_: [{}],\n      buttonLoading: false\n    };\n\n    this.bio = React.createContext();\n    this.submit = this.submit.bind(this);\n\n    this.insertSkill = this.insertSkill.bind(this);\n    this.addSkillInput = this.addSkillInput.bind(this);\n    this.specOnChange = this.specOnChange.bind(this);\n  }\n\n  insertSkill(item) {\n    let skills = this.state.skills;\n    skills.push(item);\n    this.setState({ skills: skills });\n  }\n  addSkillInput() {\n    let skills_ = this.state.skills_;\n    skills_.push({});\n    this.setState({ skills_: skills_ });\n  }\n  specOnChange(data) {\n    const { e, index } = data;\n    let skills = this.state.skills;\n    skills[index] = e.target.value;\n    this.setState({\n      skills\n    });\n    console.log(this.state);\n  }\n\n  submit() {\n    this.setState({\n      buttonLoading: true\n    })\n    setTimeout(() => {\n\n      let skills = this.state.skills;\n    this.props.updateSkills(skills);\n    },1000)\n\n   \n    // console.log(this.bio.current.value)\n  }\n\n  componentDidMount = () => {\n    // console.log(\"FormBio mounted\");\n    let skills_ = [];\n    for(let item of this.props.skills) {\n      skills_.push({})\n    }\n    this.setState({\n      skills: this.props.skills,\n      skills_: skills_\n    });\n  };\n\n\n\n  render() {\n    // if (this.state.hasError) {\n    //   return <h1>Something went wrong.</h1>;\n    // }\n\n    return (\n      <div className=\"FormBio-wrapper\" className=\"flex w-100\">\n        <div className=\"flex-column flex w-100\">\n          <div className=\" flex w-100 pa4-\">\n            <div className=\"form-row flex flex-column pa4 w-100\">\n              <div className=\"form-row flex flex-column pb2 w-100\">\n                <label className=\"f5 fw5 black-50 pb2\">Skills</label>\n                <div className=\"flex flex-column flex-wrap w-100\">\n                  {this.state.skills_.map((item, index) => (\n                    <div className=\"flex pb2 w-100\">\n                      <input\n                        required={true}\n                        onChange={e => this.specOnChange({ e, index })}\n                        defaultValue={this.state.skills[index]}\n                        type={\"text\"}\n                        className=\"ttc w-100 flex flex-row ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a-\"\n                      />\n                    </div>\n                  ))}\n                </div>\n              </div>\n              <div className=\"form-row flex flex-row pt2 w-100\">\n                <button\n                  onClick={this.addSkillInput}\n                  className=\"bn br1 bg-black-30 f5 fw5 white pv1 ph2\"\n                >\n                  Add +\n                </button>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"form-row flex w-100 bg-white ph4 pv4 bs-b\">\n            <div\n              onClick={this.submit}\n              className=\"bg-black-20 round tc w-100 pointer flex button flex-column ph3 pv3 ba- -b--black-10 f4 fw6 white -black-50\"\n            >\n              {this.state.buttonLoading && (\n                <div className=\"flex flex-column pv2 items-center justify-center\">\n                  {/* <Spinner size={25} /> */}\n                  <div className=\"sp sp-3balls\"></div>\n                </div>\n              )}\n\n              {!this.state.buttonLoading && <div>Save</div>}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\n// FormBio.PropTypes = {\n\n// }\n\n// FormBio.defaultProps = {\n\n// }\n\nexport default FormSkills;\n","// @flow\nimport React from \"react\";\nimport { Icon } from \"@blueprintjs/core\";\n// import PropTypes from 'prop-types';\n\nconst SectionTitle = props => (\n  <div className=\"raleway w-100 flex flex-row b-b b--black-10 justify-between bg-white br2 overflow-hidden bs-b\">\n    <div className=\"flex flex-auto w--100 flex-row pb0\">\n      <p className=\"flex f5 fw6 black mb0 ph3 pv2 items-center justify-center\">\n        {props.title}\n      </p>\n\n      {props.labels &&\n        props.labels.map((label, index) => (\n          <p className=\"flex f6 fw5 black-20 mb0 ph3 pv2- items-center justify-center bl b--black-05\">\n            {label.count} {label.text}\n          </p>\n        ))}\n    </div>\n\n    {props.functionButton && (\n      <div className=\"flex flex-auto- flex-row pb0\">\n        <button\n          onClick={props.functionButton.function}\n          id=\"function-button\"\n          className=\"flex flex-column pointer h-100 bl b--black-10 ph0 bg-white\"\n        >\n          <div\n            id=\"\"\n            className=\"flex flex-row ph0 pv0 items-center justify-center bg-white h-100\"\n          >\n            <span className=\"f6 fw4 black-60 ph3\">\n              {props.functionButton.title}\n            </span>\n\n            <div\n              className=\"flex flex-column items-center justify-center ph3 pv2 white h-100\"\n              style={{ backgroundColor: \"rgb(179, 191, 149)\" }}\n            >\n              <Icon\n                icon={props.functionButton.icon}\n                className=\"bp3-icon bp3-icon-ring\"\n              ></Icon>\n            </div>\n          </div>\n        </button>\n      </div>\n    )}\n  </div>\n);\n\nexport default SectionTitle;\n","// @flow\nimport React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Icon } from \"@blueprintjs/core\";\n\nimport { Fn, app } from \"../../../utils/fn/Fn.js\";\nimport moment from \"moment\";\n\nimport SectionTitle from \"../_Elements/SectionTitle/SectionTitle.jsx\";\n\nvar GeoPattern = require(\"geopattern\");\nwindow.GeoPattern = GeoPattern;\n\n// import PropTypes from 'prop-types';\n\nclass RecentWork extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      hasError: false,\n      completedProjects: [],\n      archive: this.props.projects || [],\n      ready: false\n    };\n\n    this.getCompletedProjects = this.getCompletedProjects.bind(this);\n  }\n\n  async getCompletedProjects() {\n    // let projects = await Fn.get('subscribedProjects');\n    let projects = await app\n      .fetchSubscribedProjects({\n        self: this,\n        userId: this.props.user.id\n      })\n      .then(projects => {\n        console.log(\" \");\n        console.log(\" \");\n        console.log(\"subscribed projects\", projects);\n        console.log(\" \");\n        console.log(\" \");\n\n        let completed = [];\n\n        for (let project of projects) {\n          console.log(\" \");\n          console.log(\" \");\n          console.log(\"project\", project);\n          console.log(\" \");\n          console.log(\" \");\n\n          if (\n            project.hasOwnProperty(\"end_date\") &&\n            moment(project.end_date).isBefore(moment(new Date()))\n          ) {\n            completed.push(project);\n          }\n        }\n        this.setState({\n          completedProjects: completed,\n          ready: true\n        });\n        console.log(\" \");\n        console.log(\" \");\n        console.log(\"completed Projects\", completed);\n        console.log(\" \");\n        console.log(\" \");\n      });\n  }\n\n  componentDidMount = () => {\n    // console.log('RecentWork mounted');\n    this.getCompletedProjects();\n  };\n  render() {\n    if (this.state.hasError) {\n      return <h1>Something went wrong.</h1>;\n    }\n    return (\n      <section id=\"RecentWork\" className=\"flex w-100 mt4\">\n        <div className=\"flex flex-column mb2 pa0 br1 w-100\">\n          <SectionTitle\n            title={\"Recent Work\"}\n            functionButton={null}\n            labels={[\n              {\n                text: \"projects\",\n                count: this.state.completedProjects.length\n              }\n            ]}\n          />\n\n          <div className=\"flex flex-column pv3\">\n            <div className=\"flex flex-auto flex-column pb0 \">\n              <div className=\"flex flex-row flex-wrap f4 fw4 black-60 mb0 col-3 justify-between\">\n                {this.state.ready &&\n                  this.state.completedProjects.map(\n                    (item, index) => (\n                      console.log(\"[[ Project item ]]\", item),\n                      (\n                        <Link\n                          to={\"/project/\" + item.id}\n                          className={\n                            \"   raleway  pointer flex flex-row items-center justify-center pr3- mb4 br2 overflow-hidden bs-b \"\n                          }\n                        >\n                          <div\n                            style={{\n                              width: \"200px\",\n                              height: \"100%\",\n                              borderRadius: \"0\",\n                              backgroundImage:\n                                typeof item.media !== \"undefined\" &&\n                                item.media.images.length > 0\n                                  ? \"url(\" + item.media.images[0].url + \")\"\n                                  : GeoPattern.generate(item.title).toDataUrl()\n                            }}\n                            className=\"cover bg-center w-30\"\n                          />\n\n                          <div\n                            className={\n                              \" flex flex-column bg-white w-100 pa3- h-100\"\n                            }\n                          >\n                            <div className=\" flex flex-column bg-white w-100 pa3 h-100\">\n                              <div className=\" flex f4 fw6 pb2 black w-100\">\n                                {item.title}\n                              </div>\n                              <div className=\" flex flex-row w-100 justify-between pb2\">\n                                <div className=\" items-center ttc flex f6 fw6 black-40\">\n                                  {item.type}\n                                </div>\n                                <div className=\"w-60 flex f6 fw5 pb2- black-20 items-center justify-end\">\n                                  {moment(item.start_date).format(\"MMMM YYYY\")}\n                                </div>\n                              </div>\n                              <div className=\" flex f5 fw5 pb0 black-50\">\n                                {item.description.substr(0, 60) + \" ...\"}\n                              </div>\n              \n                            </div>\n                          </div>\n                        </Link>\n                      )\n                    )\n                  )}\n\n\n              </div>\n              {this.state.ready &&\n                  this.state.completedProjects.length === 0 && (\n                    <div className=\"flex flex-column w-100 pv3 items-center justify-center ba- -b--black-05 br2\">\n\n                      <div className=\"raleway flex w-100 pv3- f5 fw6 black-30 tc justify-center\">No projects to show</div>\n\n                    </div>\n                  )}\n\n            </div>\n          </div>\n        </div>\n      </section>\n    );\n  }\n}\n\nexport default RecentWork;\n","// @flow\n\nimport React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Icon } from \"@blueprintjs/core\";\n\nimport { Fn, app } from \"../../../utils/fn/Fn.js\";\nimport moment from \"moment\";\n\nimport SectionTitle from \"../_Elements/SectionTitle/SectionTitle.jsx\";\nimport AccountContext, { AccountConsumer } from '../../../utils/context/AccountContext.js';\n// import PropTypes from 'prop-types';\nvar GeoPattern = require(\"geopattern\");\nwindow.GeoPattern = GeoPattern;\nclass RecentWorkArchive extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      hasError: false,\n      completedProjects: null\n    };\n\n    this.getCompletedProjects = this.getCompletedProjects.bind(this);\n  }\n\n  async getCompletedProjects() {\n    \n    // let projects = Fn.get(\"subscribedProjects\");\n    let userId = this.context.account.user.id;\n    await app.fetchSubscribedProjects({ self: this, userId: userId }).then(projects => {\n      this.setState({\n        projects: projects\n      })\n      let completed = [];\n      for (let project of projects) {\n        if (moment(project.end_date).isBefore(moment(new Date()))) {\n          completed.push(project);\n        }\n      }\n      this.setState({\n        completedProjects: completed\n      });\n    })\n\n \n  }\n  componentDidMount = () => {\n    // console.log('RecentWork mounted');\n    this.getCompletedProjects();\n  };\n\n  static getDerivedStateFromError(error) {\n    // getDerivedStateFromError -> Update state so the next render will show the fallback UI.\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, info) {\n    // You can also log the error to an error reporting service\n  }\n\n  getDerivedStateFromProps = (nextProps, prevState) => {\n    // console.log('RecentWork getDerivedStateFromProps', nextProps, prevState);\n  };\n\n  getSnapshotBeforeUpdate = (prevProps, prevState) => {\n    // console.log('RecentWork getSnapshotBeforeUpdate', prevProps, prevState);\n  };\n\n  componentDidUpdate = () => {\n    console.log(\"RecentWork did update\");\n  };\n\n  componentWillUnmount = () => {\n    console.log(\"RecentWork will unmount\");\n  };\n\n  render() {\n    // const projects = [\n    //   {\n    //     id: \"01\",\n    //     title: \"Project 1\",\n    //     position: \"Videographer\",\n    //     description: \"Lorum ipsum dolor sit amet\",\n    //     image: \"https://www.washingtonpost.com/graphics/2019/entertainment/oscar-nominees-movie-poster-design/img/black-panther-web.jpg\"\n    //   },\n    //   {\n    //     id: \"02\",\n    //     title: \"Project 1\",\n    //     position: \"Videographer\",\n    //     description: \"Lorum ipsum dolor sit amet\",\n    //     image: \"https://www.washingtonpost.com/graphics/2019/entertainment/oscar-nominees-movie-poster-design/img/black-panther-web.jpg\"\n    //   },\n    //   {\n    //     id: \"03\",\n    //     title: \"Project 1\",\n    //     position: \"Videographer\",\n    //     description: \"Lorum ipsum dolor sit amet\",\n    //     image: \"https://www.washingtonpost.com/graphics/2019/entertainment/oscar-nominees-movie-poster-design/img/black-panther-web.jpg\"\n    //   },\n    //   {\n    //     id: \"04\",\n    //     title: \"Project 1\",\n    //     position: \"Videographer\",\n    //     description: \"Lorum ipsum dolor sit amet\",\n    //     image: \"https://www.washingtonpost.com/graphics/2019/entertainment/oscar-nominees-movie-poster-design/img/black-panther-web.jpg\"\n    //   },\n    //   {\n    //     id: \"05\",\n    //     title: \"Project 1\",\n    //     position: \"Videographer\",\n    //     description: \"Lorum ipsum dolor sit amet\",\n    //     image: \"https://www.washingtonpost.com/graphics/2019/entertainment/oscar-nominees-movie-poster-design/img/black-panther-web.jpg\"\n    //   }\n    // ]\n\n    if (this.state.hasError) {\n      return <h1>Something went wrong.</h1>;\n    }\n    return (\n      <section id=\"RecentWorkArchive\" className=\"mt3\">\n        <div className=\"flex flex-column mb2 pa0 br1 \">\n          <SectionTitle\n            title={\"Recent Work Archive\"}\n            functionButton={{\n              title: \"Add Archive Item\",\n              icon: \"ring\",\n              function: () => this.props.addRecentWorkProject()\n            }}\n            labels={[\n              {\n                text: \"projects\",\n                count: this.props.projects.length\n              }\n            ]}\n          />\n\n          {/* <div className=\"flex flex-row bb b--black-10 justify-between bg-white\">\n\n            <div className=\"flex flex-auto w--100 flex-row pb0\">\n\n              <p className=\"flex f4 fw6 black-60 mb0 ph3 pv2 items-center justify-center\">Work Archive</p>\n              <p className=\"flex f6 fw4 black-60 mb0 ph3 pv2- items-center justify-center bl b--black-10\">{this.props.projects.length} projects</p>\n\n            </div>\n\n            <div className=\"flex flex-auto- flex-row pb0\">\n\n              <div\n                onClick={this.props.addRecentWorkProject}\n                id=\"NetworkSeeAll-button\"\n                className=\"flex flex-column pointer h-100 bl b--black-10\">\n\n                <div id=\"\" className=\"flex flex-row ph0 pv0 items-center justify-center bg-white h-100\">\n\n                  <span className=\"f6 fw4 black-60 ph3\">Add Archive Item</span>\n\n                  <div\n                    style={{ backgroundColor: '#b3bf95' }}\n                    className=\"flex flex-column items-center justify-center ph3 pv2 white h-100\">\n                    <Icon icon={'ring'} iconSize={15} />\n                  </div>\n\n                </div>\n\n              </div>\n            </div>\n\n          </div> */}\n\n          <div className=\"flex flex-column pv3\">\n            <div className=\"flex flex-auto flex-column pb0 \">\n             {\n                  this.props.projects.length === 0 && (\n                    <div className=\"flex flex-column w-100 pv3 items-center justify-center ba- -b--black-05 br2\">\n\n                      <div className=\"raleway flex w-100 pv3- f5 fw6 black-30 tc justify-center\">No projects to show</div>\n\n                    </div>\n                  )}\n\n              <section className=\"flex flex-row flex-wrap f4 fw4 black-60 mb0 col-3 justify-between\">\n                {this.props.projects.map(\n                  (item, index) => (\n                    console.log(\"[[ Project item ]]\", item),\n                    (\n                      // <Link\n                      //   to={'/user/project/' + item.id}\n                      //   className={\"    pointer flex flex-column items-center justify-center pr3- mb4 br2 overflow-hidden bs-b\"}>\n                      //   <div\n                      //     style={{ width: '100%', height: '110px', borderRadius: '0', backgroundImage: \"url(\" + item.image + \")\" }}\n                      //     className=\"cover bg-center\" ></div>\n                      //   <div className={\" flex flex-column bg-white w-100 pa3\"}>\n                      //     <div className={\" flex f4 fw6 pb2 black-70\"}>\n                      //       {item.title}\n                      //     </div>\n                      //     <div className={\" flex f6 fw5 pb3 black-50\"}>\n                      //       {item.position}\n                      //     </div>\n                      //     <div className={\" flex f5 fw5  black-50\"}>\n                      //       {item.description}\n                      //     </div>\n                      //   </div>\n                      // </Link>\n\n                      <Link\n                        to={\"/project/\" + item.id}\n                        className={\n                          \"   raleway  pointer flex flex-row flex-auto- items-center justify-center pr3- mb4 br2 overflow-hidden bs-b \"\n                        }\n                      >\n                        <div\n                          style={{\n                            width: \"200px\",\n                            height: \"100%\",\n                            borderRadius: \"0\",\n                            backgroundImage:\n                              typeof item.image !== \"undefined\"\n                                ? \"url(\" + item.image + \")\"\n                                : GeoPattern.generate(item.title).toDataUrl()\n                          }}\n                          className=\"cover bg-center w-30\"\n                        />\n\n                        <div\n                          className={\n                            \" flex flex-column bg-white w-100 pa3- h-100\"\n                          }\n                        >\n                          <div className=\" flex flex-column bg-white w-100 pa3 h-100\">\n                            <div className=\" flex f4 fw6 pb2 black w-100\">\n                              {item.title}\n                            </div>\n                            <div className=\" flex flex-row w-100 justify-between pb2\">\n                              <div className=\" items-center ttc flex f6 fw6 black-40\">\n                                {item.type}\n                              </div>\n                              <div className=\"w-60 flex f6 fw5 pb2- black-20 items-center justify-end\">\n                                {moment(item.start_date).format(\"MMMM YYYY\")}\n                              </div>\n                            </div>\n                            <div className=\" flex f5 fw5 pb0 black-50\">\n                              {item.description.substr(0, 60) + \" ...\"}\n                            </div>\n                          </div>\n                        </div>\n                      </Link>\n                    )\n                  )\n                )}\n              </section>\n            </div>\n          </div>\n        </div>\n      </section>\n    );\n  }\n}\n\nexport default RecentWorkArchive;\nRecentWorkArchive.contextType = AccountContext;\n","// @flow\nimport React, { Component } from 'react';\n// import PropTypes from 'prop-types';\nimport months from '../../../utils/calendar/months.json';\nimport moment from 'moment';\nimport './style.css';\n\nimport { Calendar, Views, momentLocalizer } from \"react-big-calendar\";\nimport withDragAndDrop from 'react-big-calendar/lib/addons/dragAndDrop'\nimport { Fn } from '../../../utils/fn/Fn.js';\nimport { Icon } from \"@blueprintjs/core\";\nimport AccountContext, { AccountConsumer } from '../../../utils/context/AccountContext.js';\n\nimport SectionTitle from '../_Elements/SectionTitle/SectionTitle.jsx';\nconst DragAndDropCalendar = withDragAndDrop(Calendar)\nconst localizer = momentLocalizer(moment);\nclass ProjectCalendar2 extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      hasError: false,\n      current: 12,\n      months: [],\n      ready: false,\n      projectEvents: null,\n      ownEvents: null,\n      events: null\n\n    }\n    this.calendarFilter = this.calendarFilter.bind(this)\n    this.createCalendar = this.createCalendar.bind(this)\n    this.getOwnEvents = this.getOwnEvents.bind(this)\n    this.getProjectEvents = this.getProjectEvents.bind(this)\n    this.reload = this.reload.bind(this)\n  }\n  getProjectEvents() {\n    // console.log(\"Calendar mounted\");\n\n    let events = []\n\n    let events_ = Fn.get('subscribedProjects');\n\n    for (let event of events_) {\n\n      let e = {\n        id: event.id,\n        title: event.title,\n        // allDay: true,\n        start: moment(event.start_date).tz(\"Africa/Johannesburg\").toDate(),\n        end: moment(event.end_date).tz(\"Africa/Johannesburg\").toDate()\n      }\n\n      events.push(e)\n\n    }\n\n    this.setState({ events })\n\n    console.log('events', events)\n  }\n  getOwnEvents() {\n\n    // console.log(\"Calendar mounted\");\n\n    let events = this.state.events;\n\n    let events_ = Fn.get('account').user.profile.events;\n    let profile = Fn.get('account').user.profile;\n    if (!profile.hasOwnProperty('events')) {\n      profile.events = []\n    }\n\n    for (let event of profile.events) {\n\n      let e = {\n        id: event.title + event.start,\n        title: event.title,\n        // allDay: true,\n        // start: event.start,\n        // end: event.end\n        start: moment(event.start).tz(\"Africa/Johannesburg\").toDate(),\n        end: moment(event.end).tz(\"Africa/Johannesburg\").toDate()\n      }\n\n      events.push(e)\n\n    }\n\n    Fn.store({ label: 'calendarEvents', value: events })\n\n    this.setState({ events, ready: true })\n\n    console.log('events', events)\n\n    //     this.setState({\n    //   ready: true\n    // })\n\n  }\n  reload() {\n    this.setState({\n      ready: false,\n      events: null\n    })\n    setTimeout(() => {\n      this.getProjectEvents()\n      this.getOwnEvents()\n    }, 500)\n\n  }\n  componentDidMount = () => {\n\n    console.log('ProjectCalendar mounted');\n\n    this.setState({\n      projectEvents: this.props.projects,\n      ownEvents: this.props.ownEvents\n    })\n    this.reload()\n\n  }\n\n  static getDerivedStateFromError(error) {\n    // getDerivedStateFromError -> Update state so the next render will show the fallback UI.\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, info) {\n    // You can also log the error to an error reporting service\n  }\n\n  getDerivedStateFromProps = (nextProps, prevState) => {\n    // console.log('ProjectCalendar getDerivedStateFromProps', nextProps, prevState);\n  }\n\n  getSnapshotBeforeUpdate = (prevProps, prevState) => {\n    // console.log('ProjectCalendar getSnapshotBeforeUpdate', prevProps, prevState);\n  }\n\n  componentDidUpdate = () => {\n    // console.log('ProjectCalendar did update');\n  }\n\n  componentWillUnmount = () => {\n    // console.log('ProjectCalendar will unmount');\n  }\n  createCalendar2(months_) {\n\n    let projects = this.props.projects;\n    console.log('Projects', projects)\n    let projectDates = [];\n    let m = []\n    for (let project of projects) {\n\n      let projectMonth = moment(project.date.startDate).format('MM')\n      let projectStart = parseInt(moment(project.date.startDate).format('DD'));\n      let projectEnd = parseInt(moment(project.date.endDate).format('DD'));\n\n      console.log('project date', projectMonth, projectStart, projectEnd)\n\n      for (let month_ of months_) {\n        // item_\n        let days_ = new Array(month_.days).fill({});\n\n        month_.days_ = days_;\n\n        // console.log('days_', item_)\n\n        console.log('month item ', month_)\n        console.log('month_.number', month_.number)\n        console.log('projectMonth', projectMonth)\n\n        if (month_.number === projectMonth) {\n\n          let days = [];\n\n          for (let day_ of month_.days_) {\n\n            let day = {};\n\n            day.day = days_.indexOf(day_) + 1;\n\n            console.log('day_ item', day)\n\n            if (day.day > projectStart && day.day < projectEnd) {\n              day.filled = true\n            }\n            else {\n              day.filled = false\n            }\n\n            days.push(day)\n\n            console.log('days', days)\n          }\n\n          month_.days__ = days;\n\n          console.log('month_.days__', month_)\n\n        }\n\n        m.push(month_)\n\n      }\n    }\n\n    this.setState({\n      months_: m,\n      ready: true\n    })\n\n  }\n  createCalendar(months_) {\n\n    // let day = parseInt(moment(a).format('DD'))\n\n    // let m = this.state.months;\n    // console.log('m', m)\n\n    let projects = this.props.projects;\n    let ownEvents = this.props.ownEvents;\n\n    console.log('Projects', projects)\n    console.log('ownEvents', ownEvents)\n\n    let projectDates = [];\n    let m = []\n\n    for (let [monthIndex, month_] of months_.entries()) {\n\n      let days_ = new Array(month_.days).fill({});\n\n      // for()\n\n      m[monthIndex] = month_;\n      m[monthIndex].daysList = new Array(month_.days).fill({});\n\n      // m[monthIndex].days__ = []\n      // m[monthIndex].days_ = days_;\n\n      // month_.days_ = days_;\n      // month_.days__ = [];\n      console.log('')\n      console.log('month_', month_)\n\n      for (let project of projects) {\n\n        let projectMonth = moment(project.date.startDate).format('MM')\n        let projectStart = parseInt(moment(project.date.startDate).format('DD'));\n        let projectEnd = parseInt(moment(project.date.endDate).format('DD'));\n\n        console.log('')\n        console.log('project date', projectMonth, projectStart, projectEnd)\n\n        console.log(' ')\n        console.log('month_.number === projectMonth', month_.number, projectMonth, parseInt(month_.number) === parseInt(projectMonth))\n        let days = [];\n        if (parseInt(month_.number) === parseInt(projectMonth)) {\n\n          // console.log(' ')\n          // console.log('month_.number === projectMonth', month_.number === projectMonth)\n\n          for (let [dayIndex, day_] of month_.daysList.entries()) {\n\n            console.log(' ')\n            console.log(' ')\n\n            // if(dayIndex )\n            let day = {\n              day: dayIndex + 1,\n              filled: day_.filled,\n              month: month_.name\n            };\n\n            console.log(' ')\n            console.log('[[ day ]]', day.day, projectStart, projectEnd)\n\n            if (day.day >= projectStart && day.day <= projectEnd) {\n              day.filled = true\n            }\n            // else {\n            //   day.filled = false\n            // }\n\n            console.log(' ')\n            console.log('day', day, day.day, day.filled)\n\n            // month_.days__.push(day)\n            // m[monthIndex].days__[dayIndex] = day;\n            m[monthIndex].daysList[dayIndex] = day;\n            console.log('m[monthIndex].daysList[dayIndex] = day ', m[monthIndex].daysList[dayIndex] = day)\n            // days.push(day)\n\n            // console.log('days',days)\n          }\n\n          // let d = [...month_.days__, ...days ]\n          // month_.days__ = days;\n\n          console.log('month_.days__', m)\n\n        }\n        else {\n\n          // let days = [];\n\n          // for (let [dayIndex, day_] of month_.days_.entries()) {\n\n          //   let day = {\n          //     day: dayIndex + 1,\n          //     filled: false,\n          //     month: month_.name\n          //   }\n\n          //   m[monthIndex].days__[dayIndex] = day;\n          //   m[monthIndex].daysList[dayIndex] = day;\n\n          // }\n\n          // month_.days__ = days;\n\n        }\n\n      }\n\n      // m.push(month_)\n\n    }\n\n    this.setState({\n      months_: m,\n      ready: true\n    })\n\n  }\n  calendarFilter() {\n\n    const current = this.state.current;\n\n    let months_ = [];\n    console.log('months', months)\n    if (current === 12) {\n      months_[0] = months[current - 2];\n      months_[1] = months[current - 1];\n      months_[2] = months[current - 12];\n    }\n\n    else {\n      months_[0] = months[current - 2];\n      months_[1] = months[current - 1];\n      months_[2] = months[current];\n    }\n    console.log('months ', months_)\n    // this.setState({\n    //   months: months_,\n    //   // ready: true\n    // })\n\n    this.createCalendar(months_)\n    // sreturn months_\n\n  }\n  render() {\n\n    // const current = 12;\n\n    if (this.state.hasError) {\n      return <h1>Something went wrong.</h1>;\n    }\n    return (\n      this.state.ready &&\n      <section id=\"ProfileCalendar\" className=\"mt3\">\n\n        <div className=\"flex flex-column mb2 pa0 br1 \">\n\n          <SectionTitle\n            title={\"Calendar\"}\n            functionButton={{\n              title: \"View All\",\n              icon: \"ring\",\n              function: () => this.context.history.push('/calendar')\n            }}\n            labels={[\n              {\n                text: \"projects\",\n                count: 0\n              },\n            ]}\n          />\n\n          {/* <div className=\"flex flex-row bb b--black-10 justify-between bg-white\">\n\n            <div className=\"flex flex-auto w--100 flex-row pb0\">\n\n              <p className=\"flex f4 fw6 black-60 mb0 ph3 pv2 items-center justify-center\">Calendar</p>\n              <p className=\"flex f6 fw4 black-60 mb0 ph3 pv2- items-center justify-center bl b--black-10\"> projects</p>\n\n            </div>\n\n            <div className=\"flex flex-auto- flex-row pb0\">\n              <div\n                onClick={() => this.context.history.push('/calendar')}\n                id=\"NetworkSeeAll-button\"\n                className=\"flex flex-column pointer h-100 bl b--black-10\"\n              >\n                <div\n                  id=\"\"\n                  className=\"flex flex-row ph0 pv0 items-center justify-center bg-white h-100\"\n                >\n                  <span className=\"f6 fw4 black-60 ph3\">See All</span>\n\n                  <div\n                    style={{ backgroundColor: \"#b3bf95\" }}\n                    className=\"flex flex-column items-center justify-center ph3 pv2 white h-100\"\n                  >\n                    <Icon icon={\"ring\"} iconSize={15} />\n                  </div>\n                </div>\n              </div>\n            </div>\n\n          </div> */}\n\n          {/* <div className=\"calendar flex flex-row-ns flex-column flex-wrap- justify-between col-3 pt3  \">\n            {\n              this.state.months_.map((item, index) => (\n                <div\n                  key={index}\n                  id={item.name}\n                  className=\"calendar-month flex flex-column flex-wrap flex--auto \">\n\n                  <div className=\"flex flex-column flex-wrap bb b--black-05 bg-white pa3 f4 fw6 black-70\">\n                    {item.name}\n                  </div>\n\n                  <div className=\"calendar-days-list bg-near-white flex flex-row col-7 flex-wrap bl bt b--black-05\">\n                    {item.daysList.map((day, index_) => (\n                      // console.log('day',day),\n                      <div\n                        key={index_}\n                        className={(day.filled ? \" filled bg-green \" : \" \") + (\" calendar-day flex flex-column flex-wrap pa3 bb br b--black-05\")}>\n                        {index_ + 1}\n                      </div>\n                    ))}\n                  </div>\n\n                </div>\n              ))\n            }\n          </div> */}\n\n          <div className=\"calendar pb5 flex flex-row-ns flex-column flex-wrap- justify-between col-3 pt3  \">\n\n            <div\n              // key={index}\n              // id={item.name}\n              className=\"calendar-month flex flex-column flex-wrap flex--auto \">\n\n              <div className=\"flex flex-column flex-wrap bb b--black-05 bg-white pa3 f4 fw6 black-70\">\n                {moment(new Date()).subtract(1, 'M').format('MMMM YYYY').toString()}\n              </div>\n\n              <div className=\"flex flex-column\">\n                <DragAndDropCalendar\n\n                  // selectable\n                  localizer={localizer}\n                  events={this.state.ready && this.state.events || []}\n                  // onEventDrop={this.moveEvent}\n                  // resizable\n                  // onEventResize={this.resizeEvent}\n                  // onSelectSlot={this.newEvent}\n                  // onDragStart={console.log}\n                  defaultView={Views.MONTH}\n                  defaultDate={moment(new Date()).subtract(1, 'M').tz(\"Africa/Johannesburg\").toDate()}\n                  style={{ height: 400 }}\n                  // onSelectEvent={this.onSelectEvent}\n                  toolbar={false}\n                />\n              </div>\n            </div>\n\n            <div\n              // key={index}\n              // id={item.name}\n              className=\"calendar-month flex flex-column flex-wrap flex--auto \">\n\n              <div className=\"flex flex-column flex-wrap bb b--black-05 bg-white pa3 f4 fw6 black-70\">\n                {moment(new Date()).format('MMMM YYYY').toString()}\n              </div>\n              <div className=\"flex flex-column\">\n\n                <DragAndDropCalendar\n\n                  selectable\n                  localizer={localizer}\n                  events={this.state.ready && this.state.events || []}\n                  onEventDrop={this.moveEvent}\n                  // resizable\n                  // onEventResize={this.resizeEvent}\n                  // onSelectSlot={this.newEvent}\n                  // onDragStart={console.log}\n                  defaultView={Views.MONTH}\n                  defaultDate={moment(new Date()).tz(\"Africa/Johannesburg\").toDate()}\n                  style={{ height: 400 }}\n                  // onSelectEvent={this.onSelectEvent}\n                  toolbar={false}\n                />\n              </div>\n\n            </div>\n\n            <div\n              // key={index}\n              // id={item.name}\n              className=\"calendar-month flex flex-column flex-wrap flex--auto \">\n\n              <div className=\"flex flex-column flex-wrap bb b--black-05 bg-white pa3 f4 fw6 black-70\">\n                {moment(new Date()).add(1, 'M').format('MMMM YYYY').toString()}\n              </div>\n\n              <div className=\"flex flex-column\">\n                <DragAndDropCalendar\n\n                  selectable\n                  localizer={localizer}\n                  events={this.state.ready && this.state.events || []}\n                  // onEventDrop={this.moveEvent}\n                  // resizable\n                  // onEventResize={this.resizeEvent}\n                  // onSelectSlot={this.newEvent}\n                  // onDragStart={console.log}\n                  defaultView={Views.MONTH}\n                  defaultDate={moment(new Date()).add(1, 'M').tz(\"Africa/Johannesburg\").toDate()}\n                  style={{ height: 400 }}\n                  // onSelectEvent={this.onSelectEvent}\n                  toolbar={false}\n                />\n              </div>\n\n            </div>\n\n          </div>\n\n        </div></section>\n    );\n  }\n}\n\nexport default ProjectCalendar2;\nProjectCalendar2.contextType = AccountContext","import React from 'react';\nimport { Icon } from 'antd';\nimport { Progress } from 'antd';\nimport './style.css';\nimport { Fn } from '../../../../utils/fn/Fn.js';\n\nclass LocationSearchBar2 extends React.Component {\n\n    constructor(props) {\n\n        super(props);\n\n        this.state = {\n            loading: false,\n            searchResults: [],\n            location: this.props.location,\n            percent: this.props.progressBarPercent,\n            progressBarActive: this.props.progressBarActive,\n            searchAttempts: 0\n        }\n\n        this.submit = this.submit.bind(this)\n        this.onChange = this.onChange.bind(this)\n        this.handleSearch = this.handleSearch.bind(this);\n        this.handleChange = this.handleChange.bind(this)\n        this.submitSearch = this.submitSearch.bind(this)\n\n        this.increase = this.increase.bind(this)\n\n        this.location = React.createRef();\n\n        console.log('LocationSearchForm', props)\n    }\n    increase = () => {\n        let percent = this.state.percent + 10;\n        if (percent > 100) {\n            percent = 100;\n        }\n        this.setState({ percent });\n    };\n\n    async onChange(e) {\n\n        this.setState({ progressBarActive: false })\n\n        let address = e.target.value;\n\n        // const proxyurl = \"https://cors-anywhere.herokuapp.com/\";\n\n        let url = \"https://autocomplete.geocoder.api.here.com/6.2/suggest.json?app_id=ZZN2MPuexLyuz3VR0KDD&app_code=TnEsVJR8k3zxGMiAkbP_EQ&query=\" + address;\n\n        const config = {\n            origin: 'locahost',\n            mode: 'cors',\n            headers: {\n                'Accept': 'application/json',\n            }\n        }\n\n        await fetch(url, config, (err, res) => {\n            if (!res.ok) { console.error(err) }\n            return res\n        }).then(res => { return res.json() }).then(res => {\n            // return res\n            console.log('Autocomplete res', res)\n            this.setState({\n                searchResults: res.suggestions\n            })\n        })\n\n    }\n\n    async setLocation(item) {\n        // alert(JSON.stringify(item))\n        // alert('setLocation')\n        this.setState({\n            location: item,\n            // progressBarActive: true,\n            // percent: 50\n        })\n        this.location.current.value = item.address.houseNumber + \", \" + item.address.street + \", \" + item.address.district + \", \" + item.address.county;\n        this.setState({ searchResults: [] })\n        if (typeof this.props.updateProjectLocation !== \"undefined\") {\n            localStorage.setItem('updateProjectLocation', JSON.stringify(item));\n            this.props.updateProjectLocation(item)\n        }\n        else {\n            // setGlobal({ location: item, locationSet: true })\n            localStorage.setItem('location', JSON.stringify(item));\n            localStorage.setItem('locationSet', JSON.stringify(true));\n        }\n\n        if (typeof this.props.type !== \"undefined\" && this.props.type === \"event\") {\n            this.props.setLocation(item)\n        }\n\n        // return await this.props.fetchChefs(item.address.city)\n        // await this.findLocation(item)\n    }\n    async submitSearch(e) {\n        e.preventDefault()\n        e.stopPropagation()\n        // setGlobal({ location: this.props.location, locationSet: true })\n        localStorage.setItem('location', JSON.stringify(this.props.location));\n        localStorage.setItem('locationSet', JSON.stringify(true));\n        // alert(JSON.stringify(this.props.location))\n        let city = this.props.location.County;\n        return await this.props.fetchChefs(city)\n    }\n    submit(e) {\n        e.preventDefault();\n        e.stopPropagation();\n\n    }\n    handleSearch = value => {\n        if (value) {\n            fetch(value, data => this.setState({ data }));\n        } else {\n            this.setState({ searchResults: [] });\n        }\n    };\n\n    handleChange = value => {\n        this.setState({ location: value });\n    };\n    componentDidMount() {\n        const location = this.props.location;\n        this.setState({\n            location: location,\n            ready: true\n        })\n    }\n    render() {\n        // const options = this.state.searchResults.map(d => <Option key={d}>{d}</Option>);\n        return (\n            <div id=\"LocationSearchBar\" className=\"flex flex-column h-100 w-100 \">\n                <form\n                    onSubmit={this.submitSearch}\n                    className=\"flex flex-column items-end justify-center ma0 pa0 w-100\" id=\"\">\n                    {this.state.ready && <div className=\"flex flex-column relative w-100 items-end\">\n\n                        <div className=\"flex flex-column items-end mt3- w-100 mw-5 right \">\n                            <input\n                                id={\"toolbarLocationSearch\"}\n                                ref={this.location}\n                                onChange={this.onChange}\n                                className=\"flex flex-column ph4 pv3 bn br1- round bg-white black-50 f4 fw5 bs-a- w-100\"\n                                placeholder={\"Enter an address\"}\n                                type={\"text\"}\n                                defaultValue={this.props.defaultValue}\n\n                            ></input>{this.props.progressBarActive && <Icon type=\"loading\" className=\"formLoadingIcon\" />}\n                        </div>\n                        {\n                            this.props.progressBarActive &&\n                            <div className=\"LocationProgressBar absolute w-100 left-0 flex flex-column pt2 \">\n                                <Progress\n                                    strokeColor={'gainsboro'}\n                                    showInfo={false}\n                                    percent={this.props.progressBarPercent} />\n                            </div>\n                        }\n\n                        {this.state && this.state.searchResults && this.state.searchResults.length > 0 &&\n                            <div className=\"searchResults flex flex-column bs-a bg-near-white br1 w-100\">\n                                {\n                                    this.state.searchResults.map((item, index) => (\n                                        item.address && item.address.county && item.address.city && <div\n                                            onClick={() => this.setLocation(item)}\n                                            className=\"pointer flex flex-row f6 fw5 black-50 pa2\">\n                                            <span className=\"location-label-primary flex flex-auto items-center pl2 f5 fw4 black-40\">{item.address.city || \"n/a\"}</span>\n                                            <div className=\"flex flex-row items-center justify-end flex-auto \">\n                                                <span className=\"location-label-secondary flex items-center  f7 fw6 black-60 pl3\">{item.address.houseNumber}</span>\n                                                <span className=\"location-label-secondary flex items-center  f7 fw6 black-60 pl3\">{item.address.street}</span>\n                                                <span className=\"location-label-secondary flex items-center  f7 fw6 black-60 pl3\">{item.address.state}</span>\n                                                <span className=\"location-label-secondary flex items-center f7 fw6 black-60 pl2\">{item.address.country}</span>\n                                            </div>\n                                        </div>\n                                    ))\n                                }\n                            </div>}\n\n                    </div>}\n                </form>\n            </div>\n        )\n    }\n}\nexport default LocationSearchBar2;","import React from \"react\";\n// import OnboardingForm from './OnboardingSteps';\nimport \"./style.css\";\n\n// import Filepond from '../../upload/Filepond.js';\n\nimport { DatePicker, Steps, Select, Button, message } from \"antd\";\nimport { Icon } from \"@blueprintjs/core\";\nimport moment from \"moment\";\nimport LocationSearchBar from \"../display/forms/LocationSearchBar2.js\";\nimport Fn from \"../../../utils/fn/Fn.js\";\n\nconst { MonthPicker, RangePicker } = DatePicker;\nconst dateFormat = \"YYYY/MM/DD\";\n\n// import { DatePicker, TimePrecision } from \"@blueprintjs/datetime\";\n// const { Step } = Steps;\n// const { Option } = Select;\n\n// const steps = [\n//   {\n//     title: 'First',\n//     content: 'First-content',\n//   },\n//   {\n//     title: 'Second',\n//     content: 'Second-content',\n//   },\n//   {\n//     title: 'Last',\n//     content: 'Last-content',\n//   },\n// ];\nclass AddEvent extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      // projectType: '',\n      startDate: this.props.eventData && this.props.eventData.start,\n      endDate: this.props.eventData && this.props.eventData.end,\n      buttonLoading: false\n    };\n\n    // this.rate = React.createRef();\n    // this.projectName = React.createRef()\n    this.addEvent = this.addEvent.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleRangeChange = this.handleRangeChange.bind(this);\n    // this.setLocation = this.setLocation.bind(this)\n    // this.handleDateChange = this.handleDateChange.bind(this)\n    this.disabledRangeTime = this.disabledRangeTime.bind(this);\n    this.range = this.range.bind(this);\n\n    this.eventTitle = React.createRef();\nthis.eventForm = React.createRef()\n    console.log(\"OnboardingScreen props\", props);\n  }\n  handleRangeChange(e) {\n    console.log(e);\n    let startDate = e[0].toString();\n    let endDate = e[1].toString();\n    this.setState({\n      startDate,\n      endDate\n    });\n  }\n  handleDateChange(e) {\n    console.log(e);\n\n    this.setState({ projectDate: e.toString() });\n  }\n  range(start, end) {\n    const result = [];\n    for (let i = start; i < end; i++) {\n      result.push(i);\n    }\n    return result;\n  }\n  disabledRangeTime(_, type) {\n    if (type === \"start\") {\n      return {\n        disabledHours: () => this.range(0, 60).splice(4, 20),\n        disabledMinutes: () => this.range(30, 60),\n        disabledSeconds: () => [55, 56]\n      };\n    }\n    return {\n      disabledHours: () => this.range(0, 60).splice(20, 4),\n      disabledMinutes: () => this.range(0, 31),\n      disabledSeconds: () => [55, 56]\n    };\n  }\n  handleChange(e) {\n    console.log(e.target.value);\n\n    this.setState({\n      projectType: e.target.value\n    });\n  }\n\n  addEvent(e) {\ne.preventDefault()\n    // this.eventForm.submit(e => {\n    //   e.preventDefault()\n    // })\n    this.setState({\n      buttonLoading: true\n    });\n    let title = this.eventTitle.current.value;\n    let start = this.state.startDate;\n    let end = this.state.endDate;\n\n    let data = { title, start, end };\n\n    this.props.addEvent(data);\n  }\n\n  componentDidMount() {}\n\n  render() {\n    // const { current } = this.state;\n    return (\n      <form\n      ref={this.eventForm}\n        id=\"ProjectSearchForm\"\n        className={\n          (Fn.get(\"isMobile\") ? \" vh84 \" : \"  \") +\n          \" flex-column flex justify-between mb0\"\n        }\n      >\n        <div className=\"flex flex-column ma0\" id=\"\">\n          <div className=\"form-row flex flex-column\">\n            <div className=\"form-row flex flex-column pa5\">\n              <div className=\"f4 fw6 black-90 pb4\">Add an Event</div>\n\n              <div className=\"form-row flex flex-row items-center\">\n                <label className=\"f4 fw5 black-50 pb2- w-30 pr3\">\n                  Event Title\n                </label>\n\n                <input\n                  ref={this.eventTitle}\n                  type=\"text\"\n                  required={true}\n                  className=\"flex flex-column ph4 pv3 bn br1- round bg-white black-50 f4 fw5 bs-a- w-100\"\n                />\n              </div>\n\n              <div className=\"form-row flex flex-row items-center pt4\">\n                <label className=\"f4 fw5 black-50 pb2- w-30 pr3\">\n                  Event Location\n                </label>\n\n                <LocationSearchBar\n                  // location={this.state.location}\n                  // findLocation={this.findLocation}\n                  setLocation={this.props.setLocation}\n                  type={\"event\"}\n                  // fetchProjects={this.fetchProjects2}\n                />\n              </div>\n\n              <div className=\"form-row flex flex-row items-center pt4 w-100\">\n                <label className=\"f4 fw5 black-50 pb2- w-30 pr3\">\n                  Event Dates\n                </label>\n\n                <RangePicker\n                  className=\"flex flex-column flex-auto ph4 pv0 bn br1- round bg-white black-50 f4 fw5 bs-a- w-100\"\n                  onChange={this.handleRangeChange}\n                  required={true}\n                  // disabledTime={this.disabledRangeTime}\n                  style={{ width: \"100%\" }}\n                  showTime={{\n                    defaultValue: [\n                      moment(\"08:00:00\", \"HH:mm:ss\"),\n                      moment(\"17:00:00\", \"HH:mm:ss\")\n                    ]\n                  }}\n                  defaultValue={\n                    this.props.eventData && [\n                      moment(this.props.eventData.start, dateFormat).tz(\n                        \"Africa/Johannesburg\"\n                      ),\n                      moment(this.props.eventData.end, dateFormat).tz(\n                        \"Africa/Johannesburg\"\n                      )\n                    ]\n                  }\n                  format={dateFormat}\n                />\n              </div>\n\n              {/* <div className=\"form-row flex flex-column pt4 w-100\">\n                <label className=\"f6 fw5 black-50 pb2\">Event Type</label>\n\n                <select\n                  className=\"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a w-100\"\n                  // defaultValue=\"commercial\"                this.props.eventData\n                  onChange={(e) => this.handleChange(e)}>\n\n                  <option value=\"\">Select</option>\n                  <option value=\"commercial\">General</option>\n                  <option value=\"film\">Meeting</option>\n                  <option value=\"film\">Documentary</option>\n\n                </select>\n\n              </div> */}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"Buttons flex flex-row justify-between center w-100\">\n          <div className=\"flex flex-column w-100 pa4 bg-white\">\n            <button\n              onClick={this.addEvent}\n              className={\n                \"br1- round bs-b bg-black-20 ph3 pv2 pointer bn relative  \"\n              }\n            >\n              <span className=\"f4 fw6 white pv2 flex items-center justify-center\">\n                {this.state.buttonLoading && (\n                  <div className=\"flex mr3 pv2\">\n                    <div className=\"sp sp-3balls\"></div>\n                  </div>\n                )}\n                {!this.state.buttonLoading &&\n                  \"Create Event\"\n                 \n                }\n              </span>\n              \n            </button>\n\n            {/* {\n              this.props.current > 0 && <div className=\"flex flex-column w-100 \">\n                <span onClick={this.props.prev} className=\"f6 fw5 black-30 pv2 flex items-center justify-center\">\n                  go back to previous step\n                          </span>\n\n              </div>\n            } */}\n          </div>\n        </div>\n      </form>\n    );\n  }\n}\nexport default AddEvent;\n","import React from 'react';\nimport OnboardingForm from './OnboardingSteps';\nimport './style.css';\n\n// import Filepond from '../../upload/Filepond.js';\n\nimport { DatePicker, Steps, Icon, Select, Button, message } from 'antd';\n// import { DateRangeInput } from \"@blueprintjs/datetime\";\nimport moment from 'moment';\nimport LocationSearchBar from '../../elements/display/forms/LocationSearchBar.js';\nimport { Fn } from '../../../utils/fn/Fn.js';\nimport AccountContext, { AccountConsumer } from '../../../utils/context/AccountContext.js';\nconst { MonthPicker, RangePicker } = DatePicker;\nconst dateFormat = 'YYYY/MM/DD';\n\n\n\n\n// import { DatePicker, TimePrecision } from \"@blueprintjs/datetime\";\n// const { Step } = Steps;\n// const { Option } = Select;\n\n// const steps = [\n//   {\n//     title: 'First',\n//     content: 'First-content',\n//   },\n//   {\n//     title: 'Second',\n//     content: 'Second-content',\n//   },\n//   {\n//     title: 'Last',\n//     content: 'Last-content',\n//   },\n// ];\nclass One extends React.Component {\n  constructor(props) {\n\n    super(props)\n\n    this.state = {\n      projectType: '',\n      startDate: '',\n      endDate: ''\n    }\n\n    // this.rate = React.createRef();\n    // this.projectName = React.createRef()\n    this.searchProjects = this.searchProjects.bind(this)\n    this.handleChange = this.handleChange.bind(this)\n    this.handleRangeChange = this.handleRangeChange.bind(this)\n    // this.handleDateChange = this.handleDateChange.bind(this)\n\n    console.log('OnboardingScreen props', props)\n    this.reset = this.reset.bind(this)\n\n  }\n  reset(){\n    window.localStorage.clear()\n    this.context.history.push('/')\n    window.location.reload()\n  }\n  handleRangeChange(e) {\n    console.log(e)\n    let startDate = e[0].toString()\n    let endDate = e[1].toString()\n    this.setState({\n      startDate, endDate\n    })\n  }\n  handleDateChange(e) {\n\n    console.log(e)\n\n    this.setState({ projectDate: e.toString() })\n\n  }\n\n  handleChange(e) {\n    console.log(e.target.value);\n\n    this.setState({\n      projectType: e.target.value\n    })\n\n  }\n\n  searchProjects() {\n\n    let location = Fn.get('location')\n    let projectType = this.state.projectType;\n    let startDate = this.state.startDate;\n    let endDate = this.state.endDate;\n\n    let data = { location, projectType, startDate, endDate };\n    this.props.searchProjects(data);\n\n  }\n\n  componentDidMount() {\n  }\n\n  render() {\n    // const { current } = this.state;\n    return (\n      <div id=\"StepsForm\">\n        <div className=\"flex flex-column ma0\" id=\"\">\n          <div className=\"form-row flex flex-column pb3 pt2\">\n            <div className=\"form-row flex flex-column\">\n\n              <div className=\"form-row flex flex-column pt4\">\n\n                <label className=\"f5 fw6 black-50 pb2\">Project Location (city)</label>\n\n                <LocationSearchBar\n                  location={this.state.location}\n                  findLocation={this.findLocation}\n                  fetchProjects={this.fetchProjects2}\n                />\n\n              </div>\n\n              <div className=\"form-row flex flex-column pt4 w-100\">\n                <label className=\"f5 fw6 black-50 pb2\">Project Type</label>\n\n                <select\n                  required={true}\n                  className=\"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a w-100\"\n                  // defaultValue=\"commercial\"                \n                  onChange={(e) => this.handleChange(e)}>\n\n                  <option value=\"\">Select</option>\n                  <option value=\"commercial\">Commercial</option>\n                  <option value=\"film\">Film</option>\n                  <option value=\"film\">Documentary</option>\n\n                </select>\n\n              </div>\n\n              <div className=\"form-row flex flex-column pt4 w-100\">\n                <label className=\"f5 fw6 black-50 pb2\">Availability Date Range</label>\n\n          \n\n                <RangePicker\n                  required={true}\n                  className=\"bs-a f4 fw5\"\n                  onChange={this.handleRangeChange}\n                  // defaultValue={[moment('2015/01/01', dateFormat), moment('2015/01/01', dateFormat)]}\n                  format={dateFormat}\n                />\n              </div>\n\n\n\n\n\n\n\n\n\n            </div>\n\n          </div>\n\n        </div>\n\n        <div className=\"Buttons flex flex-row justify-between mt4 center w-100 mb4\">\n\n          <div className=\"flex flex-column w-100\">\n\n            <button\n              onClick={this.searchProjects}\n              className={(\"br1 bs-b bg-black ph3 pv2 pointer bn relative  \")} >\n\n              <span className=\"f5 fw5 white pv2 flex items-center justify-center\">\n\n                {this.state.buttonLoading ? <Icon type=\"loading\" className={' absolute right-0 f4 black-60 mr2'} /> : <Icon type=\"swap-right\" className={(' f4 black-60 mr2 absolute right-0')} />} Search</span>\n            </button>\n\n            {/* {\n              this.props.current > 0 && <div className=\"flex flex-column w-100 \">\n                <span onClick={this.props.prev} className=\"f6 fw5 black-30 pv2 flex items-center justify-center\">\n                  go back to previous step\n                          </span>\n\n              </div>\n            } */}\n          </div>\n\n        </div>\n        <div className=\"flex flex-row w-100\">\n          <div \n          onClick={this.reset}\n          className=\"f5 fw6 black-50 pv2 mt2 mv4 ba b--black-05 ph3\">Reset</div>\n        </div>\n      </div>\n    )\n  }\n}\nexport default One;\nOne.contextType = AccountContext;","import React from 'react';\nimport OnboardingForm from './OnboardingSteps';\nimport './style.css';\nimport { Fn } from '../../../utils/fn/Fn.js';\nimport { Steps, Icon, Button, message } from 'antd';\nimport { DatePicker, TimePrecision } from \"@blueprintjs/datetime\";\n\nconst { Step } = Steps;\n\nconst steps = [\n  {\n    title: 'First',\n    content: 'First-content',\n  },\n  {\n    title: 'Second',\n    content: 'Second-content',\n  },\n  {\n    title: 'Last',\n    content: 'Last-content',\n  },\n];\nclass OnboardingProfileChef extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      current: 0,\n      dob: ''\n    };\n\n    console.log('OnboardingScreen props', props)\n    this.mobileNumber = React.createRef()\n    this.bio = React.createRef()\n    this.grade = React.createRef()\n    this.firstname = React.createRef()\n    this.lastname = React.createRef()\n    this.gender = React.createRef()\n\n    \n    this.saveStep2 = this.saveStep2.bind(this)\n    this.handleDateChange = this.handleDateChange.bind(this)\n    console.log('OnboardingScreen props', props)\n\n  }\n    handleDateChange(e) {\n    console.log(e)\n    this.setState({dob: e.toString()})\n  }\n  saveStep2() {\n\n    let mobileNumber = this.mobileNumber.current.value;\n    let bio = this.bio.current.value;\n    let grade = this.grade.current.value;\n    let firstname = this.firstname.current.value;\n    let lastname = this.lastname.current.value;\n    let gender = this.gender.current.value;\n    let dob = this.state.dob;\n\n    let data = { mobileNumber, bio, grade, gender, firstname, lastname, dob };\n    this.props.saveStep2(data);\n    this.props.next()\n\n  }\n  componentDidMount() {\n  }\n  render() {\n    // const { current } = this.state;\n    return (\n      <div id=\"StepsForm\">\n        <div className=\"flex flex-column ma0\" id=\"\">\n          <div className=\"form-row flex flex-column pb3 pt2\">\n          <div className=\"form-row flex flex-column\">\n              <div className=\"form-row flex flex-column pt4\">\n                <label className=\"f7 fw6 black-90 pb2\">First Name</label>\n                <input \n                required={true}\n                ref={this.firstname}\n                type={'text'} className=\"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a\" />\n              </div>\n              <div className=\"form-row flex flex-column pt4\">\n                <label className=\"f7 fw6 black-90 pb2\">Last Name</label>\n                <input mobileNumber\n                required={true}\n                ref={this.lastname}\n                type={'text'} className=\"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a\" />\n              </div>\n\n            </div>\n            \n            <div className=\"form-row flex flex-column\">\n              <div className=\"form-row flex flex-column pt4\">\n                <label className=\"f7 fw6 black-90 pb2\">Mobile Phone</label>\n                <input \n                required={true}\n                ref={this.mobileNumber}\n                type={'number'} className=\"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a\" />\n              </div>\n\n            </div>\n            <div className=\"form-row flex flex-column\">\n              <div className=\"form-row flex flex-column pt4\">\n                <label className=\"f7 fw6 black-90 pb2\">Gender</label>\n                <input \n                required={true}\n                ref={this.gender}\n                type={'text'} className=\"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a\" />\n              </div>\n\n            </div>\n            <div className=\"form-row flex flex-column\">\n              <div className=\"form-row flex flex-column pt4\">\n                <label className=\"f7 fw6 black-90 pb2\">Enter your grade</label>\n                <input \n                required={true}\n                ref={this.grade}\n                type={'number'} className=\"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a\" />\n              </div>\n\n            </div>\n            <div className=\"form-row flex flex-column\">\n              <div className=\"form-row flex flex-column pt4\">\n                <label className=\"f7 fw6 black-90 pb2\">Bio</label>\n                <textarea\n                required={true}\n                ref={this.bio}\n                rows={4} \n                type={'text'}\n                className=\"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a\" />\n              </div>\n            </div>\n\n            {/* <div className=\" flex flex-column w-100 mb3\">\n\n                <span className=\"flex flex-column f6 fw5 black-60 pb3 pt3\">Your Date of Birth</span>\n\n                <DatePicker\n                  minDate={new Date('01/01/1940')}\n                  // defaultValue={typeof this.props.value.dob !== \"undefined\" && this.props.value.dob.length > 0 ? new Date(this.props.value.dob) : null} className={''} \n                  onChange={this.handleDateChange} \n                  />\n\n            </div> */}\n\n          </div>\n          \n        </div>\n        <div className=\"Buttons flex flex-row justify-between mt4 mw5 center w-100\">\n\n          <div className=\"flex flex-column w-100\">\n          <button\n              onClick={this.saveStep2}\n              className={(\" br1 bs-b bg-white ph3 pv1 pointer bn relative  \")} >\n              <span className=\"f5 fw5 black-30 pv2 flex items-center justify-center\">\n                {this.state.buttonLoading ? <Icon type=\"loading\" className={' absolute right-0 f4 black-60 mr2'} /> : <Icon type=\"swap-right\" className={Fn.get('theme').config.theme.colorScheme.color + (' f4 black-60 mr2 absolute right-0')} />} Next</span>\n            </button>\n\n            {\n              this.props.current > 0 && <div className=\"flex flex-column w-100 \">\n                <span onClick={this.props.prev} className=\"f6 fw5 black-30 pv2 flex items-center justify-center\">\n                  go back to previous step\n                          </span>\n\n              </div>\n            }\n          </div>\n\n        </div>\n      </div>\n    )\n  }\n}\nexport default OnboardingProfileChef;","import React from 'react';\nimport OnboardingForm from './OnboardingSteps';\nimport './style.css';\n\nimport { Steps, Icon, Button, message } from 'antd';\nimport { Checkbox } from 'antd';\nimport { Fn } from '../../../utils/fn/Fn.js';\nconst { Step } = Steps;\n\nconst steps = [\n  {\n    title: 'First',\n    content: 'First-content',\n  },\n  {\n    title: 'Second',\n    content: 'Second-content',\n  },\n  {\n    title: 'Last',\n    content: 'Last-content',\n  },\n];\nconst positions = [\n  {\n    title: \"Select\"\n  },\n  {\n    title: \"Unit Production Manager\"\n  },\n  {\n    title: \"Line Producer\"\n  },\n  {\n    title: \"Production Manager\"\n  },\n  {\n    title: \"Director\"\n  },\n  {\n    title: \"Assistant Director\"\n  },\n  {\n    title: \"2nd Assistant Director\"\n  },\n  {\n    title: \"Continuity Person\"\n  },\n  {\n    title: \"Cinematographer\"\n  },\n  {\n    title: \"Gaffer\"\n  },\n  {\n    title: \"Camera Operator\"\n  },\n  {\n    title: \"Assistant Cameraman\"\n  },\n  {\n    title: \"Film Loader\"\n  },\n  {\n    title: \"Steadycam Operator\"\n  },\n  {\n    title: \"Production Sound Mixer\"\n  },\n  {\n    title: \"Boom Operator\"\n  },\n  {\n    title: \"Key Grip\"\n  },\n  {\n    title: \"Dolly Grip\"\n  },\n  {\n    title: \"Best Boy\"\n  },\n  {\n    title: \"Visual Effects Director\"\n  },\n  {\n    title: \"FX Coordinator\"\n  },\n  {\n    title: \"Property Master\"\n  },\n  {\n    title: \"Leadman\"\n  },\n  {\n    title: \"Set Dresser\"\n  },\n  {\n    title: \"Costumer\"\n  },\n  {\n    title: \"Make-up Artist\"\n  },\n  {\n    title: \"Body Make-up Artist\"\n  },\n  {\n    title: \"Hairdresser\"\n  },\n  {\n    title: \"Production Assistant\"\n  },\n  {\n    title: \"Production Office Coordinator\"\n  },\n  {\n    title: \"Unit Publicist\"\n  },\n  {\n    title: \"Second Unit Director\"\n  },\n  {\n    title: \"Production Caterer\"\n  },\n  {\n    title: \"Craft Services\"\n  },\n  {\n    title: \"Transportation Coordinator\"\n  },\n  {\n    title: \"Day Player\"\n  }\n]\nconst plainOptions = ['Mexican', 'American', 'Italian', 'South African', 'Greek', 'Portuguese', 'Chinese', 'Turkish', 'Thai'];\nclass OnboardingProfileChef_Extended extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      current: 0,\n      cuisines: [],\n      cuisines_: [{}],\n      role: \"\",\n      skills: [],\n      skills_: [{}],\n      value: ''\n    };\n\n    console.log('OnboardingScreen props', props)\n    // this.insertCuisine = this.insertCuisine.bind(this)\n    // this.onChange = this.onChange.bind(this)\n    this.insertSkill = this.insertSkill.bind(this)\n    this.addSkillInput = this.addSkillInput.bind(this)\n    // this.rate = React.createRef();\n    this.saveStep3 = this.saveStep3.bind(this)\n    this.specOnChange = this.specOnChange.bind(this)\n    console.log('OnboardingScreen props', props)\n\n    this.role = React.createRef()\n\n  }\n  saveStep3() {\n    // let cuisines = this.state.cuisines;\n    // let role = this.role.current.value;\n    let skills = this.state.skills;\n    let data = { positions: skills };\n    console.log('saveStep3 data ',data)\n    this.props.saveStep3(data);\n    this.props.next()\n  }\n  // onChange(checkedValues) {\n  //   console.log('checked = ', checkedValues);\n  //   this.setState({cuisines: checkedValues})\n  // }\n  // role()/\n  // insertCuisine(cuisine) {\n  //   let cuisines = this.state.cuisines;\n  //   cuisines.push(cuisine)\n  // }\n  insertSkill(item) {\n    let skills = this.state.skills;\n    skills.push(item)\n    this.setState({ skills: skills })\n  }\n  addSkillInput() {\n    let skills_ = this.state.skills_;\n    skills_.push({});\n    this.setState({ skills_: skills_ })\n  }\n  specOnChange(data) {\n    const {e, index} = data;\n    let skills = this.state.skills;\n    skills[index] = e.target.value;\n    this.setState({\n      skills\n    })\n    console.log(this.state);\n\n    // let \n  }\n\n  // onChange = e => {\n  //   console.log('radio checked', e.target.value);\n  //   this.setState({\n  //     value: e.target.value,\n  //   });\n  // };\n  componentDidMount() {\n  }\n  render() {\n    // const { current } = this.state;\n    return (\n      <div id=\"StepsForm\">\n        <div className=\"flex flex-column ma0\" id=\"\">\n          <div className=\"form-row flex flex-column pb3 pt2\">\n            {/* <div className=\"form-row flex flex-column\">\n              <div className=\"form-row flex flex-column pt4\">\n                <label className=\"f7 fw6 black-90 pb2\">Your Crew Role</label>\n                <input \n                required={true}\n                ref={this.role}\n                type={'text'} className=\"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a\" />\n                <Checkbox.Group required={true} options={plainOptions} onChange={this.onChange} />\n              </div>\n\n            </div> */}\n            <div className=\"form-row flex flex-column\">\n              <div className=\"form-row flex flex-column pt4\">\n                <label className=\"f7 fw6 black-90 pb2\">Crew Needed</label>\n                <div className=\"flex flex-column flex-wrap\">\n                {\n                  this.state.skills_.map((item, index) => (\n                    <div className=\"flex pb2 w-100\">\n                      <select\n                      // required={true}\n                        onChange={(e) => this.specOnChange({ e, index})}\n                        // defaultValue={this.state.skills[index]}\n                        // type={'text'} \n                        className=\"w-100 flex flex-row ph3 pv2 bn br1 bg-white black-50 f4 fw5 bs-a\" \n                      >\n                        {\n                          positions.map((item, index) => (\n                              <option value={item.title}>{item.title}</option>\n                          ))\n                        }\n                        </select>\n                    </div>\n                  ))\n                }\n                </div>\n              </div>\n              <div className=\"form-row flex flex-row pt2\">\n                <button onClick={this.addSkillInput} \n                className=\"bn br1 bg-black-30 f7 fw5 white pv1 ph2\">Add +</button>\n              </div>\n            </div>\n\n          </div>\n\n        </div>\n\n      <div className=\"Buttons flex flex-row justify-between mt4 mw5 center w-100\">\n\n        <div className=\"flex flex-column w-100\">\n        <button\n              onClick={this.saveStep3}\n              className={(\" br1 bs-b bg-white ph3 pv1 pointer bn relative  \")} >\n              <span className=\"f5 fw5 black-30 pv2 flex items-center justify-center\">\n                {this.state.buttonLoading ? <Icon type=\"loading\" className={' absolute right-0 f4 black-60 mr2'} /> : <Icon type=\"swap-right\" className={Fn.get('theme').config.theme.colorScheme.color + (' f4 black-60 mr2 absolute right-0')} />} Next</span>\n            </button>\n\n          {\n            this.props.current > 0 && <div className=\"flex flex-column w-100 \">\n              <span onClick={this.props.prev} className=\"f6 fw5 black-30 pv2 flex items-center justify-center\">\n                go back to previous step\n                          </span>\n\n            </div>\n          }\n        </div>\n\n      </div>\n      </div>\n    )\n  }\n}\nexport default OnboardingProfileChef_Extended;","import React from 'react';\nimport { Redirect } from 'react-router-dom';\nimport OnboardingSteps from './OnboardingSteps';\n\nimport { Dialog, Icon } from '@blueprintjs/core';\nimport \"@blueprintjs/core/lib/css/blueprint.css\";\nimport './style.css';\n\nimport Fn from '../../../utils/fn/Fn.js';\nimport methods from '../../../utils/methods/index.js'\nimport moment from 'moment';\nimport AccountContext, { AccountProvider } from '../../../utils/context/AccountContext.js';\nimport { timeline } from \"popmotion\";\nimport { TH_LIST } from \"@blueprintjs/icons/lib/esm/generated/iconNames\";\n\nimport ListProjects from '../../elements/display/projects/list/index.js';\n\nclass ViewEvent extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ready: true\n        }\n\n    }\n\n    render() {\n        // if(this.state.redirectProfile) {\n        //     return <Redirect to={'/profile'} />\n        // }\n        return (\n\n            <div id=\"ViewEvent\" className={(Fn.get('isMobile') ? \" vh84 \" : \"  \")\n                + (\" flex-column flex justify-between \")}>\n                <div className=\"flex flex-column ma0\" id=\"\">\n                    <div className=\"form-row flex flex-column\">\n\n                        <div className=\"form-row flex flex-column pa4\">\n\n                            <div className=\"f5 fw6 black-90 pb3 pt5\">Event Detail</div>\n\n                            <div className=\"form-row flex flex-column\">\n\n                                <label className=\"f6 fw5 black-50 pb2\">Event Title</label>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\nexport default ViewEvent;\nViewEvent.contextType = AccountContext;\n","import React from 'react';\nimport OnboardingForm from './OnboardingSteps';\nimport './style.css';\nimport { Fn } from '../../../utils/fn/Fn';\n// import OnboardingAccountType from './__AccountType';\n// import OnboardingProfileUser from './__ProfileUser';\nimport Two from './Two';\nimport One from './One';\nimport Three from './Three';\nimport { Steps, Button, message } from 'antd';\n// import { useReducer } from \"react\";\n\nconst { Step } = Steps;\n\n\n\nclass OnboardingSteps extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      // current: 0,\n      // location: getGlobal().location,\n      // currency: getGlobal().baseCurrency,\n      // grade: 0,\n      // mobileNumber: '',\n      // bio: '',\n      // specialties: [],\n      // cuisines: [],\n      // firstname: '',\n      // lastname: '',\n      // positions: []\n    }\n\n    console.log('OnboardingScreen props', props)\n\n    // this.prev = this.prev.bind(this)\n    // this.next = this.next.bind(this)\n    // this.saveStep1 = this.saveStep1.bind(this)\n    // this.saveStep2 = this.saveStep2.bind(this)\n    // this.saveStep3 = this.saveStep3.bind(this)\n\n  }\n  // saveStep1(data) {\n  //   const { location, projectType, projectDate, projectName } = data;\n  //   this.setState({ location, projectType, projectDate, projectName })  \n  // }\n  // saveStep2(data) {\n  //   const { mobileNumber, bio, grade, firstname, lastname, dob, gender } = data;\n  //   this.setState({ mobileNumber, bio, grade, firstname, lastname, gender, dob }) \n    \n  //   return this.props.saveOnboardingData({\n  //     location: this.state.location,      \n  //     mobileNumber: this.state.mobileNumber,\n  //     bio: this.state.bio,\n  //     positions: this.state.positions,\n  //     // role: role,\n  //     grade: this.state.grade,\n  //     firstname: this.state.firstname,\n  //     lastname: this.state.lastname,\n  //     gender: this.state.gender,\n  //     dob: this.state.dob\n  //   })  \n\n  // }\n  // saveStep3(data) {\n  //   const { positions } = data;\n  //   // console.log(data)\n  //   this.setState({ positions: positions })\n\n  //   return this.props.saveOnboardingData({\n  //     location: this.state.location,      \n  //     projectName: this.state.projectName,\n  //     projectDate: this.state.projectDate,\n  //     projectType: this.state.projectType,\n  //     positions: positions\n  //   })\n  // }\n  next() {\n    const current = this.state.current + 1;\n    this.setState({ current });\n  }\n\n  prev() {\n    const current = this.state.current - 1;\n    this.setState({ current });\n  }\n  componentDidMount() {\n    console.log('steps', this.props)\n  }\n  render() {\n  \n    // const { current } = this.state;\n\n    return (\n\n      <div>\n     \n        {         \n            <>\n              \n              <div className=\"steps-content pb4\">\n\n                    <One\n                      searchProjects={this.props.searchProjects}\n                    />  \n\n              </div>\n\n            </>          \n        }       \n\n      </div>\n\n    )\n  }\n}\nexport default OnboardingSteps;","import React from 'react';\nimport { getGlobal } from \"reactn\";\nimport io from 'socket.io-client';\nimport Fn from '../../../../utils/fn/Fn';\nimport AccountContext, { AccountConsumer } from '../../../../utils/context/AccountContext.js';\n\nimport { message } from \"antd\";\nimport { Icon } from \"@blueprintjs/core\";\n\nimport posed, { PoseGroup, Transition } from \"react-pose\";\nimport CommentListItem from './CommentListItem.js';\n\nvar socket;\n\nconst ItemC = React.forwardRef((props, ref) => {\n  return (\n    <CommentListItem {...props} ref={ref} />\n  )\n});\nconst Item = posed(ItemC)({\n  enter: {\n    y: 0,\n    opacity: 1,\n    delay: 0,\n    transition: {\n      y: { type: 'spring', stiffness: 1000, damping: 100 },\n      default: { duration: 300 }\n    }\n  },\n  exit: {\n    y: -50,\n    opacity: 1,\n    delay: 300,\n    transition: {\n      y: { type: 'spring', stiffness: 1000, damping: 100 },\n      default: { duration: 300 }\n    }\n  }\n});\nconst List = posed.div({\n  enter: {\n    y: -50,\n    opacity: 1,\n    delay: 0,\n    transition: {\n      y: { type: 'spring', ease: 'easeInOut', stiffness: 1000, damping: 100 },\n      default: { duration: 300 }\n    }\n  },\n  exit: {\n    y: 500,\n    opacity: 0,\n    delay: 0,\n    transition: {\n      y: {\n        type: 'spring', stiffness: 1000, damping: 100, restDelta: 0.5,\n        restSpeed: 10\n      },\n      default: { duration: 300 }\n    }\n  }\n});\nconst TransitionItems = (props) => (\n  <Transition animateOnMount={true}  >\n\n    {\n      props.items.map((item, index) => (\n        <CommentListItem\n          enterAfterExit={true}\n          beforeChildren={true}\n          animateOnMount={true}\n          key={index}\n          item={item}\n          index={index}\n          {...props}\n        />\n      ))\n    }\n\n  </Transition>\n)\n\n// const SOCKET_URI = 'http://localhost:8002';\n// const SOCKET_URI = \"http://3.135.242.213:8002\"\nconst SOCKET_URI = \"https://socketio.quantacom.co\"\n\nclass MessageBoxProject extends React.Component {\n  socket = null;\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      ready: false,\n      project: this.props.project,\n      comments: this.props.project.comments,\n      authors: []\n    }\n\n    console.log('Messagebox', props)\n\n    this.avatar = this.avatar.bind(this);\n\n    this.submitMessage = this.submitMessage.bind(this);\n\n    this.messageText = React.createRef()\n\n    this.addMessage = this.addMessage.bind(this)\n    this.submitMessage = this.submitMessage.bind(this)\n    this.initSocketConnection = this.initSocketConnection.bind(this)\n    this.onClientDisconnected = this.onClientDisconnected.bind(this)\n    this.onReconnection = this.onReconnection.bind(this)\n    this.setupSocketListeners = this.setupSocketListeners.bind(this)\n    this.onMessageRecieved = this.onMessageRecieved.bind(this)\n    this.onConnect = this.onConnect.bind(this)\n    this.extractAuthors = this.extractAuthors.bind(this)\n    this.scrollMessageBoxIntoView = this.scrollMessageBoxIntoView.bind(this)\n\n    this.messagesList = React.createRef();\n\n  }\n  scrollMessageBoxIntoView() {\n    document.querySelector('body').scroll({\n      top: 130,\n      left: 0,\n      behavior: 'smooth'\n    })\n  }\n  addMessage = message =>\n    this.setState(state => ({ comments: [message, ...state.comments] }))\n\n  async submitMessage(e) {\n\n    e.preventDefault();\n\n    // on submitting the ChatInput form, send the message, add it to the list and reset the input\n    // const message = { author: this.state.name, message: messageString }\n\n    let authorId = this.context.account.user.id;\n    let randomId = Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);\n    let message = {\n      author: authorId,\n      text: this.messageText.current.value,\n      createdAt: new Date(),\n      id: randomId\n    }\n\n    console.log('message ]]', message)\n\n    let authorIds = this.state.authorIds;\n\n    if (!authorIds.includes(authorId)) {\n\n      // this.setState(this.state => ({ authorIds: [authorId, ...this.state.authorIds] }))\n\n      let authorIds = this.state.authorIds;\n\n      let a = new Set(authorIds);\n\n      a.add(authorId)\n\n      let b = Array.from(a)\n\n      this.setState({ authorIds: b })\n\n      await Fn.fetchCommentAuthor({ self: this, authorId: authorId })\n    }\n\n    this.socket.emit('message', JSON.stringify(message))\n\n    this.messageText.current.value = null;\n\n    setTimeout(() => {\n\n      if (document.getElementById('MessagesList')) {\n        document.getElementById('MessagesList').scroll({\n          top: 9999999999,\n          left: 0,\n          behavior: 'smooth'\n        });\n      }\n\n    }, 500)\n\n  }\n\n  /**\n     *\n     * Shows error if client gets disconnected.\n     */\n  onClientDisconnected() {\n\n    message.info('Connection Lost from server, please check your connection')\n    console.log('[[ Socket.io server disconnected. ]]')\n    // NotificationManager.error(\n    //   \"Connection Lost from server please check your connection.\",\n    //   \"Error!\"\n    // );\n  }\n\n  /**\n   *\n   * Established new connection if reconnected.\n   */\n  onReconnection() {\n    // message.info('Server re-connected')\n    console.log('[[ Socket.io server reconnected. ]]')\n    // if (this.state.user) {\n    //   // this.socket.emit(\"sign-in\", this.state.user);\n    //   // NotificationManager.success(\"Connection Established.\", \"Reconnected!\");\n    // }\n  }\n\n  onConnect() {\n    console.log(' ', ' ', ' ', ' ')\n    console.log('[[ Socket.io server connected. ]]')\n    console.log(' ', ' ', ' ', ' ')\n\n    // message.info('Server re-connected')\n\n  }\n  /**\n   *\n   * Setup all listeners\n   */\n\n  setupSocketListeners() {\n    this.socket.on(\"connect\", this.onConnect)\n    this.socket.on(\"message\", this.onMessageRecieved);\n    this.socket.on(\"reconnect\", this.onReconnection);\n    this.socket.on(\"disconnect\", this.onClientDisconnected);\n  }\n\n  /**\n   *\n   * @param {MessageRecievedFromSocket} message\n   *\n   * Triggered when message is received.\n   * It can be a message from user himself but on different session (Tab).\n   * so it decides which is the position of the message \"right\" or \"left\".\n   *\n   * increments unread count and appends in the messages array to maintain Chat History\n   */\n\n  onMessageRecieved(message) {\n    // console.log('Message', message)\n\n    let comments = this.state.comments;\n\n    comments.push(JSON.parse(message))\n\n    this.setState({ comments: comments })\n\n    //  this.addMessage(message)\n\n  }\n  async avatar(item) {\n\n    // let authorId = item.author;\n    // return await Fn.fetchAuthor({ self: this, authorId: authorId })\n\n  }\n  initSocketConnection() {\n    this.socket = io.connect(SOCKET_URI);\n  }\n\n  async componentWillReceiveProps() {\n    // this.createMessageList()\n    // console.log('will receive props', this.props)\n    // await Fn.fetchCommentAuthors({ self: this, comments: this.props.project.comments })\n  }\n  async extractAuthors() {\n\n    let comments = this.props.project.comments;\n\n    let authorIds = new Set();\n\n    for (let item of comments) {\n      authorIds.add(item.author)\n    }\n\n    let a = Array.from(authorIds)\n\n    this.setState({\n      authorIds: a\n    })\n\n    await Fn.fetchCommentAuthors({ self: this, authorIds: a })\n\n  }\n  componentDidUpdate() {\n    // console.log('MessageBox updated', this.props)\n  }\n  async componentDidMount() {\n\n    this.initSocketConnection()\n\n    this.setupSocketListeners()\n\n    this.extractAuthors()\n\n    // console.log('MessageBox', this.props)\n\n  }\n  render() {\n    return (\n      <div className=\"flex flex-column relative h-100 w-100 flex-auto \">\n        <div className=\"flex flex-column relative h-100 w-100 flex-auto \">\n          {\n            this.state.ready ?\n              <>\n\n                <div id=\"\" className=\"flex -absolute -bottom-0 w-100 bb b--black-05\">\n                  <form onSubmit={this.submitMessage} className=\"flex flex-row w-100 ma0\">\n                    <div className=\"flex flex-column w-80\">\n                      <input\n                        onClick={this.scrollMessageBoxIntoView}\n                        required={true}\n                        placeholder={'Enter text ...'}\n                        ref={this.messageText}\n                        className=\"bn pa3 f4 fw5 black-50\"\n                        type=\"text\"></input>\n                    </div>\n                    <div className=\"flex flex-column w-20 bl b--black-05\">\n                      <button\n                        type={'submit'}\n                        className=\"flex h-100 items-center justify-center f6 bg-white bn\">\n                        <Icon icon=\"arrow-right\" />\n                      </button>\n                    </div>\n                  </form>\n                </div>\n                <div className=\"relative flex flex-auto flex-column w-100 bg-center bg-cover items-start justify-start relative overflow-hidden\" >\n\n                  {this.state.comments.length > 0 ?\n\n                    <List\n                      ref={this.messagesList}\n                      animateOnMount={true}\n                      id=\"MessagesList\"\n                      className={(this.props.type === \"discussion-large\" ? \" vh64 \" : \" vh47 \") + (\" messages-list mh-150--vh db relative overflow-auto w-100 pa3 \")}>\n                      <TransitionItems\n                        items={this.props.project.comments}\n                        authors={this.state.authors}\n                        fetchAuthor={this.fetchAuthor}\n                        projectOwnerId={this.props.project.owner}\n                        me={this.context.account.user.id}\n                      />\n\n                    </List>\n\n                    :\n                    <div className=\"flex flex-column pv3 f6 fw5 black-40 tc w-100\">\n                      No comments yet\n                </div>\n                  }\n                </div>\n\n              </>\n              : <div className=\"flex flex-column flex-auto h-100 w-100 items-center justify-center\">\n                <div className=\"flex flex-column pa5\">\n                  <Icon type=\"loading\" className=\"f2 black-20\" />\n                </div>\n              </div>\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default MessageBoxProject;\nMessageBoxProject.contextType = AccountContext","// @flow\nimport React, { Component } from \"react\";\nimport AccountContext, {\n  AccountConsumer\n} from \"../../../utils/context/AccountContext.js\";\n\nimport PageTitle from \"../../elements/layout/PageTitle_B.js\";\nimport FilePond from \"../../elements/upload/Filepond.js\";\n\n// import { Page, Text, View, Document, StyleSheet } from '@react-pdf/renderer';\n\nimport { Drawer } from \"antd\";\nimport MessageBoxProject from \"../../elements/display/messages/messageboxProject.js\";\nimport MBox from \"../../elements/display/messages/MBox.js\";\n\nimport { Fn, ui, api } from \"../../../utils/fn/Fn.js\";\nimport Transition from \"../../Layouts/Transition\";\nimport posed from \"react-pose\";\n\nconst Box = posed.div({\n  hidden: { opacity: 0, y: 50 },\n  visible: { opacity: 1, y: 0 }\n});\n\n\nclass EventDiscussion extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hasError: false,\n      // event: this.props.event,\n      // : this.props.project.discussion || null,\n      // files: this.props.project.files || [],\n      drawerOpen: false,\n      activeFile: {},\n      ready: true,\n      activeConversation: null,\n      conversation: this.props.conversationId,\n      activeStream: null,\n      isVisible: false\n    };\n\n    this.toggleDrawer = this.toggleDrawer.bind(this);\n    this.openFilePanel = this.openFilePanel.bind(this);\n    this.updateActiveConversation = this.updateActiveConversation.bind(this);\n    this.fetchConversation = this.fetchConversation.bind(this);\n  }\n  updateActiveConversation(data) {\n    const { conversations, activeConversation } = data;\n\n    this.setState({\n      activeConversation: activeConversation,\n      conversations: conversations\n    });\n  }\n\n  openFilePanel(file) {\n    this.setState({\n      activeFile: file\n    });\n    this.toggleDrawer();\n  }\n\n  toggleDrawer() {\n    this.setState({\n      drawerOpen: !this.state.drawerOpen\n    });\n  }\n\n  async fetchConversation() {\n    console.log(\"fetchConversation\", this.props.conversationId);\n    // if(this.props.conversatsion.participants.includes(null)) {\n    //   return false\n    // }\n\n    await api\n      .fetch(\"conversations\", this.props.conversationId)\n      .then(async conversation => {\n        if (conversation) {\n          Fn.set(\"activeConversation\", conversation);\n          console.log(\"conversation\", conversation);\n          console.log(\n            \"!conversation.hasOwnProperty(messages)\",\n            !conversation.hasOwnProperty(\"messages\"),\n            conversation\n          );\n\n          if (!conversation.hasOwnProperty(\"authors\")) {\n            conversation.authors = [];\n          }\n\n          let participants = new Set(conversation.participants);\n          participants.add(this.context.account.user.id);\n          let p = Array.from(participants);\n\n          conversation.participants = p;\n\n          console.log(\"fetching authors\", conversation.participants);\n\n          let authors = await Fn.fetchAuthors({\n            self: this,\n            authorIds: conversation.participants\n          });\n\n          if (authors) {\n            conversation.authors = authors;\n\n            console.log('conversation',conversation)\n\n            this.setState({\n              activeConversation: conversation,\n              conversationReady: true\n            });\n\n            console.log(\" updated conversation \", conversation);\n\n            setTimeout(() => {\n              this.setState({\n                isVisible: true\n              });\n            }, 1000);\n          }\n        }\n      });\n  }\n  componentDidMount = () => {\n    console.log(\"Discussion mounted\", this.props);\n\n    this.fetchConversation();\n\n    // let self = this;\n    //         setTimeout(() => {\n    //             // self.setState({ isVisible: !this.state.isVisible });\n    //         }, 100)\n\n    // Fn.set('activeDiscussion', this.props.project.discussion)\n  };\n\n\n  render() {\n    const isVisible = this.state.isVisible;\n\n    if (this.state.hasError) {\n      return <h1>Something went wrong.</h1>;\n    }\n    return (\n      <>\n        <section id=\"Discussion\" className=\"flex flex-column w-100 pb4 pt0\">\n          {this.props.title !== null && (\n            <div className=\"flex pb4\">\n            <PageTitle\n              title={\"Discussion\"}\n              docs={\n                (this.state.activeConversation &&\n                  this.state.activeConversation.messages) ||\n                []\n              }\n              ready={this.state.conversationReady}\n            />\n            </div>\n          )}\n\n          {/* <div className=\"file-dropzone flex flex-row flex-wrap \">\n            <FilePond\n              type=\"files\"\n              project={this.props.project}\n              self={this}\n            />\n          </div> */}\n          {!this.state.conversationReady && (\n            <div\n              className={\n                (this.props.loadingAlign === \"center\"\n                  ? \" items-center justify-center \"\n                  : \" items-center justify-start \") +\n                \" items-center justify-center  flex flex-row pv5 pr4\"\n              }\n            >\n              <div className=\"sp sp-3balls\"></div>\n            </div>\n          )}\n          { this.state.conversationReady && (\n            <div\n              className={\n                \" flex flex-column flex-auto box w-100 trans-o-fast trans-y-fast \" +\n                (this.state.isVisible\n                  ? \" opacity-1 transform-y-0 \"\n                  : \" opacity-0 transform-y-50 \")\n              }\n            >\n              <div style={{ height: ui.mobile() ? \"54vh\" : \"auto\" }}>\n\n                <MBox\n                  type={\"discussion-large\"}\n                  conversation={this.state.activeConversation}\n                  conversations={[this.state.activeConversation]}\n                  activeConversationIndex={0}\n                  conversationReady={this.state.conversationReady}\n                  // conversations={this.state.conversations}\n                  stream={this.state.activeStream}\n                  updateActiveConversation={this.updateActiveConversation}\n                  size={this.props.size}\n                  // load={this.props.load}\n                />\n            \n              </div>\n            </div>\n          )}\n          {/* </div> */}\n        </section>\n\n        <Drawer\n          title=\"Basic Drawer\"\n          placement=\"right\"\n          closable={true}\n          onClose={this.toggleDrawer}\n          visible={this.state.drawerOpen}\n          width={\"60vw\"}\n        >\n          {this.state.drawerOpen && (\n            <div className=\"pointer flex flex-column justify-end items-center pa3 bg-white \">\n              <h3 className=\"f5 fw6 black tc pv2 ph3 word-break-all\">\n                {this.state.activeFile.file.originalname}\n              </h3>\n              <div className=\"pointer flex flex-column justify-end items-center pa3 bg-white br2 bs-b mb2 mr2\">\n                <div\n                  style={{\n                    backgroundImage: 'url(\"' + this.state.activeFile.url + '\")'\n                  }}\n                  className=\"h5 file-item bg-cover bg-center cover flex flex-column justify-end items-center pa3 bg-white br2 bs-b mb2 mr2\"\n                ></div>\n              </div>\n            </div>\n          )}\n        </Drawer>\n      </>\n    );\n  }\n}\n\nexport default EventDiscussion;\nEventDiscussion.contextType = AccountContext;\n","import React, { Component } from 'react';\nimport AccountContext, { AccountConsumer } from '../../../utils/context/AccountContext.js';\n\nimport PageTitle from '../../elements/layout/PageTitle_B.js'\nimport FilePond from '../../elements/upload/Filepond.js';\nimport { Drawer } from 'antd';\n// import Lightbox from 'react-lightbox-component';\nimport Lightbox from 'react-image-lightbox';\n\nimport 'react-image-lightbox/style.css';\nimport MBox from '../../elements/display/messages/MBox.js';\n\nimport { Fn, api, ui } from '../../../utils/fn/Fn.js';\nimport log from 'loglevel';\nimport './style.css';\nwindow.log = log;\n\nclass Files extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      hasError: false,\n      project: this.props.project,\n      files: [],\n      drawerOpen: false,\n      innerDrawerOpen: false,\n      activeFile: null,\n      ready: true,\n      lightboxActive: false,\n      conversation: null,\n      activeConversation: null,\n      activeStream: null,\n      conversationReady: false,\n      mboxActive: false\n    }\n\n    this.toggleDrawer = this.toggleDrawer.bind(this)\n    this.toggleInnerDrawer = this.toggleInnerDrawer.bind(this)\n    this.openFilePanel = this.openFilePanel.bind(this)\n    this.toggleLightbox = this.toggleLightbox.bind(this)\n    this.updateActiveConversation = this.updateActiveConversation.bind(this)\n\n  }\n  toggleInnerDrawer() {\n    this.setState({\n      innerDrawerOpen: !this.state.innerDrawerOpen\n    })\n  }\n  toggleLightbox() {\n\n    // alert()\n\n    this.setState({\n      lightboxActive: !this.state.lightboxActive,\n      mboxActive: false\n    })\n  }\n  async openFilePanel(file) {\n\n    console.log('open file panel', file)\n    this.setState({\n      activeFile: file\n    })\n    this.toggleDrawer()\n\n    await api.fetch('conversations', file.conversation).then(async conversation => {\n\n      if (conversation) {\n        Fn.set('activeConversation', conversation)\n        console.log('conversation', conversation)\n        console.log('!conversation.hasOwnProperty(messages)', !conversation.hasOwnProperty('messages'), conversation)\n        if (!conversation.hasOwnProperty('messages')) {\n          conversation.messages = []\n        }\n        if (!conversation.hasOwnProperty('authors')) {\n          conversation.authors = []\n        }\n        if (!conversation.hasOwnProperty('participants')) {\n          // conversation.participants = []\n          conversation.participants = []\n        }\n\n        let participants = new Set(conversation.participants);\n        participants.add(this.context.account.user.id)\n        let p = Array.from(participants)\n\n        conversation.participants = p;\n\n        console.log('fetching authors', conversation.participants)\n\n        let authors = await Fn.fetchAuthors({\n          self: this, authorIds: conversation.participants\n        })\n\n        if (authors) {\n          conversation.authors = authors;\n\n          this.setState({\n            activeConversation: conversation,\n            conversationReady: true\n          })\n\n          console.log(' updated conversation ', conversation)\n        }\n\n      }\n\n    })\n\n  }\n\n  toggleDrawer() {\n    this.setState({\n      drawerOpen: !this.state.drawerOpen,\n      mboxActive: false\n    })\n\n    // let file \n  }\n\n  componentDidMount = () => {\n\n    console.log('Files mounted', this.props);\n    if(this.props.type === \"calendar\") {\n      let files = this.props.event.event.files;\n      this.setState({\n        files: files\n      })\n    }\n    else {\n      let files = this.props.project && this.props.project.files && this.props.project.files.reverse() || [];\n      this.setState({\n        files: files\n      })\n    }\n\n  }\n  updateActiveConversation(data) {\n\n    const { conversations, activeConversation } = data\n\n    this.setState({\n      activeConversation: activeConversation,\n      conversations: conversations\n    })\n\n  }\n\n\n\n  render() {\n    if (this.state.hasError) {\n      return <h1>Something went wrong.</h1>;\n    }\n    return (\n      <>\n        <section id=\"Files\" className=\"flex flex-column w-100 pb4 pt0\">\n        <div className=\"flex flex-row mb4 \">\n          <PageTitle\n            title={\"Files\"}\n            docs={this.state.files}\n            ready={this.state.ready}\n          />\n          </div>\n\n          <div className=\"file-dropzone flex flex-row flex-wrap mb3 \">\n            <FilePond\n              type={\"files\"}\n              // type={this.props.type}\n              project={this.props.type === \"calendar\" ? this.props.event : this.props.project}\n              self={this}\n            />\n          </div>\n          \n          <div className=\"flex flex-row flex-wrap justify-between col-4\">\n            {\n              this.state.files.map((file, index) => (\n                <div\n                  onClick={() => this.openFilePanel(file)}\n                  className=\"pointer flex flex-column justify-between items-center  bg-white br2 bs-b- mb3\">\n                  <div className=\" flex flex-column justify-start items-center ph4 pt4 w-100\">\n                    {\n                      file.fileType === \"application/pdf\" &&\n                      <>\n                        <div\n                          style={{ backgroundSize: '60%', backgroundImage: 'url(\"/icons/pdf2.png\")' }}\n                          className=\"w-100 h5 file-item bg-center flex flex-column justify-end items-center pa3 bg-white br4 bs-b- mb3-\">\n\n                        </div>\n\n                        <h3 className=\"f6 fw5 white- black-30 tc pv3 ph3 word-break-all\">{file.title}</h3></>\n\n                    }\n\n                    {\n                      file.fileType === \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\" &&\n                      <>\n                        <div\n                          style={{ backgroundSize: '60%', backgroundImage: 'url(\"/icons/docx.png\")' }}\n                          className=\"w-100 h5 file-item bg-center flex flex-column justify-end items-center pa3 bg-white br4 bs-b-mb3\">\n\n                        </div>\n\n                        <h3 className=\"f6 fw5 white- black-30 tc pv3 ph3 word-break-all\">{file.title}</h3></>\n\n                    }\n\n                    {\n                      file.fileType === \"image/png\" &&\n\n                      <> <div\n                        style={{ backgroundImage: 'url(\"' + file.url + '\")' }}\n                        className=\"w-100 h5 file-item bg-cover bg-center cover flex flex-column justify-end items-center pa3 bg-white br4 bs-b-mb3\">\n                        {/* <h3 className=\"f5 fw6 white tc pv2 ph3 word-break-all\">{file.title}</h3> */}\n                      </div>\n\n                        <h3 className=\"f6 fw5 white- black-30 tc pv3 ph3 word-break-all\">{file.title}</h3></>\n\n                    }\n\n                    {\n                      file.fileType === \"image/jpg\" || file.fileType === \"image/jpeg\" &&\n\n                      <> <div\n                        style={{ backgroundImage: 'url(\"' + file.url + '\")' }}\n                        className=\"w-100 h5 file-item bg-cover bg-center cover flex flex-column justify-end items-center pa3 bg-white br4 bs-b-mb3\">\n                        {/* <h3 className=\"f5 fw6 white tc pv2 ph3 word-break-all\">{file.title}</h3> */}\n                      </div>\n\n                        <h3 className=\"f6 fw5 white- black-30 tc pv3 ph3 word-break-all\">{file.title}</h3></>\n\n                    }\n\n                  </div>\n                  {/* <div className=\"  flex flex-column justify-start items-center pa0 w-100 bt b--black-05\">\n\n                    <div className=\"flex flex-row justify-start w-100 pa2\">\n\n                      {this.props.invited.map((item, index) => (\n\n                        <div className=\"flex flex-column pa1 \">\n\n                          <div\n                            style={{ width: '35px', height: '35px', backgroundImage: 'url(\"' + item.profile.picture + '\")' }}\n                            className=\"br1- round bg-cover bg-center\" />\n\n                        </div>\n\n                      ))}\n                      {\n                        this.props.invited.length === 0 &&\n                        <div className=\"flex flex-column pa1 \">\n\n                          <span className=\"f5 fw5 black-50\">No linked users</span>\n\n                        </div>\n                      }\n\n                    </div>\n                  </div> */}\n\n                </div>\n              ))\n            }\n          </div>\n\n        </section>\n\n        <Drawer\n          title=\"Basic Drawer\"\n          placement={ui.mobile() ? \"bottom\" : \"right\"}\n          closable={true}\n          onClose={this.toggleDrawer}\n          visible={this.state.drawerOpen}\n          width={ui.mobile() ? \"100vw\" : \"50vw\"}\n          height={ui.mobile() ? \"90vh\" : \"100vh\"}\n          className={\" child-bg-white \"}\n        >\n          {\n            this.state.drawerOpen &&\n            <div className={(this.state.mboxActive ? \" active \" : \" inactive \") + (\" trans-a drawer-inner pointer flex flex-column justify-start items-center pa3 bg-white h-100\")}>\n              <h3 className=\"f5 fw6 black tc pv2 ph3 word-break-all\">{this.state.activeFile.title && this.state.activeFile.title || \"\"}</h3>\n              <div\n                onClick={this.toggleLightbox}\n\n                className=\"image-preview-wrapper pointer flex flex-column justify-end items-center bg-white br2 bs-b\">\n                <img\n\n                  src={this.state.activeFile.url}\n                  // style={{ backgroundImage: 'url(\"' + this.state.activeFile.url + '\")' }}\n                  className=\" image-preview-wrapper w-auto h-auto file-item bg-cover bg-center cover flex flex-column justify-end items-center bg-white br3\"\n\n                />\n\n              </div>\n\n              <button\n                onClick={this.toggleInnerDrawer}\n                className=\"raleway flex flex-row items-center justify-center f5 fw6 black-50 ba bw1 b--black-05 bs-b- mt4 ph4 pv3 br2 w-100 tc mw5 hover-bg-near-white bg-white pointer trans-a \">Open discussion</button>\n              {/* <Lightbox images={\n                [\n                  {\n                    src: this.state.activeFile.url,\n                    title: this.state.activeFile.title,\n                    description: this.state.activeFile.description\n                  }\n                ]\n              } /> */}\n              <Drawer\n                title=\"Basic Drawer\"\n                placement={ui.mobile() ? \"bottom\" : \"right\"}\n                closable={true}\n                onClose={this.toggleInnerDrawer}\n                visible={this.state.innerDrawerOpen}\n                width={ui.mobile() ? \"100vw\" : \"50vw\"}\n                height={ui.mobile() ? \"90vh\" : \"100vh\"}\n                className={\" child-bg-white \"}\n              >{\n                  this.state.conversationReady &&\n                  <div\n                    onClick={() => { this.setState({ mboxActive: true }) }}\n                    className={(Fn.get('isMobile') ? \" w-100 \" : \"  w-100 bg-white \")\n                      + (\"   mbox-wrapper pv4 ph5 flex flex-column \")}>\n                    {\n                      this.state.conversationReady &&\n                      <MBox\n                        type={\"discussion-large\"}\n                        conversation={this.state.activeConversation}\n                        conversations={[this.state.activeConversation]}\n                        activeConversationIndex={0}\n                        conversationReady={this.state.conversationReady}\n                        // conversations={this.state.conversations}\n                        stream={this.state.activeStream}\n                        updateActiveConversation={this.updateActiveConversation}\n                      // load={this.props.load}\n                      />\n                    }\n\n                  </div>\n                }</Drawer>\n\n              {\n                this.state.lightboxActive &&\n                <Lightbox\n                  mainSrc={this.state.activeFile.url}\n                  nextSrc={this.state.activeFile.url}\n                  prevSrc={this.state.activeFile.url}\n                  onCloseRequest={() => this.setState({ lightboxActive: false })}\n\n                />}\n            </div>\n          }\n\n        </Drawer>\n      </>\n\n    );\n  }\n}\n\nexport default Files;\nFiles.contextType = AccountContext;","import React from \"react\";\nimport { Fn, api } from \"../../../utils/fn/Fn.js\";\n\nexport default class Peson extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      person: null,\n      ready: false\n    };\n  }\n  async componentDidMount() {\n    let userId =\n      typeof this.props.item === \"object\"\n        ? this.props.item.id\n        : this.props.item;\n    // let userId = this.props.item;\n    let url = api.url(\"users\") + userId;\n    let config = {\n      method: \"GET\",\n      headers: {\n        Authorization: \"Bearer \" + Fn.get(\"account\").tokens.access.token,\n        \"Content-Type\": \"application/json\"\n      }\n      // body: JSON.stringify()\n    };\n    // console.log(\"url\", url);\n    await fetch(url, config)\n      .then(res => {\n        return res.json();\n      })\n      .then(async res => {\n        // console.log('person',res)\n        this.setState({\n          person: res,\n          ready: true\n        });\n      });\n  }\n  render() {\n    const { person } = this.state;\n    return (\n      <div\n        // onClick={\n        //   this.state.dialogType === \"single\" &&\n        //   this.newConversation(item)\n        // }\n        className=\"flex flex-row justify-between pr3 pb3\"\n      >\n        <div\n          // to={\"/user/\" + item.id}\n          className={\n            \"    pointer flex flex-row-ns flex-row items-center justify-start  w-100-s bn-ns bb b--black-05\"\n          }\n        >\n          {this.state.ready && (\n            <>\n              <div\n                style={{\n                  width: \"30px\",\n                  height: \"30px\",\n                  borderRadius: \"100px\",\n                  backgroundImage: \"url(\" + person.profile.picture + \")\"\n                }}\n                className=\"cover bg-center\"\n              />\n              <div\n                className={\n                  \"    flex flex-row -flex-column pt2-ns- pl3 f5 fw6 black  \"\n                }\n              >\n                <div className={\" flex  \"}>{person.profile.name.first}</div>\n                <div className={\" flex ml1\"}>{person.profile.name.last}</div>\n              </div>\n            </>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\n\nimport moment from 'moment';\nimport { Fn } from '../../../utils/fn/Fn.js';\n\nimport Person from './person.js';\n\nexport default class Schedule extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      schedule: [],\n      startTime: null,\n      endTime: null,\n      peopleReady: false\n    }\n    console.log('Schedule props ',props)\n    // this.addScheduleItem = this.addScheduleItem.bind(this)\n    }\n//   addScheduleItem() {\n//     // let event = /\n//     this.props.toggleInnerDrawer()\n\n//     console.log('Event type',this.props.event.event.type)\n//     let type = this.props.event.event.type;\n    \n//     let scheduleItem = {\n//         day: this.props.event.day,\n//         time: {\n//             start: this.state.startTime,\n//             end: this.state.endTime\n//         } \n//     }\n\n\n//     if(type === \"event\") {\n//         let event = this.props.event.event;\n//         if(!event.hasOwnProperty('schedule')) {\n//             event.schedule = []\n//         }\n//         event.schedule.push(scheduleItem)\n\n\n//     }\n\n//     if(type === \"project\") {\n//         let project = this.props.event.event.project;\n//         if(!project.hasOwnProperty('schedule')) {\n//             project.schedule = []\n//         }\n//         project.schedule.push(scheduleItem)\n\n\n//     }\n//   }\n  async componentDidMount() {\n    let schedule = this.props.event.event.schedule || [];\n    this.setState({\n      schedule: schedule\n    });\n\n    console.log('schedule',schedule)\n    // let schedule_ = []\n// for(let item of schedule){\n//   if(item.people.length) {\n//     let people = item.people;\n\n//     await Fn.fetchScheduleUsers({ self: this, people }).then(\n//       people => {\n//         item.people_ = people \n//       }\n//     )\n\n//     schedule_.push(item)\n//   }\n\n// }\n\n// this.setState({ schedule: schedule })\n\n  }\n  render() {\n    return (\n      <div className=\"flex flex-column flex-auto w-100 ph5 pb3\">\n        <div className=\"flex flex-row flex-auto justify-between w-100\">\n          <div className=\"flex \">\n    <h3 className=\"f4 fw5 black-60\">Schedule <span className=\"ph2 pv1 br1 bg-black-20 white f5 fw6  ml2 \">{this.state.schedule.length}</span></h3>\n          </div>\n          <div\n            id=\"ScheduleButtons\"\n            className=\"flex flex-column\"\n          >\n            <div id=\"\" className=\"flex flex-row flex-auto\">\n              <button\n              onClick={this.props.toggleInnerDrawer}\n                id=\"\"\n                className=\"flex flex-row flex-auto w-100 ph3 pv2 br1 bg-black-20 black-50- white f5 fw6\"\n              >\n                Add Schedule Item\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"flex flex-column flex-auto w-100 pt4\">\n          {this.state.schedule.length && this.state.schedule.map((item, index) => (\n            <div className=\"flex flex-column bg-white pt4 ph4  bs-b br3 mb3\">\n            <div className=\"flex flex-row items-center\">\n              <div className=\"flex \">\n                <h3 className=\"f4 fw6 black ttc\">{item.title}</h3>\n              </div>\n              <div className=\"flex ml3\">\n                <h3 className=\"f5 fw5 -60\">\n                  {moment(item.time.start).format('HH:mm')} - {moment(item.time.end).format('HH:mm')}\n                </h3>\n              </div>\n              <div className=\"flex ml3\">\n                <h3 className=\"f5 fw5 -60\">\n                  {item.location}\n                </h3>\n              </div>\n              \n            </div>\n\n<div className=\"flex\">\n<div \n                    style={{maxHeight: '300px'}}\n                    className=\"overflow-auto flex flex-row items-start w-100 pv3\">\n                   {\n                    item.people.map((item_,index_) => (\n                      //  console.log('user',item),\n                    <Person key={index_} item={item_} />\n                     ))\n                   }\n                   </div>\n</div>\n</div>\n          ))}\n        </div>\n      </div>\n    );\n  }\n}\n","// @flow\nimport React, { Component } from \"react\";\nimport AccountContext, {\n  AccountConsumer\n} from \"../../../../utils/context/AccountContext.js\";\n\nimport PageTitle from \"../../../elements/layout/PageTitle_B.js\";\nimport { Drawer, Skeleton, Popover, Checkbox } from \"antd\";\nimport Fn from \"../../../../utils/fn/Fn.js\";\nimport { Icon, Spinner, Dialog } from \"@blueprintjs/core\";\nimport { TimePicker } from \"@blueprintjs/datetime\";\nimport \"@blueprintjs/datetime/lib/css/blueprint-datetime.css\";\nimport moment from \"moment\";\nimport \"moment-timezone\";\n\nimport AddEvent from \"../../../elements/forms/AddEvent.js\";\nimport ViewEvent from \"../../../a/ViewEvent/index.js\";\nimport \"./style.css\";\nimport ProjectCalendar from \"../../../a/ProjectCalendar/index.js\";\nimport { app, ui } from \"../../../../utils/fn/Fn.js\";\nimport EventDiscussion from \"../../../a/Discussion/event.js\";\nimport Files from \"../../../a/Files/index.js\";\nimport Schedule from \"../../../a/Schedule/index.js\";\nimport Loading from '../../../elements/Loading.js';\n// import __ from '../../../../../../../../NPM/util/__';\n\nvar GeoPattern = require(\"geopattern\");\nwindow.GeoPattern = GeoPattern;\n\nclass Calendar_ extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      hasError: false,\n      dialogType: null,\n      ready: false,\n      events: [],\n      activeEvent: {\n        day: new Date()\n      },\n      isOpen: false,\n      drawerOpen: false,\n      innerDrawerOpen: false,\n      innerDrawerOpen2: false,\n      insertEventLocation: null,\n      x: 0,\n      y: 0,\n      newEvent: null,\n      buttons: [],\n      views: [],\n      activeButton: null,\n      activeView: null,\n      userIsAdmin: false,\n      checked: [],\n      connections: [],\n      group: [],\n      startTime: null,\n      endTime: null,\n      buttonLoading: false,\n      calendarReady: true,\n      activeConversationId: null,\n      calendarRefresh: false\n    };\n\n    this.toggleDialog = this.toggleDialog.bind(this);\n    this.toggleDrawer = this.toggleDrawer.bind(this);\n    this.toggleInnerDrawer = this.toggleInnerDrawer.bind(this);\n    this.moveEvent = this.moveEvent.bind(this);\n    this.newEvent = this.newEvent.bind(this);\n    this.setLocation = this.setLocation.bind(this);\n    this.addEvent = this.addEvent.bind(this);\n    this.getProjectEvents = this.getProjectEvents.bind(this);\n    this.getOwnEvents = this.getOwnEvents.bind(this);\n    this.reload = this.reload.bind(this);\n    this.onSelectEvent = this.onSelectEvent.bind(this);\n    this.onSelectEvent2 = this.onSelectEvent2.bind(this);\n    this.onSelectSlot = this.onSelectSlot.bind(this);\n    this.getClickPosition = this.getClickPosition.bind(this);\n    this.dateClick = this.dateClick.bind(this);\n    this.reload = this.reload.bind(this);\n    this.setView = this.setView.bind(this);\n    this.setButtons = this.setButtons.bind(this);\n    this.checkRoles = this.checkRoles.bind(this);\n    this.eventImage = this.eventImage.bind(this);\n    this.getDates = this.getDates.bind(this);\n    this.setReady = this.setReady.bind(this);\n    this.timeOnChange = this.timeOnChange.bind(this);\n    this.insertScheduleItem = this.insertScheduleItem.bind(this);\n    this.addUserToEvent = this.addUserToEvent.bind(this);\n    this.fetchConnections = this.fetchConnections.bind(this);\n    this.insertScheduleItem = this.insertScheduleItem.bind(this);\n    this.insertScheduleItem2 = this.insertScheduleItem2.bind(this);\n    this.setDrawerData = this.setDrawerData.bind(this);\n    this.projectImage = this.projectImage.bind(this);\n\n    this.fullCalendar = React.createRef();\n    this.scheduleTitle = React.createRef();\n    this.scheduleDescription = React.createRef();\n    this.scheduleLocation = React.createRef();\n    this.scheduleForm = React.createRef();\n    this.projectCalendar = React.createRef()\n\n  }\n  setDrawerData(__) {\n    const { day, events } = __;\n    console.log(\"events per day\", day, events);\n    this.setState({\n      drawerType: \"allevents\",\n      allevents: events,\n      day: day\n    });\n    this.toggleDrawer();\n  }\n  projectImage(event) {\n    if (event.type === \"project\") {\n      // console.log('no picture', project)\n      if (event.project.hasOwnProperty(\"media\")) {\n        return event.project.media.images[0].url;\n      } else {\n        return null;\n      }\n    }\n    if (event.type === \"event\") {\n      // console.log('no picture', project)\n      if (event.picture !== null) {\n        return event.picture;\n      } else {\n        return null;\n      }\n    }\n\n    // project.picture\n  }\n  async fetchConnections() {\n    let connections = Fn.get(\"account\").user.profile.connections;\n    await Fn.fetchConnections({ self: this, connections });\n  }\n  async insertScheduleItem2() {\n    console.log(\"insert schedule item\");\n\n    this.setState({\n      buttonLoading: true\n    });\n\n    console.log(\"form\", this.scheduleForm);\n\n    console.log(\"Event type\", this.state.activeEvent);\n\n    let type = this.state.activeEvent.event.type;\n\n    let scheduleItem = {\n      day: this.state.activeEvent.day,\n      time: {\n        start: this.state.startTime,\n        end: this.state.endTime\n      },\n      title: this.scheduleTitle.current.value,\n      description: this.scheduleDescription.current.value,\n      location: this.scheduleLocation.current.value,\n      people: this.state.group.map(a => a.id)\n    };\n\n    console.log(\"schedule item\", scheduleItem);\n\n    if (type === \"event\") {\n      let event = this.state.activeEvent.event;\n\n      if (!event.hasOwnProperty(\"schedule\")) {\n        event.schedule = [];\n      }\n      if (event.schedule === \"undefined\") {\n        event.schedule = [];\n      }\n\n      event.schedule.push(scheduleItem);\n\n      await app.updateEvent({ self: this, event }).then(event => {\n        this.reload();\n        this.setState({\n          buttonLoading: false,\n          innerDrawerOpen: false\n        });\n      });\n    }\n\n    if (type === \"project\") {\n      let project = this.state.activeEvent.event.project;\n\n      if (!project.hasOwnProperty(\"schedule\")) {\n        project.schedule = [];\n      }\n\n      project.schedule.push(scheduleItem);\n\n      await app.updateProject({ self: this, project }).then(project => {\n        this.reload();\n        this.setState({\n          buttonLoading: false,\n          innerDrawerOpen: false\n        });\n      });\n    }\n  }\n  addUserToEvent(config) {\n    const { user, index } = config;\n    let checked = this.state.checked;\n    checked[index] = !this.state.checked[index];\n    let group = this.state.group;\n    group.push(user);\n    this.setState({\n      checked: checked,\n      group: group\n    });\n  }\n  async insertScheduleItem() {\n    // let event = /\n    // this.toggleInnerDrawer()\n    // this.scheduleForm.submit(0)\n  }\n  timeOnChange(e) {\n    // if()\n    console.log(\"time\", moment(e.e).format(\"HH:mm\"));\n\n    if (e.type === \"start\") {\n      this.setState({\n        startTime: e.e\n      });\n    }\n    if (e.type === \"end\") {\n      this.setState({\n        endTime: e.e\n      });\n    }\n  }\n  setReady() {\n    this.setState({\n      ready: true\n    });\n  }\n  insertScheduleItem() {}\n  eventImage1() {\n    let event = this.state.activeEvent.event;\n\n    if (!event.hasOwnProperty(\"picture\")) {\n      return null;\n    } else {\n      return event.picture;\n    }\n  }\n  eventImage(event) {\n    if (event.type === \"project\") {\n      // console.log('no picture', project)\n      if (event.project.hasOwnProperty(\"media\")) {\n        return event.project.media.images[0].url;\n      } else {\n        return null;\n      }\n    }\n    if (event.type === \"event\") {\n      // console.log('no picture', project)\n      if (event.picture !== null) {\n        return event.picture;\n      } else {\n        return null;\n      }\n    }\n\n    // project.picture\n  }\n  toggleDrawer() {\n    this.setState({\n      buttonLoading: false,\n      drawerOpen: !this.state.drawerOpen\n    });\n  }\n  toggleInnerDrawer() {\n    this.setState({\n      innerDrawerOpen: !this.state.innerDrawerOpen\n    });\n  }\n  checkRoles(project) {\n    // const { project } = data\n    let user = Fn.get(\"account\").user.id;\n\n    console.log(\" \");\n    console.log(\" \");\n    console.log(\"userid\", user);\n    console.log(\" \");\n    console.log(\"owner\", project.owner);\n    console.log(\" \");\n    console.log(\" \");\n    console.log(\" \");\n\n    let admins = project.admins;\n    if (project.owner === user) {\n      this.setState({\n        userIsAdmin: true\n      });\n    } else {\n      if (admins.includes(user)) {\n        this.setState({\n          userIsAdmin: true\n        });\n      } else {\n        this.setState({\n          userIsAdmin: false\n        });\n      }\n    }\n  }\n  // onSelectSlot() {\n\n  // }\n  onSelectEvent(__) {\n\n    console.log(\"onSelectEvent\", __);\n\n    const { e, data } = __;\n    const { event, day } = data;\n\n    e.stopPropagation();\n\n    // console.log(\"select event\", __);\n\n    console.log(\"select event\", event);\n    this.setState({\n      drawerType: \"event\"\n    });\n\n    // if (event.project !== null) {\n    if (event.type === \"project\" ) {\n      let project = event.project;\n\n      this.checkRoles(project);\n      let conversations = event.project.conversations;\n      let activeConversationId = conversations.filter(a => a.day === day)[0]\n        .conversation;\n      this.setState({\n        eventType: \"project\",\n        activeConversationId: activeConversationId\n      });\n    } \n    \n    if (event.type === \"event\" ) {\n\n      let conversations = event.conversations;\n\n      // let activeConversationId = conversations.filter(a => a.day === day)[0]\n      //   .conversation;\n        let activeConversationId = event.conversationId;\n\n      this.setState({\n        eventType: \"custom\",\n        activeConversationId: activeConversationId\n      });\n\n    }\n    \n    // else {\n    //   let conversations = event.conversations;\n    //   let activeConversationId = conversations.filter(a => a.day === day)[0]\n    //     .conversation;\n    //   this.setState({\n    //     eventType: \"custom\",\n    //     activeConversationId: activeConversationId\n    //   });\n    // }\n\n    this.setState({\n      activeEvent: data\n    });\n\n    this.toggleDrawer();\n  }\n  onSelectEvent2(__) {\n    // const { e, data } = __;\n    console.log(\"onSelectEvent\", __);\n    const { item, index, day } = __;\n    const event = item;\n    // e.stopPropagation();\n\n    // console.log(\"select event\", __);\n\n    // console.log(\"select event\", event);\n    this.setState({\n      drawerType: \"event\"\n    });\n\n    if (event.type === \"project\") {\n      let project = event.project;\n\n      this.checkRoles(project);\n      let conversations = event.project.conversations;\n      let activeConversationId = conversations.filter(a => a.day === day)[0]\n        .conversationId;\n      this.setState({\n        eventType: \"project\",\n        activeConversationId: activeConversationId\n      });\n    } else {\n      let conversations = event.conversations;\n      let activeConversationId = conversations.filter(a => a.day === day)[0]\n        .conversationId;\n      this.setState({\n        eventType: \"custom\",\n        activeConversationId: activeConversationId\n      });\n    }\n\n    this.setState({\n      activeEvent: { event: event, day: day }\n    });\n\n    // this.toggleDrawer();\n  }\n  setLocation(item) {\n    console.log(\"setLocation\", item);\n    this.setState({ insertEventLocation: item });\n  }\n\n  moveEvent({ event, start, end, isAllDay: droppedOnAllDaySlot }) {\n    // const { events } = this.state\n\n    // const idx = events.indexOf(event)\n    let allDay = event.allDay;\n\n    // if (!event.allDay && droppedOnAllDaySlot) {\n    //   allDay = true\n    // } else if (event.allDay && !droppedOnAllDaySlot) {\n    //   allDay = false\n    // }\n\n    const updatedEvent = { ...event, start, end, allDay };\n\n    // const nextEvents = [...events]\n    // nextEvents.splice(idx, 1, updatedEvent)\n\n    // this.setState({\n    //   events: nextEvents,\n    // })\n\n    alert(`${event.title} was dropped onto ${updatedEvent.start}`);\n  }\n\n  resizeEvent = ({ event, start, end }) => {\n    // const { events } = this.state\n\n    // const nextEvents = events.map(existingEvent => {\n    //   return existingEvent.id == event.id\n    //     ? { ...existingEvent, start, end }\n    //     : existingEvent\n    // })\n\n    // this.setState({\n    //   events: nextEvents,\n    // })\n\n    alert(`${event.title} was resized to ${start}-${end}`);\n  };\n\n  dateClick(e) {\n    // console.log(e)\n    alert(e);\n\n    let calendarApi = this.fullCalendar.current.getApi();\n\n    // console.log('calendar api', calendarApi)\n  }\n  newEvent(day) {\n    // let idList = this.state.events.map(a => a.id)\n    // let newId = Math.max(...idList) + 1\n    // let hour = {\n    //   id: newId,\n    //   title: 'New Event',\n    //   allDay: event.slots.length == 1,\n    //   start: event.start,\n    //   end: event.end,\n    // }\n    // this.setState({\n    //   events: this.state.events.concat([hour]),\n    // })\n\n    console.log(\"new event \", day);\n\n    let event = {\n      day: day\n    };\n    let start = moment(event.start);\n    start = start.set({\n      hour: \"10\",\n      minute: \"00\",\n      second: \"00\"\n    });\n    let end = moment(event.end);\n    end = end.set({\n      hour: \"17\",\n      minute: \"00\",\n      second: \"00\"\n    });\n    // start.setTime() = moment('08:00:00', 'HH:mm:ss');\n\n    // console.log('start', start, end)\n\n    event.start = start;\n    event.end = end;\n\n    this.setState({\n      newEvent: event,\n      dialogType: \"addEvent\"\n    });\n\n    this.toggleDialog();\n  }\n  toggleDialog() {\n    this.setState({\n      isOpen: !this.state.isOpen\n    });\n  }\n  getDates(startDate, stopDate) {\n    var dateArray = [];\n    var currentDate = moment(startDate);\n    var stopDate = moment(stopDate);\n    while (currentDate <= stopDate) {\n      dateArray.push(moment(currentDate).format(\"YYYY-MM-DD\"));\n      currentDate = moment(currentDate).add(1, \"days\");\n    }\n    return dateArray;\n  }\n  async addEvent(data) {\n    let location = this.state.insertEventLocation;\n    let title = data.title;\n    let start = data.start;\n    let end = data.end;\n    let user = Fn.get(\"account\").user;\n    let days = this.getDates(start, end);\n    console.log(\"days\", days);\n    let event = {\n      title,\n      description: \"\",\n      location,\n      start,\n      end,\n      user: user.id,\n      conversationId: null,\n      files: [],\n      people: [],\n      days: days\n    };\n\n    await app.createEvent({ self: this, event }).then(res => {\n      // this.context.updateAccount()\n      console.log(\"createEvent res \", res);\n\n      this.setState({ newEvent: null });\n      // this.reload();\n      console.log(\"context\", this.context);\n      this.projectCalendar.current.start()\n      // this.setState({\n      //   calendarReady: false\n      // });\n      // setTimeout(() => {\n      //   this.setState({\n      //     calendarReady: true\n      //   });\n      // }, 200);\n      console.log('calendar context ',this.context)\n      // this.context.reloadCalendar();\n      // this.reload()\n      // this.refreshCalendar()\n      // this.setState({\n      //   calendarRefresh: true\n      // })\n      // setTimeout(() => {\n      //   this.setState({\n      //     calendarRefresh: false\n      //   })\n      // }, 500)\n\n      return res;\n    });\n  }\n  reload() {\n    this.setState({\n      ready: false\n    });\n    setTimeout(() => {\n      this.setState({\n        ready: true\n      });\n    }, 500);\n    // this.getProjectEvents()\n    // this.getOwnEvents()\n  }\n  getProjectEvents() {\n    // console.log(\"Calendar mounted\");\n\n    let events = [];\n\n    let events_ = Fn.get(\"subscribedProjects\");\n\n    for (let event of events_) {\n      let e = {\n        id: event.id,\n        title: event.title,\n        // allDay: true,\n        start: moment(event.start_date)\n          .tz(\"Africa/Johannesburg\")\n          .toDate(),\n        end: moment(event.end_date)\n          .tz(\"Africa/Johannesburg\")\n          .toDate()\n      };\n\n      events.push(e);\n    }\n\n    this.setState({ events });\n\n    // console.log('events', events)\n  }\n  getOwnEvents() {\n    // console.log(\"Calendar mounted\");\n\n    let events = this.state.events;\n\n    let events_ =\n      typeof Fn.get(\"account\").user.profile.events !== \"undefined\"\n        ? Fn.get(\"account\").user.profile.events\n        : [];\n\n    for (let event of events_) {\n      let e = {\n        id: event.title + event.start,\n        title: event.title,\n        // allDay: true,\n        // start: event.start,\n        // end: event.end\n        start: moment(event.start)\n          .tz(\"Africa/Johannesburg\")\n          .toDate(),\n        end: moment(event.end)\n          .tz(\"Africa/Johannesburg\")\n          .toDate()\n      };\n\n      events.push(e);\n    }\n\n    Fn.store({ label: \"calendarEvents\", value: events });\n\n    this.setState({ events, ready: true });\n\n    console.log(\"events\", events);\n\n    //     this.setState({\n    //   ready: true\n    // })\n  }\n  onSelectSlot(slot) {\n    console.log(\"select slot\", slot);\n\n    // alert(JSON.stringify(slot));\n    // this.setState({\n    //   x: slot.box.x,\n    //   y: slot.box.y\n    // })\n  }\n  getClickPosition(e) {\n    console.log(e);\n    // var xPosition = e.clientX;\n    // var yPosition = e.clientY;\n\n    // this.setState({\n    //   x: e.clientX,\n    //   y: e.clientY\n    // })\n  }\n\n  reload() {\n    // this.setState({\n    //   ready: false,\n    //   events: null\n    // })\n    // setTimeout(() => {\n    //   this.getProjectEvents()\n    //   this.getOwnEvents()\n    // }, 500)\n  }\n\n  componentDidMount = () => {\n    // this.reload()\n    // console.log('hisotry ** ',this.props.history)\n    if(this.props.history && this.props.history.location && this.props.history.location.pathname && this.props.history.location.pathname === \"/calendar\") {\n\nconst buttons = [\n  {\n    label: 'Add Event',\n    action: () => this.toggleDialog()\n  },\n]\n\n    this.context.setPage({ title: \"Calendar\", subtitle: \"...\", buttons: buttons })\n\n    }\n\n\n    this.setButtons();\n\n    document.querySelector(\"body\").scroll({\n      top: 0,\n      left: 0,\n      behavior: \"smooth\"\n    });\n    this.fetchConnections();\n    // console.log('ref fullCalendar', this.fullCalendar)\n\n    // let fullCalendar = document.getElementById('fullCalendar')\n    // let calendar = new Calendar(this.fullCalendar, {\n    //   // dateClick: function (day) {\n    //   //   alert('a day has been clicked!', day);\n    //   // },\n    //   plugins: [dayGridPlugin, timeGridPlugin, listPlugin]\n    // });\n\n    // calendar.render()\n\n    // calendar.on('dateClick', function (info) {\n    //   console.log('clicked on ' + info.dateStr);\n    // });\n\n    // document.getElementById('Calendar').addEventListener(\"click\", this.getClickPosition, false);\n  };\n  setView(config) {\n    const { view, button } = config;\n\n    this.setState({\n      view: view,\n      activeButton: button\n    });\n\n    Fn.store({ label: \"projectView\", value: view });\n    Fn.store({ label: \"activeButton\", value: button });\n\n    view === \"discussion\" &&\n      setTimeout(\n        () =>\n          document.querySelector(\"body\").scroll({\n            top: 130,\n            left: 0,\n            behavior: \"smooth\"\n          }),\n        1000\n      );\n  }\n  setButtons() {\n    const buttons = [\n      {\n        title: \"Overview\",\n        role: \"general\",\n        function: () => this.setView({ filter: \"Overview\", button: 0 })\n      },\n\n      {\n        title: \"Discussion\",\n        role: \"general\",\n        function: () => this.setView({ filter: \"Discussion\", button: 1 })\n      },\n      {\n        title: \"Files\",\n        role: \"general\",\n        function: () => this.setView({ filter: \"Files\", button: 2 })\n      },\n      {\n        title: \"People\",\n        role: \"admin\",\n        function: () => this.setView({ filter: \"People\", button: 4 })\n      },\n      {\n        title: \"Checklist\",\n        role: \"admin\",\n        function: () => this.setView({ filter: \"Checklist\", button: 5 })\n      }\n      // {\n      //   title: \"Rate Calculator\",\n      //   role: \"admin\",\n      //   function: () => this.setView({ filter: \"Rate Calculator\", button: 6 })\n      // }\n    ];\n\n    // const views = [\"overview\", \"files\", \"discussion\", \"settings\", \"people\"];\n    const views = [\n      {\n        title: \"Overview\",\n        role: \"general\"\n      },\n      {\n        title: \"Discussion\",\n        role: \"general\"\n      },\n      {\n        title: \"Files\",\n        role: \"general\"\n      },\n      {\n        title: \"People\",\n        role: \"admin\"\n      },\n      {\n        title: \"Checklist\",\n        role: \"admin\"\n      }\n    ];\n\n    this.setState({\n      buttons: buttons,\n      activeButton: buttons[0],\n      views: views,\n      view: views[0]\n    });\n  }\n  render() {\n    // const Slot = () => (\n    //   <div className=\"bg-red w3 h3\">slot</div>\n    // )\n\n    // let components = {\n    //   slot: Slot,\n    //   event: Slot, // used by each view (Month, Day, Week)\n    //   // toolbar: MyToolbar,\n    //   // agenda: {\n    //   //      event: MyAgendaEvent // with the agenda view use a different component to render events\n    //   // }\n    // }\n\n    if (this.state.hasError) {\n      return <h1>Something went wrong.</h1>;\n    }\n    return (\n      <>\n        <section\n          id=\"Calendar\"\n          className={\n            (this.props.dashboard\n              ? \"  \"\n              : this.props.profile\n              ? \" mt3- \"\n              : \" pa4- -mt3\") + \" w-100 mw9- -center  pb6 \"\n          }\n        >\n          <section\n            id=\"\"\n            className=\"flex flex-column flex-row-ns- justify-between mb4  -ph4 \"\n          >\n            {/* <div\n            onClick={this.reload}\n            className={(Fn.get('isMobile') ? \" top-6vh \" : \"  \") + (\" absolute top-0 right-0 pa4 pointer black-20- hover-black-40 flex flex-row items-center z-9 \")}>\n            <span className=\"mr2 f5 fw4 black-30\">{this.state.ready ? \"reload\" : \"loading\"}</span> {this.state.ready ? <Icon icon=\"refresh\" iconSize={15} className=\"black-40\" /> : <Spinner size={15} className=\"black-40\" />}\n          </div> */}\n\n            {/* <div\n              className={\n                (this.props.dashboard\n                  ? \" pt3 \"\n                  : this.props.profile\n                  ? \" pt0 \"\n                  : \" ph-4 pv4 \") +\n                \" flex flex-row justify-between mb3 mb0-ns pb0 \"\n              }\n            > */}\n              {/* <PageTitle\n                title={\"Calendar\"}\n                // docs={this.state.events}\n                // ready={this.state.ready}\n              /> */}\n              \n              {/* {this.props.profile && (\n              )} */}\n              {/* <div className=\"flex flex-row justify-end w-100 mb0-ns mb3\">\n                <div\n                  id=\"CreateProject\"\n                  className=\"flex flex-column items-start justify-end mb2 w-100-s\"\n                >\n                  <button\n                    onClick={() => this.toggleDialog()}\n                    className={\n                      \"br1- round bs-b bg-black-20 hover-bg-black-10 ph4 pv2 pointer bn relative w-100-s \"\n                    }\n                  >\n                    <span className=\"f5 fw6 white pv0 flex items-center justify-center w-100-s\">\n                      {this.state.buttonLoading ? (\n                        <Icon\n                          icon=\"loading\"\n                          className={\" absolute right-0 f4 black-60 mr2\"}\n                        />\n                      ) : (\n                        <Icon\n                          icon={\"small-plus\"}\n                          iconSize={20}\n                          className={\n                            \" f4 black-60- white  absolute right-0 mr2\"\n                          }\n                        />\n                      )}{\" \"}\n                      Add Event\n                    </span>\n                  </button>\n                </div>\n              </div> */}\n            {/* </div> */}\n\n            <div\n              className={\n                (this.props.dashboard\n                  ? \" \"\n                  : this.props.profile\n                  ? \"\"\n                  : \"  ph0 ph-4-ns \") +\n                \" flex flex-row flex-wrap justify-between br3- overflow-hidden -bg-white-50 \"\n              }\n            >\n              <div className=\"relative flex flex-column w-100 bg-white- pb5\">\n                {/* {this.state.calendarReady && ( */}\n                  <ProjectCalendar\n                  ref={this.projectCalendar}\n                    onSelectEvent={this.onSelectEvent}\n                    newEvent={this.newEvent}\n                    onSelectSlot={this.onSelectSlot}\n                    reload={this.reload}\n                    setReady={this.setReady}\n                    ready={this.state.calendarReady}\n                    user={Fn.get(\"account\").user}\n                    setDrawerData={this.setDrawerData}\n                    profile={this.props.profile}\n                    // calendarRefresh={this.state.calendarRefresh}\n                  />\n               {/* )} */}\n              </div>\n            </div>\n          </section>\n        </section>\n\n        <Drawer\n          title=\"Basic Drawer\"\n          placement=\"right\"\n          closable={true}\n          onClose={this.toggleDrawer}\n          visible={this.state.drawerOpen}\n          width={\"60vw\"}\n          height={\"100vh\"}\n        >\n\n        <Drawer\n          title=\"Basic Drawer\"\n          placement=\"right\"\n          // closable={true}\n          onClose={() => this.setState({ innerDrawerOpen2: false })}\n          visible={this.state.innerDrawerOpen2}\n          width={\"30vw\"}\n          height={\"100vh\"}\n        >\n\n {  this.state.innerDrawerOpen2 && \n            <div className=\"pointer flex flex-column justify-start items-start bg-black-05 h-100\">\n              <div className=\"flex flex-column w-100\">\n                <div className=\"f4 fw4 black-60 ph4 pt4 w-100 pb4\">\n                  \n                  <span className=\"fw6 black-80\">\n                    Something\n                  </span>\n\n                </div>\n              </div>\n              </div>\n              \n              }\n\n        </Drawer>\n\n          {this.state.drawerOpen && this.state.drawerType === \"allevents\" && (\n            <div className=\"pointer flex flex-column justify-start items-start bg-black-05 h-100\">\n              <div className=\"flex flex-column w-100\">\n                <div className=\"f4 fw4 black-60 ph4 pt4 w-100 pb4\">\n                  Events for{\" \"}\n                  <span className=\"fw6 black-80\">\n                    {moment(this.state.day).format(\"Do MMMM YYYY\")}\n                  </span>\n                </div>\n              </div>\n\n              <div className=\"flex flex-column w-100 ph4 pb4\">\n                {this.state.allevents.map((item, index) => (\n                  <div\n                    onClick={e =>\n                      this.onSelectEvent2({ item, index, day: this.state.day })\n                    }\n                    className=\"flex flex-row items-center w-100 mb3\"\n                  >\n                    <div\n                      style={{\n                        backgroundImage:\n                          this.projectImage(item) === null\n                            ? GeoPattern.generate(item.title).toDataUrl()\n                            : 'url(\"' + this.projectImage(item) + '\")'\n                      }}\n                      className=\"flex w3 h3 ml2- hover-slide-up trans-b bg-cover bg-center br2 -round -bg-green mb2-\"\n                    ></div>\n                    <div className=\"flex\">\n                      <h3 className=\"ttc f4 fw5 black-60 tc word-break-all mb0 ml3\">\n                        {item.title}\n                      </h3>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {this.state.drawerOpen && this.state.drawerType === \"event\" && (\n            <div className=\"pointer flex flex-column justify-start items-start bg-white h--100\">\n              <div className=\"flex flex-row overflow-hidden w-100\">\n                {this.state.buttons\n                  .filter(b => b.role === \"general\")\n                  .map((button, index) => (\n                    <button\n                      title={button.title}\n                      onClick={() =>\n                        this.setView({\n                          view: this.state.views[index],\n                          button: button\n                        })\n                      }\n                      id={button.title}\n                      className={\n                        \" bl b--black-05 \" +\n                        (this.state.activeButton.title === button.title\n                          ? \" bg-black-20 \"\n                          : \" bg-black-30 \") +\n                        \" flex flex-column pa0 mr3- pointer justify-center items-center flex-auto\"\n                      }\n                    >\n                      <div\n                        id=\"\"\n                        className=\"flex flex-row ph0 pv0 items-center justify-center\"\n                      >\n                        <span className=\"f5 fw6 black-40- white ph3 pv4 w-100 tc\">\n                          {button.title}\n                        </span>\n                      </div>\n                    </button>\n                  ))}\n                {this.state.eventType === \"project\" &&\n                  this.state.buttons\n                    .filter(b => b.role === \"admin\" && this.state.userIsAdmin)\n                    .map((button, index) => (\n                      <button\n                        title={button.title}\n                        onClick={() =>\n                          this.setView({\n                            view: this.state.views[index + 3],\n                            button: button\n                          })\n                        }\n                        id={button.title}\n                        className={\n                          \" bl b--black-05 \" +\n                          (this.state.activeButton.title === button.title\n                            ? \" bg-black-20 \"\n                            : \" bg-black-30 \") +\n                          \" flex flex-column pa0 mr3- pointer justify-center items-center flex-auto\"\n                        }\n                      >\n                        <div\n                          id=\"\"\n                          className=\"flex flex-row ph0 pv0 items-center justify-center\"\n                        >\n                          <span className=\"f5 fw6 black-40- white ph3 pv4 w-100 tc \">\n                            {button.title}\n                          </span>\n                        </div>\n                      </button>\n                    ))}\n              </div>\n              {this.state.view.title === \"Discussion\" && (\n                <div className=\"flex flex-column justify-start items-start bg-white h-1-00 w-100 pa5\">\n                  <EventDiscussion\n                    // invited={null}\n                    conversationId={this.state.activeConversationId}\n                    loadingAlign={\"left\"}\n                    title={\"Discussion\"}\n                    size={\"full\"}\n                  />\n\n                  {/* <MBox\n                        type={\"discussion-large\"}\n                        conversation={this.state.activeConversation}\n                        conversations={[this.state.activeConversation]}\n                        activeConversationIndex={0}\n                        conversationReady={this.state.conversationReady}\n                        // conversations={this.state.conversations}\n                        stream={this.state.activeStream}\n                        updateActiveConversation={this.updateActiveConversation}\n                      // load={this.props.load}\n                      /> */}\n                </div>\n              )}\n\n              {this.state.view.title === \"Overview\" && this.state.activeEvent && (\n                <>\n                  <div className=\"flex flex-column justify-start items-start bg-white h-1-00 w-100 pa5\">\n                    <div className=\"w-100 flex flex-row justify-between items-center pb4\">\n                      <span className=\"flex f2 fw1 black-50\">\n                        {moment(this.state.activeEvent.day).format(\"DD MMMM\")}\n                      </span>\n                      <span className=\"flex f3 fw6 black ml4\">\n                        {moment(this.state.activeEvent.day).format(\"YYYY\")}\n                      </span>\n                    </div>\n                    <h3 className=\"f3 fw6 black tc pv2 word-break-all\">\n                      {this.state.activeEvent.event.title}\n                    </h3>\n                  </div>\n                  <Schedule\n                    event={this.state.activeEvent}\n                    user={Fn.get(\"account\").user}\n                    toggleInnerDrawer={this.toggleInnerDrawer}\n                  />\n                </>\n              )}\n              {this.state.view.title === \"Files\" && this.state.activeEvent && (\n                <>\n                  <div className=\"flex flex-column justify-start items-start bg-white h-1-00 w-100 pa5\">\n                    <Files type={\"calendar\"} event={this.state.activeEvent} />\n                  </div>\n                </>\n              )}\n            </div>\n          )}\n\n          <Drawer\n            // title=\"Basic Drawer\"/\n            placement=\"right\"\n            closable={true}\n            onClose={this.toggleInnerDrawer}\n            visible={this.state.innerDrawerOpen}\n            width={ui.mobile() ? \"100vw\" : \"50vw\"}\n            height={\"100vh\"}\n          >\n            {this.state.innerDrawerOpen && (\n              <div className=\"pointer flex flex-column justify-start items-start bg-black-05 h--100\">\n                <div\n                  // ref={this.scheduleForm}\n                  // onSubmit={this.insertScheduleItem}\n                  className=\"flex flex-column w-100\"\n                >\n                  <div className=\"f4 fw6 black-90 ph4 pt4 w-100 pb4\">\n                    Add Schedule Item\n                  </div>\n\n                  <div className=\"flex flex-column overflow-hidden w-100 ph4 pb3 pt3\">\n                    <div className=\"form-row flex flex-row items-center mb4\">\n                      <label className=\"f4 fw5 black-50 pb2- w-30 pr3\">\n                        Title\n                      </label>\n                      <input\n                        ref={this.scheduleTitle}\n                        type=\"text\"\n                        required={true}\n                        className=\"flex flex-column ph4 pv3 bn br1- round bg-white black-50 f4 fw5 bs-a- w-100\"\n                      />\n                    </div>\n                    <div className=\"form-row flex flex-row items-center mb4\">\n                      <label className=\"f4 fw5 black-50 pb2- w-30 pr3\">\n                        Description\n                      </label>\n                      <input\n                        ref={this.scheduleDescription}\n                        type=\"text\"\n                        required={true}\n                        className=\"flex flex-column ph4 pv3 bn br1- round bg-white black-50 f4 fw5 bs-a- w-100\"\n                      />\n                    </div>\n                    <div className=\"form-row flex flex-row items-center mb4\">\n                      <label className=\"f4 fw5 black-50 pb2- w-30 pr3\">\n                        Location\n                      </label>\n                      <input\n                        ref={this.scheduleLocation}\n                        type=\"text\"\n                        required={true}\n                        className=\"flex flex-column ph4 pv3 bn br1- round bg-white black-50 f4 fw5 bs-a- w-100\"\n                      />\n                    </div>\n\n                    <div className=\"flex flex-row overflow-hidden w-100 ml6 pl3\">\n                      <div className=\"flex flex-column overflow-hidden w-100 pa3\">\n                        <label className=\"f4 fw5 black-50 pb2- w-30 pr3\">\n                          Start\n                        </label>\n                        <TimePicker\n                          // defaultValue={moment(new Date().setHours('09'))}\n                          className=\"-bp3-dark\"\n                          onChange={e =>\n                            this.timeOnChange({ e, type: \"start\" })\n                          }\n                          selectAllOnFocus={false}\n                          showArrowButtons={true}\n                          useAmPm={true}\n                          required={true}\n                        />\n                      </div>\n                      <div className=\"flex flex-column w-100 pa3\">\n                        <label className=\"f4 fw5 black-50 pb2- w-30 pr3\">\n                          End\n                        </label>\n                        <TimePicker\n                          // defaultValue={moment(new Date().setHours('10'))}\n                          className=\"bp3-dark-\"\n                          onChange={e => this.timeOnChange({ e, type: \"end\" })}\n                          selectAllOnFocus={false}\n                          showArrowButtons={true}\n                          useAmPm={true}\n                          required={true}\n                        />\n                      </div>\n                    </div>\n\n                    <div className=\"form-column flex flex-row items-start w-100 mb4 pt4\">\n                      <label className=\"f4 fw5 black-50 pb2- w-30 pr3\">\n                        People <button onClick={ () => this.setState({ innerDrawerOpen2: true }) } className=\"flex pv2 ph4 f5 fw5 black\"  />\n                      </label>\n                      <div\n                        style={{ maxHeight: \"300px\" }}\n                        className=\"overflow-auto flex flex-column items-start w-100 mb4-\"\n                      >\n                        {this.state.connections.map((item, index) => (\n                          //  console.log('user',item),\n                          <div\n                            // onClick={\n                            //   this.state.dialogType === \"single\" &&\n                            //   this.newConversation(item)\n                            // }\n                            className=\"flex flex-row justify-between w-100\"\n                          >\n                            <div\n                              // to={\"/user/\" + item.id}\n                              className={\n                                \"    pointer flex flex-row-ns flex-row items-center justify-start  w-100-s bn-ns bb b--black-05 pb4\"\n                              }\n                            >\n                              <div\n                                style={{\n                                  width: \"40px\",\n                                  height: \"40px\",\n                                  borderRadius: \"100px\",\n                                  backgroundImage:\n                                    \"url(\" + item.profile.picture + \")\"\n                                }}\n                                className=\"cover bg-center\"\n                              />\n                              <div\n                                className={\n                                  \"    flex flex-row -flex-column pt2-ns- pl3 f5 fw6 black  \"\n                                }\n                              >\n                                <div className={\" flex  \"}>\n                                  {item.profile.name.first}\n                                </div>\n                                <div className={\" flex ml1\"}>\n                                  {item.profile.name.last}\n                                </div>\n                              </div>\n                            </div>\n                            <div\n                              className={\n                                \"  checkbox-square  flex flex-row -flex-column pt2-ns pl3 f5 fw6 black ph4  \"\n                              }\n                            >\n                              <Checkbox\n                                type={\"checkbox\"}\n                                onChange={() =>\n                                  this.addUserToEvent({ user: item, index })\n                                }\n                                checked={this.state.checked[index]}\n                              />\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"Buttons flex flex-row justify-between center w-100\">\n                    <div className=\"flex flex-column w-100 pa4 bg-white\">\n                      <button\n                        // type='submit'\n                        onClick={this.insertScheduleItem2}\n                        className=\"br1- round bs-b bg-black-20 ph3 pv2 pointer bn relative  \"\n                      >\n                        {this.state.buttonLoading && (\n                          <div className=\"flex flex-column pv3 items-center\">\n                            <div className=\"sp sp-3balls\"></div>\n                          </div>\n                        )}\n                        {!this.state.buttonLoading && (\n                          <span className=\"f4 fw6 white pv2 flex items-center justify-center\">\n                            Save\n                          </span>\n                        )}\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            )}\n          </Drawer>\n        </Drawer>\n\n        <Dialog\n          className={\"bp3-light\"}\n          icon=\"info-sign\"\n          onClose={this.toggleDialog}\n          title={\"Add Event\"}\n          {...this.state}\n        >\n          <AddEvent\n            addEvent={this.addEvent}\n            setLocation={this.setLocation}\n            eventData={this.state.newEvent}\n            // user={this.context.account.user}\n          />\n        </Dialog>\n      </>\n    );\n  }\n}\n\nexport default Calendar_;\nCalendar_.contextType = AccountContext;\n","// @flow\nimport React from \"react\";\nimport SectionTitle from \"../SectionTitle/SectionTitle.jsx\";\nimport { Popover, Empty, Skeleton, Rate, Tooltip } from \"antd\";\nimport { Icon } from \"@blueprintjs/core\";\n\nimport { Link } from \"react-router-dom\";\n// import PropTypes from 'prop-types';\nvar GeoPattern = require(\"geopattern\");\nwindow.GeoPattern = GeoPattern;\nconst Network = props => (\n  <section id=\"Network\" className=\"flex mt4 w-100\">\n    <div className=\"flex flex-column mb2 pa0 br1 bg--white w-100\">\n      {/* <div className=\"flex flex-row bb b--black-10 justify-between\">\n      <div className=\"flex flex-auto w--100 flex-row pb0\">\n        <p className=\"flex f4 fw6 black-60 mb0 ph3 pv2 items-center justify-center\">\n          Network\n        </p>\n        <p className=\"flex f6 fw4 black-60 mb0 ph3 pv2- items-center justify-center bl b--black-10\">\n          {this.state.user.profile.connections.length}{\" \"}\n          connections\n        </p>\n        <p className=\"flex f6 fw4 black-60 mb0 ph3 pv2- items-center justify-center bl b--black-10\">\n          0 pending\n        </p>\n      </div>\n      <div className=\"flex flex-auto- flex-row pb0\">\n        <div\n          // onClick={this.networkSeeAll}\n          id=\"NetworkSeeAll-button\"\n          className=\"flex flex-column pointer h-100 bl b--black-10\"\n        >\n          <div\n            id=\"\"\n            className=\"flex flex-row ph0 pv0 items-center justify-center bg-white h-100\"\n          >\n            <span className=\"f6 fw4 black-60 ph3\">See All</span>\n\n            <div\n              style={{ backgroundColor: \"#b3bf95\" }}\n              className=\"flex flex-column items-center justify-center ph3 pv2 white h-100\"\n            >\n              <Icon icon={\"ring\"} iconSize={15} />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div> */}\n      <SectionTitle\n        title={\"Network\"}\n        functionButton={{\n          title: \"View All\",\n          icon: \"ring\",\n          function: () => props.addToNetwork()\n        }}\n        labels={[\n          {\n            text: \"connections\",\n            count: props.connections.length\n          },\n          {\n            text: \"pending\",\n            count: props.user.networkPending || 0\n          }\n        ]}\n      />\n\n      <div className=\"flex flex-row w-100\">\n        <div className=\"flex flex-auto flex-column pb0 \">\n          <div className=\"flex flex-row flex-wrap f4 fw4 black-60 mb0 pt3 pb3\">\n            {props.connections.map((item, index) => (\n              // console.log('[[ Connection item ]]', item),\n              <Popover\n                content={\n                  <div className=\"flex flex-column\">\n                    <div\n                      onClick={() => props.navigateToUser({ id: item.id })}\n                      className=\"pointer flex f6 fw5 black-60 ph3 pv2 hover-black bb b--black-05\"\n                    >\n                      View Profile\n                    </div>\n\n                    <div\n                      onClick={() => props.addToNetwork(item)}\n                      className=\"pointer flex f6 fw5 black-60 ph3 pv2 hover-black bb b--black-05\"\n                    >\n                      Add to network\n                    </div>\n\n                    <div\n                      onClick={() => props.sendMessage(item)}\n                      className=\"pointer flex f6 fw5 black-60 ph3 pv2 hover-black\"\n                    >\n                      Send Message\n                    </div>\n                  </div>\n                }\n                trigger=\"hover\"\n              >\n                \n                <div\n                  // to={\"/user/\" + item.id}\n                  onClick={ () => { props.isCurrentUser ? props.history.push(\n                      \"/user/\" + item.id\n                    ) : props.navigateToUser({ id: item.id }) }}\n                  className={\n                    \"  pointer flex flex-column-ns flex-row pa3-ns pa4 items-center justify-start  w-100-s bn-ns bb b--black-05\"\n                  }\n                >\n                  <div\n                    style={{\n                      width: \"80px\",\n                      height: \"80px\",\n                      borderRadius: \"100px\",\n                      backgroundImage:\n                                                      item.profile.picture.length  \n                                                      ? \"url(\" + item.profile.picture + \")\"\n                                                      : GeoPattern.generate(item.profile.name.first + item.profile.name.last).toDataUrl()\n                    }}\n                    className=\"cover bg-center\"\n                  />\n                  <div\n                    className={\n                      \"    flex flex-row -flex-column pt2-ns pl3 f5 fw6 black  \"\n                    }\n                  >\n                    <div className={\" flex  \"}>{item.profile.name.first}</div>\n                    <div className={\" flex ml1\"}>{item.profile.name.last}</div>\n                  </div>\n                </div>\n              </Popover>\n            ))}\n\n{ \n                  props.connections.length === 0 && (\n                    <div className=\"flex flex-column w-100 pv3 items-center justify-center ba- -b--black-05 br2\">\n\n                      <div className=\"raleway flex w-100 pv3- f5 fw6 black-30 tc justify-center\">You do not have any network connections yet.</div>\n\n                    </div>\n                  )}\n\n          </div>\n        </div>\n      </div>\n    </div>\n  </section>\n);\n\nexport default Network;\n","import Bio_ from './Bio/Bio.jsx';\nimport SectionTitle_ from './SectionTitle';\n// import ProfileButtons_ from './ProfileButtons';\nimport Network_ from './Network/Network.jsx';\n\nexport const Bio = Bio_\nexport const SectionTitle = SectionTitle_\nexport const ProfileButtons = {}\n// ProfileButtons_\nexport const Network = Network_\n\nexport default { Bio, SectionTitle, ProfileButtons, Network }","import React from \"react\";\n// import React, { getGlobal, setGlobal, useGlobal } from \"reactn\";\nimport { Redirect, Link } from \"react-router-dom\";\nimport moment, { fn } from \"moment\";\nimport { Popover, Empty, Skeleton, Rate, Tooltip } from \"antd\";\n\nimport TransitionLayout from \"../../Layouts/Transition\";\n// import ListChefs from \"../../elements/display/chefs/list\";\nimport PageTitle from \"../../elements/layout/PageTitle_B\";\n// import ChefInfo from \"../../elements/display/drawers/ProjectInfo\";\nimport LocationSearchFormWrapper from \"../../elements/display/forms/LocationSearchFormWrapper\";\nimport OnboardingScreen from \"../../elements/display/onboarding/OnboardingScreen\";\nimport LocationSearchBar from \"../../elements/display/forms/LocationSearchBar\";\nimport { Icon, Spinner, Dialog, NumericInput } from \"@blueprintjs/core\";\n\nimport Filepond from \"../../elements/upload/Filepond.js\";\n\nimport FormBio from \"../../a/FormBio/index.js\";\nimport FormProfile from \"../../a/FormProfile/index.js\";\nimport FormPortfolioProject from \"../../a/FormPortfolioProject/index.js\";\nimport FormSkills from \"../../a/FormSkills/index.js\";\n\nimport RecentWork from \"../../a/RecentWork/index.js\";\nimport RecentWorkArchive from \"../../a/RecentWorkArchive/index.js\";\nimport ProjectCalendar from \"../../a/ProjectCalendar/index.js\";\nimport ProjectCalendar2 from \"../../a/ProjectCalendar2/index.js\";\nimport Calendar from \"./Calendar/index.js\";\nimport SectionTitle from \"../../a/_Elements/SectionTitle/SectionTitle.jsx\";\n// import Fn from '../../../utils/fn/Fn';\nimport { Fn, app, api } from \"../../../utils/fn/Fn.js\";\nimport { Bio, Network } from \"../../a/_Elements\";\n\nimport AccountContext, {\n  AccountConsumer\n} from \"../../../utils/context/AccountContext\";\nimport \"./style.css\";\n\nvar GeoPattern = require(\"geopattern\");\nwindow.GeoPattern = GeoPattern;\n// import { dilate } from \"popmotion/lib/calc\";\n// window.getGlobal = getGlobal;\n// window.useGlobal = useGlobal;\n// window.setGlobal = setGlobal;\n\nclass OwnProfile extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpen: false,\n      dialogType: \"\",\n      dialogTitle: \"\",\n      // chefs: [],\n      // activeChef: getGlobal().activeChef,\n      ready: false,\n      insertModalVisible: false,\n      chefInfoVisible: false,\n      loading: false,\n      // theme: Fn.get('theme').config.theme,\n      toMessages: false,\n      conversationReady: false,\n      activeTab: \"1\",\n      drawerReady: false,\n      // locationIsSet: getGlobal().locationIsSet,\n      progressBarPercent: 0,\n      progressBarActive: false,\n      showLocationForm: false,\n      showOnboardingScreen: false,\n      // location: getGlobal().location,\n      // activeCurrency: getGlobal().activeCurrency,\n      account: null,\n      searchCity: \"\",\n      uploadType: \"profileImage\",\n      connections: [],\n      connectionsReady: false,\n      AddToNetworkButtonLoading: false,\n      AddToProjectButtonLoading: false,\n      recentWorkProjects: [],\n      subscribedProjectsReady: false,\n      user: null\n    };\n\n    // this.fetchChefs = this.fetchChefs.bind(this);\n    // this.fetchChefs2 = this.fetchChefs2.bind(this);\n    this.showDrawer = this.showDrawer.bind(this);\n    this.hideDrawer = this.hideDrawer.bind(this);\n    this.refresh = this.refresh.bind(this);\n    // this.updateActiveDoc = this.updateActiveDoc.bind(this);\n    this.setLocation = this.setLocation.bind(this);\n    this.start = this.start.bind(this);\n    this.focusLocationSearch = this.focusLocationSearch.bind(this);\n\n    this.reserve = this.reserve.bind(this);\n    this.sendMessage = this.sendMessage.bind(this);\n    // this.submitReservationRequest = this.submitReservationRequest.bind(this);\n    // this.setFilter = this.setFilter.bind(this)\n    this.toggleDialog = this.toggleDialog.bind(this);\n\n    this.addToNetwork = this.addToNetwork.bind(this);\n    this.addToProject = this.addToProject.bind(this);\n    this.cv = this.cv.bind(this);\n    this.networkSeeAll = this.networkSeeAll.bind(this);\n    this.editBio = this.editBio.bind(this);\n    this.submitBio = this.submitBio.bind(this);\n    this.submitProfile = this.submitProfile.bind(this);\n    this.editSkills = this.editSkills.bind(this);\n    this.updateSkills = this.updateSkills.bind(this);\n    this.editProfile = this.editProfile.bind(this);\n    this.closeDialog = this.closeDialog.bind(this);\n    this.avatar = this.avatar.bind(this);\n    this.fetchConnections = this.fetchConnections.bind(this);\n    // this.sendMessage = this.sendMessage.bind(this);\n    this.userLocation = this.userLocation.bind(this);\n    this.addRecentWorkProject = this.addRecentWorkProject.bind(this);\n    this.navigateToUser = this.navigateToUser.bind(this);\n\n    console.log(\"[[ OwnProfile props ]]\", props);\n  }\n  navigateToUser(config) {\n    const { id } = config;\n\n    this.setState({\n      ready: false,\n      userId: null,\n      user: null,\n      connections: [],\n      projects: [],\n      events: [],\n      subscribedProjectsReady: false\n    });\n\n    setTimeout(() => {\n      this.props.history.push(\"/null\");\n      this.props.history.push(\"/user/\" + id);\n    }, 300);\n  }\n  addRecentWorkProject() {\n    this.toggleDialog({ type: \"addPortfolioProject\", title: \"Add a Project\" });\n  }\n  userLocation() {\n    let user = this.context.account.user;\n    let location;\n    if (\n      user.profile.location &&\n      typeof user.profile.location.County !== \"undefined\"\n    ) {\n      location = user.profile.location.County;\n    } else if (\n      user.profile.location &&\n      typeof user.profile.location.address.county !== \"undefined\"\n    ) {\n      location = user.profile.location.address.county;\n    } else {\n      location = \"\";\n    }\n    return location;\n    // props.account.user.profile.location && props.account.user.profile.location.address.county || \"\"\n  }\n  // async sendMessage(item) {\n\n  //   console.log('[[ SendMessage ]]', item)\n\n  //   let selfUserId = this.context.account.user.id;\n\n  //   // let recipientId =\n  //   // const conversationExists = await Fn.checkConversationExists({ self: this,  })\n  //   // await Fn.\n  // }\n  async fetchConnections() {\n    let connections = this.context.account.user.profile.connections;\n    await Fn.fetchConnections({ self: this, connections });\n  }\n  async submitBio(data) {\n    // this.props.submitBio\n    console.log(data);\n    await Fn.submitBio({ self: this, data: data });\n  }\n  async updateSkills(skills) {\n    await Fn.updateSkills({ self: this, skills });\n  }\n  async submitProfile(data) {\n    // this.props.submitBio\n    console.log(data);\n    await Fn.submitProfile({ self: this, data: data });\n  }\n\n  toggleDialog(config) {\n    const { type, title } = config;\n\n    this.setState({\n      isOpen: !this.state.isOpen,\n      dialogType: type,\n      dialogTitle: title\n    });\n\n    // if(type === \"profileImage\"){\n    //   this.setState({\n    //     uploadType: 'profileImage'\n    //   })\n    // }\n  }\n  closeDialog() {\n    this.setState({\n      isOpen: false\n    });\n  }\n  editBio() {\n    this.toggleDialog({ type: \"bio\", title: \"Edit your bio\" });\n  }\n  editSkills() {\n    this.toggleDialog({ type: \"editSkills\", title: \"Edit your skills\" });\n  }\n  editProfile() {\n    this.toggleDialog({ type: \"profile\", title: \"Edit your profile\" });\n  }\n  networkSeeAll() {\n    this.toggleDialog({ type: \"bio\", title: \"Edit your bio\" });\n  }\n\n  async addToNetwork() {\n    // alert()\n    // this.toggleDialog({type: 'addToNetwork', title: 'Edit your bio'})\n    this.setState({\n      AddToNetworkButtonLoading: true\n    });\n\n    let item = this.state.user;\n\n    await Fn.addToNetwork({ self: this, item: item });\n  }\n\n  addToProject() {\n    // this.toggleDialog({type: 'addToProject', title: 'Edit your bio'})\n  }\n  cv() {\n    this.toggleDialog({ type: \"cv\", title: \"Upload your CV\" });\n  }\n  focusLocationSearch() {}\n  reserve(doc) {\n    console.log(doc);\n    this.setState({ activeDoc: doc });\n    // setGlobal({ reserve: true, recipient: doc });\n  }\n  async sendMessage(data) {\n\n    console.log(\"doc\", data);\n\n    let selfUserId = this.context.account.user.id;\n\n    let recipientId = data.id;\n\n    // let participants = [selfUserId, recipientId];\n\n    await app.checkConversationExists({\n      self: this,\n      selfUserId,\n      recipientId: data.id\n    }).then( async response => {\n      console.log('checkConversationExists response', response)\n\n      if(!response.exists) {\n\n        await app.createNewConversation({ self: this, selfUserId, recipientId }).then( async conversation => {\n\n          console.log('newly created conversation ', conversation)\n          Fn.set('activeConversation', conversation)\n          this.props.history.push(\"/messages\")\n          \n        })\n\n      }\n      else {\n\n        Fn.set(\"activeConversation\", response.conversation)\n\n        this.props.history.push(\"/messages\")\n\n      }\n      \n    })\n\n    // if (!conversationExists.exists) {\n    //   // console.log('participants',participants)\n\n    //   await Fn.createNewConversation({ self: this, selfUserId, recipientId });\n    //   this.props.history.push(\"/messages\");\n    // } else {\n    //   // Fn.getConversationData({})\n    //   Fn.store({\n    //     label: \"activeConversation\",\n    //     value: conversationExists.conversation\n    //   });\n    //   this.props.history.push(\"/messages\");\n    // }\n\n    // return await Fn.sendMessage({ doc, self: this })\n  }\n\n  async refresh() {\n    return await Fn.refresh({ self: this });\n  }\n  async showDrawer(chef) {\n    return await Fn.showDrawer({ chef, self: this });\n  }\n  async hideDrawer() {\n    return await Fn.hideDrawer({ self: this });\n  }\n  showModal = () => {\n    this.setState({\n      insertModalVisible: true\n    });\n  };\n  handleOk = e => {\n    console.log(e);\n    this.setState({\n      insertModalVisible: false\n    });\n  };\n  handleCancel = e => {\n    console.log(e);\n    this.setState({\n      insertModalVisible: false\n    });\n  };\n  async submitReservationRequest(data) {\n    return await Fn.submitReservationRequest({ data, self: this });\n  }\n  async setLocation() {\n    return await Fn.setLocation({ self: this });\n  }\n\n  async start() {\n    // find location by browser geolocation,\n    // then query Here maps api for location data using reverse geolocation.\n    return await Fn.setLocation({ self: this });\n  }\n  avatar(data) {\n    console.log(\"avatar \", data);\n    const user = data.user;\n\n    if (user && user.profile && user.profile.picture.length > 0) {\n      return user.profile.picture;\n    } else {\n      return \"/img/placeholder.png\";\n    }\n  }\n  componentWillUnmount() {}\n  componentDidUpdate() {\n    console.log(\"[[ Home Updated ]]\", this.props);\n  }\n  componentWillMount() {\n    app.checkAuth(this).then(async result => {\n      console.log('Check Authorization Status', result)\n      if(result === false) {\n        return\n      }\n    })\n\n  }\n  async componentDidMount() {\n\n    this.context.setPage({ title: \"Profile\", subtitle: \"...\"})\n\n    // console.log()\n    // app.checkAuth(this).then(async result => {\n    //   console.log('Check Authorization Status', result)\n    //   if(result === false) {\n    //     return\n    //   }\n     \n    // });\n    if(this.context.account && this.context.account.user) {\n      const user = this.context.account.user;\n      if (\n        this.context.account &&\n        this.context.account.user &&\n        this.context.account.user.profile &&\n        this.context.account.user.profile.name.first.length === 0\n      ) {\n        this.editProfile();\n      }\n\n      // let user = this.context.account && this.context.account.user || {};\n    let userId = user && user.id;\n\n    this.setState({\n      user: user\n    });\n\n    // console.log(\" \");\n    // console.log(\" \");\n    // console.log(\"[[ ViewProfile.js Mounted ]]\");\n    // console.log(\" \");\n    // console.log(\" \");\n\n    // console.log(\"viewprofile props\", this.props);\n    // let userId = this.props.match.params.id;\n\n    let projects = await app\n      .fetchSubscribedProjects({ self: this, userId })\n      .then(async projects => {\n        this.setState({\n          projects: projects,\n          subscribedProjectsReady: true,\n          ready: true\n        });\n      });\n\n    await Fn.fetchConnections({\n      self: this,\n      connections: user.profile.connections\n    }).then(connections => {\n      this.setState({\n        connectionsReady: true\n      });\n      Fn.set('connections', connections)\n    });\n\n    }\n   \n\n    \n    // Fn\n    // Fn.set(\"activeUser\", user);\n\n    // console.log(\"user\", user);\n\n    // this.setState({\n    //   user: user,\n    //   ready: true\n    // });\n\n    document.querySelector(\"body\").scroll({\n      top: 0,\n      left: 0,\n      behavior: \"smooth\"\n    });\n\n    // Fn.fetchSubscribedProjects({ self: this, userId });\n\n    // this.fetchConnections();\n\n    // if (localStorage.getItem(\"crewBuilder\") !== null) {\n\n    //   if (!Fn.get(\"crewBuilder\").hasBeenUploaded) {\n    //     let project = Fn.get(\"crewBuilder\");\n    //     await Fn.createProject({ self: this, project });\n    //   }\n\n    // }\n\n    // document.querySelector(\"body\").scroll({\n    //   top: 0,\n    //   left: 0,\n    //   behavior: \"smooth\"\n    // });\n\n    // if(localStorage.getItem('accountType') !== null && JSON.parse(localStorage.getItem('accountType')) === \"production\") {\n    //   if(!Fn.get('crewBuilder').hasBeenUploaded) {\n    //     let project = Fn.get('crewBuilder');\n    //     await Fn.createProject({ self: this, project })\n    //   }\n    // }\n    \n  }\n  render() {\n    return (\n      <AccountConsumer>\n        {props => (\n          // console.log(\"[[ OwnProfile <AccountContext.Consumer> ]]\", props),\n          (\n            this.state.ready && \n            <TransitionLayout>\n              {/* {console.log('[[[[[ user', user),\n                user\n                && user.extended\n                && user.extended.config\n                && user.extended.config.onboardingcomplete === false\n                && <OnboardingScreen location={this.state.location} />\n              } */}\n              <section\n                id=\"Home\"\n                className={\" w-100 mw8 center pa4-ns pa0 pb6 \"}\n              >\n                <div\n                  onClick={this.refresh}\n                  className=\"absolute top-0 right-0 pa4 pointer black-30\"\n                >\n                  <Icon\n                    type=\"sync\"\n                    className={\n                      (this.state.ready ? \" inactive \" : \" active \") +\n                      \" loading-icon \"\n                    }\n                  />\n                </div>\n\n                <section\n                  id=\"Profile\"\n                  className=\"flex flex-column w-100 pb3 pt3\"\n                >\n                  <div className=\"flex flex-row-ns flex-column w-100 justify-center items-center\">\n                    <div className=\"flex flex-column w-100=\">\n                      <Tooltip placement=\"top\" title={\"Update your avatar\"}>\n                        <div className=\"round pa1 bg-white\">\n                          <div\n                            onClick={() =>\n                              this.toggleDialog({\n                                type: \"profileImage\",\n                                title: \"Image Upload\"\n                              })\n                            }\n                            style={{\n                              width: \"150px\",\n                              height: \"150px\",\n                              backgroundImage: props.account.user.profile\n                                .picture.length\n                                ? \"url(\" +\n                                  props.account.user.profile.picture +\n                                  \")\"\n                                : GeoPattern.generate(\n                                    props.account.user.profile.name.first +\n                                      props.account.user.profile.name.last\n                                  ).toDataUrl()\n                            }}\n                            className=\"pointer round  cover bg-center\"\n                          ></div>\n                        </div>\n                      </Tooltip>\n                    </div>\n\n                    <div className=\"flex flex-column justify-center w-100 ph4-ns ph0\">\n                      <div className=\"f4 flex flex-row-ns flex-column items-center-ns items-center w-100 raleway\">\n                        <span className=\"f3 fw6 mv0-ns mv4\">\n                          {props.account.user.profile.name &&\n                            props.account.user.profile.name.first}{\" \"}\n                          {props.account.user.profile.name &&\n                            props.account.user.profile.name.last}\n                        </span>\n                        <span className=\"flex items-start f6 fw6 ml3-ns whi-te ph3 pv2 ba b--black-05 br1 bg-white black -ts-a\">\n                          {props.account.user.position}{\" \"}\n                        </span>\n                        <Icon\n                          onClick={this.editProfile}\n                          icon={\"edit\"}\n                          iconSize={12}\n                          className=\"pointer black-30 ml2\"\n                        />\n                      </div>\n\n                      <div className=\"flex flex-row -nsflex-column w--100 black-60 raleway flex-wrap items-center justify-start-ns justify-between ph4 ph0-ns pt3 pb3 bt b--black-05 mt4 mt3-ns\">\n                        <div className=\"flex flex-column w--100 pb1-ns pb2 mr3\">\n                          <span className=\"flex-column flex f6 fw4 black-40 items-start\">\n                            <span className=\"flex mb3\">Age</span>\n                            <span className=\"flex items-center justify-center f6 fw6 -ml3-ns black-50- white ph2 pv1 ba b--black-05 br1 -round bw1- bg-white-20- bg-black -ts-a tc ml2-\">\n                              {moment().diff(\n                                props.account.user.profile.dob,\n                                \"years\"\n                              )}\n                            </span>\n                          </span>\n                        </div>\n                        <div className=\"flex flex-column w--100 pb1-ns pb2 mr3\">\n                          <span className=\"flex-column flex f6 fw4 black-40 items-start\">\n                            <span\n                              className=\"flex \n mb3\"\n                            >\n                              Gender\n                            </span>\n                            <span className=\"ttc flex items-center justify-center f6 fw6 -ml3-ns black-50- white ph2 pv1 ba b--black-05 br1 -round bw1- bg-white-20- bg-black -ts-a tc ml2-\">\n                              {(props.account.user.profile.gender &&\n                                props.account.user.profile.gender) ||\n                                \"\"}\n                            </span>\n                          </span>\n                        </div>\n                        <div className=\"flex flex-column w--100 pb1-ns pb2 mr3\">\n                          <span className=\"flex-column flex f6 fw4 black-40 items-start\">\n                            <span\n                              className=\"flex \n mb3\"\n                            >\n                              Location\n                            </span>\n                            <span className=\"flex items-center justify-center f6 fw6 -ml3-ns black-50- white ph2 pv1 ba b--black-05 br1 -round bw1- bg-white-20- bg-black -ts-a tc ml2-\">\n                              {this.userLocation()}\n                            </span>\n                          </span>\n                        </div>\n                      </div>\n\n                      {/* <div className=\"flex flex-row -nsflex-column w--100 pt3 black-60 raleway flex-wrap items-center justify-start-ns justify-center\">\n                        <div className=\"flex flex-column w--100 pb1-ns pb2 mr3\">\n                          <span className=\"flex f6 fw4 black-40 items-center\">\n                            <span className=\"flex \">Age</span>\n\n                            <span className=\"fw6 ml2 pv1 ph2 ba b--black-05 br1\">\n                              {moment().diff(\n                                props.account.user.profile.dob,\n                                \"years\"\n                              )}\n                            </span>\n                          </span>\n                        </div>\n\n                        <div className=\"flex flex-column w--100 pb1-ns pb2 mr3\">\n                          <span className=\"flex f6 fw4 black-40 items-center\">\n                            <span className=\"flex \">Gender</span>\n                            <span className=\"fw6 ml2 pv1 ph2 ba b--black-05 br1\">\n                              {(props.account.user.profile.gender &&\n                                props.account.user.profile.gender) ||\n                                \"\"}\n                            </span>\n                          </span>\n                        </div>\n\n                        <div className=\"flex flex-column w--100 pb1-ns pb2 mr3\">\n                          <span className=\"flex f6 fw4 black-40 items-center\">\n                            <span className=\"flex\">Location</span>\n                            <span className=\"fw6 ml2 pv1 ph2 ba b--black-05 br1\">\n                              {this.userLocation()}\n                            </span>\n                          </span>\n                        </div>\n                      </div> */}\n                    </div>\n                  </div>\n                </section>\n\n                {Fn.get(\"isMobile\") && (\n                  <section id=\"ProfileButtons\">\n                    <div className=\"flex flex-row mb2-ns w-100 bt b--black-05 ph4 pv4 bg-black-05\">\n                      <button\n                        title=\"View or upload CV\"\n                        id=\"CV-button\"\n                        className=\"db relative w-100 pa3 ph4 pv3 br1 bg-black- bg-green round\"\n                      >\n                        <div id=\"\" className=\"db relative w-100\">\n                          <span className=\"f5 fw6 black-60- white ph3-\">\n                            Cirriculum Vitae{\" \"}\n                          </span>\n                        </div>\n                      </button>\n                    </div>\n                    <div className=\"flex flex-row mb2-ns w-100 bt b--black-05 \">\n                      <button\n                        title=\"View or upload CV\"\n                        id=\"CV-button\"\n                        className=\"db relative w-100 pa3 ph4 pv3 br1- bg-black-30- bg-green-\"\n                        style={{ background: \"#e8e8ec\" }}\n                      >\n                        <div id=\"\" className=\"db relative w-100\">\n                          <span className=\"f6 fw6 black-50 -white ph3-\">\n                            Add to Network\n                          </span>\n                        </div>\n                      </button>\n                      <button\n                        title=\"View or upload CV\"\n                        id=\"CV-button\"\n                        className=\"db relative w-100 pa3 ph4 pv3 br1- bg-black-30- bg-gree-n bl b--white-20 bw1\"\n                        style={{ background: \"#e8e8ec\" }}\n                      >\n                        <div id=\"\" className=\"db relative w-100\">\n                          <span className=\"f6 fw6 black-50 -white ph3-\">\n                            Send Message\n                          </span>\n                        </div>\n                      </button>\n                    </div>\n                  </section>\n                )}\n\n                {!Fn.get(\"isMobile\") && (\n                  <section id=\"ProfileButtons\">\n                    <div className=\"flex flex-row mb0-ns w-100 bt b--black-05 ph4 ph0-ns pv3\">\n                      <button\n                        title={\"View or upload CV\"}\n                        onClick={this.cv}\n                        id=\"CV-button\"\n                        className=\"flex flex-column pa0 mr3 pointer bs-b bg-black-20\"\n                      >\n                        <div\n                          id=\"\"\n                          className=\"flex flex-row ph0 pv0 items-center justify-center bg-white br1\"\n                        >\n                          <span className=\"f6 fw4 black-60 ph3\">\n                            Cirriculum Vitae\n                          </span>\n\n                          <div\n                            // style={{ backgroundColor: '#b3bf95' }}\n                            className=\"flex flex-column ph3 pv2 white bg-green\"\n                          >\n                            <Icon\n                              icon={\"document-open\"}\n                              iconSize={15}\n                              className=\"\"\n                            />\n                          </div>\n                        </div>\n                      </button>\n\n                      {/* <div\n                        onClick={this.addToNetwork}\n                        id=\"AddToNetwork-button\"\n                        className=\"flex flex-column pr3 pointer\">\n\n                        <div id=\"\" className=\"flex flex-row ph0 pv0 items-center justify-center bg-white br1\">\n\n                          <span className=\"f6 fw4 black-60 ph3\">Add To Network</span>\n\n                          <div\n                            style={{ backgroundColor: '#b3bf95' }}\n                            className=\"flex flex-column ph3 pv2 white\">\n                            \n                            {\n                              this.state.AddToNetworkButtonLoading ? \n                              <Spinner size={15} /> : \n                              <Icon icon={'exchange'} iconSize={15} className=\"\"/>\n                            }\n                          </div>\n\n                        </div>\n\n                      </div> */}\n\n                      {/* <div\n                        onClick={this.addToProject}\n                        id=\"AddToProject-button\"\n                        className=\"flex flex-column pr3 pointer\">\n\n                        <div id=\"\" className=\"flex flex-row ph0 pv0 items-center justify-center bg-white br1\">\n\n                          <span className=\"f6 fw4 black-60 ph3\">Add To Project</span>\n\n                          <div\n                            style={{ backgroundColor: '#b3bf95' }}\n                            className=\"flex flex-column ph3 pv2 white\">\n                           {\n                              this.state.AddToProjectButtonLoading ? \n                              <Spinner size={15} /> : \n                              <Icon icon={'new-link'} iconSize={15} className=\"\"/>\n                            }\n                          </div>\n\n                        </div>\n\n                      </div> */}\n                    </div>\n                  </section>\n                )}\n\n                <section id=\"Bio\" className=\"mt0-ns\">\n                  <div className=\"flex flex-column mb2 pa4 br1 bg-white\">\n                    <div className=\"flex flex-row\">\n                      <div className=\"flex flex-auto flex-row pb0\">\n                        <p className=\"f4 fw4 black-60 mb0 flex flex-row flex-auto\">\n                          {props.account.user.profile.bio.length === 0 && (\n                            <div\n                              onClick={this.createBio}\n                              className=\"pointer flex ph3 pv2 f5 fw5 black-60 ba b--black-10 br1\"\n                            >\n                              Enter your bio\n                            </div>\n                          )}{\" \"}\n                          {props.account.user.profile.bio}{\" \"}\n                          <Icon\n                            onClick={this.editBio}\n                            icon={\"edit\"}\n                            iconSize={12}\n                            className=\"pointer black-30 ml2\"\n                          />\n                        </p>\n                      </div>\n                    </div>\n                    <div className=\"flex flex-column pt4\">\n                      <div className=\" pt0\">\n                        <h3 className=\"f5 fw3 black-30 mb3 flex justify-start\">\n                          Skills\n                        </h3>\n                      </div>\n\n                      <div className=\"flex flex-auto flex-column pb0 \">\n                        <p className=\"flex flex-row flex-wrap f4 fw4 black-60 mb0\">\n                          {props.account.user.profile.additional.skills.map(\n                            (item, index) => (\n                              <span className=\"   pointer flex f5 fw6 black-60 ph3 pv2 round- br2 bs-b mr2-ns bn w-100-s- items-center tc justify-center mb3 mb0-ns bg-black-20 white ts-a- mr2 \">\n                                {item}\n                              </span>\n                            )\n                          )}{\" \"}\n                          {props.account.user.profile.additional.skills\n                            .length === 0 && (\n                            <div\n                              onClick={this.editSkills}\n                              className=\"pointer flex flex-row ph0 pb3 items-center justify-start\"\n                              id=\"\"\n                            >\n                              <span className=\"f6 fw5 black-50 pv2 ph3 ba b--black-05\">\n                                Add skills\n                              </span>\n                            </div>\n                          )}\n                          <Icon\n                            onClick={this.editSkills}\n                            icon={\"edit\"}\n                            iconSize={12}\n                            className=\"pointer black-30 ml2\"\n                          />\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                </section>\n\n                {/* <section id=\"Network\" className=\"mt3\">\n                  <div className=\"flex flex-column mb2 pa0 br1 bg-white\">\n                    <div className=\"flex flex-row bb b--black-10 justify-between\">\n                      <div className=\"flex flex-auto w--100 flex-row pb0\">\n                        <p className=\"flex f4 fw6 black-60 mb0 ph3 pv2 items-center justify-center\">\n                          Network\n                        </p>\n                        <p className=\"flex f6 fw4 black-60 mb0 ph3 pv2- items-center justify-center bl b--black-10\">\n                          {props.account.user.profile.connections.length}{\" \"}\n                          connections\n                        </p>\n                        <p className=\"dn flex f6 fw4 black-60 mb0 ph3 pv2- items-center justify-center bl b--black-10\">\n                          0 pending\n                        </p>\n                      </div>\n                      <div className=\"dn f-lex -flex-auto- f-lex-row pb0\">\n                        <div\n                          // onClick={this.networkSeeAll}\n                          id=\"NetworkSeeAll-button\"\n                          className=\"flex flex-column pointer h-100 bl b--black-10\"\n                        >\n                          <div\n                            id=\"\"\n                            className=\"flex flex-row ph0 pv0 items-center justify-center bg-white h-100\"\n                          >\n                            <span className=\"f6 fw4 black-60 ph3\">See All</span>\n\n                            <div\n                              style={{ backgroundColor: \"#b3bf95\" }}\n                              className=\"flex flex-column items-center justify-center ph3 pv2 white h-100\"\n                            >\n                              <Icon icon={\"ring\"} iconSize={15} />\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n\n                    <div className=\"flex flex-row \">\n                      <div className=\"flex flex-auto flex-column pb0 \">\n                        <div className=\"flex flex-row flex-wrap f4 fw4 black-60 mb0\">\n                          {this.state.connections.map((item, index) => (\n                            // console.log('[[ Connection item ]]', item),\n                            <Popover\n                              content={\n                                <div className=\"flex flex-column\">\n                                  <div\n                                    onClick={() => {\n                                      this.context.history.push(\n                                        \"/user/\" + item.id\n                                      );\n                                    }}\n                                    className=\"pointer flex f6 fw5 black-60 ph3 pv2 hover-black bb b--black-05\"\n                                  >\n                                    View Profile\n                                  </div>\n\n                                  <div\n                                    onClick={() => this.addToNetwork(item)}\n                                    className=\"pointer flex f6 fw5 black-60 ph3 pv2 hover-black bb b--black-05\"\n                                  >\n                                    Add to network\n                                  </div>\n\n                                  <div\n                                    onClick={() => this.sendMessage(item)}\n                                    className=\"pointer flex f6 fw5 black-60 ph3 pv2 hover-black\"\n                                  >\n                                    Send Message\n                                  </div>\n                                </div>\n                              }\n                              trigger=\"hover\"\n                            >\n                              <Link\n                                to={\"/user/\" + item.id}\n                                className={\n                                  \"  pointer flex flex-column-ns flex-row pa3-ns pa4 items-center justify-start  w-100-s bn-ns bb b--black-05\"\n                                }\n                              >\n                                <div\n                                  style={{\n                                    width: \"80px\",\n                                    height: \"80px\",\n                                    borderRadius: \"100px\",\n                                    backgroundImage:\n                                      \"url(\" + item.profile.picture + \")\"\n                                  }}\n                                  className=\"cover bg-center\"\n                                />\n                                <div\n                                  className={\n                                    \"    flex flex-row -flex-column pt2-ns pl3 f5 fw6 black  \"\n                                  }\n                                >\n                                  <div className={\" flex  \"}>\n                                    {item.profile.name.first}\n                                  </div>\n                                  <div className={\" flex ml1\"}>\n                                    {item.profile.name.last}\n                                  </div>\n                                </div>\n                              </Link>\n                            </Popover>\n                          ))}\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </section> */}\n\n                {this.state.ready && this.state.connectionsReady && (\n                  <>\n                    <Network\n                      history={this.context.history}\n                      canEdit={false}\n                      user={this.state.user}\n                      isCurrentUser={true}\n                      addToNetwork={this.addToNetwork}\n                      connections={this.state.connections}\n                      navigateToUser={this.navigateToUser}\n                      sendMessage={this.sendMessage}\n                    />\n                  </>\n                )}\n\n                <RecentWork\n                  type={\"user\"}\n                  user={this.state.user}\n                  // projects={this.state.user.profile.projects}\n                  // addRecentWorkProject={this.addRecentWorkProject}\n                />\n                <RecentWorkArchive\n                  projects={this.state.user.profile.projects}\n                  addRecentWorkProject={this.addRecentWorkProject}\n                />\n\n                {/* {\n                this.state.subscribedProjectsReady && \n                <ProjectCalendar\n                  projects={Fn.get('subscribedProjects')}\n                  ownEventss={Fn.get('account').user.profile.events}\n                />\n              } */}\n\n                {/* {this.state.subscribedProjectsReady && (\n            <div className=\"flex flex-column flex-auto w-100\">\n              <SectionTitle\n                title={\"Calendar\"}\n                // functionButton={{\n                //   title: \"Add Archive Item\",\n                //   icon: \"ring\",\n                //   function: () => this.props.addRecentWorkProject()\n                // }}\n                // labels={[\n                //   {\n                //     text: \"projects\",\n                //     count: this.props.projects.length\n                //   },\n                // ]}\n              />\n              <ProjectCalendar\n                // current={1}\n                user={this.state.user}\n                headerType={'square-slim'}\n                // projects={this.state.projects}\n                // ownEvents={this.state.user.profile.events}\n              />\n            </div>\n          )} */}\n\n                <Calendar profile={true} />\n\n                <Dialog\n                  className={\"bp3-light\"}\n                  // icon=\"info-sign\"\n                  onClose={this.toggleDialog}\n                  title={this.state.dialogTitle}\n                  onValueChange={this.onValueChange}\n                  {...this.state}\n                >\n                  <div className=\"flex flex-column pa4-\">\n                    {this.state.dialogType === \"bio\" && (\n                      <FormBio\n                        value={props.account.user.profile.bio}\n                        submitBio={this.submitBio}\n                      />\n                    )}\n                    {this.state.dialogType === \"profile\" && (\n                      <FormProfile\n                        role={props.account.user.position}\n                        value={props.account.user.profile}\n                        submitProfile={this.submitProfile}\n                      />\n                    )}\n                    {this.state.dialogType === \"profileImage\" && (\n                      <Filepond\n                        type={this.state.dialogType}\n                        closeDialog={this.closeDialog}\n                      />\n                    )}\n                    {this.state.dialogType === \"addToNetwork\" && <FormBio />}\n                    {this.state.dialogType === \"addToProject\" && <FormBio />}\n                    {this.state.dialogType === \"editSkills\" && (\n                      <FormSkills\n                        updateSkills={this.updateSkills}\n                        skills={props.account.user.profile.additional.skills}\n                      />\n                    )}\n                    {this.state.dialogType === \"addPortfolioProject\" && (\n                      <FormPortfolioProject\n                        closeDialog={this.closeDialog}\n                        updateAccount={this.context.updateAccount}\n                      />\n                    )}\n                    {this.state.dialogType === \"cv\" && (\n                      <>\n                        {props.account.user.profile.cv.uploaded === true && (\n                          <div className=\"flex flex-row mb3\">\n                            <a\n                              href={props.account.user.profile.cv.file}\n                              target=\"_blank\"\n                              className=\"flex flex-row ph3 pv3 tc br1 f5 fw6 white- black-50 bg-green items-center justify-center w-100\"\n                            >\n                              <Icon\n                                icon={\"document-open\"}\n                                iconSize={15}\n                                className=\"mr2 white- black-50\"\n                              ></Icon>\n                              View uploaded CV\n                            </a>\n                          </div>\n                        )}\n                        <Filepond\n                          type={this.state.dialogType}\n                          closeDialog={this.closeDialog}\n                        />\n                      </>\n                    )}\n                  </div>\n                </Dialog>\n\n                {/* {\n                  this.state\n                  && this.state.locationIsSet\n                  && this.state.ready\n                  && this.state.drawerReady\n                  && (this.state.activeChef\n                    && this.state.activeChef.hasOwnProperty('extended'))\n                  && (\n                    <ChefInfo\n                      type={\"info\"}\n                      chef={this.state.activeChef}\n                      updateDoc={this.updateDoc}\n                      visible={this.state.chefInfoVisible}\n                      hideDrawer={this.hideDrawer}\n                      close={this.props.handleOk}\n                      refresh={this.refresh}\n                      theme={props.theme}\n                      reserve={this.reserve}\n                      sendMessage={this.sendMessage}\n                      conversationReady={this.state.conversationReady}\n                      submitReservationRequest={this.submitReservationRequest}\n                      activeTab={this.state.activeTab}\n                      activeCurrency={props.activeCurrency}\n                      exchangeRate={props.exchangeRate}\n                    />)} */}\n              </section>\n              {/* {\n                user\n                && user.extended\n                && user.extended.config\n                && user.extended.config.type === \"user\"\n                && this.state.showLocationForm\n                && <LocationSearchFormWrapper\n                  progressBarActive={this.state.progressBarActive}\n                  progressBarPercent={this.state.progressBarPercent}\n                  fetchChefs={this.fetchChefs}\n                />\n              } */}\n            </TransitionLayout>\n          )\n        )}\n      </AccountConsumer>\n    );\n  }\n}\n\nexport default OwnProfile;\nOwnProfile.contextType = AccountContext;\n","// @flow\nimport React, { Component } from \"react\";\nimport AccountContext, {\n  AccountConsumer\n} from \"../../../utils/context/AccountContext.js\";\n\nimport PageTitle from \"../../elements/layout/PageTitle_B.js\";\nimport FilePond from \"../../elements/upload/Filepond.js\";\n\n// import { Page, Text, View, Document, StyleSheet } from '@react-pdf/renderer';\n\nimport { Drawer } from \"antd\";\nimport MessageBoxProject from \"../../elements/display/messages/messageboxProject.js\";\nimport MBox from \"../../elements/display/messages/MBox.js\";\n\nimport { Fn, ui, api } from \"../../../utils/fn/Fn.js\";\nimport Transition from \"../../Layouts/Transition\";\nimport posed from \"react-pose\";\n\nconst Box = posed.div({\n  hidden: { opacity: 0, y: 50 },\n  visible: { opacity: 1, y: 0 }\n});\n\n\nclass Discussion extends React.Component {\n\n  constructor(props) {\n    \n    super(props);\n\n    this.state = {\n      hasError: false,\n      project: this.props.project,\n      // : this.props.project.discussion || null,\n      files: this.props.project.files || [],\n      drawerOpen: false,\n      activeFile: {},\n      ready: true,\n      activeConversation: null,\n      conversations: null,\n      activeStream: null,\n      isVisible: false\n    };\n\n    this.toggleDrawer = this.toggleDrawer.bind(this);\n    this.openFilePanel = this.openFilePanel.bind(this);\n    this.updateActiveConversation = this.updateActiveConversation.bind(this);\n    this.fetchConversation = this.fetchConversation.bind(this);\n  }\n  updateActiveConversation(data) {\n    const { conversations, activeConversation } = data;\n\n    this.setState({\n      activeConversation: activeConversation,\n      conversations: conversations\n    });\n  }\n\n  openFilePanel(file) {\n    this.setState({\n      activeFile: file\n    });\n    this.toggleDrawer();\n  }\n\n  toggleDrawer() {\n    this.setState({\n      drawerOpen: !this.state.drawerOpen\n    });\n  }\n\n  async fetchConversation() {\n\n    console.log(\"fetchConversation\", this.props.project.conversationId);\n\n    await api\n      .fetch(\"conversations\", this.props.project.conversationId)\n      .then(async conversation => {\n        if (conversation) {\n          Fn.set(\"activeConversation\", conversation);\n          console.log(\"conversation\", conversation);\n          console.log(\n            \"!conversation.hasOwnProperty(messages)\",\n            !conversation.hasOwnProperty(\"messages\"),\n            conversation\n          );\n\n          if (!conversation.hasOwnProperty(\"authors\")) {\n            conversation.authors = [];\n          }\n\n          let participants = new Set(conversation.participants);\n          participants.add(this.context.account.user.id);\n          let p = Array.from(participants);\n\n          conversation.participants = p;\n\n          console.log(\"fetching authors\", conversation.participants);\n\n          let authors = await Fn.fetchAuthors({\n            self: this,\n            authorIds: conversation.participants\n          });\n\n          if (authors) {\n            conversation.authors = authors;\n\n            this.setState({\n              activeConversation: conversation,\n              conversationReady: true,\n              ready: true\n            });\n\n            console.log(\" updated conversation \", conversation);\n          \n            setTimeout(() => {\n              this.setState({\n                isVisible: true\n              });\n\n              if (document.getElementById(\"MessagesList\")) {\n                document.getElementById(\"MessagesList\").scroll({\n                  top: document.getElementById(\"MessagesList\").scrollHeight,\n                  left: 0,\n                  behavior: \"smooth\"\n                });\n              }\n              \n            }, 1000);\n          }\n        }\n      });\n  }\n  componentDidMount = () => {\n    console.log(\"Discussion mounted\", this.props);\n\n    this.fetchConversation();\n   \n    // let self = this;\n    //         setTimeout(() => {\n    //             // self.setState({ isVisible: !this.state.isVisible });\n    //         }, 100)\n\n    // Fn.set('activeDiscussion', this.props.project.discussion)\n  };\n\n\n\n  render() {\n    const isVisible = this.state.isVisible;\n\n    if (this.state.hasError) {\n      return <h1>Something went wrong.</h1>;\n    }\n    return (\n      <>\n        <section id=\"Discussion\" className=\"flex flex-column w-100 pb4 pt0\">\n          {this.props.title !== null && (\n            <div className=\"flex flex-row mb4 \">\n            <PageTitle\n              title={\"Discussion\"}\n              docs={\n                (this.state.activeConversation &&\n                  this.state.activeConversation.messages) ||\n                []\n              }\n              ready={this.state.conversationReady}\n            />\n            </div>\n          )}\n\n          {/* <div className=\"file-dropzone flex flex-row flex-wrap \">\n            <FilePond\n              type=\"files\"\n              project={this.props.project}\n              self={this}\n            />\n          </div> */}\n          {!this.state.conversationReady && (\n            <div\n              className={\n                (this.props.loadingAlign === \"center\"\n                  ? \" items-center justify-center \"\n                  : \" items-center justify-start \") +\n                \" items-center justify-center  flex flex-row pv5 pr4\"\n              }\n            >\n              <div className=\"sp sp-3balls\"></div>\n            </div>\n          )}\n          {this.state.conversationReady && (\n            <div\n              className={\n                \" flex flex-column flex-auto box w-100 trans-o-fast trans-y-fast \" +\n                (this.state.isVisible\n                  ? \" opacity-1 transform-y-0 \"\n                  : \" opacity-0 transform-y-50 \")\n              }\n            >\n              <div style={{ height: ui.mobile() ? \"54vh\" : \"auto\" }}>\n                <MBox\n\n                  conversationReady={this.state.conversationReady}\n                  type={this.props.type}\n                  conversation={this.state.activeConversation}\n                  conversations={[this.state.activeConversation]}\n                  activeConversationIndex={0}\n                  // conversations={this.state.conversations}\n                  stream={this.state.activeStream}\n                  updateActiveConversation={this.updateActiveConversation}\n                  size={this.props.size}\n                  // load={this.props.load}\n                />\n              </div>\n            </div>\n          )}\n          {/* </div> */}\n        </section>\n\n        <Drawer\n          title=\"Basic Drawer\"\n          placement=\"right\"\n          closable={true}\n          onClose={this.toggleDrawer}\n          visible={this.state.drawerOpen}\n          width={\"60vw\"}\n        >\n          {this.state.drawerOpen && (\n            <div className=\"pointer flex flex-column justify-end items-center pa3 bg-white \">\n              <h3 className=\"f5 fw6 black tc pv2 ph3 word-break-all\">\n                {this.state.activeFile.file.originalname}\n              </h3>\n              <div className=\"pointer flex flex-column justify-end items-center pa3 bg-white br2 bs-b mb2 mr2\">\n                <div\n                  style={{\n                    backgroundImage: 'url(\"' + this.state.activeFile.url + '\")'\n                  }}\n                  className=\"h5 file-item bg-cover bg-center cover flex flex-column justify-end items-center pa3 bg-white br2 bs-b mb2 mr2\"\n                ></div>\n              </div>\n            </div>\n          )}\n        </Drawer>\n      </>\n    );\n  }\n}\n\nexport default Discussion;\nDiscussion.contextType = AccountContext;\n","import React from 'react';\nimport { DatePicker, Drawer, message } from 'antd';\nimport moment from 'moment';\nimport AccountContext from '../../../utils/context/AccountContext.js';\nimport { app, Fn } from '../../../utils/fn/Fn.js';\nimport LocationSearchBar from '../../elements/display/forms/LocationSearchBar.js';\nimport PageTitle from '../../elements/layout/PageTitle_B.js';\nimport FormCrew from '../CrewFinder/Three.js';\n// import { Icon } from '@blueprintjs/core';\nimport { Icon } from '@blueprintjs/core';\n// import Lightbox from 'react-lightbox-component';\n// import Lightbox from 'react-image-lightbox';\n// import 'react-image-lightbox/style.css';\nimport { TH_LIST } from '@blueprintjs/icons/lib/esm/generated/iconNames';\n\nclass Settings extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      hasError: false,\n      project: this.props.project,\n      drawerOpen: false,\n      ready: false,\n      view: 'general',\n      views: [],\n      activeButton: {},\n      buttons: [],\n      projectType: this.props.project.type,\n      startDate: this.props.project.start_date,\n      endDate: this.props.project.end_date,\n      location: this.props.project.location,\n      loading: false,\n      x: false,\n      lightboxActive: false\n    }\n\n    this.toggleDrawer = this.toggleDrawer.bind(this)\n    this.openFilePanel = this.openFilePanel.bind(this)\n    this.setView = this.setView.bind(this)\n    this.setButtons = this.setButtons.bind(this)\n    this.handleStartDateChange = this.handleStartDateChange.bind(this)\n    this.handleEndDateChange = this.handleEndDateChange.bind(this)\n    this.handleProjectTypeChange = this.handleProjectTypeChange.bind(this)\n    this.updateProject = this.updateProject.bind(this)\n    this.updateProjectLocation = this.updateProjectLocation.bind(this)\n    // this.toggleLightbox = this.toggleLightbox.bind(this)\n\n    this.projectTitle = React.createRef();\n    this.projectDescription = React.createRef();\n\n  }\n  // toggleLightbox() {\n\n  //   alert()\n\n  //   this.setState({\n  //     lightboxActive: !this.state.lightboxActive\n  //   })\n  // }\n  updateProjectLocation(item) {\n    console.log('updateProjectLocation', item)\n    this.setState({\n      location: item\n    })\n  }\n  setButtons() {\n\n    const buttons = [\n      {\n        title: 'General',\n        function: () => this.setView({ filter: 'general', button: 0 })\n      },\n      {\n        title: 'Archive',\n        function: () => this.setView({ filter: 'archive', button: 0 })\n      },\n\n      // {\n      //   title: 'Crew',\n      //   function: () => this.setView({ filter: 'crew', button: 1 })\n      // }\n    ]\n\n    const views = ['general', 'archive']\n\n    this.setState({\n      buttons: buttons,\n      activeButton: buttons[0],\n      views: views,\n      view: views[0]\n    })\n\n  }\n  setView(config) {\n\n    const { view, button } = config;\n\n    this.setState({\n      view: view,\n      activeButton: button\n    })\n\n    Fn.store({ label: 'projectSettingsView', value: view })\n    Fn.store({ label: 'projectSettingsActiveButton', value: button })\n\n    view === \"discussion\" && setTimeout(() => (\n      document.querySelector('body').scroll({\n        top: 130,\n        left: 0,\n        behavior: 'smooth'\n      })\n    ), 1000)\n\n  }\n  openFilePanel(file) {\n    this.setState({\n      activeFile: file\n    })\n    this.toggleDrawer()\n  }\n\n  toggleDrawer() {\n    this.setState({\n      drawerOpen: !this.state.drawerOpen\n    })\n  }\n  handleProjectTypeChange = (type) => {\n\n    this.setState({\n      projectType: type\n    })\n  }\n  handleStartDateChange = (e) => {\n    window.log.warn('start date', e.toString())\n    this.setState({\n      startDate: e.toString()\n    })\n  }\n  handleEndDateChange = (e) => {\n    window.log.warn('end date', e.toString())\n    this.setState({\n      endDate: e.toString()\n    })\n  }\n  updateProject = async () => {\n    message.config({\n      top: '40vh',\n      // duration: 1000,\n      // maxCount: 3,\n    });\n    message.loading('Saving project..', 0);\n    \n    // Dismiss manually and asynchronously\n    // setTimeout(hide, 2500);\n\n    this.setState({\n      loading: true,\n      x: TextTrackCueList\n    })\n    const project = this.props.project;\n\n    project.start_date = this.state.startDate;\n    project.end_date = this.state.endDate;\n    project.title = this.projectTitle.current.value;\n    project.description = this.projectDescription.current.value;\n    project.location = this.state.location;\n    project.updatedAt = moment(new Date()).toString()\n\n\n    let start = project.start_date;\n    let end = project.end_date;\n    let days = await Fn.getDates(start, end)\n    project.days = days;\n\n    console.log('days',days)\n\n\n    console.log('Project update data ', project)\n\n    let url = Fn.api('projects') + project.id;\n\n    let config = {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(project)\n    }\n\n    await fetch(url, config).then(res => {\n      return res.json()\n    }).then(async res => {\n\n      console.log(res)\n\n      await app.createProjectCalendar({ self: this, project }).then( async project => {\n        await app.updateProjectConversations({ self: this, project }).then( async project => {\n          this.setState({ project: res })\n\n          Fn.store({ label: 'activeProject', value: res })\n    \n          setTimeout(() => {\n    \n            this.setState({\n              loading: false,\n              x: false\n            })\n    \n            document.querySelector(\"body\").scroll({\n              top: 0,\n              left: 0,\n              behavior: \"smooth\"\n            })\n            message.destroy()\n            message.success('Project Updated', 1000)\n            setTimeout(() => {\n              message.destroy()\n            }, 1000)\n    \n          }, 1000)\n\n        })\n      })\n\n      \n      // this.props.updateProject({ project: res })\n    })\n\n  }\n  componentDidMount = () => {\n\n    this.setButtons()\n\n    if (localStorage.projectSettingsView !== null) {\n      let view = Fn.get('projectSettingsView');\n      this.setState({\n        view: view,\n        // activeButton: activeButton\n      })\n    }\n    if (localStorage.projectSettingsActiveButton !== null) {\n      let activeButton = Fn.get('projectSettingsActiveButton');\n      this.setState({\n        // view: view,\n        activeButton: activeButton\n      })\n    }\n\n    setTimeout(() => {\n      this.setState({\n        ready: true,\n        view: \"general\"\n      })\n    },1000)\n\n  }\n\n  static getDerivedStateFromError(error) {\n    // getDerivedStateFromError -> Update state so the next render will show the fallback UI.\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, info) {\n    // You can also log the error to an error reporting service\n  }\n\n  getDerivedStateFromProps = (nextProps, prevState) => {\n  }\n\n  getSnapshotBeforeUpdate = (prevProps, prevState) => {\n  }\n\n  componentDidUpdate = () => {\n  }\n\n  componentWillUnmount = () => {\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return <h1>Something went wrong.</h1>;\n    }\n    return (\n      <>\n        <section id=\"Discussion\" className=\"flex flex-column w-100 pb4 pt0\">\n        <div className=\"flex flex-row mb4 \">\n          <PageTitle\n            title={\"Settings\"}\n            docs={this.state.files}\n            ready={this.state.ready}\n          />\n          </div>\n\n          {this.state.ready &&\n\n            <section id=\"ToolbarButtons\" className=\"flex flex-column mb3\">\n\n              <div className=\"flex flex-row justify-between mb3\">\n\n                <div className=\"flex flex-row\">\n\n                  {\n                    this.state.buttons.map((button, index) => (\n\n                      <button\n                        title={button.title}\n                        onClick={() =>\n                          this.setView({\n                            view: this.state.views[index],\n                            button: button\n                          })\n                        }\n                        id={button.title}\n                        className={\n                          (index > 0 && \" bl b--black-05 \") +\n                          (this.state.activeButton.title ===\n                            button.title\n                            ? \" bg-white-60 \"\n                            : \" bg-white \") +\n                          \" flex flex-column pa0 mr3- pointer justify-center flex-auto\"\n                        }\n                      >\n                        <div\n                          id=\"\"\n                          className=\"flex flex-row ph0 pv0 items-center justify-center\"\n                        >\n                          <span className=\"f5 fw6 black-40 ph3 pv2\">\n                            {button.title}\n                          </span>\n                        </div>\n                      </button>\n\n                    ))\n                  }\n\n                </div>\n\n              </div>\n\n            </section>\n\n          }\n\n          <div className=\"w-60-ns- w-100 flex flex-row flex-wrap justify-between br3- -overflow-hidden\">\n\n            {\n              this.state.x\n                ? <Icon icon=\"loading\" iconSize=\"15\" className=\"absolute right-0 f4 black-60 mr3\" /> : <Icon icon=\"swap-right\" iconSize=\"15\" className=\"f4 black-60 -white  absolute right-0 mr3\" />\n            }\n\n{\n  !this.state.ready && <div className=\"flex flex-column items-center justify-center pv4 w-100\">\n                      {/* <Spinner size={25} /> */}\n                      <div className=\"sp sp-3balls\"></div>\n                    </div>\n}\n{\n              this.state.ready && this.state.view === \"archive\" &&\n              \n              <div id=\"SettingsForm_General\" className=\"flex flex-column mb6 w-100\">\n\n                <div className=\"flex flex-column mt0 w-100\" id=\"\">\n\n                  <div className=\"form-row flex flex-column pb3 pt2\">\n\n                    <div className=\"form-row flex flex-column\">\n\n                      <div className=\"form-row flex flex-row pt4 items-center\">\n\n                        <label className=\"f5 fw6 black-20 pb3- tl mr4 w-30\">Archive Project</label>\n\n                        <input\n                          ref={this.archived}\n                          required={true}\n                          type={'text'}\n                          defaultValue={this.props.project.title}\n                          className=\"flex flex-column ph4 pv3 bn br2 -round bg-black-05- white- black-50 f4 fw5 bs-a- w-100 bg-white\" />\n\n                      </div>\n                      </div>\n                      </div>\n                      </div>\n                      </div>\n}\n            {\n              this.state.ready && this.state.view === \"general\" &&\n              \n              <div id=\"SettingsForm_General\" className=\"flex flex-column mb6 w-100\">\n\n                <div className=\"flex flex-column mt0 w-100\" id=\"\">\n\n                  <div className=\"form-row flex flex-column pb3 pt2\">\n\n                    <div className=\"form-row flex flex-column\">\n\n                      <div className=\"form-row flex flex-row pt4 items-center\">\n\n                        <label className=\"f5 fw6 black-20 pb3- tl mr4 w-30\">Project Name</label>\n\n                        <input\n                          ref={this.projectTitle}\n                          required={true}\n                          type={'text'}\n                          defaultValue={this.props.project.title}\n                          className=\"flex flex-column ph4 pv3 bn br2 -round bg-black-05- white- black-50 f4 fw5 bs-a- w-100 bg-white\" />\n\n                      </div>\n\n                      <div className=\"form-row flex flex-row pt4 items-center\">\n\n                        <label className=\"f5 fw6 black-20 pb3- tl mr4 w-30\">Project Description</label>\n\n                        <textarea\n                          ref={this.projectDescription}\n                          required={true}\n                          type={'textarea'}\n                          defaultValue={this.props.project.description}\n                          rows={5}\n                          className=\"flex flex-column ph4 pv3 bn br2 -round- bg-black-05- white- black-50 f4 fw5 bs-a- w-100 bg-white\" />\n\n                      </div>\n\n                      <div className=\"form-row flex flex-row pt4 items-center\">\n\n                        <label className=\"f5 fw6 black-20 pb3- tl mr4 w-30\">Project Location</label>\n\n                        <LocationSearchBar\n                          updateProjectLocation={this.updateProjectLocation}\n                          location={this.state.location}\n                          findLocation={this.findLocation}\n                          fetchProjects={this.fetchProjects2}\n                          defaultValue={typeof this.state.location.address !== \"undefined\" ? this.state.location.address.county + \", \" + this.state.location.address.country : this.state.location}\n                        />\n\n                        {/* <input\n                                            required={true}\n                                            defaultValue={getGlobal().location.County}\n                                            type={'text'} \n                                            className=\"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a\" /> */}\n                      </div>\n\n                      <div className=\"form-row flex flex-row pt4 items-center\">\n\n                        <label className=\"f5 fw6 black-20 pb3- tl mr4 w-30\">Project Type</label>\n\n                        <select\n                          className=\"flex flex-column ph4 pv3 bn br2 -round bg-black-05- white- black-50 f4 fw5 bs-a- w-100 bg-white\"\n                          // defaultValue=\"commercial\"      \n                          defaultValue={this.props.project.type}\n                          onChange={(e) => this.handleProjectTypeChange(e)}>\n\n                          <option value=\"\" className=\"flex flex-column ph3 pv3 \">Select</option>\n                          <option value=\"commercial\" className=\"flex flex-column ph3 pv3 \">Commercial</option>\n                          <option value=\"film\" className=\"flex flex-column ph3 pv3 \">Film</option>\n                          <option value=\"documentary\" className=\"flex flex-column ph3 pv3 \">Documentary</option>\n\n                        </select>\n\n                      </div>\n\n                      <div className=\"form-row flex flex-row justify-between w-100\">\n\n                        <div className=\" form-row flex flex-column pt4 w-100 mr2\">\n\n                          <span className=\"f5 fw6 black-20 pb3\">Start Date</span>\n\n                          <DatePicker\n                            minDate={new Date('01/01/1940')}\n                            maxDate={new Date('01/01/2030')}\n                            defaultValue={moment(this.props.project.start_date)}\n\n                            onChange={this.handleStartDateChange}\n                            className=\"flex flex-column ph4 pv0 bn br2 -round bg-black-05- white- black-50 f4 fw5 bs-a- w-100 bg-white \"\n                          />\n\n                        </div>\n\n                        <div className=\" form-row flex flex-column pt4 w-100 ml2\">\n\n                          <span className=\"f5 fw6 black-20 pb3\">Completion Date</span>\n\n                          <DatePicker\n                            minDate={new Date('01/01/1940')}\n                            maxDate={new Date('01/01/2030')}\n                            defaultValue={moment(this.props.project.end_date || 'Dec 31 2020')}\n                            // defaultValue={typeof this.props.value.dob !== \"undefined\" && this.props.value.dob.length > 0 ? new Date(this.props.value.dob) : null} className={''} \n                            onChange={this.handleEndDateChange}\n                            className=\"flex flex-column ph4 pv0 bn br2 -round bg-black-05- white- black-50 f4 fw5 bs-a- w-100 bg-white \"\n                          />\n\n                        </div>\n\n                      </div>\n\n                    </div>\n\n                  </div>\n\n                </div>\n\n                <div className=\"Buttons flex flex-row justify-between mt4\">\n\n                  <div className=\"flex flex-column -w-100\">\n\n                    <button\n                      onClick={() => this.updateProject()}\n                      className={(\"br1- round bs-b bg-black-20 ph5 pv2 pointer bn relative w-100  \")} >\n\n                      <span className=\"relative f5 fw6 white pv1 flex items-center justify-center w-100\">\n                        {this.state.loading ? 'Saving' : 'Save'}\n                      </span>\n\n                    </button>\n\n                  </div>\n\n                </div>\n              </div>\n\n            }\n\n            {\n              this.context.isAuthenticated && this.state.view === \"crew\" &&\n              <div id=\"SettingsForm_Crew\" className=\"flex flex-column mb6 w-100\">\n\n                <FormCrew\n                  project={this.props.project}\n                />\n\n              </div>\n\n            }\n\n          </div>\n\n        </section>\n\n        <Drawer\n          title=\"Basic Drawer\"\n          placement=\"right\"\n          closable={true}\n          onClose={this.toggleDrawer}\n          visible={this.state.drawerOpen}\n          width={'60vw'}\n        >\n          {\n            this.state.drawerOpen &&\n            <div className=\"pointer flex flex-column justify-end items-center pa3 bg-white \">\n              <h3 className=\"f5 fw6 black tc pv2 ph3 word-break-all\">{this.state.activeFile.file.originalname}</h3>\n              <div\n                onClick={this.toggleLightbox}\n                className=\"pointer flex flex-column justify-end items-center pa3 bg-white br2 bs-b mb2 mr2\">\n                <div\n                  style={{ backgroundImage: 'url(\"' + this.state.activeFile.url + '\")' }}\n                  className=\"h5 file-item bg-cover bg-center cover flex flex-column justify-end items-center pa3 bg-white br2 bs-b mb2 mr2\">\n\n                </div>\n         \n\n              </div>\n\n            </div>\n          }\n\n        </Drawer>\n      </>\n\n    );\n  }\n}\n\nexport default Settings;\nSettings.contextType = AccountContext;","import React from 'react';\nimport OnboardingForm from \"./OnboardingSteps\";\nimport \"./style.css\";\n\nimport { Steps, Button, message } from \"antd\";\nimport { Icon } from \"@blueprintjs/core\";\nimport { Checkbox } from \"antd\";\nimport { Fn, app } from \"../../../utils/fn/Fn.js\";\nconst { Step } = Steps;\n\nconst steps = [\n  {\n    title: \"First\",\n    content: \"First-content\"\n  },\n  {\n    title: \"Second\",\n    content: \"Second-content\"\n  },\n  {\n    title: \"Last\",\n    content: \"Last-content\"\n  }\n];\nconst positions = [\n  {\n    title: \"Select\"\n  },\n  {\n    title: \"Unit Production Manager\"\n  },\n  {\n    title: \"Line Producer\"\n  },\n  {\n    title: \"Production Manager\"\n  },\n  {\n    title: \"Director\"\n  },\n  {\n    title: \"Assistant Director\"\n  },\n  {\n    title: \"2nd Assistant Director\"\n  },\n  {\n    title: \"Continuity Person\"\n  },\n  {\n    title: \"Cinematographer\"\n  },\n  {\n    title: \"Gaffer\"\n  },\n  {\n    title: \"Camera Operator\"\n  },\n  {\n    title: \"Assistant Cameraman\"\n  },\n  {\n    title: \"Film Loader\"\n  },\n  {\n    title: \"Steadycam Operator\"\n  },\n  {\n    title: \"Production Sound Mixer\"\n  },\n  {\n    title: \"Boom Operator\"\n  },\n  {\n    title: \"Key Grip\"\n  },\n  {\n    title: \"Dolly Grip\"\n  },\n  {\n    title: \"Best Boy\"\n  },\n  {\n    title: \"Visual Effects Director\"\n  },\n  {\n    title: \"FX Coordinator\"\n  },\n  {\n    title: \"Property Master\"\n  },\n  {\n    title: \"Leadman\"\n  },\n  {\n    title: \"Set Dresser\"\n  },\n  {\n    title: \"Costumer\"\n  },\n  {\n    title: \"Make-up Artist\"\n  },\n  {\n    title: \"Body Make-up Artist\"\n  },\n  {\n    title: \"Hairdresser\"\n  },\n  {\n    title: \"Production Assistant\"\n  },\n  {\n    title: \"Production Office Coordinator\"\n  },\n  {\n    title: \"Unit Publicist\"\n  },\n  {\n    title: \"Second Unit Director\"\n  },\n  {\n    title: \"Production Caterer\"\n  },\n  {\n    title: \"Craft Services\"\n  },\n  {\n    title: \"Transportation Coordinator\"\n  },\n  {\n    title: \"Day Player\"\n  }\n];\n\nconst plainOptions = [\n  \"Mexican\",\n  \"American\",\n  \"Italian\",\n  \"South African\",\n  \"Greek\",\n  \"Portuguese\",\n  \"Chinese\",\n  \"Turkish\",\n  \"Thai\"\n];\n\nclass CrewFinder_People extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      current: 0,\n      cuisines: [],\n      cuisines_: [{}],\n      role: \"\",\n      skills: [],\n      skills_: [],\n      value: \"\",\n      crew: []\n    };\n\n    console.log(\"OnboardingScreen props\", props);\n    this.insertSkill = this.insertSkill.bind(this);\n    this.addSkillInput = this.addSkillInput.bind(this);\n    this.save = this.save.bind(this);\n    this.reset = this.reset.bind(this);\n    this.specOnChange = this.specOnChange.bind(this);\n    this.search = this.search.bind(this);\n    this.bulkSearch = this.bulkSearch.bind(this)\n    console.log(\"FormCrew props\", props);\n\n    this.role = React.createRef();\n  }\n  bulkSearch() {\n\n    let positions = this.state.skills;\n    \n    this.props.bulkSearch({ positions });\n\n  }\n  async search({ index, type }) {\n    console.log(index, type);\n    let positions = this.state.skills;\n    let position = positions[index];\n    // let a = await Fn.fetchUsers({ self: this, positions })\n    this.props.search({ index, position, type });\n  }\n  reset() {\n    // window.localStorage.clear()\n    // this.context.history.push('/')\n    // window.location.href = \"/\"\n    this.setState({\n      skills_: [],\n      skills: []\n    });\n  }\n\n  save() {\n    // let cuisines = this.state.cuisines;\n    // let role = this.role.current.value;\n    let skills = this.state.skills;\n    let data = { positions: skills };\n    console.log(\"save data \", data);\n    this.props.save(data);\n    // this.props.next()\n  }\n  // onChange(checkedValues) {\n  //   console.log('checked = ', checkedValues);\n  //   this.setState({cuisines: checkedValues})\n  // }\n  // role()/\n  // insertCuisine(cuisine) {\n  //   let cuisines = this.state.cuisines;\n  //   cuisines.push(cuisine)\n  // }\n  async insertSkill(item) {\n    let skills = this.state.skills;\n    skills.push(item);\n    this.setState({ skills: skills });\n    \n  }\n  async addSkillInput() {\n    let skills_ = this.state.skills_;\n    skills_.push({});\n    this.setState({ skills_: skills_ });\n    // console.log('positions',skills_)\n    // let positions = []\n    // for(let item of skills_){\n    //   let i = {\n\n    //   }\n    // }\n  }\n  async specOnChange(data) {\n    const { e, index } = data;\n    let skills = this.state.skills;\n    skills[index] = e.target.value;\n    this.setState({\n      skills\n    });\n    console.log(this.state);\n    let project = this.props.project;\n    project.positions = skills;\n    await app.updateProject({ self: this, project });\n    // let\n  }\n\n  // onChange = e => {\n  //   console.log('radio checked', e.target.value);\n  //   this.setState({\n  //     value: e.target.value,\n  //   });\n  // };\n  componentDidMount() {\n    let positions = this.props.project.positions;\n    let p = [];\n    let a = [];\n    for (let item of positions) {\n      p.push(item);\n      a.push({});\n    }\n    console.log(a, p);\n    this.setState({\n      skills: p,\n      skills_: a\n    });\n  }\n  render() {\n    // const { current } = this.state;\n    return (\n      <div id=\"StepsForm\">\n        <div className=\"flex flex-column ma0\" id=\"\">\n          <div className=\"form-row flex flex-column pb3 pt2\">\n            {/* <div className=\"form-row flex flex-column\">\n              <div className=\"form-row flex flex-column pt4\">\n                <label className=\"f7 fw6 black-90 pb2\">Your Crew Role</label>\n                <input \n                required={true}\n                ref={this.role}\n                type={'text'} className=\"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a\" />\n                <Checkbox.Group required={true} options={plainOptions} onChange={this.onChange} />\n              </div>\n\n            </div> */}\n            <div className=\"form-row flex flex-column pt4\">\n\n              <div className=\"form-row flex flex-column  pa3 br4 ba b--black-05\">\n                {/* <label className=\"f5 fw6 black-50 pb2\">Crew Needed</label> */}\n                <div className=\"flex flex-row justify-between flex-wrap  col-3\">\n                  {this.state.skills_.map((item, index) => (\n                    <div className=\"flex flex-column  w-100- mw6 mb3 \">\n                      <div className=\"flex flex-row  br2 overflow-hidden \">\n                        <select\n                          // required={true}\n                          onChange={e => this.specOnChange({ e, index })}\n                          value={this.state.skills[index]}\n                          // type={'text'}\n                          className=\"w-100 flex flex-row ph3 pv3 bn br1 bg-white black-60 f4 fw5\"\n                        >\n                          {positions.map((item, index) => (\n                            <option value={item.title}>{item.title}</option>\n                          ))}\n                        </select>\n                        <div className=\"flex flex-row items-center justify-center ph3 pv2 bg-white bl b--black-05\">\n                          <div className=\"flex br2 overflow-hidden\">\n                            <button\n                              onClick={() =>\n                                this.search({ index, type: \"search\" })\n                              }\n                              className=\"pointer ph3 pv2 bg-black-40 hover-bg-black  white f5 fw6\"\n                            >\n                              <Icon\n                                icon={\"search\"}\n                                iconSize={15}\n                                className=\" white\"\n                              />\n                            </button>\n                            <button\n                              onClick={() =>\n                                this.search({ index, type: \"search\" })\n                              }\n                              className=\"pointer ph3 pv2 bg-black-40 hover-bg-black  white f5 fw6\"\n                            >\n                              <Icon\n                                icon={\"trash\"}\n                                iconSize={15}\n                                className=\" white\"\n                              />\n                            </button>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n\n                <div className=\"form-row flex flex-row pt2\">\n                  <button\n                    onClick={this.bulkSearch}\n                    className=\"pointer bn br2 f5 fw6 bg-transparent black-50 pv3 ph3 w-100\"\n                  >\n                    Bulk Search\n                  </button>\n                </div>\n\n                <div className=\"form-row flex flex-row pt2\">\n                  <button\n                    onClick={this.addSkillInput}\n                    className=\"pointer bn br2 bg-black-05 hover-bg-black-10 f5 fw6 black-50 pv4 ph3 w-100\"\n                  >\n                    Add +\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* <div className=\"Buttons flex flex-row justify-between mt4\">\n\n          <div className=\"flex flex-column w-100-\">\n\n            <button\n              onClick={this.save}\n              className={(\"br1 bs-b bg-black ph5 pv2 pointer bn relative  \")} >\n\n              <span className=\"f5 fw5 white pv2 flex items-center justify-center\">\n\n                {this.state.buttonLoading ? <Icon type=\"loading\" className={' absolute right-0 f4 black-60 mr2'} /> : <Icon type=\"swap-right\" className={(' f4 black-60 mr2 absolute right-0')} />} Save</span>\n            </button>\n\n\n            <div className=\"flex flex-row w-100\">\n              <div\n                onClick={this.reset}\n                className=\"pointer f5 fw6 black-50 pv2 mt2 mv4 ba b--black-05 ph3\">Reset</div>\n            </div>\n          </div>\n\n        </div> */}\n      </div>\n    );\n  }\n}\nexport default CrewFinder_People;\n","import React from \"react\";\n// import OnboardingForm from './OnboardingSteps';\nimport \"./style.css\";\n\n// import Filepond from '../../upload/Filepond.js';\n\nimport { DatePicker, Steps, Select, Button, message } from \"antd\";\nimport { Icon, Spinner } from \"@blueprintjs/core\";\nimport moment from \"moment\";\nimport LocationSearchBar from \"../display/forms/LocationSearchBar.js\";\nimport { Fn, app } from \"../../../utils/fn/Fn.js\";\nconst { MonthPicker, RangePicker } = DatePicker;\nconst dateFormat = \"YYYY/MM/DD\";\n\nvar GeoPattern = require(\"geopattern\");\nwindow.GeoPattern = GeoPattern;\n\n// import { DatePicker, TimePrecision } from \"@blueprintjs/datetime\";\n// const { Step } = Steps;\n// const { Option } = Select;\n\n// const steps = [\n//   {\n//     title: 'First',\n//     content: 'First-content',\n//   },\n//   {\n//     title: 'Second',\n//     content: 'Second-content',\n//   },\n//   {\n//     title: 'Last',\n//     content: 'Last-content',\n//   },\n// ];\nclass FormInvite extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      projectType: \"\",\n      startDate: \"\",\n      endDate: \"\",\n      view: \"email\",\n      // inviteBusy: false,\n      connections: [],\n      connectionsReady: false,\n      inviteBusy: []\n    };\n\n    this.emailAddress = React.createRef();\n    // this.projectName = React.createRef()\n    this.searchProjects = this.searchProjects.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleRangeChange = this.handleRangeChange.bind(this);\n    this.setView = this.setView.bind(this);\n    this.inviteByEmail = this.inviteByEmail.bind(this);\n    this.addProductionCrewMember = this.addProductionCrewMember.bind(this)\n    // this.handleDateChange = this.handleDateChange.bind(this)\n    this.inviteByEmailAddress = React.createRef();\n    console.log(\"OnboardingScreen props\", props);\n  }\n  async addProductionCrewMember({ item, index}) {\n    let a = this.state.inviteBusy;\n    a[index] = true;\n    this.setState({\n      inviteBusy: a\n    })\n\n    setTimeout(() => {\n      this.props.addProductionCrewMember(item)\n    },600)\n\n  }\n  async inviteByEmail() {\n    this.setState({ inviteBusy: true });\n    console.log(\"invitebyemail\", this.props);\n    let projectOwner = this.props.projectOwner;\n    let email = this.inviteByEmailAddress.current.value;\n    let position = this.props.productionCrew[0].position;\n    let link = window.location.href + \"?newInvite=true&referrer=email\";\n\n    await app.inviteByEmail({\n      self: this,\n      link,\n      position,\n      project: this.props.project,\n      projectOwner,\n      email\n    });\n  }\n  setView(view) {\n    this.setState({\n      view: view\n    });\n  }\n  handleRangeChange(e) {\n    console.log(e);\n    let startDate = e[0].toString();\n    let endDate = e[1].toString();\n    this.setState({\n      startDate,\n      endDate\n    });\n  }\n  handleDateChange(e) {\n    console.log(e);\n\n    this.setState({ projectDate: e.toString() });\n  }\n\n  handleChange(e) {\n    console.log(e.target.value);\n\n    this.setState({\n      projectType: e.target.value\n    });\n  }\n\n  searchProjects() {\n    // let location = getGlobal().location;\n    let location = Fn.get(\"location\");\n    let projectType = this.state.projectType;\n    let startDate = this.state.startDate;\n    let endDate = this.state.endDate;\n\n    let data = { location, projectType, startDate, endDate };\n    this.props.searchProjects(data);\n  }\n\n  componentDidMount() {\n    let connections = Fn.get(\"connections\").data;\n    // let inviteBusy = [];\n    // for(let item of inviteBusy){\n    //   inviteBusy.push()\n    // }\n    console.log('** connections',connections)\n    let inviteBusy = new Array(connections.length).fill(false)\n    this.setState({\n      connections: connections,\n      connectionsReady: true,\n      inviteBusy: inviteBusy\n    });\n  }\n\n  render() {\n    // const { current } = this.state;\n    return (\n      <div id=\"ProjectSearchForm\">\n        <div className=\"flex flex-column ma0\" id=\"\">\n          <div className=\"form-row flex flex-column\">\n            <div className=\"form-row flex flex-column pa4-\">\n              <div className=\"flex flex-row justify-start ph4 pv3 bg-white-40\">\n                <div\n                  onClick={() => this.setView(\"email\")}\n                  className={\n                    (this.state.view === \"email\"\n                      ? \" fw6 black-80 \"\n                      : \" fw5 black-50 \") + \" f5 mr3 \"\n                  }\n                >\n                  Invite by Email\n                </div>\n                <div\n                  onClick={() => this.setView(\"network\")}\n                  className={\n                    (this.state.view === \"network\"\n                      ? \" fw6 black-80 \"\n                      : \" fw5 black-50 \") + \" f5 mr3\"\n                  }\n                >\n                  Invite by Network\n                </div>\n                {/* <div\n                  onClick={() => this.setView(\"search\")}\n                  className={\n                    (this.state.view === \"search\"\n                      ? \" fw6 black-80 \"\n                      : \" fw5 black-50 \") + \" f5 pb3 p-h3 \"\n                  }\n                >\n                  Search Users\n                </div> */}\n              </div>\n              {this.state.view === \"email\" && (\n                <div className=\"form-row flex flex-column pa3\">\n                  <label className=\"f6 fw5 black-50 pb2\">Email address</label>\n\n                  <div className=\"flex flex-row \">\n                    <input\n                      ref={this.inviteByEmailAddress}\n                      type={\"text\"}\n                      placeholder={\"Enter email address\"}\n                      className=\"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a- w-100\"\n                    />\n\n                    <div class=\"flex flex-column w-30 bl b--black-05\">\n                      <button\n                        onClick={this.inviteByEmail}\n                        class=\"pointer flex h-100 items-center justify-center f6 bg-white bn f5 fw6 black-50\"\n                      >\n                        Invite\n                        {this.state.inviteBusy ? (\n                          <div className=\"flex flex-column items-start ml2\">\n                            <Spinner size={15} />\n                          </div>\n                        ) : (\n                          <Icon icon=\"arrow-right\" className=\"ml2\"></Icon>\n                        )}\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {this.state.view === \"network\" && (\n                <div className=\"flex flex-column pt3-0\">\n                  {/* <div className=\"form-row flex flex-column\">\n                    <div className=\"form-row flex flex-column pb4\">\n                      <input\n                        ref={this.searchTerm}\n                        type={\"text\"}\n                        placeholder={\"Search by Name\"}\n                        className=\"flex flex-column ph3 pv2 bn round bg-white black-50 f5 fw5 bs-a- w-100\"\n                      />\n                    </div>\n                  </div> */}\n                  <div\n                    className=\"flex flex-column\"\n                    style={{ maxHeight: \"400px\", overflow: \"auto\" }}\n                  >\n                    {this.state.connectionsReady &&\n                      this.state.connections.map((item, index) => (\n                        <div className=\"flex flex-row\">\n                          <div\n                            // to={\"/user/\" + item.id}\n                            onClick={() => this.addProductionCrewMember({ item, index})}\n                            className={\n                              \" trans-a pointer flex flex-row-ns flex-row items-center justify-between  w-100-s bn-ns bb b--black-05 pa3 hover-bg-white-70  w-100\"\n                            }\n                          >\n                         <div\n                            style={{\n                              width: \"50px\",\n                              height: \"50px\",\n                              borderRadius: \"100px\",\n                              background: item.profile.picture.length\n                                ? \"url(\" + item.profile.picture + \")\"\n                                : GeoPattern.generate(\n                                  item.profile.picture\n                                ).toDataUrl()\n                            }}\n                            className=\"cover bg-center\"\n                          />\n                          <div\n                            className={\n                              \" flex flex-row flex-auto -flex-column pt2-ns- pl3  flex f5 fw7 black-70 raleway \"\n                            }\n                          >\n                            <div className={\"  flex    \"}>\n                              {item.profile.name.first}\n                            </div>\n                            <div className={\" flex ml1\"}>\n                              {item.profile.name.last}\n                            </div>\n                          </div>\n\n                          {this.state.inviteBusy[index] && (\n                    <div className=\"flex flex-column h-100 items-center justify-center w-40\">\n                      {/* <Spinner size={25} /> */}\n                      <div className=\"sp sp-3balls\"></div>\n                    </div>\n                  )}\n\n                          </div>\n                        </div>\n                      ))}\n                  </div>\n                </div>\n              )}\n\n              {/* <div className=\"form-row flex flex-column\">\n\n                <label className=\"f6 fw5 black-50 pb2\">Project Location (city)</label>\n\n                <LocationSearchBar\n                  location={this.state.location}\n                  findLocation={this.findLocation}\n                  fetchProjects={this.fetchProjects2}\n                />\n\n              </div> */}\n\n              {/* <div className=\"form-row flex flex-column pt4 w-100\">\n                <label className=\"f6 fw5 black-50 pb2\">Project Type</label>\n\n                <select\n                  className=\"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a w-100\"\n                  // defaultValue=\"commercial\"                \n                  onChange={(e) => this.handleChange(e)}>\n\n                  <option value=\"\">Select</option>\n                  <option value=\"commercial\">Commercial</option>\n                  <option value=\"film\">Film</option>\n                  <option value=\"film\">Documentary</option>\n\n                </select>\n\n              </div> */}\n\n              {/* <div className=\"form-row flex flex-column pt4 w-100\">\n                <label className=\"f6 fw5 black-50 pb2\">Availability Date Range</label>\n\n                <RangePicker\n                  className=\"bs-a f4 fw5\"\n                  onChange={this.handleRangeChange}\n                  // defaultValue={[moment('2015/01/01', dateFormat), moment('2015/01/01', dateFormat)]}\n                  format={dateFormat}\n                />\n              </div> */}\n            </div>\n          </div>\n        </div>\n\n        {/* <div className=\"Buttons flex flex-row justify-between center w-100\">\n\n          <div className=\"flex flex-column w-100 pa4 bg-white\">\n\n            <button\n              onClick={this.searchProjects}\n              className={(\"br1- round bs-b bg-black-20 ph3 pv2 pointer bn relative  \")} >\n\n              <span className=\"f4 fw5 white pv2 flex items-center justify-center\">\n\n                {this.state.buttonLoading\n                  ? <Icon icon=\"loading\" className={' absolute right-0 f4 black-60 mr2'} />\n                  : <Icon icon=\"search\" iconSize={15} className={(' f4 white mr3')} />} Search</span>\n            </button>\n\n          </div>\n\n        </div> */}\n      </div>\n    );\n  }\n}\nexport default FormInvite;\n","const constants = {}\n\nconstants.placeholderImage = \"http://cdn.shopify.com/s/files/1/2278/2351/products/W1151_GeometricPattern3_1024x1024.jpg?v=1510704914\";\n\nconstants.api = {}\n\nconstants.api.findCity = (lat, long) => {\n    return \"https://reverse.geocoder.api.here.com/6.2/reversegeocode.json?prox=\" + lat + \",\" + long + \",250&mode=retrieveAddresses&maxresults=1&gen=9&app_id=ZZN2MPuexLyuz3VR0KDD&app_code=TnEsVJR8k3zxGMiAkbP_EQ\";\n}\nconstants.api.base = () => {\n    return 'https://api.crew20.devcolab.site/v1/'\n}\nexport default constants","import React from \"react\";\nimport { Icon, Spinner } from \"@blueprintjs/core\";\nimport { app, api } from \"../../../utils/fn/Fn.js\";\nimport { notification } from \"antd\";\n\nvar GeoPattern = require(\"geopattern\");\nwindow.GeoPattern = GeoPattern;\n\nexport default class Person extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      inviteBusy: false\n    };\n    this.inviteToProject = this.inviteToProject.bind(this);\n  }\n  async inviteToProject(item) {\n    this.setState({ inviteBusy: true });\n\n    // console.log(item);\n\n    let userId = item.id;\n    let project = this.props.project;\n    let invited = project.invited || [];\n    let position = this.props.position;\n    let crewItem = {\n      position: position,\n      id: userId\n    };\n\n    invited.push(crewItem);\n\n    project.invited = invited;\n\n    await app.updateProject({ self: this, project }).then(async res => {\n      await app.fetchInvitedCrew({ self: this, project }).then(res => {\n        this.setState({ inviteBusy: false });\n        // notification.open({\n        //   message: \"Success\",\n        //   description: \"Project Updated\"\n        // })\n      });\n    });\n\n    let link = window.location.href;\n    let projectOwner = this.props.projectOwner;\n    // console.log('person props',this.props)\n    let projectOwner_ = {\n      id: projectOwner.id,\n      picture: projectOwner.profile.picture,\n      name: projectOwner.profile.name\n    };\n\n    let config = {\n      userId: userId,\n      title: \"You have been invited to crew for a project.\"\n    };\n\n    let user = await api.fetch(\"users\", userId);\n\n    await app.inviteByUser({\n      self: this,\n      link,\n      position,\n      project,\n      projectOwner: projectOwner_,\n      user\n    });\n    await app.createNotification({\n      self: this,\n      type: \"crewInvite\",\n      project,\n      position,\n      project,\n      projectOwner: projectOwner_,\n      user\n    });\n\n    this.props.reloadProject();\n  }\n  componentDidMount() {}\n  render() {\n    const item = this.props.item;\n    return (\n      <div\n        // to={\"/user/\" + item.id}\n        onClick={() => this.props.showUserProfile(item)}\n        id=\"Person\"\n        className=\"flex flex-column w-100- flex-auto pb2 ph4 -w-100 flex-auto\"\n      >\n        <div className=\"flex flex-row-ns flex-row -w-100\">\n          <div\n            // onClick={() => this.props.toggleInnerDrawer(item)}\n            // onClick={() => this.props.toggleInnerDrawer(item)}\n            className=\"flex flex-column justify-center w-100=\"\n          >\n            <div className=\"round pa1 bg-white center\">\n              <div\n                style={{\n                  width: \"50px\",\n                  height: \"50px\",\n                  backgroundImage: item.profile.picture.length\n                    ? \"url(\" + item.profile.picture + \")\"\n                    : GeoPattern.generate(\n                        item.profile.name.first + item.profile.name.last\n                      ).toDataUrl()\n                }}\n                className=\"center pointer round  cover bg-center\"\n              ></div>\n            </div>\n          </div>\n\n          <div\n            // onClick={() => this.props.toggleInnerDrawer(item)}\n            className=\"flex flex-column justify-center w-100- flex-auto ph3\"\n          >\n            <div className=\"f4 flex flex-column items-center w-100 raleway \">\n              <span className=\"flex flex-row-ns flex-column w-100 black f3 fw7\">\n                <span className=\"flex flex-row items-center justify-start-ns justify-center black f5 fw7\">\n                  {item.profile.name.first} {item.profile.name.last}\n                </span>\n              </span>\n            </div>\n          </div>\n\n          <div\n            onClick={() => this.inviteToProject(item)}\n            className=\"flex flex-row-ns flex-column flex-auto -w-100 ph4 pv3\"\n          >\n            <div className=\"flex flex-column justify-center\">\n              <span className=\"flex flex-row items-center justify-center justify-center black-50 f6 fw5 invite-button ph3 pv2 br2\">\n                {!this.state.inviteBusy && \"Add / Invite\"}\n\n                {this.state.inviteBusy ? (\n                  <div className=\"sp sp-3balls-small ml2\"></div>\n                ) : (\n                  <Icon\n                    icon={\"plus\"}\n                    iconSize={20}\n                    className=\"ml2 black-50 f6\"\n                  />\n                )}\n              </span>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n// export default Person\n","import React from 'react';\nimport moment from \"moment\";\nimport Bio from \"../_Elements/Bio/Bio.jsx\";\n\n\nvar GeoPattern = require(\"geopattern\");\nwindow.GeoPattern = GeoPattern;\nexport default class UserDetail extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {}\n        this.userLocation = this.userLocation.bind(this);\n    }\n    userLocation() {\n      let user = this.props.user;\n      let location;\n      if (\n        user.profile.location &&\n        typeof user.profile.location.County !== \"undefined\"\n      ) {\n        location = user.profile.location.County;\n      } else if (\n        user.profile.location &&\n        typeof user.profile.location.address.county !== \"undefined\"\n      ) {\n        location = user.profile.location.address.county;\n      } else {\n        location = \"\";\n      }\n      return location;\n      // props.account.user.profile.location && props.account.user.profile.location.address.county || \"\"\n    }\n    componentDidMount() {}\n    render() {\n        const user = this.props.user;\n        return(\n            <>\n            <div\n              // to={\"/user/\" + item.id}\n              // onClick={this.toggleInnerDrawer}\n              id=\"UserDetail\"\n              className=\"flex flex-column w-100 pa0\"\n            >\n              <div className=\"pa4 flex flex-row-ns flex-column w-100\">\n                <div className=\"flex flex-column w-100=\">\n                  <div className=\"round pa1 bg-white center\">\n                    <div\n                      style={{\n                        width: \"90px\",\n                        height: \"90px\",\n                        backgroundImage: user\n                          .profile.picture.length\n                          ? \"url(\" +\n                            user.profile\n                              .picture +\n                            \")\"\n                          : GeoPattern.generate(\n                              user.profile\n                                .name.first +\n                                user.profile\n                                  .name.last\n                            ).toDataUrl()\n                      }}\n                      className=\"center pointer round  cover bg-center\"\n                    ></div>\n                  </div>\n                </div>\n\n                <div className=\"flex flex-column justify-center w-100 ph3\">\n                  <div className=\"f4 flex flex-column items-center w-100 raleway \">\n                    <span className=\"flex flex-row-ns flex-column w-100 black f3 fw6\">\n                      <span className=\"raleway flex flex-row items-center justify-start-ns justify-center black-70 f4 fw7\">\n                        {\n                          user.profile.name\n                            .first\n                        }{\" \"}\n                        {\n                          user.profile.name\n                            .last\n                        }\n                      </span>\n                    </span>\n                  </div>\n\n                  <div className=\"f4 flex flex-column items-center w-100 raleway \">\n                    <span className=\"flex flex-row-ns flex-column w-100 black f3 fw6\">\n                      <span className=\"raleway flex flex-row items-center justify-start-ns justify-center black-50 f5 fw5\">\n                        {user.email}\n                      </span>\n                    </span>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <section\n              id=\"ProfileButtons\"\n              className=\"flex flex-auto- w-100\"\n            >\n              <div className=\"flex flex-row mb2-ns- w-100 bt b--black-05 \">\n                <button\n                  title=\"View or upload CV\"\n                  id=\"CV-button\"\n                  className=\"db relative w-100 ph4 pv3 br1- bg-white black-50 hover-black pointer\"\n                >\n                  <div id=\"\" className=\"db relative w-100\">\n                    <span className=\"f5 fw6 ph3-\">\n                      Cirriculum Vitae{\" \"}\n                    </span>\n                  </div>\n                </button>\n                <button\n                  title=\"View or upload CV\"\n                  id=\"CV-button\"\n                  className=\"db relative w-100 ph4 pv3 br1- bg-white black-50 hover-black pointer\"\n                  // style={{ background: \"#e8e8ec\" }}\n                >\n                  <div id=\"\" className=\"db relative w-100\">\n                    <span className=\"f6 fw6 \">Add to Network</span>\n                  </div>\n                </button>\n                <button\n                  title=\"View or upload CV\"\n                  id=\"CV-button\"\n                  className=\"db relative w-100 ph4 pv3 br1- bg-white black-50 hover-black pointer\"\n                  // style={{ background: \"#e8e8ec\" }}\n                >\n                  <div id=\"\" className=\"db relative w-100\">\n                    <span className=\"f6 fw6 \">Send Message</span>\n                  </div>\n                </button>\n              </div>\n            </section>\n            <div className=\"flex flex-row -nsflex-column w-100 black-60 raleway flex-wrap items-center justify-start-ns justify-between pa4 bt bb b--black-05\">\n              <div className=\"flex flex-column w--100 pb1-ns pb2 mr3\">\n                <span className=\"flex-column flex f6 fw4 black-40 items-start\">\n                  <span\n                    className=\"flex \nmb3\"\n                  >\n                    Age\n                  </span>\n                  <span className=\"flex items-center justify-center f6 fw6 -ml3-ns black-50- white ph2 pv1 ba b--black-05 br1 -round bw1- bg-white-20- bg-black -ts-a tc ml2-\">\n                    {moment().diff(\n                      user.profile.dob,\n                      \"years\"\n                    )}\n                  </span>\n                </span>\n              </div>\n              <div className=\"flex flex-column w--100 pb1-ns pb2 mr3\">\n                <span className=\"flex-column flex f6 fw4 black-40 items-start\">\n                  <span\n                    className=\"flex \nmb3\"\n                  >\n                    Gender\n                  </span>\n                  <span className=\"flex items-center justify-center f6 fw6 -ml3-ns black-50- white ph2 pv1 ba b--black-05 br1 -round bw1- bg-white-20- bg-black -ts-a tc ml2-\">\n                    {(user.profile.gender &&\n                      user.profile.gender) ||\n                      \"\"}\n                  </span>\n                </span>\n              </div>\n              <div className=\"flex flex-column w--100 pb1-ns pb2 mr3\">\n                <span className=\"flex-column flex f6 fw4 black-40 items-start\">\n                  <span\n                    className=\"flex \nmb3\"\n                  >\n                    Location\n                  </span>\n                  <span className=\"flex items-center justify-center f6 fw6 -ml3-ns black-50- white ph2 pv1 ba b--black-05 br1 -round bw1- bg-white-20- bg-black -ts-a tc ml2-\">\n                    {this.userLocation()}\n                  </span>\n                </span>\n              </div>\n            </div>\n\n            <Bio\n              user={user}\n              editSkills={null}\n              editBio={null}\n              canEdit={false}\n            />\n          </>\n        )\n    }\n}\n","// @flow\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { app } from \"../../../utils/fn/Fn.js\";\nimport { message } from \"antd\";\n\nexport default class FormUserDetailProject extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      hasError: false,\n      buttonLoading: false,\n      address: null,\n      phone: null\n    };\n\n    this.address = React.createContext();\n    this.phone = React.createContext();\n\n    this.submit = this.submit.bind(this);\n  }\n\n  async submit() {\n    message.config({\n      top: \"40vh\"\n      // duration: 1000,\n      // maxCount: 3,\n    });\n    message.loading(\"Saving user..\", 0);\n\n    this.setState({\n      buttonLoading: true\n    });\n    setTimeout(async () => {\n      // this.props.submitBio()\n      let selectedUserId = this.props.user.id;\n\n      let project = this.props.project;\n\n      let selectedProdCrewMember = project.productionCrew.filter(\n        a => a.user === selectedUserId\n      )[0];\n\n      console.log(\"selectedProdCrewMember\", selectedProdCrewMember);\n\n      selectedProdCrewMember.projectSpecificDetails = {\n        address: this.address.current.value,\n        phone: this.phone.current.value\n      };\n\n      let userIndex = project.productionCrew.findIndex(\n        a => a.user === selectedUserId\n      );\n\n      project.productionCrew[userIndex] = selectedProdCrewMember;\n\n      console.log(\"updated project with production crew detail\", project);\n\n      await app.updateProject({ self: this, project }).then(response => {\n        this.setState({\n          buttonLoading: false\n        });\n        message.destroy();\n        message.success(\"User Updated\", 1000);\n        setTimeout(() => {\n          message.destroy();\n        }, 1000);\n      });\n    }, 1000);\n\n    // console.log(this.bio.current.value)\n  }\n\n  componentDidMount = () => {\n    // alert('user detail mounted')\n    console.log(\"FormBio mounted\");\n    let project = this.props.project;\n    let selectedUserId = this.props.user.id;\n\n    let selectedProdCrewMember = project.productionCrew.filter(\n      a => a.user === selectedUserId\n    )[0];\n\n    this.setState({\n      phone: selectedProdCrewMember.projectSpecificDetails.phone,\n      address: selectedProdCrewMember.projectSpecificDetails.address\n    });\n  };\n\n  render() {\n    if (this.state.hasError) {\n      return <h1>Something went wrong.</h1>;\n    }\n\n    return (\n      <div\n        className=\"FormBio-wrapper\"\n        className=\"flex flex-column w-100 h-100 bg-white\"\n      >\n        <div className=\"flex-column flex w-100 pa4 h-100-\">\n          <div className=\" flex w-100 items-center mb4\">\n            <label className=\"f5 fw6 black-20 pb3- tl mr4 w-30\">Address</label>\n            <input\n              type={\"text\"}\n              placeholder={\"Enter your address during the project\"}\n              ref={this.address}\n              defaultValue={this.state.address}\n              className=\"flex flex-column ph4 pv3 br2 -round bg-black-05- white- black-50 f4 fw5 bs-a- w-100 bg-white ba b--black-05\"\n            />\n          </div>\n          <div className=\" flex w-100 items-center mb4\">\n            <label className=\"f5 fw6 black-20 pb3- tl mr4 w-30\">\n              Contact Number\n            </label>\n            <input\n              type={\"text\"}\n              placeholder={\"Enter your contact number\"}\n              ref={this.phone}\n              defaultValue={this.state.phone}\n              className=\"flex flex-column ph4 pv3 br2 -round bg-black-05- white- black-50 f4 fw5 bs-a- w-100 bg-white ba b--black-05\"\n            />\n          </div>\n        </div>\n\n        <div className=\"form-row flex w-100 bg-white- ph4 pv4\">\n          <div\n            onClick={this.submit}\n            className=\"bg-black-20 round tc w-100- pointer flex button flex-column ph5 pv2 ba- -b--black-10 f4 fw6 white -black-50\"\n          >\n            {this.state.buttonLoading && (\n              <div className=\"flex flex-column pv2 items-center justify-center\">\n                {/* <Spinner size={25} /> */}\n                <div className=\"sp sp-3balls\"></div>\n              </div>\n            )}\n\n            {!this.state.buttonLoading && <div>Save</div>}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\n// export default FormBio;\n","import React from 'react';\nimport moment from \"moment\";\nimport FormUserDetailProject from \"../FormUserDetailProject/index.js\";\n\n\nvar GeoPattern = require(\"geopattern\");\nwindow.GeoPattern = GeoPattern;\n\nexport default class UserDetailProject extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {}\n        this.userLocation = this.userLocation.bind(this);\n    }\n    userLocation() {\n      let user = this.props.user;\n      let location;\n      if (\n        user.profile.location &&\n        typeof user.profile.location.County !== \"undefined\"\n      ) {\n        location = user.profile.location.County;\n      } else if (\n        user.profile.location &&\n        typeof user.profile.location.address.county !== \"undefined\"\n      ) {\n        location = user.profile.location.address.county;\n      } else {\n        location = \"\";\n      }\n      return location;\n      // props.account.user.profile.location && props.account.user.profile.location.address.county || \"\"\n    }\n    componentDidMount() {}\n    render() {\n        const user = this.props.user;\n        return(\n            <>           \n     \n            <FormUserDetailProject project={this.props.project} user={this.props.user} />\n          </>\n        )\n    }\n}\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { DatePicker, Drawer, Popconfirm, message, Checkbox } from \"antd\";\nimport moment from \"moment\";\nimport AccountContext from \"../../../utils/context/AccountContext.js\";\n// import Fn from '../../../utils/fn/Fn.js';\nimport LocationSearchBar from \"../../elements/display/forms/LocationSearchBar.js\";\nimport PageTitle from \"../../elements/layout/PageTitle_B.js\";\nimport FormCrew from \"../CrewFinder/CrewFinder_People.js\";\n\nimport { Icon, Dialog, Spinner } from \"@blueprintjs/core\";\n\nimport { TH_LIST } from \"@blueprintjs/icons/lib/esm/generated/iconNames\";\nimport FormInvite from \"../../elements/forms/Invite.js\";\nimport constants from \"../../../utils/constants.js\";\nimport { Fn, app, api } from \"../../../utils/fn/Fn.js\";\nimport Loading from \"../../elements/Loading.js\";\n\nimport Bio from \"../_Elements/Bio/Bio.jsx\";\nimport Network from \"../_Elements/Network/Network.jsx\";\nimport RecentWork from \"../RecentWork/index.js\";\nimport Transition from \"../../Layouts/Transition.js\";\nimport Person from \"../Person\";\nimport UserList from \"../UserList\";\nimport UserDetail from \"./UserDetail.js\";\nimport UserDetailProject from \"./UserDetailProject.js\";\n\nvar GeoPattern = require(\"geopattern\");\nwindow.GeoPattern = GeoPattern;\n\n// import { motion, AnimatePresence } from 'framer-motion'\n// // import { Motion, Frame, Scroll, useCycle } from \"framer\"\n\n// const spring = {\n//   type: \"spring\",\n//   damping: 20,\n//   stiffness: 300\n// };\n\n// const container = {\n//   hidden: { opacity: 0 },\n//   show: {\n//     opacity: 1,\n//     transition: {\n//       // delayChildren: 0.5,\n//       staggerChildren: 0.5,\n//       // delay: 1,\n//     x: { type: \"spring\", stiffness: 100 },\n//     default: { duration: 2 },\n//     }\n\n//   }\n// }\n\n// const item = {\n//   hidden: { opacity: 0 },\n//   show: { opacity: 1 }\n// }\n\nclass People extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hasError: false,\n      project: this.props.project,\n      drawerOpen: false,\n      innerDrawerOpen: false,\n      ready: false,\n      buttonsReady: true,\n      view: null,\n      views: [],\n      activeButton: {},\n      buttons: [],\n      projectType: this.props.project.type,\n      startDate: this.props.project.start_date,\n      endDate: this.props.project.end_date,\n      location: this.props.project.location,\n      loading: false,\n      x: false,\n      lightboxActive: false,\n      productionCrew: [],\n      crew: [],\n      crew_: [],\n      crewReady: false,\n      productionCrewReady: false,\n      searchLoading: false,\n      activeCrewMember: null,\n      inviteBusy: false,\n      isDeleting: [],\n      isDeletingStart: [],\n      del: [],\n      deleteConfirmation: [],\n      drawerType: \"search\",\n      items: [],\n      crewProfileType: \"production\",\n      profileDrawerType: \"profile\",\n      permissionTypes: [],\n      bulkSearch: false,\n      isOpen: false\n    };\n\n    this.toggleDrawer = this.toggleDrawer.bind(this);\n    this.toggleInnerDrawer = this.toggleInnerDrawer.bind(this);\n    this.closeInnerDrawer = this.closeInnerDrawer.bind(this);\n\n    this.openFilePanel = this.openFilePanel.bind(this);\n    this.setView = this.setView.bind(this);\n    this.setButtons = this.setButtons.bind(this);\n    this.handleStartDateChange = this.handleStartDateChange.bind(this);\n    this.handleEndDateChange = this.handleEndDateChange.bind(this);\n    this.handleProjectTypeChange = this.handleProjectTypeChange.bind(this);\n    this.updateProject = this.updateProject.bind(this);\n    this.updateProjectLocation = this.updateProjectLocation.bind(this);\n    this.openSearchDialog = this.openSearchDialog.bind(this);\n    this.closeDialog = this.closeDialog.bind(this);\n    this.searchProjects = this.searchProjects.bind(this);\n    this.userAvatar = this.userAvatar.bind(this);\n    this.search = this.search.bind(this);\n    this.bulkSearch = this.bulkSearch.bind(this);\n    this.inviteByEmail = this.inviteByEmail.bind(this);\n    this.remove = this.remove.bind(this);\n    this.confirmDelete = this.confirmDelete.bind(this);\n    this.reloadProject = this.reloadProject.bind(this);\n    this.start = this.start.bind(this);\n    this.userLocation = this.userLocation.bind(this);\n    this.setPanelView = this.setPanelView.bind(this);\n    this.setPermissionTypes = this.setPermissionTypes.bind(this);\n    this.setPermission = this.setPermission.bind(this);\n    this.showUserProfile = this.showUserProfile.bind(this);\n    this.addProductionCrewMember = this.addProductionCrewMember.bind(this);\n    // this.inviteToProject = this.inviteToProject.bind(this)\n    // this.toggleLightbox = this.toggleLightbox.bind(this)\n\n    this.projectTitle = React.createRef();\n    this.projectDescription = React.createRef();\n    this.inviteByEmailAddress = React.createRef();\n    window.self = this;\n  }\n  async addProductionCrewMember(user) {\n    await app\n      .addProductionCrewMember({\n        self: this,\n        userId: user.id,\n        project: this.props.project\n      })\n      .then(response => {\n        console.log(response);\n        if (response && response.status && response.status === \"error\") {\n          this.setState({ isOpen: false });\n        } else {\n          this.setState({ isOpen: false });\n          this.reloadProject();\n        }\n      });\n  }\n  showUserProfile(item) {\n    console.log(\"showUserProfile\", item);\n    this.setState({\n      innerDrawerOpen: true,\n      activeCrewMember: item\n    });\n  }\n  async bulkSearch(__) {\n    console.log(\"bulkSearch\", __);\n\n    const { positions } = __;\n\n    // this.toggleDrawer();\n    this.setState({\n      // drawerType: type,\n      drawerOpen: !this.state.drawerOpen\n      // activeCrewMember: item\n    });\n\n    this.setState({\n      searchLoading: true,\n      drawerType: \"search\",\n      bulkSearch: true\n    });\n\n    let a = await Fn.fetchUsers({ self: this, positions });\n\n    console.log(\"searched crew\", a, this.state.crew_);\n  }\n  async search(data) {\n    console.log(\"search\", data);\n\n    const { index, position, type } = data;\n\n    this.toggleDrawer({ item: index, type });\n\n    this.setState({\n      searchLoading: true,\n      drawerType: type\n    });\n\n    let positions = [position];\n\n    let a = await Fn.fetchUsers({ self: this, positions });\n\n    console.log(\"searched crew\", a, this.state.crew);\n  }\n  setPermission(type) {\n    // console.log('setPermission',type)\n\n    let activeUserId = this.state.activeCrewMember.id;\n    let project = this.state.project;\n    let prodCrew = project.productionCrew;\n    let prodCrewItem = prodCrew.filter(a => a.user === activeUserId)[0];\n    let permissions = new Set(prodCrewItem.permissions);\n\n    if (permissions.has(type.slug)) {\n      console.log(\"permission exists, deleting\");\n      permissions.delete(type.slug);\n    } else {\n      console.log(\"permission does not exist, inserting\");\n      permissions.add(type.slug);\n    }\n\n    prodCrewItem.permissions = Array.from(permissions);\n\n    let crewItemIndex = prodCrew.indexOf(prodCrewItem);\n\n    prodCrew[crewItemIndex] = prodCrewItem;\n    project.productionCrew = prodCrew;\n\n    this.setState({\n      project: project\n    });\n\n    app.updateProject({ self: this, project: project });\n  }\n  setPermissionTypes() {\n    let permissionTypes = [\n      {\n        title: \"Settings\",\n        slug: \"projectsettings\"\n      },\n      {\n        title: \"Files\",\n        slug: \"projectfiles\"\n      },\n      {\n        title: \"People\",\n        slug: \"projectpeople\"\n      },\n      {\n        title: \"Production Crew\",\n        slug: \"projectprodcrew\"\n      },\n      {\n        title: \"Production Crew Permissions\",\n        slug: \"projectprodcrewpermissions\"\n      },\n      {\n        title: \"Checklists\",\n        slug: \"projectchecklists\"\n      },\n      {\n        title: \"Rate Calculator\",\n        slug: \"projectratecalculator\"\n      }\n    ];\n    this.setState({\n      permissionTypes: permissionTypes\n    });\n    // let user = this.state.activeCrewMember;\n\n    // user.permissions =\n  }\n  setPanelView(type) {\n    this.setState({\n      profileDrawerType: type\n    });\n  }\n  userLocation() {\n    let user = this.state.activeCrewMember;\n    let location;\n    if (\n      user.profile.location &&\n      typeof user.profile.location.County !== \"undefined\"\n    ) {\n      location = user.profile.location.County;\n    } else if (\n      user.profile.location &&\n      typeof user.profile.location.address.county !== \"undefined\"\n    ) {\n      location = user.profile.location.address.county;\n    } else {\n      location = \"\";\n    }\n    return location;\n    // props.account.user.profile.location && props.account.user.profile.location.address.county || \"\"\n  }\n  // toggleLightbox() {\n\n  //   alert()\n\n  //   this.setState({\n  //     lightboxActive: !this.state.lightboxActive\n  //   })\n  // }\n  //   async inviteToProject(item) {\n  //     this.setState({ inviteBusy: true })\n  //     console.log(item);\n  // let userId = item.id;\n  //     let project = this.props.project;\n  //     let crew = project.crew;\n  //     let position = this.state.crew_[0].position;\n  //     let crewItem = {\n  //       position: position,\n  //       id: userId\n  //     }\n  //     // let itemIndex = crew.findIndex(a => a.id === userId);\n  //     // crew.splice(itemIndex, 1);\n  //     crew.push(crewItem)\n  //     // this.setState({\n  //     //   crew: crew\n  //     // })\n\n  //     project.crew = crew;\n\n  //     await app.updateProject({ self: this, project }).then( async res => {\n  //       await app.fetchCrew({ self: this, project })\n  //       setTimeout(() => {\n\n  //       this.setState({ inviteBusy: false })\n  //       },1000)\n  //     })\n\n  //   }\n  async reloadProject() {\n    this.setState({ ready: false });\n    console.log(\"reloadProject\");\n    let projectId = this.props.project.id;\n    let project = await api.fetch(\"projects\", projectId).then(project => {\n      if (project) {\n        this.setState({\n          project: project\n          // ready: true\n        });\n        this.props.updateProjectState(project);\n        Fn.set(\"activeProject\", project);\n      }\n    });\n    this.start();\n    // this.props.reloadProject()\n  }\n  confirmDelete({ item, index }) {\n    let deleteConfirmation = this.state.deleteConfirmation;\n    deleteConfirmation[index] = true;\n\n    this.setState({\n      deleteConfirmation: deleteConfirmation\n    });\n  }\n  async remove({ e, item, index }) {\n    e.stopPropagation();\n    console.log('activeView', this.state.view)\n    let isDeleting = this.state.isDeleting;\n    let isDeletingStart = this.state.isDeletingStart;\n\n    isDeletingStart[index] = true;\n\n    this.setState({\n      isDeletingStart: isDeletingStart\n    });\n\n    setTimeout(async () => {\n      isDeleting[index] = true;\n      isDeletingStart[index] = false;\n      this.setState({\n        isDeleting: isDeleting,\n        isDeletingStart: isDeletingStart\n      });\n\n      let userId = item.id;\n      let project = this.props.project;\n\n      if(this.state.view === \"production\") {\n\n        let prodCrew = project.productionCrew;\n        let crewRoster = project.crewRoster;\n\n        // let crew = project.crew;\n  \n        let itemIndex = prodCrew.findIndex(a => a.id === userId);\n        let rosterItemIndex = crewRoster.findIndex( a => a.user === userId)\n        // let invitedItemIndex = invited.findIndex(a => a.id === userId);\n  \n        prodCrew.splice(itemIndex, 1);\n        crewRoster.splice(rosterItemIndex, 1)\n        // invited.splice(i/nvitedItemIndex, 1);\n  \n        // console.log(\"crew\", crew);\n        // console.log(\"crew member to delete\", userId);\n        // console.log(\"index of crew member to delete\", invitedItemIndex);\n        // console.log(\"update crew list after delete\", crew);\n  \n        project.productionCrew = prodCrew;\n        project.crewRoster = crewRoster;\n        // project.invited = invited;\n  \n        await app.updateProject({ self: this, project }).then(async res => {\n          await app.fetchInvitedCrew({ self: this, project });\n          this.reloadProject();\n        });\n      }\n      if(this.state.view === \"crew\") {\n        let invited = project.invited;\n      let crew = project.crew;\n\n      let crewItemIndex = crew.findIndex(a => a.id === userId);\n      let invitedItemIndex = invited.findIndex(a => a.id === userId);\n\n      crew.splice(crewItemIndex, 1);\n      invited.splice(invitedItemIndex, 1);\n\n      console.log(\"crew\", crew);\n      console.log(\"crew member to delete\", userId);\n      console.log(\"index of crew member to delete\", invitedItemIndex);\n      console.log(\"update crew list after delete\", crew);\n\n      project.crew = crew;\n      project.invited = invited;\n\n      await app.updateProject({ self: this, project }).then(async res => {\n        await app.fetchInvitedCrew({ self: this, project });\n        this.reloadProject();\n      });\n      }\n      \n    }, 1000);\n  }\n  async inviteByEmail() {\n    this.setState({ inviteBusy: true });\n    let projectOwner = this.props.projectOwner;\n    let email = this.inviteByEmailAddress.current.value;\n    let position = this.state.crew_[0].position;\n    let link = window.location.href + \"?newInvite=true&referrer=email\";\n    await app.inviteByEmail({\n      self: this,\n      link,\n      position,\n      project: this.props.project,\n      projectOwner,\n      email\n    });\n  }\n  closeInnerDrawer() {\n    this.setState({\n      innerDrawerOpen: false\n    });\n  }\n  toggleInnerDrawer(item) {\n    this.setState({\n      innerDrawerOpen: true,\n      activeCrewMember: item\n    });\n    // this.state.activeCrewMember\n  }\n  toggleDrawer({ item, type }) {\n    console.log(item);\n    if (type === \"crew\") {\n      this.setState({\n        profileDrawerType: \"profile\"\n      });\n    }\n    this.setState({\n      drawerType: type,\n      drawerOpen: !this.state.drawerOpen,\n      activeCrewMember: item\n    });\n  }\n\n  userAvatar(item) {\n    let avatar =\n      typeof item && item.profile && item.profile.picture !== \"undefined\"\n        ? item.profile.picture\n        : constants.placeholderImage;\n    return avatar;\n  }\n  closeDialog() {\n    this.setState({\n      isOpen: false\n    });\n  }\n  searchProjects(data) {\n    const { location, projectType, startDate, endDate } = data;\n\n    this.setState({\n      ready: false\n    });\n\n    console.log(\"search config \", data);\n\n    console.log(this.state.projects);\n\n    let location_;\n\n    if (typeof data.location.County !== \"undefined\") {\n      location_ = data.location.County.toLowerCase();\n    } else {\n      location_ = data.location.address.county.toLowerCase();\n    }\n\n    let projects = this.state.projects;\n\n    console.log(\"location\", location_);\n\n    let filtered = projects.filter(\n      p => p.location.toLowerCase() === location_ && p.type === projectType\n    );\n\n    let filteredDateRange = filtered.filter(p =>\n      moment(p.start_date).isBetween(data.startDate, data.endDate)\n    );\n\n    console.log(\"filtered\", filtered);\n    console.log(\"filteredDateRange\", filteredDateRange);\n\n    this.setState({\n      projects: filteredDateRange,\n      ready: true,\n      isOpen: false\n    });\n  }\n  openSearchDialog() {\n    this.setState({ isOpen: true });\n  }\n  updateProjectLocation(item) {\n    console.log(\"updateProjectLocation\", item);\n    this.setState({\n      location: item\n    });\n  }\n  setButtons() {\n    const buttons = [\n      {\n        title: \"Production\",\n        function: () => this.setView({ filter: \"production\", button: 0 })\n      },\n\n      {\n        title: \"Crew\",\n        function: () => this.setView({ filter: \"crew\", button: 1 })\n      }\n    ];\n\n    const views = [\"production\", \"crew\"];\n\n    this.setState({\n      buttons: buttons,\n      // activeButton: buttons[0],\n      views: views\n      // view: views[0]\n    });\n\n    if (JSON.parse(localStorage.getItem(\"projectPeopleActiveView\")) !== null) {\n      this.setState({\n        view: JSON.parse(localStorage.getItem(\"projectPeopleActiveView\"))\n      });\n    } else {\n      this.setState({\n        view: views[0]\n      });\n    }\n    if (\n      JSON.parse(localStorage.getItem(\"projectPeopleActiveButton\")) !== null\n    ) {\n      this.setState({\n        activeButton: JSON.parse(\n          localStorage.getItem(\"projectPeopleActiveButton\")\n        )\n      });\n    } else {\n      this.setState({\n        activeButton: buttons[0]\n      });\n    }\n  }\n  setView(config) {\n    const { view, button } = config;\n    this.setState({\n      ready: false\n    });\n    this.setState({\n      view: view,\n      activeButton: button\n    });\n    setTimeout(() => {\n      this.setState({\n        ready: true\n      });\n    }, 1000);\n\n    Fn.store({ label: \"projectPeopleActiveView\", value: view });\n    Fn.store({ label: \"projectPeopleActiveButton\", value: button });\n\n    view === \"discussion\" &&\n      setTimeout(\n        () =>\n          document.querySelector(\"body\").scroll({\n            top: 130,\n            left: 0,\n            behavior: \"smooth\"\n          }),\n        1000\n      );\n  }\n  openFilePanel(file) {\n    this.setState({\n      activeFile: file\n    });\n    this.toggleDrawer();\n  }\n\n  handleProjectTypeChange = type => {\n    this.setState({\n      projectType: type\n    });\n  };\n  handleStartDateChange = e => {\n    window.log.warn(\"start date\", e.toString());\n    this.setState({\n      startDate: e.toString()\n    });\n  };\n  handleEndDateChange = e => {\n    window.log.warn(\"end date\", e.toString());\n    this.setState({\n      endDate: e.toString()\n    });\n  };\n  updateProject = async () => {\n    message.config({\n      top: \"40vh\"\n      // duration: 1000,\n      // maxCount: 3,\n    });\n    message.loading(\"Saving project..\", 0);\n    // Dismiss manually and asynchronously\n    // setTimeout(hide, 2500);\n\n    this.setState({\n      loading: true,\n      x: TextTrackCueList\n    });\n    const project = this.props.project;\n\n    project.start_date = this.state.startDate;\n    project.end_date = this.state.endDate;\n    project.title = this.projectTitle.current.value;\n    project.description = this.projectDescription.current.value;\n    project.location = this.state.location;\n    project.updatedAt = moment(new Date()).toString();\n\n    console.log(\"Project update data \", project);\n\n    let url = Fn.api(\"projects\") + project.id;\n\n    let config = {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(project)\n    };\n\n    await fetch(url, config)\n      .then(res => {\n        return res.json();\n      })\n      .then(res => {\n        console.log(res);\n\n        this.setState({ project: res });\n\n        Fn.store({ label: \"activeProject\", value: res });\n\n        setTimeout(() => {\n          this.setState({\n            loading: false,\n            x: false\n          });\n\n          document.querySelector(\"body\").scroll({\n            top: 0,\n            left: 0,\n            behavior: \"smooth\"\n          });\n          message.destroy();\n          message.success(\"Project Updated\", 1000);\n          setTimeout(() => {\n            message.destroy();\n          }, 1000);\n        }, 1000);\n        // this.props.updateProject({ project: res })\n      });\n  };\n  async start() {\n    let connectionIds = Fn.get('account').user.profile.connections;\n    await app.fetchConnections({ self: this, connections: connectionIds });\n    await app\n      .fetchProductionCrew({ self: this, project: this.props.project })\n      .then(productionCrew => {\n        this.setState({\n          productionCrewReady: true,\n          productionCrew: productionCrew\n        });\n      });\n\n    await app\n      // .fetchCrew({ self: this, project: this.props.project })\n      .fetchInvitedCrew({ self: this, project: this.props.project })\n      .then(res => {\n        let crew = this.props.project.crew;\n\n        let invited = res;\n\n        app.checkConfirmed({ invited, crew }).then(res => {\n          let sorted = res\n            .sort(function(a, b) {\n              return a.isConfirmed - b.isConfirmed;\n            })\n            .reverse();\n\n          this.setState({\n            invited: sorted,\n            items: sorted,\n            crewReady: true\n          });\n        });\n      });\n\n    // setTimeout(() => {\n    //   this.setState({\n    //     view: this.state.views[0],\n    //     activeButton: this.state.buttons[0]\n    //   });\n    // }, 1000);\n  }\n  componentDidMount = async () => {\n    this.start();\n    this.setPermissionTypes();\n    this.setButtons();\n\n    // if (localStorage.projectSettingsView !== null) {\n    //   let view = Fn.get(\"projectSettingsView\");\n    //   this.setState({\n    //     view: view\n    //     // activeButton: activeButton\n    //   });\n    // } else {\n    //   this.setState({\n    //     view: \"production\"\n    //   });\n    // }\n    // if (localStorage.projectSettingsActiveButton !== null) {\n    //   let activeButton = Fn.get(\"projectSettingsActiveButton\");\n    //   this.setState({\n    //     // view: view,\n    //     activeButton: activeButton\n    //   });\n    // } else {\n    //   this.setState({\n    //     view: \"production\"\n    //   });\n    // }\n  };\n\n  static getDerivedStateFromError(error) {\n    // getDerivedStateFromError -> Update state so the next render will show the fallback UI.\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, info) {\n    // You can also log the error to an error reporting service\n  }\n\n  getDerivedStateFromProps = (nextProps, prevState) => {};\n\n  getSnapshotBeforeUpdate = (prevProps, prevState) => {};\n\n  componentDidUpdate = () => {};\n\n  componentWillUnmount = () => {};\n\n  render() {\n    if (this.state.hasError) {\n      return <h1>Something went wrong.</h1>;\n    }\n\n    const profileDrawers = [\"production\", \"crew\"];\n\n    return (\n      <>\n        <section id=\"People\" className=\"flex flex-column w-100 pb4 pt0\">\n          <div className=\"flex flex-row pb3\">\n            <PageTitle\n              title={\"People\"}\n              docs={this.state.files}\n              ready={this.state.ready}\n            />\n\n            {this.state.view === \"production\" && (\n              <div\n                id=\"SearchInvite\"\n                className=\"w-100 flex flex-row items-end justify-start justify-end-ns mb2\"\n              >\n                <button\n                  onClick={this.openSearchDialog}\n                  className={\n                    (Fn.get(\"isMobile\") ? \" w-100 mt3 \" : \"  \") +\n                    \" br1- round bs-b bg-black-20 ph4 pv2 pointer bn relative w-100-    \"\n                  }\n                >\n                  <span className=\"f5 fw6 white pv0 flex items-center justify-center pr2\">\n                    {this.state.buttonLoading ? (\n                      <Icon\n                        icon=\"loading\"\n                        className={\" absolute right-0 f4 black-60 mr2\"}\n                      />\n                    ) : (\n                      <Icon\n                        icon={\"search\"}\n                        iconSize={12}\n                        className={\" f4 black-60- white  absolute right-0 mr3\"}\n                      />\n                    )}{\" \"}\n                    Search / Invite\n                  </span>\n                </button>\n              </div>\n            )}\n          </div>\n\n          {this.state.buttonsReady && (\n            <section id=\"ToolbarButtons\" className=\"flex flex-column mb3 \">\n              <div className=\"flex flex-row justify-between mb3\">\n                <div className=\"flex flex-row round\">\n                  {this.state.buttons.map((button, index) => (\n                    <button\n                      title={button.title}\n                      onClick={() =>\n                        this.setView({\n                          view: this.state.views[index],\n                          button: button\n                        })\n                      }\n                      id={button.title}\n                      className={\n                        (index > 0 && \" bl b--black-05 \") +\n                        (this.state.activeButton.title === button.title\n                          ? \" bg-white-60 \"\n                          : \" bg-white \") +\n                        \" flex flex-column pa0 mr3- pointer justify-center flex-auto\"\n                      }\n                    >\n                      <div\n                        id=\"\"\n                        className=\"flex flex-row ph0 pv0 items-center justify-center\"\n                      >\n                        <span className=\"f5 fw6 black-40 ph4 pv2\">\n                          {button.title}\n                        </span>\n                      </div>\n                    </button>\n                  ))}\n                </div>\n              </div>\n            </section>\n          )}\n\n          <div className=\"w-100-ns w-100 flex flex-row flex-wrap justify-between br3- -overflow-hidden\">\n            {this.state.x ? (\n              <Icon\n                icon=\"loading\"\n                iconSize=\"15\"\n                className=\"absolute right-0 f4 black-60 mr3\"\n              />\n            ) : (\n              <Icon\n                icon=\"swap-right\"\n                iconSize=\"15\"\n                className=\"f4 black-60 -white  absolute right-0 mr3\"\n              />\n            )}\n\n            {this.context.isAuthenticated && this.state.view === \"production\" && (\n              <>\n                <div\n                  id=\"ProductionCrewList\"\n                  className=\"flex flex-column mb3 w-100\"\n                >\n                  <div className=\"flex flex-row f5 fw5 black-50 pb4 items-center\">\n                    Assigned Production Crew{\" \"}\n                    <div\n                      style={{\n                        color: \"white\",\n                        fontWeight: \"bold\",\n                        marginLeft: \"1rem\",\n                        background: \"#c4c4c7\"\n                      }}\n                      className={\"  count-badge- f7 pv1 ph2 br1 -bg-white \"}\n                    >\n                      <span className={\"bg-white-\"}>\n                        {(this.state.ready &&\n                          this.state.productionCrew.length) ||\n                          0}\n                      </span>\n                    </div>\n                  </div>\n\n                  {/* <UserList \n                  crew={this.state.productionCrew}\n                  userAvatar={this.userAvatar}\n                  confirmDelete={this.confirmDelete}\n                  remove={this.remove}\n                  state={this.state}\n                  ready={this.state.ready}\n                  toggleDrawer={this.toggleDrawer}\n                  /> */}\n                  {!this.state.ready && (\n                    <div className=\"flex flex-column pv4 items-start items-center justify-center w-100\">\n                      {/* <Spinner size={25} /> */}\n                      <div className=\"sp sp-3balls\"></div>\n                    </div>\n                  )}\n\n                  {this.state.productionCrewReady && (\n                    <UserList\n                      // crew={this.state.productionCrew}\n                      items={this.state.productionCrew}\n                      invited={this.props.invited}\n                      userAvatar={this.userAvatar}\n                      confirmDelete={this.confirmDelete}\n                      remove={this.remove}\n                      state={this.state}\n                      ready={this.state.ready}\n                      toggleDrawer={this.toggleDrawer}\n                      type={\"production\"}\n                      columns={2}\n                    />\n                  )}\n\n                  {/* <div className=\"flex flex-column mt0 w-100\" id=\"\">\n                    {this.state.ready && this.state.productionCrew.map((item, index) => (\n                      <Link\n                        to={\"/user/\" + item.id}\n                        id=\"ProjectOwner\"\n                        className=\"flex flex-column w-100 pb2\"\n                      >\n                        <div className=\"flex flex-row-ns flex-column w-100\">\n                          <div className=\"flex flex-column w-100=\">\n                            <div className=\"round pa1 bg-white center\">\n                              <div\n                                style={{\n                                  width: \"50px\",\n                                  height: \"50px\",\n                                  backgroundImage:\n                                    \"url(\" + this.userAvatar(item) + \")\"\n                                }}\n                                className=\"center pointer round  cover bg-center\"\n                              ></div>\n                            </div>\n                          </div>\n\n                          <div className=\"flex flex-column justify-center w-100 ph4\">\n                            <div className=\"f4 flex flex-column items-center w-100 raleway \">\n                              <span className=\"flex flex-row-ns flex-column w-100 black f3 fw6\">\n                                <span className=\"flex flex-row items-center justify-start-ns justify-center black-70 f5 fw6\">\n                                  {item.profile.name.first}{\" \"}\n                                  {item.profile.name.last}\n                                </span>\n                              </span>\n                            </div>\n                          </div>\n                        </div>\n                      </Link>\n                    ))}\n                  </div> */}\n                </div>\n\n                <div className=\"form-row flex flex-column pt4 w-100\">\n                  <div className=\"form-row flex flex-column  pa3 br4 ba b--black-05 w-100\">\n                    <div className=\"form-row flex flex-row  w-100\">\n                      <button\n                        onClick={this.addSkillInput}\n                        className=\"pointer bn br2 bg-black-05 hover-bg-black-10 f5 fw6 black-50 pv4 ph3 w-100\"\n                      >\n                        Add +\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </>\n            )}\n            {this.context.isAuthenticated && this.state.view === \"crew\" && (\n              <>\n                <div id=\"CrewList\" className=\"flex flex-column mb3 w-100\">\n                  <div className=\"flex flex-row f5 fw5 black-50 pb4 items-center\">\n                    Invited Crew{\" \"}\n                    <div\n                      style={{\n                        color: \"white\",\n                        fontWeight: \"bold\",\n                        marginLeft: \"1rem\",\n                        background: \"#c4c4c7\"\n                      }}\n                      className={\"  count-badge- f7 pv1 ph2 br1 -bg-white \"}\n                    >\n                      <span className={\"bg-white-\"}>\n                        {(this.state.crewReady && this.state.crew.length) || 0}\n                      </span>\n                    </div>\n                  </div>\n                  {!this.state.ready && (\n                    <div className=\"flex flex-column pv4 ph3 items-center justify-center w-100\">\n                      {/* <Spinner size={25} /> */}\n                      <div className=\"sp sp-3balls\"></div>\n                    </div>\n                  )}\n\n                  {this.state.crewReady && (\n                    <UserList\n                      crew={this.state.crew}\n                      items={this.state.items}\n                      invited={this.props.invited}\n                      userAvatar={this.userAvatar}\n                      confirmDelete={this.confirmDelete}\n                      remove={this.remove}\n                      state={this.state}\n                      ready={this.state.ready}\n                      toggleDrawer={this.toggleDrawer}\n                      type={\"crew\"}\n                      columns={2}\n                    />\n                  )}\n                </div>\n              </>\n            )}\n\n            {this.context.isAuthenticated && this.state.view === \"crew\" && (\n              <div\n                id=\"SettingsForm_Crew\"\n                className=\"flex flex-column mb3 w-100\"\n              >\n                <div className=\"flex flex-column w-100 pt4\">\n                  <div className=\"flex flex-column f4 fw7 black pb2\">\n                    Role List\n                  </div>\n                  <div className=\"flex flex-column f5 fw5 black-50\">\n                    Please select a list of crew roles below\n                  </div>\n                </div>\n                <FormCrew\n                  project={this.props.project}\n                  search={this.search}\n                  bulkSearch={this.bulkSearch}\n                />\n              </div>\n            )}\n          </div>\n        </section>\n\n        <Dialog\n          className={\"bp3-light\"}\n          // icon=\"info-sign\"\n          onClose={this.closeDialog}\n          title={this.state.dialogTitle}\n          {...this.state}\n        >\n          <FormInvite\n            inviteBusy={this.state.inviteBusy}\n            inviteByEmail={this.inviteByEmail}\n            project={this.props.project}\n            projectOwner={this.props.projectOwner}\n            productionCrew={this.state.productionCrew}\n            addProductionCrewMember={this.addProductionCrewMember}\n          />\n        </Dialog>\n\n        <Drawer\n          title={\"Crew Search\"}\n          closable={true}\n          onClose={this.toggleDrawer}\n          visible={this.state.drawerOpen}\n          width={\"60vw\"}\n        >\n          <Drawer\n            title={\"Crew Search\"}\n            closable={true}\n            onClose={this.closeInnerDrawer}\n            visible={this.state.innerDrawerOpen}\n            width={\"40vw\"}\n          >\n            {this.state.innerDrawerOpen && (\n              <UserDetail user={this.state.activeCrewMember} />\n            )}\n          </Drawer>\n          <>\n            {this.state.drawerOpen && (\n              <div className=\"pointer flex flex-column justify-end items-start pa3- bg-white h-100- \">\n                {profileDrawers.includes(this.state.drawerType) && (\n                  <>\n                    <>\n                      {this.state.drawerType === \"production\" && (\n                        <div className=\"flex flex-row overflow-hidden w-100\">\n                          <button\n                            onClick={() => this.setPanelView(\"profile\")}\n                            title=\"Profile\"\n                            id=\"Profile\"\n                            className={\n                              (this.state.profileDrawerType === \"profile\"\n                                ? \" bg-black-05 black-50 \"\n                                : \" bg-black-10 black-30 \") +\n                              \"   flex flex-column pa0 mr3- pointer justify-center items-center flex-auto\"\n                            }\n                          >\n                            <div\n                              id=\"\"\n                              className=\"flex flex-row ph0 pv0 items-center justify-center\"\n                            >\n                              <span className=\"f5 fw6 black-40- -white ph3 pv4 w-100 tc\">\n                                Profile\n                              </span>\n                            </div>\n                          </button>\n                          <button\n                            onClick={() => this.setPanelView(\"permissions\")}\n                            title=\"Permissions\"\n                            id=\"Permissions\"\n                            className={\n                              (this.state.profileDrawerType === \"permissions\"\n                                ? \" bg-black-05 black-50 \"\n                                : \" bg-black-10 black-30 \") +\n                              \"  flex flex-column pa0 mr3- pointer justify-center items-center flex-auto\"\n                            }\n                          >\n                            <div\n                              id=\"\"\n                              className=\"flex flex-row ph0 pv0 items-center justify-center\"\n                            >\n                              <span className=\"f5 fw6 black-40- white- ph3 pv4 w-100 tc\">\n                                Permissions\n                              </span>\n                            </div>\n                          </button>\n                          <button\n                            onClick={() => this.setPanelView(\"detail\")}\n                            title=\"Detail\"\n                            id=\"Detail\"\n                            className={\n                              (this.state.profileDrawerType === \"detail\"\n                                ? \" bg-black-05 black-50 \"\n                                : \" bg-black-10 black-30 \") +\n                              \"  flex flex-column pa0 mr3- pointer justify-center items-center flex-auto\"\n                            }\n                          >\n                            <div\n                              id=\"\"\n                              className=\"flex flex-row ph0 pv0 items-center justify-center\"\n                            >\n                              <span className=\"f5 fw6 black-40- white- ph3 pv4 w-100 tc\">\n                                Detail\n                              </span>\n                            </div>\n                          </button>\n                        </div>\n                      )}\n                    </>\n                    {this.state.profileDrawerType === \"permissions\" && (\n                      <div\n                        id=\"Permissions\"\n                        className=\"raleway flex flex-column pa5 w-100\"\n                      >\n                        <div className=\"flex flex-column mt0 w-100\" id=\"\">\n                          <div className=\"form-row flex flex-column\">\n                            <div className=\"form-row flex flex-row items-center\">\n                              <span className=\"f5 fw4 black-50 pb3\">\n                                Set user permissions\n                              </span>\n                            </div>\n                            <div className=\"form-row flex flex-row items-center\">\n                              <span className=\"f4 fw6 black-80 pb3\">\n                                User can edit\n                              </span>\n                            </div>\n\n                            <div className=\"form-row flex flex-column\">\n                              {this.state.permissionTypes.map((item, index) => (\n                                <div className=\"form-row flex flex-row pt4 items-center\">\n                                  <label className=\"f5 fw6 black-70 pb3- ttc tl mr4 w-30\">\n                                    {item.title}\n                                  </label>\n\n                                  <div\n                                    className={\n                                      \"  checkbox-square  flex flex-row -flex-column pt2-ns pl3 f5 fw6 black ph4  \"\n                                    }\n                                  >\n                                    <Checkbox\n                                      type={\"checkbox\"}\n                                      onChange={() => this.setPermission(item)}\n                                      checked={this.state.project.productionCrew\n                                        .filter(\n                                          a =>\n                                            a.user ===\n                                            this.state.activeCrewMember.id\n                                        )[0]\n                                        .permissions.includes(item.slug)}\n                                    />\n                                  </div>\n                                </div>\n                              ))}\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    )}\n                    {this.state.profileDrawerType === \"profile\" && (\n                      <UserDetail user={this.state.activeCrewMember} />\n                    )}\n                    {this.state.profileDrawerType === \"detail\" && (\n                      <UserDetailProject project={this.props.project} user={this.state.activeCrewMember} />\n                    )}\n                  </>\n                )}\n                {!this.state.searchLoading &&\n                  this.state.drawerType === \"search\" &&\n                  !this.state.bulkSearch && (\n                    <Transition>\n                      <h3 className=\"f5 fw4 black-50 tc pv4 ph4 word-break-all flex items-center mb0\">\n                        <span className=\"flex flex-row ph2 pv0 round bg-black-20 white mr2 f5 fw6\">\n                          {!this.state.searchLoading &&\n                            this.state.crew_[0] &&\n                            this.state.crew_[0].users.length}\n                        </span>{\" \"}\n                        Users with role{\" \"}\n                        <span className=\"fw6 white ml2 ph3 pv1 round bg-black-20\">\n                          {!this.state.searchLoading &&\n                            this.state.crew_[0] &&\n                            this.state.crew_[0].position}\n                        </span>\n                      </h3>\n                    </Transition>\n                  )}\n\n                <div\n                  // onClick={this.toggleLightbox}\n                  className=\"pointer flex flex-column justify-start items-start -pv3- -ph4 bg-white w-100 flex-auto overflow-auto h-100\"\n                >\n                  {/* <Drawer\n                    title=\"Crew Detail\"\n                    placement=\"right\"\n                    closable={true}\n                    onClose={this.closeInnerDrawer}\n                    visible={this.state.innerDrawerOpen}\n                    width={\"40vw\"}\n                  >\n                    <div\n                      // onClick={this.toggleLightbox}\n                      className=\"pointer flex flex-column justify-end items-start pa0 bg-white w-100 flex-auto\"\n                    >\n                      {this.state.innerDrawerOpen && (\n                        <div\n                          // onClick={this.toggleLightbox}\n                          className=\"pointer flex flex-column justify-end items-start pa0 bg-white\"\n                        >\n                          {!this.state.searchLoading &&\n                            this.state.activeCrewMember !== null && (\n                              \n                            )}\n                        </div>\n                      )}\n                    </div>\n                  </Drawer> */}\n\n                  {this.state.searchLoading && (\n                    <div className=\"flex flex-column items-center justify-center pv4 ph4 w-100\">\n                      {/* <Spinner size={25} /> */}\n                      <div className=\"sp sp-3balls\"></div>\n                    </div>\n                  )}\n                  {/* <div className=\"flex flex-row-ns flex-column w-100 f5 fw6 black pb3\">\n                {\n                  \n                }\n                </div> */}\n                  {!this.state.searchLoading &&\n                    this.state.drawerType === \"search\" &&\n                    !this.state.bulkSearch && (\n                      <Transition>\n                        {this.state.crew_[0].users.map((item, index) => (\n                          // console.log(\"item\", item),\n                          <Person\n                            projectOwner={this.props.projectOwner}\n                            inviteToProject={this.inviteToProject}\n                            toggleInnerDrawer={this.toggleInnerDrawer}\n                            userAvatar={this.userAvatar}\n                            item={item}\n                            project={this.props.project}\n                            position={item.position}\n                            showUserProfile={this.showUserProfile}\n                            // positions={t.positions}\n                            reloadProject={this.reloadProject}\n                          />\n                        ))}\n                      </Transition>\n                    )}\n\n                  {!this.state.searchLoading &&\n                    this.state.drawerType === \"search\" &&\n                    this.state.bulkSearch &&\n                    this.state.crew_.map((item, index) => (\n                      // console.log(\"bulk search position item\", item),\n                      <div className=\"flex flex-column pb3 mb3 bb b--black-05 w-100\">\n                        <Transition>\n                          <h3 className=\"f5 fw4 black-50 tc pv4 ph4 word-break-all flex items-center mb0\">\n                            <span className=\"flex flex-row ph2 pv0 round bg-black-20 white mr2 f5 fw6\">\n                              {item.users.length}\n                            </span>{\" \"}\n                            Users with role{\" \"}\n                            <span className=\"fw6 white ml2 ph3 pv1 round bg-black-20\">\n                              {item.position}\n                            </span>\n                          </h3>\n                        </Transition>\n\n                        <Transition>\n                          {item.users.map((item_, index_) => (\n                            // console.log(\"bulk search user item\", item_),\n                            <Person\n                              showUserProfile={this.showUserProfile}\n                              projectOwner={this.props.projectOwner}\n                              inviteToProject={this.inviteToProject}\n                              toggleInnerDrawer={this.toggleInnerDrawer}\n                              userAvatar={this.userAvatar}\n                              item={item_}\n                              project={this.props.project}\n                              position={item_.position}\n                              // positions={this.state.crew_.positions}\n                              reloadProject={this.reloadProject}\n                              bulkSearch={true}\n                            />\n                          ))}\n                        </Transition>\n\n                        {this.state.drawerType === \"search\" &&\n                          this.state.bulkSearch && (\n                            <div className=\"form-row flex flex-column ph4 pv4 bt bb b--black-05\">\n                              <div className=\"form-row flex flex-column\">\n                                <div className=\"flex flex-row f5 fw4 black-50 pb3\">\n                                  Invite user by email for position{\" \"}\n                                  <span className=\"fw6 black ml2\">\n                                    {!this.state.searchLoading && item.position}\n                                  </span>\n                                </div>\n\n                                {/* <label className=\"f6 fw5 black-50 pb2\">Email address</label> */}\n                                <div className=\"flex flex-row \">\n                                  <input\n                                    ref={this.inviteByEmailAddress}\n                                    type={\"text\"}\n                                    placeholder={\"Enter email address\"}\n                                    className=\"flex flex-column ph3 pv3  br1 bg-white black-50 f4 fw5 ba w-100 b--black-05\"\n                                  />\n\n                                  <div className=\"flex flex-column w-20 bl b--black-05\">\n                                    <button\n                                      onClick={this.inviteByEmail}\n                                      className=\"pointer flex h-100 items-center justify-center f6 bg-near-white bn f5 fw6 black-50 \"\n                                    >\n                                      Invite\n                                      {this.state.inviteBusy ? (\n                                        <div className=\"flex flex-column items-start ml2\">\n                                          <Spinner size={15} />\n                                        </div>\n                                      ) : (\n                                        <Icon\n                                          icon=\"arrow-right\"\n                                          className=\"ml2\"\n                                        ></Icon>\n                                      )}\n                                    </button>\n                                  </div>\n                                </div>\n                              </div>\n                            </div>\n                          )}\n                      </div>\n                    ))}\n\n                  {/* {!this.state.searchLoading &&\n                    this.state.drawerType === \"search\" && this.state.bulkSearch && (\n                      <Transition>\n                        {this.state.crew_.map(\n                          (item, index) => (\n                            console.log(\"item\", item),\n                            (\n                              <Person\n                                projectOwner={this.props.projectOwner}\n                                inviteToProject={this.inviteToProject}\n                                toggleInnerDrawer={this.toggleInnerDrawer}\n                                userAvatar={this.userAvatar}\n                                item={item}\n                                project={this.props.project}\n                                position={this.state.crew_[0].position}\n                                positions={this.state.crew_.positions}\n                                reloadProject={this.reloadProject}\n                                bulkSearch={true}\n                              />\n                            )\n                          )\n                        )}\n                      </Transition>\n                    )} */}\n                </div>\n              </div>\n            )}\n\n            {this.state.drawerType === \"search\" && !this.state.bulkSearch && (\n              <div className=\"form-row flex flex-column ph4 pv4 bt bb b--black-05\">\n                <div className=\"form-row flex flex-column\">\n                  <div className=\"flex flex-row f5 fw4 black-50 pb3\">\n                    Invite user by email for position{\" \"}\n                    <span className=\"fw6 black ml2\">\n                      {!this.state.searchLoading &&\n                        this.state.crew_[0] &&\n                        this.state.crew_[0].position}\n                    </span>\n                  </div>\n\n                  {/* <label className=\"f6 fw5 black-50 pb2\">Email address</label> */}\n                  <div className=\"flex flex-row \">\n                    <input\n                      ref={this.inviteByEmailAddress}\n                      type={\"text\"}\n                      placeholder={\"Enter email address\"}\n                      className=\"flex flex-column ph3 pv3  br1 bg-white black-50 f4 fw5 ba w-100 b--black-05\"\n                    />\n\n                    <div className=\"flex flex-column w-20 bl b--black-05\">\n                      <button\n                        onClick={this.inviteByEmail}\n                        className=\"pointer flex h-100 items-center justify-center f6 bg-near-white bn f5 fw6 black-50 \"\n                      >\n                        Invite\n                        {this.state.inviteBusy ? (\n                          <div className=\"flex flex-column items-start ml2\">\n                            <Spinner size={15} />\n                          </div>\n                        ) : (\n                          <Icon icon=\"arrow-right\" className=\"ml2\"></Icon>\n                        )}\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            )}\n          </>{\" \"}\n        </Drawer>\n      </>\n    );\n  }\n}\n\nexport default People;\nPeople.contextType = AccountContext;\n","import React from \"react\";\n\nimport { Icon } from \"@blueprintjs/core\";\n\nimport { motion, AnimatePresence } from \"framer-motion\";\n// import { Motion, Frame, Scroll, useCycle } from \"framer\"\n\n// import func from \"./fn\";\n\nconst spring = {\n  type: \"spring\",\n  damping: 20,\n  stiffness: 300\n};\n\nconst container = {\n  hidden: { y: 10, opacity: 0 },\n  show: {\n    opacity: 1,\n    y: 0,\n    transition: {\n      //   delayChildren: 0.2,\n      staggerChildren: 0.2,\n      // delay: 1,\n      // x: { type: \"spring\", stiffness: 100 },\n      y: { type: \"spring\", stiffness: 100 },\n      default: { duration: 0.3 }\n    }\n  }\n};\n\nconst item = {\n  hidden: { opacity: 0, y: 50 },\n  show: { opacity: 1, y: 0 },\n  transition: {\n    //   delayChildren: 0.2,\n    staggerChildren: 0.2,\n    // delay: 1,\n    // x: { type: \"spring\", stiffness: 100 },\n    y: { type: \"spring\", stiffness: 100 },\n    default: { duration: 0.3 }\n  }\n};\n\nexport default class UserList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      crew: [],\n      invited: [],\n      items: [],\n      isConfirmed: false,\n      ready: false,\n      days: this.props.days\n    };\n\n    this.rate = React.createRef()\n\n    this.setRate = this.setRate.bind(this)\n  }\nsetRate({index,value, user}) {\n  // let rate = parseInt(this.rate.current.value)\n  console.log('set rate 1', value)\n  this.props.setRate({ index, rate: parseInt(value), user })\n}\nsetDays({index,value}) {\n  // let days = parseInt(this.rate.current.value)\n  console.log('set rate 1', value)\n  // this.setState({\n  //   days: value\n  // })\n  this.props.setDays({ index, days: parseInt(value) })\n  // this.props.setRate({ index, rate: parseInt(value) })\n}\n  async componentDidMount() {\n    console.log(\"UserList props\", this.props);\n    // this.setState({\n    //   // crew: this.props.crew,\n    //   // invited: this.props.invited\n    // });\n    // i\n    // let crew = this.props.crew;\n    // let invited = this.props.invited;\n    // // let invited_ = [];\n    // func.checkConfirmed({ invited, crew }).then(res => {\n    //   if (this.props.type === \"production\") {\n    //     this.setState({\n    //       invited: res,\n    //       items: this.props.crew,\n    //       ready: true\n    //     });\n    //   }\n    //   if (this.props.type === \"crew\") {\n    //     this.setState({\n    //       invited: res,\n    //       items: res,\n    //       ready: true\n    //     });\n    //   }\n    // });\n\n\n\n  }\n  render() {\n    // const { isConfirmed } = this.state;\n    console.log('user props ',this.props)\n    return (\n      <div\n        className=\"flex flex-column mt0 w-100 -pa3 -ba -b--black-05 -br4 -overflow-hidden\"\n        id=\"\"\n      >\n        \n        {this.props.ready  && (\n          <motion.section variants={container} initial=\"hidden\" animate=\"show\">\n            {this.props.items.length > 0 &&\n              this.props.items.map((item, index) => (\n                <motion.div\n                  variants={item}\n                  key={index}\n                  // initial={\"hidden\"}\n                  // animate={\"show\"}\n                  // layoutTransition={spring}\n                  //  style={{ transitionDelay: ((index * 0.05) + \"s\") }}\n                  //  initial={{ x: 0, y:50, opacity: 0 }}\n                  // animate={\"show\"}\n                  exit={\"hidden\"}\n                //   transition={{\n                // delay: 1}}\n\n                // style={{ background }}\n                >\n                  {item && (\n                    <div\n                      \n                      // style={{ transitionDelay: ((index * 0.05) + \"s\") }}\n                      id={\"user-\" + item.id}\n                      className={\n                        // ( this.state.isDeletingStart[index] ? \" opacity-50 blur-grayscale \" : \"  \" )\n                        // + ( this.state.isDeleting[index] ? \" transform-y-up opacity-0 blur-10\" : \" transform-y-0 opacity-1  blur-0\" )\n                        \" flex flex-row justify-start w-100 trans-a bg-white-50 hover-bg-white mb3 bs-b br3 overflow-hidden \"\n                      }\n                    >\n                      <div\n                        className={\n                          \"  flex flex-row-ns flex-column flex-auto w-30 \"\n                        }\n                      >\n                        <div \n                        onClick={() =>\n                          this.props.toggleDrawer({ item, type: \"user\" })\n                        }\n                        className=\"flex flex-column w-100=\">\n                          <div className=\"round- p-a1 bg-white center\">\n                            <div\n                              style={{\n                                width: \"120px\",\n                                height: \"90px\",\n                                backgroundImage:\n                                  \"url(\" + this.props.userAvatar(item) + \")\"\n                              }}\n                              className=\"center pointer round-  cover bg-center\"\n                            ></div>\n                          </div>\n                        </div>\n\n                        <div \n                        onClick={() =>\n                          this.props.toggleDrawer({ item, type: \"user\" })\n                        }\n                        className=\"flex flex-column justify-center items-start pl4\">\n                          <div className=\"f4 flex flex-column items-start w-100 raleway \">\n                            <span className=\"flex flex-row-ns flex-column -w-100 black f3 fw6\">\n                              <span className=\"flex flex-row items-center justify-start-ns justify-center black f5 fw6\">\n                                {item.profile.name.first}{\" \"}\n                                {item.profile.name.last}\n                              </span>\n                            </span>\n                          </div>\n                        </div>\n                      </div>\n\n                      <div className=\"flex flex-row-ns flex-column w-20 ph4 pv3 \">\n                        <div className=\"flex flex-column justify-center\">\n                          <span className=\"flex flex-row items-center justify-start-ns justify-start black-40 f6 fw6\">\n                            {/* {item.rate} */}\n                            <label className=\"input-label f6 fw5 black-40 mr2\">Daily Rate</label>\n                            <span className=\" f4 fw6 black-60\">{this.props.context.account.user.currency && this.props.context.account.user.currency.symbol}</span>\n                            <input\n                            ref={this.rate}\n                            onChange={(e) => this.setRate({index,value:e.target.value, user: item.id})}\n                            type={'number'}\n                            className=\"flex flex-column ph3 pv2 bn br1 f4 fw6 black-60 w-100\"\n                            defaultValue={this.props.state.project.crewRoster.filter(a => a.user === item.id)[0].rate}\n                            />\n\n                          </span>\n                        </div>\n                      </div>\n\n                      <div className=\"flex flex-row-ns flex-column w-20 ph4 pv3 \">\n                        <div className=\"flex flex-column justify-center\">\n                          <span className=\"flex flex-row items-center justify-start-ns justify-start black-40 f6 fw6\">\n                            {/* {item.rate} */}\n                            <label className=\"input-label f6 fw5 black-40 mr2\">Days</label>\n                           <div className=\"flex flex-column ph3 pv2 bn br1 f4 fw6 black-60 w-100\">{this.props.state.project.crewRoster.filter(a => a.user === item.id)[0].days.filter(a => a.selected).length}</div>\n                            {/* <input\n                            ref={this.days}\n                            onChange={(e) => this.setDays({index,value:e.target.value})}\n                            type={'number'}\n                            className=\"flex flex-column ph3 pv2 bn br1 f4 fw6 black-60 w-100\"\n                            defaultValue={item.days}\n                            /> */}\n\n                          </span>\n                        </div>\n                      </div>\n\n                      <div className=\"flex flex-row-ns flex-column w-30 ph4 pv3 \">\n                        <div className=\"flex flex-column justify-center\">\n                          <span className=\"flex flex-row items-center justify-start-ns justify-start black-40 f6 fw6\">\n                            {/* {item.rate} */}\n                            <label className=\"input-label f6 fw5 black-40 mr2\">Total</label>\n                            <div\n                            // ref={this.days}\n                            // onChange={(e) => this.setDays({index,value:e.target.value})}\n                            // type={'number'}\n                            className=\"flex flex-row ph3 pv2 bn br1 f4 fw6 black-60\"\n                            // defaultValue={item.days}\n                      ><span>{this.props.context.account.user.currency && this.props.context.account.user.currency.symbol}</span>{this.props.state.project.crewRoster.filter(a => a.user === item.id)[0].rate * this.props.state.project.crewRoster.filter(a => a.user === item.id)[0].days.filter(a => a.selected).length }</div>\n\n                          </span>\n                        </div>\n                      </div>\n\n                      {this.props.type === \"crew\" && (\n                        <div className=\"flex flex-row-ns flex-column w-20 ph4 pv3 \">\n                          <div className=\"flex flex-column justify-center\">\n                            <span className=\"flex flex-row items-center justify-start-ns justify-start black-40 f6 fw6\">\n                              {item.isConfirmed\n                                ? \"Confirmed \"\n                                : \"Not Confirmed\"}\n                              {item.isConfirmed ? (\n                                <Icon\n                                  icon=\"endorsed\"\n                                  iconSize={\"20\"}\n                                  className=\"f6 green ml2\"\n                                />\n                              ) : (\n                                  \"\"\n                                )}\n                            </span>\n                          </div>\n                        </div>\n                      )}\n\n                      {this.props.state.deleteConfirmation[index] === false && (\n                        <div\n                          onClick={() =>\n                            this.props.confirmDelete({ item, index })\n                          }\n                          className=\"pointer flex flex-column items-end justify-center w-20 ph4 pv3\"\n                        >\n                          <div className=\"flex flex-column justify-center\">\n                            <span className=\"flex flex-row items-center justify-start-ns justify-center black-30 hover-black-70 f6 fw6\">\n                              Remove\n                              <Icon\n                                icon={\"delete\"}\n                                iconSize={20}\n                                className=\"ml2 black-20 f6\"\n                              />\n                            </span>\n                          </div>\n                        </div>\n                      )}\n\n                      {this.props.state.deleteConfirmation[index] === true && (\n                        <div\n                          onClick={() => this.props.remove({ item, index })}\n                          className=\"pointer flex flex-column items-end justify-center w-20 ph4 pv3\"\n                        >\n                          <div className=\"flex flex-column justify-center\">\n                            <span className=\"flex flex-row items-center justify-start-ns justify-center black-30 hover-black-70 f6 fw6\">\n                              Are you sure?\n                              <Icon\n                                icon={\"delete\"}\n                                iconSize={20}\n                                className=\"ml2 red f6\"\n                              />\n                            </span>\n                          </div>\n                        </div>\n                      )}\n                    </div>\n                  )}\n                </motion.div>\n              ))}\n          </motion.section>\n        )}\n\n        {this.props.items.length === 0 && (\n          <div className=\"flex f5 fw5 black-50 pv3\">No crew assigned yet.</div>\n        )}\n      </div>\n    );\n  }\n}\n\n","import React from \"react\";\n\nimport { Icon } from \"@blueprintjs/core\";\n\nimport { motion, AnimatePresence } from \"framer-motion\";\n// import { Motion, Frame, Scroll, useCycle } from \"framer\"\n\n// import func from \"./fn\";\n\nconst spring = {\n  type: \"spring\",\n  damping: 20,\n  stiffness: 300\n};\n\nconst container = {\n  hidden: { y: 10, opacity: 0 },\n  show: {\n    opacity: 1,\n    y: 0,\n    transition: {\n      //   delayChildren: 0.2,\n      staggerChildren: 0.2,\n      // delay: 1,\n      // x: { type: \"spring\", stiffness: 100 },\n      y: { type: \"spring\", stiffness: 100 },\n      default: { duration: 0.3 }\n    }\n  }\n};\n\nconst item = {\n  hidden: { opacity: 0, y: 50 },\n  show: { opacity: 1, y: 0 },\n  transition: {\n    //   delayChildren: 0.2,\n    staggerChildren: 0.2,\n    // delay: 1,\n    // x: { type: \"spring\", stiffness: 100 },\n    y: { type: \"spring\", stiffness: 100 },\n    default: { duration: 0.3 }\n  }\n};\n\nexport default class UserListMinimal extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      crew: [],\n      invited: [],\n      items: [],\n      isConfirmed: false,\n      ready: false,\n      days: this.props.days\n    };\n\n    this.rate = React.createRef()\n\n    this.setRate = this.setRate.bind(this)\n  }\nsetRate({index,value}) {\n  // let rate = parseInt(this.rate.current.value)\n  console.log('set rate 1', value)\n  this.props.setRate({ index, rate: parseInt(value) })\n}\nsetDays({index,value}) {\n  // let days = parseInt(this.rate.current.value)\n  console.log('set rate 1', value)\n  // this.setState({\n  //   days: value\n  // })\n  this.props.setDays({ index, days: parseInt(value) })\n  // this.props.setRate({ index, rate: parseInt(value) })\n}\n  async componentDidMount() {\n    console.log(\"UserList props\", this.props);\n    // this.setState({\n    //   // crew: this.props.crew,\n    //   // invited: this.props.invited\n    // });\n    // i\n    // let crew = this.props.crew;\n    // let invited = this.props.invited;\n    // // let invited_ = [];\n    // func.checkConfirmed({ invited, crew }).then(res => {\n    //   if (this.props.type === \"production\") {\n    //     this.setState({\n    //       invited: res,\n    //       items: this.props.crew,\n    //       ready: true\n    //     });\n    //   }\n    //   if (this.props.type === \"crew\") {\n    //     this.setState({\n    //       invited: res,\n    //       items: res,\n    //       ready: true\n    //     });\n    //   }\n    // });\n\n\n\n  }\n  render() {\n    // const { isConfirmed } = this.state;\n    console.log('user props ',this.props)\n    return (\n      <div\n        className=\"flex flex-column mt0 mr4\"\n        id=\"\"\n      >\n        \n        {this.props.ready  && (\n          <motion.section variants={container} initial=\"hidden\" animate=\"show\">\n            {this.props.items.length > 0 &&\n              this.props.items.map((item, index) => (\n                <motion.div\n                  variants={item}\n                  key={index}\n                  // initial={\"hidden\"}\n                  // animate={\"show\"}\n                  // layoutTransition={spring}\n                  //  style={{ transitionDelay: ((index * 0.05) + \"s\") }}\n                  //  initial={{ x: 0, y:50, opacity: 0 }}\n                  // animate={\"show\"}\n                  exit={\"hidden\"}\n                //   transition={{\n                // delay: 1}}\n\n                // style={{ background }}\n                >\n                  {item && (\n                    <div\n                      \n                      // style={{ transitionDelay: ((index * 0.05) + \"s\") }}\n                      id={\"user-\" + item.id}\n                      className={\n                        // ( this.state.isDeletingStart[index] ? \" opacity-50 blur-grayscale \" : \"  \" )\n                        // + ( this.state.isDeleting[index] ? \" transform-y-up opacity-0 blur-10\" : \" transform-y-0 opacity-1  blur-0\" )\n                        \" flex flex-row justify-start w-100 trans-a mb2\"\n                      }\n                    >\n                      <div\n                        className={\n                          \"  flex flex-row-ns flex-column flex-auto w-30 \"\n                        }\n                      >\n                        <div \n                        onClick={() =>\n                          this.props.toggleDrawer({ item, type: \"user\" })\n                        }\n                        className=\"flex flex-column w-100=\">\n                          <div className=\"round p-a1 bg-white center\">\n                            <div\n                              style={{\n                                width: \"50px\",\n                                height: \"50px\",\n                                backgroundImage:\n                                  \"url(\" + this.props.userAvatar(item) + \")\"\n                              }}\n                              className=\"center pointer round-  cover bg-center\"\n                            ></div>\n                          </div>\n                        </div>\n\n                        <div \n                        onClick={() =>\n                          this.props.toggleDrawer({ item, type: \"user\" })\n                        }\n                        className=\"flex flex-column justify-center items-start pl2\">\n                          <div className=\"f4 flex flex-column items-start w-100 raleway \">\n                            <span className=\"flex flex-row-ns flex-column -w-100 black f3 fw6\">\n                              <span className=\"flex flex-row items-center justify-start-ns justify-center black f5 fw6\">\n                                {item.profile.name.first}{\" \"}\n                                {item.profile.name.last}\n                              </span>\n                            </span>\n                          </div>\n                        </div>\n                      </div>\n\n         \n\n\n\n               \n                    </div>\n                  )}\n                </motion.div>\n              ))}\n          </motion.section>\n        )}\n\n        {this.props.items.length === 0 && (\n          <div className=\"flex f5 fw5 black-50 pv3\">No crew assigned yet.</div>\n        )}\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { DatePicker, Drawer, Popconfirm, message, Checkbox } from \"antd\";\nimport moment from \"moment\";\nimport AccountContext from \"../../../utils/context/AccountContext.js\";\n// import Fn from '../../../utils/fn/Fn.js';\nimport LocationSearchBar from \"../../elements/display/forms/LocationSearchBar.js\";\nimport PageTitle from \"../../elements/layout/PageTitle_B.js\";\nimport FormCrew from \"../CrewFinder/CrewFinder_People.js\";\n\nimport { Icon, Dialog, Spinner } from \"@blueprintjs/core\";\n\nimport { TH_LIST } from \"@blueprintjs/icons/lib/esm/generated/iconNames\";\nimport FormInvite from \"../../elements/forms/Invite.js\";\nimport constants from \"../../../utils/constants.js\";\nimport { Fn, app } from \"../../../utils/fn/Fn.js\";\nimport Loading from \"../../elements/Loading.js\";\n\nimport Bio from \"../_Elements/Bio/Bio.jsx\";\nimport Network from \"../_Elements/Network/Network.jsx\";\nimport RecentWork from \"../RecentWork/index.js\";\nimport Transition from \"../../Layouts/Transition.js\";\nimport Person from \"../Person\";\nimport UserList from \"../UserList/forRateSheet\";\nimport UserListMinimal from \"../UserList/minimal.js\";\n\nimport \"./style.css\";\n\n// import { motion, AnimatePresence } from 'framer-motion'\n// // import { Motion, Frame, Scroll, useCycle } from \"framer\"\n\n// const spring = {\n//   type: \"spring\",\n//   damping: 20,\n//   stiffness: 300\n// };\n\n// const container = {\n//   hidden: { opacity: 0 },\n//   show: {\n//     opacity: 1,\n//     transition: {\n//       // delayChildren: 0.5,\n//       staggerChildren: 0.5,\n//       // delay: 1,\n//     x: { type: \"spring\", stiffness: 100 },\n//     default: { duration: 2 },\n//     }\n\n//   }\n// }\n\n// const item = {\n//   hidden: { opacity: 0 },\n//   show: { opacity: 1 }\n// }\n\nvar saveInterval;\n\nexport default class RateCalculator extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hasError: false,\n      project: this.props.project,\n      drawerOpen: false,\n      innerDrawerOpen: false,\n      ready: false,\n      buttonsReady: true,\n      view: null,\n      views: [],\n      activeButton: {},\n      buttons: [],\n      projectType: this.props.project.type,\n      startDate: this.props.project.start_date,\n      endDate: this.props.project.end_date,\n      location: this.props.project.location,\n      loading: false,\n      x: false,\n      lightboxActive: false,\n      productionCrew: [],\n      crew: [],\n      crew_: [],\n      searchLoading: false,\n      activeCrewMember: null,\n      inviteBusy: false,\n      isDeleting: [],\n      isDeletingStart: [],\n      del: [],\n      deleteConfirmation: [],\n      drawerType: \"search\",\n      days: 0,\n      total: 0,\n      months: [],\n      crewDays_: [],\n      crewRoster: [],\n      delaySaveActive: false,\n      delaySaves: []\n    };\n\n    this.toggleDrawer = this.toggleDrawer.bind(this);\n    this.toggleInnerDrawer = this.toggleInnerDrawer.bind(this);\n    this.closeInnerDrawer = this.closeInnerDrawer.bind(this);\n    this.userAvatar = this.userAvatar.bind(this);\n    this.setRate = this.setRate.bind(this);\n    this.setDays = this.setDays.bind(this);\n    this.updateTotal = this.updateTotal.bind(this);\n    this.checkDay = this.checkDay.bind(this)\n    this.delaySave = this.delaySave.bind(this)\n    this.calculateTotal = this.calculateTotal.bind(this)\n    // this.inviteToProject = this.inviteToProject.bind(this)\n    // this.toggleLightbox = this.toggleLightbox.bind(this)\n\n    this.projectTitle = React.createRef();\n    this.projectDescription = React.createRef();\n    this.inviteByEmailAddress = React.createRef();\n    window.self = this;\n  } \n\n  async delaySave() {\n\n    this.setState({\n      delaySaveActive: true\n    })\n\n    \n  }\n  checkDay(__) {\n\n    const { person, day, index_ } = __\n  \n    console.log('checkDay', __)\n\n    let crewRoster = this.state.crewRoster;\n\n    let index = crewRoster.findIndex(a => a.user === person );\n\n    let item = crewRoster[index];\n    \n    let dayIndex = item.days.findIndex( a => a.day === day);\n\n    item.days[dayIndex].selected = !item.days[dayIndex].selected;\n\n    this.setState({\n      crewRoster: crewRoster\n    })\n\n    // this.delaySave()\n    this.setState({\n      delaySaveActive: true\n    })\n\n    this.calculateTotal()\n    // let days = item.days.filter(a => a.day === day)[0]\n\n  }\n  updateTotal() {\n    let crew = this.state.crew;\n    let total = 0;\n    for (let item of crew) {\n      let cost = item.rate * item.days;\n      total = total + cost;\n    }\n    this.setState({\n      total: total\n    });\n  }\n  async setRate({ index, rate, user }) {\n    console.log(\"set rate\", rate);\n    let crew = this.state.crew;\n    crew[index].rate = rate;\n    this.setState({\n      crew: crew\n    });\n    console.log(\"updated crew\", crew);\n    \n    this.state.crewRoster.filter(a => a.user === user)[0].rate = rate;\n    \n    let project = this.state.project;\n    project.crewRoster = this.state.crewRoster;\n    await app.updateProject({ self: this, project }).then(project => {\n\n      // this.updateTotal();\n      this.calculateTotal()\n\n    })    \n    \n\n\n  }\n  setDays({ index, days }) {\n    // console.log(\"set days\", days);\n\n    // let crew = this.state.crew;\n\n    // crew[index].days = days;\n\n    // this.setState({\n    //   crew: crew\n    // });\n\n    // console.log(\"updated crew\", crew);\n  }\n  userAvatar(item) {\n    let avatar =\n      typeof item && item.profile && item.profile.picture !== \"undefined\"\n        ? item.profile.picture\n        : constants.placeholderImage;\n    return avatar;\n  }\n  closeInnerDrawer() {\n    this.setState({\n      innerDrawerOpen: false\n    });\n  }\n  toggleInnerDrawer(item) {\n    this.setState({\n      innerDrawerOpen: true,\n      activeCrewMember: item\n    });\n    // this.state.activeCrewMember\n  }\n  toggleDrawer({ item, type }) {\n    this.setState({\n      drawerType: type,\n      drawerOpen: !this.state.drawerOpen\n      // activeCrewMember: item\n    });\n  }\n  calculateTotal() {\n    \n    let total = 0;\n\n    for(let item of this.state.crewRoster){\n      let days = item.days.filter(a => a.selected).length;\n      let rate = item.rate;\n      let subtotal = ( days * rate );\n      total = total + subtotal\n    }\n    this.setState({\n      total: total\n    })\n  }\n  componentWillUnmount() {\n    clearInterval(saveInterval)\n  }\n  componentDidMount = async () => {\n    // await app.fetchProductionCrew({ self: this, project: this.props.project });\n    // let project = this.props.project;\n    let project = Fn.get('activeProject');\n    console.log(\"project\", project);\n    // let start = moment(project.start_date);\n    // let end = moment(project.end_date);\n    // let days = end.diff(start, \"days\", false);\n    // let months_ = start.diff(end, \"months\", false);\n    // // console.log(\"diff days\", days);\n    // // console.log(\"diff months\", months_);\n\n    // this.setState({\n    //   days: days\n    // });\n\n    let crew = await app.fetchConfirmedCrew({ self: null, project: project });\n\n    this.setState({\n      crew: crew\n    })\n    // if (crew) {\n    //   let crewWithRates = [];\n    //   for (let item of crew) {\n    //     // let rate = 0;/\n    //     item.rate = 0;\n    //     item.days = project.crewRoster.filter(a => a.user === item.id)[0].days.filter(a => a.selected).length;\n    //     crewWithRates.push(item);\n    //   }\n    //   this.setState({\n    //     crew: crew\n    //   });\n    // }\n\n    this.setState({\n      crewRoster: this.props.project.crewRoster,\n      months: this.props.project.calendar,\n      ready: true\n    })\n\nthis.calculateTotal()\n   \n    setInterval(async() => {\n\n      if(this.state.delaySaveActive) {\n\n        let project = this.state.project;\n\n        project.crewRoster = this.state.crewRoster;\n\n        await app.updateProject({ self: this, project }).then( project => {\n\n          message.loading(\"Saving\");\n\n          // console.log('saved')\n\n          this.setState({\n\n            delaySaveActive: false\n\n          })\n\n          this.setState({\n            project: Fn.get('activeProject')\n          })\n\n        })\n\n      }\n\n    },4000)\n\n\n  };\n\n  static getDerivedStateFromError(error) {\n    // getDerivedStateFromError -> Update state so the next render will show the fallback UI.\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, info) {\n    // You can also log the error to an error reporting service\n  }\n\n  getDerivedStateFromProps = (nextProps, prevState) => {};\n\n  getSnapshotBeforeUpdate = (prevProps, prevState) => {};\n\n  componentDidUpdate = () => {};\n\n  componentWillUnmount = () => {};\n\n  render() {\n    const { total } = this.state;\n\n    // const\n\n    if (this.state.hasError) {\n      return <h1>Something went wrong.</h1>;\n    }\n    return (\n      <>\n        <section id=\"People\" className=\"flex flex-column w-100 pb4 pt0\">\n          <div className=\"flex flex-row pv3 \">\n            <PageTitle\n              title={\"Rate Calculator\"}\n              // docs={this.state.files}\n              // ready={this.state.ready}\n            />\n\n            <div\n              id=\"SearchInvite\"\n              className=\"w-100 flex flex-row items-end justify-start justify-end-ns\"\n            >\n              <button\n                onClick={this.openSearchDialog}\n                className={\n                  (Fn.get(\"isMobile\") ? \" w-100 mt3 \" : \"  \") +\n                  \" br1- round bs-b bg-black-20 ph4 pv2 pointer bn relative w-100-    \"\n                }\n              >\n                <span className=\"f5 fw6 white pv0 flex items-center justify-center pr2\">\n                  {this.state.buttonLoading ? (\n                    <Icon\n                      icon=\"loading\"\n                      className={\" absolute right-0 f4 black-60 mr2\"}\n                    />\n                  ) : (\n                    <Icon\n                      icon={\"plus\"}\n                      iconSize={12}\n                      className={\" f4 black-60- white  absolute right-0 mr3\"}\n                    />\n                  )}{\" \"}\n                  Add Sheet\n                </span>\n              </button>\n            </div>\n          </div>\n\n          <div className=\"flex flex-row pt3 bt b--black-05\">\n            <section id=\"\" className=\"flex flex-column relative pb4\">\n              <h1 className=\"ma0 raleway f3 fw6  mb-0 flex flex-row items-center justify-start black\">\n                <span>Total</span>\n              </h1>\n            </section>\n\n            <section id=\"\" className=\"flex flex-column relative pb4 ml2\">\n              <h1 className=\"ma0 raleway f3 fw4  mb-0 flex flex-row items-center justify-start black\">\n                <span>{this.context.account.user.currency && this.context.account.user.currency.symbol}</span>\n                <span>{total}</span>\n              </h1>\n            </section>\n          </div>\n          {!this.state.ready && (\n            <div className=\"flex flex-column pv4 items-start\">\n              {/* <Spinner size={25} /> */}\n              <div className=\"sp sp-3balls\"></div>\n            </div>\n          )}\n          <div className=\"w-100-ns w-100 flex flex-row flex-wrap justify-between br3- -overflow-hidden\">\n            {this.state.x ? (\n              <Icon\n                icon=\"loading\"\n                iconSize=\"15\"\n                className=\"absolute right-0 f4 black-60 mr3\"\n              />\n            ) : (\n              <Icon\n                icon=\"swap-right\"\n                iconSize=\"15\"\n                className=\"f4 black-60 -white  absolute right-0 mr3\"\n              />\n            )}\n\n            {this.state.ready && (\n              <>\n                <div\n                  id=\"ProductionCrewList\"\n                  className=\"flex flex-column mb3 w-100\"\n                >\n                  <div className=\"flex flex-row f5 fw5 black-50 pb4 items-center\">\n                    Assigned Crew Members{\" \"}\n                  </div>\n\n                  <UserList\n                    crew={this.state.crew}\n                    items={this.state.crew}\n                    invited={this.props.invited}\n                    userAvatar={this.userAvatar}\n                    confirmDelete={this.confirmDelete}\n                    remove={this.remove}\n                    state={this.state}\n                    ready={this.state.ready}\n                    toggleDrawer={this.toggleDrawer}\n                    type={\"production\"}\n                    setRate={this.setRate}\n                    setDays={this.setDays}\n                    days={this.state.days}\n                    updateTotal={this.updateTotal}\n                    context={this.context}\n                  />\n                </div>\n              </>\n            )}\n          </div>\n        </section>\n        {this.state.ready && (\n        <section id=\"People\" className=\"flex flex-column w-100 pb4 pt0\">\n          <div className=\"flex flex-column pv3 \">\n            {/* {\n                this.props.project.days.map((day, index) => (\n\n                  <div className=\"flex flex-row pv3- bb b--black-05 f5 fw7 black pr3 br\">\n                      {moment(day).format('Do')}\n                  </div>\n                ))\n            \n            } */}\n\n            {this.state.months.map((month, index) => (\n              <>\n                <div className=\"flex flex-row pv3 bb b--black-05 f4 fw7 black pr3 br bg-white ph4 mt4 br2\">\n                  {month && month.name}\n                </div>\n\n                <div className=\"flex flex-row overflow-auto\">\n                  <div\n                    style={{\n                      width:\n                        \"calc( 200px + calc(60px * \" + month.days.length + \"))\"\n                    }}\n                    className=\"flex flex-column br bl b--black-05\"\n                  >\n                    {/* <UserListMinimal\n                      crew={this.state.crew}\n                      items={this.state.crew}\n                      invited={this.props.invited}\n                      userAvatar={this.userAvatar}\n                      confirmDelete={this.confirmDelete}\n                      remove={this.remove}\n                      state={this.state}\n                      ready={this.state.ready}\n                      toggleDrawer={this.toggleDrawer}\n                      type={\"production\"}\n                      setRate={this.setRate}\n                      setDays={this.setDays}\n                      days={this.state.days}\n                      updateTotal={this.updateTotal}\n                    /> */}\n                    <div\n                      style={{}}\n                      className=\"flex flex-row bb b--black-05 f5 fw6 black pr3- br- bb bg-white-50\"\n                    >\n                      <div className=\"flex width5\"></div>\n                      {month &&\n                        month.days.map((day, index_) => (\n                          <div className=\"width3 flex flex-column pv3 f5 fw7 black ph3 bl b--black-05 flex-aut-o\">\n                            {moment(day).format(\"Do\")}\n                          </div>\n                        ))}\n                    </div>\n\n                    {this.state.crew.map((person, index) => (\n                      console.log('crewRoster filter ',this.state.crewRoster),\n                      console.log('crewRoster filter ', person.id),\n                      console.log('crewRoster filter ',this.state.crewRoster.filter(a => a.user === person.id)),\n                      <div\n                        className={\n                          \"  flex flex-row-ns flex-column flex-auto- bb b--black-05\"\n                        }\n                      >\n                        <div className=\"flex w5- width5 pl3 pv2\">\n                          <div\n                            onClick={() =>\n                              this.props.toggleDrawer({ item: person, type: \"user\" })\n                            }\n                            className=\"flex flex-column w-100= justify-center\"\n                          >\n                            <div className=\"round p-a1 bg-white center\">\n                              <div\n                                style={{\n                                  width: \"40px\",\n                                  height: \"40px\",\n                                  backgroundImage:\n                                    \"url(\" + this.userAvatar(person) + \")\"\n                                }}\n                                className=\"center pointer round-  cover bg-center\"\n                              ></div>\n                            </div>\n                          </div>\n\n                          <div\n                            onClick={() =>\n                              this.props.toggleDrawer({ item: person, type: \"user\" })\n                            }\n                            className=\"flex flex-column justify-center items-start pl2\"\n                          >\n                            <div className=\"f4 flex flex-column items-start w-100 raleway \">\n                              <span className=\"flex flex-row-ns flex-column -w-100 black f3 fw6\">\n                                <span className=\"flex flex-row items-center justify-start-ns justify-center black f5 fw6\">\n                                  {person.profile.name.first}{\" \"}\n                                  {person.profile.name.last}\n                                </span>\n                              </span>\n                            </div>\n                          </div>\n                        </div>\n                        <div className=\"flex flex-row\">\n                          {month &&\n                            month.days.map((day, index_) => (\n                              // console.log()\n                              <div className=\"w3- width3 flex flex-column pv4- f5 fw7 black ph3- bl b--black-05 flex-auto-\">\n                                <div className=\"checklist-items flex flex-column flex-auto \">\n                            \n                                      <div\n                                        onClick={() => this.checkDay({ person: person.id, day, index_ })}\n                                        \n                                        className={ (this.state.crewRoster.filter(a => a.user === person.id)[0].days.filter( a => a.day === day)[0].selected\n                                        ? \" bg-blue hover-lighten-10\"\n                                        : \" bg-white-50 \") + (\" trans-a pointer checklist-item justify-center items-center flex flex-row flex-auto \") }\n                                      >\n                                        {/* <span className=\"flex flex-column f4 fw6 black-70 pv3 ph4\">\n                                          {item.label}\n                                        </span> */}\n\n                                        <div\n                                          className={\n                                           \n                                            \" flex flex-column items-center justify-center ph3- pv3- w3-\"\n                                          }\n                                        >\n                                          {this.state.crewRoster.filter(a => a.user === person.id)[0].days.filter( a => a.day === day)[0].selected ? (\n                                            <Icon\n                                              icon={\"tick\"}\n                                              className=\"white f4 fw6 \"\n                                            />\n                                          ) : (\n                                            <Icon\n                                              icon={\"ring\"}\n                                              className=\"black-20 f4 fw6 \"\n                                            />\n                                          )}\n                                        </div>\n                                      </div>\n\n                                </div>\n                              </div>\n                            ))}\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              </>\n            ))}\n          </div>\n        </section>\n        )}\n\n        <Dialog\n          className={\"bp3-light\"}\n          // icon=\"info-sign\"\n          onClose={this.closeDialog}\n          title={this.state.dialogTitle}\n          {...this.state}\n        >\n          <FormInvite\n            inviteBusy={this.state.inviteBusy}\n            inviteByEmail={this.inviteByEmail}\n            project={this.props.project}\n            projectOwner={this.props.projectOwner}\n            productionCrew={this.state.productionCrew}\n          />\n        </Dialog>\n\n        <Drawer\n          title={\"Crew Search\"}\n          closable={true}\n          onClose={this.toggleDrawer}\n          visible={this.state.drawerOpen}\n          width={\"60vw\"}\n        >\n          <>\n            {this.state.drawerOpen && (\n              <div className=\"pointer flex flex-column justify-end items-start pa3 bg-white \">\n                {!this.state.searchLoading &&\n                  this.state.drawerType === \"search\" && (\n                    <Transition>\n                      <h3 className=\"f5 fw4 black-50 tc pv2 ph3 word-break-all flex items-center\">\n                        <span className=\"flex flex-row ph2 pv0 round bg-black-20 white mr2 f5 fw6\">\n                          {!this.state.searchLoading &&\n                            this.state.crew_[0] &&\n                            this.state.crew_[0].users.length}\n                        </span>{\" \"}\n                        Users with role{\" \"}\n                        <span className=\"fw6 white ml2 ph3 pv1 round bg-black-20\">\n                          {!this.state.searchLoading &&\n                            this.state.crew_[0] &&\n                            this.state.crew_[0].position}\n                        </span>\n                      </h3>\n                    </Transition>\n                  )}\n                <div\n                  // onClick={this.toggleLightbox}\n                  className=\"pointer flex flex-column justify-end items-start pa3 bg-white w-100 flex-auto\"\n                >\n                  <Drawer\n                    title=\"Crew Detail\"\n                    placement=\"right\"\n                    closable={true}\n                    onClose={this.closeInnerDrawer}\n                    visible={this.state.innerDrawerOpen}\n                    width={\"40vw\"}\n                  >\n                    <div\n                      // onClick={this.toggleLightbox}\n                      className=\"pointer flex flex-column justify-end items-start pa0 bg-white w-100 flex-auto\"\n                    >\n                      {this.state.innerDrawerOpen && (\n                        <div\n                          // onClick={this.toggleLightbox}\n                          className=\"pointer flex flex-column justify-end items-start pa0 bg-white\"\n                        >\n                          {!this.state.searchLoading &&\n                            this.state.activeCrewMember !== null && (\n                              <>\n                                <div\n                                  // to={\"/user/\" + item.id}\n                                  // onClick={this.toggleInnerDrawer}\n                                  id=\"ProjectOwner\"\n                                  className=\"flex flex-column w-100 pa0\"\n                                >\n                                  <div className=\"pa4 flex flex-row-ns flex-column w-100\">\n                                    <div className=\"flex flex-column w-100=\">\n                                      <div className=\"round pa1 bg-white center\">\n                                        <div\n                                          style={{\n                                            width: \"90px\",\n                                            height: \"90px\",\n                                            backgroundImage:\n                                              \"url(\" +\n                                              this.userAvatar(\n                                                this.state.activeCrewMember\n                                              ) +\n                                              \")\"\n                                          }}\n                                          className=\"center pointer round  cover bg-center\"\n                                        ></div>\n                                      </div>\n                                    </div>\n\n                                    <div className=\"flex flex-column justify-center w-100 ph3\">\n                                      <div className=\"f4 flex flex-column items-center w-100 raleway \">\n                                        <span className=\"flex flex-row-ns flex-column w-100 black f3 fw6\">\n                                          <span className=\"flex flex-row items-center justify-start-ns justify-center black-70 f5 fw6\">\n                                            {\n                                              this.state.activeCrewMember\n                                                .profile.name.first\n                                            }{\" \"}\n                                            {\n                                              this.state.activeCrewMember\n                                                .profile.name.last\n                                            }\n                                          </span>\n                                        </span>\n                                      </div>\n                                    </div>\n                                  </div>\n                                </div>\n                                <section id=\"ProfileButtons\">\n                                  <div className=\"flex flex-row mb2-ns w-100 bt b--black-05 \">\n                                    <button\n                                      title=\"View or upload CV\"\n                                      id=\"CV-button\"\n                                      className=\"db relative w-100 pa3 ph4 pv3 br1- bg-white bg-green-\"\n                                    >\n                                      <div id=\"\" className=\"db relative w-100\">\n                                        <span className=\"f5 fw6 black-60 -white ph3-\">\n                                          Cirriculum Vitae{\" \"}\n                                        </span>\n                                      </div>\n                                    </button>\n                                    <button\n                                      title=\"View or upload CV\"\n                                      id=\"CV-button\"\n                                      className=\"db relative w-100 pa3 ph4 pv3 br1- bg-white \"\n                                      // style={{ background: \"#e8e8ec\" }}\n                                    >\n                                      <div id=\"\" className=\"db relative w-100\">\n                                        <span className=\"f6 fw6 black-60 -white ph3-\">\n                                          Add to Network\n                                        </span>\n                                      </div>\n                                    </button>\n                                    <button\n                                      title=\"View or upload CV\"\n                                      id=\"CV-button\"\n                                      className=\"db relative w-100 pa3 ph4 pv3 br1- bg-white bl b--white-20 bw1\"\n                                      // style={{ background: \"#e8e8ec\" }}\n                                    >\n                                      <div id=\"\" className=\"db relative w-100\">\n                                        <span className=\"f6 fw6 black-60 -white ph3-\">\n                                          Send Message\n                                        </span>\n                                      </div>\n                                    </button>\n                                  </div>\n                                </section>\n                                <div className=\"flex flex-row -nsflex-column w-100 black-60 raleway flex-wrap items-center justify-start-ns justify-between pa4 bt b--black-05\">\n                                  <div className=\"flex flex-column w--100 pb1-ns pb2 mr3\">\n                                    <span className=\"flex-column flex f6 fw4 black-40 items-start\">\n                                      <span\n                                        className=\"flex \n mb3\"\n                                      >\n                                        Age\n                                      </span>\n                                      <span className=\"flex items-center justify-center f6 fw6 -ml3-ns black-50- white ph2 pv1 ba b--black-05 br1 -round bw1- bg-white-20- bg-black -ts-a tc ml2-\">\n                                        {moment().diff(\n                                          this.state.activeCrewMember.profile\n                                            .dob,\n                                          \"years\"\n                                        )}\n                                      </span>\n                                    </span>\n                                  </div>\n                                  <div className=\"flex flex-column w--100 pb1-ns pb2 mr3\">\n                                    <span className=\"flex-column flex f6 fw4 black-40 items-start\">\n                                      <span\n                                        className=\"flex \n mb3\"\n                                      >\n                                        Gender\n                                      </span>\n                                      <span className=\"flex items-center justify-center f6 fw6 -ml3-ns black-50- white ph2 pv1 ba b--black-05 br1 -round bw1- bg-white-20- bg-black -ts-a tc ml2-\">\n                                        {(this.state.activeCrewMember.profile\n                                          .gender &&\n                                          this.state.activeCrewMember.profile\n                                            .gender) ||\n                                          \"\"}\n                                      </span>\n                                    </span>\n                                  </div>\n                                  <div className=\"flex flex-column w--100 pb1-ns pb2 mr3\">\n                                    <span className=\"flex-column flex f6 fw4 black-40 items-start\">\n                                      <span\n                                        className=\"flex \n mb3\"\n                                      >\n                                        Location\n                                      </span>\n                                      <span className=\"flex items-center justify-center f6 fw6 -ml3-ns black-50- white ph2 pv1 ba b--black-05 br1 -round bw1- bg-white-20- bg-black -ts-a tc ml2-\">\n                                        {/* {this.userLocation()} */}\n                                      </span>\n                                    </span>\n                                  </div>\n                                </div>\n\n                                <Bio\n                                  user={this.state.activeCrewMember}\n                                  editSkills={null}\n                                  editBio={null}\n                                  canEdit={false}\n                                />\n                                <RecentWork\n                                  type={\"user\"}\n                                  user={this.state.activeCrewMember}\n                                  // projects={this.state.user.profile.projects}\n                                  // addRecentWorkProject={this.addRecentWorkProject}\n                                />\n                              </>\n                            )}\n                        </div>\n                      )}\n                    </div>\n                  </Drawer>\n\n                  {this.state.searchLoading && (\n                    <div className=\"flex flex-column pv3\">\n                      {/* <Spinner size={25} /> */}\n                      <div className=\"sp sp-3balls\"></div>\n                    </div>\n                  )}\n                  {/* <div className=\"flex flex-row-ns flex-column w-100 f5 fw6 black pb3\">\n                {\n                  \n                }\n                </div> */}\n                  {!this.state.searchLoading &&\n                    this.state.drawerType === \"search\" && (\n                      <Transition>\n                        {this.state.crew_[0].users.map(\n                          (item, index) => (\n                            console.log(\"item\", item),\n                            (\n                              <Person\n                                inviteToProject={this.inviteToProject}\n                                toggleInnerDrawer={this.toggleInnerDrawer}\n                                userAvatar={this.userAvatar}\n                                item={item}\n                                project={this.props.project}\n                                position={this.state.crew_[0].position}\n                              />\n                            )\n                          )\n                        )}\n                      </Transition>\n                    )}\n                </div>\n              </div>\n            )}\n\n            {this.state.drawerType === \"search\" && (\n              <div className=\"form-row flex flex-column ph3 pv3 bb b--black-05\">\n                <div className=\"form-row flex flex-column\">\n                  <div className=\"flex flex-row f5 fw4 black-50 pb3\">\n                    Invite user by email for position{\" \"}\n                    <span className=\"fw6 black ml2\">\n                      {!this.state.searchLoading &&\n                        this.state.crew_[0] &&\n                        this.state.crew_[0].position}\n                    </span>\n                  </div>\n\n                  {/* <label className=\"f6 fw5 black-50 pb2\">Email address</label> */}\n                  <div className=\"flex flex-row \">\n                    <input\n                      ref={this.inviteByEmailAddress}\n                      type={\"text\"}\n                      placeholder={\"Enter email address\"}\n                      className=\"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a w-100\"\n                    />\n\n                    <div class=\"flex flex-column w-20 bl b--black-05\">\n                      <button\n                        onClick={this.inviteByEmail}\n                        class=\"pointer flex h-100 items-center justify-center f6 bg-white bn f5 fw6 black-50 \"\n                      >\n                        Invite\n                        {this.state.inviteBusy ? (\n                          <div className=\"flex flex-column items-start ml2\">\n                            <Spinner size={15} />\n                          </div>\n                        ) : (\n                          <Icon icon=\"arrow-right\" className=\"ml2\"></Icon>\n                        )}\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            )}\n          </>{\" \"}\n        </Drawer>\n      </>\n    );\n  }\n}\n\n// export default People;\nRateCalculator.contextType = AccountContext;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { DatePicker, Drawer, Popconfirm, message, Checkbox } from \"antd\";\nimport moment from \"moment\";\nimport AccountContext from \"../../../utils/context/AccountContext.js\";\n// import Fn from '../../../utils/fn/Fn.js';\nimport LocationSearchBar from \"../../elements/display/forms/LocationSearchBar.js\";\nimport PageTitle from \"../../elements/layout/PageTitle_B.js\";\nimport FormCrew from \"../CrewFinder/CrewFinder_People.js\";\n\nimport { Icon, Dialog, Spinner } from \"@blueprintjs/core\";\n\nimport { TH_LIST } from \"@blueprintjs/icons/lib/esm/generated/iconNames\";\nimport FormInvite from \"../../elements/forms/Invite.js\";\nimport constants from \"../../../utils/constants.js\";\nimport { Fn, app } from \"../../../utils/fn/Fn.js\";\nimport Loading from \"../../elements/Loading.js\";\n\nimport Bio from \"../_Elements/Bio/Bio.jsx\";\nimport Network from \"../_Elements/Network/Network.jsx\";\nimport RecentWork from \"../RecentWork/index.js\";\nimport Transition from \"../../Layouts/Transition.js\";\nimport Person from \"../Person\";\nimport UserList from \"../UserList\";\nimport \"./style.css\";\n// import { motion, AnimatePresence } from 'framer-motion'\n// // import { Motion, Frame, Scroll, useCycle } from \"framer\"\n\n// const spring = {\n//   type: \"spring\",\n//   damping: 20,\n//   stiffness: 300\n// };\n\n// const container = {\n//   hidden: { opacity: 0 },\n//   show: {\n//     opacity: 1,\n//     transition: {\n//       // delayChildren: 0.5,\n//       staggerChildren: 0.5,\n//       // delay: 1,\n//     x: { type: \"spring\", stiffness: 100 },\n//     default: { duration: 2 },\n//     }\n\n//   }\n// }\n\n// const item = {\n//   hidden: { opacity: 0 },\n//   show: { opacity: 1 }\n// }\n\nexport default class Checklist extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hasError: false,\n      project: this.props.project,\n      drawerOpen: false,\n      innerDrawerOpen: false,\n      ready: false,\n      checklistsReady: true,\n      checklists: [],\n      activeChecklist: {},\n      checkListItemLabelInputError: false,\n      view: null,\n      views: [],\n      projectType: this.props.project.type,\n      startDate: this.props.project.start_date,\n      endDate: this.props.project.end_date,\n      location: this.props.project.location,\n      loading: false,\n      x: false,\n      lightboxActive: false,\n      productionCrew: [],\n      crew: [],\n      crew_: [],\n      searchLoading: false,\n      activeCrewMember: null,\n      inviteBusy: false,\n      isDeleting: [],\n      isDeletingStart: [],\n      del: [],\n      deleteConfirmation: [],\n      drawerType: \"search\"\n    };\n\n    this.toggleDrawer = this.toggleDrawer.bind(this);\n    this.toggleInnerDrawer = this.toggleInnerDrawer.bind(this);\n    this.closeInnerDrawer = this.closeInnerDrawer.bind(this);\n\n    this.openFilePanel = this.openFilePanel.bind(this);\n    this.setView = this.setView.bind(this);\n    this.setChecklist = this.setChecklist.bind(this);\n    // this.setButtons = this.setButtons.bind(this);\n    this.handleStartDateChange = this.handleStartDateChange.bind(this);\n    this.handleEndDateChange = this.handleEndDateChange.bind(this);\n    this.handleProjectTypeChange = this.handleProjectTypeChange.bind(this);\n    this.updateProject = this.updateProject.bind(this);\n    this.updateProjectLocation = this.updateProjectLocation.bind(this);\n    this.openSearchDialog = this.openSearchDialog.bind(this);\n    this.closeDialog = this.closeDialog.bind(this);\n    this.searchProjects = this.searchProjects.bind(this);\n    this.userAvatar = this.userAvatar.bind(this);\n    this.search = this.search.bind(this);\n    this.inviteByEmail = this.inviteByEmail.bind(this);\n    this.remove = this.remove.bind(this);\n    this.confirmDelete = this.confirmDelete.bind(this);\n    this.addChecklist = this.addChecklist.bind(this);\n    this.addChecklistItem = this.addChecklistItem.bind(this);\n    this.updateChecklistTitle = this.updateChecklistTitle.bind(this);\n    this.checkItem = this.checkItem.bind(this);\n    // this.inviteToProject = this.inviteToProject.bind(this)\n    // this.toggleLightbox = this.toggleLightbox.bind(this)\n\n    this.projectTitle = React.createRef();\n    this.projectDescription = React.createRef();\n    this.inviteByEmailAddress = React.createRef();\n    this.checklistTitle = React.createRef();\n    this.checklistItemLabel = React.createRef();\n    // this.c/\n    window.self = this;\n  }\n  // toggleLightbox() {\n\n  //   alert()\n\n  //   this.setState({\n  //     lightboxActive: !this.state.lightboxActive\n  //   })\n  // }\n  //   async inviteToProject(item) {\n  //     this.setState({ inviteBusy: true })\n  //     console.log(item);\n  // let userId = item.id;\n  //     let project = this.props.project;\n  //     let crew = project.crew;\n  //     let position = this.state.crew_[0].position;\n  //     let crewItem = {\n  //       position: position,\n  //       id: userId\n  //     }\n  //     // let itemIndex = crew.findIndex(a => a.id === userId);\n  //     // crew.splice(itemIndex, 1);\n  //     crew.push(crewItem)\n  //     // this.setState({\n  //     //   crew: crew\n  //     // })\n\n  //     project.crew = crew;\n\n  //     await app.updateProject({ self: this, project }).then( async res => {\n  //       await app.fetchCrew({ self: this, project })\n  //       setTimeout(() => {\n\n  //       this.setState({ inviteBusy: false })\n  //       },1000)\n  //     })\n\n  //   }\n  async checkItem(index) {\n    let checklists = this.state.checklists;\n    let checklist = checklists[this.state.activeChecklist];\n\n    if (checklist.checked[index] === true) {\n      checklist.checked[index] = false;\n    } else {\n      checklist.checked[index] = true;\n    }\n\n    checklists[this.state.activeChecklist] = checklist;\n    this.setState({\n      checklists: checklists\n    });\n\n    let project = this.props.project;\n\n    project.checklists = checklists;\n\n    await app.updateProject({self:this, project})\n\n  }\n  async addChecklistItem() {\n    if (this.checklistItemLabel.current.value === \"\") {\n      this.setState({\n        checkListItemLabelInputError: true\n      });\n    } else {\n      let item = {\n        label: this.checklistItemLabel.current.value\n      };\n\n      console.log(\"new checklist item \", item);\n      let checklists = this.state.checklists;\n      let checklist = checklists[this.state.activeChecklist];\n\n      checklist.items.push(item);\n      checklist.checked.push(false);\n\n      checklists[this.state.activeChecklist] = checklist;\n\n      this.setState({\n        checklists: checklists\n      });\n      this.setState({\n        checkListItemLabelInputError: false\n      });\n      this.checklistItemLabel.current.value = null;\n\n      let project = this.props.project;\n\n    project.checklists = checklists;\n\n    await app.updateProject({self:this, project})\n\n    }\n\n    \n\n  }\n  async updateChecklistTitle() {\n    let title = this.checklistTitle.current.value;\n    let activeChecklist = this.state.activeChecklist;\n    let checklists = this.state.checklists;\n    let checklist = checklists[activeChecklist];\n    checklist.title = title;\n    checklists[activeChecklist] = checklist;\n    this.setState({\n      checklists: checklists\n    });\n\n    let project = this.props.project;\n\n    project.checklists = checklists;\n\n    await app.updateProject({self:this, project})\n\n  }\n\n  async addChecklist() {\n\n    let checklists = this.state.checklists;\n    // let checklistLabel = this.checklistLabel.current.value;\n\n    let newChecklist = {\n      title: \"Untitled\",\n      items: [],\n      checked: []\n    }\n\n    checklists.push(newChecklist)\n\n    this.setState({\n      checklists: checklists,\n      activeChecklist: this.state.checklists.length - 1\n    })\n    \n    let project = this.props.project;\n\n    project.checklists = checklists;\n\n    await app.updateProject({self:this, project})\n\n\n  }\n  confirmDelete({ item, index }) {\n    let deleteConfirmation = this.state.deleteConfirmation;\n    deleteConfirmation[index] = true;\n\n    this.setState({\n      deleteConfirmation: deleteConfirmation\n    });\n  }\n  async remove({ item, index }) {\n    let isDeleting = this.state.isDeleting;\n    let isDeletingStart = this.state.isDeletingStart;\n\n    isDeletingStart[index] = true;\n\n    this.setState({\n      isDeletingStart: isDeletingStart\n    });\n    setTimeout(async () => {\n      isDeleting[index] = true;\n      isDeletingStart[index] = false;\n      this.setState({\n        isDeleting: isDeleting,\n        isDeletingStart: isDeletingStart\n      });\n\n      let userId = item.id;\n      let project = this.props.project;\n      let crew = project.crew;\n\n      let itemIndex = crew.findIndex(a => a.id === userId);\n      crew.splice(itemIndex, 1);\n\n      project.crew = crew;\n\n      await app.updateProject({ self: this, project }).then(async res => {\n        await app.fetchCrew({ self: this, project });\n      });\n    }, 1000);\n  }\n  async inviteByEmail() {\n    this.setState({ inviteBusy: true });\n    let projectOwner = this.props.projectOwner;\n    let email = this.inviteByEmailAddress.current.value;\n    let position = this.state.crew_[0].position;\n    let link = window.location.href + \"?newInvite=true&referrer=email\";\n    await app.inviteByEmail({\n      self: this,\n      link,\n      position,\n      project: this.props.project,\n      projectOwner,\n      email\n    });\n  }\n  closeInnerDrawer() {\n    this.setState({\n      innerDrawerOpen: false\n    });\n  }\n  toggleInnerDrawer(item) {\n    this.setState({\n      innerDrawerOpen: true,\n      activeCrewMember: item\n    });\n    // this.state.activeCrewMember\n  }\n  toggleDrawer({ item, type }) {\n    this.setState({\n      drawerType: type,\n      drawerOpen: !this.state.drawerOpen\n      // activeCrewMember: item\n    });\n  }\n  async search(data) {\n    console.log(\"search\", data);\n\n    const { index, position, type } = data;\n\n    this.toggleDrawer({ item: index, type });\n\n    this.setState({\n      searchLoading: true,\n      drawerType: type\n    });\n\n    let positions = [position];\n\n    let a = await Fn.fetchUsers({ self: this, positions });\n\n    console.log(\"searched crew\", a, this.state.crew);\n  }\n  userAvatar(item) {\n    let avatar =\n      typeof item && item.profile && item.profile.picture !== \"undefined\"\n        ? item.profile.picture\n        : constants.placeholderImage;\n    return avatar;\n  }\n  closeDialog() {\n    this.setState({\n      isOpen: false\n    });\n  }\n  searchProjects(data) {\n    const { location, projectType, startDate, endDate } = data;\n\n    this.setState({\n      ready: false\n    });\n\n    console.log(\"search config \", data);\n\n    console.log(this.state.projects);\n\n    let location_;\n\n    if (typeof data.location.County !== \"undefined\") {\n      location_ = data.location.County.toLowerCase();\n    } else {\n      location_ = data.location.address.county.toLowerCase();\n    }\n\n    let projects = this.state.projects;\n\n    console.log(\"location\", location_);\n\n    let filtered = projects.filter(\n      p => p.location.toLowerCase() === location_ && p.type === projectType\n    );\n\n    let filteredDateRange = filtered.filter(p =>\n      moment(p.start_date).isBetween(data.startDate, data.endDate)\n    );\n\n    console.log(\"filtered\", filtered);\n    console.log(\"filteredDateRange\", filteredDateRange);\n\n    this.setState({\n      projects: filteredDateRange,\n      ready: true,\n      isOpen: false\n    });\n  }\n  openSearchDialog() {\n    this.setState({ isOpen: true });\n  }\n  updateProjectLocation(item) {\n    console.log(\"updateProjectLocation\", item);\n    this.setState({\n      location: item\n    });\n  }\n  // setButtons() {\n\n  //   this.setState({\n  //     buttons: buttons,\n  //     activeButton: buttons[0],\n  //     views: views,\n  //     view: views[0]\n  //   });\n  // }\n  setView(config) {\n    const { view, button } = config;\n    this.setState({\n      ready: false\n    });\n    this.setState({\n      view: view,\n      activeButton: button\n    });\n    setTimeout(() => {\n      this.setState({\n        ready: true\n      });\n    }, 1000);\n\n    Fn.store({ label: \"projectSettingsView\", value: view });\n    Fn.store({ label: \"projectSettingsActiveButton\", value: button });\n\n    view === \"discussion\" &&\n      setTimeout(\n        () =>\n          document.querySelector(\"body\").scroll({\n            top: 130,\n            left: 0,\n            behavior: \"smooth\"\n          }),\n        1000\n      );\n  }\n  setChecklist(index) {\n    this.setState({\n      // view: view,\n      activeChecklist: index\n    });\n  }\n  openFilePanel(file) {\n    this.setState({\n      activeFile: file\n    });\n    this.toggleDrawer();\n  }\n\n  handleProjectTypeChange = type => {\n    this.setState({\n      projectType: type\n    });\n  };\n  handleStartDateChange = e => {\n    window.log.warn(\"start date\", e.toString());\n    this.setState({\n      startDate: e.toString()\n    });\n  };\n  handleEndDateChange = e => {\n    window.log.warn(\"end date\", e.toString());\n    this.setState({\n      endDate: e.toString()\n    });\n  };\n  updateProject = async () => {\n    message.config({\n      top: \"40vh\"\n      // duration: 1000,\n      // maxCount: 3,\n    });\n    message.loading(\"Saving project..\", 0);\n    // Dismiss manually and asynchronously\n    // setTimeout(hide, 2500);\n\n    this.setState({\n      loading: true\n      // x: TextTrackCueList\n    });\n    const project = this.props.project;\n\n    // let checklists = project.checklists;\n    let checklists = this.state.checklists;\n    project.checklists = checklists;\n\n    // project.start_date = this.state.startDate;\n    // project.end_date = this.state.endDate;\n    // project.title = this.projectTitle.current.value;\n    // project.description = this.projectDescription.current.value;\n    // project.location = this.state.location;\n    // project.updatedAt = moment(new Date()).toString();\n\n    console.log(\"Project update data \", project);\n\n    let url = Fn.api(\"projects\") + project.id;\n\n    let config = {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(project)\n    };\n\n    await fetch(url, config)\n      .then(res => {\n        return res.json();\n      })\n      .then(res => {\n        console.log(res);\n\n        this.setState({ project: res });\n\n        Fn.store({ label: \"activeProject\", value: res });\n\n        setTimeout(() => {\n          this.setState({\n            loading: false,\n            x: false\n          });\n\n          document.querySelector(\"body\").scroll({\n            top: 0,\n            left: 0,\n            behavior: \"smooth\"\n          });\n          message.destroy();\n          message.success(\"Project Updated\", 1000);\n          setTimeout(() => {\n            message.destroy();\n          }, 1000);\n        }, 1000);\n        // this.props.updateProject({ project: res })\n      });\n  };\n  componentDidMount = async () => {\n    console.log('project',this.props.project)\n    if(this.props.project.hasOwnProperty('checklists')){\n      this.setState({\n        checklists: this.props.project.checklists,\n        activeChecklist: this.props.project.checklists[0],\n        checklistsReady: true\n      })\n    }\n    else {\n      this.setState({\n        checklists: [],\n        activeChecklist: null,\n        checklistsReady: true\n      })\n    }\n\n    // this.setButtons();\n    // if (localStorage.projectSettingsView !== null) {\n    //   let view = Fn.get(\"projectSettingsView\");\n    //   this.setState({\n    //     view: view\n    //     // activeButton: activeButton\n    //   });\n    // } else {\n    //   this.setState({\n    //     view: \"production\"\n    //   });\n    // }\n    // if (localStorage.projectSettingsActiveButton !== null) {\n    //   let activeButton = Fn.get(\"projectSettingsActiveButton\");\n    //   this.setState({\n    //     // view: view,\n    //     activeButton: activeButton\n    //   });\n    // } else {\n    //   this.setState({\n    //     view: \"production\"\n    //   });\n    // }\n    // await app.fetchProductionCrew({ self: this, project: this.props.project });\n    // await app.fetchCrew({ self: this, project: this.props.project });\n    // setTimeout(() => {\n    //   this.setState({\n    //     view: this.state.views[0],\n    //     activeButton: this.state.buttons[0]\n    //   })\n    // },1000)\n  };\n\n  static getDerivedStateFromError(error) {\n    // getDerivedStateFromError -> Update state so the next render will show the fallback UI.\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, info) {\n    // You can also log the error to an error reporting service\n  }\n\n  getDerivedStateFromProps = (nextProps, prevState) => {};\n\n  getSnapshotBeforeUpdate = (prevProps, prevState) => {};\n\n  componentDidUpdate = () => {};\n\n  componentWillUnmount = () => {};\n\n  render() {\n    if (this.state.hasError) {\n      return <h1>Something went wrong.</h1>;\n    }\n    return (\n      <>\n        <section id=\"People\" className=\"flex flex-column w-100 pb4 pt0\">\n          <div className=\"flex flex-row mb4 \">\n            <PageTitle\n              title={\"Checklist\"}\n              docs={this.state.checklists}\n              ready={this.state.ready}\n            />\n          </div>\n\n          <section id=\"CheckListBar\" className=\"flex flex-column mb3 \">\n            <div className=\"flex flex-row justify-between mb3\">\n              <div className=\"flex flex-row round\">\n                <button\n                  title={\"Add checklist\"}\n                  onClick={this.addChecklist}\n                  // id={}\n                  className={\n                    \" bg-black-20 flex flex-column pa0 mr3- pointer justify-center flex-auto\"\n                  }\n                >\n                  <div\n                    id=\"\"\n                    className=\"flex flex-row ph0 pv0 items-center justify-center\"\n                  >\n                    <span className=\"f5 fw6 white ph4 pv2\">\n                      Add Checklist\n                      <Icon icon=\"plus\" />\n                    </span>\n                  </div>\n                </button>\n              </div>\n            </div>\n          </section>\n\n          {this.state.checklistsReady && (\n            <section id=\"CheckListBar\" className=\"flex flex-column mb3 \">\n              <div className=\"flex flex-row justify-between mb3\">\n                <div className=\"flex flex-row round\">\n                  {this.state.checklists.map((checklist, index) => (\n                    <button\n                      title={checklist.title}\n                      onClick={() => {\n                        this.setState({ activeChecklist: index });\n                      }}\n                      id={checklist.title}\n                      className={\n                        (index > 0 && \" bl b--black-05 \") +\n                        (this.state.activeChecklist === index\n                          ? \" bg-white-60 \"\n                          : \" bg-white \") +\n                        \" flex flex-column pa0 mr3- pointer justify-center flex-auto\"\n                      }\n                    >\n                      <div\n                        id=\"\"\n                        className=\"flex flex-row ph0 pv0 items-center justify-center ph4 \"\n                      >\n                        <span\n                         className=\"f5 fw6 black-70 pv2\">\n                          {checklist.title}\n                        </span>\n                        <span\n                         className=\"f6 fw5 black-40 pv2 ml2\">\n                          {checklist.checked.filter(a => a === true).length} / {checklist.items.length} \n                        </span>\n                      </div>\n                    </button>\n                  ))}\n                </div>\n              </div>\n            </section>\n          )}\n\n          <div className=\"w-100-ns w-100 flex flex-row flex-wrap justify-between br3- -overflow-hidden\">\n            {this.state.x ? (\n              <Icon\n                icon=\"loading\"\n                iconSize=\"15\"\n                className=\"absolute right-0 f4 black-60 mr3\"\n              />\n            ) : (\n              <Icon\n                icon=\"swap-right\"\n                iconSize=\"15\"\n                className=\"f4 black-60 -white  absolute right-0 mr3\"\n              />\n            )}\n\n            {this.context.isAuthenticated && this.state.view === \"production\" && (\n              <>\n                <div\n                  id=\"ProductionCrewList\"\n                  className=\"flex flex-column mb3 w-100\"\n                >\n                  <div className=\"flex flex-row f5 fw5 black-50 pb4 items-center\">\n                    Assigned Production Crew{\" \"}\n                    <div\n                      style={{\n                        color: \"white\",\n                        fontWeight: \"bold\",\n                        marginLeft: \"1rem\",\n                        background: \"#c4c4c7\"\n                      }}\n                      className={\"  count-badge- f7 pv1 ph2 br1 -bg-white \"}\n                    >\n                      <span className={\"bg-white-\"}>\n                        {(this.state.ready &&\n                          this.state.productionCrew.length) ||\n                          0}\n                      </span>\n                    </div>\n                  </div>\n\n                  <UserList\n                    crew={this.state.productionCrew}\n                    invited={this.props.invited}\n                    userAvatar={this.userAvatar}\n                    confirmDelete={this.confirmDelete}\n                    remove={this.remove}\n                    state={this.state}\n                    ready={this.state.ready}\n                    toggleDrawer={this.toggleDrawer}\n                    type={\"production\"}\n                  />\n                </div>\n              </>\n            )}\n\n            {this.state.checklists.length > 0 && (\n              <div\n                id=\"Checklist_form\"\n                className=\"flex flex-column mb3 w-100 mw6 left\"\n              >\n                <div className=\"flex flex-column w-100 pt4\">\n                  <div className=\"flex flex-column f4 fw7 black pb2\">\n                    <input\n                      ref={this.checklistTitle}\n                      className=\"checklist-title f4 fw6 black pv2 bn bg-transparent mb3\"\n                      type={\"text\"}\n                      onChange={this.updateChecklistTitle}\n                      value={\n                        this.state.checklists[this.state.activeChecklist] &&\n                        this.state.checklists[this.state.activeChecklist].title\n                      }\n                    />\n                  </div>\n                  <div className=\"flex flex-column f5 fw5 black-50 pv3\">\n                    Add checklist item\n                  </div>\n\n                  {/* {\n                    this.state.checkListItemLabelInputError && \n                    <div className=\"flex flex-column f6 fw5 red \">Enter a label</div>\n                  } */}\n                </div>\n                <div className=\"checklist-items flex flex-column flex-auto mw6 left mt3\">\n                  {this.state.checklists[this.state.activeChecklist] && this.state.checklists[this.state.activeChecklist].items.map(\n                    (item, index) => (\n                      <div\n                        onClick={() => this.checkItem(index)}\n                        className=\"checklist-item justify-between flex flex-row flex-auto ba mb3 br2 b--black-05\"\n                      >\n                        <span className=\"flex flex-column f4 fw6 black-70 pv3 ph4\">\n                          {item.label}\n                        </span>\n\n                        <div\n                          className={\n                            (this.state.checklists[this.state.activeChecklist]\n                              .checked[index]\n                              ? \" bg-blue \"\n                              : \" bg-white-50 \") +\n                            \" flex flex-column items-center justify-center ph4 pv3 w3\"\n                          }\n                        >\n                          {this.state.checklists[this.state.activeChecklist]\n                            .checked[index] ? (\n                            <Icon icon={\"tick\"} className=\"white f4 fw6 \" />\n                          ) : (\n                            <Icon icon={\"ring\"} className=\"black-20 f4 fw6 \" />\n                          )}\n                        </div>\n                      </div>\n                    )\n                  )}\n                </div>\n\n                <div\n                  className={\n                    (this.state.checkListItemLabelInputError\n                      ? \"  ba- b--re-d -bw2 \"\n                      : \" \") + \" flex flex-row f5 fw5 black-50 \"\n                  }\n                >\n                  <input\n                    ref={this.checklistItemLabel}\n                    className={\n                      (this.state.checkListItemLabelInputError\n                        ? \" red \"\n                        : \"  black-40 \") +\n                      \" checklist-item-title f5 fw6 ph3 pv3 bn w-100 \"\n                    }\n                    placeholder={\n                      this.state.checkListItemLabelInputError\n                        ? \"Enter a label\"\n                        : \"\"\n                    }\n                    type={\"text\"}\n                    required={true}\n                  />\n                  <button\n                    title={\"Add checklist\"}\n                    onClick={this.addChecklistItem}\n                    // id={}\n                    className={\" addChecklistButton ph0\"}\n                  >\n                    <div\n                      className={\n                        \" flex flex-column items-center justify-center ph4 pv3 w3 bg-black-20\"\n                      }\n                    >\n                      <Icon icon={\"plus\"} className=\"white f4 fw6 \" />\n                    </div>\n                  </button>\n                </div>\n                {/* <FormCrew project={this.props.project} search={this.search} /> */}\n              </div>\n            )}\n          </div>\n        </section>\n\n        <Dialog\n          className={\"bp3-light\"}\n          // icon=\"info-sign\"\n          onClose={this.closeDialog}\n          title={this.state.dialogTitle}\n          {...this.state}\n        >\n          <FormInvite\n            inviteBusy={this.state.inviteBusy}\n            inviteByEmail={this.inviteByEmail}\n            project={this.props.project}\n            projectOwner={this.props.projectOwner}\n            productionCrew={this.state.productionCrew}\n          />\n        </Dialog>\n\n        <Drawer\n          title={\"Crew Search\"}\n          closable={true}\n          onClose={this.toggleDrawer}\n          visible={this.state.drawerOpen}\n          width={\"60vw\"}\n        >\n          <>\n            {this.state.drawerOpen && (\n              <div className=\"pointer flex flex-column justify-end items-start pa3 bg-white \">\n                {!this.state.searchLoading &&\n                  this.state.drawerType === \"search\" && (\n                    <Transition>\n                      <h3 className=\"f5 fw4 black-50 tc pv2 ph3 word-break-all flex items-center\">\n                        <span className=\"flex flex-row ph2 pv0 round bg-black-20 white mr2 f5 fw6\">\n                          {!this.state.searchLoading &&\n                            this.state.crew_[0] &&\n                            this.state.crew_[0].users.length}\n                        </span>{\" \"}\n                        Users with role{\" \"}\n                        <span className=\"fw6 white ml2 ph3 pv1 round bg-black-20\">\n                          {!this.state.searchLoading &&\n                            this.state.crew_[0] &&\n                            this.state.crew_[0].position}\n                        </span>\n                      </h3>\n                    </Transition>\n                  )}\n                <div\n                  // onClick={this.toggleLightbox}\n                  className=\"pointer flex flex-column justify-end items-start pa3 bg-white w-100 flex-auto\"\n                >\n                  <Drawer\n                    title=\"Crew Detail\"\n                    placement=\"right\"\n                    closable={true}\n                    onClose={this.closeInnerDrawer}\n                    visible={this.state.innerDrawerOpen}\n                    width={\"40vw\"}\n                  >\n                    <div\n                      // onClick={this.toggleLightbox}\n                      className=\"pointer flex flex-column justify-end items-start pa0 bg-white w-100 flex-auto\"\n                    >\n                      {this.state.innerDrawerOpen && (\n                        <div\n                          // onClick={this.toggleLightbox}\n                          className=\"pointer flex flex-column justify-end items-start pa0 bg-white\"\n                        >\n                          {!this.state.searchLoading &&\n                            this.state.activeCrewMember !== null && (\n                              <>\n                                <div\n                                  // to={\"/user/\" + item.id}\n                                  // onClick={this.toggleInnerDrawer}\n                                  id=\"ProjectOwner\"\n                                  className=\"flex flex-column w-100 pa0\"\n                                >\n                                  <div className=\"pa4 flex flex-row-ns flex-column w-100\">\n                                    <div className=\"flex flex-column w-100=\">\n                                      <div className=\"round pa1 bg-white center\">\n                                        <div\n                                          style={{\n                                            width: \"90px\",\n                                            height: \"90px\",\n                                            backgroundImage:\n                                              \"url(\" +\n                                              this.userAvatar(\n                                                this.state.activeCrewMember\n                                              ) +\n                                              \")\"\n                                          }}\n                                          className=\"center pointer round  cover bg-center\"\n                                        ></div>\n                                      </div>\n                                    </div>\n\n                                    <div className=\"flex flex-column justify-center w-100 ph3\">\n                                      <div className=\"f4 flex flex-column items-center w-100 raleway \">\n                                        <span className=\"flex flex-row-ns flex-column w-100 black f3 fw6\">\n                                          <span className=\"flex flex-row items-center justify-start-ns justify-center black-70 f5 fw6\">\n                                            {\n                                              this.state.activeCrewMember\n                                                .profile.name.first\n                                            }{\" \"}\n                                            {\n                                              this.state.activeCrewMember\n                                                .profile.name.last\n                                            }\n                                          </span>\n                                        </span>\n                                      </div>\n                                    </div>\n                                  </div>\n                                </div>\n                                <section id=\"ProfileButtons\">\n                                  <div className=\"flex flex-row mb2-ns w-100 bt b--black-05 \">\n                                    <button\n                                      title=\"View or upload CV\"\n                                      id=\"CV-button\"\n                                      className=\"db relative w-100 pa3 ph4 pv3 br1- bg-white bg-green-\"\n                                    >\n                                      <div id=\"\" className=\"db relative w-100\">\n                                        <span className=\"f5 fw6 black-60 -white ph3-\">\n                                          Cirriculum Vitae{\" \"}\n                                        </span>\n                                      </div>\n                                    </button>\n                                    <button\n                                      title=\"View or upload CV\"\n                                      id=\"CV-button\"\n                                      className=\"db relative w-100 pa3 ph4 pv3 br1- bg-white \"\n                                      // style={{ background: \"#e8e8ec\" }}\n                                    >\n                                      <div id=\"\" className=\"db relative w-100\">\n                                        <span className=\"f6 fw6 black-60 -white ph3-\">\n                                          Add to Network\n                                        </span>\n                                      </div>\n                                    </button>\n                                    <button\n                                      title=\"View or upload CV\"\n                                      id=\"CV-button\"\n                                      className=\"db relative w-100 pa3 ph4 pv3 br1- bg-white bl b--white-20 bw1\"\n                                      // style={{ background: \"#e8e8ec\" }}\n                                    >\n                                      <div id=\"\" className=\"db relative w-100\">\n                                        <span className=\"f6 fw6 black-60 -white ph3-\">\n                                          Send Message\n                                        </span>\n                                      </div>\n                                    </button>\n                                  </div>\n                                </section>\n                                <div className=\"flex flex-row -nsflex-column w-100 black-60 raleway flex-wrap items-center justify-start-ns justify-between pa4 bt b--black-05\">\n                                  <div className=\"flex flex-column w--100 pb1-ns pb2 mr3\">\n                                    <span className=\"flex-column flex f6 fw4 black-40 items-start\">\n                                      <span\n                                        className=\"flex \n mb3\"\n                                      >\n                                        Age\n                                      </span>\n                                      <span className=\"flex items-center justify-center f6 fw6 -ml3-ns black-50- white ph2 pv1 ba b--black-05 br1 -round bw1- bg-white-20- bg-black -ts-a tc ml2-\">\n                                        {moment().diff(\n                                          this.state.activeCrewMember.profile\n                                            .dob,\n                                          \"years\"\n                                        )}\n                                      </span>\n                                    </span>\n                                  </div>\n                                  <div className=\"flex flex-column w--100 pb1-ns pb2 mr3\">\n                                    <span className=\"flex-column flex f6 fw4 black-40 items-start\">\n                                      <span\n                                        className=\"flex \n mb3\"\n                                      >\n                                        Gender\n                                      </span>\n                                      <span className=\"flex items-center justify-center f6 fw6 -ml3-ns black-50- white ph2 pv1 ba b--black-05 br1 -round bw1- bg-white-20- bg-black -ts-a tc ml2-\">\n                                        {(this.state.activeCrewMember.profile\n                                          .gender &&\n                                          this.state.activeCrewMember.profile\n                                            .gender) ||\n                                          \"\"}\n                                      </span>\n                                    </span>\n                                  </div>\n                                  <div className=\"flex flex-column w--100 pb1-ns pb2 mr3\">\n                                    <span className=\"flex-column flex f6 fw4 black-40 items-start\">\n                                      <span\n                                        className=\"flex \n mb3\"\n                                      >\n                                        Location\n                                      </span>\n                                      <span className=\"flex items-center justify-center f6 fw6 -ml3-ns black-50- white ph2 pv1 ba b--black-05 br1 -round bw1- bg-white-20- bg-black -ts-a tc ml2-\">\n                                        {/* {this.userLocation()} */}\n                                      </span>\n                                    </span>\n                                  </div>\n                                </div>\n\n                                <Bio\n                                  user={this.state.activeCrewMember}\n                                  editSkills={null}\n                                  editBio={null}\n                                  canEdit={false}\n                                />\n                                <RecentWork\n                                  type={\"user\"}\n                                  user={this.state.activeCrewMember}\n                                  // projects={this.state.user.profile.projects}\n                                  // addRecentWorkProject={this.addRecentWorkProject}\n                                />\n                              </>\n                            )}\n                        </div>\n                      )}\n                    </div>\n                  </Drawer>\n\n                  {this.state.searchLoading && (\n                    <div className=\"flex flex-column pv3\">\n                      {/* <Spinner size={25} /> */}\n                      <div className=\"sp sp-3balls\"></div>\n                    </div>\n                  )}\n                  {/* <div className=\"flex flex-row-ns flex-column w-100 f5 fw6 black pb3\">\n                {\n                  \n                }\n                </div> */}\n                  {!this.state.searchLoading &&\n                    this.state.drawerType === \"search\" && (\n                      <Transition>\n                        {this.state.crew_[0].users.map(\n                          (item, index) => (\n                            console.log(\"item\", item),\n                            (\n                              <Person\n                                inviteToProject={this.inviteToProject}\n                                toggleInnerDrawer={this.toggleInnerDrawer}\n                                userAvatar={this.userAvatar}\n                                item={item}\n                                project={this.props.project}\n                                position={this.state.crew_[0].position}\n                              />\n                            )\n                          )\n                        )}\n                      </Transition>\n                    )}\n                </div>\n              </div>\n            )}\n\n            {this.state.drawerType === \"search\" && (\n              <div className=\"form-row flex flex-column ph3 pv3 bb b--black-05\">\n                <div className=\"form-row flex flex-column\">\n                  <div className=\"flex flex-row f5 fw4 black-50 pb3\">\n                    Invite user by email for position{\" \"}\n                    <span className=\"fw6 black ml2\">\n                      {!this.state.searchLoading &&\n                        this.state.crew_[0] &&\n                        this.state.crew_[0].position}\n                    </span>\n                  </div>\n\n                  {/* <label className=\"f6 fw5 black-50 pb2\">Email address</label> */}\n                  <div className=\"flex flex-row \">\n                    <input\n                      ref={this.inviteByEmailAddress}\n                      type={\"text\"}\n                      placeholder={\"Enter email address\"}\n                      className=\"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a w-100\"\n                    />\n\n                    <div class=\"flex flex-column w-20 bl b--black-05\">\n                      <button\n                        onClick={this.inviteByEmail}\n                        class=\"pointer flex h-100 items-center justify-center f6 bg-white bn f5 fw6 black-50 \"\n                      >\n                        Invite\n                        {this.state.inviteBusy ? (\n                          <div className=\"flex flex-column items-start ml2\">\n                            <Spinner size={15} />\n                          </div>\n                        ) : (\n                          <Icon icon=\"arrow-right\" className=\"ml2\"></Icon>\n                        )}\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            )}\n          </>{\" \"}\n        </Drawer>\n      </>\n    );\n  }\n}\n\n// export default People;\nChecklist.contextType = AccountContext;\n","import React from \"react\";\n// import OnboardingForm from './OnboardingSteps';\nimport \"./style.css\";\n\n// import Filepond from '../../upload/Filepond.js';\n\nimport { DatePicker, TimePicker, Steps, Select, Button, message } from \"antd\";\nimport { Icon } from \"@blueprintjs/core\";\n// import { TimePicker } from '@blueprintjs/datetime';\nimport moment from \"moment\";\nimport LocationSearchBar from \"../display/forms/LocationSearchBar2.js\";\nimport Fn from \"../../../utils/fn/Fn.js\";\n\nconst { MonthPicker, RangePicker } = DatePicker;\nconst dateFormat = \"YYYY/MM/DD\";\n\n// import { DatePicker, TimePrecision } from \"@blueprintjs/datetime\";\n// const { Step } = Steps;\n// const { Option } = Select;\n\n// const steps = [\n//   {\n//     title: 'First',\n//     content: 'First-content',\n//   },\n//   {\n//     title: 'Second',\n//     content: 'Second-content',\n//   },\n//   {\n//     title: 'Last',\n//     content: 'Last-content',\n//   },\n// ];\nexport default class AddItineraryItem extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      // projectType: '',\n      startDate: this.props.eventData && this.props.eventData.start,\n      endDate: this.props.eventData && this.props.eventData.end,\n      buttonLoading: false\n    };\n\n    // this.rate = React.createRef();\n    // this.projectName = React.createRef()\n    this.addEvent = this.addEvent.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleRangeChange = this.handleRangeChange.bind(this);\n    // this.setLocation = this.setLocation.bind(this)\n    // this.handleDateChange = this.handleDateChange.bind(this)\n    this.disabledRangeTime = this.disabledRangeTime.bind(this);\n    this.range = this.range.bind(this);\n    this.onChange = this.onChange.bind(this)\n\n    this.eventTitle = React.createRef();\nthis.eventForm = React.createRef()\n    console.log(\"OnboardingScreen props\", props);\n  }\n  onChange(__) {\n    const { e, type} = __\n    console.log(__)\n  }\n  handleRangeChange(e) {\n    console.log(e);\n    let startDate = e[0].toString();\n    let endDate = e[1].toString();\n    this.setState({\n      startDate,\n      endDate\n    });\n  }\n  handleDateChange(e) {\n    console.log(e);\n\n    this.setState({ projectDate: e.toString() });\n  }\n  range(start, end) {\n    const result = [];\n    for (let i = start; i < end; i++) {\n      result.push(i);\n    }\n    return result;\n  }\n  disabledRangeTime(_, type) {\n    if (type === \"start\") {\n      return {\n        disabledHours: () => this.range(0, 60).splice(4, 20),\n        disabledMinutes: () => this.range(30, 60),\n        disabledSeconds: () => [55, 56]\n      };\n    }\n    return {\n      disabledHours: () => this.range(0, 60).splice(20, 4),\n      disabledMinutes: () => this.range(0, 31),\n      disabledSeconds: () => [55, 56]\n    };\n  }\n  handleChange(e) {\n    console.log(e.target.value);\n\n    this.setState({\n      projectType: e.target.value\n    });\n  }\n\n  addEvent(e) {\ne.preventDefault()\n    // this.eventForm.submit(e => {\n    //   e.preventDefault()\n    // })\n    this.setState({\n      buttonLoading: true\n    });\n    let title = this.eventTitle.current.value;\n    let start = this.state.startDate;\n    let end = this.state.endDate;\n\n    let data = { title, start, end };\n\n    this.props.addEvent(data);\n  }\n\n  componentDidMount() {}\n\n  render() {\n    // const { current } = this.state;\n    return (\n      <form\n      ref={this.eventForm}\n        id=\"ProjectSearchForm\"\n        className={\n          (Fn.get(\"isMobile\") ? \" vh84 \" : \"  \") +\n          \" flex-column flex justify-between mb0\"\n        }\n      >\n        <div className=\"flex flex-column ma0\" id=\"\">\n          <div className=\"form-row flex flex-column\">\n            <div className=\"form-row flex flex-column pa5\">\n              <div className=\"f4 fw6 black-90 pb4\">Add Itinerary Item</div>\n\n              <div className=\"form-row flex flex-row items-center\">\n                <label className=\"f4 fw5 black-50 pb2- w-30 pr3\">\n                  Event Title\n                </label>\n\n                <input\n                  ref={this.eventTitle}\n                  type=\"text\"\n                  required={true}\n                  className=\"flex flex-column ph4 pv3 bn br1- round bg-white black-50 f4 fw5 bs-a- w-100\"\n                />\n              </div>\n\n              <div className=\"form-row flex flex-row items-center pt4\">\n                <label className=\"f4 fw5 black-50 pb2- w-30 pr3\">\n                  Event Location\n                </label>\n\n                <LocationSearchBar\n                  // location={this.state.location}\n                  // findLocation={this.findLocation}\n                  setLocation={this.props.setLocation}\n                  type={\"event\"}\n                  // fetchProjects={this.fetchProjects2}\n                />\n              </div>\n\n              <div className=\"flex flex-row overflow-hidden w-100 ml6 pl3\">\n                      <div className=\"flex flex-column overflow-hidden w-100 pa3\">\n                        <label className=\"f4 fw5 black-50 pb2- w-30 pr3\">\n                          Start\n                        </label>\n                        <TimePicker onChange={(e) => this.onChange({ e, type: 'start' })} defaultOpenValue={moment(this.props.startTime, 'HH:mm:ss')} />\n                      </div>\n                      <div className=\"flex flex-column w-100 pa3\">\n                        <label className=\"f4 fw5 black-50 pb2- w-30 pr3\">\n                          End\n                        </label>\n                        <TimePicker onChange={(e) => this.onChange({ e, type: 'end'})} defaultOpenValue={moment('00:00:00', 'HH:mm:ss')} />\n                      </div>\n                    </div>\n\n              {/* <div className=\"form-row flex flex-column pt4 w-100\">\n                <label className=\"f6 fw5 black-50 pb2\">Event Type</label>\n\n                <select\n                  className=\"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a w-100\"\n                  // defaultValue=\"commercial\"                this.props.eventData\n                  onChange={(e) => this.handleChange(e)}>\n\n                  <option value=\"\">Select</option>\n                  <option value=\"commercial\">General</option>\n                  <option value=\"film\">Meeting</option>\n                  <option value=\"film\">Documentary</option>\n\n                </select>\n\n              </div> */}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"Buttons flex flex-row justify-between center w-100\">\n          <div className=\"flex flex-column w-100 pa4 bg-white\">\n            <button\n              onClick={this.addEvent}\n              className={\n                \"br1- round bs-b bg-black-20 ph3 pv2 pointer bn relative  \"\n              }\n            >\n              <span className=\"f4 fw6 white pv2 flex items-center justify-center\">\n                {this.state.buttonLoading && (\n                  <div className=\"flex mr3 pv2\">\n                    <div className=\"sp sp-3balls\"></div>\n                  </div>\n                )}\n                {!this.state.buttonLoading &&\n                  \"Create Event\"\n                 \n                }\n              </span>\n              \n            </button>\n\n            {/* {\n              this.props.current > 0 && <div className=\"flex flex-column w-100 \">\n                <span onClick={this.props.prev} className=\"f6 fw5 black-30 pv2 flex items-center justify-center\">\n                  go back to previous step\n                          </span>\n\n              </div>\n            } */}\n          </div>\n        </div>\n      </form>\n    );\n  }\n}\n// export default AddEvent;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { DatePicker, Drawer, Popconfirm, message, Checkbox } from \"antd\";\nimport Moment from \"moment\";\nimport { extendMoment } from 'moment-range';\n \nimport AccountContext from \"../../../utils/context/AccountContext.js\";\n// import Fn from '../../../utils/fn/Fn.js';\nimport LocationSearchBar from \"../../elements/display/forms/LocationSearchBar.js\";\nimport PageTitle from \"../../elements/layout/PageTitle_B.js\";\nimport FormCrew from \"../CrewFinder/CrewFinder_People.js\";\n\nimport { Icon, Dialog, Spinner } from \"@blueprintjs/core\";\n\nimport { TH_LIST } from \"@blueprintjs/icons/lib/esm/generated/iconNames\";\nimport FormInvite from \"../../elements/forms/Invite.js\";\nimport constants from \"../../../utils/constants.js\";\nimport { Fn, app } from \"../../../utils/fn/Fn.js\";\nimport Loading from \"../../elements/Loading.js\";\n\nimport Bio from \"../_Elements/Bio/Bio.jsx\";\nimport Network from \"../_Elements/Network/Network.jsx\";\nimport RecentWork from \"../RecentWork/index.js\";\nimport Transition from \"../../Layouts/Transition.js\";\nimport Person from \"../Person\";\nimport UserList from \"../UserList/forRateSheet\";\nimport UserListMinimal from \"../UserList/minimal.js\";\nimport AddItineraryItem from '../../elements/forms/AddItineraryItem.js';\nimport \"./style.css\";\nconst moment = extendMoment(Moment);\n\n// import { motion, AnimatePresence } from 'framer-motion'\n// // import { Motion, Frame, Scroll, useCycle } from \"framer\"\n\n// const spring = {\n//   type: \"spring\",\n//   damping: 20,\n//   stiffness: 300\n// };\n\n// const container = {\n//   hidden: { opacity: 0 },\n//   show: {\n//     opacity: 1,\n//     transition: {\n//       // delayChildren: 0.5,\n//       staggerChildren: 0.5,\n//       // delay: 1,\n//     x: { type: \"spring\", stiffness: 100 },\n//     default: { duration: 2 },\n//     }\n\n//   }\n// }\n\n// const item = {\n//   hidden: { opacity: 0 },\n//   show: { opacity: 1 }\n// }\n\nvar saveInterval;\n\nexport default class Itinerary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hasError: false,\n      project: this.props.project,\n      drawerOpen: false,\n      innerDrawerOpen: false,\n      ready: false,\n      buttonsReady: true,\n      view: null,\n      views: [],\n      activeButton: {},\n      buttons: [],\n      projectType: this.props.project.type,\n      startDate: this.props.project.start_date,\n      endDate: this.props.project.end_date,\n      location: this.props.project.location,\n      loading: false,\n      x: false,\n      lightboxActive: false,\n      productionCrew: [],\n      crew: [],\n      crew_: [],\n      searchLoading: false,\n      activeCrewMember: null,\n      inviteBusy: false,\n      isDeleting: [],\n      isDeletingStart: [],\n      del: [],\n      deleteConfirmation: [],\n      drawerType: \"search\",\n      days: 0,\n      total: 0,\n      months: [],\n      crewDays_: [],\n      crewRoster: [],\n      delaySaveActive: false,\n      delaySaves: [],\n      items: [{},{},{}],\n      timeSlots: [],\n      isOpen: false\n    };\n\n    this.toggleDrawer = this.toggleDrawer.bind(this);\n    this.toggleInnerDrawer = this.toggleInnerDrawer.bind(this);\n    this.closeInnerDrawer = this.closeInnerDrawer.bind(this);\n    this.userAvatar = this.userAvatar.bind(this);\n    this.setRate = this.setRate.bind(this);\n    this.setDays = this.setDays.bind(this);\n    this.updateTotal = this.updateTotal.bind(this);\n    this.checkDay = this.checkDay.bind(this)\n    this.delaySave = this.delaySave.bind(this)\n    this.calculateTotal = this.calculateTotal.bind(this)\n    this.handleDoubleClick = this.handleDoubleClick.bind(this)\n    this.handleClick = this.handleClick.bind(this)\n    this.setLocation = this.setLocation.bind(this)\n    // this.inviteToProject = this.inviteToProject.bind(this)\n    // this.toggleLightbox = this.toggleLightbox.bind(this)\n\n    this.projectTitle = React.createRef();\n    this.projectDescription = React.createRef();\n    this.inviteByEmailAddress = React.createRef();\n    window.self = this;\n  } \n  setLocation(item) {\n    console.log(\"setLocation\", item);\n    this.setState({ insertEventLocation: item });\n  }\n  handleDoubleClick(__) {\n    const { monthIndex,itenIndex,slotIndex} = __\n\n    // let monthIndex = m.monthIndex;\n    // let itineraryIndex = i.itenIndex;\n    // let slotIndex = s.slotIndex;\n\n    let months = this.state.months;\n    months[monthIndex].itinerary[itenIndex].slots[slotIndex] = true;\n    \n    this.setState({\n      months: months\n    })\n\n  }\n  handleClick(__) {\n    const { monthIndex,itenIndex,slotIndex} = __\n\n    // let monthIndex = m.monthIndex;\n    // let itineraryIndex = i.itenIndex;\n    // let slotIndex = s.slotIndex;\n    let timeSlot = this.state.timeSlots[slotIndex];\n    let timeSlot_ = moment(timeSlot).format('HH:mm:ss')\n    let months = this.state.months;\n    months[monthIndex].itinerary[itenIndex].slots[slotIndex] = true;\n    months[monthIndex].itinerary[itenIndex].items.push(timeSlot)\n\n    console.log('timeSlot',timeSlot_)\n\n    this.setState({\n      months: months,\n      isOpen: true,\n      selectedTime: timeSlot_\n    })\n  }\ncreateTimeSlots() {\n  var range = moment.range(new Date().setHours(4,0,0,0), new Date().setHours(28,0,0,0));\n \nvar hours = Array.from(range.by('hour', { excludeEnd: true }));\n// hours.length == 5 // true\n// let slots = hours.map(m => m.format('HH:mm'))\nthis.setState({\n  timeSlots: hours\n})\n\n\n\n}\n  async delaySave() {\n\n    this.setState({\n      delaySaveActive: true\n    })\n\n    \n  }\n  checkDay(__) {\n\n    const { person, day, index_ } = __\n  \n    console.log('checkDay', __)\n\n    let crewRoster = this.state.crewRoster;\n\n    let index = crewRoster.findIndex(a => a.user === person );\n\n    let item = crewRoster[index];\n    \n    let dayIndex = item.days.findIndex( a => a.day === day);\n\n    item.days[dayIndex].selected = !item.days[dayIndex].selected;\n\n    this.setState({\n      crewRoster: crewRoster\n    })\n\n    // this.delaySave()\n    this.setState({\n      delaySaveActive: true\n    })\n\n    this.calculateTotal()\n    // let days = item.days.filter(a => a.day === day)[0]\n\n  }\n  updateTotal() {\n    let crew = this.state.crew;\n    let total = 0;\n    for (let item of crew) {\n      let cost = item.rate * item.days;\n      total = total + cost;\n    }\n    this.setState({\n      total: total\n    });\n  }\n  async setRate({ index, rate, user }) {\n    console.log(\"set rate\", rate);\n    let crew = this.state.crew;\n    crew[index].rate = rate;\n    this.setState({\n      crew: crew\n    });\n    console.log(\"updated crew\", crew);\n    \n    this.state.crewRoster.filter(a => a.user === user)[0].rate = rate;\n    \n    let project = this.state.project;\n    project.crewRoster = this.state.crewRoster;\n    await app.updateProject({ self: this, project }).then(project => {\n\n      // this.updateTotal();\n      this.calculateTotal()\n\n    })    \n    \n\n\n  }\n  setDays({ index, days }) {\n    // console.log(\"set days\", days);\n\n    // let crew = this.state.crew;\n\n    // crew[index].days = days;\n\n    // this.setState({\n    //   crew: crew\n    // });\n\n    // console.log(\"updated crew\", crew);\n  }\n  userAvatar(item) {\n    let avatar =\n      typeof item && item.profile && item.profile.picture !== \"undefined\"\n        ? item.profile.picture\n        : constants.placeholderImage;\n    return avatar;\n  }\n  closeInnerDrawer() {\n    this.setState({\n      innerDrawerOpen: false\n    });\n  }\n  toggleInnerDrawer(item) {\n    this.setState({\n      innerDrawerOpen: true,\n      activeCrewMember: item\n    });\n    // this.state.activeCrewMember\n  }\n  toggleDrawer({ item, type }) {\n    this.setState({\n      drawerType: type,\n      drawerOpen: !this.state.drawerOpen\n      // activeCrewMember: item\n    });\n  }\n  calculateTotal() {\n    \n    let total = 0;\n\n    for(let item of this.state.crewRoster){\n      let days = item.days.filter(a => a.selected).length;\n      let rate = item.rate;\n      let subtotal = ( days * rate );\n      total = total + subtotal\n    }\n    this.setState({\n      total: total\n    })\n  }\n  componentWillUnmount() {\n    clearInterval(saveInterval)\n  }\n  componentDidMount = async () => {\n    // await app.fetchProductionCrew({ self: this, project: this.props.project });\n    // let project = this.props.project;\n    let project = Fn.get('activeProject');\n    console.log(\"project\", project);\n    // let start = moment(project.start_date);\n    // let end = moment(project.end_date);\n    // let days = end.diff(start, \"days\", false);\n    // let months_ = start.diff(end, \"months\", false);\n    // // console.log(\"diff days\", days);\n    // // console.log(\"diff months\", months_);\n\n    // this.setState({\n    //   days: days\n    // });\n\n    let crew = await app.fetchConfirmedCrew({ self: null, project: project });\n\n    this.setState({\n      crew: crew\n    })\n    // if (crew) {\n    //   let crewWithRates = [];\n    //   for (let item of crew) {\n    //     // let rate = 0;/\n    //     item.rate = 0;\n    //     item.days = project.crewRoster.filter(a => a.user === item.id)[0].days.filter(a => a.selected).length;\n    //     crewWithRates.push(item);\n    //   }\n    //   this.setState({\n    //     crew: crew\n    //   });\n    // }\nthis.createTimeSlots()\n    this.setState({\n      crewRoster: this.props.project.crewRoster,\n      months: this.props.project.calendar,\n      ready: true\n    })\n\nthis.calculateTotal()\n   \n    setInterval(async() => {\n\n      if(this.state.delaySaveActive) {\n\n        let project = this.state.project;\n\n        project.crewRoster = this.state.crewRoster;\n\n        await app.updateProject({ self: this, project }).then( project => {\n\n          message.loading(\"Saving\");\n\n          // console.log('saved')\n\n          this.setState({\n\n            delaySaveActive: false\n\n          })\n\n          this.setState({\n            project: Fn.get('activeProject')\n          })\n\n        })\n\n      }\n\n    },4000)\n\n\n  };\n\n  static getDerivedStateFromError(error) {\n    // getDerivedStateFromError -> Update state so the next render will show the fallback UI.\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, info) {\n    // You can also log the error to an error reporting service\n  }\n\n  getDerivedStateFromProps = (nextProps, prevState) => {};\n\n  getSnapshotBeforeUpdate = (prevProps, prevState) => {};\n\n  componentDidUpdate = () => {};\n\n  componentWillUnmount = () => {};\n\n  render() {\n    const { total } = this.state;\n\n    // const\n\n    if (this.state.hasError) {\n      return <h1>Something went wrong.</h1>;\n    }\n    return (\n      <>\n        <section id=\"People\" className=\"flex flex-column w-100 pb4 pt0\">\n          <div className=\"flex flex-row pv3 \">\n            <PageTitle\n              title={this.props.title}\n              // docs={this.state.files}\n              // ready={this.state.ready}\n            />\n\n            <div\n              id=\"SearchInvite\"\n              className=\"w-100 flex flex-row items-end justify-start justify-end-ns\"\n            >\n              <button\n                onClick={this.openSearchDialog}\n                className={\n                  (Fn.get(\"isMobile\") ? \" w-100 mt3 \" : \"  \") +\n                  \" br1- round bs-b bg-black-20 ph4 pv2 pointer bn relative w-100-    \"\n                }\n              >\n                <span className=\"f5 fw6 white pv0 flex items-center justify-center pr2\">\n                  {this.state.buttonLoading ? (\n                    <Icon\n                      icon=\"loading\"\n                      className={\" absolute right-0 f4 black-60 mr2\"}\n                    />\n                  ) : (\n                    <Icon\n                      icon={\"plus\"}\n                      iconSize={12}\n                      className={\" f4 black-60- white  absolute right-0 mr3\"}\n                    />\n                  )}{\" \"}\n                  Add Sheet\n                </span>\n              </button>\n            </div>\n          </div>\n\n          \n          {!this.state.ready && (\n            <div className=\"flex flex-column pv4 items-center justify-center w-100\">\n              {/* <Spinner size={25} /> */}\n              <div className=\"sp sp-3balls\"></div>\n            </div>\n          )}\n          <div className=\"w-100-ns w-100 flex flex-row flex-wrap justify-between br3- -overflow-hidden\">\n            {this.state.x ? (\n              <Icon\n                icon=\"loading\"\n                iconSize=\"15\"\n                className=\"absolute right-0 f4 black-60 mr3\"\n              />\n            ) : (\n              <Icon\n                icon=\"swap-right\"\n                iconSize=\"15\"\n                className=\"f4 black-60 -white  absolute right-0 mr3\"\n              />\n            )}\n\n           \n          </div>\n        </section>\n        {this.state.ready && (\n        <section id=\"People\" className=\"flex flex-column w-100 pb4 pt0\">\n         \n          <div \n        \n          className=\"flex flex-column pv3 \">\n\n\n            {this.state.months.map((month, monthIndex) => (\n              <>\n                <div className=\"flex flex-row pv3 bb b--black-05 f4 fw7 black pr3 br bg-white ph4 mt4 br2\">\n                  {month && month.name}\n                </div>\n                <div \n                //  style={{ width: '2000px'}} \n                className=\"flex flex-column overflow-auto\">\n                <div \n                style={{ width: \"2000px\"}}\n                className=\"flex flex-row bb b--black-05\">\n                  <div className=\"flex \" style={{ width: '80px' }} />\n                {this.state.timeSlots.map((slot, slotIndex) => (\n                   <div \n                   style={{ width: '80px'}}\n                   className=\"width3- flex flex-column pv3 f5 fw7 black ph3 bl b--black-05 flex-aut-o\">\n                   {moment(slot).format(\"hh:mm\")}\n                   </div>\n                ))}\n                </div>\n\n                <div className=\"flex flex-row overflow-auto\">\n                  <div\n                    style={{\n                      // width:\n                      //   \"calc( 200px + calc(60px * \" + month.days.length + \"))\"\n                    }}\n                    className=\"flex flex-column br bl b--black-05\"\n                  >\n                    {/* <UserListMinimal\n                      crew={this.state.crew}\n                      items={this.state.crew}\n                      invited={this.props.invited}\n                      userAvatar={this.userAvatar}\n                      confirmDelete={this.confirmDelete}\n                      remove={this.remove}\n                      state={this.state}\n                      ready={this.state.ready}\n                      toggleDrawer={this.toggleDrawer}\n                      type={\"production\"}\n                      setRate={this.setRate}\n                      setDays={this.setDays}\n                      days={this.state.days}\n                      updateTotal={this.updateTotal}\n                    /> */}\n                    <div\n                      style={{}}\n                      className=\"flex flex-column bb b--black-05 f5 fw6 black pr3- br- bb bg-white-50\"\n                    >\n\n\n                \n                      {month &&\n                        month.itinerary.map((iten, itenIndex) => (\n                          <div className=\"flex flex-row\">\n                          <div \n                          style={{width: \"80px\"}}\n                          className=\"width3- flex flex-column pv3 f5 fw7 black ph3 bl b--black-05 flex-aut-o tc bb\">\n                            {moment(iten.day).format(\"Do\")}\n\n                            \n</div>\n<div \n                // style={{ width: \"2000px\"}}\n                className=\"flex flex-row bb b--black-05\">\n                  {/* <div className=\"flex \" style={{ width: '80px' }} /> */}\n                {iten.slots && iten.slots.map((slot, slotIndex) => (\n                   <div \n                  //  onDoubleClick={ () => this.handleDoubleClick({ monthIndex, itenIndex, slotIndex }) }\n                   onClick={ () => this.handleClick({ monthIndex, itenIndex, slotIndex }) }\n                   style={{ width: '80px'}}\n                   className={ ( this.state.months[monthIndex].itinerary[itenIndex].slots[slotIndex] ? \" bg-light-blue \" : \" -bg-light-blue \" ) + (\" hover-bg-blue pointer width3- flex flex-column pv3 f5 fw7 black ph3 bl b--black-05 flex-aut-o \" )}>\n                   {/* {moment(slot).format(\"hh:mm\")} */}\n                   { this.state.months[monthIndex].itinerary[itenIndex].slots[slotIndex] && moment(iten.items[slotIndex]).format('HH') }\n                   </div>\n                ))}\n                </div>\n                            {/* <div className=\"flex flex-row\">\n                            \n                            {\n                          iten.items.map((item, index) => (\n                            <div className=\"width3 flex flex-column pv3 f5 fw7 black ph3 bl b--black-05 flex-aut-o\">\n                              { item && moment(item).format('HH')}                            \n                          </div>\n                          )) \n                        }\n                            </div> */}\n                          </div>\n                        ))}\n\n                        \n                    </div>\n\n                    \n                  </div>\n                </div>\n                </div>\n              </>\n            ))}\n          </div>\n        </section>\n        )}\n\n        <Dialog\n          className={\"bp3-light\"}\n          // icon=\"info-sign\"\n          onClose={() => { this.setState({ isOpen: false})}}\n          title={this.state.dialogTitle}\n          {...this.state}\n        >\n          <AddItineraryItem\n           addEvent={this.addEvent}\n           setLocation={this.setLocation}\n           eventData={this.state.newEvent}\n           startTime={this.state.selectedTime}\n          />\n        </Dialog>\n\n        <Drawer\n          title={\"Crew Search\"}\n          closable={true}\n          onClose={this.toggleDrawer}\n          visible={this.state.drawerOpen}\n          width={\"60vw\"}\n        >\n          <>\n            {this.state.drawerOpen && (\n              <div className=\"pointer flex flex-column justify-end items-start pa3 bg-white \">\n                {!this.state.searchLoading &&\n                  this.state.drawerType === \"search\" && (\n                    <Transition>\n                      <h3 className=\"f5 fw4 black-50 tc pv2 ph3 word-break-all flex items-center\">\n                        <span className=\"flex flex-row ph2 pv0 round bg-black-20 white mr2 f5 fw6\">\n                          {!this.state.searchLoading &&\n                            this.state.crew_[0] &&\n                            this.state.crew_[0].users.length}\n                        </span>{\" \"}\n                        Users with role{\" \"}\n                        <span className=\"fw6 white ml2 ph3 pv1 round bg-black-20\">\n                          {!this.state.searchLoading &&\n                            this.state.crew_[0] &&\n                            this.state.crew_[0].position}\n                        </span>\n                      </h3>\n                    </Transition>\n                  )}\n                <div\n                  // onClick={this.toggleLightbox}\n                  className=\"pointer flex flex-column justify-end items-start pa3 bg-white w-100 flex-auto\"\n                >\n                  <Drawer\n                    title=\"Crew Detail\"\n                    placement=\"right\"\n                    closable={true}\n                    onClose={this.closeInnerDrawer}\n                    visible={this.state.innerDrawerOpen}\n                    width={\"40vw\"}\n                  >\n                    <div\n                      // onClick={this.toggleLightbox}\n                      className=\"pointer flex flex-column justify-end items-start pa0 bg-white w-100 flex-auto\"\n                    >\n                      {this.state.innerDrawerOpen && (\n                        <div\n                          // onClick={this.toggleLightbox}\n                          className=\"pointer flex flex-column justify-end items-start pa0 bg-white\"\n                        >\n                          \n                        </div>\n                      )}\n                    </div>\n                  </Drawer>\n\n                  {this.state.searchLoading && (\n                    <div className=\"flex flex-column pv3 items-center justify-center w-100\">\n                      {/* <Spinner size={25} /> */}\n                      <div className=\"sp sp-3balls\"></div>\n                    </div>\n                  )}\n                  {/* <div className=\"flex flex-row-ns flex-column w-100 f5 fw6 black pb3\">\n                {\n                  \n                }\n                </div> */}\n                  \n                </div>\n              </div>\n            )}\n\n            \n          </>{\" \"}\n        </Drawer>\n      </>\n    );\n  }\n}\n\n// export default People;\nItinerary.contextType = AccountContext;\n","import React from \"react\";\nimport { Dialog, Icon, Spinner } from \"@blueprintjs/core\";\nimport { Result, Drawer, message, Popover } from \"antd\";\nimport moment from \"moment\";\nimport { Link } from \"react-router-dom\";\n// import React, { getGlobal, setGlobal, useGlobal } from \"reactn\";\nimport AccountContext from \"../../../utils/context/AccountContext\";\nimport { Fn, api, ui, app } from \"../../../utils/fn/Fn.js\";\n\nimport Discussion from \"../../a/Discussion/index.js\";\nimport Files from \"../../a/Files/index.js\";\nimport FormBio from \"../../a/FormBio/index.js\";\nimport Settings from \"../../a/Settings/index.js\";\nimport People from \"../../a/People/index.js\";\nimport RateCalculator from \"../../a/RateCalculator/index.js\";\nimport Checklist from \"../../a/Checklist/index.js\";\nimport Itinerary from '../../a/Itinerary/index.js';\n\nimport MessageBoxProject from \"../../elements/display/messages/messageboxProject.js\";\nimport PageTitle from \"../../elements/layout/PageTitle_B\";\nimport Filepond from \"../../elements/upload/Filepond.js\";\nimport TransitionLayout from \"../../Layouts/Transition\";\nimport Loading from \"../../elements/Loading.js\";\nimport \"./style.css\";\n// import { placeholderImage } from \"../../../utils/constants.js\";\nimport constants from \"../../../utils/constants.js\";\n// import PropTypes from 'prop-types';\nvar GeoPattern = require(\"geopattern\");\nwindow.GeoPattern = GeoPattern;\n// window.getGlobal = getGlobal;\n// window.useGlobal = useGlobal;\n// window.setGlobal = setGlobal;\n\nclass SingleProject extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpen: false,\n      dialogType: \"\",\n      dialogTitle: \"\",\n      ready: false,\n      projectId: this.props.match.params.id,\n      project: {},\n      drawerVisible: false,\n      crew: [],\n      drawerItem: {},\n      userIsOwner: false,\n      applications: [],\n      projectOwner: {},\n      buttons: [],\n      activeButton: {},\n      filters: [],\n      filter: {},\n      view: \"overview\",\n      invited: [],\n      acceptingInvitation: false,\n      invitationAccepted: false,\n      isProjectOwner: false,\n      currentUserPermissions: []\n    };\n\n    this.load = this.load.bind(this);\n    this.fetchProjectData = this.fetchProjectData.bind(this);\n    this.fetchCrew = this.fetchCrew.bind(this);\n    this.applyForPosition = this.applyForPosition.bind(this);\n    this.addToNetwork = this.addToNetwork.bind(this);\n    this.avatar = this.avatar.bind(this);\n    this.userAvatar = this.userAvatar.bind(this);\n    this.toggleDrawer = this.toggleDrawer.bind(this);\n    this.toggleDialog = this.toggleDialog.bind(this);\n    this.crewPositionProfile = this.crewPositionProfile.bind(this);\n    this.checkIsOwner = this.checkIsOwner.bind(this);\n    this.sendMessage = this.sendMessage.bind(this);\n    this.fetchInvitedUsers = this.fetchInvitedUsers.bind(this);\n    this.userLocation = this.userLocation.bind(this);\n    this.setButtons = this.setButtons.bind(this);\n    this.filterProjects = this.filterProjects.bind(this);\n    this.filter = this.filter.bind(this);\n    this.setView = this.setView.bind(this);\n    this.openFileUploadDialog = this.openFileUploadDialog.bind(this);\n    this.acceptInvitation = this.acceptInvitation.bind(this);\n    this.reloadProject = this.reloadProject.bind(this);\n    this.updateProjectState = this.updateProjectState.bind(this);\n    this.setFullScreen = this.setFullScreen.bind(this);\n    this.checkUserPermissions = this.checkUserPermissions.bind(this);\n    // this.hideOverlay = this.hideOverlay.bind(tj)\n\n    console.log(\"ui.mobile()\", ui.mobile());\n  }\n  setFullScreen() {\n    var elem = document.getElementById(\"projectScreen\");\n    if (document.webkitFullscreenElement) {\n      document.webkitCancelFullScreen();\n    } else {\n      elem.webkitRequestFullScreen();\n    }\n  }\n  async updateProjectState(project) {\n    console.log(\"updateProjectstate\", project);\n    let crew = await Fn.fetchCrew({ self: this, project });\n\n    let applications = await Fn.fetchApplications({ self: this, project });\n\n    let invited = await Fn.fetchInvitedUsers({ self: this, project });\n    this.setState({\n      project: project\n    });\n  }\n  async reloadProject() {\n    this.setState({ ready: false });\n    this.load();\n    // console.log('reloadProject')\n    // let projectId = this.props.match.params.id\n    // let project = await api.fetch('projects', projectId).then(project => {\n    //   if(project) {\n    //     this.setState({\n    //       project: project\n    //     })\n    //   }\n    // })\n    // let project = Fn.get('activeProject')\n  }\n  async acceptInvitation() {\n    this.setState({\n      acceptingInvitation: true\n    });\n\n    let project = this.state.project;\n    let currentUserId = Fn.get(\"account\").user.id;\n\n    // project.accepted.push(Fn.get('account').user.id)\n    let position = project.invited.filter(a => a.id === currentUserId)[0];\n    // let crewMember = {\n    //   position: position.position,\n    //   id: currentUserId\n    // };\n\n    setTimeout( async () => {\n\n      project.crew.push(position);\n  \n      await app.updateProject({ self: this, project }).then(async project => {\n        \n        this.setState({\n          project: project\n        })\n\n        setTimeout( async () => {\n          this.setState({\n            acceptingInvitation: false,\n            invitationAccepted: true\n          });\n          this.reloadProject();\n        }, 2000);\n  \n        await app.createProjectRoster({ self: this, project }).then( project => {\n          console.log('Updated project roster ',project)\n        })\n  \n      })\n\n    },1000)\n\n    // setTimeout(() => {\n    //   this.setState({\n    //     acceptingInvitation: false,\n    //     invitationAccepted: false\n    //   })\n\n    // },10000)\n  }\n  toggleDialog(test, test12) {\n    this.setState({\n      isOpen: !this.state.isOpen\n    });\n  }\n  openFileUploadDialog() {\n    this.setState({\n      dialogType: \"projectAvatarUpload\",\n      dialogTitle: \"Update Project Image\",\n      isOpen: true\n    });\n  }\n  filterProjects(filter) {\n    let ownProjects =\n      (typeof localStorage.getItem(\"ownProjects\") !== null &&\n        JSON.parse(localStorage.getItem(\"ownProjects\"))) ||\n      [];\n    let subscribedProjects =\n      (typeof localStorage.getItem(\"subscribedProjects\") !== null &&\n        JSON.parse(localStorage.getItem(\"subscribedProjects\"))) ||\n      [];\n    let projects =\n      (typeof localStorage.getItem(\"rojects\") !== null &&\n        JSON.parse(localStorage.getItem(\"projects\"))) ||\n      [];\n\n    let today = moment(new Date());\n\n    this.setState({ ready: false });\n\n    if (filter === \"current\") {\n      let p = projects.filter(\n        a =>\n          moment(a.start_date).isBefore(today) &&\n          moment(a.deadline).isAfter(today)\n      );\n      let pOwn = ownProjects.filter(\n        a =>\n          moment(a.start_date).isBefore(today) &&\n          moment(a.deadline).isAfter(today)\n      );\n      let pSub = subscribedProjects.filter(\n        a =>\n          moment(a.start_date).isBefore(today) &&\n          moment(a.deadline).isAfter(today)\n      );\n\n      this.setState({\n        projects: p,\n        ownProjects: pOwn,\n        subscribedProjects: pSub,\n        ready: true\n      });\n    }\n\n    if (filter === \"pending\") {\n      let p = projects.filter(a => moment(a.start_date).isAfter(today));\n      let pOwn = ownProjects.filter(a => moment(a.start_date).isAfter(today));\n      let pSub = subscribedProjects.filter(a =>\n        moment(a.start_date).isAfter(today)\n      );\n\n      this.setState({\n        projects: p,\n        ownProjects: pOwn,\n        subscribedProjects: pSub,\n        ready: true\n      });\n    }\n\n    if (filter === \"completed\") {\n      let p = projects.filter(a => moment(a.deadline).isBefore(today));\n      let pOwn = ownProjects.filter(a => moment(a.deadline).isBefore(today));\n      let pSub = subscribedProjects.filter(a =>\n        moment(a.deadline).isBefore(today)\n      );\n\n      this.setState({\n        projects: p,\n        ownProjects: pOwn,\n        subscribedProjects: pSub,\n        ready: true\n      });\n    }\n\n    if (filter === \"all\") {\n      this.setState({\n        projects: projects,\n        ownProjects: ownProjects,\n        subscribedProjects: subscribedProjects,\n        ready: true\n      });\n    }\n  }\n  setView(config) {\n    const { view, button } = config;\n    this.setState({\n      view: view,\n      activeButton: button\n    });\n\n    Fn.store({ label: \"projectView\", value: view });\n    Fn.store({ label: \"activeButton\", value: button });\n\n    view === \"discussion\" &&\n      setTimeout(\n        () =>\n          document.querySelector(\"body\").scroll({\n            top: 130,\n            left: 0,\n            behavior: \"smooth\"\n          }),\n        1000\n      );\n  }\n\n  filter(config) {\n    const { filter, button } = config;\n\n    this.setState({\n      filter: filter,\n      activeButton: button\n    });\n  }\n  setButtons() {\n    const buttons = [\n      {\n        title: \"Overview\",\n        role: \"general\",\n        // permission: \"\",\n        function: () => this.setView({ filter: \"Overview\", button: 0 })\n      },\n      {\n        title: \"Itinerary\",\n        role: \"general\",\n        // permission: \"\",\n        function: () => this.setView({ filter: \"Itinerary\", button: 1 })\n      },\n\n      {\n        title: \"Discussion\",\n        role: \"general\",\n        function: () => this.setView({ filter: \"Discussion\", button: 2 })\n      },\n      {\n        title: \"Files\",\n        role: \"general\",\n        permission: \"projectfiles\",\n        function: () => this.setView({ filter: \"Files\", button: 3 })\n      },\n      // {\n      //   title: \"Timeline\",\n      //   function: () => this.setView({ filter: \"timeline\", button: 3 })\n      // },\n      {\n        title: \"Settings\",\n        role: \"admin\",\n        permission: \"projectsettings\",\n        function: () => this.setView({ filter: \"Settings\", button: 4 })\n      },\n      {\n        title: \"People\",\n        role: \"admin\",\n        permission: \"projectpeople\",\n        function: () => this.setView({ filter: \"People\", button: 5 })\n      },\n      {\n        title: \"Checklist\",\n        role: \"admin\",\n        permission: \"projectchecklist\",\n        function: () => this.setView({ filter: \"Checklist\", button: 6 })\n      },\n      {\n        title: \"Rate Calculator\",\n        role: \"admin\",\n        permission: \"projectratecalculators\",\n        function: () => this.setView({ filter: \"Rate Calculator\", button: 7 })\n      }\n    ];\n\n    // const views = [\"overview\", \"files\", \"discussion\", \"settings\", \"people\"];\n    const views = [\n      {\n        title: \"Overview\",\n        role: \"general\"\n      },\n      {\n        title: \"Itinerary\",\n        role: \"general\"\n      },\n      {\n        title: \"Discussion\",\n        role: \"general\"\n      },\n      {\n        title: \"Files\",\n        role: \"general\"\n      },\n      {\n        title: \"Settings\",\n        role: \"admin\"\n      },\n      {\n        title: \"People\",\n        role: \"admin\"\n      },\n      {\n        title: \"Checklist\",\n        role: \"admin\"\n      },\n      {\n        title: \"Rate Calculator\",\n        role: \"admin\"\n      }\n    ];\n\n    this.setState({\n      buttons: buttons,\n      activeButton: buttons[0],\n      views: views,\n      view: views[0]\n    });\n  }\n  userLocation(user) {\n    let location;\n    if (\n      user &&\n      user.profile &&\n      user.profile.location &&\n      typeof user.profile.location.County !== \"undefined\"\n    ) {\n      location = user.profile.location.County;\n    } else if (\n      user &&\n      user.profile &&\n      user.profile.location &&\n      typeof user.profile.location.address.county !== \"undefined\"\n    ) {\n      location = user.profile.location.address.county;\n    } else {\n      location = \"\";\n    }\n    return location;\n  }\n  async fetchInvitedUsers() {}\n  async fetchShortlist() {}\n  async sendMessage(data) {\n    let selfUserId = this.context.account.user.id;\n\n    let recipientId = data.id;\n\n    const conversationExists = await Fn.checkConversationExists({\n      self: this,\n      selfUserId,\n      recipientId: data.id\n    });\n\n    if (!conversationExists.exists) {\n      await Fn.createNewConversation({ self: this, selfUserId, recipientId });\n      this.props.history.push(\"/messages\");\n    } else {\n      Fn.store({\n        label: \"activeConversation\",\n        value: conversationExists.conversation\n      });\n      this.props.history.push(\"/messages\");\n    }\n  }\n  crewPositionProfile() {\n    let crewMemberId = this.state.project.crew.filter(\n      a => a.position === this.state.drawerItem.title\n    )[0].id;\n\n    return this.state.crew.filter(a => a.id === crewMemberId)[0];\n  }\n\n  checkIsOwner() {}\n  async addToNetwork(item) {\n    this.context.isAuthenticated &&\n      (await Fn.addToNetwork({ self: this, item: item }));\n\n    !this.context.isAuthenticated &&\n      message.warning(\"Please login to use network functions.\");\n  }\n  async applyForPosition() {\n    const account = Fn.get(\"account\");\n\n    this.setState({\n      buttonLoading: true\n    });\n\n    const application = {\n      position: this.state.drawerItem,\n      project: this.state.project.id,\n      applicant: account.user.id\n    };\n\n    await Fn.applyForPosition({ self: this, application }).then(result => {\n      setTimeout(() => {\n        this.reloadProject();\n      }, 1000);\n    });\n  }\n\n  toggleDrawer(config) {\n    const { type, item } = config;\n\n    this.setState({\n      drawerItem: item,\n      drawerType: type,\n      drawerVisible: !this.state.drawerVisible\n    });\n  }\n\n  async fetchCrew() {}\n  avatar(item) {\n    window.log.info(\"constants\", constants);\n    let avatar =\n      typeof item.media !== \"undefined\" &&\n      typeof item.media.images !== \"undefined\"\n        ? item.media.images[0].url\n        : constants.placeholderImage;\n    return avatar;\n  }\n  userAvatar(item) {\n    let user = this.state.projectOwner;\n    window.log.info(user);\n    let avatar =\n      typeof user && user.profile && user.profile.picture !== \"undefined\"\n        ? user.profile.picture\n        : constants.placeholderImage;\n    return avatar;\n  }\n  fetchProjectData = async () => {\n    // await Fn.fetchProject({\n    //   self: this,\n    //   projectId: this.state.projectId,\n    //   // next: [Fn.fetchCrew]\n    // });\n  };\n  load = async () => {\n    let self = this;\n\n    let project = await Fn.fetchProject({\n      self: this,\n      projectId: this.state.projectId\n    }).then(async project => {\n      self.setState({ project });\n\n      this.checkUserPermissions();\n\n      Fn.set(\"activeProject\", project);\n\n      if (project) {\n        // alert()\n        console.log(\"project ]]]\", project);\n        let projectOwner = await Fn.fetchProjectOwner({ self, project });\n\n        console.log(\"projectOwner\", projectOwner);\n\n        let crew = await Fn.fetchCrew({ self, project });\n\n        let applications = await Fn.fetchApplications({ self, project });\n\n        let invited = await Fn.fetchInvitedUsers({ self, project });\n\n        let ownerId = project.owner;\n        let account = Fn.get(\"account\");\n        if (account && account.hasOwnProperty(\"user\")) {\n          let currentUserId = account.user.id;\n          if (ownerId === currentUserId) {\n            this.setState({\n              userIsOwner: true\n            });\n          }\n        }\n\n        this.setButtons();\n        this.setState({ ready: true });\n      }\n    });\n  };\n  checkUserPermissions() {\n    let productionCrew = this.state.project.productionCrew;\n    let currentUserId = Fn.get(\"account\").user.id;\n\n    let isProdCrew = productionCrew.filter(a => a.user === currentUserId);\n\n    console.log(\" \");\n    console.log(\"isProdCrew\", isProdCrew.length > 0);\n    console.log(\"permissions\", isProdCrew[0] && isProdCrew[0].permissions);\n\n    console.log(\" \");\n    if(isProdCrew.length){\n      this.setState({\n        currentUserPermissions: isProdCrew[0] && isProdCrew[0].permissions\n      });\n\n    }\n  }\n  componentWillUnmount() {}\n  componentDidUpdate() {}\n  async componentDidMount() {\n    this.load();\n\n    // app.checkUserIsOwner(this)\n\n    if (localStorage.getItem(\"projectView\") !== null) {\n      let view = Fn.get(\"projectView\");\n\n      this.setState({\n        view: view\n      });\n      view === \"discussion\" &&\n        setTimeout(\n          () =>\n            document.querySelector(\"body\").scroll({\n              top: 130,\n              left: 0,\n              behavior: \"smooth\"\n            }),\n          1000\n        );\n    }\n    if (localStorage.getItem(\"activeButton\") !== null) {\n      let activeButton = Fn.get(\"activeButton\");\n\n      this.setState({\n        activeButton: activeButton\n      });\n    }\n\n    document.querySelector(\"body\").scroll({\n      top: 0,\n      left: 0,\n      behavior: \"smooth\"\n    });\n    setTimeout(() => {\n      if (document.getElementById(\"MessagesList\")) {\n        document.getElementById(\"MessagesList\").scroll({\n          top: document.getElementById(\"MessagesList\").scrollHeight,\n          left: 0,\n          behavior: \"smooth\"\n        });\n      }\n    }, 500);\n  }\n  render() {\n    const currentUserId = Fn.get(\"account\").user.id;\n\n    return (\n      <AccountContext.Consumer>\n        {props => {\n          return (\n            <TransitionLayout>\n              {!this.state.ready && <Loading />}\n\n              {Fn.get(\"isAuthenticated\") && (\n                <>\n                  {this.state.ready && !ui.mobile() && (\n                    <section \n                    style={{ background: 'rgb(103, 103, 103)', top: '12vh', width: '100%', left: '0', zIndex: '4' }}\n                    id=\"ToolbarButtons\" \n                    className=\"flex flex-column fixed \">\n                      <div className=\"flex flex-row justify-between \">\n                        <div className=\"flex flex-row flex-auto overflow-hidden\">\n                          {this.state.buttons\n                            // .filter(b => b.role === \"general\")\n                            .map((button, index) => (\n                              <button\n                                title={button.title}\n                                onClick={() =>\n                                  this.setView({\n                                    view: this.state.views[index],\n                                    button: button\n                                  })\n                                }\n                                id={button.title}\n                                className={\n                                  \" bl b--black-05 \" +\n                                  (this.state.activeButton.title ===\n                                  button.title\n                                    ? \" bg-black-20 \"\n                                    : \" bg-black-30 \") +\n                                  \" trans-a flex flex-column pa0 mr3- pointer justify-center items-center flex-auto\"\n                                }\n                                style={{  minWidth: 'calc(100% /' + this.state.buttons.length + ')' }}\n                              >\n                                <div\n                                  id=\"\"\n                                  className=\"flex flex-row ph0 pv0 items-center justify-center\"\n                                >\n                                  <span className=\"flex f5 fw6 black-40- white ph3 pv4 w-100 tc\">\n                                    {button.title}\n                                  </span>\n                                </div>\n                              </button>\n                            ))}\n                          {/* {this.state.buttons\n                            .filter(b => b.role === \"admin\")\n                            .map((button, index) => (\n                              <button\n                                // disabled={!this.state.currentUserPermissions.includes(button.permission) }\n                                title={button.title}\n                                onClick={() =>\n                                  this.setView({\n                                    view: this.state.views[index + 3],\n                                    button: button\n                                  })\n                                }\n                                id={button.title}\n                                className={\n                                  \" bl b--black-05 \" +\n                                  (this.state.activeButton.title ===\n                                  button.title\n                                    ? \" bg-black-20 \"\n                                    : \" bg-black-30 \") +\n                                  \" flex flex-column pa0 mr3- pointer justify-center items-center flex-auto\"\n                                }\n                              >\n                                <div\n                                  id=\"\"\n                                  className=\"flex flex-row ph0 pv0 items-center justify-center\"\n                                >\n                                  <span className=\"f5 fw6 black-40- white ph3 pv4 w-100 tc \">\n                                    {button.title}\n                                  </span>\n                                </div>\n                              </button>\n                            ))} */}\n                        </div>\n                      </div>\n                    </section>\n                  )}\n                </>\n              )}\n\n              { this.state.ready && (\n                <section\n                  id=\"SingleProject\"\n                  className=\"w-100 top-10vh relative\"\n                >\n                  {/* <div\n                    onClick={this.refresh}\n                    className=\"absolute top-0 right-0 pa4 pointer black-30\"\n                  >\n                    <Icon\n                      type=\"sync\"\n                      className={\n                        (this.state.ready ? \" inactive \" : \" active \") +\n                        \" loading-icon \"\n                      }\n                    />\n                  </div> */}\n<div className=\" flex flex-column ph5 \">\n                  <section\n                    ref={this.mainColumn}\n                    id=\"MainColumn\"\n                    className=\"flex flex-column w-100 pb4\"\n                  >\n                    <>\n                    {this.state.view.title === \"Itinerary\" && (\n                        <Itinerary\n                          invited={this.state.invited}\n                          project={this.state.project}\n                          loadingAlign={\"center\"}\n                          title={\"Itinerary\"}\n                          size={\"full\"}\n                          type={\"itinerary\"}\n                        />\n                      )}\n\n                      {this.state.view.title === \"Files\" &&\n                        this.state.currentUserPermissions.includes(\n                          \"projectfiles\"\n                        ) && (\n                          <Files\n                            invited={this.state.invited}\n                            project={this.state.project}\n                          />\n                        )}\n\n                      {this.state.view.title === \"Discussion\" && (\n                        <Discussion\n                          invited={this.state.invited}\n                          project={this.state.project}\n                          loadingAlign={\"left\"}\n                          title={\"Discussion\"}\n                          size={\"full\"}\n                          type={\"project-discussion\"}\n                        />\n                      )}\n\n                      {this.state.view.title === \"Settings\" && (\n                        <>\n                          {this.state.currentUserPermissions.includes(\n                            \"projectsettings\"\n                          ) && (\n                            <Settings\n                              invited={this.state.invited}\n                              project={this.state.project}\n                            />\n                          )}\n                          {!this.state.currentUserPermissions.includes(\n                            \"projectsettings\"\n                          ) && <NoPermissions />}\n                        </>\n                      )}\n                      {this.state.view.title === \"People\" && (\n                        <>\n                          {this.state.currentUserPermissions.includes(\n                            \"projectpeople\"\n                          ) && (\n                            <People\n                              invited={this.state.invited}\n                              project={this.state.project}\n                              projectOwner={this.state.projectOwner}\n                              reloadProject={this.reloadProject}\n                              updateProjectState={this.updateProjectState}\n                            />\n                          )}\n                          {!this.state.currentUserPermissions.includes(\n                            \"projectpeople\"\n                          ) && <NoPermissions />}\n                        </>\n                      )}\n\n                      {this.state.view.title === \"Checklist\" && (\n                        <>\n                          {this.state.currentUserPermissions.includes(\n                            \"projectchecklists\"\n                          ) && (\n                            <Checklist\n                              invited={this.state.invited}\n                              project={this.state.project}\n                              projectOwner={this.state.projectOwner}\n                            />\n                          )}\n                          {!this.state.currentUserPermissions.includes(\n                            \"projectchecklists\"\n                          ) && <NoPermissions />}\n                        </>\n                      )}\n\n                      {this.state.view.title === \"Rate Calculator\" && (\n                        <>\n                          {this.state.currentUserPermissions.includes(\n                            \"projectratecalculator\"\n                          ) && (\n                            <RateCalculator\n                              invited={this.state.invited}\n                              project={this.state.project}\n                              projectOwner={this.state.projectOwner}\n                            />\n                          )}\n                          {!this.state.currentUserPermissions.includes(\n                            \"projectratecalculator\"\n                          ) && <NoPermissions />}\n                        </>\n                      )}\n                    </>\n\n                    {this.state.view.title === \"Overview\" && (\n                      <div className=\"flex flex-column w-100\">\n                        {/* <div className=\"flex pb3\">\n                          <PageTitle title={\"Overview\"} />\n                        </div> */}\n                        <div\n                          id=\"Overview\"\n                          className=\"flex flex-row-ns flex-column w-100\"\n                        >\n                          <div className=\"flex flex-column w-100-ns w-100\">\n\n                            <div\n                              id=\"SingleProjectHeader\"\n                              className={\n                                \" trans-a relative raleway Project_list_item -sans-serif flex flex-column flex--auto w-100  items-center justify-start pa0 bs-b mb4 br2 overflow-hidden relative \"\n                              }\n                            >\n                              <div\n                                onClick={\n                                  this.state.userIsOwner &&\n                                  this.openFileUploadDialog\n                                }\n                                className=\"pointer avatar-l- flex flex-column bg-cover bg-center br4-\"\n                                style={{\n                                  height: '48vh', \n                                  width: '100%',\n                                  background:\n                                    this.state.project.media &&\n                                    this.state.project.media.images &&\n                                    this.state.project.media.images.length &&\n                                    this.state.project.media.images[0].url\n                                      ? \"url(\" +\n                                        this.state.project.media.images[0].url +\n                                        \")\"\n                                      : GeoPattern.generate(\n                                          this.state.project.title\n                                        ).toDataUrl()\n                                }}\n                              />\n\n                                <div className=\"flex flex-column  w-100 relative bg-white raleway\">\n                                <div className=\"flex flex-row w-100\">\n                                  <div className=\"flex flex-column w-100 \">\n                                    <div\n                                      className={\n                                        \"flex flex-column pa3 bb b--black-10 \"\n                                      }\n                                    >\n                                      <h4 className=\"f5 flex flex-column mb0\">\n                                        <span className=\"f3 fw7 black pv2 ph3\">\n                                          {this.state.project.title}\n                                        </span>\n                                        <span className=\"f4 fw4 black-40 pb2 ph3\">\n                                          {this.state.project.description}\n                                        </span>\n                                      </h4>\n                                    </div>\n                                    <div className={\"flex flex-row \"}>\n                                      <div className=\"flex flex-row-ns flex-column mb0 flex-auto\">\n                                        <span className=\"f6 fw7 black-70 ph4 pv3 ttc br b--black-05\">\n                                          <span className=\"fw4 black-40 mr1 ttc\">\n                                            Type\n                                          </span>{\" \"}\n                                          {this.state.project.type}\n                                        </span>\n                                        <span className=\"f6 fw7 black-70 ph4 pv3 br b--black-05\">\n                                          <span className=\"fw4 black-40 mr1\">\n                                            Location\n                                          </span>{\" \"}\n                                          {typeof this.state.project.location\n                                            .address !== \"undefined\"\n                                            ? this.state.project.location\n                                                .address.county +\n                                              \", \" +\n                                              this.state.project.location\n                                                .address.country\n                                            : this.state.project.location}\n                                        </span>\n                                        <span className=\"f6 fw7 black-70  ph4 pv3 br b--black-05\">\n                                          <span className=\"fw4 black-40 mr1\">\n                                            Start\n                                          </span>{\" \"}\n                                          {moment(\n                                            this.state.project.start_date\n                                          ).format(\"DD MMMM YYYY\")}\n                                        </span>\n                                        <span className=\"f6 fw7 black-70  ph4 pv3\">\n                                          <span className=\"fw4 black-40 mr1\">\n                                            End\n                                          </span>{\" \"}\n                                          {moment(\n                                            this.state.project.end_date\n                                          ).format(\"DD MMMM YYYY\")}\n                                        </span>\n                                      </div>\n\n                                      {/* <div\n                                        style={{\n                                          top: \"2vh\",\n                                          right: \"1vw\",\n                                          boxShadow: \"0px 0px 0px 3px #dcdcdc\"\n                                        }}\n                                        className=\"top-0 right-0 absolute flex flex-column items-center justify-center round w4 h4 bg-white\"\n                                      >\n                                        <span className=\"flex f5 fw5 black tc items-center justify-center pb1\">\n                                          {moment(\n                                            this.state.project.start_date\n                                          ).diff(new Date(), \"days\")}{\" \"}\n                                          days\n                                        </span>\n\n                                        <span className=\"flex f5 fw5 black tc items-center justify-center pb1\">\n                                          {moment()\n                                            .endOf(\"day\")\n                                            .diff(\n                                              new Date().getTime(),\n                                              \"hours\"\n                                            )}{\" \"}\n                                          hours\n                                        </span>\n\n                                        <span className=\"flex ttu f6 fw3 black-60 tc\">\n                                          to start\n                                        </span>\n                                      </div> */}\n                                    </div>\n\n                                    {/* {this.state.project &&\n                                      this.state.project.invited &&\n                                      this.state.project.invited.length &&\n                                      this.state.project.invited.length > 0 &&\n                                      this.state.project.invited.filter(\n                                        a => a.id === currentUserId\n                                      ).length > 0 &&\n                                      !this.state.project.crew.filter(\n                                        a => a.id === currentUserId\n                                      ).length > 0 && (\n                                        <div className=\"flex flex-row-ns flex-column mb0 flex-auto\">\n                                          <button\n                                            onClick={this.acceptInvitation}\n                                            className=\"flex ph3 pv2 f5 fw6 white bg-black w-100 pv3 items-center justify-center hover-bg-green pointer trans-a\"\n                                          >\n                                            {!this.state.acceptingInvitation &&\n                                              \"Accept Invitation\"}\n                                            {this.state.acceptingInvitation && (\n                                              <div className=\"pv2\">\n                                                <div className=\"sp sp-3balls\"></div>\n                                              </div>\n                                            )}\n                                          </button>\n                                        </div>\n                                      )} */}\n                                  </div>\n                                </div>\n                              </div>\n\n                              {/* <div\n                                className={\n                                  \" exo flex flex-row justify-between  w-100\"\n                                }\n                              >\n                                <div\n                                  style={{ background: \"rgb(120, 150, 120)\" }}\n                                  className=\" bg-black-05-  flex flex-row justify-between w-100\"\n                                >\n                                  <div\n                                    className={\n                                      \" flex flex-row w-100 justify-between\"\n                                    }\n                                  >\n                                    <div\n                                      onClick={() =>\n                                        this.toggleDrawer({\n                                          type: \"crewList\",\n                                          item: null\n                                        })\n                                      }\n                                      className=\"flex flex-row  mb0 flex-auto items-center justify-center bl b--white-30 bg-black-40 \"\n                                    >\n                                      <span\n                                        className={\n                                          \"flex f7 fw3 white items-center justify-center  pa2\"\n                                        }\n                                      >\n                                        view all crew{\" \"}\n                                        <Icon\n                                          icon={\"arrow-right\"}\n                                          iconSize={14}\n                                          className=\"ml1\"\n                                        />\n                                      </span>\n                                    </div>\n                                  </div>\n                                </div>\n                              </div> */}\n                            </div>\n\n                            {Fn.get(\"isAuthenticated\") && (\n                              <>\n                                <Link\n                                  to={\"/user/\" + this.state.project.owner}\n                                  id=\"ProjectOwner\"\n                                  className=\"flex flex-column w-100 pt3 pb5 bb b--black-05\"\n                                >\n                                  <div className=\"flex flex-row-ns flex-column w-100\">\n                                    <div className=\"flex flex-column w-100=\">\n                                      <div className=\"round pa1 bg-white center\">\n                                        <div\n                                          style={{\n                                            width: \"150px\",\n                                            height: \"150px\",\n                                            backgroundImage: this.state\n                                              .projectOwner.profile.picture\n                                              .length\n                                              ? \"url(\" +\n                                                this.state.projectOwner.profile\n                                                  .picture +\n                                                \")\"\n                                              : GeoPattern.generate(\n                                                  this.state.projectOwner\n                                                    .profile.name.first +\n                                                    this.state.projectOwner\n                                                      .profile.name.last\n                                                ).toDataUrl()\n                                          }}\n                                          className=\"center pointer round  cover bg-center\"\n                                        ></div>\n                                      </div>\n                                    </div>\n\n                                    <div className=\"flex flex-column justify-center w-100 ph4\">\n                                      <div className=\"f4 flex flex-column items-center w-100 raleway \">\n                                        <div className=\"flex flex-row-ns flex-column items-center w-100 pv3\">\n                                          <span className=\"f5 fw3 black-50\">\n                                            Project Owner\n                                          </span>\n                                        </div>\n                                        <span className=\"flex flex-row-ns flex-column w-100 black f3 fw6\">\n                                          <span className=\"flex flex-row items-center justify-start-ns justify-center black f3 fw6\">\n                                            {this.state.projectOwner &&\n                                              this.state.projectOwner.profile &&\n                                              this.state.projectOwner.profile\n                                                .name.first}{\" \"}\n                                            {this.state.projectOwner &&\n                                              this.state.projectOwner.profile &&\n                                              this.state.projectOwner.profile\n                                                .name.last}\n                                          </span>\n                                          <span className=\"flex flex-row justify-center items-center f7 fw6 ml3-ns black-50- white-ns black bg-black-ns  ph3 pv1 ba-b--black-05 br1 -round bw1- bg-white tc\">\n                                            {this.state.projectOwner.position}{\" \"}\n                                          </span>\n                                        </span>\n                                      </div>\n\n                                      <div className=\"flex flex-row-ns flex-column w--100 pt3 black-60- raleway\">\n                                        <div className=\"flex flex-column w--100 pb1 mr3\">\n                                          <span className=\"flex flex-row-ns flex-column f6 fw4 black-40 items-center\">\n                                            <span className=\"flex\">\n                                              Location\n                                            </span>\n                                            <span className=\"f7 fw6 ml2-ns pv1 ph2 b-a white bg-black b--black-05 br1 mt0-ns mt3\">\n                                              {this.userLocation(\n                                                this.state.projectOwner\n                                              )}\n                                            </span>\n                                          </span>\n                                        </div>\n                                      </div>\n                                    </div>\n                                  </div>\n                                </Link>\n\n{ Fn.get(\"isAuthenticated\") &&\n                                <div className=\"flex flex-row mt5 pb5   bb b--black-05\">\n                                  <div className=\"flex flex-auto flex-column pb0 \">\n                                    <div className=\"flex flex-row items-center w-100 pb3\">\n                                      <span className=\"f5 fw3 black\">\n                                        Positions\n                                      </span>\n                                      <span className=\"f7 fw3 black-50 ml2\">\n                                        click a position to apply\n                                      </span>\n                                    </div>\n\n                                    <div className=\"flex flex-row flex-wrap f4 fw4 black-60 mb0\">\n                                      {this.state.project &&\n                                        this.state.project.positions &&\n                                        this.state.project.positions.length >\n                                          0 &&\n                                        this.state.project.positions.map(\n                                          (item, index) => (\n                                            <div\n                                              onClick={() =>\n                                                // this.toggleDrawer({\n                                                //   type: \"crewPositionDetail\",\n                                                //   item: item\n                                                // })\n                                                this.setState({\n                                                  drawerItem: item,\n                                                  drawerType:\n                                                    \"crewPositionDetail\",\n                                                  drawerTitle: item,\n                                                  drawerVisible: !this.state\n                                                    .drawerVisible\n                                                })\n                                              }\n                                              className={\n                                                \"crew-position-item pointer flex flex-column pb2 pr3 items-center justify-center\"\n                                              }\n                                            >\n                                              {/* {{/* <div\n              style={{\n                width: \"50px\",\n                height: \"50px\",\n                borderRadius: \"100px\",\n                backgroundImage:\n                  \"url(\" + item.auth0.picture + \")\"\n              }}\n              className=\"cover bg-center\"\n            /> */}\n                                              <div\n                                                className={\n                                                  \" flex flex-row pt2 relative\"\n                                                }\n                                              >\n                                                <div className=\"position-filled-label absolute right-0 top-0\">\n                                                  {this.state.project.crew.filter(\n                                                    a => a.position === item\n                                                  ).length > 0 && (\n                                                    <div className=\"ph1 pv0 br1 bg-green\">\n                                                      <span className=\"f7 fw6 white-60\">\n                                                        Filled\n                                                      </span>\n                                                    </div>\n                                                  )}\n                                                </div>\n                                                <div\n                                                  className={\n                                                    \"  flex f6 fw5  ph3 pv2 bg-white br1 \"\n                                                  }\n                                                >\n                                                  {item}\n                                                </div>\n                                              </div>\n                                            </div>\n                                          )\n                                        )}\n                                    </div>\n                                  </div>\n                                </div>\n        }\n\n                                {/* <div className=\"flex flex-row mt5 pb5   bb b--black-05\">\n                                  <div className=\"flex flex-auto flex-column pb0 \">\n                                    <div className=\"flex flex-row w-100 pb3\">\n                                      <span className=\"f5 fw3 black\">\n                                        Assigned Crew\n                                      </span>\n                                      <span className=\"round f7 fw6 black-70 ph2 pv1 bg-white ml2\">\n                                        {this.state.project.crew.length}\n                                      </span>\n                                    </div>\n\n                                    <div className=\"flex flex-row flex-wrap f4 fw4 black-60 mb0\">\n                                      {this.state.crew.length > 0 &&\n                                        this.state.crew\n                                          .filter((item, index) => index < 5)\n                                          .map((item, index) => (\n                                            <Popover\n                                              content={\n                                                <div className=\"flex flex-column\">\n                                                  <div\n                                                    onClick={() => {\n                                                      this.context.history.push(\n                                                        \"/user/\" + item.id\n                                                      );\n                                                    }}\n                                                    className=\"pointer flex f6 fw5 black-60 ph3 pv2 hover-black bb b--black-05\"\n                                                  >\n                                                    View Profile\n                                                  </div>\n\n                                                  <div\n                                                    onClick={() =>\n                                                      this.addToNetwork(item)\n                                                    }\n                                                    className=\"pointer flex f6 fw5 black-60 ph3 pv2 hover-black bb b--black-05\"\n                                                  >\n                                                    Add to network\n                                                  </div>\n\n                                                  <div\n                                                    onClick={() =>\n                                                      this.sendMessage(item)\n                                                    }\n                                                    className=\"pointer flex f6 fw5 black-60 ph3 pv2 hover-black\"\n                                                  >\n                                                    Send Message\n                                                  </div>\n                                                </div>\n                                              }\n                                              trigger=\"hover\"\n                                            >\n                                              <Link\n                                                to={\"/user/\" + item.id}\n                                                className={\n                                                  \" pointer flex flex-column f-lex-auto pv2 pr3 items-center justify-center\"\n                                                }\n                                              >\n                                                <div\n                                                  style={{\n                                                    width: \"80px\",\n                                                    height: \"80px\",\n                                                    borderRadius: \"100px\",\n                                                    backgroundImage: item\n                                                      .profile.picture.length\n                                                      ? \"url(\" +\n                                                        item.profile.picture +\n                                                        \")\"\n                                                      : GeoPattern.generate(\n                                                          item.profile.name\n                                                            .first +\n                                                            item.profile.name\n                                                              .last\n                                                        ).toDataUrl()\n                                                  }}\n                                                  className=\"cover bg-center\"\n                                                />\n                                                <div\n                                                  className={\n                                                    \" flex flex-row pt2 \"\n                                                  }\n                                                >\n                                                  <div\n                                                    className={\n                                                      \" flex f6 fw6 black-70 \"\n                                                    }\n                                                  >\n                                                    {item.profile.name.first}\n                                                  </div>\n                                                  <div\n                                                    className={\n                                                      \" flex f6 fw6 ml1 black-70\"\n                                                    }\n                                                  >\n                                                    {item.profile.name.last}\n                                                  </div>\n                                                </div>\n                                              </Link>\n                                            </Popover>\n                                          ))}\n\n                                      {this.state.project.crew.length - 5 >\n                                        0 && (\n                                        <div\n                                          className={\n                                            \" flex flex-column pa2 items-start justify-start\"\n                                          }\n                                        >\n                                          <div\n                                            style={{\n                                              width: \"50px\",\n                                              height: \"50px\",\n                                              borderRadius: \"100px\"\n                                            }}\n                                            onClick={() =>\n                                              this.toggleDrawer({\n                                                type: \"crewList\",\n                                                item: null\n                                              })\n                                            }\n                                            className=\"pointer flex flex-column items-center justify-center cover bg-center bg-black\"\n                                          >\n                                            <span className=\"flex f7 fw6 white tc\">\n                                              +\n                                              {this.state.project.crew.length -\n                                                5}\n                                            </span>\n                                            <span className=\"flex f7 fw6 white tc\">\n                                              more\n                                            </span>\n                                          </div>\n                                        </div>\n                                      )}\n\n                                      {this.state.project.crew.length === 0 && (\n                                        <span className=\"flex f6 fw5 black-50 tc\">\n                                          No crew assigned yet\n                                        </span>\n                                      )}\n                                    </div>\n                                  </div>\n                                </div>  */}\n\n                                {/* <div className=\"flex flex-row mt5 pb5   bb b--black-05\">\n                                  <div className=\"flex flex-auto flex-column pb0 \">\n                                    <div className=\"flex flex-row w-100 pb3\">\n                                      <span className=\"f5 fw3 black\">\n                                        Invited Crew\n                                      </span>\n                                      <span className=\"round f7 fw6 black-70 ph2 pv1 bg-white ml2\">\n                                        {(this.state.project &&\n                                          this.state.project.invited &&\n                                          this.state.project.invited.length) ||\n                                          0}\n                                      </span>\n                                    </div>\n\n                                    <div className=\"flex flex-row flex-wrap f4 fw4 black-60 mb0\">\n                                      {this.state.invited.length > 0 &&\n                                        this.state.invited.map(\n                                          (item, index) => (\n                                            <Popover\n                                              content={\n                                                <div className=\"flex flex-column\">\n                                                  <div\n                                                    onClick={() => {\n                                                      this.context.history.push(\n                                                        \"/user/\" + item.id\n                                                      );\n                                                    }}\n                                                    className=\"pointer flex f6 fw5 black-60 ph3 pv2 hover-black bb b--black-05\"\n                                                  >\n                                                    View Profile\n                                                  </div>\n\n                                                  <div\n                                                    onClick={() =>\n                                                      this.addToNetwork(item)\n                                                    }\n                                                    className=\"pointer flex f6 fw5 black-60 ph3 pv2 hover-black bb b--black-05\"\n                                                  >\n                                                    Add to network\n                                                  </div>\n\n                                                  <div\n                                                    onClick={() =>\n                                                      this.sendMessage(item)\n                                                    }\n                                                    className=\"pointer flex f6 fw5 black-60 ph3 pv2 hover-black\"\n                                                  >\n                                                    Send Message\n                                                  </div>\n                                                </div>\n                                              }\n                                              trigger=\"hover\"\n                                            >\n                                              <Link\n                                                to={\"/user/\" + item.id}\n                                                className={\n                                                  \" pointer flex flex-column flex-au-to pv2 pr3 items-center justify-center\"\n                                                }\n                                              >\n                                                <div\n                                                  style={{\n                                                    width: \"80px\",\n                                                    height: \"80px\",\n                                                    borderRadius: \"100px\",\n                                                    backgroundImage: item\n                                                      .profile.picture.length\n                                                      ? \"url(\" +\n                                                        item.profile.picture +\n                                                        \")\"\n                                                      : GeoPattern.generate(\n                                                          item.profile.name\n                                                            .first +\n                                                            item.profile.name\n                                                              .last\n                                                        ).toDataUrl()\n                                                  }}\n                                                  className=\"cover bg-center\"\n                                                />\n                                                <div\n                                                  className={\n                                                    \" flex flex-row pt2 \"\n                                                  }\n                                                >\n                                                  <div\n                                                    className={\n                                                      \" flex f6 fw6 black-70 \"\n                                                    }\n                                                  >\n                                                    {item.profile.name.first}\n                                                  </div>\n                                                  <div\n                                                    className={\n                                                      \" flex f6 fw6 ml1 black-70\"\n                                                    }\n                                                  >\n                                                    {item.profile.name.last}\n                                                  </div>\n                                                </div>\n                                              </Link>\n                                            </Popover>\n                                          )\n                                        )}\n\n                                      {this.state.project &&\n                                        this.state.project.invited &&\n                                        this.state.project.invited.length ===\n                                          0 && (\n                                          <span className=\"flex f6 fw5 black-50 tc\">\n                                            No crew invited yet\n                                          </span>\n                                        )}\n                                    </div>\n                                  </div>\n                                </div> */}\n\n                              </>\n                            )}\n                          </div>\n\n                        </div>\n                      </div>\n                    )}\n\n                    { Fn.get(\"isAuthenticated\") && ui.mobile() && (\n                      <div\n                        style={{ width: \"100vw\" }}\n                        className=\"bg-white fixed bottom-7vh left-0 w-100- flex flex-row bs-b bb b--black-05 overflow-scroll\"\n                      >\n                        <div className=\"w-100- flex flex-row\">\n                          {this.state.buttons.map((button, index) => (\n                            <button\n                              title={button.title}\n                              onClick={() =>\n                                this.setView({\n                                  view: this.state.views[index],\n                                  button: button\n                                })\n                              }\n                              id=\"CV-button\"\n                              className={\n                                (this.state.activeButton.title === button.title\n                                  ? \" bg-black-05 fw6\"\n                                  : \" bg-white fw5 \") +\n                                \" hover-bg-white-10 flex flex-column pa0 pointer justify-center flex-auto bl b--black-05\"\n                              }\n                            >\n                              <div\n                                id=\"\"\n                                className=\"flex flex-row ph0 pv0 items-center justify-center\"\n                              >\n                                <span className=\"f5 -fw6 black ph3 pv3\">\n                                  {button.title}\n                                </span>\n                              </div>\n                            </button>\n                          ))}\n                        </div>\n                      </div>\n                    )}\n                  </section>\n                  </div>\n\n                  <Dialog\n                    className={\"bp3-light\"}\n                    onClose={this.toggleDialog}\n                    title={this.state.dialogTitle}\n                    onValueChange={this.onValueChange}\n                    {...this.state}\n                  >\n                    <div className=\"flex flex-column ph4 pt4 pb2\">\n                      {this.state.dialogType === \"bio\" && (\n                        <FormBio\n                          value={props.account.user.profile.bio}\n                          submitBio={this.submitBio}\n                        />\n                      )}\n                      {this.state.dialogType === \"cv\" && <FormBio />}\n                      {this.state.dialogType === \"addToNetwork\" && <FormBio />}\n                      {this.state.dialogType === \"addToProject\" && <FormBio />}\n                      {this.state.dialogType === \"projectAvatarUpload\" && (\n                        <Filepond\n                          self={this}\n                          project={this.state.project}\n                          type={\"projectAvatarUpload\"}\n                        />\n                      )}\n                    </div>\n                  </Dialog>\n\n                  {this.state && this.state.ready && (\n                    <Drawer\n                      title={\"Crew List\"}\n                      placement={\"right\"}\n                      closable={true}\n                      onClose={this.toggleDrawer}\n                      width={500}\n                      visible={this.state.drawerVisible}\n                      doc={this.props.project}\n                      className={\"CrewList -bg-near-white\"}\n                    >\n                      <div className=\"flex flex-column mb2 pa4-  \">\n                        {/* <div className=\"ProjectScenesHeading pt0\">\n                            <h3 className=\"f6 fw3 black-30 mb3\">Crew List</h3>\n                          </div> */}\n\n                        <div className=\"flex flex-auto flex-column pb0 \">\n                          <div className=\"flex flex-row flex-wrap f4 fw4 black-60 mb0\">\n                            {this.state.drawerType === \"crewList\" &&\n                              this.state.crew.map((item, index) => (\n                                <Popover\n                                  content={\n                                    <div\n                                      onClick={() => this.addToNetwork(item)}\n                                      className=\"pointer flex f6 fw5 black-60 ph2 pv2 hover-black\"\n                                    >\n                                      Add to network\n                                    </div>\n                                  }\n                                  trigger=\"hover\"\n                                >\n                                  <Link\n                                    to={\"/user/\" + item.id}\n                                    className={\n                                      \" pointer flex flex-column pv2 pr4 items-start justify-center\"\n                                    }\n                                  >\n                                    <div\n                                      style={{\n                                        width: \"100px\",\n                                        height: \"120px\",\n                                        borderRadius: \"5px\",\n                                        backgroundImage:\n                                          \"url(\" + item.profile.picture + \")\"\n                                      }}\n                                      className=\"cover bg-center\"\n                                    />\n                                    <div className={\" flex flex-row pt2 \"}>\n                                      <div className={\" flex f7 fw6 \"}>\n                                        {item.profile.name.first}\n                                      </div>\n                                      <div className={\" flex f7 fw6 ml1\"}>\n                                        {item.profile.name.last}\n                                      </div>\n                                    </div>\n                                  </Link>\n                                </Popover>\n                              ))}\n\n                            {this.state.drawerType === \"crewPositionDetail\" && (\n                              <div className=\"flex flex-auto flex-column pb0\">\n                                <div className=\"flex flex-column bb b--black-10 \">\n                                  <h4 className=\"f5 flex flex-column mb0\">\n                                    <span className=\"f4 fw6 black-80 pv3 ph4\">\n                                      {this.state.drawerItem}\n                                    </span>\n                                    {/* <span className=\"f5 fw3 black-40\">\n                                      {this.state.drawerItem.description}\n                                    </span> */}\n                                  </h4>\n                                </div>\n\n                                {this.state.project.crew.filter(\n                                  a =>\n                                    a.position &&\n                                    a.position.position &&\n                                    a.position.position ===\n                                      this.state.drawerItem.title\n                                ).length > 0 && (\n                                  <div className=\"flex flex-column  pb3 \">\n                                    <h4 className=\"f5 flex flex-column mb0 pv3 ph4\">\n                                      <span className=\"f5 fw5 black-30 pb2 pt3\">\n                                        Position filled\n                                      </span>\n                                      {/* <span className=\"f5 fw3 black-40\">{\"...\"}</span> */}\n                                      <Popover\n                                        content={\n                                          <div\n                                            onClick={() =>\n                                              this.addToNetwork(\n                                                this.crewPositionProfile()\n                                              )\n                                            }\n                                            className=\"pointer flex f6 fw5 black-60 ph2 pv2 hover-black\"\n                                          >\n                                            Add to network\n                                          </div>\n                                        }\n                                        trigger=\"hover\"\n                                      >\n                                        <Link\n                                          to={\n                                            \"/user/\" +\n                                            this.crewPositionProfile().id\n                                          }\n                                          className={\n                                            \" pointer flex flex-column pv2 pr4 items-start justify-center\"\n                                          }\n                                        >\n                                          <div\n                                            style={{\n                                              width: \"100px\",\n                                              height: \"120px\",\n                                              borderRadius: \"5px\",\n                                              backgroundImage:\n                                                \"url(\" +\n                                                this.crewPositionProfile()\n                                                  .profile.picture +\n                                                \")\"\n                                            }}\n                                            className=\"cover bg-center\"\n                                          />\n                                          <div\n                                            className={\n                                              \" flex flex-row pt2 black\"\n                                            }\n                                          >\n                                            <div className={\" flex f5 fw6 \"}>\n                                              {\n                                                this.crewPositionProfile()\n                                                  .profile.name.first\n                                              }\n                                            </div>\n                                            <div className={\" flex f5 fw6 ml1\"}>\n                                              {\n                                                this.crewPositionProfile()\n                                                  .profile.name.last\n                                              }\n                                            </div>\n                                          </div>\n                                        </Link>\n                                      </Popover>\n                                    </h4>\n                                  </div>\n                                )}\n\n                                {props.isAuthenticated && (\n                                  <div className=\"flex flex-column pa4 bt bb b--black-10\">\n                                    <button\n                                      disabled={\n                                        this.state.project.crew.filter(\n                                          a =>\n                                            a.position &&\n                                            a.position.position &&\n                                            a.position.position ===\n                                              this.state.drawerItem.title\n                                        ).length > 0\n                                      }\n                                      onClick={this.applyForPosition}\n                                      className=\"pointer flex flex-row justify-center flex-auto items-center mb0 ph4 pv3 bg-black-05 hover-bg-black-10 bn br1\"\n                                    >\n                                      <span className=\"f5 fw6 black-40 hover-black-70\">\n                                        Apply for Position{\" \"}\n                                        {this.state.project.crew.filter(\n                                          a =>\n                                            a.position === this.state.drawerItem\n                                        ).length > 0 && \"[ Filled ]\"}\n                                      </span>\n                                      <div className=\"flex flex-row justify-between items-center\">\n                                        {this.state.buttonLoading && (\n                                          <Spinner size={20} />\n                                        )}\n                                      </div>\n                                    </button>\n                                  </div>\n                                )}\n\n                                {!props.isAuthenticated && (\n                                  <div className=\"flex flex-column pt3 \">\n                                    <button\n                                      disabled\n                                      onClick={this.applyForPosition}\n                                      className=\"pointer flex flex-row justify-center flex-auto items-center mb0 ph4 pv3 bg-black-05 hover-bg-black-10 bn br1\"\n                                    >\n                                      <span className=\"f5 fw6 black-40 hover-black-70\">\n                                        Login to Apply for Position\n                                      </span>\n                                      <div className=\"flex flex-row justify-between items-center\">\n                                        {this.state.buttonLoading && (\n                                          <Spinner size={20} />\n                                        )}\n                                      </div>\n                                    </button>\n                                  </div>\n                                )}\n                              </div>\n                            )}\n                          </div>\n                        </div>\n                      </div>\n                    </Drawer>\n                  )}\n                </section>\n              )}\n\n              {this.state.invitationAccepted && (\n                <div className=\"fixed top-0 left-0 w-100 h-100 bg-black-90 flex items-center justify-center\">\n                  <div className=\"flex flex-column items-center justify-center\">\n                    <div className=\"flex pv4\">\n                      <Icon\n                        icon={\"endorsed\"}\n                        iconSize={\"100\"}\n                        className=\"white\"\n                      />\n                    </div>\n                    <div className=\"flex flex-row items-center justify-center white f3 fw5 pb3\">\n                      You successfully accepted your role as{\" \"}\n                      <span className=\"fw6 mh1\">\n                        {Fn.get(\"account\").user.position}\n                      </span>{\" \"}\n                      for this project.\n                    </div>\n                    <div className=\"flex flex-row items-center justify-center f5 fw5 white-60 pb3\">\n                      You will receive a project sheet via email within the next\n                      few minutes.\n                    </div>\n                    <div className=\"flex flex-row items-center justify-center mt4\">\n                      <button\n                        onClick={() => {\n                          this.setState({ invitationAccepted: false });\n                        }}\n                        className=\"pointer flex ph4 pv2 f6 fw6 white- black bg-white hover-bg-white-50 round ttc\"\n                      >\n                        close{\" \"}\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              )}\n            </TransitionLayout>\n          );\n        }}\n      </AccountContext.Consumer>\n    );\n  }\n}\n\nexport default SingleProject;\nSingleProject.contextType = AccountContext;\n\nconst NoPermissions = () => (\n  <div className=\"tc flex flex-column pv3 ph4 f4 fw5 black-50\">\n    You do not have permission to view this content\n  </div>\n);\n","import React from \"react\";\n// import React, { getGlobal, setGlobal, useGlobal } from \"reactn\";\nimport { Redirect, Link } from \"react-router-dom\";\nimport moment, { fn } from \"moment\";\nimport { Popover, Empty, Skeleton, Rate, Tooltip } from \"antd\";\n\nimport TransitionLayout from \"../../Layouts/Transition\";\n// import ListChefs from \"../../elements/display/chefs/list\";\nimport PageTitle from \"../../elements/layout/PageTitle_B\";\n// import ChefInfo from \"../../elements/display/drawers/ProjectInfo\";\nimport LocationSearchFormWrapper from \"../../elements/display/forms/LocationSearchFormWrapper\";\nimport OnboardingScreen from \"../../elements/display/onboarding/OnboardingScreen\";\nimport LocationSearchBar from \"../../elements/display/forms/LocationSearchBar\";\nimport { Icon, Spinner, Dialog, NumericInput } from \"@blueprintjs/core\";\n\nimport Filepond from \"../../elements/upload/Filepond.js\";\n\nimport FormBio from \"../../a/FormBio/index.js\";\nimport FormProfile from \"../../a/FormProfile/index.js\";\nimport FormPortfolioProject from \"../../a/FormPortfolioProject/index.js\";\nimport FormSkills from \"../../a/FormSkills/index.js\";\n\nimport Loading from \"../../elements/Loading.js\";\nimport RecentWork from \"../../a/RecentWork/index.js\";\nimport RecentWorkArchive from \"../../a/RecentWorkArchive/index.js\";\nimport ProjectCalendar from \"../../a/ProjectCalendar/index.js\";\nimport ProjectCalendar2 from \"../../a/ProjectCalendar2/index.js\";\n// import Bio from '../../a/_Elements/Bio/Bio.jsx';\n// import Network from '../../a/_Elements/Network/Network.jsx';\nimport { Bio, Network } from \"../../a/_Elements\";\n// import Fn from '../../../utils/fn/Fn';\nimport { Fn, api, ui, app } from \"../../../utils/fn/Fn.js\";\nimport SectionTitle from \"../../a/_Elements/SectionTitle/SectionTitle.jsx\";\n\nimport AccountContext, {\n  AccountConsumer\n} from \"../../../utils/context/AccountContext\";\nimport \"./style.css\";\n// import { dilate } from \"popmotion/lib/calc\";\n// window.getGlobal = getGlobal;\n// window.useGlobal = useGlobal;\n// window.setGlobal = setGlobal;\n\nclass ViewProfile extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpen: false,\n      dialogType: \"\",\n      dialogTitle: \"\",\n      // chefs: [],\n      // activeChef: getGlobal().activeChef,\n      ready: false,\n      insertModalVisible: false,\n      chefInfoVisible: false,\n      loading: false,\n      // theme: Fn.get('theme').config.theme,\n      toMessages: false,\n      conversationReady: false,\n      activeTab: \"1\",\n      drawerReady: false,\n      // locationIsSet: getGlobal().locationIsSet,\n      progressBarPercent: 0,\n      progressBarActive: false,\n      showLocationForm: false,\n      showOnboardingScreen: false,\n      // location: getGlobal().location,\n      // activeCurrency: getGlobal().activeCurrency,\n      // account: Fn.get(\"account\"),\n      searchCity: \"\",\n      uploadType: \"profileImage\",\n      connections: [],\n      connectionsReady: false,\n      AddToNetworkButtonLoading: false,\n      AddToProjectButtonLoading: false,\n      recentWorkProjects: [],\n      subscribedProjectsReady: false,\n      user: null\n    };\n\n    // this.fetchChefs = this.fetchChefs.bind(this);\n    // this.fetchChefs2 = this.fetchChefs2.bind(this);\n    this.showDrawer = this.showDrawer.bind(this);\n    this.hideDrawer = this.hideDrawer.bind(this);\n    this.refresh = this.refresh.bind(this);\n    // this.updateActiveDoc = this.updateActiveDoc.bind(this);\n    this.setLocation = this.setLocation.bind(this);\n    this.start = this.start.bind(this);\n    this.focusLocationSearch = this.focusLocationSearch.bind(this);\n\n    // this.reserve = this.reserve.bind(this);\n    // this.sendMessage = this.sendMessage.bind(this);\n    // this.submitReservationRequest = this.submitReservationRequest.bind(this);\n    // this.setFilter = this.setFilter.bind(this)\n    this.toggleDialog = this.toggleDialog.bind(this);\n\n    this.addToNetwork = this.addToNetwork.bind(this);\n    this.addToProject = this.addToProject.bind(this);\n    this.cv = this.cv.bind(this);\n    this.networkSeeAll = this.networkSeeAll.bind(this);\n    this.editBio = this.editBio.bind(this);\n    this.submitBio = this.submitBio.bind(this);\n    this.submitProfile = this.submitProfile.bind(this);\n    this.editSkills = this.editSkills.bind(this);\n    this.updateSkills = this.updateSkills.bind(this);\n    this.editProfile = this.editProfile.bind(this);\n    this.closeDialog = this.closeDialog.bind(this);\n    this.avatar = this.avatar.bind(this);\n    this.fetchConnections = this.fetchConnections.bind(this);\n    // this.sendMessage = this.sendMessage.bind(this);\n    this.userLocation = this.userLocation.bind(this);\n    this.addRecentWorkProject = this.addRecentWorkProject.bind(this);\n    this.navigateToUser = this.navigateToUser.bind(this);\n\n    console.log(\"[[ ViewProfile.js props ]]\", props);\n  }\n\n  navigateToUser(config) {\n    const { id } = config;\n\n    this.setState({\n      ready: false,\n      userId: null,\n      user: null,\n      connections: [],\n      projects: [],\n      events: [],\n      subscribedProjectsReady: false\n    });\n\n    setTimeout(() => {\n      this.props.history.push(\"/null\");\n      this.props.history.push(\"/user/\" + id);\n    }, 300);\n  }\n  addRecentWorkProject() {\n    this.toggleDialog({ type: \"addPortfolioProject\", title: \"Add a Project\" });\n  }\n  userLocation() {\n    let user = this.state.user;\n    let location;\n    if (\n      user.profile.location &&\n      typeof user.profile.location.County !== \"undefined\"\n    ) {\n      location = user.profile.location.County;\n    } else if (\n      user.profile.location &&\n      typeof user.profile.location.address.county !== \"undefined\"\n    ) {\n      location = user.profile.location.address.county;\n    } else {\n      location = \"\";\n    }\n    return location;\n    // this.state.user.profile.location && this.state.user.profile.location.address.county || \"\"\n  }\n  // async sendMessage(item) {\n\n  //   console.log('[[ SendMessage ]]', item)\n\n  //   let selfUserId = this.context.account.user.id;\n\n  //   // let recipientId =\n  //   // const conversationExists = await Fn.checkConversationExists({ self: this,  })\n  //   // await Fn.\n  // }\n  async fetchConnections() {\n    let connections = this.state.user.profile.connections;\n    await Fn.fetchConnections({ self: this, connections });\n  }\n  async submitBio(data) {\n    // this.props.submitBio\n    console.log(data);\n    await Fn.submitBio({ self: this, data: data });\n  }\n  async updateSkills(skills) {\n    await Fn.updateSkills({ self: this, skills });\n  }\n  async submitProfile(data) {\n    // this.props.submitBio\n    console.log(data);\n    await Fn.submitProfile({ self: this, data: data });\n  }\n\n  toggleDialog(config) {\n    const { type, title } = config;\n\n    this.setState({\n      isOpen: !this.state.isOpen,\n      dialogType: type,\n      dialogTitle: title\n    });\n\n    // if(type === \"profileImage\"){\n    //   this.setState({\n    //     uploadType: 'profileImage'\n    //   })\n    // }\n  }\n  closeDialog() {\n    this.setState({\n      isOpen: false\n    });\n  }\n  editBio() {\n    this.toggleDialog({ type: \"bio\", title: \"Edit your bio\" });\n  }\n  editSkills() {\n    this.toggleDialog({ type: \"editSkills\", title: \"Edit your skills\" });\n  }\n  editProfile() {\n    this.toggleDialog({ type: \"profile\", title: \"Edit your profile\" });\n  }\n  networkSeeAll() {\n    this.toggleDialog({ type: \"bio\", title: \"Edit your bio\" });\n  }\n\n  async addToNetwork() {\n    // alert()\n    // this.toggleDialog({type: 'addToNetwork', title: 'Edit your bio'})\n    this.setState({\n      AddToNetworkButtonLoading: true\n    });\n\n    let item = this.state.user;\n\n    await Fn.addToNetwork({ self: this, item: item });\n  }\n\n  addToProject() {\n    // this.toggleDialog({type: 'addToProject', title: 'Edit your bio'})\n  }\n  cv() {\n    this.toggleDialog({ type: \"cv\", title: \"Upload your CV\" });\n  }\n  focusLocationSearch() {}\n  // reserve(doc) {\n  //   console.log(doc);\n  //   this.setState({ activeDoc: doc });\n  //   // setGlobal({ reserve: true, recipient: doc });\n  // }\n  // async sendMessage(data) {\n  //   console.log(\"doc\", data);\n\n  //   let selfUserId = this.context.account.user.id;\n\n  //   let recipientId = data.id;\n\n  //   // let participants = [selfUserId, recipientId];\n\n  //   const conversationExists = await Fn.checkConversationExists({\n  //     self: this,\n  //     selfUserId,\n  //     recipientId: data.id\n  //   });\n\n  //   if (!conversationExists.exists) {\n  //     // console.log('participants',participants)\n\n  //     await Fn.createNewConversation({ self: this, selfUserId, recipientId });\n  //     this.props.history.push(\"/messages\");\n  //   } else {\n  //     // Fn.getConversationData({})\n  //     Fn.store({\n  //       label: \"activeConversation\",\n  //       value: conversationExists.conversation\n  //     });\n  //     this.props.history.push(\"/messages\");\n  //   }\n\n  //   // return await Fn.sendMessage({ doc, self: this })\n  // }\n  // async fetchChefs2(city) {\n  //   this.setState({ ready: false, searchCity: city });\n  //   setTimeout(() => {\n  //     console.log(\"[[ fetchChefs2 city ]]\", city);\n  //     return Fn.fetchChefs2({ city, self: this });\n  //   }, 1000);\n  // }\n  // async fetchChefs(city) {\n  //   this.setState({ ready: false, searchCity: city });\n  //   return await Fn.fetchChefs({ city, self: this });\n  // }\n  async refresh() {\n    return await Fn.refresh({ self: this });\n  }\n  async showDrawer(chef) {\n    return await Fn.showDrawer({ chef, self: this });\n  }\n  async hideDrawer() {\n    return await Fn.hideDrawer({ self: this });\n  }\n  showModal = () => {\n    this.setState({\n      insertModalVisible: true\n    });\n  };\n  handleOk = e => {\n    console.log(e);\n    this.setState({\n      insertModalVisible: false\n    });\n  };\n  handleCancel = e => {\n    console.log(e);\n    this.setState({\n      insertModalVisible: false\n    });\n  };\n  async submitReservationRequest(data) {\n    return await Fn.submitReservationRequest({ data, self: this });\n  }\n  async setLocation() {\n    return await Fn.setLocation({ self: this });\n  }\n\n  async start() {\n    // find location by browser geolocation,\n    // then query Here maps api for location data using reverse geolocation.\n    // return await Fn.setLocation({ self: this });\n  }\n  avatar(data) {\n    console.log(\"avatar \", data);\n    const user = data;\n\n    if (user && user.profile && user.profile.picture.length > 0) {\n      return user.profile.picture;\n    } else {\n      return \"/img/placeholder.png\";\n    }\n  }\n  componentWillUnmount() {}\n  componentDidUpdate() {\n    console.log(\"[[ Home Updated ]]\", this.props);\n  }\n  async componentDidMount() {\n    console.log(\" \");\n    console.log(\" \");\n    console.log(\"[[ ViewProfile.js Mounted ]]\");\n    console.log(\" \");\n    console.log(\" \");\n\n    console.log(\"viewprofile props\", this.props);\n    let userId = this.props.match.params.id;\n\n    let projects = await app\n      .fetchSubscribedProjects({ self: this, userId })\n      .then(async projects => {\n        this.setState({\n          projects: projects,\n          subscribedProjectsReady: true\n        });\n      });\n\n\n    let user = await api.fetch(\"users\", userId).then(async user => {\n      this.setState({ user: user });\n      await Fn.fetchConnections({\n        self: this,\n        connections: user.profile.connections\n      });\n      // Fn\n      Fn.set(\"activeUser\", user);\n\n      console.log(\"user\", user);\n\n      this.setState({\n        user: user,\n        ready: true\n      });\n\n      document.querySelector(\"body\").scroll({\n        top: 0,\n        left: 0,\n        behavior: \"smooth\"\n      });\n    });\n    //\n\n    // if (user) {\n\n    // }\n  }\n\n  // if (localStorage.getItem(\"crewBuilder\") !== null) {\n  //   if (!Fn.get(\"crewBuilder\").hasBeenUploaded) {\n  //     let project = Fn.get(\"crewBuilder\");\n  //     await Fn.createProject({ self: this, project });\n  //   }\n  // }\n\n  // if(localStorage.getItem('accountType') !== null && JSON.parse(localStorage.getItem('accountType')) === \"production\") {\n  //   if(!Fn.get('crewBuilder').hasBeenUploaded) {\n  //     let project = Fn.get('crewBuilder');\n  //     await Fn.createProject({ self: this, project })\n  //   }\n  // }\n\n  render() {\n    return !this.state.ready ? (\n      <Loading />\n    ) : (\n      <TransitionLayout>\n        <section\n          id=\"ViewProfile\"\n          className={\" w-100 mw9 center pa4-ns pa0 pb6 h-100 overflow-auto\"}\n        >\n          <div\n            onClick={this.refresh}\n            className=\"absolute top-0 right-0 pa4 pointer black-30\"\n          >\n            <Icon\n              type=\"sync\"\n              className={\n                (this.state.ready ? \" inactive \" : \" active \") +\n                \" loading-icon \"\n              }\n            />\n          </div>\n\n          <section id=\"Profile\" className=\"flex flex-column w-100 pb5 pt5\">\n            <div className=\"flex flex-row-ns flex-column w-100 justify-center items-center\">\n              <div className=\"flex flex-column w-100=\">\n                <Tooltip placement=\"top\" title={\"Update your avatar\"}>\n                  <div className=\"round pa1 bg-white\">\n                    <div\n                      style={{\n                        width: \"150px\",\n                        height: \"150px\",\n                        backgroundImage:\n                          \"url(\" + this.avatar(this.state.user) + \")\"\n                      }}\n                      className=\"pointer round  cover bg-center\"\n                    ></div>\n                  </div>\n                </Tooltip>\n              </div>\n\n              <div className=\"flex flex-column justify-center w-100 ph4-ns ph0\">\n                <div className=\"f4 flex flex-row-ns flex-column items-center-ns items-center w-100 raleway\">\n                  <span className=\"f3 fw6 mv0-ns mv4\">\n                    {this.state.user.profile.name &&\n                      this.state.user.profile.name.first}{\" \"}\n                    {this.state.user.profile.name &&\n                      this.state.user.profile.name.last}\n                  </span>\n                  <span className=\"flex items-start f6 fw6 ml3-ns whi-te ph3 pv2 ba b--black-05 br1 bg-white black -ts-a\">\n                    {this.state.user.position}{\" \"}\n                  </span>\n                </div>\n\n                <div className=\"flex flex-row -nsflex-column w--100 black-60 raleway flex-wrap items-center justify-start-ns justify-between ph4 ph0-ns pt3 pb3 bt b--black-05 mt4 mt3-ns\">\n                  <div className=\"flex flex-column w--100 pb1-ns pb2 mr3\">\n                    <span className=\"flex-column flex f6 fw4 black-40 items-start\">\n                      <span\n                        className=\"flex \n mb3\"\n                      >\n                        Age\n                      </span>\n                      <span className=\"flex items-center justify-center f6 fw6 -ml3-ns black-50- white ph2 pv1 ba b--black-05 br1 -round bw1- bg-white-20- bg-black -ts-a tc ml2-\">\n                        {moment().diff(this.state.user.profile.dob, \"years\")}\n                      </span>\n                    </span>\n                  </div>\n                  <div className=\"flex flex-column w--100 pb1-ns pb2 mr3\">\n                    <span className=\"flex-column flex f6 fw4 black-40 items-start\">\n                      <span\n                        className=\"flex \n mb3\"\n                      >\n                        Gender\n                      </span>\n                      <span className=\"flex items-center justify-center f6 fw6 -ml3-ns black-50- white ph2 pv1 ba b--black-05 br1 -round bw1- bg-white-20- bg-black -ts-a tc ml2-\">\n                        {(this.state.user.profile.gender &&\n                          this.state.user.profile.gender) ||\n                          \"\"}\n                      </span>\n                    </span>\n                  </div>\n                  <div className=\"flex flex-column w--100 pb1-ns pb2 mr3\">\n                    <span className=\"flex-column flex f6 fw4 black-40 items-start\">\n                      <span\n                        className=\"flex \n mb3\"\n                      >\n                        Location\n                      </span>\n                      <span className=\"flex items-center justify-center f6 fw6 -ml3-ns black-50- white ph2 pv1 ba b--black-05 br1 -round bw1- bg-white-20- bg-black -ts-a tc ml2-\">\n                        {this.userLocation()}\n                      </span>\n                    </span>\n                  </div>\n                </div>\n\n                {/* <div className=\"flex flex-row -nsflex-column w--100 pt3 black-60 raleway flex-wrap items-center justify-start-ns justify-center\">\n                        <div className=\"flex flex-column w--100 pb1-ns pb2 mr3\">\n                          <span className=\"flex f6 fw4 black-40 items-center\">\n                            <span className=\"flex \">Age</span>\n\n                            <span className=\"fw6 ml2 pv1 ph2 ba b--black-05 br1\">\n                              {moment().diff(\n                                this.state.user.profile.dob,\n                                \"years\"\n                              )}\n                            </span>\n                          </span>\n                        </div>\n\n                        <div className=\"flex flex-column w--100 pb1-ns pb2 mr3\">\n                          <span className=\"flex f6 fw4 black-40 items-center\">\n                            <span className=\"flex \">Gender</span>\n                            <span className=\"fw6 ml2 pv1 ph2 ba b--black-05 br1\">\n                              {(this.state.user.profile.gender &&\n                                this.state.user.profile.gender) ||\n                                \"\"}\n                            </span>\n                          </span>\n                        </div>\n\n                        <div className=\"flex flex-column w--100 pb1-ns pb2 mr3\">\n                          <span className=\"flex f6 fw4 black-40 items-center\">\n                            <span className=\"flex\">Location</span>\n                            <span className=\"fw6 ml2 pv1 ph2 ba b--black-05 br1\">\n                              {this.userLocation()}\n                            </span>\n                          </span>\n                        </div>\n                      </div> */}\n              </div>\n            </div>\n          </section>\n\n          {ui.mobile() && (\n            <section id=\"ProfileButtons\">\n              <div className=\"flex flex-row mb2-ns w-100 bt b--black-05 ph4 pv4 bg-black-05\">\n                <a\n                  href={this.state.user.profile.cv.file}\n                  target=\"_blank\"\n                  title=\"View or upload CV\"\n                  id=\"CV-button\"\n                  className=\"db relative w-100 pa3 ph4 pv3 br1 bg-black- bg-green round\"\n                >\n                  <div id=\"\" className=\"db relative w-100\">\n                    <span className=\"f5 fw6 black-60- white ph3-\">\n                      Cirriculum Vitae{\" \"}\n                    </span>\n                  </div>\n                </a>\n              </div>\n              <div className=\"flex flex-row mb2-ns w-100 bt b--black-05 \">\n                <button\n                  title=\"View or upload CV\"\n                  id=\"CV-button\"\n                  className=\"db relative w-100 pa3 ph4 pv3 br1- bg-black-30- bg-green-\"\n                  style={{ background: \"#e8e8ec\" }}\n                >\n                  <div id=\"\" className=\"db relative w-100\">\n                    <span className=\"f6 fw6 black-50 -white ph3-\">\n                      Add to Network\n                    </span>\n                  </div>\n                </button>\n                <button\n                  title=\"View or upload CV\"\n                  id=\"CV-button\"\n                  className=\"db relative w-100 pa3 ph4 pv3 br1- bg-black-30- bg-gree-n bl b--white-20 bw1\"\n                  style={{ background: \"#e8e8ec\" }}\n                >\n                  <div id=\"\" className=\"db relative w-100\">\n                    <span className=\"f6 fw6 black-50 -white ph3-\">\n                      Send Message\n                    </span>\n                  </div>\n                </button>\n              </div>\n            </section>\n          )}\n\n          {!ui.mobile() && (\n            <section id=\"ProfileButtons\">\n              <div className=\"flex flex-row mb0-ns w-100 bt b--black-05 ph4 ph0-ns pv3\">\n                <a \n                target=\"_blank\"\n                href={this.state.user.profile.cv.file}\n                  title={\"View or upload CV\"}\n                  // onClick={this.cv}\n                  id=\"CV-button\"\n                  className=\"flex flex-column pa0 mr3 pointer bs-b bg-black-20\"\n                >\n                  <div\n                    id=\"\"\n                    className=\"flex flex-row ph0 pv0 items-center justify-center bg-white br1\"\n                  >\n                    <span className=\"f6 fw4 black-60 ph3\">\n                      Cirriculum Vitae\n                    </span>\n\n                    <div\n                      // style={{ backgroundColor: '#b3bf95' }}\n                      className=\"flex flex-column ph3 pv2 white bg-green\"\n                    >\n                      <Icon icon={\"document-open\"} iconSize={15} className=\"\" />\n                    </div>\n                  </div>\n                </a>\n\n                {/* <div\n                        onClick={this.addToNetwork}\n                        id=\"AddToNetwork-button\"\n                        className=\"flex flex-column pr3 pointer\">\n\n                        <div id=\"\" className=\"flex flex-row ph0 pv0 items-center justify-center bg-white br1\">\n\n                          <span className=\"f6 fw4 black-60 ph3\">Add To Network</span>\n\n                          <div\n                            style={{ backgroundColor: '#b3bf95' }}\n                            className=\"flex flex-column ph3 pv2 white\">\n                            \n                            {\n            \n                              this.state.AddToNetworkButtonLoading ? \n                              <Spinner size={15} /> : \n                              <Icon icon={'exchange'} iconSize={15} className=\"\"/>\n                            }\n                          </div>\n\n                        </div>\n\n                      </div> */}\n\n                {/* <div\n                        onClick={this.addToProject}\n                        id=\"AddToProject-button\"\n                        className=\"flex flex-column pr3 pointer\">\n\n                        <div id=\"\" className=\"flex flex-row ph0 pv0 items-center justify-center bg-white br1\">\n\n                          <span className=\"f6 fw4 black-60 ph3\">Add To Project</span>\n\n                          <div\n                            style={{ backgroundColor: '#b3bf95' }}\n                            className=\"flex flex-column ph3 pv2 white\">\n                           {\n                              this.state.AddToProjectButtonLoading ? \n                              <Spinner size={15} /> : \n                              <Icon icon={'new-link'} iconSize={15} className=\"\"/>\n                            }\n                          </div>\n\n                        </div>\n\n                      </div> */}\n              </div>\n            </section>\n          )}\n          {this.state.ready && (\n            <Bio\n              user={this.state.user}\n              editSkills={null}\n              editBio={null}\n              canEdit={false}\n            />\n          )}\n          {this.state.ready && this.state.connectionsReady && (\n            <>\n              <Network\n              history={this.context.history}\n              isCurrentUser={false}\n                canEdit={false}\n                user={this.state.user}\n                addToNetwork={this.addToNetwork}\n                connections={this.state.connections}\n                navigateToUser={this.navigateToUser}\n              />\n            </>\n          )}\n\n          <RecentWork\n            type={\"user\"}\n            user={this.state.user}\n            // projects={this.state.user.profile.projects}\n            // addRecentWorkProject={this.addRecentWorkProject}\n          />\n          <RecentWorkArchive\n            projects={this.state.user.profile.projects}\n            addRecentWorkProject={this.addRecentWorkProject}\n          />\n\n          {/* {\n                this.state.subscribedProjectsReady && \n                <ProjectCalendar\n                  projects={Fn.get('subscribedProjects')}\n                  ownEventss={Fn.get('account').user.profile.events}\n                />\n              } */}\n\n          {/* {this.state.subscribedProjectsReady && (\n            <ProjectCalendar2\n              projects={Fn.get(\"subscribedProjects\")}\n              ownEvents={Fn.get(\"account\").user.profile.events}\n            />\n          )} */}\n\n          {this.state.subscribedProjectsReady && (\n            <div className=\"flex flex-column flex-auto w-100\">\n              <SectionTitle\n                title={\"Calendar\"}\n                // functionButton={{\n                //   title: \"Add Archive Item\",\n                //   icon: \"ring\",\n                //   function: () => this.props.addRecentWorkProject()\n                // }}\n                // labels={[\n                //   {\n                //     text: \"projects\",\n                //     count: this.props.projects.length\n                //   },\n                // ]}\n              />\n              <ProjectCalendar\n                // current={1}\n                user={this.state.user}\n                headerType={'square-slim'}\n                // projects={this.state.projects}\n                // ownEvents={this.state.user.profile.events}\n              />\n            </div>\n          )}\n\n          <Dialog\n            className={\"bp3-light\"}\n            // icon=\"info-sign\"\n            onClose={this.toggleDialog}\n            title={this.state.dialogTitle}\n            onValueChange={this.onValueChange}\n            {...this.state}\n          >\n            <div className=\"flex flex-column pa4-\">\n              {this.state.dialogType === \"bio\" && (\n                <FormBio\n                  value={this.state.user.profile.bio}\n                  submitBio={this.submitBio}\n                />\n              )}\n              {this.state.dialogType === \"profile\" && (\n                <FormProfile\n                  value={this.state.user.profile}\n                  submitProfile={this.submitProfile}\n                />\n              )}\n              {this.state.dialogType === \"profileImage\" && (\n                <Filepond\n                  type={this.state.dialogType}\n                  closeDialog={this.closeDialog}\n                />\n              )}\n              {this.state.dialogType === \"addToNetwork\" && <FormBio />}\n              {this.state.dialogType === \"addToProject\" && <FormBio />}\n              {this.state.dialogType === \"editSkills\" && (\n                <FormSkills\n                  updateSkills={this.updateSkills}\n                  skills={this.state.user.profile.additional.skills}\n                />\n              )}\n              {this.state.dialogType === \"addPortfolioProject\" && (\n                <FormPortfolioProject\n                  closeDialog={this.closeDialog}\n                  updateAccount={this.context.updateAccount}\n                />\n              )}\n              {this.state.dialogType === \"cv\" && (\n                <>\n                  {this.state.user.profile.cv.uploaded === true && (\n                    <div className=\"flex flex-row mb3\">\n                      <a\n                        href={this.state.user.profile.cv.file}\n                        target=\"_blank\"\n                        className=\"flex flex-row ph3 pv3 tc br1 f5 fw6 white- black-50 bg-green items-center justify-center w-100\"\n                      >\n                        <Icon\n                          icon={\"document-open\"}\n                          iconSize={15}\n                          className=\"mr2 white- black-50\"\n                        ></Icon>\n                        View uploaded CV\n                      </a>\n                    </div>\n                  )}\n                  <Filepond\n                    type={this.state.dialogType}\n                    closeDialog={this.closeDialog}\n                  />\n                </>\n              )}\n            </div>\n          </Dialog>\n        </section>\n      </TransitionLayout>\n    );\n  }\n}\n\nexport default ViewProfile;\nViewProfile.contextType = AccountContext.Consumer;\n","import React, { useState, getGlobal, setGlobal } from \"reactn\";\n\nimport AccountContext from \"../../../utils/context/AccountContext.js\";\n\nconst WelcomeScreen = ({ selectType, type, typeSelected }) => {\n\n  return (\n    <AccountContext.Consumer>\n      {props => (\n        !props.isAuthenticated &&\n\n        <div\n          className=\"vh-100 pt5 bg-black h-100 flex flex-column flex-auto justify-start\"\n          style={{ backgroundRepeat: 'no-repeat', backgroundPosition: '0px 20vh', backgroundImage: 'url(\"/img/filmset.jpg\")' }}\n        >\n\n          <div className=\"raleway pt6 ph3 flex flex-column flex-auto justify-center -h-100\">\n\n            <h1 className=\"f2 fw4 white mv0 tc\">Crew management,</h1>\n\n            <h1 className=\"f2 fw4 white mv0 tc\">Made easier</h1>\n\n          </div>          \n\n          {\n            !typeSelected &&\n            <div className=\"flex flex-column items-center justify-start  h-100 raleway fw5 mw6 center w-100 pt5\">\n              <div className=\"flex flex-column ma0 w-100\" id=\"\">\n                <div className=\"Buttons flex flex-row justify-between round-\">\n                  <div className=\"flex flex-column w-100 br b--black-05\">\n                    <button\n                      onClick={() => selectType('project-finder')}\n                      className=\" items-center flex flex-column bg-gray ph4 pv2 pointer bn br2 mr1  \">\n                      <span className=\"ph2 f4 fw6 white -black-70 pt2 flex items-center justify-center\">\n                        CREW\n                  </span>\n                      <span className=\"ph2 f5 fw6 white-50 -black-70 pb2 pt1 flex items-center justify-center\">\n                        Project Finder\n                  </span>\n                    </button>\n                  </div>\n                  <div className=\"flex flex-column w-100\">\n                    <button\n                      onClick={() => selectType('crew-builder')}\n                      className=\" flex flex-column items-center bg-gray ph4 pv2 pointer bn br2 ml1   \">\n                      <span className=\"ph2 f4 fw6 white -black-70 pt2 flex items-center justify-center\">\n                        PRODUCTION\n                  </span>\n                      <span className=\"ph2 f5 fw6 white-50 -black-70 pb2 pt1 flex items-center justify-center\">\n                        Crew Builder\n                  </span>\n                    </button>\n                  </div>\n\n                </div>\n\n              </div>\n\n            </div>\n          }\n\n        </div>\n      )}\n\n    </AccountContext.Consumer>\n\n  )\n};\n\nexport default WelcomeScreen;\n","import React from 'react';\nimport OnboardingForm from './OnboardingSteps';\nimport './style.css';\nimport { Fn } from '../../../utils/fn/Fn.js';\n// import Filepond from '../../upload/Filepond.js';\n\nimport { DatePicker, Steps, Icon, Select, Button, message } from 'antd';\n// import { DateRangeInput } from \"@blueprintjs/datetime\";\nimport moment from 'moment';\nimport LocationSearchBar from '../../elements/display/forms/LocationSearchBar.js';\n\nimport AccountContext, { AccountConsumer } from '../../../utils/context/AccountContext.js';\nconst { MonthPicker, RangePicker } = DatePicker;\nconst dateFormat = 'YYYY/MM/DD';\n\n\n\n\n// import { DatePicker, TimePrecision } from \"@blueprintjs/datetime\";\n// const { Step } = Steps;\n// const { Option } = Select;\n\n// const steps = [\n//   {\n//     title: 'First',\n//     content: 'First-content',\n//   },\n//   {\n//     title: 'Second',\n//     content: 'Second-content',\n//   },\n//   {\n//     title: 'Last',\n//     content: 'Last-content',\n//   },\n// ];\nclass One extends React.Component {\n  constructor(props) {\n\n    super(props)\n\n    this.state = {\n      projectType: '',\n      startDate: '',\n      endDate: ''\n    }\n\n    // this.rate = React.createRef();\n    // this.projectName = React.createRef()\n    this.searchProjects = this.searchProjects.bind(this)\n    this.handleChange = this.handleChange.bind(this)\n    this.handleRangeChange = this.handleRangeChange.bind(this)\n    // this.handleDateChange = this.handleDateChange.bind(this)\n\n    console.log('OnboardingScreen props', props)\n    this.reset = this.reset.bind(this)\n\n  }\n  reset(){\n    window.localStorage.clear()\n    this.context.history.push('/')\n    window.location.reload()\n  }\n  handleRangeChange(e) {\n    console.log(e)\n    let startDate = e[0].toString()\n    let endDate = e[1].toString()\n    this.setState({\n      startDate, endDate\n    })\n  }\n  handleDateChange(e) {\n\n    console.log(e)\n\n    this.setState({ projectDate: e.toString() })\n\n  }\n\n  handleChange(e) {\n\n    console.log(e.target.value);\n\n    this.setState({\n      projectType: e.target.value\n    })\n\n  }\n\n  searchProjects() {\n\n    let location = Fn.get('location')\n    let projectType = this.state.projectType;\n    let startDate = this.state.startDate;\n    let endDate = this.state.endDate;\n\n    let data = { location, projectType, startDate, endDate };\n\n    this.props.searchProjects(data);\n\n  }\n\n  componentDidMount() {\n  }\n\n  render() {\n    // const { current } = this.state;\n    return (\n      <div id=\"StepsForm\">\n        <div className=\"flex flex-column ma0\" id=\"\">\n          <div className=\"form-row flex flex-column pb3 pt2\">\n            <div className=\"form-row flex flex-column\">\n\n              <div className=\"form-row flex flex-row items-center pt4 w-100\">\n\n                <label className=\"f5 fw6 black-20 pb3- tl mr4 w-30\">Project Location (city)</label>\n\n                <LocationSearchBar\n                  location={this.state.location}\n                  findLocation={this.findLocation}\n                  fetchProjects={this.fetchProjects2}\n                />\n\n              </div>\n\n              <div className=\"form-row flex flex-row items-center pt4 w-100\">\n\n                <label className=\"f5 fw6 black-20 pb3- tl mr4 w-30\">Project Type</label>\n\n                <select\n                  required={true}\n                  className=\"flex flex-column ph4 pv3 bn br2 -round bg-black-05- white- black-50 f4 fw5 bs-a- w-100 bg-white\"\n                  // defaultValue=\"commercial\"                \n                  onChange={(e) => this.handleChange(e)}>\n\n                  <option value=\"\">Select</option>\n                  <option value=\"commercial\">Commercial</option>\n                  <option value=\"film\">Film</option>\n                  <option value=\"documentary\">Documentary</option>\n\n                </select>\n\n              </div>\n\n              <div className=\"form-row flex flex-row items-center pt4 w-100\">\n\n                <label className=\"f5 fw6 black-20 pb3- tl mr4 w-30\">Availability Date Range</label>          \n\n                <RangePicker\n                  required={true}\n                  className=\"flex flex-column ph4 pv0 bn br2 -round bg-black-05- white- black-50 f4 fw5 bs-a- w-100 bg-white\"\n                  onChange={this.handleRangeChange}\n                  // defaultValue={[moment('2015/01/01', dateFormat), moment('2015/01/01', dateFormat)]}\n                  format={dateFormat}\n                />\n              </div>\n\n            </div>\n\n          </div>\n\n        </div>\n\n        <div className=\"Buttons flex flex-row justify-between mt4 center w-100 mb4\">\n\n          <div className=\"flex flex-column w-100\">\n\n            <button\n              onClick={this.searchProjects}\n              className={(\"br1- round bs-b bg-black-10 ph3 pv2 pointer bn relative  \")} >\n\n              <span className=\"f5 fw6 white- black-30  pv3 flex items-center justify-center\">\n\n                {this.state.buttonLoading ? <Icon type=\"loading\" className={' absolute right-0 f4 black-60 mr2'} /> : <Icon type=\"-swap-right\" className={(' f3 fw6 black-30 mr2- absolute right-0')} />} Search</span>\n            </button>\n\n            {/* {\n              this.props.current > 0 && <div className=\"flex flex-column w-100 \">\n                <span onClick={this.props.prev} className=\"f6 fw5 black-30 pv2 flex items-center justify-center\">\n                  go back to previous step\n                          </span>\n\n              </div>\n            } */}\n          </div>\n\n        </div>\n        <div className=\"flex flex-row w-100\">\n          <div \n          onClick={this.reset}\n          className=\"f5 fw6 black-50 pv2 mt2 mv4 ba b--black-05 ph3\">Reset</div>\n        </div>\n      </div>\n    )\n  }\n}\nexport default One;\nOne.contextType = AccountContext;","import React from 'react';\nimport OnboardingForm from './OnboardingSteps';\nimport './style.css';\n\nimport { Steps, Icon, Button, message } from 'antd';\nimport { DatePicker, TimePrecision } from \"@blueprintjs/datetime\";\nimport { Fn } from '../../../utils/fn/Fn';\nconst { Step } = Steps;\n\nconst steps = [\n  {\n    title: 'First',\n    content: 'First-content',\n  },\n  {\n    title: 'Second',\n    content: 'Second-content',\n  },\n  {\n    title: 'Last',\n    content: 'Last-content',\n  },\n];\nclass OnboardingProfileChef extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      current: 0,\n      dob: ''\n    };\n\n    console.log('OnboardingScreen props', props)\n    this.mobileNumber = React.createRef()\n    this.bio = React.createRef()\n    this.grade = React.createRef()\n    this.firstname = React.createRef()\n    this.lastname = React.createRef()\n    this.gender = React.createRef()\n\n    \n    this.saveStep2 = this.saveStep2.bind(this)\n    this.handleDateChange = this.handleDateChange.bind(this)\n    console.log('OnboardingScreen props', props)\n\n  }\n    handleDateChange(e) {\n    console.log(e)\n    this.setState({dob: e.toString()})\n  }\n  saveStep2() {\n\n    let mobileNumber = this.mobileNumber.current.value;\n    let bio = this.bio.current.value;\n    let grade = this.grade.current.value;\n    let firstname = this.firstname.current.value;\n    let lastname = this.lastname.current.value;\n    let gender = this.gender.current.value;\n    let dob = this.state.dob;\n\n    let data = { mobileNumber, bio, grade, gender, firstname, lastname, dob };\n    this.props.saveStep2(data);\n    this.props.next()\n\n  }\n  componentDidMount() {\n  }\n  render() {\n    // const { current } = this.state;\n    return (\n      <div id=\"StepsForm\">\n        <div className=\"flex flex-column ma0\" id=\"\">\n          <div className=\"form-row flex flex-column pb3 pt2\">\n          <div className=\"form-row flex flex-column\">\n              <div className=\"form-row flex flex-column pt4\">\n                <label className=\"f7 fw6 black-90 pb2\">First Name</label>\n                <input \n                required={true}\n                ref={this.firstname}\n                type={'text'} className=\"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a\" />\n              </div>\n              <div className=\"form-row flex flex-column pt4\">\n                <label className=\"f7 fw6 black-90 pb2\">Last Name</label>\n                <input mobileNumber\n                required={true}\n                ref={this.lastname}\n                type={'text'} className=\"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a\" />\n              </div>\n\n            </div>\n            \n            <div className=\"form-row flex flex-column\">\n              <div className=\"form-row flex flex-column pt4\">\n                <label className=\"f7 fw6 black-90 pb2\">Mobile Phone</label>\n                <input \n                required={true}\n                ref={this.mobileNumber}\n                type={'number'} className=\"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a\" />\n              </div>\n\n            </div>\n            <div className=\"form-row flex flex-column\">\n              <div className=\"form-row flex flex-column pt4\">\n                <label className=\"f7 fw6 black-90 pb2\">Gender</label>\n                <input \n                required={true}\n                ref={this.gender}\n                type={'text'} className=\"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a\" />\n              </div>\n\n            </div>\n            <div className=\"form-row flex flex-column\">\n              <div className=\"form-row flex flex-column pt4\">\n                <label className=\"f7 fw6 black-90 pb2\">Enter your grade</label>\n                <input \n                required={true}\n                ref={this.grade}\n                type={'number'} className=\"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a\" />\n              </div>\n\n            </div>\n            <div className=\"form-row flex flex-column\">\n              <div className=\"form-row flex flex-column pt4\">\n                <label className=\"f7 fw6 black-90 pb2\">Bio</label>\n                <textarea\n                required={true}\n                ref={this.bio}\n                rows={4} \n                type={'text'}\n                className=\"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a\" />\n              </div>\n            </div>\n\n            {/* <div className=\" flex flex-column w-100 mb3\">\n\n                <span className=\"flex flex-column f6 fw5 black-60 pb3 pt3\">Your Date of Birth</span>\n\n                <DatePicker\n                  minDate={new Date('01/01/1940')}\n                  // defaultValue={typeof this.props.value.dob !== \"undefined\" && this.props.value.dob.length > 0 ? new Date(this.props.value.dob) : null} className={''} \n                  onChange={this.handleDateChange} \n                  />\n\n            </div> */}\n\n          </div>\n          \n        </div>\n        <div className=\"Buttons flex flex-row justify-between mt4 mw5 center w-100\">\n\n          <div className=\"flex flex-column w-100\">\n          <button\n              onClick={this.saveStep2}\n              className={(\" br1 bs-b bg-white ph3 pv1 pointer bn relative  \")} >\n              <span className=\"f5 fw5 black-30 pv2 flex items-center justify-center\">\n                {this.state.buttonLoading ? <Icon type=\"loading\" className={' absolute right-0 f4 black-60 mr2'} /> : <Icon type=\"swap-right\" className={Fn.get('theme').config.theme.colorScheme.color + (' f4 black-60 mr2 absolute right-0')} />} Next</span>\n            </button>\n\n            {\n              this.props.current > 0 && <div className=\"flex flex-column w-100 \">\n                <span onClick={this.props.prev} className=\"f6 fw5 black-30 pv2 flex items-center justify-center\">\n                  go back to previous step\n                          </span>\n\n              </div>\n            }\n          </div>\n\n        </div>\n      </div>\n    )\n  }\n}\nexport default OnboardingProfileChef;","import React from 'react';\nimport OnboardingForm from './OnboardingSteps';\nimport './style.css';\n\nimport { Steps, Icon, Button, message } from 'antd';\nimport { Checkbox } from 'antd';\nimport { Fn } from '../../../utils/fn/Fn.js';\nconst { Step } = Steps;\n\nconst steps = [\n  {\n    title: 'First',\n    content: 'First-content',\n  },\n  {\n    title: 'Second',\n    content: 'Second-content',\n  },\n  {\n    title: 'Last',\n    content: 'Last-content',\n  },\n];\nconst positions = [\n  {\n    title: \"Select\"\n  },\n  {\n    title: \"Unit Production Manager\"\n  },\n  {\n    title: \"Line Producer\"\n  },\n  {\n    title: \"Production Manager\"\n  },\n  {\n    title: \"Director\"\n  },\n  {\n    title: \"Assistant Director\"\n  },\n  {\n    title: \"2nd Assistant Director\"\n  },\n  {\n    title: \"Continuity Person\"\n  },\n  {\n    title: \"Cinematographer\"\n  },\n  {\n    title: \"Gaffer\"\n  },\n  {\n    title: \"Camera Operator\"\n  },\n  {\n    title: \"Assistant Cameraman\"\n  },\n  {\n    title: \"Film Loader\"\n  },\n  {\n    title: \"Steadycam Operator\"\n  },\n  {\n    title: \"Production Sound Mixer\"\n  },\n  {\n    title: \"Boom Operator\"\n  },\n  {\n    title: \"Key Grip\"\n  },\n  {\n    title: \"Dolly Grip\"\n  },\n  {\n    title: \"Best Boy\"\n  },\n  {\n    title: \"Visual Effects Director\"\n  },\n  {\n    title: \"FX Coordinator\"\n  },\n  {\n    title: \"Property Master\"\n  },\n  {\n    title: \"Leadman\"\n  },\n  {\n    title: \"Set Dresser\"\n  },\n  {\n    title: \"Costumer\"\n  },\n  {\n    title: \"Make-up Artist\"\n  },\n  {\n    title: \"Body Make-up Artist\"\n  },\n  {\n    title: \"Hairdresser\"\n  },\n  {\n    title: \"Production Assistant\"\n  },\n  {\n    title: \"Production Office Coordinator\"\n  },\n  {\n    title: \"Unit Publicist\"\n  },\n  {\n    title: \"Second Unit Director\"\n  },\n  {\n    title: \"Production Caterer\"\n  },\n  {\n    title: \"Craft Services\"\n  },\n  {\n    title: \"Transportation Coordinator\"\n  },\n  {\n    title: \"Day Player\"\n  }\n]\nconst plainOptions = ['Mexican', 'American', 'Italian', 'South African', 'Greek', 'Portuguese', 'Chinese', 'Turkish', 'Thai'];\nclass OnboardingProfileChef_Extended extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      current: 0,\n      cuisines: [],\n      cuisines_: [{}],\n      role: \"\",\n      skills: [],\n      skills_: [{}],\n      value: ''\n    };\n\n    console.log('OnboardingScreen props', props)\n    // this.insertCuisine = this.insertCuisine.bind(this)\n    // this.onChange = this.onChange.bind(this)\n    this.insertSkill = this.insertSkill.bind(this)\n    this.addSkillInput = this.addSkillInput.bind(this)\n    // this.rate = React.createRef();\n    this.saveStep3 = this.saveStep3.bind(this)\n    this.specOnChange = this.specOnChange.bind(this)\n    console.log('OnboardingScreen props', props)\n\n    this.role = React.createRef()\n\n  }\n  saveStep3() {\n    // let cuisines = this.state.cuisines;\n    // let role = this.role.current.value;\n    let skills = this.state.skills;\n    let data = { positions: skills };\n    console.log('saveStep3 data ',data)\n    this.props.saveStep3(data);\n    this.props.next()\n  }\n  // onChange(checkedValues) {\n  //   console.log('checked = ', checkedValues);\n  //   this.setState({cuisines: checkedValues})\n  // }\n  // role()/\n  // insertCuisine(cuisine) {\n  //   let cuisines = this.state.cuisines;\n  //   cuisines.push(cuisine)\n  // }\n  insertSkill(item) {\n    let skills = this.state.skills;\n    skills.push(item)\n    this.setState({ skills: skills })\n  }\n  addSkillInput() {\n    let skills_ = this.state.skills_;\n    skills_.push({});\n    this.setState({ skills_: skills_ })\n  }\n  specOnChange(data) {\n    const {e, index} = data;\n    let skills = this.state.skills;\n    skills[index] = e.target.value;\n    this.setState({\n      skills\n    })\n    console.log(this.state);\n\n    // let \n  }\n\n  // onChange = e => {\n  //   console.log('radio checked', e.target.value);\n  //   this.setState({\n  //     value: e.target.value,\n  //   });\n  // };\n  componentDidMount() {\n  }\n  render() {\n    // const { current } = this.state;\n    return (\n      <div id=\"StepsForm\">\n        <div className=\"flex flex-column ma0\" id=\"\">\n          <div className=\"form-row flex flex-column pb3 pt2\">\n            {/* <div className=\"form-row flex flex-column\">\n              <div className=\"form-row flex flex-column pt4\">\n                <label className=\"f7 fw6 black-90 pb2\">Your Crew Role</label>\n                <input \n                required={true}\n                ref={this.role}\n                type={'text'} className=\"flex flex-column ph3 pv3 bn br1 bg-white black-50 f4 fw5 bs-a\" />\n                <Checkbox.Group required={true} options={plainOptions} onChange={this.onChange} />\n              </div>\n\n            </div> */}\n            <div className=\"form-row flex flex-column\">\n              <div className=\"form-row flex flex-column pt4\">\n                <label className=\"f7 fw6 black-90 pb2\">Crew Needed</label>\n                <div className=\"flex flex-column flex-wrap\">\n                {\n                  this.state.skills_.map((item, index) => (\n                    <div className=\"flex pb2 w-100\">\n                      <select\n                      // required={true}\n                        onChange={(e) => this.specOnChange({ e, index})}\n                        // defaultValue={this.state.skills[index]}\n                        // type={'text'} \n                        className=\"w-100 flex flex-row ph3 pv2 bn br1 bg-white black-50 f4 fw5 bs-a\" \n                      >\n                        {\n                          positions.map((item, index) => (\n                              <option value={item.title}>{item.title}</option>\n                          ))\n                        }\n                        </select>\n                    </div>\n                  ))\n                }\n                </div>\n              </div>\n              <div className=\"form-row flex flex-row pt2\">\n                <button onClick={this.addSkillInput} \n                className=\"bn br1 bg-black-30 f7 fw5 white pv1 ph2\">Add +</button>\n              </div>\n            </div>\n\n          </div>\n\n        </div>\n\n      <div className=\"Buttons flex flex-row justify-between mt4 mw5 center w-100\">\n\n        <div className=\"flex flex-column w-100\">\n        <button\n              onClick={this.saveStep3}\n              className={(\" br1 bs-b bg-white ph3 pv1 pointer bn relative  \")} >\n              <span className=\"f5 fw5 black-30 pv2 flex items-center justify-center\">\n                {this.state.buttonLoading ? <Icon type=\"loading\" className={' absolute right-0 f4 black-60 mr2'} /> : <Icon type=\"swap-right\" className={Fn.get('theme').config.theme.colorScheme.color + (' f4 black-60 mr2 absolute right-0')} />} Next</span>\n            </button>\n\n          {\n            this.props.current > 0 && <div className=\"flex flex-column w-100 \">\n              <span onClick={this.props.prev} className=\"f6 fw5 black-30 pv2 flex items-center justify-center\">\n                go back to previous step\n                          </span>\n\n            </div>\n          }\n        </div>\n\n      </div>\n      </div>\n    )\n  }\n}\nexport default OnboardingProfileChef_Extended;","import React from 'react';\nimport OnboardingForm from './OnboardingSteps';\nimport './style.css';\n\n// import OnboardingAccountType from './__AccountType';\n// import OnboardingProfileUser from './__ProfileUser';\nimport Two from './Two';\nimport One from './One';\nimport Three from './Three';\nimport { Steps, Button, message } from 'antd';\n// import { useReducer } from \"react\";\n\nconst { Step } = Steps;\n\n\n\nclass OnboardingSteps extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      // current: 0,\n      // location: getGlobal().location,\n      // currency: getGlobal().baseCurrency,\n      // grade: 0,\n      // mobileNumber: '',\n      // bio: '',\n      // specialties: [],\n      // cuisines: [],\n      // firstname: '',\n      // lastname: '',\n      // positions: []\n    }\n\n    console.log('OnboardingScreen props', props)\n\n    // this.prev = this.prev.bind(this)\n    // this.next = this.next.bind(this)\n    // this.saveStep1 = this.saveStep1.bind(this)\n    // this.saveStep2 = this.saveStep2.bind(this)\n    // this.saveStep3 = this.saveStep3.bind(this)\n\n  }\n  // saveStep1(data) {\n  //   const { location, projectType, projectDate, projectName } = data;\n  //   this.setState({ location, projectType, projectDate, projectName })  \n  // }\n  // saveStep2(data) {\n  //   const { mobileNumber, bio, grade, firstname, lastname, dob, gender } = data;\n  //   this.setState({ mobileNumber, bio, grade, firstname, lastname, gender, dob }) \n    \n  //   return this.props.saveOnboardingData({\n  //     location: this.state.location,      \n  //     mobileNumber: this.state.mobileNumber,\n  //     bio: this.state.bio,\n  //     positions: this.state.positions,\n  //     // role: role,\n  //     grade: this.state.grade,\n  //     firstname: this.state.firstname,\n  //     lastname: this.state.lastname,\n  //     gender: this.state.gender,\n  //     dob: this.state.dob\n  //   })  \n\n  // }\n  // saveStep3(data) {\n  //   const { positions } = data;\n  //   // console.log(data)\n  //   this.setState({ positions: positions })\n\n  //   return this.props.saveOnboardingData({\n  //     location: this.state.location,      \n  //     projectName: this.state.projectName,\n  //     projectDate: this.state.projectDate,\n  //     projectType: this.state.projectType,\n  //     positions: positions\n  //   })\n  // }\n  next() {\n    const current = this.state.current + 1;\n    this.setState({ current });\n  }\n\n  prev() {\n    const current = this.state.current - 1;\n    this.setState({ current });\n  }\n  componentDidMount() {\n    console.log('steps', this.props)\n  }\n  render() {\n  \n    // const { current } = this.state;\n\n    return (\n\n      <div>\n     \n        {         \n            <>\n              \n              <div className=\"steps-content pb4\">\n\n                    <One\n                      searchProjects={this.props.searchProjects}\n                    />  \n\n              </div>\n\n            </>          \n        }       \n\n      </div>\n\n    )\n  }\n}\nexport default OnboardingSteps;","import React from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport OnboardingSteps from \"./OnboardingSteps\";\n\nimport { Dialog, Icon } from \"@blueprintjs/core\";\nimport \"@blueprintjs/core/lib/css/blueprint.css\";\nimport \"./style.css\";\n\nimport Fn from \"../../../utils/fn/Fn.js\";\nimport methods from \"../../../utils/methods/index.js\";\nimport moment from \"moment\";\nimport AccountContext, {\n    AccountProvider\n} from \"../../../utils/context/AccountContext.js\";\nimport { timeline } from \"popmotion\";\nimport { TH_LIST } from \"@blueprintjs/icons/lib/esm/generated/iconNames\";\n\nimport ListProjects from \"../../elements/display/projects/list/index.js\";\n\nclass ProjectFinder extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ready: true,\n            newAccountType: \"\",\n            accountTypeIsSet: false,\n            lat: \"\",\n            long: \"\",\n            city: \"\",\n            location: {},\n            country: \"\",\n            countrySet: false,\n            redirectProfile: false,\n            crew: [],\n            users: [],\n            isOpen: false,\n            activeUser: {},\n            dialogTitle: \"\",\n            drawerVisible: false\n        };\n        this.setAccountType = this.setAccountType.bind(this);\n\n        this.saveOnboardingData = this.saveOnboardingData.bind(this);\n        this.openDialog = this.openDialog.bind(this);\n        this.closeDialog = this.closeDialog.bind(this);\n        this.avatar = this.avatar.bind(this);\n        this.reset = this.reset.bind(this);\n        console.log(\"OnboardingScreen props\", props);\n    }\n\n    openDialog(item) {\n        console.log(item);\n        let user = item.item;\n        this.setState({\n            isOpen: true,\n            activeUser: user,\n            dialogTitle: user.profile.name.first + \" \" + user.profile.name.last\n        });\n    }\n\n    closeDialog() {\n        this.setState({\n            isOpen: false\n        });\n    }\n    reset() {\n        window.localStorage.clear();\n        this.context.history.push(\"/\");\n        window.location.reload();\n    }\n    avatar(user) {\n        // console.log('avatar ', user)\n        // const user = data.user\n\n        if (user && user.profile && user.profile.picture.length > 0) {\n            return user.profile.picture;\n        } else {\n            return \"/img/placeholder.png\";\n        }\n    }\n\n    async saveOnboardingData(data) {\n        // console.log(\"saveOnboardingData data\", data);\n\n        // const { location, projectName, projectDate, projectType, positions } = data;\n\n        // localStorage.setItem(\"crewBuilder\", JSON.stringify(data));\n\n        // let a = await Fn.fetchUsers({ self: this, positions });\n\n        // let account = Fn.get('account')\n\n        // let userId = account.user.id;\n\n        // let profile = account.user.profile;\n\n        // profile.config = {\n        //     type: this.state.newAccountType,\n        //     onboardingcomplete: true\n        // }\n        // profile.contact = {\n        //     mobile: mobileNumber\n        // }\n\n        // profile.bio = bio\n\n        // profile.additional = {\n        //     skills: skills,\n        //     role: role,\n        //     grade: grade\n        // }\n        // profile.name = {\n        //     first: firstname,\n        //     last: lastname\n        // }\n        // profile.location = location;\n        // profile.gender = gender;\n        // profile.dob = dob;\n\n        // let user = account.user\n\n        // console.log('saveOnboardingData profile', user)\n        // let apiUrl = 'https://api.crew20.devcolab.site/v1/users/' + userId\n\n        // console.log('[[ Endpoint ]]', apiUrl)\n        // let config = {\n        //     method: \"PATCH\",\n        //     headers: {\n        //         \"origin\": \"localhost:3000\",\n        //         \"Content-Type\": \"application/json\"\n        //     },\n        //     body: JSON.stringify(user)\n        // }\n        // return fetch(apiUrl, config).then(res => {\n\n        //     return res.json()\n        // }).then(async res => {\n        //     console.log('insertUser', res)\n        //     // if (err) { console.error(err) }\n\n        //     console.log(' ')\n        //     console.log('[[ User Updated ]]', JSON.stringify(res))\n        //     console.log(' ')\n        //     let account = Fn.get('account')\n        //     account.user = res\n        //     await methods.store({ type: 'account', data: account })\n\n        //     console.log(' [[ onboarding context ]]',this.context)\n        //     this.context.history.push('/profile')\n        //     this.context.updateAccount()\n\n        //     // this.setState({ redirectProfile: true })\n\n        //     // window.location.href = \"/profile\"\n\n        // })\n    }\n\n    setAccountType(data) {\n        const { type } = data;\n\n        console.log(\"setAccountType\", data);\n\n        this.setState({\n            newAccountType: type,\n            accountTypeIsSet: true\n        });\n    }\n\n    async componentDidMount() {\n        console.log(\"[[ OnboardingScreen props ]]\", this.props);\n\n        // alert('ProjectFinder')\n        await Fn.getGeoLocation({ self: this });\n    }\n\n    render() {\n        // if(this.state.redirectProfile) {\n        //     return <Redirect to={'/profile'} />\n        // }\n        return (\n            <div className=\"flex flex-column ma0 w-100 h-100\" id=\"\">\n                <div className=\"ProjectFinder flex flex-row justify-between \"></div>\n\n                <div\n                    id=\"OnboardingScreen\"\n                    className=\"flex flex-column pa4 bg-near-white h-100 w-100\"\n                >\n                    <div className=\"flex flex-column items-center justify-start pt4 w-100 h-100\">\n                        <div className=\"flex flex-column w-100\" id=\"\">\n                            <div className=\"form-row flex flex-column pb3 w-100\">\n                                <div className=\"flex flex-column mw7 center w-100\">\n                                    <div\n                                        id=\"SectionTitle\"\n                                        className=\"flex flex-column ma0 w-100\"\n                                        id=\"\"\n                                    >\n                                        <div className=\"flex flex-column justify-center items-center pb3\">\n                                            <h1 className=\"  f3 fw6 black-80 mt4 mb2 tc\">\n                                                Find A Project\n                      </h1>\n                                            <h1 className=\" f5 fw4 black-50 tc raleway\">\n                                                Complete the wizard below to find a project to crew for.\n                      </h1>\n                                        </div>\n\n\n                                    </div>\n\n                                    {!this.props.projectsReady && !this.props.searchLoading && (\n                                        <OnboardingSteps\n                                            searchProjects={this.props.searchProjects}\n                                        // newAccountType={this.state.newAccountType}\n                                        // accountTypeIsSet={this.state.accountTypeIsSet}\n                                        // setAccountType={this.setAccountType}\n                                        // saveOnboardingData={this.saveOnboardingData}\n                                        />\n                                    )}\n\n                                    {/* {\n\n                                        this.state.crew.length > 0 &&\n                                        <div className=\"crew-list-save flex flex-column mt2\">\n                                            <div className=\"flex flex-row justify-center w-100\">\n                                                <button className=\"pointer pv3 flex-auto flex flex-row justify-center pa0 ma0 bg-white bs-a\">\n                                                    <span className=\"flex items-center f5 fw6 black-40 \">Save & Create Account <Icon icon={'follower'} iconSize={15} className=\"ml2 black-40\" /> </span>\n                                                </button>\n                                            </div>\n                                        </div>\n                                    } */}\n                                </div>\n                                {\n                                    this.props.searchLoading &&\n                                    <div className=\"w-100 flex items-center justify-center pv4 pr4\">\n                                        <div className=\"sp sp-3balls\"></div>\n                                    </div>\n\n                                }\n                                <div className=\"flex flex-column mw9 center w-100\">\n                                    {this.props.projectsReady && !this.props.searchLoading  && this.props.projects.length > 0 && (\n                                        <div className=\"crew-list- flex flex-column mt3\">\n                                            <div className=\"flex flex-column ma0 w-100\" id=\"\">\n                                                <div className=\"ListProjects flex flex-row justify-between \">\n                                                    <ListProjects projects={this.props.projects} />\n                                                </div>\n                                            </div>\n                                        </div>\n                                    )}\n                                </div>\n\n                                <div className=\"flex flex-row w-100 items-center justify-start\">\n                                    <div\n                                        onClick={this.reset}\n                                        className=\"f5 fw6 black-50- white bg-black-10 pv2 mt2 mv4 bn b--black-05 ph3\"\n                                    >\n                                        Reset\n                  </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\nexport default ProjectFinder;\nProjectFinder.contextType = AccountContext;\n","\nimport React from \"react\";\n// import React, { getGlobal, setGlobal, useGlobal } from \"reactn\";\n\nimport WelcomeScreen from '../../elements/layout/WelcomeScreen.js';\nimport { Icon, Spinner, Dialog, NumericInput } from '@blueprintjs/core';\nimport { Drawer } from 'antd';\nimport moment from 'moment';\nimport AccountContext, { AccountConsumer } from '../../../utils/context/AccountContext.js';\n\n// import FormLogin from '../../a/FormLogin/index.js';\n// import ListProjects from '../../elements/display/projects/list/index.js';\nimport CrewFinder from '../../a/CrewFinder/index.js';\nimport ProjectFinder from '../../a/ProjectFinder/index.js';\nimport './style.css';\nimport Fn from \"../../../utils/fn/Fn.js\";\n\n// window.getGlobal = getGlobal;\n// window.useGlobal = useGlobal;\n// window.setGlobal = setGlobal;\n\n\nclass Welcome extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n    this.state = {\n      isOpen: false,\n      dialogType: 'login',\n      type: '',\n      typeSelected: false,\n      projects: [],\n      filteredProjects: [],\n      projectsReady: false,\n      drawerVisible: false,\n      favourites: [],\n      crew: [],\n      crew_: [],\n      drawerType: 'crew',\n      drawerTitle: 'Your Crew List',\n      isOpen: false,\n      activeUser: {},\n      dialogTitle: '',\n      addToCrewButtonLoading: false,\n      addToFavButtonLoading: false,\n      saveAndCreateAccountButtonLoading: false,\n      searchLoading: false\n\n    }\n    console.log('Welcome', props)\n\n    this.selectType = this.selectType.bind(this)\n    this.fetchProjects = this.fetchProjects.bind(this)\n    this.toggleDrawer = this.toggleDrawer.bind(this)\n    this.openDrawer = this.openDrawer.bind(this)\n    this.addToCrew = this.addToCrew.bind(this)\n    this.addToFavourites = this.addToFavourites.bind(this)\n\n    this.openDialog = this.openDialog.bind(this)\n    this.closeDialog = this.closeDialog.bind(this)\n    this.avatar = this.avatar.bind(this)\n    this.searchProjects = this.searchProjects.bind(this)\n    this.saveAndCreateAccount = this.saveAndCreateAccount.bind(this)\n\n    console.log('OnboardingScreen props', props)\n\n  }\n  saveAndCreateAccount() {\n    \n    this.setState({\n      saveAndCreateAccountButtonLoading: true\n    })\n    \n    let fav = this.state.favourites;\n    let crew = this.state.crew;\n    let crew_ = this.state.crew_;\n    let project = JSON.parse(localStorage.getItem('crewBuilder')) \n    project.invited = crew_;\n    project.shortlist = fav;\n\n    localStorage.setItem('crewBuilder', JSON.stringify(project) )\n\n    // let accountType = 'production';\n\n    let onboardingProfile = { fav, crew, project }\n\n    localStorage.setItem('onboardingProfile', JSON.stringify(onboardingProfile))\n\n    this.context.register()\n\n    setTimeout(() => {\n      this.setState({\n        saveAndCreateAccountButtonLoading: false\n      })\n    },1000)\n\n  }\n  searchProjects(data) {\n\n    console.log(data)\n\n    this.setState({\n      searchLoading: true\n    })\n\n    console.log(this.state.projects)\n\n    let location; \n\n    if( typeof data.location.County !== \"undefined\") {\n      location = data.location.County.toUpperCase()\n    }\n    else {\n      location = data.location.address.county.toUpperCase()\n    }\n\n    let type = data.projectType;\n    let projects = this.state.projects;\n    \n    console.log('location',location)\n\n    let filtered = projects.filter( p => p.location.toUpperCase() === location && p.type === type )\n    let filteredDateRange = filtered.filter( p => moment(p.start_date).isBetween(data.startDate,data.endDate))\n    \n    console.log('filtered',filtered)\n\n    setTimeout(() => {\n\n      this.setState({\n        filteredProjects: filteredDateRange,\n        projectsReady: true,\n        searchLoading: false\n      })\n    },1000)\n\n    \n\n  }\n\n  avatar(user) {\n    // console.log('avatar ', user)\n    // const user = data.user\n\n    if (user && user.profile && user.profile.picture.length > 0) {\n      return user.profile.picture\n    }\n    else {\n      return '/img/placeholder.png';\n    }\n  }\n\n  openDialog(item) {\n    console.log(item)\n    let user = item.item;\n    this.setState({\n      isOpen: true,\n      activeUser: user,\n      dialogTitle: user.profile.name.first + \" \" + user.profile.name.last\n    })\n  }\n\n  closeDialog() {\n    this.setState({\n      isOpen: false\n    })\n  }\n\n  toggleDrawer({ type }) {\n\n    this.setState({\n      drawerVisible: !this.state.drawerVisible,\n      drawerType: type,\n      drawerTitle: type === \"crew\" ? \"Your crew list\" : \"Your favourites list\"\n    })\n  }\n\n  openDrawer({ type }) {\n    this.toggleDrawer({ type })\n  }\n\n  addToCrew(item) {\n    this.setState({\n      addToCrewButtonLoading: true\n    })\n    console.log(item)\n    let crew = new Set(this.state.crew);\n    let crew_ = new Set(this.state.crew_);\n\n    crew.add(item)\n    crew_.add({ id: item.id, position: item.position })\n    let c = Array.from(crew)\n    let c_ = Array.from(crew_)\n    console.log('Crew', c)\n    console.log('Crew_', c_)\n\n    // crew.push(item)\n    this.setState({\n      crew: c,\n      crew_: c_\n    })\n    \n    setTimeout(() => {\n\n      this.setState({\n        addToCrewButtonLoading: false,\n        isOpen: false\n      })\n\n    },1000)\n    \n  }\n  \n  addToFavourites(item) {\n    this.setState({\n      addToFavButtonLoading: true\n    })\n    console.log(item)\n    let favourites = new Set(this.state.favourite);\n    favourites.add({ id: item.id, position: item.position })\n    let s = Array.from(favourites)\n    // crew.push(item)\n    console.log('ShortList', s)\n\n    this.setState({\n      favourites: s\n    })\n    setTimeout(() => {\n      this.setState({\n        addToFavButtonLoading: false\n      })\n\n    },1000)\n  }\n\n  async fetchProjects() {\n    await Fn.fetchProjects({ self: this })\n  }\n\n  toggleDialog() {\n\n  }\n\n  selectType(type) {\n    // alert(type)\n    this.setState({\n      type: type,\n      typeSelected: true\n    })\n\n    if (type === \"project-finder\") {\n      this.fetchProjects()\n      Fn.store({ label: 'accountType', value: 'crew'})\n      Fn.store({ label: 'accountTypeIsSet', value: true})\n    }\n    if (type === \"crew-builder\") {\n      // this.fetchProjects()\n      Fn.store({ label: 'accountType', value: 'production'})\n      Fn.store({ label: 'accountTypeIsSet', value: true})\n    }\n    \n  }\n\n  login() {\n    this.openDialog()\n    // alert()\n\n  }\n\n  logout() {\n    this.setState({ isAuthenticated: false })\n    Fn.store({ label: 'isAuthenticated', value: false })\n    this.props.history.push('/')\n  }\n\n  async componentDidMount() {\n    if(Fn.get('isAuthenticated')){\n      this.props.history.push('/dashboard')\n    }\n  }\n\n  render() {\n\n    return (\n\n      <>\n        {\n          !this.state.typeSelected &&\n\n          <WelcomeScreen\n            projects={this.state.projects}\n            type={this.state.type}\n            selectType={this.selectType}\n            typeSelected={this.state.typeSelected} />\n        }\n\n        <Dialog\n          className={'bp3-light'}\n          // icon=\"info-sign\"\n          onClose={this.closeDialog}\n          // title={this.state.dialogTitle}\n          {...this.state}\n        >\n\n          {\n            this.state.isOpen &&\n\n            <div className=\"flex flex-column\">\n\n              <div className=\"flex flex-row\">\n\n                <section id=\"Profile\" className=\"flex flex-column w-100 \">\n\n                  <div className=\"flex flex-row w-100\">\n\n                    <div className=\"flex flex-column w-100=\">\n\n                      <div\n\n                        style={{ width: '160px', backgroundImage: 'url(' + this.avatar(this.state.activeUser) + ')' }}\n                        className=\"pointer h-100   cover bg-center\"></div>\n\n                    </div>\n                    \n                    <div className=\"flex flex-column justify-center w-100\">\n\n                      <div className=\"flex flex-column justify-center w-100 pa4\">\n\n                        <div className=\"f4 flex flex-column w-100\">\n                          <span className=\"fw6 black-80\">{this.state.activeUser.profile.name && this.state.activeUser.profile.name.first} {this.state.activeUser.profile.name && this.state.activeUser.profile.name.last}</span>\n                          <span className=\"flex items-start fw4 ml0 mt2 f5 black-50\">{this.state.activeUser.position}</span>\n                        </div>\n\n                        <div className=\"flex flex-row flex-wrap w-100 pt3 black-60\">\n\n                          <div className=\"flex flex-column mr3 mb1\">\n                            <span className=\"f6 fw4 black-40\">Age<span className=\"fw6 ml2 black-60\">{moment().diff(this.state.activeUser.profile.dob, 'years')}</span></span>\n                          </div>\n\n                          <div className=\"flex flex-column mr3 mb1\">\n                            <span className=\"f6 fw4 black-40\">Gender<span className=\"fw6 ml2 black-60\">{this.state.activeUser.profile.gender && this.state.activeUser.profile.gender || \"\"}</span></span>\n                          </div>\n\n                          <div className=\"flex flex-column mr3 mb1\">\n                            <span className=\"f6 fw4 black-40\">Location<span className=\"fw6 ml2 black-60\">{this.state.activeUser.profile.location && this.state.activeUser.profile.location.County || \"\"}</span></span>\n                          </div>\n\n                        </div>                        \n\n                      </div>\n\n                      <div className=\"flex flex-row justify-center w-100\">\n                        {/* <button\n                          onClick={() => this.addToFavourites(this.state.activeUser)}\n                          className=\"pointer pv3 flex-auto flex flex-row justify-center pa0 ma0 bg-white\">\n                          <span className=\"f5 fw6 black-40 mr2\">Add to Favourites</span>\n\n                          {\n                              this.state.addToFavButtonLoading ? \n                              <Spinner size={15} /> : \n                              <Icon icon={'small-plus'} iconSize={15} className=\"black-50\"/>\n                            }\n\n                        </button> */}\n                        <button\n                          onClick={() => this.addToCrew(this.state.activeUser)}\n                          className=\"pointer pv3 flex-auto flex flex-row justify-center pa0 ma0 bg-white bl b--black-10\">\n                          <span className=\"f5 fw6 black-40 mr2 \">Invite to Crew</span>\n                          {\n                              this.state.addToCrewButtonLoading ? \n                              <Spinner size={15} /> : \n                              <Icon icon={'small-plus'} iconSize={15} className=\"black-50\"/>\n                            }\n\n                        </button>\n                      </div>\n\n                    </div>\n\n                  </div>\n\n                </section>\n\n              </div>\n\n            </div>\n          }\n\n        </Dialog>\n\n        {/* {\n          this.state.typeSelected && this.state.type === 'project-finder' &&\n\n          <div className=\"flex flex-column items-center justify-start  h-100 raleway fw5 mw8 center w-100 pt4\">\n\n            <div className=\"flex flex-column ma0 w-100\" id=\"\">\n\n              <div className=\"Buttons flex flex-row justify-center items-center pv4 \">\n\n                <h1 className=\" f3 fw4 black mv0 tc\">Find a Project</h1>\n\n              </div>\n\n            </div>\n\n            <div className=\"flex flex-column ma0 w-100\" id=\"\">\n\n              <div className=\"Buttons flex flex-row justify-between \">\n\n                {\n                  this.state.projects.length > 0 && <ListProjects projects={this.state.projects} />\n                }\n\n\n              </div>\n\n            </div>\n\n          </div>\n        } */}\n\n        {\n          this.state.typeSelected && this.state.type === 'crew-builder' &&\n          <div id=\"CrewBuilder\" className=\"relative flex flex-column items-center justify-start  h-100 raleway fw5 w-100 pt4\">\n\n            <div id=\"OnboardingStatus\" className=\"absolute flex flex-column right-0 top-0 z-99\">\n\n              <div className=\"flex flex-column mv4  mh5 bs-b round overflow-hidden\">\n\n                <div className=\"flex flex-row justify-center w-100\">\n                  <button onClick={() => this.openDrawer({ type: 'crew' })} className=\"pointer pv2 ph4 flex-auto flex flex-row justify-center pa0 ma0 bg-white hover-bg-black-05 hover-black -bs-a\">\n                    <span className=\"flex items-center f5 fw6 black-40 \">View Crew <Icon icon={'follower'} iconSize={15} className=\"ml2 black-40\" /> </span>\n                  </button>\n                </div>\n{/* \n                <div className=\"flex flex-row justify-center w-100 bt b--black-05\">\n                  <button onClick={() => this.openDrawer({ type: 'favourites' })} className=\"pointer pv3 ph4 flex-auto flex flex-row justify-center pa0 ma0 bg-white hover-bg-black-05 hover-black -bs-a\">\n                    <span className=\"flex items-center f5 fw6 black-40 \">View Shortlist <Icon icon={'follower'} iconSize={15} className=\"ml2 black-40\" /> </span>\n                  </button>\n                </div> */}\n\n              </div>\n\n            </div>\n            \n\n            <Drawer\n              title={false}\n              placement={'bottom'}\n              closable={true}\n              onClose={this.toggleDrawer}\n              visible={this.state.drawerVisible}\n              height={'36vh'}\n            >\n\n              <div className=\"flex flex-column\">\n\n                <div className=\"flex flex-column pa4\">\n\n                  <div className=\"flex flex-row\">\n\n                    {\n                      this.state[this.state.drawerType] && this.state[this.state.drawerType].map((item, index) => (\n                       \n                       <div className=\"flex flex-column mb2\">\n\n                          <div className=\"flex flex-row\">\n\n                            <div\n                              onClick={() => this.openDialog({ item })}\n                              className={\n                                \" pointer flex flex-column pv2 pr3 items-center justify-center\"\n                              }\n                            >\n\n                              <div\n                                style={{\n                                  width: \"160px\",\n                                  height: \"100px\",\n                                  borderRadius: \"5px\",\n                                  backgroundImage:\n                                    \"url(\" + item.profile.picture + \")\"\n                                }}\n                                className=\"cover bg-center\"\n                              />\n\n                              <div className={\" flex flex-row pt2 black\"}>\n\n                                <div className={\" flex f5 fw6 \"}>\n                                  {item.profile.name.first}\n                                </div>\n\n                                <div className={\" flex f5 fw6 ml1\"}>\n                                  {item.profile.name.last}\n                                </div>\n\n                              </div>\n\n                            </div>\n                            \n                          </div>\n\n                          <div className=\"justify-center flex flex-row f6 fw4 black-40 pb3 w-100 tc\">{item.position} </div>\n\n                        </div>\n                      ))}\n\n                  </div>\n\n                </div>                \n                \n              </div>\n\n            </Drawer>\n\n            <CrewFinder\n             type={'crewBuilder'}\n              addToCrew={this.addToCrew}\n              addToFavourites={this.addToFavourites}\n              openDialog={this.openDialog}\n              closeDialog={this.closeDialog}\n              saveAndCreateAccount={this.saveAndCreateAccount}\n              saveAndCreateAccountButtonLoading={this.state.saveAndCreateAccountButtonLoading}\n            />\n\n          </div>\n        }\n\n\n{\n          this.state.typeSelected && this.state.type === 'project-finder' &&\n          <div id=\"CrewBuilder\" className=\"relative flex flex-column items-center justify-start  h-100 raleway fw5 w-100 \">\n\n            {/* <div id=\"OnboardingStatus\" className=\"absolute flex flex-column right-0 top-0 z-99\">\n\n              <div className=\"flex flex-column pa4\">\n\n                <div className=\"flex flex-row justify-center w-100\">\n                  <button onClick={() => this.openDrawer({ type: 'crew' })} className=\"pointer pv3 ph4 flex-auto flex flex-row justify-center pa0 ma0 bg-white bs-a\">\n                    <span className=\"flex items-center f5 fw6 black-40 \">View Crew <Icon icon={'follower'} iconSize={15} className=\"ml2 black-40\" /> </span>\n                  </button>\n                </div>\n\n                <div className=\"flex flex-row justify-center w-100 mt2\">\n                  <button onClick={() => this.openDrawer({ type: 'shortList' })} className=\"pointer pv3 ph4 flex-auto flex flex-row justify-center pa0 ma0 bg-white bs-a\">\n                    <span className=\"flex items-center f5 fw6 black-40 \">View Shortlist <Icon icon={'follower'} iconSize={15} className=\"ml2 black-40\" /> </span>\n                  </button>\n                </div>\n\n              </div>\n\n            </div> */}\n\n            <Drawer\n              title={false}\n              placement={'bottom'}\n              closable={true}\n              onClose={this.toggleDrawer}\n              visible={this.state.drawerVisible}\n              height={'36vh'}\n            >\n\n              <div className=\"flex flex-column\">\n\n                <div className=\"flex flex-column pa4\">\n\n                  <div className=\"flex flex-row\">\n\n                    {\n                      this.state[this.state.drawerType] && this.state[this.state.drawerType].map((item, index) => (\n                       \n                       <div className=\"flex flex-column mb2\">\n\n                          <div className=\"flex flex-row\">\n\n                            <div\n                              onClick={() => this.openDialog({ item })}\n                              className={\n                                \" pointer flex flex-column pv2 pr3 items-center justify-center\"\n                              }\n                            >\n\n                              <div\n                                style={{\n                                  width: \"100px\",\n                                  height: \"120px\",\n                                  borderRadius: \"5px\",\n                                  backgroundImage:\n                                    \"url(\" + item.profile.picture + \")\"\n                                }}\n                                className=\"cover bg-center\"\n                              />\n\n                              <div className={\" flex flex-row pt3 black-60\"}>\n\n                                <div className={\" flex f6 fw6 \"}>\n                                  {item.profile.name.first}\n                                </div>\n\n                                <div className={\" flex f6 fw6 ml1\"}>\n                                  {item.profile.name.last}\n                                </div>\n\n                              </div>\n\n                            </div>\n                            \n                          </div>\n\n                          <div className=\"flex flex-row f6 fw4 black-40 pb3 w4\">{item.position} </div>\n\n                        </div>\n                      ))}\n\n                  </div>\n\n                </div>                \n                \n              </div>\n\n            </Drawer>\n\n            <ProjectFinder\n              projects={this.state.filteredProjects}\n              searchProjects={this.searchProjects}\n              projectsReady={this.state.projectsReady}\n              // addToCrew={this.addToCrew}\n              // addToShortList={this.addToShortList}\n              openDialog={this.openDialog}\n              closeDialog={this.closeDialog}\n              searchLoading={this.state.searchLoading}\n            />\n\n\n\n          </div>\n        }\n\n      </>\n    )\n  }\n}\n\nexport default Welcome;\nWelcome.contextType = AccountContext;","// @flow\nimport React, { Component } from \"react\";\nimport { Link } from 'react-router-dom';\nimport AccountContext, {\n  AccountConsumer\n} from \"../../../utils/context/AccountContext.js\";\n\nimport PageTitle from \"../../elements/layout/PageTitle_B.js\";\nimport FilePond from \"../../elements/upload/Filepond.js\";\n\n// import { Page, Text, View, Document, StyleSheet } from '@react-pdf/renderer';\n\nimport { Drawer } from \"antd\";\nimport MessageBoxProject from \"../../elements/display/messages/messageboxProject.js\";\nimport MBox from \"../../elements/display/messages/MBox.js\";\n\nimport { Fn, ui, api } from \"../../../utils/fn/Fn.js\";\nimport Transition from \"../../Layouts/Transition\";\nimport posed from \"react-pose\";\n\nconst Box = posed.div({\n  hidden: { opacity: 0, y: 50 },\n  visible: { opacity: 1, y: 0 }\n});\n\n\nclass Stats extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hasError: false,\n      // project: this.props.project,\n      drawerOpen: false,\n      activeFile: {},\n      ready: true,\n      activeConversation: null,\n      conversations: null,\n      activeStream: null,\n      isVisible: false,\n      stats: [],\n      projects: []\n    };\n  }\n  async componentDidMount() {\n    await Fn.fetchProjects({ self: this })\n    let stats = [\n      {\n        title: 'Active Projects',\n        number: ( this.context.subscribedProjects.length ),\n        link: \"/myprojects\"\n      },\n      {\n        title: 'Messages',\n        number: this.context.allUnread.length,\n        link: \"/messages\"\n      },\n      {\n        title: 'Notifications',\n        number: this.context.notifications.filter(a => a.read === false ).length,\n        link: \"/notifications\"\n      },\n      {\n        title: 'Days to Next Launch',\n        number: 0,\n        link: \"/project/5e4bd087382acb44a1002282\"      },\n      {\n        title: 'Days to Next Job',\n        number: 0,\n        link: \"/project/5e4bd087382acb44a1002282\"\n      },\n      \n      // {\n      //   title: 'Your Network',\n      //   number: this.context.account.user.profile.connections.length\n      // },\n      // {\n      //   title: 'Network Requests',\n      //   number: this.context.account.user.profile.network.pending.length\n      // }\n    ]\n\n    this.setState({\n      stats: stats\n    })\n  }\n\n  render() {\n    const isVisible = this.state.isVisible;\n\n    if (this.state.hasError) {\n      return <h1>Something went wrong.</h1>;\n    }\n    return (\n      <>\n        <section id=\"Discussion\" className=\"flex flex-column w-100 pb4 pt0\">\n          {/* {!this.state.ready && (\n            <div\n              className={\n                (this.props.loadingAlign === \"center\"\n                  ? \" items-center justify-center \"\n                  : \" items-center justify-start \") +\n                \" items-center justify-center  flex flex-row pv5 pr4\"\n              }\n            >\n              <div className=\"sp sp-3balls\"></div>\n            </div>\n          )} */}\n\n          <div className=\"flex flex-column flex-row-ns justify-between\">\n            {this.state.stats.map((item, index) => (\n              <Link \n              to={item.link}\n              className={(\"hover-slide-up trans-a flex flex-column justify-between flex-auto w-100 pv3 pointer \") + (index === 0 ? \" pr3-ns \" : \"  \") + (index === 4 ? \" pl3-ns \" : \" \") + (index !== 4  && index !== 0 ? \" ph3-ns \" : \" \") }>\n                <div className=\" br3 overflow-hidden flex flex-auto flex-column bg-white pa4 bs-b items-start justify-between\">\n                  <span className=\"f2 fw6 black mb2\">{item.number}</span>\n                  <span className=\"f4 f5-ns fw5 black-40\">{item.title}</span>\n                </div>\n              </Link>\n            ))}\n          </div>\n        </section>\n      </>\n    );\n  }\n}\n\nexport default Stats;\nStats.contextType = AccountContext;\n","// @flow\nimport React, { Component } from \"react\";\nimport AccountContext, {\n  AccountConsumer\n} from \"../../../utils/context/AccountContext.js\";\n\nimport PageTitle from \"../../elements/layout/PageTitle_B.js\";\nimport FilePond from \"../../elements/upload/Filepond.js\";\n\n// import { Page, Text, View, Document, StyleSheet } from '@react-pdf/renderer';\n\nimport { Drawer } from \"antd\";\nimport MessageBoxProject from \"../../elements/display/messages/messageboxProject.js\";\nimport MBox from \"../../elements/display/messages/MBox.js\";\n\nimport { Fn, ui, api } from \"../../../utils/fn/Fn.js\";\nimport Transition from \"../../Layouts/Transition\";\nimport posed from \"react-pose\";\n\nconst Box = posed.div({\n  hidden: { opacity: 0, y: 50 },\n  visible: { opacity: 1, y: 0 }\n});\n\nclass NetworkActivity extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hasError: false,\n      project: this.props.project,\n      // : this.props.project.discussion || null,\n      // files: this.props.project.files || [],\n      drawerOpen: false,\n      activeFile: {},\n      ready: true,\n      activeConversation: null,\n      conversations: null,\n      activeStream: null,\n      isVisible: false\n    };\n\n   \n  }\n  \n\n  render() {\n    const isVisible = this.state.isVisible;\n\n    if (this.state.hasError) {\n      return <h1>Something went wrong.</h1>;\n    }\n    return (\n      <>\n        <section id=\"Discussion\" className=\"flex flex-column w-100 pb4 pt0\">\n          {this.props.title !== null && (\n            <PageTitle\n              title={\"Discussion\"}\n              docs={\n                (this.state.activeConversation &&\n                  this.state.activeConversation.messages) ||\n                []\n              }\n              ready={this.state.conversationReady}\n            />\n          )}\n\n          {/* <div className=\"file-dropzone flex flex-row flex-wrap \">\n            <FilePond\n              type=\"files\"\n              project={this.props.project}\n              self={this}\n            />\n          </div> */}\n          {!this.state.conversationReady && (\n            <div\n              className={\n                (this.props.loadingAlign === \"center\"\n                  ? \" items-center justify-center \"\n                  : \" items-center justify-start \") +\n                \" items-center justify-center  flex flex-row pv5 pr4\"\n              }\n            >\n              <div className=\"sp sp-3balls\"></div>\n            </div>\n          )}\n          {this.state.conversationReady && (\n            <div\n              className={\n                \" flex flex-column flex-auto box w-100 trans-o-fast trans-y-fast \" +\n                (this.state.isVisible\n                  ? \" opacity-1 transform-y-0 \"\n                  : \" opacity-0 transform-y-50 \")\n              }\n            >\n              <div style={{ height: ui.mobile() ? \"54vh\" : \"auto\" }}>\n                <MBox\n                  type={\"discussion-large\"}\n                  conversation={this.state.activeConversation}\n                  conversations={[this.state.activeConversation]}\n                  activeConversationIndex={0}\n                  // conversations={this.state.conversations}\n                  stream={this.state.activeStream}\n                  updateActiveConversation={this.updateActiveConversation}\n                  size={this.props.size}\n                  // load={this.props.load}\n                />\n              </div>\n            </div>\n          )}\n          {/* </div> */}\n        </section>\n\n        <Drawer\n          title=\"Basic Drawer\"\n          placement=\"right\"\n          closable={true}\n          onClose={this.toggleDrawer}\n          visible={this.state.drawerOpen}\n          width={\"60vw\"}\n        >\n          {this.state.drawerOpen && (\n            <div className=\"pointer flex flex-column justify-end items-center pa3 bg-white \">\n              <h3 className=\"f5 fw6 black tc pv2 ph3 word-break-all\">\n                {this.state.activeFile.file.originalname}\n              </h3>\n              <div className=\"pointer flex flex-column justify-end items-center pa3 bg-white br2 bs-b mb2 mr2\">\n                <div\n                  style={{\n                    backgroundImage: 'url(\"' + this.state.activeFile.url + '\")'\n                  }}\n                  className=\"h5 file-item bg-cover bg-center cover flex flex-column justify-end items-center pa3 bg-white br2 bs-b mb2 mr2\"\n                ></div>\n              </div>\n            </div>\n          )}\n        </Drawer>\n      </>\n    );\n  }\n}\n\nexport default NetworkActivity;\nNetworkActivity.contextType = AccountContext;\n","import React from \"react\";\n// import { getGlobal, setGlobal, useGlobal } from \"reactn\";\n// import methods from '../../../utils/methods';\nimport { Empty, Skeleton } from \"antd\";\nimport { Fn, app } from \"../../../../utils/fn/Fn.js\";\nimport { Spinner, Icon } from \"@blueprintjs/core\";\n// import { RingSpinner } from \"react-spinners-kit\";\nimport TransitionLayout from \"../../../Layouts/Transition\";\n// import InsertModal from \"../../elements/forms/project/modal/insert\";\nimport ListNotifications from \"../../../elements/display/notifications\";\nimport PageTitle from \"../../../elements/layout/PageTitle_B\";\n\nimport NotificationDrawer from \"../../../elements/display/drawers/notificationDrawer\";\n// import fn from '../../../../../../../UNIT/client/src/utils/fn/fn'\nimport AccountContext, {\n    AccountConsumer\n} from \"../../../../utils/context/AccountContext.js\";\nimport Loading from \"../../../elements/Loading.js\";\n// import notificationTypes\n// import { notificationTypes } from \"./types\";\n\nexport default class UnreadMessages extends React.Component {\n    constructor(props) {\n        super(props);\n        // console.log('PROPS', props)\n        this.state = {\n            ready: false,\n            unreadMessages: [],\n            allUnread: [],\n            activeNotification: null,\n            showButtons: true,\n            filter: false\n        };\n\n        this.fetchNotifications = this.fetchNotifications.bind(this);\n        this.goToMessage = this.goToMessage.bind(this)\n        // this.refresh = this.refresh.bind(this);\n        // this.showDrawer = this.showDrawer.bind(this);\n        // this.handleOk = this.handleOk.bind(this);\n        // this.hideDrawer = this.hideDrawer.bind(this);\n        // this.filter = this.filter.bind(this);\n    }\n    goToMessage = async(item) => {\n        app.set('activeConversation', item.conversation)\n\n        console.log('** set active conv', item, app.get('activeConversation'))\n        this.props.history.push('/messages')\n    }\n    // filter(type) {\n    //     let type_ = type === \"new\" ? false : true;\n\n    //     this.setState({\n    //         filter: type_\n    //     });\n    // }\n\n    async fetchNotifications() {\n        const userId = Fn.get(\"account\").user.id;\n        await app.fetchUnreadMessages({ userId: userId, self: this }).then(response => {\n            \n            let unread = []\n            \n            for(let item of response){\n                for(let message of [...item.messages]){\n                    // console.log(' all unread message ', message)\n                    unread.push(message)   \n                }\n            }\n            \n            this.setState({\n                unreadMessages: response,\n                allUnread: unread,\n                ready: true\n            })\n\n        })\n    }\n\n    // setReady() {\n    //     this.setState({ ready: true });\n    // }\n\n    // async refresh() {\n    //     this.setState({\n    //         ready: false\n    //     });\n    //     setTimeout(async () => {\n    //         return await this.fetchNotifications();\n    //     }, 1000);\n\n    //     // this.fetchCollection()\n    // }\n    // async showDrawer(data) {\n    //     const { notification } = data;\n    //     console.log(\"show drawer \", notification);\n    //     this.setState({\n    //         drawerReady: true,\n    //         docInfoVisible: true,\n    //         activeNotification: notification\n    //     });\n\n    //     // let notification =\n    //     notification.read = true;\n    //     await app.updateNotification({ self: this, notification });\n\n    //     // setGlobal({ activeConversation: conversation, activeChef: chef })\n    // }\n\n    // hideDrawer(doc) {\n    //     this.setState({\n    //         drawerReady: false,\n    //         docInfoVisible: false\n    //     });\n    // }\n    // showModal = () => {\n    //     this.setState({\n    //         insertModalVisible: true\n    //     });\n    // };\n    // handleOk = e => {\n    //     // console.log(e);\n    //     this.setState({\n    //         insertModalVisible: false\n    //     });\n    // };\n    // handleCancel = e => {\n    //     // console.log(e);\n    //     this.setState({\n    //         insertModalVisible: false\n    //     });\n    // };\n    componentWillUnmount() { }\n    async componentDidMount() {\n        this.fetchNotifications();\n    }\n    render() {\n        const selfUserId = Fn.get('account').user.id;\n        return (\n            <AccountContext.Consumer>\n                {props => (\n                    <TransitionLayout>\n                        {!this.state.ready && !this.props.dashboard && <Loading />}\n\n                        <section\n                            id=\"Notifications\"\n                            className={\n                                (this.props.padding !== false ? \" pa4 \" : \"  \") +\n                                \" w-100 mw9 center mt3 \"\n                            }\n                        >\n                            {/* <div onClick={this.refresh} className=\"absolute top-0 right-0 pa4\">\n            <Icon type=\"sync\" />\n          </div> */}\n\n                            <PageTitle\n                                title={\"New Messages\"}\n                                ready={this.state.ready}\n                                // theme={props.theme}\n                                // showInsertForm={this.showModal}\n                                docs={this.state.allUnread}\n                            // activeDoc={this.state.activeProject}\n                            // updateActiveDoc={this.updateActiveDoc}\n                            // showButton={false}\n                            />\n\n                            {/* {this.state.showButtons && (\n                <div className={\" flex flex-row \"}>\n                  <div className=\"flex flex-row\">\n                    <div\n                      onClick={() => this.filter(\"new\")}\n                      className={\n                        (this.state.filter ? \" fw5 \" : \" fw6 \") +\n                        \" pointer flex flex-column pv2 f5 black-30 mr2 \"\n                      }\n                    >\n                      New\n                    </div>\n                    <div\n                      onClick={() => this.filter(\"read\")}\n                      className={\n                        (this.state.filter ? \" fw6 \" : \" fw5 \") +\n                        \" pointer flex flex-column pv2 f5 black-30 mr2 \"\n                      }\n                    >\n                      Read\n                    </div>\n                  </div>\n                </div>\n              )} */}\n\n                            <div className=\"h2\"></div>\n\n                            {/* {this.state.ready && !this.state.filter && this.state.notifications.filter(\n                      a => a.read === false\n                    ).length === 0 && (\n                <div\n                  className=\"flex flex-row ph0 pb3 items-center justify-start\"\n                  id=\"\"\n                >\n                  <span className=\"f6 fw5 black-50 pv2 ph3 ba b--black-05\">\n                    No new notifications\n                  </span>\n                </div>\n              )} */}\n\n\n                            {this.state.ready &&\n                                this.state.unreadMessages.length > 0 &&\n                                this.state.unreadMessages.map((item, index) => (\n                                    <div\n                                        onClick={() => this.goToMessage(item)}\n                                        className={(\"br2 bs-b List_A_item cursor-pointer sans-serif flex flex-row flex-auto w-100 items-center justify-start pa0 mb2- relative overflow-hidden mb3\")}\n                                    >\n                                        {/* <div\n                        className=\"avatar flex flex-column bg-cover bg-center br2\"\n                    /> */}\n                                        <div className=\"flex flex-row w-100 bg-white  \">\n                                            <div className=\"flex flex-column w-100\">\n                                                <div className={(\"flex flex-column mr2 f4 fw6 pb2 ph4 pt3 \")}>\n                                                    {item.conversation.authors.filter(a => a.id !== selfUserId)[0].profile.name.first}\n                                                </div>\n                                                <div className=\"flex flex-row mr2 f5 fw5 black-50 pb3 ph4\">\n                                                    <span className=\"flex flex-row ph2 pv2 br2 bg-near-white black-50 f5 fw5 mr2\">{\" + \" + item.messages.size}</span>\n                                                    <span className=\"flex flex-row ph2 pv2 br2 bg-white black-50 f5 fw5 mr2\">{[...item.messages][item.messages.size - 1].text}</span>\n\n\n\n                                                </div>\n\n                                                {/* <div\n                            className={\n                                (\"flex flex-row flex-auto fw3 f6 black-30 pt3 pb3 pr3 w-60 justify-end\")}>\n                                <span className=\"fw4 ml1 mr3 black-30\">{moment(this.props.notification.createdAt).format('h:mm A')}</span> <span className=\"fw4 ml1 mr3- black-30\">{moment(this.props.notification.createdAt).format('D MMMM YYYY')}</span>\n                            </div> */}\n\n                                            </div>\n                                        </div>\n\n                                    </div>\n                                ))\n\n\n                            }\n                            {!this.state.ready && (\n                                <div className=\"trans-a\">\n                                    <Skeleton active />\n                                    <Skeleton active />\n                                </div>\n                            )\n                            }\n\n                            {this.state.ready ? (\n                                <NotificationDrawer\n                                    type={\"info\"}\n                                    notification={this.state.notification}\n                                    doc={this.state.activeNotification}\n                                    // chef={this.state.activeChef}/\n                                    // updateDoc={this.updateDoc}\n                                    visible={this.state.docInfoVisible}\n                                    hideDrawer={this.hideDrawer}\n                                    className=\"NotificationDetail\"\n                                    close={this.hideDrawer}\n                                    refresh={this.refresh}\n\n                                // theme={/Fn.get('theme').config.theme}\n                                // reserve={this.reserve}\n                                // sendMessage={this.sendMessage}\n                                // conversationReady={this.state.drawerReady}\n                                />\n                            ) : null}\n\n                            {!this.props.dashboard && (\n                                <div\n                                    onClick={this.refresh}\n                                    className={\n                                        (Fn.get(\"isMobile\") ? \" top-6vh \" : \"  \") +\n                                        \" absolute top-0 right-0 pa4 pointer black-20- hover-black-40 flex flex-row items-center z-9 \"\n                                    }\n                                >\n                                    <span className=\"mr2 f5 fw4 black-30\">\n                                        {this.state.ready ? \"reload\" : \"loading\"}\n                                    </span>{\" \"}\n                                    {this.state.ready ? (\n                                        <Icon icon=\"refresh\" iconSize={15} className=\"black-40\" />\n                                    ) : (\n                                            <Spinner size={15} className=\"black-40\" />\n                                        )}\n                                </div>\n                            )}\n                        </section>\n                    </TransitionLayout>\n                )}\n            </AccountContext.Consumer>\n        );\n    }\n}\n\n// export default Notifications;\n","import React from \"react\";\n// import React, { getGlobal, setGlobal, useGlobal } from \"reactn\";\nimport { Redirect } from \"react-router-dom\";\nimport { Popover, Empty, Skeleton, Rate } from \"antd\";\n\nimport TransitionLayout from \"../../Layouts/Transition\";\nimport ListProjects from \"../../elements/display/projects/list\";\nimport PageTitle from \"../../elements/layout/PageTitle_B\";\nimport ProjectInfo from \"../../elements/display/drawers/ProjectInfo\";\nimport LocationSearchFormWrapper from \"../../elements/display/forms/LocationSearchFormWrapper\";\nimport OnboardingScreen from \"../../elements/display/onboarding/OnboardingScreen\";\nimport LocationSearchBar from \"../../elements/display/forms/LocationSearchBar\";\nimport FormProjectSearch from \"../../elements/forms/ProjectSearch.js\";\n\nimport Stats from \"../../a/Stats/index.js\";\nimport NetworkActivity from \"../../a/NetworkActivity/index.js\";\n// import NewMessages from '../../a/NewMessages/index.js';\n// import Notifications from '../../a/Notifications/index.js';\nimport Notifications from \"./Notifications/index.js\";\nimport Messages from \"./Messages/index.js\";\n// import Messages from './Messages/index.js';\nimport MyProjects from \"./MyProjects.js\";\nimport Calendar from \"./Calendar\";\nimport UnreadMessages from './Messages/UnreadMessages.js';\n// import Messages_ from './Messages/index.js';\n\nimport Loading from \"../../elements/Loading.js\";\n\nimport { Dialog, Icon, Spinner } from \"@blueprintjs/core\";\nimport moment from \"moment\";\nimport methods from \"../../../utils/methods\";\nimport { Fn, app, ui, api } from \"../../../utils/fn/Fn.js\";\n\n\nimport AccountContext, {\n  AccountConsumer\n} from \"../../../utils/context/AccountContext\";\nimport \"./style.css\";\n// import { dilate } from \"popmotion/lib/calc\";\n// window.getGlobal = getGlobal;\n// window.useGlobal = useGlobal;\n// window.setGlobal = setGlobal;\n\n\n\nconst welcomeText = { \n  heading: \"Welcome to Crew20\", \n  subheading: \"Use the boxes above or menu icon in the top right corner to navigate around the platform.\", \n  subheading2: \"Use the calendar below to view your project schedule.\",\n  content: \"\" } \n\nconst Welcome = () => (\n  <div className=\"flex flex-column f5 fw5 black-30 ls-copy raleway pa4 bs-b- mb4\">\n    <span className=\"fw5 f4 black-50 pb3\">Welcome to <span className=\"fw6 black\">Crew20</span></span>\n    <span className=\"flex flex-column pb2\">{welcomeText.subheading}</span>\n    <span className=\"flex flex-column\">{welcomeText.subheading2}</span>\n  </div>\n)\n\n\n\nexport default class Dashboard extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      projects: [],\n      ready: false,\n      insertModalVisible: false,\n      projectInfoVisible: false,\n      loading: false,\n      toMessages: false,\n      conversationReady: false,\n      activeTab: \"1\",\n      drawerReady: false,\n      progressBarPercent: 0,\n      progressBarActive: false,\n      showLocationForm: false,\n      showOnboardingScreen: false,\n      account: Fn.get(\"account\"),\n      searchCity: null,\n      isOpen: false,\n      userIsOwner: false,\n      buttons: [],\n      activeButton: null,\n      views: [],\n      activeView: null,\n      viewsReady: false,\n      shouldCompleteProfile: false\n    };\n\n    this.fetchProjects = this.fetchProjects.bind(this);\n    this.fetchProjects2 = this.fetchProjects2.bind(this);\n    this.showDrawer = this.showDrawer.bind(this);\n    this.hideDrawer = this.hideDrawer.bind(this);\n    this.refresh = this.refresh.bind(this);\n    this.setLocation = this.setLocation.bind(this);\n    this.start = this.start.bind(this);\n    this.focusLocationSearch = this.focusLocationSearch.bind(this);\n\n    this.reserve = this.reserve.bind(this);\n    this.sendMessage = this.sendMessage.bind(this);\n    this.openSearchDialog = this.openSearchDialog.bind(this);\n    this.closeDialog = this.closeDialog.bind(this);\n    this.searchProjects = this.searchProjects.bind(this);\n\n    console.log(\"[[ Dashboard props ]]\", props);\n  }\n  setView(config) {\n    const { view, button } = config;\n    this.setState({\n      activeView: view,\n      activeButton: button\n    });\n\n    Fn.store({ label: \"activeView\", value: view });\n    Fn.store({ label: \"activeButton\", value: button });\n\n    view === \"discussion\" &&\n      setTimeout(\n        () =>\n          document.querySelector(\"body\").scroll({\n            top: 130,\n            left: 0,\n            behavior: \"smooth\"\n          }),\n        1000\n      )\n  }\n  setButtons() {\n    const buttons = [\n      {\n        title: \"Overview\",\n        role: \"general\",\n        function: () => this.setView({ filter: \"Overview\", button: 0 })\n      },\n\n      {\n        title: \"Projects\",\n        role: \"general\",\n        function: () => this.setView({ filter: \"Discussion\", button: 1 })\n      },\n      {\n        title: \"Messages\",\n        role: \"general\",\n        function: () => this.setView({ filter: \"Files\", button: 2 })\n      },\n      // {\n      //   title: \"Timeline\",\n      //   function: () => this.setView({ filter: \"timeline\", button: 3 })\n      // },\n      {\n        title: \"Calendar\",\n        role: \"general\",\n        function: () => this.setView({ filter: \"Settings\", button: 3 })\n      },\n      {\n        title: \"Notifications\",\n        role: \"general\",\n        function: () => this.setView({ filter: \"People\", button: 4 })\n      },\n      {\n        title: \"Network\",\n        role: \"general\",\n        function: () => this.setView({ filter: \"Checklist\", button: 5 })\n      },\n      {\n        title: \"Files\",\n        role: \"general\",\n        function: () => this.setView({ filter: \"Rate Calculator\", button: 6 })\n      }\n    ];\n\n    // const views = [\"overview\", \"files\", \"discussion\", \"settings\", \"people\"];\n    const views = [\n      {\n        title: \"Overview\",\n        role: \"general\"\n      },\n      {\n        title: \"Projects\",\n        role: \"general\"\n      },\n      {\n        title: \"Messages\",\n        role: \"general\"\n      },\n      {\n        title: \"Calendar\",\n        role: \"general\"\n      },\n      {\n        title: \"Notifications\",\n        role: \"general\"\n      },\n      {\n        title: \"Network\",\n        role: \"general\"\n      },\n      {\n        title: \"Files\",\n        role: \"general\"\n      }\n    ];\n\n    this.setState({\n      viewsReady: true,\n      buttons: buttons,\n      activeButton: buttons[0],\n      views: views,\n      activeView: views[0]\n    });\n  }\n  closeDialog() {\n    this.setState({\n      isOpen: false\n    });\n  }\n  searchProjects(data) {\n    const { location, projectType, startDate, endDate } = data;\n\n    this.setState({\n      ready: false\n    });\n    // alert()\n\n    console.log(\"search config \", data);\n\n    console.log(this.state.projects);\n\n    let location_;\n\n    if (typeof data.location.County !== \"undefined\") {\n      location_ = data.location.County.toLowerCase();\n    } else {\n      location_ = data.location.address.county.toLowerCase();\n    }\n\n    // let type = data.projectType;\n    let projects = this.state.projects;\n\n    console.log(\"location\", location_);\n\n    let filtered = projects.filter(\n      p => p.location.toLowerCase() === location_ && p.type === projectType\n    );\n    let filteredDateRange = filtered.filter(p =>\n      moment(p.start_date).isBetween(data.startDate, data.endDate)\n    );\n\n    console.log(\"filtered\", filtered);\n    console.log(\"filteredDateRange\", filteredDateRange);\n\n    this.setState({\n      projects: filteredDateRange,\n      ready: true,\n      isOpen: false\n    });\n  }\n  openSearchDialog() {\n    this.setState({ isOpen: true });\n  }\n  focusLocationSearch() {}\n  reserve(doc) {\n    console.log(doc);\n    this.setState({ activeDoc: doc });\n    // setGlobal({ \"reserve\": true, recipient: doc })\n  }\n  async sendMessage(doc) {\n    return await Fn.sendMessage({ doc, self: this });\n  }\n  async fetchProjects2(city) {\n    this.setState({ ready: false, searchCity: city });\n    setTimeout(() => {\n      console.log(\"[[ fetchProjects2 city ]]\", city);\n      return Fn.fetchProjects2({ city, self: this });\n    }, 1000);\n  }\n  async fetchProjects(city) {\n    this.setState({ ready: false, searchCity: city });\n    return await Fn.fetchProjects({ city, self: this });\n  }\n  async refresh() {\n    return await Fn.refresh({ self: this });\n  }\n  async showDrawer(project) {\n    return await Fn.showDrawer({ project, self: this });\n  }\n  async hideDrawer() {\n    return await Fn.hideDrawer({ self: this });\n  }\n  showModal = () => {\n    this.setState({\n      insertModalVisible: true\n    });\n  };\n  handleOk = e => {\n    console.log(e);\n    this.setState({\n      insertModalVisible: false\n    });\n  };\n  handleCancel = e => {\n    console.log(e);\n    this.setState({\n      insertModalVisible: false\n    });\n  };\n\n  async setLocation() {\n    return await Fn.setLocation({ self: this });\n  }\n  async start() {\n    // find location by browser geolocation,\n    // then query Here maps api for location data using reverse geolocation.\n    // Fn.fetchProjects({ self: this })\n    // return await Fn.setLocation({ self: this })\n  }\ncheckProfileStatus() {\n  if (\n    this.context.account &&\n    this.context.account.user &&\n    this.context.account.user.profile &&\n    this.context.account.user.profile.name.first.length === 0\n  ) {\n    this.setState({\n      shouldCompleteProfile: true\n    });\n  }\n}\n  componentWillUnmount() {}\n  componentDidUpdate() {\n    // console.log(\"[[ Home Updated ]]\", this.props);\n  }\n  async componentDidMount() {\n\n    this.context.setPage({ title: \"Dashboard\", subtitle: \"...\"})\n    \n    this.checkProfileStatus()\n    this.setButtons();\n    \n    Fn.fetchProjects({ self: this });\n\n    document.querySelector(\"body\").scroll({\n      top: 0,\n      left: 0,\n      behavior: \"smooth\"\n    });\n\n    if (localStorage.getItem(\"crewBuilder\") !== null) {\n      let crewBuilder = Fn.get(\"crewBuilder\");\n      if (!crewBuilder.hasBeenUploaded) {\n        await Fn.createProject({ self: this, project: crewBuilder });\n      }\n    }\n\n    // this.start()\n  }\n  render() {\n    return (\n      <AccountContext.Consumer>\n        {props => {\n          return (\n            <TransitionLayout>\n              {!this.state.ready && <Loading />}\n\n              {/* {this.state.ready && (\n                <section id=\"ToolbarButtons\" className=\"flex flex-column w-100 overflow-hidden\">\n                  <div className=\"flex flex-row justify-between w-100 vw100 overflow-auto\">\n                    <div className=\"toolbar-buttons-wrapper flex flex-row flex-auto- w-100\">\n                      {this.state.buttons\n                        .filter(b => b.role === \"general\")\n                        .map((button, index) => (\n                          <button\n                            title={button.title}\n                            onClick={() =>\n                              this.setView({\n                                view: this.state.views[index],\n                                button: button\n                              })\n                            }\n                            id={button.title}\n                            className={\n                              \" bl b--black-05 \" +\n                              (this.state.activeButton.title === button.title\n                                ? \" bg-black-20 \"\n                                : \" bg-black-30 \") +\n                              \" toolbar-button pointer flex flex-column pa0 mr3- pointer justify-center items-center flex-auto\"\n                            }\n                          >\n                            <div\n                              id=\"\"\n                              className=\"flex flex-row ph0 pv0 items-center justify-center\"\n                            >\n                              <span className=\"f5 fw6 black-40- white ph3 pv4 w-100 tc\">\n                                {button.title}\n                              </span>\n                            </div>\n                          </button>\n                        ))}\n                      {this.state.buttons\n                        .filter(\n                          b => b.role === \"admin\" && this.state.userIsOwner\n                        )\n                        .map((button, index) => (\n                          <button\n                            title={button.title}\n                            onClick={() =>\n                              this.setView({\n                                view: this.state.views[index + 3],\n                                button: button\n                              })\n                            }\n                            id={button.title}\n                            className={\n                              \" bl b--black-05 \" +\n                              (this.state.activeButton.title === button.title\n                                ? \" bg-black-20 \"\n                                : \" bg-black-30 \") +\n                              \" flex flex-column pa0 mr3- pointer justify-center items-center flex-aut-o\"\n                            }\n                          >\n                            <div\n                              id=\"\"\n                              className=\"flex flex-row ph0 pv0 items-center justify-center\"\n                            >\n                              <span className=\"f5 fw6 black-40- white ph3 pv4 w-100 tc \">\n                                {button.title}\n                              </span>\n                            </div>\n                          </button>\n                        ))}\n                    </div>\n                  </div>\n                </section>\n              )} */}\n\n              {/* {\n                props.account.user.profile.config.onboardingcomplete === false\n                && <OnboardingScreen location={this.state.location} />\n              } */}\n\n              <section id=\"Home\" className=\"w-100 mw8 center pa4 pb6\">\n                {/* {this.state.viewsReady &&\n                  this.state.activeView.title === \"Overview\" && (\n                    <div className=\"flex flex-column flex-row-ns justify-between mb4 mt3\">\n                      <PageTitle\n                        title={\"Dashboard\"}\n                        ready={this.state.ready}\n                        theme={props.theme}\n                        showInsertForm={this.showModal}\n                        docs={false}\n                        activeDoc={this.state.activeProject}\n                        updateActiveDoc={this.updateActiveDoc}\n                        showButton={false}\n                      />\n                    </div>\n                  )} */}\n\n                {/* <div\n                    id=\"ProjectSearch\"\n                    className=\"w-100 flex flex-row items-end justify-start justify-end-ns mb2\">\n                    <button\n                      onClick={this.openSearchDialog}\n                      className={(Fn.get('isMobile') ? \" w-100 mt3 \" : \"  \") + (\" br1- round bs-b bg-black-20 ph4 pv2 pointer bn relative w-100-    \")} >\n\n                      <span className=\"f5 fw6 white pv0 flex items-center justify-center pr2\">\n\n                  \n                  \n                      {this.state.buttonLoading ? <Icon icon=\"loading\" className={' absolute right-0 f4 black-60 mr2'} /> : <Icon icon={\"search\"} iconSize={12} className={(' f4 black-60- white  absolute right-0 mr3')} />} Find a Project\n                        </span>\n                    </button>\n                  </div> */}\n                {/* {this.state.locationIsSet &&\n                    <LocationSearchBar\n                      location={this.state.location}\n                      findLocation={this.findLocation}\n                      fetchProjects={this.fetchProjects2}\n\n                    />} */}\n\n                {/* <div className=\"flex flex-row justify-between pb3\">\n                  <h4 className=\"f7 fw5 black-30\">Showing results for <span onClick={this.focusLocationSearch} className=\"ph2 pv1 br1 fw6 black-40 bg-black-10 white\">{this.state.searchCity}</span></h4>\n                </div> */}\n                {/* {!this.state.ready && (\n                  <div>\n                    <div className=\"sp sp-3balls\"></div>\n                  </div>\n                )} */}\n\n                {\n                  this.state.shouldCompleteProfile && \n                  <div \n                  onClick={() => this.props.history.push('/profile')}\n                  className=\"flex flex-column pv3\">\n                  <div className=\"flex flex-column ph4 pv3 br2 bg-yellow black-30 f5 fw6\">\n                      <span className=\"\">Hi, it looks like you're new around here. Please complete your profile by clicking this link.</span>\n                    \n                    </div>  \n                  </div>\n                }\n                {this.state.viewsReady &&\n                  this.state.activeView.title === \"Overview\" && (\n                    <>\n                      \n                        <Stats \n                          setView={this.setView} \n                          projects={this.state.projects} \n                        />\n\n                        <Welcome hide={ () => { this.setState({ showWelcome: false }) } } />\n\n                        <Calendar dashboard={true} />\n\n\n                      {/* <div className=\"flex flex-row w-100 \">\n                        \n                      <div className=\"flex pr3-ns w-100 w-50-ns flex-auto -h96vh\">\n                          <UnreadMessages \n                          history={this.props.history}\n                          dashboard={true} padding={false} />\n                        </div>\n\n                        <div className=\"flex pl3-ns flex-auto w-100 w-50-ns -h96vh\">\n                          <Notifications\n                            dashboard={true}\n                            padding={false}\n                            showButtons={false}\n                          />\n                        </div>\n\n                        \n\n                      </div> */}\n                      {/* <NetworkActivity /> */}\n                    </>\n                  )}\n\n                {this.state.viewsReady &&\n                  this.state.activeView.title === \"Projects\" && (\n                    <MyProjects dashboard={true} />\n                  )}\n                {this.state.viewsReady &&\n                  this.state.activeView.title === \"Calendar\" && (\n                    <Calendar dashboard={true} />\n                  )}\n\n                {this.state.viewsReady &&\n                  this.state.activeView.title === \"Messages\" && (\n                    <Messages type={\"main\"} dashboard={true} padding={false} />\n                  )}\n\n                {this.state.viewsReady &&\n                  this.state.activeView.title === \"Notifications\" && (\n                    <Notifications dashboard={true} padding={false} />\n                  )}\n\n                {/* {\n                this.state.viewsReady && this.state.activeView.title === \"Overview\" && this.state.ready ? (\n                  this.state.projects.length > 0 ? (\n                    <ListProjects\n                      projects={this.state.projects}\n                      activeProject={this.state.activeProject}\n                      className=\"trans-a\"\n                      showDrawer={this.showDrawer}\n                      hideDrawer={this.hideDrawer}\n                      theme={props.theme}\n                      activeCurrency={props.activeCurrency}\n                      exchangeRate={props.exchangeRate}\n                    />\n                  ) : (\n                    <Empty\n                      className=\"trans-a flex flex-column justify-center items-start\"\n                      image={Empty.PRESENTED_IMAGE_SIMPLE}\n                    />\n                  )\n                ) : (\n                  <div className=\"trans-a\">\n                    <Skeleton active />\n                  </div>\n                )} */}\n                {/* {this.state &&\n                  this.state.locationIsSet &&\n                  this.state.ready &&\n                  this.state.drawerReady && (\n                    <ProjectInfo\n                      type={\"info\"}\n                      project={this.state.activeProject}\n                      updateDoc={this.updateDoc}\n                      visible={this.state.projectInfoVisible}\n                      hideDrawer={this.hideDrawer}\n                      close={this.props.handleOk}\n                      refresh={this.refresh}\n                      theme={props.theme}\n                      reserve={this.reserve}\n                      sendMessage={this.sendMessage}\n                      conversationReady={this.state.conversationReady}\n                      submitReservationRequest={this.submitReservationRequest}\n                      activeTab={this.state.activeTab}\n                      activeCurrency={props.activeCurrency}\n                      exchangeRate={props.exchangeRate}\n                    />\n                  )} */}\n              </section>\n              {/* {\n                account\n                && account.extended\n                && account.extended.config\n                && account.extended.config.type === \"user\"\n                && this.state.showLocationForm\n                && <LocationSearchFormWrapper\n                  progressBarActive={this.state.progressBarActive}\n                  progressBarPercent={this.state.progressBarPercent}\n                  fetchProjects={this.fetchProjects}\n                />\n              } */}\n              {/* <div\n                onClick={this.refresh}\n                className={(Fn.get('isMobile') ? \" top-6vh \" : \"  \")\n                  + (\" absolute top-0 right-0 pa4 pointer black-20- hover-black-40 flex flex-row items-center z-9 \")}>\n                <span className=\"mr2 f5 fw4 black-30\">{this.state.ready ? \"reload\" : \"loading\"}</span> {this.state.ready ? <Icon icon=\"refresh\" iconSize={15} className=\"black-40\" /> : <Spinner size={15} className=\"black-40\" />}\n              </div> */}\n              {/* <Dialog\n                className={\"bp3-light\"}\n                // icon=\"info-sign\"\n                onClose={this.closeDialog}\n                title={this.state.dialogTitle}\n                {...this.state}\n              >\n                <FormProjectSearch searchProjects={this.searchProjects} />\n              </Dialog> */}\n            </TransitionLayout>\n          );\n        }}\n      </AccountContext.Consumer>\n    );\n  }\n}\n\n// export default Home;\nDashboard.contextType = AccountContext;\n","import React from \"react\";\nimport { Link } from 'react-router-dom';\nimport TransitionLayout from \"../../Layouts/Transition\";\nimport { Icon } from '@blueprintjs/core';\n// import AccountContext from '../../../utils/context/AccountContext';\n// const queryString = require('query-string');\n\nexport default class ConfirmAccount extends React.Component {\n  constructor(props) {\n    super(props);\n  }\nasync componentDidMount() {\n  // console.log('query string', window.location.search);\n  //   const parsed = queryString.parse(window.location.search);\n  //   console.log('parsed', parsed);\n\n    // console.log('parsed type', typeof parsed)\n\n    // await app.confirmAccount({ self: this, userId: parsed.user, email: parsed.email})\n\n    // let urlParseComplete;\n\n    // if (typeof parsed.email !== \"undefined\") {\n    //   // Fn.set('newinvite', JSON.parse(parsed.newinvite))\n    //   // localStorage.setItem('newinvite', JSON.parse(parsed.newinvite))\n    // }\n    // if (typeof parsed.referrer !== \"undefined\") {\n\n    //   // Fn.set('referrer', parsed.referrer)\n    //   // localStoragae.setItem('referrer', parsed.referrer)\n    // }\n}\n  render() {\n    return (\n      <TransitionLayout>\n        <section id=\"ConfirmAccount\" className=\"raleway flex flex-column items-center justify-center h-100 w-100 pt5 mw7 center pa4\">\n          {/* <div style={{ backgroundImage: \"url(https://cdn1.vectorstock.com/i/1000x1000/25/15/telescope-searching-404-banner-vector-13702515.jpg)\" }} className=\"NotFound-bg\"></div> */}\n         <Icon icon={'inbox-search'} iconSize={50} className=\"black-60 pb3 pt4\" />\n          <h1 className=\"f3 fw5 black-70\">Please confirm your email address.</h1>\n          <div id=\"CreateProject\" className=\"flex flex-row items-end justify-end mb2\">\n          <h1 className=\"f3 fw3 black-30 tc mw6\">Please check your inbox (and spam) for your account confirmation email.</h1>\n          </div>\n        </section>\n      </TransitionLayout>\n    );\n  }\n}\n// ConfirmAccount.contextType = AccountContext;\n\n// export default NotFound;\n","import React from \"react\";\nimport { Link } from 'react-router-dom';\nimport TransitionLayout from \"../../Layouts/Transition\";\nimport { Icon } from '@blueprintjs/core';\nimport AccountContext from '../../../utils/context/AccountContext';\nimport { app } from '../../../utils/fn/Fn.js';\n\nconst queryString = require('query-string');\n\nexport default class ConfirmAccount extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      confirmed: false\n    }\n    \n    this.setConfirmed = this.setConfirmed.bind(this)\n  }\n  setConfirmed() {\n    this.setState({\n      confirmed: true\n    })\n\n    setTimeout(() => {\n      this.context.login()\n\n    },3000)\n  }\nasync componentDidMount() {\n  console.log('query string', window.location.search);\n    const parsed = queryString.parse(window.location.search);\n    console.log('parsed', parsed);\n\n    console.log('parsed type', typeof parsed)\n\n    await app.confirmAccount({ self: this, userId: parsed.user, email: parsed.email})\n\n    // let urlParseComplete;\n\n    // if (typeof parsed.email !== \"undefined\") {\n    //   // Fn.set('newinvite', JSON.parse(parsed.newinvite))\n    //   // localStorage.setItem('newinvite', JSON.parse(parsed.newinvite))\n    // }\n    // if (typeof parsed.referrer !== \"undefined\") {\n\n    //   // Fn.set('referrer', parsed.referrer)\n    //   // localStoragae.setItem('referrer', parsed.referrer)\n    // }\n}\n  render() {\n    return (\n      <TransitionLayout>\n        <section id=\"ConfirmAccountConfirmed\" className=\"flex flex-column items-center justify-center h-100 w-100 pt5 mw7 center pa4\">\n          {/* <div style={{ backgroundImage: \"url(https://cdn1.vectorstock.com/i/1000x1000/25/15/telescope-searching-404-banner-vector-13702515.jpg)\" }} className=\"NotFound-bg\"></div> */}\n          \n    { !this.state.confirmed && <h1 className=\"f3 fw1 black-30\">Confirming your account.</h1> }\n          <div id=\"CreateProject\" className=\"flex flex-column items-center justify-center mb2\">\n            {\n              this.state.confirmed && \n              <>\n              <Icon icon={'endorsed'} iconSize={60} className=\"mt4 mb2 blue\" />\n              <h1 className=\"f3 fw1 black-50\">Confirmed</h1> \n              <div\n              className={\n                \" items-center justify-center  flex flex-row pv3 mr3\"\n              }\n            >\n              <div className=\"sp sp-3balls\"></div>\n            </div>\n              </>\n            }\n          {\n            !this.state.confirmed && \n            <div\n              className={\n                \" items-center justify-center  flex flex-row pv3\"\n              }\n            >\n              <div className=\"sp sp-3balls\"></div>\n            </div>\n          }\n          \n          </div>\n        </section>\n      </TransitionLayout>\n    );\n  }\n}\nConfirmAccount.contextType = AccountContext;\n\n// export default NotFound;\n","import React from \"react\";\nimport { Link } from 'react-router-dom';\nimport TransitionLayout from \"../../Layouts/Transition\";\nimport { Icon } from '@blueprintjs/core';\n\nclass NotFound extends React.Component {\n  // constructor(props) {\n  //   super(props);\n  // }\n\n  render() {\n    return (\n      <TransitionLayout>\n        <section id=\"NotFound\" className=\"flex flex-column items-center justify-center h-100 w-100 pt7 mw7 center pa4\">\n          {/* <div style={{ backgroundImage: \"url(https://cdn1.vectorstock.com/i/1000x1000/25/15/telescope-searching-404-banner-vector-13702515.jpg)\" }} className=\"NotFound-bg\"></div> */}\n          <h1 className=\"f3 fw1 black-30\">Sorry, that page does not exist</h1>\n          <div id=\"CreateProject\" className=\"flex flex-row items-end justify-end mb2\">\n                            <Link\n                              to={'/myprojects'}\n                              className={(\"br1- round bs-b bg-black-20 ph5 pv2 pointer bn relative w-100  \")} >\n\n                              <span className=\"f5 fw6 white pv0 flex items-center justify-center\">                                \n                                Back to My Projects <Icon icon={\"arrow-right\"} iconSize={20} className={(' f4 black-60- white  absolute right-0 ml3 mr3')} /></span>\n\n                            </Link>\n                          </div>\n        </section>\n      </TransitionLayout>\n    );\n  }\n}\n\nexport default NotFound;\n","import React, { useState, getGlobal, setGlobal } from \"reactn\";\n// import { useAuth0 } from \"../../../utils/auth/react-auth0-spa\";\nimport { Link } from \"react-router-dom\";\nimport moment from \"moment\";\nimport { Popover, Avatar, Badge } from \"antd\";\nimport { Icon } from \"@blueprintjs/core\";\n\n// import SelectCurrency from \"../display/lists/SelectCurrency\";\nimport AccountContext from \"../../../utils/context/AccountContext\";\nvar GeoPattern = require(\"geopattern\");\nwindow.GeoPattern = GeoPattern;\n// const notifications = [\n//   {\n//     title: \"A new viewer\",\n//     message: \"Your project has been viewed by ..\",\n//     meta: {\n//       createdAt:\n//         \"Fri Aug 16 2019 17:01:39 GMT+0200 (South Africa Standard Time)\"\n//     }\n//   },\n//   {\n//     title: \"A new viewer\",\n//     message: \"Your project has been viewed by ..\",\n//     meta: {\n//       createdAt:\n//         \"Fri Aug 16 2019 17:01:39 GMT+0200 (South Africa Standard Time)\"\n//     }\n//   }\n// ];\n\n// const logoUrl = \"/img/icons8-brain-64.png\";\nconst mainMenuListClass =\n  \"flex flex-auto f6 fw6 black-50 ph3 pv3 bb b--black-05 w5\";\nconst mainMenuListClass2 =\n  \"flex flex-auto f6 fw6 black-50 ph3 pv3 bb b--black-05 w5 bg-black-05\";\nconst profileMenuListClass =\n  \"flex flex-auto f6 fw6 black-50 ph2 pv3 bb b--black-05 w5 pointer\";\nconst profileMenuListClass2 =\n  \"flex flex-auto f6 fw6 bg-black-05 black-30 ph2 pv3 bb b--black-05 w5 pointer\";\n\nconst menuItemClass = \"flex items-center f3 black-20 \";\nconst menuItemTextClass = \"f5 fw6 black ml3\";\n\nconst mainMenu = props => (\n  console.log(\"mainMenu props\", props),\n  (\n    <div className=\"flex flex-column ma0 pa0\">\n      <Link to={\"/dashboard\"} className={mainMenuListClass}>\n        <span className={menuItemClass}>\n          <Icon icon=\"layout-grid\" iconSize={15} />\n          <span className={menuItemTextClass}>Dashboard</span>\n        </span>\n      </Link>\n      <Link to={\"/calendar\"} className={mainMenuListClass}>\n        <span className={menuItemClass}>\n          <Icon icon=\"numerical\" iconSize={15} />{\" \"}\n          <span className={menuItemTextClass}>Calendar</span>\n        </span>\n      </Link>\n      <Link to={\"/network\"} className={mainMenuListClass}>\n        <span className={menuItemClass}>\n          <Icon icon=\"exchange\" iconSize={15} />{\" \"}\n          <span className={menuItemTextClass}>Network</span>\n        </span>\n      </Link>\n\n      <Link to={\"/myprojects\"} className={mainMenuListClass}>\n        <span className={menuItemClass}>\n          <Icon icon=\"grid-view\" iconSize={15} />\n          <span className={menuItemTextClass}>My Projects</span>\n        </span>\n      </Link>\n\n      <Link to={\"/home\"} className={mainMenuListClass}>\n        <span className={menuItemClass}>\n          <Icon icon=\"search\" iconSize={15} />\n          <span className={menuItemTextClass}>Find Projects</span>\n        </span>\n      </Link>\n\n      <Link to={\"/messages\"} className={mainMenuListClass}>\n        <span className={menuItemClass}>\n          <Icon icon=\"chat\" iconSize={15} />\n          <span className={menuItemTextClass}>Messages</span>\n        </span>\n      </Link>\n      <Link to={\"/notifications\"} className={mainMenuListClass}>\n        <span className={menuItemClass}>\n          <Icon icon=\"notifications\" iconSize={15} />{\" \"}\n          <span className={menuItemTextClass}>Notifications</span>\n          <div\n            className=\"  count-badge- f6 br1 -bg-white \"\n            style={{\n              color: \"white\",\n              fontWeight: \"bold\",\n              marginLeft: \"1rem\",\n              background: \"rgb(196, 196, 199)\",\n              padding: \"0.1rem 0.4rem\"\n            }}\n          >\n            <span className=\"bg-white-\">{props.notifications.length}</span>\n          </div>\n        </span>\n      </Link>\n\n      {/* <Link to={\"/settings\"} className={mainMenuListClass}>\n      <span className=\"ml2\"><Icon type=\"unordered-list\"   /> Settings</span>\n\n    </Link> */}\n    </div>\n  )\n);\nconst messageMenu = (\n  <div className=\"flex flex-column ma0 pa0\">\n    {/* \n    <Link to={\"/notifications\"} className={mainMenuListClass}>\n      <span className=\"ml2\"><Icon type=\"info-circle\"   /> Notifications <Badge\n        count={<div className={\"ant-scroll-number ant-badge-count ml2 f8 exo fw6 bg-black-10 black-30\"} >{notifications.length}</div>}\n      >\n\n      </Badge></span>\n    </Link> */}\n    {/* <Link to={\"/messages\"} className={mainMenuListClass}>\n    <span className=\"ml2\"><Icon type=\"mail\"   /> Messages <Badge\n        count={<div className={\"ant-scroll-number ant-badge-count ml2 f8 exo fw6 bg-black-10 black-30\"} >{notifications.length}</div>}\n      >\n\n      </Badge></span>\n\n    </Link> */}\n  </div>\n);\nconst profileMenu = ({ logout, notifications }) => (\n  <div className=\"flex flex-column ma0 pa0\">\n    <Link to={\"/profile\"} className={mainMenuListClass}>\n      <span className={menuItemClass}>\n        <Icon icon=\"user\" iconSize={15} />\n        <span className={menuItemTextClass}>Profile</span>\n      </span>\n    </Link>\n    <Link to={\"/account\"} className={mainMenuListClass}>\n      <span className={menuItemClass}>\n        <Icon icon=\"lock\" iconSize={15} />\n        <span className={menuItemTextClass}>Account</span>\n      </span>\n    </Link>\n\n    {/* <Link to={\"/settings\"} className={profileMenuListClass}>\n      <span className=\"ml2\"><Icon type=\"credit-card\"   /> Account</span>\n    </Link> */}\n    {/* <Link to={\"/notifications\"} className={profileMenuListClass}>\n      <span className=\"ml2\"><Icon type=\"notification\"   /> Notifications</span>\n    </Link> */}\n    <div onClick={() => logout()} className={mainMenuListClass2}>\n      <span className={menuItemClass}>\n        <Icon icon=\"log-out\" iconSize={15} />\n\n        <span className={menuItemTextClass}>Logout</span>\n      </span>\n    </div>\n\n    {/* <div className=\"dn notifications-list rubik f-lex -flex-column f-lex-auto ma0 pa0\">\n      {notifications.map((item, index) => (\n        <div\n          id={index}\n          key={index}\n          className=\"notification-item cursor-pointer flex flex-column flex-auto  \"\n        >\n          <span className=\"notification-title f6 fw5 black-60 ph2 pt2 pb0\">\n            {item.title}\n          </span>\n          <span className=\"notification-message fw4 black-50 ph2\">\n            {item.message}\n          </span>\n          <span className=\"notification-date f7 fw1 black-40 tl ph2 pb1\">\n            {moment(item.meta.createdAt)\n              .startOf(\"hour\")\n              .fromNow()}\n          </span>\n        </div>\n      ))}\n    </div> */}\n  </div>\n);\n\nconst Header = () => {\n  // console.log(\"[[ AccountContext ]]\", AccountContext);\n\n  return (\n    <AccountContext.Consumer>\n      {props => (\n        console.log(\"AccountContext header \", props),\n        console.log(\"isAuthenticated \", props.isAuthenticated),\n        (\n          <header\n            className={\n              \" fixed top-0 left-0 w-100 z-101 bg-black -bg-pink vh12 flex items-center \"\n            }\n          >\n            <div className=\"flex flex-row flex-auto justify-between\">\n              {!props.isAuthenticated && (\n                <div className=\"bb- b--white bw1 flex flex-row flex-auto justify-between vh-50- h-100 ph3\">\n                  <div className=\"flex flex-row  flex-auto ph3 pv3 black-80 fw7 items-center justify-start\">\n                    <Link\n                      to={\"/\"}\n                      className={\n                        \"white flex ph3 ttu pv2 items-center logotext ttu spaced tracked raleway f5 fw8 ba b--white bw1\"\n                      }\n                    >\n                      Crew20\n                    </Link>\n                  </div>\n\n                  <div className=\"flex flex-column items-center justify-center ph3 pv2\">\n                    <button\n                      onClick={props.login}\n                      className={\n                        \"br1 bg-black primary pointer trans-a bn flex flex-row items-center ph3 pv2 relative \"\n                      }\n                    >\n                      <span className=\"ttu f6 fw6 white raleway tracked-03 pv1 \">\n                        Sign In\n                      </span>\n                    </button>\n                  </div>\n\n                  <div className=\"flex flex-column items-center justify-center ph3 pv2\">\n                    <button\n                      onClick={props.register}\n                      className={\n                        \"br1 bg-white primary pointer trans-a bn flex flex-row items-center ph3 pv2 relative \"\n                      }\n                    >\n                      <span className=\"ttu f6 fw6 black raleway tracked-03 pv1 \">\n                        Register\n                      </span>\n                    </button>\n                  </div>\n                </div>\n              )}\n\n              {props.isAuthenticated && (\n                <>\n                  <div className=\"flex flex-row  flex-auto ph3 pv3 black-80 fw7 items-center justify-start\">\n                    <Link\n                      to={\"/home\"}\n                      className={\n                        \"white flex ph3 ttu pv2 items-center logotext ttu spaced tracked raleway  f4 fw8 ba b--white bw1\"\n                      }\n                    >\n                      Crew20\n                    </Link>\n                  </div>\n\n                  {!props.account && props.account.user && props.account.user.profile && props.account.user.profile.confirmed && (\n                    <div className=\"flex flex-column items-center justify-center ph3 pv2\">\n                      <button\n                        onClick={props.logout}\n                        className=\"br1 bg-black primary pointer trans-a bn flex flex-row items-center ph3 pv2 relative \"\n                      >\n                        <span className=\"ttu f6 fw6 white raleway tracked-03 pv1 \">\n                          Logout\n                        </span>\n                      </button>\n                    </div>\n                  )}\n\n                  {props.account.user.profile.confirmed && (\n                    <div className=\"flex flex-column  f6 fw7 \">\n                      <nav className=\"flex flex-row flex-auto flex-wrap w-100\">\n                        <section className=\"profile-button flex flex-column flex-auto- items-center justify-center pv3 pl0-ns pr0-ns pr0\">\n                          <span\n                            className=\"profile-widget flex items-center justify-center\"\n                            // style={{ marginRight: 24 }}\n                          >\n                            <Popover\n                              content={profileMenu({\n                                logout: props.logout,\n                                notifications: props.notifications || []\n                              })}\n                              placement=\"bottomRight\"\n                              trigger=\"hover\"\n                              className=\"flex flex-row items-center pointer\"\n                            >\n                              <div className=\"flex\">\n                                <span className=\"f5 fw6 white mr3 visible-ns hidden-sm\">\n                                  {props.account.user.profile &&\n                                    props.account.user.profile.name.first}{\" \"}\n                                  {props.account.user.profile &&\n                                    props.account.user.profile.name.last}\n                                </span>\n                                <Avatar\n                                  size=\"large\"\n                                  shape=\"round\"\n                                  className={\"bg-center bg-cover \"}\n                                  style={{\n                                    color: \"white\",\n                                    backgroundImage: props.account.user.profile\n                                      .picture.length\n                                      ? \"url(\" +\n                                        props.account.user.profile.picture +\n                                        \")\"\n                                      : GeoPattern.generate(\n                                          props.account.user.profile.name\n                                            .first +\n                                            props.account.user.profile.name.last\n                                        ).toDataUrl()\n                                  }}\n                                />\n                              </div>\n                            </Popover>\n                          </span>\n                        </section>\n                        <section\n                          id=\"nav\"\n                          className={\n                            \" flex flex-auto- flex-column items-end justify-center raleway pv3 pl3 pr4 pl4-ns pr4-ns f3\"\n                          }\n                        >\n                          <Popover\n                            content={mainMenu({\n                              logout: props.logout,\n                              notifications: props.notifications || []\n                            })}\n                            placement=\"bottomLeft\"\n                            trigger=\"hover\"\n                            className=\"flex flex-column items-center\"\n                          >\n                            <span\n                              className=\"flex items-center justify-center\"\n                              style={{ fontSize: \"20px\" }}\n                            >\n                              <Icon\n                                icon=\"ring\"\n                                iconSize={20}\n                                className={\" white pointer\"}\n                              />\n                            </span>\n                            <span className=\"dn f7 fw5 black-30- white pointer\">\n                              Menu\n                            </span>\n                          </Popover>\n                        </section>\n                      </nav>\n                    </div>\n                  )}\n                </>\n              )}\n            </div>\n          </header>\n        )\n      )}\n    </AccountContext.Consumer>\n  );\n};\n\nexport default Header;\n// Header.contextType = AccountContext;\n","import React from \"react\";\n// import { useAuth0 } from \"../../../utils/auth/react-auth0-spa\";\nimport { BrowserRouter, Link } from \"react-router-dom\";\nimport moment from \"moment\";\nimport { Avatar, Badge } from \"antd\";\n// import { Popover, NavBar } from 'antd-mobile';\nimport { Menu, ActivityIndicator, NavBar } from 'antd-mobile';\nimport { Icon } from '@blueprintjs/core'\n\n// import SelectCurrency from '../display/lists/SelectCurrency';\nimport AccountContext from '../../../utils/context/AccountContext';\n\n// const Item = Popover.Item;\nconst notifications = [];\nconst data = [\n  {\n    value: '1',\n    label: 'Food',\n  }, {\n    value: '2',\n    label: 'Supermarket',\n  },\n  {\n    value: '3',\n    label: 'Extra',\n    isLeaf: true,\n  },\n];\n\nconst myImg = src => <img src={`https://gw.alipayobjects.com/zos/rmsportal/${src}.svg`} className=\"am-icon am-icon-xs\" alt=\"\" />;\n\nconst mainMenuListClass =\n  \"flex flex-auto- f6 fw6 black-50 ph3 pv4 bb b--black-05 w5 w-100\";\nconst profileMenuListClass =\n  \"flex flex-auto f6 fw6 black-50 ph2 pv3 bb b--black-05 w5 pointer\";\nconst profileMenuListClass2 =\n  \"flex flex-auto f6 fw6 bg-black-05 black-30 ph2 pv3 bb b--black-05 w5 pointer\";\nconst mainMenu = (props) => (\n  <div onClick={props.close} className=\"mh-90vh oveflow-scroll- flex flex-column ma0 pa0 w-100 bg-white z-99\">\n\n    <div className=\"flex flex-row  bg-black-10 pv4 ph3 items-center justify-start\">\n\n      <div\n        // size=\"large\"\n        // shape=\"round\"\n        className={\"bg-center bg-cover \"}\n        style={{ width: '60px', height: '60px', borderRadius: '100px', color: 'black', backgroundImage: 'url(\"' + props.context.account.user.profile.picture + '\")' }} />\n\n      <span className=\"f4 fw6 black ml3\">{props.context.account.user.profile && props.context.account.user.profile.name.first}{\" \"}{props.context.account.user.profile && props.context.account.user.profile.name.last}</span>\n\n    </div>\n\n    <Link to={\"/profile\"} className={mainMenuListClass}>\n      <span className=\"ml2\"><Icon icon=\"home\" iconSize={15} className=\"f7 black-20 mr2\" /> Profile</span>\n    </Link>\n\n    <Link to={\"/home\"} className={mainMenuListClass}>\n      <span className=\"ml2\"><Icon icon=\"projects\" iconSize={15} className=\"f7 black-20 mr2\" /> Projects</span>\n    </Link>\n\n    <Link to={\"/messages\"} className={mainMenuListClass}>\n      <span className=\"ml2\"><Icon icon=\"chat\" iconSize={15} className=\"f7 black-30 mr2\" /> Messages</span>\n    </Link>\n\n    {/* <Link to={\"/network\"} className={mainMenuListClass}>\n      <span className=\"ml2\"><Icon icon=\"exchange\" iconSize={15} className=\"f7 black-30 mr2\" /> Network</span>\n    </Link> */}\n\n    <Link to={\"/calendar\"} className={mainMenuListClass}>\n      <span className=\"ml2\"><Icon icon=\"timeline-events\" iconSize={15} className=\"f7 black-30 mr2\" /> Calendar</span>\n    </Link>\n\n    <Link to={\"/myprojects\"} className={mainMenuListClass}>\n      <span className=\"ml2\"><Icon icon=\"projects\" iconSize={15} className=\"f7 black-30 mr2\" /> My Projects</span>\n    </Link>\n\n    {/* <Link to={\"/settings\"} className={mainMenuListClass}>\n      <span className=\"ml2\"><Icon type=\"unordered-list\" className=\"f7 black-30 mr2\" /> Settings</span>\n\n    </Link> */}\n  </div>\n)\n\nclass HeaderMobile extends React.Component {\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      visible: false,\n      selected: '',\n      show: false,\n      initData: '',\n    };\n\n    this.toggleMenu = this.toggleMenu.bind(this)\n    this.onMaskClick = this.onMaskClick.bind(this)\n  }\n\n  onSelect = (opt) => {\n    // console.log(opt.props.value);\n    this.setState({\n      visible: false,\n      selected: opt.props.value,\n    });\n  };\n  handleVisibleChange = (visible) => {\n    this.setState({\n      visible,\n    });\n  };\n  toggleMenu(e) {\n    e.preventDefault(); // Fix event propagation on Android\n    this.setState({\n      show: !this.state.show,\n    });\n    // mock for async data loading\n    if (!this.state.initData) {\n      setTimeout(() => {\n        this.setState({\n          initData: data,\n        });\n      }, 500);\n    }\n  }\n  onMaskClick = () => {\n    this.setState({\n      show: false,\n    });\n  }\n  render() {\n\n    const { initData, show } = this.state;\n\n    const menuEl = (\n      <Menu\n        className=\"single-foo-menu top-10vh \"\n        data={initData}\n        value={['1']}\n        level={1}\n        onChange={this.onChange}\n        height={document.documentElement.clientHeight * 0.6}\n      />\n    );\n    const loadingEl = (\n      <div style={{ position: 'absolute', width: '100%', height: document.documentElement.clientHeight * 0.6, display: 'flex', justifyContent: 'center' }}>\n        <ActivityIndicator size=\"large\" />\n      </div>\n    );\n\n    return (\n      <div id=\"Header-Mobile\" className=\"flex flex-row fixed top-0 left-0 w-100 z-999\">\n\n        <div className={show ? ' single-menu-active flex w-100 flex-column ' : ' flex w-100 flex-column '}>\n          <div className=\"flex w-100 flex-column\">\n            <NavBar\n              rightContent={<div className=\"flex flex-row row-reverse flex-auto ph3 pv3 black-80 fw7 items-center justify-start\">\n\n                <div\n                  className={\n\n                    \"white flex ph3 ttu pv2 items-center logotext ttu spaced tracked raleway fw6 ba b--white bw1\"\n                  }\n                >\n                  Crew20\n</div>\n\n              </div>}\n              leftContent={<Icon icon='menu' iconSize={20} />}\n              mode=\"light\"\n              onLeftClick={this.toggleMenu}\n              // onRightClick={this.props.history.push('/home')}\n              className=\"single-top-nav-bar row-reverse w-100 flex\"\n            >\n\n            </NavBar>\n          </div>\n          {show ? initData ? mainMenu({ context: this.context, close: this.onMaskClick }) : loadingEl : null}\n          {show ? <div className=\"menu-mask\" onClick={this.onMaskClick} /> : null}\n        </div >\n\n      </div >);\n  }\n}\nexport default HeaderMobile\nHeaderMobile.contextType = AccountContext","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Popover, Icon } from \"antd\";\n\nimport themeColors from \"../../../utils/themes\";\n\nconst itemClasses = \"flex pl2 pt2 pb2 cursor-pointer trans-a\";\nconst themeMenu = props => (\n  (\n    <div className=\"flex flex-column\">\n      <div className=\"flex flex-row bb b--black-05\">\n        <div\n          onClick={() =>\n            props.switchTheme({ main: \"light\", colorScheme: props.theme.colorScheme })\n          }\n          className=\"theme-selection-dl flex flex-auto cursor-pointer\"\n        >\n          <span className=\"f7 fw6 black-70 pa1 tc w-100\">light</span>\n        </div>\n        <div\n          onClick={() =>\n            props.switchTheme({ main: \"dark\", colorScheme: props.theme.colorScheme })\n          }\n          className=\"theme-selection-dl flex flex-auto bg-black-70 cursor-pointer\"\n        >\n          <span className=\"f7 fw6 white-70 pa1 tc w-100\">dark</span>\n        </div>\n      </div>\n      <div className=\"flex flex-row ma0 pa0 pr2\">\n        {themeColors().map((item, index) => (\n          <div\n            key={index}\n            onClick={() =>\n              props.switchTheme({ main: props.theme.main, colorScheme: item })\n            }\n            className={itemClasses}\n          >\n            <span className=\"ml2-\">\n              <div className={\"theme-selection-icon  \" + item.bg} />\n            </span>\n          </div>\n        ))}\n      </div>\n    </div>\n  )\n)\n\nconst Footer = props => {\n  return (\n    <footer className=\"vh-10 fixed bottom-0 left-0 w-100 bg-white z-9 bt b--black-05\">\n      <div className=\"flex flex-row flex-auto\">\n        <div className=\"flex flex-column flex-auto w-100 black-80 fw7\">\n          <span className=\"copyright f7 fw1 black-40 ph3 pv3\">\n            &copy; 2019 Crew20.com. All Rights Reserved.\n          </span>\n        </div>\n        <div className=\"flex flex-column flex-auto w-100 black-80 fw7\">\n          <nav className=\"flex flex-row flex-auto items-center justify-end w-100\">\n            {/* <div className=\"nav-item flex ph3 pv3\">\n              <Popover\n                content={themeMenu(props)}\n                placement=\"top\"\n                trigger=\"click\"\n                className=\"flex flex-column items-center\"\n              >\n                <span\n                  className=\"black-40 f7 flex flex-row\"\n                >\n                  <Icon type=\"eye\" />\n                  <span className=\"pl2\">Switch Theme</span>\n                </span>\n              </Popover>\n            </div> */}\n            <div className=\"nav-item flex ph3 pv3\">\n              <Link className=\"black-40 f7\" to=\"/privacy-policy\">\n                Privacy Policy\n              </Link>\n            </div>\n            <div className=\"nav-item flex ph3 pv3\">\n              <Link className=\"black-40 f7\" to=\"/contact\">\n                Contact Us\n              </Link>\n            </div>\n            <div className=\"nav-item flex ph3 pv3\">\n              <Link className=\"black-40 f7\" to=\"/help\">\n                Help\n              </Link>\n            </div>\n            <div className=\"nav-item flex ph3 pv3\">\n              <Link className=\"black-40 f7\" to=\"/settings\">\n                Settings\n              </Link>\n            </div>\n            <div className=\"nav-item flex ph3 pv3\">\n              <Link className=\"black-40 f7\" to=\"/settings\">\n                Sign In\n              </Link>\n            </div>\n\n          </nav>\n        </div>\n      </div>\n    </footer>\n  );\n};\n\nexport default Footer;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Popover, Drawer } from \"antd\";\nimport { Icon } from '@blueprintjs/core';\n\nimport themeColors from \"../../../utils/themes\";\n\nconst itemClasses = \"flex pl2 pt2 pb2 cursor-pointer trans-a\";\nconst themeMenu = props => (\n  (\n    <div className=\"flex flex-column\">\n      <div className=\"flex flex-row bb b--black-05\">\n        <div\n          onClick={() =>\n            props.switchTheme({ main: \"light\", colorScheme: props.theme.colorScheme })\n          }\n          className=\"theme-selection-dl flex flex-auto cursor-pointer\"\n        >\n          <span className=\"f7 fw6 black-70 pa1 tc w-100\">light</span>\n        </div>\n        <div\n          onClick={() =>\n            props.switchTheme({ main: \"dark\", colorScheme: props.theme.colorScheme })\n          }\n          className=\"theme-selection-dl flex flex-auto bg-black-70 cursor-pointer\"\n        >\n          <span className=\"f7 fw6 white-70 pa1 tc w-100\">dark</span>\n        </div>\n      </div>\n      <div className=\"flex flex-row ma0 pa0 pr2\">\n        {themeColors().map((item, index) => (\n          <div\n            key={index}\n            onClick={() =>\n              props.switchTheme({ main: props.theme.main, colorScheme: item })\n            }\n            className={itemClasses}\n          >\n            <span className=\"ml2-\">\n              <div className={\"theme-selection-icon  \" + item.bg} />\n            </span>\n          </div>\n        ))}\n      </div>\n    </div>\n  )\n)\n\nclass Footer extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isOpen: false\n    }\n    this.toggleDrawer = this.toggleDrawer.bind(this)\n\n  }\n  toggleDrawer() {\n    this.setState({\n      isOpen: !this.state.isOpen\n    })\n  }\n  render() {\n    return (\n      <footer className=\"vh-10 fixed bottom-0 left-0 w-100 bg-white z-9 bt b--black-05\">\n        <div className=\"flex flex-row flex-auto\">\n          <div className=\"flex flex-column flex-auto w-100 black-80 fw7\">\n            <span className=\"copyright f7 fw1 black-40 ph3 pv3\">\n              &copy; 2019 Crew20.com\n          </span>\n          </div>\n          <div className=\"flex flex-column flex-auto w-100 black-80 fw7 items-end justify-center ph3\">\n\n            <Icon\n              onClick={this.toggleDrawer}\n              icon=\"help\" iconSize=\"20\" className=\"black-50\" />\n\n          </div>\n        </div>\n\n        <Drawer\n          // title={\"Resources\"}\n          placement={\"bottom\"}\n          closable={true}\n          onClose={this.toggleDrawer}\n          width={500}\n          height={350}\n          visible={this.state.isOpen}\n          // doc={this.props.project}\n          className={\"CrewList -bg-near-white\"}\n        // style={{ height: 500 }}\n        >\n          <div className=\"flex flex-column mb2 pa4- \">\n            {/* <div className=\"ProjectScenesHeading pt0\">\n                            <h3 className=\"f6 fw3 black-30 mb3\">Crew List</h3>\n                          </div> */}\n\n            <div className=\"flex flex-auto flex-column pb0 \">\n              <div className=\"flex flex-column flex-auto w-100 black-80 fw7\">\n                <nav className=\"flex flex-column flex-auto items-center justify-end w-100\">\n                  {/* <div className=\"nav-item flex ph3 pv3\">\n              <Popover\n                content={themeMenu(props)}\n                placement=\"top\"\n                trigger=\"click\"\n                className=\"flex flex-column items-center\"\n              >\n                <span\n                  className=\"black-40 f7 flex flex-row\"\n                >\n                  <Icon type=\"eye\" />\n                  <span className=\"pl2\">Switch Theme</span>\n                </span>\n              </Popover>\n            </div> */}\n                  <div className=\"nav-item flex ph3 pv3 bb b--black-05 w-100\">\n                    <Link className=\"black-40 f6\" to=\"/privacy-policy\">\n                      Privacy Policy\n              </Link>\n                  </div>\n                  <div className=\"nav-item flex ph3 pv3 bb b--black-05 w-100\">\n                    <Link className=\"black-40 f6\" to=\"/contact\">\n                      Contact Us\n              </Link>\n                  </div>\n                  <div className=\"nav-item flex ph3 pv3 bb b--black-05 w-100\">\n                    <Link className=\"black-40 f6\" to=\"/help\">\n                      Help\n              </Link>\n                  </div>\n                  <div className=\"nav-item flex ph3 pv3 bb b--black-05 w-100\">\n                    <Link className=\"black-40 f6\" to=\"/settings\">\n                      Settings\n              </Link>\n                  </div>\n                  <div className=\"nav-item flex ph3 pv3 bb b--black-05 w-100\">\n                    <Link className=\"black-40 f6\" to=\"/settings\">\n                      Sign In\n              </Link>\n                  </div>\n\n                </nav>\n              </div>\n            </div>\n          </div>\n        </Drawer>\n\n      </footer>\n    )\n  }\n}\n\nexport default Footer;\n","import React from 'react'\n\nconst CurrencyContext = React.createContext({})\n\nexport const CurrencyProvider = CurrencyContext.Provider\nexport const CurrencyConsumer = CurrencyContext.Consumer\nexport default CurrencyContext","import React, { useState, useEffect, useContext } from \"react\";\nimport { setGlobal } from 'reactn';\nimport createAuth0Client from \"@auth0/auth0-spa-js\";\n// import { setGlobalCssModule } from \"reactstrap/lib/utils\";\nimport methods from '../methods';\n// var db_;\n// window.db_ = db_;\n// const {\n//   Stitch,\n//   RemoteMongoClient,\n//   AnonymousCredential,\n//   UserPasswordCredential,\n//   GoogleRedirectCredential\n// } = require('mongodb-stitch-browser-sdk');\n\n// const appId = 'homechef-xxfod';\n// const client = Stitch.initializeDefaultAppClient('homechef-xxfod')\n// window.stitchclient = client;\n\nconst DEFAULT_REDIRECT_CALLBACK = () =>\n  window.history.replaceState({}, document.title, window.location.pathname);\n\nexport const Auth0Context = React.createContext();\nexport const useAuth0 = () => useContext(Auth0Context);\nexport const Auth0Provider = ({\n  children,\n  onRedirectCallback = DEFAULT_REDIRECT_CALLBACK,\n  ...initOptions\n}) => {\n  const [isAuthenticated, setIsAuthenticated] = useState();\n  const [user, setUser] = useState();\n  const [auth0Client, setAuth0] = useState();\n  const [loading, setLoading] = useState(true);\n  const [popupOpen, setPopupOpen] = useState(false);\n\n  useEffect(() => {\n    const initAuth0 = async () => {\n      const auth0FromHook = await createAuth0Client(initOptions);\n      setAuth0(auth0FromHook);\n\n      if (window.location.search.includes(\"code=\")) {\n        const { appState } = await auth0FromHook.handleRedirectCallback();\n        onRedirectCallback(appState);\n      }\n\n      const isAuthenticated = await auth0FromHook.isAuthenticated();\n\n      setIsAuthenticated(isAuthenticated);\n\n      if (isAuthenticated) {\n        const user = await auth0FromHook.getUser();\n        setUser(user);\n      }\n\n      setLoading(false);\n    };\n    initAuth0();\n    // eslint-disable-next-line\n  }, []);\n\n  const loginWithPopup = async (params = {}) => {\n    setPopupOpen(true);\n    try {\n      await auth0Client.loginWithPopup(params);\n    } catch (error) {\n      console.error(error);\n    } finally {\n      setPopupOpen(false);\n    }\n    const user = await auth0Client.getUser();\n    setUser(user);\n    setIsAuthenticated(true);\n  \n    if (user) {\n      \n      console.log(' ');\n      console.log('[[ loginWithPopup : User ]]', user)\n      console.log(' ');\n    //   let credential = new GoogleRedirectCredential()\n    //   client.auth.loginWithRedirect(credential)\n    //   window.db_ = client.getServiceClient(RemoteMongoClient.factory, 'mongodb-atlas').db('HomeChef');\n    // console.log('db',db_)\n      // localStorage.setItem('account', JSON.stringify(user));\n      // setGlobal({ account: user })\n      // const userExtended = { ...user };\n      return methods.extendUser({ user })\n    }\n  }\n  // const loginWithPopup = async (params = {}) => {\n  //   setPopupOpen(true);\n  //   try {\n  //     await auth0Client.loginWithPopup(params);\n  //   } catch (error) {\n  //     console.error(error);\n  //   } finally {\n  //     setPopupOpen(false);\n  //   }\n  //   const user = await auth0Client.getUser();\n  //   setUser(user);\n  //   setIsAuthenticated(true);\n  //   return methods.extendUser({ user })\n  // };\n  const handleRedirectCallback = async () => {\n    setLoading(true);\n    await auth0Client.handleRedirectCallback();\n    const user = await auth0Client.getUser();\n    setLoading(false);\n    setIsAuthenticated(true);\n    setUser(user);\n\n\n    // const isAuthed = client.auth.isLoggedIn;\n    // const credential = new GoogleRedirectCredential();\n    // client.auth.loginWithRedirect(credential);\n    // window.db_ = client.getServiceClient(RemoteMongoClient.factory, 'mongodb-atlas').db('HomeChef');\n    //     console.log('db',db_)\n    // if (client.auth.hasRedirectResult()) {\n    //   client.auth.handleRedirectResult().then(user => {\n    //     this.setState({ isAuthed: this.client.auth.isLoggedIn })\n    //     window.db_ = client.getServiceClient(RemoteMongoClient.factory, 'mongodb-atlas').db('HomeChef');\n    //     console.log('db',db_)\n    //   })\n    // }\n\n  }\n  return (\n    <Auth0Context.Provider\n      value={{\n        isAuthenticated,\n        user,\n        loading,\n        popupOpen,\n        loginWithPopup,\n        handleRedirectCallback,\n        getIdTokenClaims: (...p) => auth0Client.getIdTokenClaims(...p),\n        loginWithRedirect: (...p) => auth0Client.loginWithRedirect(...p),\n        getTokenSilently: (...p) => auth0Client.getTokenSilently(...p),\n        getTokenWithPopup: (...p) => auth0Client.getTokenWithPopup(...p),\n        logout: (...p) => auth0Client.logout(...p)\n      }}\n    >\n      {children}\n    </Auth0Context.Provider>\n  )\n}\n\n\n","export const classes = {};\nexport const formClassnames = {\n    formLabel: () => {\n        return \"f4 fw4 black-20 tl mr4 w-30\"\n    },\n    formLabel1: () => { return \"f4 fw4 black-20 tl mr4 w-30\" },\n    formInput: () => {\n        return \"flex flex-column ph4 pv3 bn round black-50 f4 fw5 w-100\"\n    },\n    formInputDateRange: () => {\n        return \"flex flex-column ph4 bn round black-50 f4 fw5 w-100\"\n    },\n    formRow: () => {\n        return \"form-row flex flex-row items-center pt4 w-100\"\n    },\n    button: () => {\n        return \"br1- round bs-b bg-black-20 ph3 pv2 pointer bn relative  \"\n    },\n    buttonSpan: () => {\n        return \"f4 fw5 white pv2 flex items-center justify-center\"\n    },\n    formTitle: () => {\n        return \"f4 fw6 black-90 pb3\"\n    },\n    formButtonWrapper: () => {\n        return \"Buttons flex flex-row justify-between center w-100\"\n    },\n    formButtonWrapperInner: () => {\n        return \"flex flex-column w-100 pa4 bg-white\"\n    },\n    loginv2: () => {\n        return \"bg-white bs-b hover-bg-black-10 br3- -round tc w-100 pointer flex button flex-column ph3 pv3 ba- -b--black-10 f4 fw6 white- black -black-50 hover-scale-1 trans-a\"\n    },\n    inputSquare: () => {\n        return \"flex w-100 mb3- bn br2 pa3 black-50 f4 fw5 bs-b\"\n    },\n    inputRound: () => {\n        return \"flex w-100 mb3- bn round pa3 black-50 f4 fw5 bs-b\"\n    }\n}\nexport default formClassnames","// @flow\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { formClassnames } from '../../../utils/ui/classses.js';\n\n\n// bg-white bs-b hover-bg-black-10 br3 -round tc w-100 pointer flex button flex-column ph3 pv3 ba- -b--black-10 f4 fw6 white- black -black-50 hover-scale-1 trans-a\n\nclass FormLogin extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      hasError: false,\n      demoUser: {\n        email: \"demo@example.com\",\n        password: \"password1\"\n      },\n      buttonLoading: false\n    };\n\n    this.email = React.createContext();\n    this.password = React.createContext();\n\n    this.submit = this.submit.bind(this);\n  }\n\n  submit() {\n\n    this.setState({\n      buttonLoading: true\n    })\n    \n    console.log(\n      \"[[ Login values ]]\",\n      this.password.current.value,\n      this.email.current.value\n    )\n\n    this.props.submitLoginForm({\n      type: this.props.type,\n      email: this.email.current.value,\n      password: this.password.current.value\n    })\n    \n\n    // this.props.submitLogin()\n    // console.log(this.bio.current.value)\n  }\n\n  componentDidMount = () => {\n    console.log(\" \");\n    console.log(\" \");\n    console.log(\"Login Form mounted\", this.props);\n    console.log(\" \");\n  };\n\n  static getDerivedStateFromError(error) {\n    // getDerivedStateFromError -> Update state so the next render will show the fallback UI.\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, info) {\n    // You can also log the error to an error reporting service\n  }\n\n  getDerivedStateFromProps = (nextProps, prevState) => {\n    // console.log('FormBio getDerivedStateFromProps', nextProps, prevState);\n  };\n\n  getSnapshotBeforeUpdate = (prevProps, prevState) => {\n    // console.log('FormBio getSnapshotBeforeUpdate', prevProps, prevState);\n  };\n\n  componentDidUpdate = () => {\n    // console.log('FormBio did update');\n  };\n\n  componentWillUnmount = () => {\n    // console.log('FormBio will unmount');\n  };\n\n  render() {\n    if (this.state.hasError) {\n      return <h1>Something went wrong.</h1>;\n    }\n\n    return (\n      <div id=\"form-login-wrapper\" className=\"flex flex-column w-100 mw5-\">\n        <div className=\"flex-column flex w-100 ph5 pt5 pb4\">\n          <div className=\" flex flex-row items-center w-100 mb4\">\n            <label className=\"f5 fw5 black-30 pb2- w-30 pr3 \">Email</label>\n\n            <input\n              type={\"email\"}\n              // placeholder={''}\n              ref={this.email}\n              defaultValue={this.state.demoUser.email}\n              className={ formClassnames.inputSquare() }\n            />\n          </div>\n\n          <div className=\" flex flex-row items-center w-100 mb4 \">\n            <label className=\"f5 fw5 black-30 pb2- w-30 pr3 \">Password</label>\n\n            <input\n              type={\"password\"}\n              // placeholder={''}\n              ref={this.password}\n              defaultValue={this.state.demoUser.password}\n              className={ formClassnames.inputSquare() }\n            />\n          </div>\n\n          \n        </div>\n        <div className=\" flex w-100 bt b--black-05\">\n            {this.props.dialogType === \"login\" && (\n              <div\n                onClick={this.props.setDialogToRegister}\n                className=\"pointer flex flex-row black-40 f5 fw4 pt3 ph5 pv3 justify-center tc items-center w-100\"\n              >\n                Don't have an account?{\" \"}\n                <span className=\"black-40 fw6 ml2\">Register</span>\n              </div>\n            )}\n\n            {this.props.dialogType === \"register\" && (\n              <div\n                onClick={this.props.setDialogToLogin}\n                className=\"pointer flex flex-row black-40 f5 fw4 pt3 ph5 pv3 justify-center tc items-center w-100\"\n              >\n                Already have an account?{\" \"}\n                <span className=\"black-40 fw6 ml2\">Sign In</span>\n              </div>\n            )}\n          </div>\n        <div className={\"form-row ttc flex w-100 bg-white ph4 pv4 bs-b \" + formClassnames.loginv2()}>\n          <div\n            onClick={this.submit}\n            className={ \"\" }\n            // className=\"bg-black-20 hover-bg-black-10 round tc w-100 pointer flex button flex-column ph3 pv3 ba- -b--black-10 f4 fw6 white -black-50\"\n          >\n            {this.state.buttonLoading && (\n              <div className=\"flex flex-column justify-center items-center pv2 ph4\">\n                {/* <Spinner size={25} /> */}\n                <div className=\"sp sp-3balls\"></div>\n              </div>\n            )}\n\n            {!this.state.buttonLoading && this.props.dialogType}\n          </div>\n        </div>\n\n        {/* <div className=\"form-row flex w-100 bg-white ph4 pv4 bs-b\">\n          <div\n            onClick={this.submit}\n            className=\"bg-black round tc w-100 pointer flex button flex-column ph3 pv3 ba- -b--black-10 f4 fw6 white -black-50\"\n          >\n            Submit\n          </div>\n        </div> */}\n      </div>\n    );\n  }\n}\n\nexport default FormLogin;\n","const constants = {};\n\nconstants.placeholderImage =\n\t\"http://cdn.shopify.com/s/files/1/2278/2351/products/W1151_GeometricPattern3_1024x1024.jpg?v=1510704914\";\n\nconstants.api = {};\n\nconstants.api.findCity = (lat, long) => {\n\treturn (\n\t\t\"https://reverse.geocoder.api.here.com/6.2/reversegeocode.json?prox=\" +\n\t\tlat +\n\t\t\",\" +\n\t\tlong +\n\t\t\",250&mode=retrieveAddresses&maxresults=1&gen=9&app_id=ZZN2MPuexLyuz3VR0KDD&app_code=TnEsVJR8k3zxGMiAkbP_EQ\"\n\t);\n};\nconstants.api.base2 = () => {\n\treturn \"https://api.crew20.devcolab.site/v1/\";\n};\nconstants.api.base = () => {\n\treturn \"https://api.crew.quantacom.co/v1/\";\n};\n\nexport default constants;\n","// @flow\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { formClassnames } from '../../../utils/ui/classses.js';\n\nclass FormLogin extends React.Component {\n  constructor(props) {\n\n    super(props)\n\n    this.state = {\n      hasError: false,\n      demoUser: {\n        email: 'demo@example.com',\n        password: 'password1',\n        // name: \"DemoUser\"\n      }\n    }\n\n    this.email = React.createContext()\n    this.password = React.createContext()\n    this.name = React.createContext()\n\n    this.submit = this.submit.bind(this)\n  }\n\n  submit() {\n    console.log('[[ Login values ]]', this.password.current.value, this.email.current.value)\n    // this.props.submitLogin()\n    // console.log(this.bio.current.value)\n  }\n\n  componentDidMount = () => {\n    console.log('FormBio mounted');\n  }\n\n  static getDerivedStateFromError(error) {\n    // getDerivedStateFromError -> Update state so the next render will show the fallback UI.\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, info) {\n    // You can also log the error to an error reporting service\n  }\n\n  getDerivedStateFromProps = (nextProps, prevState) => {\n    console.log('FormBio getDerivedStateFromProps', nextProps, prevState);\n  }\n\n  getSnapshotBeforeUpdate = (prevProps, prevState) => {\n    console.log('FormBio getSnapshotBeforeUpdate', prevProps, prevState);\n  }\n\n  componentDidUpdate = () => {\n    console.log('FormBio did update');\n  }\n\n  componentWillUnmount = () => {\n    console.log('FormBio will unmount');\n  }\n\n  render() {\n\n    if (this.state.hasError) {\n\n      return <h1>Something went wrong.</h1>\n\n    }\n\n    return (\n      <div className=\"FormBio-wrapper\" className=\"flex flex-column w-100\">\n\n      <div className=\"flex-column flex w-100 ph5 pt5 pb4 \">\n\n        <div className=\" flex flex-row items-center w-100 mb4 \">\n\n          <label className=\"f5 fw5 black-30 pb2- w-30 pr3\">Email</label>\n\n          <input\n            type={'email'}\n            // placeholder={''}\n            ref={this.email}\n            defaultValue={this.state.demoUser.email}\n            className={ formClassnames.inputSquare() } />\n\n        </div>\n\n        <div className=\" flex flex-row items-center w-100 mb4 \">\n\n          <label className=\"f5 fw5 black-30 pb2- w-30 pr3\">Password</label>\n\n          <input\n            type={'password'}\n            // placeholder={''}\n            ref={this.password}\n            defaultValue={this.state.demoUser.password}\n            className={ formClassnames.inputSquare() } />\n\n        </div>\n\n\n      </div>\n        <div className=\" flex w-100b bt b--black-05\">\n\n          {\n            this.props.dialogType === \"login\" &&\n            <div\n              onClick={this.props.setDialogToRegister}\n              className=\"pointer flex flex-row black-40 f5 fw4 pt3 ph5 pv3 justify-center tc items-center w-100\">\n              Don't have an account? <span className=\"black-40 fw6 ml2\">Register</span>\n            </div>\n          }\n\n          {\n            this.props.dialogType === \"register\" &&\n            <div\n              onClick={this.props.setDialogToLogin}\n              className=\"pointer flex flex-row black-40 f5 fw4 pt3 ph5 pv3 justify-center tc items-center w-100\">\n             Already have an account? <span className=\"black-40 fw6 ml2\">Sign In</span>\n            </div>\n          }\n\n        </div>\n\n      <div className={ ( \" form-row flex w-100 bg-white ph4 pv4 bs-b \" ) + formClassnames.loginv2() } >\n\n        <div\n          onClick={() => this.props.submitRegisterForm({\n            email: this.email.current.value,\n            password: this.password.current.value,\n          })}\n          className=\"\">\n            { !this.props.submitLoading && this.props.dialogType }\n           {\n             this.props.submitLoading && \n           \n            <div className=\"pv2\">\n                                                <div className=\"sp sp-3balls\"></div>\n                                              </div>\n                                              }\n            </div>\n\n      </div>\n\n    </div>\n    \n    );\n  }\n}\n\n\n\nexport default FormLogin;","import constants from \"./constants\";\nimport util from './__';\n\nexport const ___ = {\n  constants: () => {\n    return constants\n  },\n  getGeolocation: async __ => {\n    \n    /**\n     *\n     *\n     * @memberof App\n     */\n    \n     const { self } = __;\n\n    const setPosition = data => {\n      self.setState({\n        lat: data.coords.latitude,\n        long: data.coords.longitude\n      });\n      console.log(\"[[ Retrieving Geolocation Data ]]\", JSON.stringify(data));\n      return self.findCity();\n    };\n    window.navigator.geolocation.getCurrentPosition(setPosition);\n  },\n  findCity: async __ => {\n    \n    /**\n     *\n     *\n     * @memberof App\n     */\n\n    return new Promise(async resolve => {\n      const { self } = __;\n      console.log(\"[[ Retrieving City Data ]]\");\n      // let url = \"https://reverse.geocoder.api.here.com/6.2/reversegeocode.json?prox=\" + self.state.lat + \",\" + self.state.long + \",250&mode=retrieveAddresses&maxresults=1&gen=9&app_id=ZZN2MPuexLyuz3VR0KDD&app_code=TnEsVJR8k3zxGMiAkbP_EQ\";\n      let url = constants.api.findCity(self.state.lat, self.state.long);\n\n      fetch(url, (e, r) => {\n        return r;\n      })\n        .then(res => {\n          return res.json();\n        })\n\n        .then(res => {\n          console.log(\"Geo \", res);\n\n          let data =\n            res.Response.View[0].Result[0].Location.Address.AdditionalData;\n\n          for (let item of data) {\n            if (item.key === \"CountryName\") {\n              self.setState({ country: item.value, countrySet: true });\n            }\n          }\n          self.setState({\n            city: res.Response.View[0].Result[0].Location.Address.County,\n            suburb: res.Response.View[0].Result[0].Location.Address.District,\n            province: res.Response.View[0].Result[0].Location.Address.State,\n            searchFormReady: true,\n            location: res.Response.View[0].Result[0].Location.Address,\n            locationIsSet: true\n          });\n          localStorage.setItem(\n            \"location\",\n            JSON.stringify(res.Response.View[0].Result[0].Location.Address)\n          );\n          localStorage.setItem(\"locationIsSet\", JSON.stringify(true));\n\n          // setGlobal({\n          //   locationIsSet: true,\n          //   location: res.Response.View[0].Result[0].Location.Address\n          // }); \n\n          resolve(res)\n\n          // return self.findCurrency()\n        });\n    })\n\n  },\n  findCurrency: async __ => {\n\n    return new Promise(async resolve => {\n      console.log(\"[[ Retrieving Currency Data ]]\");\n      const { self } = __;\n      if (self.state.countrySet) {\n        const country = self.state.country;\n        let url = \"https://restcountries.eu/rest/v2/name/\" + country;\n        await fetch(url, (err, res) => {\n          return res;\n        })\n          .then(res => {\n            return res.json();\n          })\n          .then(res => {\n            if (localStorage.getItem(\"activeCurrency\") !== null) {\n              let activeCurrency = JSON.parse(\n                localStorage.getItem(\"activeCurrency\")\n              );\n              localStorage.setItem(\"activeCurrencyIsSet\", JSON.stringify(true));\n              // setGlobal({\n              //   activeCurrency: activeCurrency,\n              //   activeCurrencyIsSet: true\n              // });\n              self.setState({\n                activeCurrencyIsSet: true,\n                activeCurrency: activeCurrency\n              });\n              ___.fetchExchangeRate({ currency: activeCurrency });\n              resolve(res)\n            } else {\n              // setGlobal({\n              //   activeCurrencyIsSet: true,\n              //   activeCurrency: res[0].currencies[0],\n              //   baseCurrency: res[0].currencies[0]\n              // });\n              localStorage.setItem(\n                \"activeCurrency\",\n                JSON.stringify(res[0].currencies[0])\n              );\n              localStorage.setItem(\n                \"baseCurrency\",\n                JSON.stringify(res[0].currencies[0])\n              );\n              localStorage.setItem(\"activeCurrencyIsSet\", JSON.stringify(true));\n              self.setState({\n                activeCurrencyIsSet: true,\n                activeCurrency: res[0].currencies[0],\n                baseCurrency: res[0].currencies[0]\n              });\n              ___.fetchExchangeRate({ currency: res[0].currencies[0] });\n              resolve(res)\n            }\n          });\n      }\n    })\n\n  },\n  // fetchExchangeRate: async __ => {\n  //   return new Promise(async resolve => {\n  //     console.log(\"[[ fetch Exchange Rate : data ]]\", __);\n  //     const { self } = __;\n  //     // const baseCurrency = getGlobal().baseCurrency;\n  //     const baseCurrency = \"ZAR\";\n  //     const activeCurrency = __.currency;\n  //     console.log(\n  //       \"[[ fetching Exchange Rate ]]\",\n  //       baseCurrency.symbol,\n  //       activeCurrency.symbol\n  //     );\n\n  //     let url =\n  //       \"https://api.exchangeratesapi.io/latest?base=\" +\n  //       baseCurrency.code +\n  //       \"&symbols=\" +\n  //       activeCurrency.code;\n\n  //     return await fetch(url, (err, res) => {\n  //       return res;\n  //     })\n  //       .then(res => {\n  //         return res.json();\n  //       })\n  //       .then(res => {\n  //         console.log(\n  //           \"[[ fetched Exchange Rate ]]\",\n  //           res.rates[activeCurrency.code]\n  //         );\n  //         let exchangeRate = res.rates[activeCurrency.code];\n  //         self.setState({\n  //           ready: true,\n  //           activeCurrency: __.currency,\n  //           exchangeRate: res.rates[activeCurrency.code]\n  //         });\n  //         // setGlobal({ exchangeRate: exchangeRate });\n  //         // return \n\n  //         resolve(exchangeRate)\n\n  //       });\n  //   }\n  //   }\n\n}\n\nexport default util;\n","import constants from \"./constants\";\n\nconst util = {\n  constants: () => {\n    return constants\n  },\n  set: async __ => {\n  },\n  get: () => {},\n  \n}\nexport default util","import React from \"react\";\n// import React, { getGlobal, setGlobal } from \"reactn\";\nimport { Redirect } from \"react-router-dom\";\nimport TransitionLayout from \"./components/Layouts/Transition\";\nimport Header from \"./components/elements/layout/Header\";\nimport HeaderMobile from \"./components/elements/layout/HeaderMobile.js\";\nimport Footer from \"./components/elements/layout/Footer\";\nimport FooterMobile from \"./components/elements/layout/FooterMobile\";\nimport WelcomeScreen from \"./components/elements/layout/WelcomeScreen.js\";\nimport { useAuth0 } from \"./utils/auth/react-auth0-spa\";\nimport { Icon, Spinner, Dialog, NumericInput } from \"@blueprintjs/core\";\nimport { CurrencyProvider } from \"./utils/context/CurrencyContext\";\nimport AccountContext, {\n\tAccountProvider\n} from \"./utils/context/AccountContext\";\nimport { notification, message, PageHeader } from \"antd\";\nimport FormLogin from \"./components/a/FormLogin/index.js\";\nimport FormRegister from \"./components/a/FormRegister/index.js\";\nimport constants from \"./utils/constants.js\";\nimport { findCity, getGeolocation, findCurrency, ___ } from \"./utils/util/\";\n// import Fn from \"./utils/fn/Fn\";\nimport { app, Fn, ui, api } from \"./utils/fn/Fn\";\nimport moment from \"moment\";\n\nimport Refresh from \"./components/a/Refresh\";\n\nconst queryString = require(\"query-string\");\n\nclass App extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tisOpen: false,\n\t\t\tdialogType: \"login\",\n\t\t\tdialogTitle: \"Login\",\n\t\t\tisVisible: false,\n\t\t\ttheme: \"\",\n\t\t\tmaskActive: false,\n\t\t\tmediaType: \"audio\",\n\t\t\tpopoverVisible: false,\n\t\t\tlat: 0,\n\t\t\tlong: 0,\n\t\t\tcity: \"\",\n\t\t\tcurrency: null,\n\t\t\tlocation: null,\n\t\t\tcountry: \"\",\n\t\t\tcountrySet: false,\n\t\t\tready: true,\n\t\t\tactiveCurrency: {},\n\t\t\tactiveCurrencyIsSet: false,\n\t\t\texchangeRate: 1,\n\t\t\tisAuthenticated: false,\n\t\t\taccount: Fn.get(\"account\"),\n\t\t\tredirectHome: false,\n\t\t\tnotifications: [],\n\t\t\tsubscribedProjects: [],\n\t\t\tmessages: [],\n\t\t\tsubmitInProgress: false,\n\t\t\tunreadMessages: [],\n\t\t\tallUnread: [],\n\t\t\tpage: {\n\t\t\t\ttitle: \"Dashboard\",\n\t\t\t\tsubtitle: \"...\"\n\t\t\t}\n\t\t};\n\n\t\t// this.switchTheme = this.switchTheme.bind(this);\n\n\t\tthis.login = this.login.bind(this);\n\t\tthis.register = this.register.bind(this);\n\t\tthis.logout = this.logout.bind(this);\n\t\tthis.toggleDialog = this.toggleDialog.bind(this);\n\t\tthis.setDialogToRegister = this.setDialogToRegister.bind(this);\n\t\tthis.setDialogToLogin = this.setDialogToLogin.bind(this);\n\t\tthis.submitLoginForm = this.submitLoginForm.bind(this);\n\t\tthis.submitRegisterForm = this.submitRegisterForm.bind(this);\n\t\tthis.refreshTokens = this.refreshTokens.bind(this);\n\t\tthis.getLocationData = this.getLocationData.bind(this);\n\t\t// this.getGeolocation = this.getGeolocation.bind(this)\n\t\t// this.findCity = this.findCity.bind(this)\n\n\t\tthis.updateAccount = this.updateAccount.bind(this);\n\t\tthis.clearState = this.clearState.bind(this);\n\t\tthis.fetchUnreadMessages = this.fetchUnreadMessages.bind(this);\n\t\tthis.setPage = this.setPage.bind(this);\n\n\t\tconsole.log(\" \");\n\t\tconsole.log(\"[[ Wrapper props]]\", props);\n\t\tconsole.log(\" \");\n\t}\n\n\tsetPage(page) {\n\t\tthis.setState({\n\t\t\tpage: page\n\t\t});\n\t}\n\n\tupdateAccount_() {\n\t\tapp.checkAuth(this).then(async result => {\n\t\t\tconsole.log(result);\n\t\t\tthis.setState({\n\t\t\t\taccount: Fn.get(\"account\")\n\t\t\t});\n\t\t});\n\t}\n\tupdateAccount(data) {\n\t\tconsole.log(\"updateAccount\", data);\n\t\tlet account = Fn.get(\"account\");\n\n\t\tthis.setState({\n\t\t\taccount: account\n\t\t});\n\t}\n\tsetDialogToRegister() {\n\t\tthis.setState({\n\t\t\tdialogType: \"register\",\n\t\t\tdialogTitle: \"Register an account\"\n\t\t});\n\t}\n\tsetDialogToLogin() {\n\t\tthis.setState({\n\t\t\tdialogType: \"login\",\n\t\t\tdialogTitle: \"Login\"\n\t\t});\n\t}\n\ttoggleDialog(config) {\n\t\tconst { title, type } = config;\n\t\tthis.setState({\n\t\t\tisOpen: !this.state.isOpen,\n\t\t\tdialogType: type,\n\t\t\tdialogTitle: title\n\t\t});\n\t}\n\tasync submitRegisterForm(data) {\n\t\tconsole.log(\"data\", data);\n\t\tthis.setState({\n\t\t\tsubmitInProgress: true\n\t\t});\n\n\t\t// const url = \"https://api.crew20.devcolab.site/v1/auth/register\";\n\t\t// const url = \"https://dev.iim.technology/v1/auth/register\";\n\t\tconst url = \"https://dev.iim.technology/v1/auth/register\";\n\n\t\tconst config = {\n\t\t\tmethod: \"POST\",\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/json\"\n\t\t\t},\n\t\t\tbody: JSON.stringify(data)\n\t\t};\n\n\t\tfetch(url, config)\n\t\t\t.then(res => {\n\t\t\t\treturn res.json();\n\t\t\t})\n\t\t\t.then(async res => {\n\t\t\t\tconsole.log(\"[[ Register Response ]]\", res);\n\n\t\t\t\tif (res.code === 400 || res.code === 401) {\n\t\t\t\t\tnotification.open({\n\t\t\t\t\t\tmessage: \"Error\",\n\t\t\t\t\t\tdescription: res.message\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tFn.store({ label: \"authTokens\", value: res.tokens });\n\t\t\t\t\tFn.store({ label: \"account\", value: res });\n\t\t\t\t\tFn.store({ label: \"isAuthenticated\", value: true });\n\n\t\t\t\t\tthis.setState({ isAuthenticated: false, account: res });\n\n\t\t\t\t\tawait Fn.userAfterRegistration({ self: this, data: res });\n\n\t\t\t\t\tthis.toggleDialog({ type: null, title: null });\n\n\t\t\t\t\t// this.props.history.push('/profile')\n\t\t\t\t\tthis.props.history.push(\"/confirmaccount\");\n\t\t\t\t\t// message.success('Logged In');\n\t\t\t\t}\n\t\t\t});\n\t}\n\tasync refreshTokens() {\n\t\t// const url = \"https://api.crew20.devcolab.site/v1/auth/refresh-tokens/\";\n\t\tconst url = \"https://dev.iim.technology/v1/auth/refresh-tokens/\";\n\n\t\tconst data = {\n\t\t\trefreshToken: Fn.get(\"account\").tokens.refresh.token\n\t\t};\n\t\tconst config = {\n\t\t\tmethod: \"POST\",\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/json\"\n\t\t\t},\n\t\t\tbody: JSON.stringify(data)\n\t\t};\n\t\tawait fetch(url, config)\n\t\t\t.then(res => {\n\t\t\t\treturn res.json();\n\t\t\t})\n\t\t\t.then(res => {\n\t\t\t\tconsole.log(\"[[ Refresh Response ]]\", res);\n\n\t\t\t\tif (res.code === 400 || res.code === 401) {\n\t\t\t\t\tnotification.open({\n\t\t\t\t\t\tmessage: \"Error\",\n\t\t\t\t\t\tdescription: res.message\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tlet account = Fn.get(\"account\");\n\t\t\t\t\taccount.tokens = res;\n\t\t\t\t\tFn.store({ label: \"authTokens\", value: res });\n\t\t\t\t\tFn.store({ label: \"account\", value: account });\n\t\t\t\t\tFn.store({ label: \"isAuthenticated\", value: true });\n\t\t\t\t\tthis.setState({ isAuthenticated: true, account: account });\n\t\t\t\t\tthis.toggleDialog({ type: null, title: null });\n\t\t\t\t\tlet start = moment(new Date().getTime());\n\t\t\t\t\tlet loginTimestamps = {\n\t\t\t\t\t\tstart: start,\n\t\t\t\t\t\tcheck: start.add(10, \"minutes\")\n\t\t\t\t\t};\n\t\t\t\t\tFn.set(\"loginTimestamps\", loginTimestamps);\n\t\t\t\t\t// this.props.history.push('/dashboard')\n\t\t\t\t\t// message.success('Logged In');\n\t\t\t\t}\n\t\t\t});\n\t}\n\tsubmitLoginForm = async data => {\n\t\tconst { email, password, type } = data;\n\n\t\tconsole.log(\" ** data \", data);\n\n\t\tthis.setState({\n\t\t\tsubmitInProgress: true\n\t\t});\n\n\t\tconst submitData = { email, password };\n\n\t\t// const url = \"https://api.crew20.devcolab.site/v1/auth/login\";\n\t\t// const url = Fn.get(\"env\").env === \"production\"\n\t\t// ? \"https://api.crew20.devcolab.site/v1/auth/\" + type + \"/\"\n\t\t// : \"http://localhost:3030/v1/auth/\"+ type + \"/\"\n\n\t\tconst url =\n\t\t\tFn.get(\"env\").env === \"production\"\n\t\t\t\t? \"https://dev.iim.technology/v1/auth/\" + type + \"/\"\n\t\t\t\t: \"http://localhost:3030/v1/auth/\" + type + \"/\";\n\n\t\tconst config = {\n\t\t\tmethod: \"POST\",\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/json\"\n\t\t\t},\n\t\t\tbody: JSON.stringify(submitData)\n\t\t};\n\n\t\t// alert('sending')\n\n\t\tconsole.log(url);\n\n\t\tawait fetch(url, config)\n\t\t\t.then(res => {\n\t\t\t\t// alert('sent')\n\n\t\t\t\treturn res.json();\n\t\t\t})\n\t\t\t.then(res => {\n\t\t\t\tconsole.log(\"[[ Login Response ]]\", res);\n\n\t\t\t\tif (res.code === 400 || res.code === 401) {\n\t\t\t\t\tnotification.open({\n\t\t\t\t\t\tmessage: \"Error\",\n\t\t\t\t\t\tdescription: res.message\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tFn.store({ label: \"authTokens\", value: res.tokens });\n\t\t\t\t\tFn.store({ label: \"account\", value: res });\n\t\t\t\t\tFn.store({ label: \"isAuthenticated\", value: true });\n\n\t\t\t\t\t// this.setState({\n\t\t\t\t\t//   account: res,\n\t\t\t\t\t//   isAuthenticated: true\n\t\t\t\t\t// })\n\n\t\t\t\t\tlet start = moment(new Date().getTime());\n\t\t\t\t\tlet loginTimestamps = {\n\t\t\t\t\t\tstart: start,\n\t\t\t\t\t\tcheck: start.add(10, \"minutes\")\n\t\t\t\t\t};\n\n\t\t\t\t\tFn.set(\"loginTimestamps\", loginTimestamps);\n\n\t\t\t\t\tthis.setState({ isAuthenticated: true, account: res });\n\t\t\t\t\tthis.toggleDialog({ type: null, title: null });\n\t\t\t\t\tthis.props.history.push(\"/dashboard\");\n\n\t\t\t\t\tmessage.success(\"Logged In\");\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tFn.get(\"account\").tokens &&\n\t\t\t\t\t\tFn.get(\"account\").tokens.refresh.token\n\t\t\t\t\t) {\n\t\t\t\t\t\tapp.refreshTokensEvery10Minutes();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t};\n\tlogin() {\n\t\tthis.toggleDialog({ type: \"login\", title: \"Login\" });\n\t}\n\tregister() {\n\t\tthis.toggleDialog({ type: \"register\", title: \"Register your account\" });\n\t}\n\tlogout() {\n\t\tlet env = Fn.get(\"env\");\n\t\tlet isMobile = Fn.get(\"isMobile\");\n\t\tthis.clearState();\n\t\tlocalStorage.clear();\n\n\t\tFn.store({ label: \"isAuthenticated\", value: false });\n\t\tFn.store({ label: \"account\", value: { tokens: null, user: null } });\n\t\tFn.set(\"env\", env);\n\t\tFn.set(\"isMobile\", isMobile);\n\t\t// // this.setState({ isAuthenticated: false })\n\t\tthis.props.history.push(\"/\");\n\t\t// window.href = window.location.origin;\n\t}\n\tclearState() {\n\t\tthis.setState({\n\t\t\tisAuthenticated: false,\n\t\t\taccount: null,\n\t\t\tnotifications: [],\n\t\t\tsubscribedProjects: [],\n\t\t\tmessages: []\n\t\t});\n\t}\n\tasync fetchUnreadMessages() {\n\t\tconst userId =\n\t\t\t(Fn.get(\"account\") &&\n\t\t\t\tFn.get(\"account\").user &&\n\t\t\t\tFn.get(\"account\").user.id) ||\n\t\t\tnull;\n\n\t\ttypeof userid !== \"undefined\" &&\n\t\t\t(await app\n\t\t\t\t.fetchUnreadMessages({ userId: userId, self: this })\n\t\t\t\t.then(response => {\n\t\t\t\t\tlet unread = [];\n\n\t\t\t\t\tfor (let item of response) {\n\t\t\t\t\t\tfor (let message of [...item.messages]) {\n\t\t\t\t\t\t\t// console.log(' all unread message ', message)\n\t\t\t\t\t\t\tunread.push(message);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tunreadMessages: response,\n\t\t\t\t\t\tallUnread: unread\n\t\t\t\t\t\t// ready: true\n\t\t\t\t\t});\n\t\t\t\t}));\n\t}\n\n\tasync getLocationData() {\n\t\tlet coords = await app.getGeoLocation();\n\t\tlet location = await app.reverseGeocodeCity({\n\t\t\tlat: coords.lat,\n\t\t\tlong: coords.long\n\t\t});\n\t\tlet currency = await app\n\t\t\t.findCurrency({ country: location.AdditionalData[0].value })\n\t\t\t.then(currency_ => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tlocation: location,\n\t\t\t\t\tcurrency: currency_,\n\t\t\t\t\tactiveCurrencyIsSet: true\n\t\t\t\t});\n\t\t\t});\n\t}\n\tcomponentDidUpdate() {}\n\tcomponentDidMount() {\n\t\tlet self = this;\n\n\t\tthis.getLocationData();\n\n\t\tui.checkmobile();\n\n\t\tapp.checkAuth(this).then(async isAuthenticated => {\n\t\t\tconsole.log(isAuthenticated);\n\n\t\t\tisAuthenticated && this.fetchUnreadMessages();\n\n\t\t\tlet account = (isAuthenticated && Fn.get(\"account\")) || null;\n\n\t\t\tisAuthenticated &&\n\t\t\t\tthis.setState({\n\t\t\t\t\taccount: account,\n\t\t\t\t\tisAuthenticated: true\n\t\t\t\t});\n\n\t\t\t!isAuthenticated &&\n\t\t\t\tthis.setState({\n\t\t\t\t\taccount: null,\n\t\t\t\t\tisAuthenticated: false\n\t\t\t\t});\n\n\t\t\tif (isAuthenticated && account && account.hasOwnProperty(\"user\")) {\n\t\t\t\tlet userId = account && account.user && account.user.id;\n\n\t\t\t\tapp.fetchNotifications({ self: this, userId: userId });\n\n\t\t\t\tapp.fetchSubscribedProjects({ self: this, userId: userId });\n\t\t\t} else {\n\t\t\t\tthis.setState({ ready: true });\n\t\t\t}\n\t\t\t// app.checkAuth2(this)\n\t\t\t// console.log('query string', window.location.search);\n\t\t\tconst parsed = queryString.parse(window.location.search);\n\t\t\t// console.log('parsed', parsed);\n\n\t\t\t// console.log('parsed type', typeof parsed)\n\n\t\t\tif (typeof parsed.newinvite !== \"undefined\") {\n\t\t\t\t// Fn.set('newinvite', JSON.parse(parsed.newinvite))\n\t\t\t\tlocalStorage.setItem(\"newinvite\", JSON.parse(parsed.newinvite));\n\t\t\t}\n\t\t\tif (typeof parsed.referrer !== \"undefined\") {\n\t\t\t\t// Fn.set('referrer', parsed.referrer)\n\t\t\t\tlocalStorage.setItem(\"referrer\", parsed.referrer);\n\t\t\t}\n\n\t\t\t// app.setEnv()\n\n\t\t\t// ___.checkMobile(self)\n\t\t\t// ___.setThemes(self)\n\t\t\t// ___.setEnv(self)\n\t\t\t// ___.getGeolocation(self)\n\t\t\t// ___.getCityData(self)\n\t\t\t// ___.getCurrency(self)\n\t\t\t// ___.checkAndParseInviteFromUrl(self)\n\t\t\t// ___.getNotifications(self)\n\t\t\t// ___.processOnboardingProject(self)\n\t\t});\n\t}\n\trender() {\n\t\tconst {\n\t\t\tready,\n\t\t\taccount,\n\t\t\tisAuthenticated,\n\t\t\ttheme,\n\t\t\tmaskActive,\n\t\t\tdialogTitle,\n\t\t\tdialogType,\n\t\t\tcurrency,\n\t\t\tactiveCurrencyIsSet,\n\t\t\tallUnread\n\t\t} = this.state;\n\t\tconst { children, history } = this.props;\n\n\t\treturn (\n\t\t\t<TransitionLayout>\n\t\t\t\t<div>\n\t\t\t\t\t{ready && activeCurrencyIsSet ? (\n\t\t\t\t\t\t<section\n\t\t\t\t\t\t\tid=\"Wrapper\"\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\tthis.state.theme.main +\n\t\t\t\t\t\t\t\t\" rubik trans-a w-100 -h-100 -overflow-hidden -scrollbar -scrollbar-dark\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<AccountProvider\n\t\t\t\t\t\t\t\tvalue={{\n\t\t\t\t\t\t\t\t\thistory: history,\n\t\t\t\t\t\t\t\t\taccount: account,\n\t\t\t\t\t\t\t\t\tisAuthenticated: isAuthenticated,\n\t\t\t\t\t\t\t\t\tupdateAccount: this.updateAccount,\n\t\t\t\t\t\t\t\t\tlogin: this.login,\n\t\t\t\t\t\t\t\t\trefreshTokens: this.refreshTokens,\n\t\t\t\t\t\t\t\t\tregister: this.register,\n\t\t\t\t\t\t\t\t\tlogout: this.logout,\n\t\t\t\t\t\t\t\t\tnotifications: this.state.notifications,\n\t\t\t\t\t\t\t\t\tsubscribedProjects: this.state.subscribedProjects,\n\t\t\t\t\t\t\t\t\tmessages: this.state.messages,\n\t\t\t\t\t\t\t\t\tcurrency: this.state.currency,\n\t\t\t\t\t\t\t\t\tlocation: this.state.location,\n\t\t\t\t\t\t\t\t\tallUnread: allUnread,\n\t\t\t\t\t\t\t\t\tsetPage: this.setPage\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<main\n\t\t\t\t\t\t\t\t\tid=\"App\"\n\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t(ui.mobile() ? \" h-100 overflow-hidden \" : \"  \") +\n\t\t\t\t\t\t\t\t\t\t\" sans-serif relative db \"\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<section\n\t\t\t\t\t\t\t\t\t\tstyle={\n\t\t\t\t\t\t\t\t\t\t\tthis.state.isAuthenticated\n\t\t\t\t\t\t\t\t\t\t\t\t? { top: \"22vh\" }\n\t\t\t\t\t\t\t\t\t\t\t\t: { top: \"0vh\" }\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tid=\"Main\"\n\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t(ui.mobile() ? \" h-100 overflow-auto \" : \"  \") +\n\t\t\t\t\t\t\t\t\t\t\t\" content relative flex flex-column -pa4 -pt6 -mw7 center w-100 -h-100\"\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t(this.props.history.location.pathname !== \"/\" &&\n\t\t\t\t\t\t\t\t\t\t\t\t!this.state.isAuthenticated\n\t\t\t\t\t\t\t\t\t\t\t\t\t? \" blur \"\n\t\t\t\t\t\t\t\t\t\t\t\t\t: \"\") + \" flex relative flex-column w-100 \"\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{children}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</section>\n\n\t\t\t\t\t\t\t\t\t{this.props.history.location.pathname !== \"/\" &&\n\t\t\t\t\t\t\t\t\t\t!this.state.isAuthenticated && <LoggedOut />}\n\n\t\t\t\t\t\t\t\t\t{ui.mobile() ? (\n\t\t\t\t\t\t\t\t\t\t<HeaderMobile history={history} />\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<Header history={history} />\n\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t{this.state.isAuthenticated && (\n\t\t\t\t\t\t\t\t\t\t<PageHeader\n\t\t\t\t\t\t\t\t\t\t\tstyle={\n\t\t\t\t\t\t\t\t\t\t\t\tthis.state.page ? { top: \"12vh\" } : { top: \"22vh\" }\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tonBack={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(\"*** \", this.props);\n\t\t\t\t\t\t\t\t\t\t\t\tthis.props.history.goBack();\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\ttitle={this.state.page.title}\n\t\t\t\t\t\t\t\t\t\t\tsubTitle={this.state.page.subtitle}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"vh10 pv0 ant-page-header fixed flex top-0 left-0 w-100 bn bs-b items-center\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{/* <div className=\"flex flex-row pa0\">\n  {\n    this.state.page && this.state.page.buttons && this.state.page.buttons.length && this.state.page.buttons.map(( button, index) => (\n      <button className=\"flex flex-column f5 fw7 black-50 ph4 h-100 items-center justify-center\">{button.label}</button>\n    ))\n  }\n  </div> */}\n\t\t\t\t\t\t\t\t\t\t\t<Refresh\n\t\t\t\t\t\t\t\t\t\t\t\tready={this.state.ready}\n\t\t\t\t\t\t\t\t\t\t\t\tdashboard={this.props.dashboard}\n\t\t\t\t\t\t\t\t\t\t\t\trefresh={this.refresh}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</PageHeader>\n\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t{ui.mobile() ? (\n\t\t\t\t\t\t\t\t\t\t<FooterMobile\n\t\t\t\t\t\t\t\t\t\t\ttheme={theme}\n\t\t\t\t\t\t\t\t\t\t\tswitchTheme={this.switchTheme}\n\t\t\t\t\t\t\t\t\t\t\thistory={history}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<Footer\n\t\t\t\t\t\t\t\t\t\t\ttheme={theme}\n\t\t\t\t\t\t\t\t\t\t\tswitchTheme={this.switchTheme}\n\t\t\t\t\t\t\t\t\t\t\thistory={history}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t{maskActive ? (\n\t\t\t\t\t\t\t\t\t\t<div className=\"trans-a z-1000 mask bg-black-80 fixed top-0 ldft-0 vh-100 w-100 \" />\n\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t</main>\n\n\t\t\t\t\t\t\t\t<Dialog\n\t\t\t\t\t\t\t\t\tclassName={\"bp3-light\"}\n\t\t\t\t\t\t\t\t\t// icon=\"info-sign\"\n\t\t\t\t\t\t\t\t\tonClose={this.toggleDialog}\n\t\t\t\t\t\t\t\t\ttitle={dialogTitle}\n\t\t\t\t\t\t\t\t\tonValueChange={this.onValueChange}\n\t\t\t\t\t\t\t\t\t{...this.state}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div className=\"flex flex-column \">\n\t\t\t\t\t\t\t\t\t\t{this.state.dialogType === \"register\" && (\n\t\t\t\t\t\t\t\t\t\t\t// <FormRegister\n\t\t\t\t\t\t\t\t\t\t\t//   setDialogToRegister={this.setDialogToRegister}\n\t\t\t\t\t\t\t\t\t\t\t//   setDialogToLogin={this.setDialogToLogin}\n\t\t\t\t\t\t\t\t\t\t\t//   dialogType={dialogType}\n\t\t\t\t\t\t\t\t\t\t\t//   submitRegisterForm={this.submitRegisterForm}\n\t\t\t\t\t\t\t\t\t\t\t//   submitInProgress={this.state.submitInProgress}\n\t\t\t\t\t\t\t\t\t\t\t// />\n\t\t\t\t\t\t\t\t\t\t\t<FormLogin\n\t\t\t\t\t\t\t\t\t\t\t\tsetDialogToRegister={this.setDialogToRegister}\n\t\t\t\t\t\t\t\t\t\t\t\tsetDialogToLogin={this.setDialogToLogin}\n\t\t\t\t\t\t\t\t\t\t\t\tdialogType={dialogType}\n\t\t\t\t\t\t\t\t\t\t\t\tsubmitLoginForm={this.submitLoginForm}\n\t\t\t\t\t\t\t\t\t\t\t\tsubmitInProgress={this.state.submitInProgress}\n\t\t\t\t\t\t\t\t\t\t\t\ttype={\"register\"}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t{this.state.dialogType === \"login\" && (\n\t\t\t\t\t\t\t\t\t\t\t<FormLogin\n\t\t\t\t\t\t\t\t\t\t\t\tsetDialogToRegister={this.setDialogToRegister}\n\t\t\t\t\t\t\t\t\t\t\t\tsetDialogToLogin={this.setDialogToLogin}\n\t\t\t\t\t\t\t\t\t\t\t\tdialogType={dialogType}\n\t\t\t\t\t\t\t\t\t\t\t\tsubmitLoginForm={this.submitLoginForm}\n\t\t\t\t\t\t\t\t\t\t\t\tsubmitInProgress={this.state.submitInProgress}\n\t\t\t\t\t\t\t\t\t\t\t\ttype={\"login\"}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t{this.state.dialogType === \"forgotpassword\" && (\n\t\t\t\t\t\t\t\t\t\t\t<FormLogin\n\t\t\t\t\t\t\t\t\t\t\t\tsetDialogToRegister={this.setDialogToRegister}\n\t\t\t\t\t\t\t\t\t\t\t\tsetDialogToLogin={this.setDialogToLogin}\n\t\t\t\t\t\t\t\t\t\t\t\tdialogType={dialogType}\n\t\t\t\t\t\t\t\t\t\t\t\tsubmitInProgress={this.state.submitInProgress}\n\t\t\t\t\t\t\t\t\t\t\t\ttype={\"forgotpassword\"}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t{/* {\n                    this.state.dialogType === \"login\" &&\n                    <div\n                      onClick={this.setDialogToRegister}\n                      className=\"pointer flex flex-column ph4 pt4 pb3 black-60 f5 fw6\">\n                      Register your account\n                    </div>\n                  }\n\n                  {\n                    this.state.dialogType === \"register\" &&\n                    <div\n                      onClick={this.setDialogToLogin}\n                      className=\"pointer flex flex-column ph4 pt4 pb3 black-60 f5 fw6\">\n                      Login\n                    </div>\n                  } */}\n\t\t\t\t\t\t\t\t</Dialog>\n\t\t\t\t\t\t\t</AccountProvider>\n\t\t\t\t\t\t</section>\n\t\t\t\t\t) : null}\n\t\t\t\t</div>\n\t\t\t</TransitionLayout>\n\t\t);\n\t}\n}\n\nexport default App;\n\nconst LoggedOut = () => (\n\t<>\n\t\t<div className=\"hover-slide-up trans-a flex flex-column items-center justify-center fixed top-0 left-0 h-100 w-100 bg-black-50 z-9\">\n\t\t\t<span className=\"f4 fw5 white-60\">\n\t\t\t\tYou have been logged out. Please log in again.\n\t\t\t</span>\n\t\t</div>\n\t</>\n);\n","import React from \"react\";\nimport { Route, Router, Switch } from \"react-router-dom\";\n// import Maintenance from \"./components/Pages/Utility/Maintenance\";\n// import Profile from \"./components/Pages/Account/Profile\";\nimport Home from \"./components/Pages/General/Home\";\n// import Reservations from \"./components/Pages/General/Reservations\";\n// import Messages from \"./components/Pages/General/Messages\";\nimport Account from './components/Pages/Account/Account/index.js';\nimport Network from './components/Pages/General/Network/index.js';\nimport Messages from './components/Pages/General/Messages/index.js';\nimport MyProjects from './components/Pages/General/MyProjects.js';\nimport Notifications from \"./components/Pages/General/Notifications/index.js\";\nimport OwnProfile from './components/Pages/General/OwnProfile.js';\nimport SingleProject from './components/Pages/General/SingleProject.js';\nimport ViewProfile from './components/Pages/General/ViewProfile.js';\nimport Welcome from './components/Pages/General/Welcome.js';\nimport Calendar from './components/Pages/General/Calendar/index.js';\nimport Dashboard from './components/Pages/General/Dashboard.js';\nimport ConfirmAccount from './components/Pages/Utility/ConfirmAccount.js';\nimport ConfirmAccountConfirmed from './components/Pages/Utility/ConfirmAccountConfirmed.js';\nimport { Helmet } from \"react-helmet\";\n// import PrivateRoute from \"./utils/PrivateRoute\";\n// import Loading from \"./components/elements/Loading\";\nimport NotFound from \"./components/Pages/Utility/NotFound\";\nimport Fn from './utils/fn/Fn.js';\n// import { useAuth0 } from \"./utils/auth/react-auth0-spa\";\n// import AccountContext from './utils/context/AccountContext.js';\nimport history from \"./utils/history\";\nimport { siteMeta } from './utils/config/app.config';\nimport initialise from \"./utils/init.js\";\nimport Wrapper from \"./Wrapper\";\n\nwindow.Fn = Fn;\nwindow.logged = []\n// let a = 0\ninitialise.start()\n\nconst App = () => {\n\n  // const { loading, isAuthenticated } = useAuth0();\n\n  // if (loading) {\n  //   return <Loading />;\n  // }\n\n  return (\n\n    <Router history={history}>\n      <div\n        id=\"App\"\n        className={(\" flex flex-column h-100\")}>\n        <Wrapper history={history}>\n        <Helmet>\n          <meta name=\"viewport\" content=\"width=device-width,initial-scale=0.7,maximum-scale=1,minimum-scale=0.7\" />\n          {/* <meta name=\"viewport\" content=\"width=device-width,user-scalable=no,initial-scale=0.7,maximum-scale=1,minimum-scale=0.7,viewport-fit=cover\" /> */}\n          <meta charSet=\"utf-8\" />\n          <title>{siteMeta.title}</title>\n          <meta name=\"description\" content={siteMeta.description} />\n          <link rel=\"canonical\" href={siteMeta.siteUrl} />\n          <link rel=\"manifest\" href=\"/manifest.json\" />\n          <script src=\"https://cdnjs.cloudflare.com/ajax/libs/aws-sdk/2.304.0/aws-sdk.min.js\"></script>\n        </Helmet>\n\n          <Switch>\n\n            <Route exact path=\"/\" component={Welcome} />\n            <Route exact path=\"/home\" component={Home} />\n            <Route exact path=\"/dashboard\" component={Dashboard} />\n            <Route exact path=\"/network\" component={Network} />\n            <Route exact path=\"/project/:id\" component={SingleProject} />\n            <Route exact path=\"/myprojects\" component={MyProjects} />\n            <Route exact path=\"/messages\" component={Messages} />\n            <Route exact path=\"/calendar\" component={Calendar} />\n            <Route exact path=\"/notifications\" component={Notifications} />\n            <Route exact path=\"/profile\" component={OwnProfile} />\n            <Route exact path=\"/account\" component={Account} />\n            <Route path=\"/user/:id\" component={ViewProfile} />\n            <Route path=\"/confirmaccount\" component={ConfirmAccount} />\n            <Route path=\"/confirm\" component={ConfirmAccountConfirmed} />\n\n            \n            <Route path=\"*\" component={NotFound} />\n\n          </Switch>\n\n        </Wrapper>\n\n      </div>\n    </Router>\n\n  )\n}\n\nexport default App\n// App.contextType = AccountContext","import 'react-app-polyfill/ie11';\nimport React from \"react\";\n// import React, { getGlobal } from \"reactn\";\nimport ReactDOM from \"react-dom\";\nimport * as serviceWorker from \"./serviceWorker\";\n// import { Auth0Provider } from \"./utils/auth/react-auth0-spa\";\nimport authConfig from \"./utils/config/auth_config.json\";\nimport history from \"./utils/history\";\nimport './utils/stylesheets'\nimport App from \"./App\";\nimport Fn from './utils/fn/Fn.js'\n// import ulog from 'ulog';\n// window.log = ulog;\nwindow.Fn = Fn;\n\n// const onRedirectCallback = appState => {\n//   console.log('appState', appState)\n//   history.push(\n//     appState && appState.targetUrl\n//       ? appState.targetUrl\n//       : window.location.pathname\n//   );\n// }\n\n// ReactDOM.render(\n//   <App />,\n//   document.getElementById(\"root\")\n// );\n\nReactDOM.render(\n  <App />,\n  document.getElementById(\"root\")\n);\nserviceWorker.unregister();\n","import { getGlobal } from \"reactn\";\nimport moment from 'moment';\nimport appconfig from '../config/app.config.js';\n// console.log('appconfig', appconfig)\n// const mailgun = require(\"mailgun-js\");\n// var Mailjet = require('node-mailjet').connect(appconfig.mailjet.api_key, appconfig.mailjet.api_secret);\n// Reservation_Notification_Chef\nlet mailsend = {};\n\nmailsend.SendNotification = async (data_) => {\n\n  console.log('mailsend.SendNotification', data_)\n\n  const { user, content, subject, title } = data_;\n\n  console.log('')\n\n  let body = {\n    to: user.email,\n    subject: subject,\n    userFirstName: user.profile.name.first,\n    userLastName: user.profile.name.last,\n    userAvatar: user.profile.picture,\n    content: content,\n    title: title\n  }\n\n  console.log('body', body);\n\n  const config_ = {\n    method: \"POST\",\n    headers: {\n      \"content-type\": \"application/x-www-form-urlencoded\"\n    },\n    body: {}\n  }\n  // console.log('config',config, config.email)\n  const data = {\n    apiKey: \"15b3483f-bc64-4feb-9e8e-e3909ca8646f\",\n    from: appconfig.email.systemEmail,\n    to: body.to,\n    bodyText: body.content,\n    merge_content: body.content,\n    template: \"crew20_notification\",\n    isTransactional: true,\n    merge_title: body.title,\n    merge_senderfirstname: body.senderFirstName,\n    merge_senderlastname: body.senderLastName,\n    // merge_useravatar: body.userAvatar,\n    subject: body.subject,\n    fromName: appconfig.email.fromName,\n    msgFromName: appconfig.email.fromName,\n    replyTo: appconfig.email.systemEmail,\n    sender: appconfig.email.fromName\n  };\n\n  console.log('User Mailsend data', data)\n\n  const url =\n    \"https://api.elasticemail.com/v2/email/send?apikey=\" +\n    data.apiKey +\n    \"&from=\" +\n    data.from +\n    \"&to=\" +\n    data.to +\n    \"&template=\" +\n    data.template +\n    \"&isTransactional=\" +\n    body.isTransactional +\n    \"&bodyText=\" +\n    data.bodyText +\n    \"&merge_content=\" +\n    data.merge_content +\n    \"&merge_usernamefirst=\" +\n    data.merge_usernamefirst +\n    \"&merge_usernamelast=\" +\n    data.merge_usernamelast +\n    \"&merge_email=\" +\n    data.merge_email +\n    \"&subject=\" +\n    data.subject +\n    \"&fromName=\" +\n    data.fromName +\n    \"&msgFromName=\" +\n    data.msgFromName +\n    \"&replyTo=\" +\n    data.replyTo +\n    \"&sender=\" +\n    data.sender;\n\n  // console.log(\"URL\", url);\n\n  await fetch(url, config_)\n    .then(res => {\n      return res.json();\n    })\n    .then(data => {\n      console.log(\"mailsend.reservationRequestNotification Request succeeded with JSON response\", data)\n      return data\n    })\n    .catch(error => {\n      console.log(\"mailsend.reservationRequestNotification Request failed\", error);\n      return error\n    });\n}\nmailsend.SendConfirmationEmail = async (data_) => {\n\n  console.log('mailsend.SendNotification', data_)\n\n  const { user, subject, title, content, link } = data_;\n\n  console.log('')\n\n  let body = {\n    to: user.email,\n    subject: subject,\n    title: title,\n    // userFirstName: user.profile.name.first,\n    // userLastName: user.profile.name.last,\n    // userAvatar: user.profile.picture,\n    content: content,\n    link: link\n    // title: title\n  }\n\n  console.log('body', body);\n\n  const config_ = {\n    method: \"POST\",\n    headers: {\n      \"content-type\": \"application/x-www-form-urlencoded\"\n    },\n    body: {}\n  }\n  // console.log('config',config, config.email)\n  const data = {\n    apiKey: \"15b3483f-bc64-4feb-9e8e-e3909ca8646f\",\n    from: appconfig.email.systemEmail,\n    to: body.to,\n    bodyText: body.content,\n    merge_content: body.content,\n    template: \"crew20_confirmationemail\",\n    isTransactional: true,\n    merge_title: body.title,\n    // merge_senderfirstname: body.senderFirstName,\n    // merge_senderlastname: body.senderLastName,\n    // merge_useravatar: body.userAvatar,\n    subject: body.subject,\n    fromName: appconfig.email.fromName,\n    msgFromName: appconfig.email.fromName,\n    replyTo: appconfig.email.systemEmail,\n    sender: appconfig.email.fromName,\n    merge_link: body.link\n  };\n\n  console.log('User Mailsend data', data)\n\n  const url =\n    \"https://api.elasticemail.com/v2/email/send?apikey=\" +\n    data.apiKey +\n    \"&from=\" +\n    data.from +\n    \"&to=\" +\n    data.to +\n    \"&template=\" +\n    data.template +\n    \"&isTransactional=\" +\n    body.isTransactional +\n    \"&bodyText=\" +\n    data.bodyText +\n    \"&merge_title=\" +\n    data.merge_title +\n    \"&merge_content=\" +\n    data.merge_content +\n    \"&merge_link=\" +\n    data.merge_link +\n    \"&subject=\" +\n    data.subject +\n    \"&fromName=\" +\n    data.fromName +\n    \"&msgFromName=\" +\n    data.msgFromName +\n    \"&replyTo=\" +\n    data.replyTo +\n    \"&sender=\" +\n    data.sender;\n\n  // console.log(\"URL\", url);\n\n  await fetch(url, config_)\n    .then(res => {\n      return res.json();\n    })\n    .then(data => {\n      console.log(\"mailsend.SendConfirmationEmail Request succeeded with JSON response\", data)\n      return data\n    })\n    .catch(error => {\n      console.log(\"mailsend.SendConfirmationEmail Request failed\", error);\n      return error\n    });\n}\nmailsend.SendEmail = async (data_) => {\n\n  console.log('mailsend.SendPasswordReset', data_)\n\n  const { user, subject, title, content, link } = data_;\n\n  console.log('')\n\n  let body = {\n    to: user.email,\n    subject: subject,\n    title: title,\n    content: content,\n    link: link\n  }\n\n  console.log('body', body);\n\n  const config_ = {\n    method: \"POST\",\n    headers: {\n      \"content-type\": \"application/x-www-form-urlencoded\"\n    },\n    body: {}\n  }\n  // console.log('config',config, config.email)\n  const data = {\n    apiKey: \"15b3483f-bc64-4feb-9e8e-e3909ca8646f\",\n    from: appconfig.email.systemEmail,\n    to: body.to,\n    bodyText: body.content,\n    merge_content: body.content,\n    template: \"crew20_confirmationemail\",\n    isTransactional: true,\n    merge_title: body.title,\n    // merge_senderfirstname: body.senderFirstName,\n    // merge_senderlastname: body.senderLastName,\n    // merge_useravatar: body.userAvatar,\n    subject: body.subject,\n    fromName: appconfig.email.fromName,\n    msgFromName: appconfig.email.fromName,\n    replyTo: appconfig.email.systemEmail,\n    sender: appconfig.email.fromName,\n    merge_link: body.link\n  };\n\n  console.log('User Mailsend data', data)\n\n  const url =\n    \"https://api.elasticemail.com/v2/email/send?apikey=\" +\n    data.apiKey +\n    \"&from=\" +\n    data.from +\n    \"&to=\" +\n    data.to +\n    \"&template=\" +\n    data.template +\n    \"&isTransactional=\" +\n    body.isTransactional +\n    \"&bodyText=\" +\n    data.bodyText +\n    \"&merge_title=\" +\n    data.merge_title +\n    \"&merge_content=\" +\n    data.merge_content +\n    \"&merge_link=\" +\n    data.merge_link +\n    \"&subject=\" +\n    data.subject +\n    \"&fromName=\" +\n    data.fromName +\n    \"&msgFromName=\" +\n    data.msgFromName +\n    \"&replyTo=\" +\n    data.replyTo +\n    \"&sender=\" +\n    data.sender;\n\n  // console.log(\"URL\", url);\n\n  await fetch(url, config_)\n    .then(res => {\n      return res.json();\n    })\n    .then(data => {\n      console.log(\"mailsend.SendConfirmationEmail Request succeeded with JSON response\", data)\n      return data\n    })\n    .catch(error => {\n      console.log(\"mailsend.SendConfirmationEmail Request failed\", error);\n      return error\n    });\n}\nmailsend.SendPasswordReset = async (data_) => {\n\n  console.log('mailsend.SendPasswordReset', data_)\n\n  const { user, subject, title, content, link } = data_;\n\n  console.log('')\n\n  let body = {\n    to: user.email,\n    subject: subject,\n    title: title,\n    content: content,\n    link: link\n  }\n\n  console.log('body', body);\n\n  const config_ = {\n    method: \"POST\",\n    headers: {\n      \"content-type\": \"application/x-www-form-urlencoded\"\n    },\n    body: {}\n  }\n  // console.log('config',config, config.email)\n  const data = {\n    apiKey: \"15b3483f-bc64-4feb-9e8e-e3909ca8646f\",\n    from: appconfig.email.systemEmail,\n    to: body.to,\n    bodyText: body.content,\n    merge_content: body.content,\n    template: \"crew20_confirmationemail\",\n    isTransactional: true,\n    merge_title: body.title,\n    // merge_senderfirstname: body.senderFirstName,\n    // merge_senderlastname: body.senderLastName,\n    // merge_useravatar: body.userAvatar,\n    subject: body.subject,\n    fromName: appconfig.email.fromName,\n    msgFromName: appconfig.email.fromName,\n    replyTo: appconfig.email.systemEmail,\n    sender: appconfig.email.fromName,\n    merge_link: body.link\n  };\n\n  console.log('User Mailsend data', data)\n\n  const url =\n    \"https://api.elasticemail.com/v2/email/send?apikey=\" +\n    data.apiKey +\n    \"&from=\" +\n    data.from +\n    \"&to=\" +\n    data.to +\n    \"&template=\" +\n    data.template +\n    \"&isTransactional=\" +\n    body.isTransactional +\n    \"&bodyText=\" +\n    data.bodyText +\n    \"&merge_title=\" +\n    data.merge_title +\n    \"&merge_content=\" +\n    data.merge_content +\n    \"&merge_link=\" +\n    data.merge_link +\n    \"&subject=\" +\n    data.subject +\n    \"&fromName=\" +\n    data.fromName +\n    \"&msgFromName=\" +\n    data.msgFromName +\n    \"&replyTo=\" +\n    data.replyTo +\n    \"&sender=\" +\n    data.sender;\n\n  // console.log(\"URL\", url);\n\n  await fetch(url, config_)\n    .then(res => {\n      return res.json();\n    })\n    .then(data => {\n      console.log(\"mailsend.SendConfirmationEmail Request succeeded with JSON response\", data)\n      return data\n    })\n    .catch(error => {\n      console.log(\"mailsend.SendConfirmationEmail Request failed\", error);\n      return error\n    });\n}\nmailsend.InviteByEmail = async (invitation) => {\n\n  console.log('mailsend.SendNotification', invitation)\n\n  const { link, receiverEmail, subject, title, content, projectTitle, projectStartDate } = invitation;\n\n  console.log('')\n\n  let body = {\n    to: receiverEmail,\n    subject: subject,\n    content: content,\n    title: title,\n    projectTitle: projectTitle,\n    projectStartDate: projectStartDate,\n    link: link\n  }\n\n  console.log('body', body);\n\n  const config_ = {\n    method: \"POST\",\n    headers: {\n      \"content-type\": \"application/x-www-form-urlencoded\"\n    },\n    body: {}\n  }\n  // console.log('config',config, config.email)\n  const data = {\n    apiKey: \"15b3483f-bc64-4feb-9e8e-e3909ca8646f\",\n    from: appconfig.email.systemEmail,\n    to: body.to,\n    bodyText: body.content,\n    merge_content: body.content,\n    template: \"crew20_inviteByEmail\",\n    isTransactional: true,\n    merge_title: body.title,\n    merge_projectStartDate: body.projectStartDate,\n    merge_projectTitle: body.projectTitle,\n    merge_link: body.link,\n    // merge_senderfirstname: body.senderFirstName,\n    // merge_senderlastname: body.senderLastName,\n    // merge_useravatar: body.userAvatar,\n    subject: body.subject,\n    fromName: appconfig.email.fromName,\n    msgFromName: appconfig.email.fromName,\n    replyTo: appconfig.email.systemEmail,\n    sender: appconfig.email.fromName\n  };\n\n  console.log('User Mailsend data', data)\n\n  const url =\n    \"https://api.elasticemail.com/v2/email/send?apikey=\" +\n    data.apiKey +\n    \"&from=\" +\n    data.from +\n    \"&to=\" +\n    data.to +\n    \"&template=\" +\n    data.template +\n    \"&isTransactional=\" +\n    body.isTransactional +\n    \"&bodyText=\" +\n    data.bodyText +\n    \"&merge_content=\" +\n    data.merge_content +\n    \"&merge_projectTitle=\" +\n    data.merge_projectTitle +\n    \"&merge_projectStartDate=\" +\n    data.merge_projectStartDate +\n    \"&merge_title=\" +\n    data.merge_title +\n    \"&merge_link=\" +\n    data.merge_link +\n    // \"&merge_email=\" +\n    // data.merge_email +\n    \"&subject=\" +\n    data.subject +\n    \"&fromName=\" +\n    data.fromName +\n    \"&msgFromName=\" +\n    data.msgFromName +\n    \"&replyTo=\" +\n    data.replyTo +\n    \"&sender=\" +\n    data.sender;\n\n  // console.log(\"URL\", url);\n\n  return await fetch(url, config_)\n    .then(res => {\n      return res.json();\n    })\n    .then(data => {\n      console.log(\"mailsend.inviteByEmail Request succeeded with JSON response\", data)\n      return data\n    })\n    .catch(error => {\n      console.log(\"mailsend.inviteByEmail Request failed\", error);\n      return error\n    });\n}\nexport default mailsend;"],"sourceRoot":""}